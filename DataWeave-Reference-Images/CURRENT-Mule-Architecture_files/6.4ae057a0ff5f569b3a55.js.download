(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+AVE":function(e,t,n){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function i(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function a(e,n){function r(){var e=a;i(e)&&e.a.parentNode&&n(e.g)}var a=e;t(e.b,r),t(e.c,r),i(e)}function o(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var s=null,c=null,l=null,u=null;function p(){return null===u&&(u=!!document.fonts),u}function h(){if(null===l){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}l=""!==e.style.font}return l}function d(e,t){return[e.style,e.weight,h()?e.stretch:"","100px",t].join(" ")}o.prototype.load=function(e,t){var i=this,o=e||"BESbswy",l=0,u=t||3e3,h=(new Date).getTime();return new Promise((function(e,t){if(p()&&!function(){if(null===c)if(p()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);c=!!e&&603>parseInt(e[1],10)}else c=!1;return c}()){var f=new Promise((function(e,t){!function n(){(new Date).getTime()-h>=u?t(Error(u+"ms timeout exceeded")):document.fonts.load(d(i,'"'+i.family+'"'),o).then((function(t){1<=t.length?e():setTimeout(n,25)}),t)}()})),g=new Promise((function(e,t){l=setTimeout((function(){t(Error(u+"ms timeout exceeded"))}),u)}));Promise.race([g,f]).then((function(){clearTimeout(l),e(i)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function c(){var t;(t=-1!=m&&-1!=v||-1!=m&&-1!=b||-1!=v&&-1!=b)&&((t=m!=v&&m!=b&&v!=b)||(null===s&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=s&&(m==y&&v==y&&b==y||m==x&&v==x&&b==x||m==C&&v==C&&b==C)),t=!t),t&&(w.parentNode&&w.parentNode.removeChild(w),clearTimeout(l),e(i))}var p=new n(o),f=new n(o),g=new n(o),m=-1,v=-1,b=-1,y=-1,x=-1,C=-1,w=document.createElement("div");w.dir="ltr",r(p,d(i,"sans-serif")),r(f,d(i,"serif")),r(g,d(i,"monospace")),w.appendChild(p.a),w.appendChild(f.a),w.appendChild(g.a),document.body.appendChild(w),y=p.a.offsetWidth,x=f.a.offsetWidth,C=g.a.offsetWidth,function e(){if((new Date).getTime()-h>=u)w.parentNode&&w.parentNode.removeChild(w),t(Error(u+"ms timeout exceeded"));else{var n=document.hidden;!0!==n&&void 0!==n||(m=p.a.offsetWidth,v=f.a.offsetWidth,b=g.a.offsetWidth,c()),l=setTimeout(e,50)}}(),a(p,(function(e){m=e,c()})),r(p,d(i,'"'+i.family+'",sans-serif')),a(f,(function(e){v=e,c()})),r(f,d(i,'"'+i.family+'",serif')),a(g,(function(e){b=e,c()})),r(g,d(i,'"'+i.family+'",monospace'))}))}))},e.exports=o}()},"+ETr":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("QoSw"),i=n("nsO7"),a=n("Xpu5"),o=n("K5wl"),s=n("TLy2"),c=n("xVbo"),l=n("8j5Y"),u=n("x77O"),p=n("5xGT"),h=n("6Oco"),d=n("EM62"),f=function(){function e(e,t,n,r){this.ll=e,this.commandService=t,this.changeBuilder=n,this.syncEdata=r}return Object.defineProperty(e.prototype,"name",{get:function(){return"ShapeEDataChangeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=this,r=e.__sakota__.getChanges();return Object(i.isEmpty)(e.eData)||Object(i.isEmpty)(r)||"Execute"!==t?h.a:this.ll.forDiagram(e.id,!1).getDiagramOnce().pipe(Object(s.a)((function(t){return n.changeBuilder.buildChanges(e,t).pipe(Object(c.a)((function(e){return e.length>0})),Object(l.a)((function(t){n.syncEdata.syncEdataChanges(t,[e]),t.forEach((function(t){var r=t.__sakota__.getChanges();Object(i.isEmpty)(r)||n.commandService.dispatch(a.a.applyModifierEData,t.id,{modifier:r,diagramId:e.id})}))})))})))},e.\u0275fac=function(t){return new(t||e)(d.pc(r.a),d.pc(p.B),d.pc(u.a),d.pc(o.a))},e.\u0275prov=d.bc({token:e,factory:e.\u0275fac}),e}()},"+ITg":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n("o5Kk")),a=s(n("8wi9")),o=s(n("fX4D"));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));"string"==typeof e&&(e=JSON.parse(e)),e&&e.conditions&&n.setConditions(e.conditions),e&&e.onSuccess&&n.on("success",e.onSuccess),e&&e.onFailure&&n.on("failure",e.onFailure),e&&(e.name||0===e.name)&&n.setName(e.name);var r=e&&e.priority||1;n.setPriority(r);var i=e&&e.event||{type:"unknown"};return n.setEvent(i),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"setPriority",value:function(e){if((e=parseInt(e,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=e,this}},{key:"setName",value:function(e){if(!e&&0!==e)throw new Error('Rule "name" must be defined');return this.name=e,this}},{key:"setConditions",value:function(e){if(!Object.prototype.hasOwnProperty.call(e,"all")&&!Object.prototype.hasOwnProperty.call(e,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new i.default(e),this}},{key:"setEvent",value:function(e){if(!e)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(e,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.ruleEvent={type:e.type},e.params&&(this.ruleEvent.params=e.params),this}},{key:"getEvent",value:function(){return this.ruleEvent}},{key:"getPriority",value:function(){return this.priority}},{key:"getConditions",value:function(){return this.conditions}},{key:"getEngine",value:function(){return this.engine}},{key:"setEngine",value:function(e){return this.engine=e,this}},{key:"toJSON",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.ruleEvent,name:this.name};return e?JSON.stringify(t):t}},{key:"prioritizeConditions",value:function(e){var t=this,n=e.reduce((function(e,n){var r=n.priority;if(!r){var i=t.engine.getFact(n.fact);r=i&&i.priority||1}return e[r]||(e[r]=[]),e[r].push(n),e}),{});return Object.keys(n).sort((function(e,t){return Number(e)>Number(t)?-1:1})).map((function(e){return n[e]}))}},{key:"evaluate",value:function(e){var t=this,n=new a.default(this.conditions,this.ruleEvent,this.priority,this.name),r=function(n,r){return Array.isArray(n)||(n=[n]),Promise.all(n.map((function(n){return function(n){if(n.isBooleanOperator()){var r=n[n.operator];return("all"===n.operator?c(r):s(r)).then((function(e){var t=!0===e;return n.result=t,t}))}return n.evaluate(e,t.engine.operators).then((function(e){var t=e.result;return n.factResult=e.leftHandSideValue,n.result=t,t}))}(n)}))).then((function(e){return(0,o.default)("rule::evaluateConditions results",e),r.call(e,(function(e){return!0===e}))}))},i=function(e,n){if(0===e.length)return Promise.resolve(!0);var i=Array.prototype.some;"all"===n&&(i=Array.prototype.every);for(var a=t.prioritizeConditions(e),s=Promise.resolve(),c=function(e){var t=a[e],c=!1;s=s.then((function(e){return"any"===n&&!0===e||c?((0,o.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),c=!0,!0):"all"===n&&!1===e||c?((0,o.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),c=!0,!1):r(t,i)}))},l=0;l<a.length;l++)c(l);return s},s=function(e){return i(e,"any")},c=function(e){return i(e,"all")},l=function(r){n.setResult(r);var i=r?"success":"failure";return t.emitAsync(i,n.event,e,n).then((function(){return n}))};return n.conditions.any?s(n.conditions.any).then((function(e){return l(e)})):c(n.conditions.all).then((function(e){return l(e)}))}}]),t}(s(n("+gXh")).default);t.default=c},"+gXh":function(e,t,n){var r;!function(i){var a=Object.hasOwnProperty,o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},s="object"==typeof process&&"function"==typeof process.nextTick,c="function"==typeof Symbol,l="object"==typeof Reflect,u="function"==typeof setImmediate?setImmediate:setTimeout,p=c?l&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function h(){this._events={},this._conf&&d.call(this,this._conf)}function d(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==i&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function f(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var g=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function m(e,t){for(var n={},r=e.length,a=t?value.length:0,o=0;o<r;o++)n[e[o]]=o<a?t[o]:i;return n}function v(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var a=e._observers;a?a.push(this):e._observers=[this]}function b(e,t,n,r){var o=Object.assign({},t);if(!e)return o;if("object"!=typeof e)throw TypeError("options must be an object");var s,c,l,u=Object.keys(e),p=u.length;function h(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var d=0;d<p;d++){if(s=u[d],!r&&!a.call(t,s))throw Error('Unknown "'+s+'" option');(c=e[s])!==i&&(l=n[s],o[s]=l?l(c,h):c)}return o}function y(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function x(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var a=typeof e;if(a===r||a===i)return e;n(t)}:function(r,i){for(var a=typeof r,o=n;o-- >0;)if(a===e[o])return r;i(t)}}Object.assign(v.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,a=this._emitter,o=this._listeners,s=function(){var r=g.apply(null,arguments),o={data:r,name:t,original:e};if(n){var s=n.call(i,o);!1!==s&&a.emit.apply(a,[o.name].concat(r))}else a.emit.apply(a,[t].concat(r))};if(o[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,a._newListener&&a._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===o[e]&&(o[e]=s,r._on.call(i,e,s))},a.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!a.hasListeners(n)&&o[e]&&(o[e]=null,r._off.call(i,e,s))},o[e]=null,a.on("removeListener",this._onRemoveListener)):(o[e]=s,r._on.call(i,e,s))},unsubscribe:function(e){var t,n,r,i=this,a=this._listeners,o=this._emitter,s=this._off,c=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function l(){i._onNewListener&&(o.off("newListener",i._onNewListener),o.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=S.call(o,i);o._observers.splice(e,1)}if(e){if(!(t=a[e]))return;s.call(c,e,t),delete a[e],--this._listenersCount||l()}else{for(r=(n=p(a)).length;r-- >0;)e=n[r],s.call(c,e,a[e]);this._listeners={},this._listenersCount=0,l()}}});var C=x(["function"]),w=x(["object","function"]);function k(e,t,n){var r,i,a,o=0,s=new e((function(c,l,u){function p(){i&&(i=null),o&&(clearTimeout(o),o=0)}n=b(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof u;var h=function(e){p(),c(e)},d=function(e){p(),l(e)};r?t(h,d,u):(i=[function(e){d(e||Error("canceled"))}],t(h,d,(function(e){if(a)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),a=!0),n.timeout>0&&(o=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",o=0,s.cancel(e),l(e)}),n.timeout))}));return r||(s.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),s}function S(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function O(e,t,n,r,i){if(!n)return null;if(0===r){var a=typeof t;if("string"===a){var o,s,c=0,l=0,u=this.delimiter,h=u.length;if(-1!==(s=t.indexOf(u))){o=new Array(5);do{o[c++]=t.slice(l,s),l=s+h}while(-1!==(s=t.indexOf(u,l)));o[c++]=t.slice(l),t=o,i=c}else t=[t],i=1}else"object"===a?i=t.length:(t=[t],i=1)}var d,f,g,m,v,b,y,x=null,C=t[r],w=t[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?(e&&e.push(n._listeners),x=[n]):(e&&e.push.apply(e,n._listeners),x=[n]));else{if("*"===C){for(s=(b=p(n)).length;s-- >0;)"_listeners"!==(d=b[s])&&(y=O(e,t,n[d],r+1,i))&&(x?x.push.apply(x,y):x=y);return x}if("**"===C){for((v=r+1===i||r+2===i&&"*"===w)&&n._listeners&&(x=O(e,t,n,i,i)),s=(b=p(n)).length;s-- >0;)"_listeners"!==(d=b[s])&&("*"===d||"**"===d?(n[d]._listeners&&!v&&(y=O(e,t,n[d],i,i))&&(x?x.push.apply(x,y):x=y),y=O(e,t,n[d],r,i)):y=O(e,t,n[d],d===w?r+2:r,i),y&&(x?x.push.apply(x,y):x=y));return x}n[C]&&(x=O(e,t,n[C],r+1,i))}if((f=n["*"])&&O(e,t,f,r+1,i),g=n["**"])if(r<i)for(g._listeners&&O(e,t,g,i,i),s=(b=p(g)).length;s-- >0;)"_listeners"!==(d=b[s])&&(d===w?O(e,t,g[d],r+2,i):d===C?O(e,t,g[d],r+1,i):((m={})[d]=g[d],O(e,t,{"**":m},r+1,i)));else g._listeners?O(e,t,g,i,i):g["*"]&&g["*"]._listeners&&O(e,t,g["*"],i,i);return x}function E(e,t,n){var r,i,a=0,o=0,s=this.delimiter,c=s.length;if("string"==typeof e)if(-1!==(r=e.indexOf(s))){i=new Array(5);do{i[a++]=e.slice(o,r),o=r+c}while(-1!==(r=e.indexOf(s,o)));i[a++]=e.slice(o)}else i=[e],a=1;else i=e,a=e.length;if(a>1)for(r=0;r+1<a;r++)if("**"===i[r]&&"**"===i[r+1])return;var l,u=this.listenerTree;for(r=0;r<a;r++)if(u=u[l=i[r]]||(u[l]={}),r===a-1)return u._listeners?("function"==typeof u._listeners&&(u._listeners=[u._listeners]),n?u._listeners.unshift(t):u._listeners.push(t),!u._listeners.warned&&this._maxListeners>0&&u._listeners.length>this._maxListeners&&(u._listeners.warned=!0,f.call(this,u._listeners.length,l))):u._listeners=t,!0;return!0}function _(e,t,n,r){for(var i,a,o,s,c=p(e),l=c.length,u=e._listeners;l-- >0;)i=e[a=c[l]],o="_listeners"===a?n:n?n.concat(a):[a],s=r||"symbol"==typeof a,u&&t.push(s?o:o.join(this.delimiter)),"object"==typeof i&&_.call(this,i,t,o,s);return t}function I(e){for(var t,n,r,i=p(e),a=i.length;a-- >0;)(t=e[n=i[a]])&&(r=!0,"_listeners"===n||I(t)||delete e[n]);return r}function P(e,t,n){this.emitter=e,this.event=t,this.listener=n}function T(e,t,n){if(!0===n)a=!0;else if(!1===n)r=!0;else{if(!n||"object"!=typeof n)throw TypeError("options should be an object or true");var r=n.async,a=n.promisify,o=n.nextTick,c=n.objectify}if(r||o||a){var l=t,p=t._origin||t;if(o&&!s)throw Error("process.nextTick is not supported");a===i&&(a="AsyncFunction"===t.constructor.name),(t=function(){var e=arguments,t=this,n=this.event;return a?o?Promise.resolve():new Promise((function(e){u(e)})).then((function(){return t.event=n,l.apply(t,e)})):(o?process.nextTick:u)((function(){t.event=n,l.apply(t,e)}))})._async=!0,t._origin=p}return[t,c?new P(this,e,t):this]}function A(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,d.call(this,e)}P.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},A.EventEmitter2=A,A.prototype.listenTo=function(e,t,n){if("object"!=typeof e)throw TypeError("target musts be an object");var r=this;function a(t){if("object"!=typeof t)throw TypeError("events must be an object");var i,a=n.reducers,o=S.call(r,e);i=-1===o?new v(r,e,n):r._observers[o];for(var s,c=p(t),l=c.length,u="function"==typeof a,h=0;h<l;h++)s=c[h],i.subscribe(s,t[s]||s,u?a:a&&a[s])}return n=b(n,{on:i,off:i,reducers:i},{on:C,off:C,reducers:w}),o(t)?a(m(t)):a("string"==typeof t?m(t.split(/\s+/)):t),this},A.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,a=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),a=!0);return a},A.prototype.delimiter=".",A.prototype.setMaxListeners=function(e){e!==i&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},A.prototype.getMaxListeners=function(){return this._maxListeners},A.prototype.event="",A.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},A.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},A.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},A.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},A.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},A.prototype._many=function(e,t,n,r,i){var a=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&a.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r,i)},A.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var e,t,n,r,i,a,o=arguments[0],s=this.wildcard;if("newListener"===o&&!this._newListener&&!this._events.newListener)return!1;if(s&&(e=o,"newListener"!==o&&"removeListener"!==o&&"object"==typeof o)){if(n=o.length,c)for(r=0;r<n;r++)if("symbol"==typeof o[r]){a=!0;break}a||(o=o.join(this.delimiter))}var l,u=arguments.length;if(this._all&&this._all.length)for(r=0,n=(l=this._all.slice()).length;r<n;r++)switch(this.event=o,u){case 1:l[r].call(this,o);break;case 2:l[r].call(this,o,arguments[1]);break;case 3:l[r].call(this,o,arguments[1],arguments[2]);break;default:l[r].apply(this,arguments)}if(s)l=[],O.call(this,l,e,this.listenerTree,0,n);else{if("function"==typeof(l=this._events[o])){switch(this.event=o,u){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(u-1),i=1;i<u;i++)t[i-1]=arguments[i];l.apply(this,t)}return!0}l&&(l=l.slice())}if(l&&l.length){if(u>3)for(t=new Array(u-1),i=1;i<u;i++)t[i-1]=arguments[i];for(r=0,n=l.length;r<n;r++)switch(this.event=o,u){case 1:l[r].call(this);break;case 2:l[r].call(this,arguments[1]);break;case 3:l[r].call(this,arguments[1],arguments[2]);break;default:l[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===o)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},A.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var e,t,n,r,i,a,o=arguments[0],s=this.wildcard;if("newListener"===o&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(s&&(e=o,"newListener"!==o&&"removeListener"!==o&&"object"==typeof o)){if(r=o.length,c)for(i=0;i<r;i++)if("symbol"==typeof o[i]){t=!0;break}t||(o=o.join(this.delimiter))}var l,u=[],p=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=o,p){case 1:u.push(this._all[i].call(this,o));break;case 2:u.push(this._all[i].call(this,o,arguments[1]));break;case 3:u.push(this._all[i].call(this,o,arguments[1],arguments[2]));break;default:u.push(this._all[i].apply(this,arguments))}if(s?(l=[],O.call(this,l,e,this.listenerTree,0)):l=this._events[o],"function"==typeof l)switch(this.event=o,p){case 1:u.push(l.call(this));break;case 2:u.push(l.call(this,arguments[1]));break;case 3:u.push(l.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(p-1),a=1;a<p;a++)n[a-1]=arguments[a];u.push(l.apply(this,n))}else if(l&&l.length){if(l=l.slice(),p>3)for(n=new Array(p-1),a=1;a<p;a++)n[a-1]=arguments[a];for(i=0,r=l.length;i<r;i++)switch(this.event=o,p){case 1:u.push(l[i].call(this));break;case 2:u.push(l[i].call(this,arguments[1]));break;case 3:u.push(l[i].call(this,arguments[1],arguments[2]));break;default:u.push(l[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===o)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(u)},A.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},A.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},A.prototype.onAny=function(e){return this._onAny(e,!1)},A.prototype.prependAny=function(e){return this._onAny(e,!0)},A.prototype.addListener=A.prototype.on,A.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},A.prototype._on=function(e,t,n,r){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");this._events||h.call(this);var a,o=this;return r!==i&&(t=(a=T.call(this,e,t,r))[0],o=a[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(E.call(this,e,t,n),o):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,f.call(this,this._events[e].length,e))):this._events[e]=t,o)},A.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();if(!(r=O.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var a=0;a<r.length;a++){var s=r[a];if(n=s._listeners,o(n)){for(var c=-1,l=0,u=n.length;l<u;l++)if(n[l]===t||n[l].listener&&n[l].listener===t||n[l]._origin&&n[l]._origin===t){c=l;break}if(c<0)continue;return this.wildcard?s._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&I(this.listenerTree),this},A.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},A.prototype.removeListener=A.prototype.off,A.prototype.removeAllListeners=function(e){if(e===i)return!this._events||h.call(this),this;if(this.wildcard){var t,n=O.call(this,null,e,this.listenerTree,0);if(!n)return this;for(t=0;t<n.length;t++)n[t]._listeners=null;this.listenerTree&&I(this.listenerTree)}else this._events&&(this._events[e]=null);return this},A.prototype.listeners=function(e){var t,n,r,a,o,s=this._events;if(e===i){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(a=(t=p(s)).length,r=[];a-- >0;)"function"==typeof(n=s[t[a]])?r.push(n):r.push.apply(r,n);return r}if(this.wildcard){if(!(o=this.listenerTree))return[];var c=[],l="string"==typeof e?e.split(this.delimiter):e.slice();return O.call(this,c,l,o,0),c}return s&&(n=s[e])?"function"==typeof n?[n]:n:[]},A.prototype.eventNames=function(e){var t=this._events;return this.wildcard?_.call(this,this.listenerTree,[],null,e):t?p(t):[]},A.prototype.listenerCount=function(e){return this.listeners(e).length},A.prototype.hasListeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return O.call(this,t,n,this.listenerTree,0),t.length>0}var r=this._events,a=this._all;return!!(a&&a.length||r&&(e===i?p(r).length:r[e]))},A.prototype.listenersAny=function(){return this._all?this._all:[]},A.prototype.waitFor=function(e,t){var n=this,r=typeof t;return"number"===r?t={timeout:t}:"function"===r&&(t={filter:t}),k((t=b(t,{timeout:0,filter:i,handleError:!1,Promise:Promise,overload:!1},{filter:C,Promise:y})).Promise,(function(r,i,a){function o(){var a=t.filter;if(!a||a.apply(n,arguments))if(n.off(e,o),t.handleError){var s=arguments[0];s?i(s):r(g.apply(null,arguments).slice(1))}else r(g.apply(null,arguments))}a((function(){n.off(e,o)})),n._on(e,o,!1)}),{timeout:t.timeout,overload:t.overload})};var M=A.prototype;Object.defineProperties(A,{defaultMaxListeners:{get:function(){return M._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");M._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return k((n=b(n,{Promise:Promise,timeout:0,overload:!1},{Promise:y})).Promise,(function(n,r,i){var a;if("function"==typeof e.addEventListener)return a=function(){n(g.apply(null,arguments))},i((function(){e.removeEventListener(t,a)})),void e.addEventListener(t,a,{once:!0});var o,s=function(){o&&e.removeListener("error",o),n(g.apply(null,arguments))};"error"!==t&&(o=function(n){e.removeListener(t,s),r(n)},e.once("error",o)),i((function(){o&&e.removeListener("error",o),e.removeListener(t,s)})),e.once(t,s)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(M,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(r=(function(){return A}).call(t,n,t,e))===i||(e.exports=r)}()},"/6pf":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("xVbo"),i=n("J+dc"),a=n("YtkY"),o=n("5xGT"),s=n("ROBh"),c=n("EM62"),l=function(){function e(e){this.state=e}return e.prototype.getFeatureData=function(e,t){return Object(s.a)(t)},e.prototype.getApplyData=function(e,t){return this.state.get("EditingText").open?this.state.changes("EditingText").pipe(Object(r.a)((function(e){return!e.open})),Object(i.a)(1),Object(a.a)((function(){return t}))):Object(s.a)(t)},e.\u0275fac=function(t){return new(t||e)(c.pc(o.Ib))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},"/AMt":function(e,t,n){"use strict";n.d(t,"a",(function(){return jt}));var r,i,a=n("zjfJ"),o=n("K/z8"),s=n("0Jwk"),c=n("qDiq"),l=n("zygG"),u=(n("pWxA"),n("2h71")),p=n("PRnZ"),h=n("sRHE"),d=n("8K1b"),f=n("AqVP"),g=n("fGyu"),m=n("9fIP"),v=n("MMYH");function b(e){if(":"!=e[0])return[null,e];var t=e.indexOf(":",1);if(-1==t)throw new Error('Unsupported format "'.concat(e,'" expecting ":namespace:name"'));return[e.slice(1,t),e.slice(t+1)]}function y(e){return"ng-container"===b(e)[1]}function x(e){return"ng-content"===b(e)[1]}function C(e){return"ng-template"===b(e)[1]}function w(e){return null===e?null:b(e)[0]}function k(e,t){return e?":".concat(e,":").concat(t):t}!function(e){e[e.RAW_TEXT=0]="RAW_TEXT",e[e.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",e[e.PARSABLE_DATA=2]="PARSABLE_DATA"}(i||(i={}));var S={Aacute:"\xc1",aacute:"\xe1",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",AElig:"\xc6",aelig:"\xe6",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",Alpha:"\u0391",alpha:"\u03b1",amp:"&",and:"\u2227",ang:"\u2220",apos:"'",Aring:"\xc5",aring:"\xe5",asymp:"\u2248",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",bdquo:"\u201e",Beta:"\u0392",beta:"\u03b2",brvbar:"\xa6",bull:"\u2022",cap:"\u2229",Ccedil:"\xc7",ccedil:"\xe7",cedil:"\xb8",cent:"\xa2",Chi:"\u03a7",chi:"\u03c7",circ:"\u02c6",clubs:"\u2663",cong:"\u2245",copy:"\xa9",crarr:"\u21b5",cup:"\u222a",curren:"\xa4",dagger:"\u2020",Dagger:"\u2021",darr:"\u2193",dArr:"\u21d3",deg:"\xb0",Delta:"\u0394",delta:"\u03b4",diams:"\u2666",divide:"\xf7",Eacute:"\xc9",eacute:"\xe9",Ecirc:"\xca",ecirc:"\xea",Egrave:"\xc8",egrave:"\xe8",empty:"\u2205",emsp:"\u2003",ensp:"\u2002",Epsilon:"\u0395",epsilon:"\u03b5",equiv:"\u2261",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",exist:"\u2203",fnof:"\u0192",forall:"\u2200",frac12:"\xbd",frac14:"\xbc",frac34:"\xbe",frasl:"\u2044",Gamma:"\u0393",gamma:"\u03b3",ge:"\u2265",gt:">",harr:"\u2194",hArr:"\u21d4",hearts:"\u2665",hellip:"\u2026",Iacute:"\xcd",iacute:"\xed",Icirc:"\xce",icirc:"\xee",iexcl:"\xa1",Igrave:"\xcc",igrave:"\xec",image:"\u2111",infin:"\u221e",int:"\u222b",Iota:"\u0399",iota:"\u03b9",iquest:"\xbf",isin:"\u2208",Iuml:"\xcf",iuml:"\xef",Kappa:"\u039a",kappa:"\u03ba",Lambda:"\u039b",lambda:"\u03bb",lang:"\u27e8",laquo:"\xab",larr:"\u2190",lArr:"\u21d0",lceil:"\u2308",ldquo:"\u201c",le:"\u2264",lfloor:"\u230a",lowast:"\u2217",loz:"\u25ca",lrm:"\u200e",lsaquo:"\u2039",lsquo:"\u2018",lt:"<",macr:"\xaf",mdash:"\u2014",micro:"\xb5",middot:"\xb7",minus:"\u2212",Mu:"\u039c",mu:"\u03bc",nabla:"\u2207",nbsp:"\xa0",ndash:"\u2013",ne:"\u2260",ni:"\u220b",not:"\xac",notin:"\u2209",nsub:"\u2284",Ntilde:"\xd1",ntilde:"\xf1",Nu:"\u039d",nu:"\u03bd",Oacute:"\xd3",oacute:"\xf3",Ocirc:"\xd4",ocirc:"\xf4",OElig:"\u0152",oelig:"\u0153",Ograve:"\xd2",ograve:"\xf2",oline:"\u203e",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",oplus:"\u2295",or:"\u2228",ordf:"\xaa",ordm:"\xba",Oslash:"\xd8",oslash:"\xf8",Otilde:"\xd5",otilde:"\xf5",otimes:"\u2297",Ouml:"\xd6",ouml:"\xf6",para:"\xb6",permil:"\u2030",perp:"\u22a5",Phi:"\u03a6",phi:"\u03c6",Pi:"\u03a0",pi:"\u03c0",piv:"\u03d6",plusmn:"\xb1",pound:"\xa3",prime:"\u2032",Prime:"\u2033",prod:"\u220f",prop:"\u221d",Psi:"\u03a8",psi:"\u03c8",quot:'"',radic:"\u221a",rang:"\u27e9",raquo:"\xbb",rarr:"\u2192",rArr:"\u21d2",rceil:"\u2309",rdquo:"\u201d",real:"\u211c",reg:"\xae",rfloor:"\u230b",Rho:"\u03a1",rho:"\u03c1",rlm:"\u200f",rsaquo:"\u203a",rsquo:"\u2019",sbquo:"\u201a",Scaron:"\u0160",scaron:"\u0161",sdot:"\u22c5",sect:"\xa7",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sim:"\u223c",spades:"\u2660",sub:"\u2282",sube:"\u2286",sum:"\u2211",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supe:"\u2287",szlig:"\xdf",Tau:"\u03a4",tau:"\u03c4",there4:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thinsp:"\u2009",THORN:"\xde",thorn:"\xfe",tilde:"\u02dc",times:"\xd7",trade:"\u2122",Uacute:"\xda",uacute:"\xfa",uarr:"\u2191",uArr:"\u21d1",Ucirc:"\xdb",ucirc:"\xfb",Ugrave:"\xd9",ugrave:"\xf9",uml:"\xa8",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",Uuml:"\xdc",uuml:"\xfc",weierp:"\u2118",Xi:"\u039e",xi:"\u03be",Yacute:"\xdd",yacute:"\xfd",yen:"\xa5",yuml:"\xff",Yuml:"\u0178",Zeta:"\u0396",zeta:"\u03b6",zwj:"\u200d",zwnj:"\u200c"};S.ngsp="\ue500";var O,E,_=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.closedByChildren,a=n.implicitNamespacePrefix,o=n.contentType,s=void 0===o?i.PARSABLE_DATA:o,c=n.closedByParent,l=void 0!==c&&c,u=n.isVoid,p=void 0!==u&&u,h=n.ignoreFirstLf,d=void 0!==h&&h,f=n.preventNamespaceInheritance,g=void 0!==f&&f;Object(m.a)(this,e),this.closedByChildren={},this.closedByParent=!1,this.canSelfClose=!1,r&&r.length>0&&r.forEach((function(e){return t.closedByChildren[e]=!0})),this.isVoid=p,this.closedByParent=l||p,this.implicitNamespacePrefix=a||null,this.contentType=s,this.ignoreFirstLf=d,this.preventNamespaceInheritance=g}return Object(v.a)(e,[{key:"isClosedByChild",value:function(e){return this.isVoid||e.toLowerCase()in this.closedByChildren}}]),e}();function I(e){var t,n;return E||(O=new _,E={base:new _({isVoid:!0}),meta:new _({isVoid:!0}),area:new _({isVoid:!0}),embed:new _({isVoid:!0}),link:new _({isVoid:!0}),img:new _({isVoid:!0}),input:new _({isVoid:!0}),param:new _({isVoid:!0}),hr:new _({isVoid:!0}),br:new _({isVoid:!0}),source:new _({isVoid:!0}),track:new _({isVoid:!0}),wbr:new _({isVoid:!0}),p:new _({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new _({closedByChildren:["tbody","tfoot"]}),tbody:new _({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new _({closedByChildren:["tbody"],closedByParent:!0}),tr:new _({closedByChildren:["tr"],closedByParent:!0}),td:new _({closedByChildren:["td","th"],closedByParent:!0}),th:new _({closedByChildren:["td","th"],closedByParent:!0}),col:new _({isVoid:!0}),svg:new _({implicitNamespacePrefix:"svg"}),foreignObject:new _({implicitNamespacePrefix:"svg",preventNamespaceInheritance:!0}),math:new _({implicitNamespacePrefix:"math"}),li:new _({closedByChildren:["li"],closedByParent:!0}),dt:new _({closedByChildren:["dt","dd"]}),dd:new _({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new _({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new _({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new _({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new _({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new _({closedByChildren:["optgroup"],closedByParent:!0}),option:new _({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new _({ignoreFirstLf:!0}),listing:new _({ignoreFirstLf:!0}),style:new _({contentType:i.RAW_TEXT}),script:new _({contentType:i.RAW_TEXT}),title:new _({contentType:i.ESCAPABLE_RAW_TEXT}),textarea:new _({contentType:i.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})}),null!==(n=null!==(t=E[e])&&void 0!==t?t:E[e.toLowerCase()])&&void 0!==n?n:O}var P,T,A=new RegExp("(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*]+)(?:=([\"']?)([^\\]\"']*)\\5)?\\])|(\\))|(\\s*,\\s*)","g"),M=function(){function e(){Object(m.a)(this,e),this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}return Object(v.a)(e,[{key:"isElementSelector",value:function(){return this.hasElementSelector()&&0==this.classNames.length&&0==this.attrs.length&&0===this.notSelectors.length}},{key:"hasElementSelector",value:function(){return!!this.element}},{key:"setElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.element=e}},{key:"getMatchingElementTemplate",value:function(){for(var e=this.element||"div",t=this.classNames.length>0?' class="'.concat(this.classNames.join(" "),'"'):"",n="",r=0;r<this.attrs.length;r+=2){var i=this.attrs[r],a=""!==this.attrs[r+1]?'="'.concat(this.attrs[r+1],'"'):"";n+=" ".concat(i).concat(a)}return I(e).isVoid?"<".concat(e).concat(t).concat(n,"/>"):"<".concat(e).concat(t).concat(n,"></").concat(e,">")}},{key:"getAttrs",value:function(){var e=[];return this.classNames.length>0&&e.push("class",this.classNames.join(" ")),e.concat(this.attrs)}},{key:"addAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.attrs.push(e,t&&t.toLowerCase()||"")}},{key:"addClassName",value:function(e){this.classNames.push(e.toLowerCase())}},{key:"toString",value:function(){var e=this.element||"";if(this.classNames&&this.classNames.forEach((function(t){return e+=".".concat(t)})),this.attrs)for(var t=0;t<this.attrs.length;t+=2){var n=this.attrs[t],r=this.attrs[t+1];e+="[".concat(n).concat(r?"="+r:"","]")}return this.notSelectors.forEach((function(t){return e+=":not(".concat(t,")")})),e}}],[{key:"parse",value:function(t){var n,r=[],i=function(e,t){t.notSelectors.length>0&&!t.element&&0==t.classNames.length&&0==t.attrs.length&&(t.element="*"),e.push(t)},a=new e,o=a,s=!1;for(A.lastIndex=0;n=A.exec(t);){if(n[1]){if(s)throw new Error("Nesting :not in a selector is not allowed");s=!0,o=new e,a.notSelectors.push(o)}var c=n[2];if(c){var l=n[3];"#"===l?o.addAttribute("id",c.substr(1)):"."===l?o.addClassName(c.substr(1)):o.setElement(c)}var u=n[4];if(u&&o.addAttribute(u,n[6]),n[7]&&(s=!1,o=a),n[8]){if(s)throw new Error("Multiple selectors in :not are not supported");i(r,a),a=o=new e}}return i(r,a),r}}]),e}(),D=function(){function e(){Object(m.a)(this,e),this._elementMap=new Map,this._elementPartialMap=new Map,this._classMap=new Map,this._classPartialMap=new Map,this._attrValueMap=new Map,this._attrValuePartialMap=new Map,this._listContexts=[]}return Object(v.a)(e,[{key:"addSelectables",value:function(e,t){var n=null;e.length>1&&(n=new j(e),this._listContexts.push(n));for(var r=0;r<e.length;r++)this._addSelectable(e[r],t,n)}},{key:"_addSelectable",value:function(e,t,n){var r=this,i=e.element,a=e.classNames,o=e.attrs,s=new N(e,t,n);i&&(0===o.length&&0===a.length?this._addTerminal(r._elementMap,i,s):r=this._addPartial(r._elementPartialMap,i));if(a)for(var c=0;c<a.length;c++){var l=0===o.length&&c===a.length-1,u=a[c];l?this._addTerminal(r._classMap,u,s):r=this._addPartial(r._classPartialMap,u)}if(o)for(var p=0;p<o.length;p+=2){var h=p===o.length-2,d=o[p],f=o[p+1];if(h){var g=r._attrValueMap,m=g.get(d);m||(m=new Map,g.set(d,m)),this._addTerminal(m,f,s)}else{var v=r._attrValuePartialMap,b=v.get(d);b||(b=new Map,v.set(d,b)),r=this._addPartial(b,f)}}}},{key:"_addTerminal",value:function(e,t,n){var r=e.get(t);r||(r=[],e.set(t,r)),r.push(n)}},{key:"_addPartial",value:function(t,n){var r=t.get(n);return r||(r=new e,t.set(n,r)),r}},{key:"match",value:function(e,t){for(var n=!1,r=e.element,i=e.classNames,a=e.attrs,o=0;o<this._listContexts.length;o++)this._listContexts[o].alreadyMatched=!1;if(n=this._matchTerminal(this._elementMap,r,e,t)||n,n=this._matchPartial(this._elementPartialMap,r,e,t)||n,i)for(var s=0;s<i.length;s++){var c=i[s];n=this._matchTerminal(this._classMap,c,e,t)||n,n=this._matchPartial(this._classPartialMap,c,e,t)||n}if(a)for(var l=0;l<a.length;l+=2){var u=a[l],p=a[l+1],h=this._attrValueMap.get(u);p&&(n=this._matchTerminal(h,"",e,t)||n),n=this._matchTerminal(h,p,e,t)||n;var d=this._attrValuePartialMap.get(u);p&&(n=this._matchPartial(d,"",e,t)||n),n=this._matchPartial(d,p,e,t)||n}return n}},{key:"_matchTerminal",value:function(e,t,n,r){if(!e||"string"!=typeof t)return!1;var i=e.get(t)||[],a=e.get("*");if(a&&(i=i.concat(a)),0===i.length)return!1;for(var o=!1,s=0;s<i.length;s++)o=i[s].finalize(n,r)||o;return o}},{key:"_matchPartial",value:function(e,t,n,r){if(!e||"string"!=typeof t)return!1;var i=e.get(t);return!!i&&i.match(n,r)}}],[{key:"createNotMatcher",value:function(t){var n=new e;return n.addSelectables(t,null),n}}]),e}(),j=function e(t){Object(m.a)(this,e),this.selectors=t,this.alreadyMatched=!1},N=function(){function e(t,n,r){Object(m.a)(this,e),this.selector=t,this.cbContext=n,this.listContext=r,this.notSelectors=t.notSelectors}return Object(v.a)(e,[{key:"finalize",value:function(e,t){var n=!0;!(this.notSelectors.length>0)||this.listContext&&this.listContext.alreadyMatched||(n=!D.createNotMatcher(this.notSelectors).match(e,null));return!n||!t||this.listContext&&this.listContext.alreadyMatched||(this.listContext&&(this.listContext.alreadyMatched=!0),t(this.selector,this.cbContext)),n}}]),e}();V("Inject",(function(e){return{token:e}})),V("InjectionToken",(function(e){return{_desc:e,"\u0275prov":void 0}})),V("Attribute",(function(e){return{attributeName:e}})),V("ContentChildren",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:e,first:!1,isViewQuery:!1,descendants:!1},t)})),V("ContentChild",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:e,first:!0,isViewQuery:!1,descendants:!0},t)})),V("ViewChildren",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:e,first:!1,isViewQuery:!0,descendants:!0},t)})),V("ViewChild",(function(e,t){return Object.assign({selector:e,first:!0,isViewQuery:!0,descendants:!0},t)})),V("Directive",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}));!function(e){e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom"}(P||(P={})),function(e){e[e.OnPush=0]="OnPush",e[e.Default=1]="Default"}(T||(T={}));V("Component",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({changeDetection:T.Default},e)})),V("Pipe",(function(e){return Object.assign({pure:!0},e)})),V("Input",(function(e){return{bindingPropertyName:e}})),V("Output",(function(e){return{bindingPropertyName:e}})),V("HostBinding",(function(e){return{hostPropertyName:e}})),V("HostListener",(function(e,t){return{eventName:e,args:t}})),V("NgModule",(function(e){return e})),V("Injectable",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}));var R,L,F={name:"custom-elements"},B={name:"no-errors-schema"};V("Optional"),V("Self"),V("SkipSelf"),V("Host");function V(e,t){function n(){var n=t?t.apply(void 0,arguments):{};return Object.assign({ngMetadataName:e},n)}return n.isTypeOf=function(t){return t&&t.ngMetadataName===e},n.ngMetadataName=e,n}function z(e){var t=function(e){var t=e.classNames&&e.classNames.length?[8].concat(Object(g.a)(e.classNames)):[];return[e.element&&"*"!==e.element?e.element:""].concat(Object(g.a)(e.attrs),Object(g.a)(t))}(e),n=e.notSelectors&&e.notSelectors.length?e.notSelectors.map((function(e){return function(e){var t=e.classNames&&e.classNames.length?[8].concat(Object(g.a)(e.classNames)):[];return e.element?[5,e.element].concat(Object(g.a)(e.attrs),Object(g.a)(t)):e.attrs.length?[3].concat(Object(g.a)(e.attrs),Object(g.a)(t)):e.classNames&&e.classNames.length?[9].concat(Object(g.a)(e.classNames)):[]}(e)})):[];return t.concat.apply(t,Object(g.a)(n))}function U(e){return e?M.parse(e).map(z):[]}!function(e){e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL"}(R||(R={})),function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Ignore=2]="Ignore"}(L||(L={}));var G;!function(e){e[e.Const=0]="Const"}(G||(G={}));var H,Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(m.a)(this,e),this.modifiers=t}return Object(v.a)(e,[{key:"hasModifier",value:function(e){return-1!==this.modifiers.indexOf(e)}}]),e}();!function(e){e[e.Dynamic=0]="Dynamic",e[e.Bool=1]="Bool",e[e.String=2]="String",e[e.Int=3]="Int",e[e.Number=4]="Number",e[e.Function=5]="Function",e[e.Inferred=6]="Inferred",e[e.None=7]="None"}(H||(H={}));var q,W,X=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i;return Object(m.a)(this,n),(i=t.call(this,r)).name=e,i}return Object(v.a)(n,[{key:"visitType",value:function(e,t){return e.visitBuiltinType(this,t)}}]),n}(Y),K=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(m.a)(this,n),(i=t.call(this,r)).value=e,i.typeParams=a,i}return Object(v.a)(n,[{key:"visitType",value:function(e,t){return e.visitExpressionType(this,t)}}]),n}(Y),Z=new X(H.Dynamic),$=new X(H.Inferred),Q=new X(H.Bool),J=(new X(H.Int),new X(H.Number)),ee=new X(H.String),te=(new X(H.Function),new X(H.None));function ne(e,t){return null==e||null==t?e==t:e.isEquivalent(t)}function re(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(!e[r].isEquivalent(t[r]))return!1;return!0}!function(e){e[e.Minus=0]="Minus",e[e.Plus=1]="Plus"}(q||(q={})),function(e){e[e.Equals=0]="Equals",e[e.NotEquals=1]="NotEquals",e[e.Identical=2]="Identical",e[e.NotIdentical=3]="NotIdentical",e[e.Minus=4]="Minus",e[e.Plus=5]="Plus",e[e.Divide=6]="Divide",e[e.Multiply=7]="Multiply",e[e.Modulo=8]="Modulo",e[e.And=9]="And",e[e.Or=10]="Or",e[e.BitwiseAnd=11]="BitwiseAnd",e[e.Lower=12]="Lower",e[e.LowerEquals=13]="LowerEquals",e[e.Bigger=14]="Bigger",e[e.BiggerEquals=15]="BiggerEquals"}(W||(W={}));var ie,ae=function(){function e(t,n){Object(m.a)(this,e),this.type=t||null,this.sourceSpan=n||null}return Object(v.a)(e,[{key:"prop",value:function(e,t){return new Ne(this,e,null,t)}},{key:"key",value:function(e,t,n){return new Re(this,e,t,n)}},{key:"callMethod",value:function(e,t,n){return new de(this,e,t,null,n)}},{key:"callFn",value:function(e,t,n){return new fe(this,e,null,t,n)}},{key:"instantiate",value:function(e,t,n){return new ge(this,e,t,n)}},{key:"conditional",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return new _e(this,e,t,null,n)}},{key:"equals",value:function(e,t){return new je(W.Equals,this,e,null,t)}},{key:"notEquals",value:function(e,t){return new je(W.NotEquals,this,e,null,t)}},{key:"identical",value:function(e,t){return new je(W.Identical,this,e,null,t)}},{key:"notIdentical",value:function(e,t){return new je(W.NotIdentical,this,e,null,t)}},{key:"minus",value:function(e,t){return new je(W.Minus,this,e,null,t)}},{key:"plus",value:function(e,t){return new je(W.Plus,this,e,null,t)}},{key:"divide",value:function(e,t){return new je(W.Divide,this,e,null,t)}},{key:"multiply",value:function(e,t){return new je(W.Multiply,this,e,null,t)}},{key:"modulo",value:function(e,t){return new je(W.Modulo,this,e,null,t)}},{key:"and",value:function(e,t){return new je(W.And,this,e,null,t)}},{key:"bitwiseAnd",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new je(W.BitwiseAnd,this,e,null,t,n)}},{key:"or",value:function(e,t){return new je(W.Or,this,e,null,t)}},{key:"lower",value:function(e,t){return new je(W.Lower,this,e,null,t)}},{key:"lowerEquals",value:function(e,t){return new je(W.LowerEquals,this,e,null,t)}},{key:"bigger",value:function(e,t){return new je(W.Bigger,this,e,null,t)}},{key:"biggerEquals",value:function(e,t){return new je(W.BiggerEquals,this,e,null,t)}},{key:"isBlank",value:function(e){return this.equals(ze,e)}},{key:"cast",value:function(e,t){return new Te(this,e,t)}},{key:"toStmt",value:function(){return new We(this,null)}}]),e}();!function(e){e[e.This=0]="This",e[e.Super=1]="Super",e[e.CatchError=2]="CatchError",e[e.CatchStack=3]="CatchStack"}(ie||(ie={}));var oe,se=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),a=t.call(this,r,i),"string"==typeof e?(a.name=e,a.builtin=null):(a.name=null,a.builtin=e),a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.name===e.name&&this.builtin===e.builtin}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitReadVarExpr(this,t)}},{key:"set",value:function(e){if(!this.name)throw new Error("Built in variable ".concat(this.builtin," can not be assigned to."));return new ue(this.name,e,null,this.sourceSpan)}}]),n}(ae),ce=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,r,i)).expr=e,a}return Object(v.a)(n,[{key:"visitExpression",value:function(e,t){return e.visitTypeofExpr(this,t)}},{key:"isEquivalent",value:function(e){return e instanceof n&&e.expr.isEquivalent(this.expr)}},{key:"isConstant",value:function(){return this.expr.isConstant()}}]),n}(ae),le=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,r,i)).node=e,a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.node===e.node}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWrappedNodeExpr(this,t)}}]),n}(ae),ue=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(m.a)(this,n),(o=t.call(this,i||r.type,a)).name=e,o.value=r,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.name===e.name&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWriteVarExpr(this,t)}},{key:"toDeclStmt",value:function(e,t){return new Ye(this.name,this.value,e,t,this.sourceSpan)}},{key:"toConstDecl",value:function(){return this.toDeclStmt($,[Oe.Final])}}]),n}(ae),pe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,a||i.type,o)).receiver=e,s.index=r,s.value=i,s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWriteKeyExpr(this,t)}}]),n}(ae),he=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,a||i.type,o)).receiver=e,s.name=r,s.value=i,s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitWritePropExpr(this,t)}}]),n}(ae);!function(e){e[e.ConcatArray=0]="ConcatArray",e[e.SubscribeObservable=1]="SubscribeObservable",e[e.Bind=2]="Bind"}(oe||(oe={}));var de=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,a,o)).receiver=e,s.args=i,"string"==typeof r?(s.name=r,s.builtin=null):(s.name=null,s.builtin=r),s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name&&this.builtin===e.builtin&&re(this.args,e.args)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitInvokeMethodExpr(this,t)}}]),n}(ae),fe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(m.a)(this,n),(o=t.call(this,i,a)).fn=e,o.args=r,o.pure=s,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.fn.isEquivalent(e.fn)&&re(this.args,e.args)&&this.pure===e.pure}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitInvokeFunctionExpr(this,t)}}]),n}(ae),ge=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(m.a)(this,n),(o=t.call(this,i,a)).classExpr=e,o.args=r,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.classExpr.isEquivalent(e.classExpr)&&re(this.args,e.args)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitInstantiateExpr(this,t)}}]),n}(ae),me=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,r,i)).value=e,a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value===e.value}},{key:"isConstant",value:function(){return!0}},{key:"visitExpression",value:function(e,t){return e.visitLiteralExpr(this,t)}}]),n}(ae),ve=function e(t,n){Object(m.a)(this,e),this.text=t,this.sourceSpan=n},be=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return n}(ve),ye=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return n}(ve),xe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,ee,o)).metaBlock=e,s.messageParts=r,s.placeHolderNames=i,s.expressions=a,s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return!1}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitLocalizedString(this,t)}},{key:"serializeI18nHead",value:function(){var e=this.metaBlock.description||"";return this.metaBlock.meaning&&(e="".concat(this.metaBlock.meaning).concat("|").concat(e)),this.metaBlock.customId&&(e="".concat(e).concat("@@").concat(this.metaBlock.customId)),this.metaBlock.legacyIds&&this.metaBlock.legacyIds.forEach((function(t){e="".concat(e).concat("\u241f").concat(t)})),Se(e,this.messageParts[0].text)}},{key:"getMessagePartSourceSpan",value:function(e){var t,n;return null!==(n=null===(t=this.messageParts[e])||void 0===t?void 0:t.sourceSpan)&&void 0!==n?n:this.sourceSpan}},{key:"getPlaceholderSourceSpan",value:function(e){var t,n,r,i;return null!==(i=null!==(n=null===(t=this.placeHolderNames[e])||void 0===t?void 0:t.sourceSpan)&&void 0!==n?n:null===(r=this.expressions[e])||void 0===r?void 0:r.sourceSpan)&&void 0!==i?i:this.sourceSpan}},{key:"serializeI18nTemplatePart",value:function(e){return Se(this.placeHolderNames[e-1].text,this.messageParts[e].text)}}]),n}(ae),Ce=function(e){return e.replace(/\\/g,"\\\\")},we=function(e){return e.replace(/:/g,"\\:")},ke=function(e){return e.replace(/`/g,"\\`").replace(/\${/g,"$\\{")};function Se(e,t){return""===e?{cooked:t,raw:ke((n=Ce(t),n.replace(/^:/,"\\:")))}:{cooked:":".concat(e,":").concat(t),raw:ke(":".concat(we(Ce(e)),":").concat(Ce(t)))};var n}var Oe,Ee=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;return Object(m.a)(this,n),(i=t.call(this,r,o)).value=e,i.typeParams=a,i}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value.name===e.value.name&&this.value.moduleName===e.value.moduleName&&this.value.runtime===e.value.runtime}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitExternalExpr(this,t)}}]),n}(ae),_e=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return Object(m.a)(this,n),(i=t.call(this,o||r.type,s)).condition=e,i.falseCase=a,i.trueCase=r,i}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&this.trueCase.isEquivalent(e.trueCase)&&ne(this.falseCase,e.falseCase)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitConditionalExpr(this,t)}}]),n}(ae),Ie=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i;return Object(m.a)(this,n),(i=t.call(this,Q,r)).condition=e,i}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitNotExpr(this,t)}}]),n}(ae),Pe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i;return Object(m.a)(this,n),(i=t.call(this,e.type,r)).condition=e,i}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitAssertNotNullExpr(this,t)}}]),n}(ae),Te=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,r,i)).value=e,a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value.isEquivalent(e.value)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitCastExpr(this,t)}}]),n}(ae),Ae=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(m.a)(this,e),this.name=t,this.type=n}return Object(v.a)(e,[{key:"isEquivalent",value:function(e){return this.name===e.name}}]),e}(),Me=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,i,a)).params=e,s.statements=r,s.name=o,s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&re(this.params,e.params)&&re(this.statements,e.statements)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitFunctionExpr(this,t)}},{key:"toDeclStmt",value:function(e,t){return new qe(e,this.params,this.statements,this.type,t,this.sourceSpan)}}]),n}(ae),De=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return Object(m.a)(this,n),(o=t.call(this,i||J,a)).operator=e,o.expr=r,o.parens=s,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.operator===e.operator&&this.expr.isEquivalent(e.expr)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitUnaryOperatorExpr(this,t)}}]),n}(ae),je=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return Object(m.a)(this,n),(s=t.call(this,a||r.type,o)).operator=e,s.rhs=i,s.parens=c,s.lhs=r,s}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.operator===e.operator&&this.lhs.isEquivalent(e.lhs)&&this.rhs.isEquivalent(e.rhs)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitBinaryOperatorExpr(this,t)}}]),n}(ae),Ne=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(m.a)(this,n),(o=t.call(this,i,a)).receiver=e,o.name=r,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.name===e.name}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitReadPropExpr(this,t)}},{key:"set",value:function(e){return new he(this.receiver,this.name,e,null,this.sourceSpan)}}]),n}(ae),Re=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(m.a)(this,n),(o=t.call(this,i,a)).receiver=e,o.index=r,o}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.receiver.isEquivalent(e.receiver)&&this.index.isEquivalent(e.index)}},{key:"isConstant",value:function(){return!1}},{key:"visitExpression",value:function(e,t){return e.visitReadKeyExpr(this,t)}},{key:"set",value:function(e){return new pe(this.receiver,this.index,e,null,this.sourceSpan)}}]),n}(ae),Le=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,r,i)).entries=e,a}return Object(v.a)(n,[{key:"isConstant",value:function(){return this.entries.every((function(e){return e.isConstant()}))}},{key:"isEquivalent",value:function(e){return e instanceof n&&re(this.entries,e.entries)}},{key:"visitExpression",value:function(e,t){return e.visitLiteralArrayExpr(this,t)}}]),n}(ae),Fe=function(){function e(t,n,r){Object(m.a)(this,e),this.key=t,this.value=n,this.quoted=r}return Object(v.a)(e,[{key:"isEquivalent",value:function(e){return this.key===e.key&&this.value.isEquivalent(e.value)}}]),e}(),Be=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,r,i)).entries=e,a.valueType=null,r&&(a.valueType=r.valueType),a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&re(this.entries,e.entries)}},{key:"isConstant",value:function(){return this.entries.every((function(e){return e.value.isConstant()}))}},{key:"visitExpression",value:function(e,t){return e.visitLiteralMapExpr(this,t)}}]),n}(ae),Ve=(new se(ie.This,null,null),new se(ie.Super,null,null),new se(ie.CatchError,null,null),new se(ie.CatchStack,null,null),new me(null,null,null)),ze=new me(null,$,null);!function(e){e[e.Final=0]="Final",e[e.Private=1]="Private",e[e.Exported=2]="Exported",e[e.Static=3]="Static"}(Oe||(Oe={}));var Ue=function(){function e(t,n,r){Object(m.a)(this,e),this.text=t,this.multiline=n,this.trailingNewline=r}return Object(v.a)(e,[{key:"toString",value:function(){return this.multiline?" ".concat(this.text," "):this.text}}]),e}(),Ge=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,"",!0,!0)).tags=e,r}return Object(v.a)(n,[{key:"toString",value:function(){return function(e){if(0===e.length)return"";if(1===e.length&&e[0].tagName&&!e[0].text)return"*".concat(ot(e[0])," ");var t,n="*\n",r=Object(u.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=" *",n+=ot(i).replace(/\n/g,"\n * "),n+="\n"}}catch(a){r.e(a)}finally{r.f()}return n+=" "}(this.tags)}}]),n}(Ue),He=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0;Object(m.a)(this,e),this.modifiers=t,this.sourceSpan=n,this.leadingComments=r}return Object(v.a)(e,[{key:"hasModifier",value:function(e){return-1!==this.modifiers.indexOf(e)}},{key:"addLeadingComment",value:function(e){var t;this.leadingComments=null!==(t=this.leadingComments)&&void 0!==t?t:[],this.leadingComments.push(e)}}]),e}(),Ye=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,a,o,s)).name=e,c.value=r,c.type=i||r&&r.type||null,c}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.name===e.name&&(this.value?!!e.value&&this.value.isEquivalent(e.value):!e.value)}},{key:"visitStatement",value:function(e,t){return e.visitDeclareVarStmt(this,t)}}]),n}(He),qe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s,c){var l;return Object(m.a)(this,n),(l=t.call(this,o,s,c)).name=e,l.params=r,l.statements=i,l.type=a||null,l}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&re(this.params,e.params)&&re(this.statements,e.statements)}},{key:"visitStatement",value:function(e,t){return e.visitDeclareFunctionStmt(this,t)}}]),n}(He),We=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,[],r,i)).expr=e,a}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.expr.isEquivalent(e.expr)}},{key:"visitStatement",value:function(e,t){return e.visitExpressionStmt(this,t)}}]),n}(He),Xe=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0;return Object(m.a)(this,n),(r=t.call(this,[],i,a)).value=e,r}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.value.isEquivalent(e.value)}},{key:"visitStatement",value:function(e,t){return e.visitReturnStmt(this,t)}}]),n}(He),Ke=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return Object(m.a)(this,n),(i=t.call(this,[],o,s)).condition=e,i.trueCase=r,i.falseCase=a,i}return Object(v.a)(n,[{key:"isEquivalent",value:function(e){return e instanceof n&&this.condition.isEquivalent(e.condition)&&re(this.trueCase,e.trueCase)&&re(this.falseCase,e.falseCase)}},{key:"visitStatement",value:function(e,t){return e.visitIfStmt(this,t)}}]),n}(He);function Ze(e,t,n){return new se(e,t,n)}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return new Ee(e,null,t,n)}function Qe(e,t,n){return new K(e,t,n)}function Je(e){return new ce(e)}function et(e,t,n){return new Le(e,t,n)}function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Be(e.map((function(e){return new Fe(e.key,e.value,e.quoted)})),t,null)}function nt(e,t,n,r,i){return new Me(e,t,n,r,i)}function rt(e,t,n,r,i){return new Ke(e,t,n,r,i)}function it(e,t,n){return new me(e,t,n)}function at(e){return e instanceof me&&null===e.value}function ot(e){var t="";if(e.tagName&&(t+=" @".concat(e.tagName)),e.text){if(e.text.match(/\/\*|\*\//))throw new Error('JSDoc text cannot contain "/*" and "*/"');t+=" "+e.text.replace(/@/g,"\\@")}return t}var st=/-+([a-z0-9])/g;function ct(e,t){return lt(e,":",t)}function lt(e,t,n){var r=e.indexOf(t);return-1==r?n:[e.slice(0,r).trim(),e.slice(r+1).trim()]}function ut(e){throw new Error("Internal Error: ".concat(e))}function pt(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}Object.getPrototypeOf({});function ht(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319&&e.length>n+1){var i=e.charCodeAt(n+1);i>=56320&&i<=57343&&(n++,r=(r-55296<<10)+i-56320+65536)}r<=127?t+=String.fromCharCode(r):r<=2047?t+=String.fromCharCode(r>>6&31|192,63&r|128):r<=65535?t+=String.fromCharCode(r>>12|224,r>>6&63|128,63&r|128):r<=2097151&&(t+=String.fromCharCode(r>>18&7|240,r>>12&63|128,r>>6&63|128,63&r|128))}return t}function dt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(dt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);if(!e.toString)return"object";var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}var ft="undefined"!=typeof window&&window,gt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,mt="undefined"!=typeof global&&global||ft||gt;function vt(e,t){for(var n=[],r=0;r<e;r++)n.push(t);return n}function bt(e,t){var n=[],r=[];return e.forEach((function(e){(t(e)?n:r).push(e)})),[n,r]}var yt=Ze("<unknown>"),xt={},Ct=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e.type)).resolved=e,r.original=e,r}return Object(v.a)(n,[{key:"visitExpression",value:function(e,t){return t===xt?this.original.visitExpression(e,t):this.resolved.visitExpression(e,t)}},{key:"isEquivalent",value:function(e){return e instanceof n&&this.resolved.isEquivalent(e.resolved)}},{key:"isConstant",value:function(){return!0}},{key:"fixup",value:function(e){this.resolved=e,this.shared=!0}}]),n}(ae),wt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(m.a)(this,e),this.isClosureCompilerEnabled=t,this.statements=[],this.literals=new Map,this.literalFactories=new Map,this.injectorDefinitions=new Map,this.directiveDefinitions=new Map,this.componentDefinitions=new Map,this.pipeDefinitions=new Map,this.nextNameIndex=0}return Object(v.a)(e,[{key:"getConstLiteral",value:function(e,t){if(e instanceof me&&!Et(e)||e instanceof Ct)return e;var n=this.keyOf(e),r=this.literals.get(n),i=!1;if(r||(r=new Ct(e),this.literals.set(n,r),i=!0),!i&&!r.shared||i&&t){var a,o,s=this.freshName();this.isClosureCompilerEnabled&&Et(e)?(a=Ze(s).set(new Me([],[new Xe(e)])),o=Ze(s).callFn([])):(a=Ze(s).set(e),o=Ze(s)),this.statements.push(a.toDeclStmt($,[Oe.Final])),r.fixup(o)}return r}},{key:"getDefinition",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.definitionsOf(t),a=i.get(e),o=!1;if(!a){var s=this.propertyNameOf(t);a=new Ct(n.importExpr(e).prop(s)),i.set(e,a),o=!0}if(!o&&!a.shared||o&&r){var c=this.freshName();this.statements.push(Ze(c).set(a.resolved).toDeclStmt($,[Oe.Final])),a.fixup(Ze(c))}return a}},{key:"getLiteralFactory",value:function(e){if(e instanceof Le){var t=e.entries.map((function(e){return e.isConstant()?e:yt})),n=this.keyOf(et(t));return this._getLiteralFactory(n,e.entries,(function(e){return et(e)}))}var r=tt(e.entries.map((function(e){return{key:e.key,value:e.value.isConstant()?e.value:yt,quoted:e.quoted}}))),i=this.keyOf(r);return this._getLiteralFactory(i,e.entries.map((function(e){return e.value})),(function(t){return tt(t.map((function(t,n){return{key:e.entries[n].key,value:t,quoted:e.entries[n].quoted}})))}))}},{key:"_getLiteralFactory",value:function(e,t,n){var r=this,i=this.literalFactories.get(e),a=t.filter((function(e){return!e.isConstant()}));if(!i){var o=t.map((function(e,t){return e.isConstant()?r.getConstLiteral(e,!0):Ze("a".concat(t))})),s=nt(o.filter(Ot).map((function(e){return new Ae(e.name,Z)})),[new Xe(n(o))],$),c=this.freshName();this.statements.push(Ze(c).set(s).toDeclStmt($,[Oe.Final])),i=Ze(c),this.literalFactories.set(e,i)}return{literalFactory:i,literalFactoryArguments:a}}},{key:"uniqueName",value:function(e){return"".concat(e).concat(this.nextNameIndex++)}},{key:"definitionsOf",value:function(e){switch(e){case 2:return this.componentDefinitions;case 1:return this.directiveDefinitions;case 0:return this.injectorDefinitions;case 3:return this.pipeDefinitions}return ut("Unknown definition kind ".concat(e)),this.componentDefinitions}},{key:"propertyNameOf",value:function(e){switch(e){case 2:return"\u0275cmp";case 1:return"\u0275dir";case 0:return"\u0275inj";case 3:return"\u0275pipe"}return ut("Unknown definition kind ".concat(e)),"<unknown>"}},{key:"freshName",value:function(){return this.uniqueName("_c")}},{key:"keyOf",value:function(e){return e.visitExpression(new kt,xt)}}]),e}(),kt=function(){function e(){Object(m.a)(this,e),this.visitWrappedNodeExpr=St,this.visitWriteVarExpr=St,this.visitWriteKeyExpr=St,this.visitWritePropExpr=St,this.visitInvokeMethodExpr=St,this.visitInvokeFunctionExpr=St,this.visitInstantiateExpr=St,this.visitConditionalExpr=St,this.visitNotExpr=St,this.visitAssertNotNullExpr=St,this.visitCastExpr=St,this.visitFunctionExpr=St,this.visitUnaryOperatorExpr=St,this.visitBinaryOperatorExpr=St,this.visitReadPropExpr=St,this.visitReadKeyExpr=St,this.visitCommaExpr=St,this.visitLocalizedString=St}return Object(v.a)(e,[{key:"visitLiteralExpr",value:function(e){return"".concat("string"==typeof e.value?'"'+e.value+'"':e.value)}},{key:"visitLiteralArrayExpr",value:function(e,t){var n=this;return"[".concat(e.entries.map((function(e){return e.visitExpression(n,t)})).join(","),"]")}},{key:"visitLiteralMapExpr",value:function(e,t){var n=this;return"{".concat(e.entries.map((function(e){return"".concat(function(e){var t=e.quoted?'"':"";return"".concat(t).concat(e.key).concat(t)}(e),":").concat(e.value.visitExpression(n,t))})).join(","))}},{key:"visitExternalExpr",value:function(e){return e.value.moduleName?"EX:".concat(e.value.moduleName,":").concat(e.value.name):"EX:".concat(e.value.runtime.name)}},{key:"visitReadVarExpr",value:function(e){return"VAR:".concat(e.name)}},{key:"visitTypeofExpr",value:function(e,t){return"TYPEOF:".concat(e.expr.visitExpression(this,t))}}]),e}();function St(e){throw new Error("Invalid state: Visitor ".concat(this.constructor.name," doesn't handle ").concat(e.constructor.name))}function Ot(e){return e instanceof se}function Et(e){return e instanceof me&&"string"==typeof e.value&&e.value.length>=50}var _t="@angular/core",It=function e(){Object(m.a)(this,e)};It.ANALYZE_FOR_ENTRY_COMPONENTS={name:"ANALYZE_FOR_ENTRY_COMPONENTS",moduleName:_t},It.ElementRef={name:"ElementRef",moduleName:_t},It.NgModuleRef={name:"NgModuleRef",moduleName:_t},It.ViewContainerRef={name:"ViewContainerRef",moduleName:_t},It.ChangeDetectorRef={name:"ChangeDetectorRef",moduleName:_t},It.QueryList={name:"QueryList",moduleName:_t},It.TemplateRef={name:"TemplateRef",moduleName:_t},It.Renderer2={name:"Renderer2",moduleName:_t},It.CodegenComponentFactoryResolver={name:"\u0275CodegenComponentFactoryResolver",moduleName:_t},It.ComponentFactoryResolver={name:"ComponentFactoryResolver",moduleName:_t},It.ComponentFactory={name:"ComponentFactory",moduleName:_t},It.ComponentRef={name:"ComponentRef",moduleName:_t},It.NgModuleFactory={name:"NgModuleFactory",moduleName:_t},It.createModuleFactory={name:"\u0275cmf",moduleName:_t},It.moduleDef={name:"\u0275mod",moduleName:_t},It.moduleProviderDef={name:"\u0275mpd",moduleName:_t},It.RegisterModuleFactoryFn={name:"\u0275registerModuleFactory",moduleName:_t},It.inject={name:"\u0275\u0275inject",moduleName:_t},It.directiveInject={name:"\u0275\u0275directiveInject",moduleName:_t},It.INJECTOR={name:"INJECTOR",moduleName:_t},It.Injector={name:"Injector",moduleName:_t},It.\u0275\u0275defineInjectable={name:"\u0275\u0275defineInjectable",moduleName:_t},It.InjectableDef={name:"\u0275\u0275InjectableDef",moduleName:_t},It.ViewEncapsulation={name:"ViewEncapsulation",moduleName:_t},It.ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleName:_t},It.SecurityContext={name:"SecurityContext",moduleName:_t},It.LOCALE_ID={name:"LOCALE_ID",moduleName:_t},It.TRANSLATIONS_FORMAT={name:"TRANSLATIONS_FORMAT",moduleName:_t},It.inlineInterpolate={name:"\u0275inlineInterpolate",moduleName:_t},It.interpolate={name:"\u0275interpolate",moduleName:_t},It.EMPTY_ARRAY={name:"\u0275EMPTY_ARRAY",moduleName:_t},It.EMPTY_MAP={name:"\u0275EMPTY_MAP",moduleName:_t},It.Renderer={name:"Renderer",moduleName:_t},It.viewDef={name:"\u0275vid",moduleName:_t},It.elementDef={name:"\u0275eld",moduleName:_t},It.anchorDef={name:"\u0275and",moduleName:_t},It.textDef={name:"\u0275ted",moduleName:_t},It.directiveDef={name:"\u0275did",moduleName:_t},It.providerDef={name:"\u0275prd",moduleName:_t},It.queryDef={name:"\u0275qud",moduleName:_t},It.pureArrayDef={name:"\u0275pad",moduleName:_t},It.pureObjectDef={name:"\u0275pod",moduleName:_t},It.purePipeDef={name:"\u0275ppd",moduleName:_t},It.pipeDef={name:"\u0275pid",moduleName:_t},It.nodeValue={name:"\u0275nov",moduleName:_t},It.ngContentDef={name:"\u0275ncd",moduleName:_t},It.unwrapValue={name:"\u0275unv",moduleName:_t},It.createRendererType2={name:"\u0275crt",moduleName:_t},It.RendererType2={name:"RendererType2",moduleName:_t},It.ViewDefinition={name:"\u0275ViewDefinition",moduleName:_t},It.createComponentFactory={name:"\u0275ccf",moduleName:_t},It.setClassMetadata={name:"\u0275setClassMetadata",moduleName:_t};var Pt=function(){function e(t,n,r){Object(m.a)(this,e),this.filePath=t,this.name=n,this.members=r}return Object(v.a)(e,[{key:"assertNoMembers",value:function(){if(this.members.length)throw new Error("Illegal state: symbol without members expected, but got ".concat(JSON.stringify(this),"."))}}]),e}();function Tt(e){return e.replace(/\W/g,"_")}var At,Mt=0;function Dt(e){if(!e||!e.reference)return null;var t=e.reference;if(t instanceof Pt)return t.name;if(t.__anonymousType)return t.__anonymousType;var n=dt(t);return n.indexOf("(")>=0?(n="anonymous_".concat(Mt++),t.__anonymousType=n):n=Tt(n),n}!function(e){e[e.Pipe=0]="Pipe",e[e.Directive=1]="Directive",e[e.NgModule=2]="NgModule",e[e.Injectable=3]="Injectable"}(At||(At={}));function jt(e){return e.reduce((function(e,t){var n=Array.isArray(t)?jt(t):t;return e.concat(n)}),[])}var Nt="@angular/core",Rt=function e(){Object(m.a)(this,e)};function Lt(e){return tt(Object.keys(e).map((function(t){return{key:t,value:e[t],quoted:!1}})))}function Ft(e,t){if(0===t)return Qe(e);for(var n=[],r=0;r<t;r++)n.push(Z);return Qe(e,void 0,n)}Rt.NEW_METHOD="factory",Rt.TRANSFORM_METHOD="transform",Rt.PATCH_DEPS="patchedDeps",Rt.namespaceHTML={name:"\u0275\u0275namespaceHTML",moduleName:Nt},Rt.namespaceMathML={name:"\u0275\u0275namespaceMathML",moduleName:Nt},Rt.namespaceSVG={name:"\u0275\u0275namespaceSVG",moduleName:Nt},Rt.element={name:"\u0275\u0275element",moduleName:Nt},Rt.elementStart={name:"\u0275\u0275elementStart",moduleName:Nt},Rt.elementEnd={name:"\u0275\u0275elementEnd",moduleName:Nt},Rt.advance={name:"\u0275\u0275advance",moduleName:Nt},Rt.syntheticHostProperty={name:"\u0275\u0275syntheticHostProperty",moduleName:Nt},Rt.syntheticHostListener={name:"\u0275\u0275syntheticHostListener",moduleName:Nt},Rt.attribute={name:"\u0275\u0275attribute",moduleName:Nt},Rt.attributeInterpolate1={name:"\u0275\u0275attributeInterpolate1",moduleName:Nt},Rt.attributeInterpolate2={name:"\u0275\u0275attributeInterpolate2",moduleName:Nt},Rt.attributeInterpolate3={name:"\u0275\u0275attributeInterpolate3",moduleName:Nt},Rt.attributeInterpolate4={name:"\u0275\u0275attributeInterpolate4",moduleName:Nt},Rt.attributeInterpolate5={name:"\u0275\u0275attributeInterpolate5",moduleName:Nt},Rt.attributeInterpolate6={name:"\u0275\u0275attributeInterpolate6",moduleName:Nt},Rt.attributeInterpolate7={name:"\u0275\u0275attributeInterpolate7",moduleName:Nt},Rt.attributeInterpolate8={name:"\u0275\u0275attributeInterpolate8",moduleName:Nt},Rt.attributeInterpolateV={name:"\u0275\u0275attributeInterpolateV",moduleName:Nt},Rt.classProp={name:"\u0275\u0275classProp",moduleName:Nt},Rt.elementContainerStart={name:"\u0275\u0275elementContainerStart",moduleName:Nt},Rt.elementContainerEnd={name:"\u0275\u0275elementContainerEnd",moduleName:Nt},Rt.elementContainer={name:"\u0275\u0275elementContainer",moduleName:Nt},Rt.styleMap={name:"\u0275\u0275styleMap",moduleName:Nt},Rt.styleMapInterpolate1={name:"\u0275\u0275styleMapInterpolate1",moduleName:Nt},Rt.styleMapInterpolate2={name:"\u0275\u0275styleMapInterpolate2",moduleName:Nt},Rt.styleMapInterpolate3={name:"\u0275\u0275styleMapInterpolate3",moduleName:Nt},Rt.styleMapInterpolate4={name:"\u0275\u0275styleMapInterpolate4",moduleName:Nt},Rt.styleMapInterpolate5={name:"\u0275\u0275styleMapInterpolate5",moduleName:Nt},Rt.styleMapInterpolate6={name:"\u0275\u0275styleMapInterpolate6",moduleName:Nt},Rt.styleMapInterpolate7={name:"\u0275\u0275styleMapInterpolate7",moduleName:Nt},Rt.styleMapInterpolate8={name:"\u0275\u0275styleMapInterpolate8",moduleName:Nt},Rt.styleMapInterpolateV={name:"\u0275\u0275styleMapInterpolateV",moduleName:Nt},Rt.classMap={name:"\u0275\u0275classMap",moduleName:Nt},Rt.classMapInterpolate1={name:"\u0275\u0275classMapInterpolate1",moduleName:Nt},Rt.classMapInterpolate2={name:"\u0275\u0275classMapInterpolate2",moduleName:Nt},Rt.classMapInterpolate3={name:"\u0275\u0275classMapInterpolate3",moduleName:Nt},Rt.classMapInterpolate4={name:"\u0275\u0275classMapInterpolate4",moduleName:Nt},Rt.classMapInterpolate5={name:"\u0275\u0275classMapInterpolate5",moduleName:Nt},Rt.classMapInterpolate6={name:"\u0275\u0275classMapInterpolate6",moduleName:Nt},Rt.classMapInterpolate7={name:"\u0275\u0275classMapInterpolate7",moduleName:Nt},Rt.classMapInterpolate8={name:"\u0275\u0275classMapInterpolate8",moduleName:Nt},Rt.classMapInterpolateV={name:"\u0275\u0275classMapInterpolateV",moduleName:Nt},Rt.styleProp={name:"\u0275\u0275styleProp",moduleName:Nt},Rt.stylePropInterpolate1={name:"\u0275\u0275stylePropInterpolate1",moduleName:Nt},Rt.stylePropInterpolate2={name:"\u0275\u0275stylePropInterpolate2",moduleName:Nt},Rt.stylePropInterpolate3={name:"\u0275\u0275stylePropInterpolate3",moduleName:Nt},Rt.stylePropInterpolate4={name:"\u0275\u0275stylePropInterpolate4",moduleName:Nt},Rt.stylePropInterpolate5={name:"\u0275\u0275stylePropInterpolate5",moduleName:Nt},Rt.stylePropInterpolate6={name:"\u0275\u0275stylePropInterpolate6",moduleName:Nt},Rt.stylePropInterpolate7={name:"\u0275\u0275stylePropInterpolate7",moduleName:Nt},Rt.stylePropInterpolate8={name:"\u0275\u0275stylePropInterpolate8",moduleName:Nt},Rt.stylePropInterpolateV={name:"\u0275\u0275stylePropInterpolateV",moduleName:Nt},Rt.nextContext={name:"\u0275\u0275nextContext",moduleName:Nt},Rt.templateCreate={name:"\u0275\u0275template",moduleName:Nt},Rt.text={name:"\u0275\u0275text",moduleName:Nt},Rt.enableBindings={name:"\u0275\u0275enableBindings",moduleName:Nt},Rt.disableBindings={name:"\u0275\u0275disableBindings",moduleName:Nt},Rt.getCurrentView={name:"\u0275\u0275getCurrentView",moduleName:Nt},Rt.textInterpolate={name:"\u0275\u0275textInterpolate",moduleName:Nt},Rt.textInterpolate1={name:"\u0275\u0275textInterpolate1",moduleName:Nt},Rt.textInterpolate2={name:"\u0275\u0275textInterpolate2",moduleName:Nt},Rt.textInterpolate3={name:"\u0275\u0275textInterpolate3",moduleName:Nt},Rt.textInterpolate4={name:"\u0275\u0275textInterpolate4",moduleName:Nt},Rt.textInterpolate5={name:"\u0275\u0275textInterpolate5",moduleName:Nt},Rt.textInterpolate6={name:"\u0275\u0275textInterpolate6",moduleName:Nt},Rt.textInterpolate7={name:"\u0275\u0275textInterpolate7",moduleName:Nt},Rt.textInterpolate8={name:"\u0275\u0275textInterpolate8",moduleName:Nt},Rt.textInterpolateV={name:"\u0275\u0275textInterpolateV",moduleName:Nt},Rt.restoreView={name:"\u0275\u0275restoreView",moduleName:Nt},Rt.pureFunction0={name:"\u0275\u0275pureFunction0",moduleName:Nt},Rt.pureFunction1={name:"\u0275\u0275pureFunction1",moduleName:Nt},Rt.pureFunction2={name:"\u0275\u0275pureFunction2",moduleName:Nt},Rt.pureFunction3={name:"\u0275\u0275pureFunction3",moduleName:Nt},Rt.pureFunction4={name:"\u0275\u0275pureFunction4",moduleName:Nt},Rt.pureFunction5={name:"\u0275\u0275pureFunction5",moduleName:Nt},Rt.pureFunction6={name:"\u0275\u0275pureFunction6",moduleName:Nt},Rt.pureFunction7={name:"\u0275\u0275pureFunction7",moduleName:Nt},Rt.pureFunction8={name:"\u0275\u0275pureFunction8",moduleName:Nt},Rt.pureFunctionV={name:"\u0275\u0275pureFunctionV",moduleName:Nt},Rt.pipeBind1={name:"\u0275\u0275pipeBind1",moduleName:Nt},Rt.pipeBind2={name:"\u0275\u0275pipeBind2",moduleName:Nt},Rt.pipeBind3={name:"\u0275\u0275pipeBind3",moduleName:Nt},Rt.pipeBind4={name:"\u0275\u0275pipeBind4",moduleName:Nt},Rt.pipeBindV={name:"\u0275\u0275pipeBindV",moduleName:Nt},Rt.hostProperty={name:"\u0275\u0275hostProperty",moduleName:Nt},Rt.property={name:"\u0275\u0275property",moduleName:Nt},Rt.propertyInterpolate={name:"\u0275\u0275propertyInterpolate",moduleName:Nt},Rt.propertyInterpolate1={name:"\u0275\u0275propertyInterpolate1",moduleName:Nt},Rt.propertyInterpolate2={name:"\u0275\u0275propertyInterpolate2",moduleName:Nt},Rt.propertyInterpolate3={name:"\u0275\u0275propertyInterpolate3",moduleName:Nt},Rt.propertyInterpolate4={name:"\u0275\u0275propertyInterpolate4",moduleName:Nt},Rt.propertyInterpolate5={name:"\u0275\u0275propertyInterpolate5",moduleName:Nt},Rt.propertyInterpolate6={name:"\u0275\u0275propertyInterpolate6",moduleName:Nt},Rt.propertyInterpolate7={name:"\u0275\u0275propertyInterpolate7",moduleName:Nt},Rt.propertyInterpolate8={name:"\u0275\u0275propertyInterpolate8",moduleName:Nt},Rt.propertyInterpolateV={name:"\u0275\u0275propertyInterpolateV",moduleName:Nt},Rt.i18n={name:"\u0275\u0275i18n",moduleName:Nt},Rt.i18nAttributes={name:"\u0275\u0275i18nAttributes",moduleName:Nt},Rt.i18nExp={name:"\u0275\u0275i18nExp",moduleName:Nt},Rt.i18nStart={name:"\u0275\u0275i18nStart",moduleName:Nt},Rt.i18nEnd={name:"\u0275\u0275i18nEnd",moduleName:Nt},Rt.i18nApply={name:"\u0275\u0275i18nApply",moduleName:Nt},Rt.i18nPostprocess={name:"\u0275\u0275i18nPostprocess",moduleName:Nt},Rt.pipe={name:"\u0275\u0275pipe",moduleName:Nt},Rt.projection={name:"\u0275\u0275projection",moduleName:Nt},Rt.projectionDef={name:"\u0275\u0275projectionDef",moduleName:Nt},Rt.reference={name:"\u0275\u0275reference",moduleName:Nt},Rt.inject={name:"\u0275\u0275inject",moduleName:Nt},Rt.injectAttribute={name:"\u0275\u0275injectAttribute",moduleName:Nt},Rt.injectPipeChangeDetectorRef={name:"\u0275\u0275injectPipeChangeDetectorRef",moduleName:Nt},Rt.directiveInject={name:"\u0275\u0275directiveInject",moduleName:Nt},Rt.invalidFactory={name:"\u0275\u0275invalidFactory",moduleName:Nt},Rt.invalidFactoryDep={name:"\u0275\u0275invalidFactoryDep",moduleName:Nt},Rt.templateRefExtractor={name:"\u0275\u0275templateRefExtractor",moduleName:Nt},Rt.resolveWindow={name:"\u0275\u0275resolveWindow",moduleName:Nt},Rt.resolveDocument={name:"\u0275\u0275resolveDocument",moduleName:Nt},Rt.resolveBody={name:"\u0275\u0275resolveBody",moduleName:Nt},Rt.defineComponent={name:"\u0275\u0275defineComponent",moduleName:Nt},Rt.setComponentScope={name:"\u0275\u0275setComponentScope",moduleName:Nt},Rt.ComponentDefWithMeta={name:"\u0275\u0275ComponentDefWithMeta",moduleName:Nt},Rt.FactoryDef={name:"\u0275\u0275FactoryDef",moduleName:Nt},Rt.defineDirective={name:"\u0275\u0275defineDirective",moduleName:Nt},Rt.DirectiveDefWithMeta={name:"\u0275\u0275DirectiveDefWithMeta",moduleName:Nt},Rt.InjectorDef={name:"\u0275\u0275InjectorDef",moduleName:Nt},Rt.defineInjector={name:"\u0275\u0275defineInjector",moduleName:Nt},Rt.NgModuleDefWithMeta={name:"\u0275\u0275NgModuleDefWithMeta",moduleName:Nt},Rt.ModuleWithProviders={name:"ModuleWithProviders",moduleName:Nt},Rt.defineNgModule={name:"\u0275\u0275defineNgModule",moduleName:Nt},Rt.setNgModuleScope={name:"\u0275\u0275setNgModuleScope",moduleName:Nt},Rt.PipeDefWithMeta={name:"\u0275\u0275PipeDefWithMeta",moduleName:Nt},Rt.definePipe={name:"\u0275\u0275definePipe",moduleName:Nt},Rt.queryRefresh={name:"\u0275\u0275queryRefresh",moduleName:Nt},Rt.viewQuery={name:"\u0275\u0275viewQuery",moduleName:Nt},Rt.staticViewQuery={name:"\u0275\u0275staticViewQuery",moduleName:Nt},Rt.staticContentQuery={name:"\u0275\u0275staticContentQuery",moduleName:Nt},Rt.loadQuery={name:"\u0275\u0275loadQuery",moduleName:Nt},Rt.contentQuery={name:"\u0275\u0275contentQuery",moduleName:Nt},Rt.NgOnChangesFeature={name:"\u0275\u0275NgOnChangesFeature",moduleName:Nt},Rt.InheritDefinitionFeature={name:"\u0275\u0275InheritDefinitionFeature",moduleName:Nt},Rt.CopyDefinitionFeature={name:"\u0275\u0275CopyDefinitionFeature",moduleName:Nt},Rt.ProvidersFeature={name:"\u0275\u0275ProvidersFeature",moduleName:Nt},Rt.listener={name:"\u0275\u0275listener",moduleName:Nt},Rt.getFactoryOf={name:"\u0275\u0275getFactoryOf",moduleName:Nt},Rt.getInheritedFactory={name:"\u0275\u0275getInheritedFactory",moduleName:Nt},Rt.sanitizeHtml={name:"\u0275\u0275sanitizeHtml",moduleName:Nt},Rt.sanitizeStyle={name:"\u0275\u0275sanitizeStyle",moduleName:Nt},Rt.sanitizeResourceUrl={name:"\u0275\u0275sanitizeResourceUrl",moduleName:Nt},Rt.sanitizeScript={name:"\u0275\u0275sanitizeScript",moduleName:Nt},Rt.sanitizeUrl={name:"\u0275\u0275sanitizeUrl",moduleName:Nt},Rt.sanitizeUrlOrResourceUrl={name:"\u0275\u0275sanitizeUrlOrResourceUrl",moduleName:Nt};var Bt="@";function Vt(e){return"".concat(Bt).concat(e)}function zt(e,t){return"".concat(Bt).concat(e,".").concat(t)}function Ut(e,t){return"animation_".concat(e,"_").concat(t)}var Gt=10,Ht=41,Yt=44,qt=47,Wt=58,Xt=59,Kt=61,Zt=62,$t=97,Qt=122,Jt=123,en=125;function tn(e){return e>=9&&e<=32||160==e}function nn(e){return 48<=e&&e<=57}function rn(e){return e>=$t&&e<=Qt||e>=65&&e<=90}function an(e){return e===Gt||13===e}function on(e){return 48<=e&&e<=55}var sn,cn=function(){function e(t,n,r,i){Object(m.a)(this,e),this.file=t,this.offset=n,this.line=r,this.col=i}return Object(v.a)(e,[{key:"toString",value:function(){return null!=this.offset?"".concat(this.file.url,"@").concat(this.line,":").concat(this.col):this.file.url}},{key:"moveBy",value:function(t){for(var n=this.file.content,r=n.length,i=this.offset,a=this.line,o=this.col;i>0&&t<0;){if(i--,t++,n.charCodeAt(i)==Gt){a--;var s=n.substr(0,i-1).lastIndexOf(String.fromCharCode(Gt));o=s>0?i-s:i}else o--}for(;i<r&&t>0;){var c=n.charCodeAt(i);i++,t--,c==Gt?(a++,o=0):o++}return new e(this.file,i,a,o)}},{key:"getContext",value:function(e,t){var n=this.file.content,r=this.offset;if(null!=r){r>n.length-1&&(r=n.length-1);for(var i=r,a=0,o=0;a<e&&r>0&&(a++,"\n"!=n[--r]||++o!=t););for(a=0,o=0;a<e&&i<n.length-1&&(a++,"\n"!=n[++i]||++o!=t););return{before:n.substring(r,this.offset),after:n.substring(this.offset,i+1)}}return null}}]),e}(),ln=function e(t,n){Object(m.a)(this,e),this.content=t,this.url=n},un=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(m.a)(this,e),this.start=t,this.end=n,this.fullStart=r,this.details=i}return Object(v.a)(e,[{key:"toString",value:function(){return this.start.file.content.substring(this.start.offset,this.end.offset)}}]),e}();!function(e){e[e.WARNING=0]="WARNING",e[e.ERROR=1]="ERROR"}(sn||(sn={}));var pn=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.ERROR;Object(m.a)(this,e),this.span=t,this.msg=n,this.level=r}return Object(v.a)(e,[{key:"contextualMessage",value:function(){var e=this.span.start.getContext(100,3);return e?"".concat(this.msg,' ("').concat(e.before,"[").concat(sn[this.level]," ->]").concat(e.after,'")'):this.msg}},{key:"toString",value:function(){var e=this.span.details?", ".concat(this.span.details):"";return"".concat(this.contextualMessage(),": ").concat(this.span.start).concat(e)}}]),e}();var hn=function(){function e(t,n){Object(m.a)(this,e),this.value=t,this.sourceSpan=n}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitText(this)}}]),e}(),dn=function(){function e(t,n,r){Object(m.a)(this,e),this.value=t,this.sourceSpan=n,this.i18n=r}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitBoundText(this)}}]),e}(),fn=function(){function e(t,n,r,i,a){Object(m.a)(this,e),this.name=t,this.value=n,this.sourceSpan=r,this.valueSpan=i,this.i18n=a}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitTextAttribute(this)}}]),e}(),gn=function(){function e(t,n,r,i,a,o,s,c){Object(m.a)(this,e),this.name=t,this.type=n,this.securityContext=r,this.value=i,this.unit=a,this.sourceSpan=o,this.valueSpan=s,this.i18n=c}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitBoundAttribute(this)}}],[{key:"fromBoundElementProperty",value:function(t,n){return new e(t.name,t.type,t.securityContext,t.value,t.unit,t.sourceSpan,t.valueSpan,n)}}]),e}(),mn=function(){function e(t,n,r,i,a,o,s){Object(m.a)(this,e),this.name=t,this.type=n,this.handler=r,this.target=i,this.phase=a,this.sourceSpan=o,this.handlerSpan=s}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitBoundEvent(this)}}],[{key:"fromParsedEvent",value:function(t){var n=0===t.type?t.targetOrPhase:null,r=1===t.type?t.targetOrPhase:null;return new e(t.name,t.type,t.handler,n,r,t.sourceSpan,t.handlerSpan)}}]),e}(),vn=function(){function e(t,n,r,i,a,o,s,c,l,u){Object(m.a)(this,e),this.name=t,this.attributes=n,this.inputs=r,this.outputs=i,this.children=a,this.references=o,this.sourceSpan=s,this.startSourceSpan=c,this.endSourceSpan=l,this.i18n=u,0===a.length&&c&&l&&(this.sourceSpan=new un(s.start,l.end))}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitElement(this)}}]),e}(),bn=function(){function e(t,n,r,i,a,o,s,c,l,u,p,h){Object(m.a)(this,e),this.tagName=t,this.attributes=n,this.inputs=r,this.outputs=i,this.templateAttrs=a,this.children=o,this.references=s,this.variables=c,this.sourceSpan=l,this.startSourceSpan=u,this.endSourceSpan=p,this.i18n=h}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitTemplate(this)}}]),e}(),yn=function(){function e(t,n,r,i){Object(m.a)(this,e),this.selector=t,this.attributes=n,this.sourceSpan=r,this.i18n=i,this.name="ng-content"}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitContent(this)}}]),e}(),xn=function(){function e(t,n,r,i){Object(m.a)(this,e),this.name=t,this.value=n,this.sourceSpan=r,this.valueSpan=i}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitVariable(this)}}]),e}(),Cn=function(){function e(t,n,r,i){Object(m.a)(this,e),this.name=t,this.value=n,this.sourceSpan=r,this.valueSpan=i}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitReference(this)}}]),e}(),wn=function(){function e(t,n,r,i){Object(m.a)(this,e),this.vars=t,this.placeholders=n,this.sourceSpan=r,this.i18n=i}return Object(v.a)(e,[{key:"visit",value:function(e){return e.visitIcu(this)}}]),e}();function kn(e,t){var n=[];if(e.visit){var r,i=Object(u.a)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.visit(a)||a.visit(e)}}catch(l){i.e(l)}finally{i.f()}}else{var o,s=Object(u.a)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value.visit(e);c&&n.push(c)}}catch(l){s.e(l)}finally{s.f()}}return n}var Sn=function e(t,n,r,i,a,o){Object(m.a)(this,e),this.nodes=t,this.placeholders=n,this.placeholderToMessage=r,this.meaning=i,this.description=a,this.customId=o,this.id=this.customId,this.legacyIds=[],t.length?this.sources=[{filePath:t[0].sourceSpan.start.file.url,startLine:t[0].sourceSpan.start.line+1,startCol:t[0].sourceSpan.start.col+1,endLine:t[t.length-1].sourceSpan.end.line+1,endCol:t[0].sourceSpan.start.col+1}]:this.sources=[]},On=function(){function e(t,n){Object(m.a)(this,e),this.value=t,this.sourceSpan=n}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitText(this,t)}}]),e}(),En=function(){function e(t,n){Object(m.a)(this,e),this.children=t,this.sourceSpan=n}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitContainer(this,t)}}]),e}(),_n=function(){function e(t,n,r,i){Object(m.a)(this,e),this.expression=t,this.type=n,this.cases=r,this.sourceSpan=i}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitIcu(this,t)}}]),e}(),In=function(){function e(t,n,r,i,a,o,s,c,l){Object(m.a)(this,e),this.tag=t,this.attrs=n,this.startName=r,this.closeName=i,this.children=a,this.isVoid=o,this.sourceSpan=s,this.startSourceSpan=c,this.endSourceSpan=l}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitTagPlaceholder(this,t)}}]),e}(),Pn=function(){function e(t,n,r){Object(m.a)(this,e),this.value=t,this.name=n,this.sourceSpan=r}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitPlaceholder(this,t)}}]),e}(),Tn=function(){function e(t,n,r){Object(m.a)(this,e),this.value=t,this.name=n,this.sourceSpan=r}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitIcuPlaceholder(this,t)}}]),e}();function An(e){return function(e){var t=ht(e),n=function(e,t){for(var n=e.length+3>>>2,r=[],i=0;i<n;i++)r[i]=Kn(e,4*i,t);return r}(t,Rn.Big),r=8*t.length,i=vt(80),a=1732584193,o=4023233417,s=2562383102,c=271733878,l=3285377520;n[r>>5]|=128<<24-r%32,n[15+(r+64>>9<<4)]=r;for(var u=0;u<n.length;u+=16){for(var p=a,h=o,d=s,f=c,g=l,m=0;m<80;m++){i[m]=m<16?n[u+m]:qn(i[m-3]^i[m-8]^i[m-14]^i[m-16],1);var v=Fn(m,o,s,c),b=v[0],y=v[1],x=[qn(a,5),b,l,y,i[m]].reduce(Un);l=c,c=s,s=qn(o,30),o=a,a=x}a=Un(a,p),o=Un(o,h),s=Un(s,d),c=Un(c,f),l=Un(l,g)}return function(e){for(var t="",n=0;n<e.length;n++){var r=Xn(e,n);t+=(r>>>4).toString(16)+(15&r).toString(16)}return t.toLowerCase()}(Zn([a,o,s,c,l]))}((t=e.nodes,t.map((function(e){return e.visit(Nn,null)}))).join("")+"[".concat(e.meaning,"]"));var t}function Mn(e){return e.id||Dn(e)}function Dn(e){var t=new Ln;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Bn(e);if(t){var r=Bn(t);n=Hn(Wn(n,1),r)}var i=n[0],a=n[1];return $n(Zn([2147483647&i,a]))}(e.nodes.map((function(e){return e.visit(t,null)})).join(""),e.meaning)}var jn=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitText",value:function(e,t){return e.value}},{key:"visitContainer",value:function(e,t){var n=this;return"[".concat(e.children.map((function(e){return e.visit(n)})).join(", "),"]")}},{key:"visitIcu",value:function(e,t){var n=this,r=Object.keys(e.cases).map((function(t){return"".concat(t," {").concat(e.cases[t].visit(n),"}")}));return"{".concat(e.expression,", ").concat(e.type,", ").concat(r.join(", "),"}")}},{key:"visitTagPlaceholder",value:function(e,t){var n=this;return e.isVoid?'<ph tag name="'.concat(e.startName,'"/>'):'<ph tag name="'.concat(e.startName,'">').concat(e.children.map((function(e){return e.visit(n)})).join(", "),'</ph name="').concat(e.closeName,'">')}},{key:"visitPlaceholder",value:function(e,t){return e.value?'<ph name="'.concat(e.name,'">').concat(e.value,"</ph>"):'<ph name="'.concat(e.name,'"/>')}},{key:"visitIcuPlaceholder",value:function(e,t){return'<ph icu name="'.concat(e.name,'">').concat(e.value.visit(this),"</ph>")}}]),e}(),Nn=new jn;var Rn,Ln=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"visitIcu",value:function(e,t){var n=this,r=Object.keys(e.cases).map((function(t){return"".concat(t," {").concat(e.cases[t].visit(n),"}")}));return"{".concat(e.type,", ").concat(r.join(", "),"}")}}]),n}(jn);function Fn(e,t,n,r){return e<20?[t&n|~t&r,1518500249]:e<40?[t^n^r,1859775393]:e<60?[t&n|t&r|n&r,2400959708]:[t^n^r,3395469782]}function Bn(e){var t=ht(e),n=Vn(t,0),r=Vn(t,102072);return 0!=n||0!=r&&1!=r||(n^=319790063,r^=-1801410264),[n,r]}function Vn(e,t){var n,r=2654435769,i=2654435769,a=e.length;for(n=0;n+12<=a;n+=12){var o=zn(r=Un(r,Kn(e,n,Rn.Little)),i=Un(i,Kn(e,n+4,Rn.Little)),t=Un(t,Kn(e,n+8,Rn.Little)));r=o[0],i=o[1],t=o[2]}return r=Un(r,Kn(e,n,Rn.Little)),i=Un(i,Kn(e,n+4,Rn.Little)),t=Un(t,a),zn(r,i,t=Un(t,Kn(e,n+8,Rn.Little)<<8))[2]}function zn(e,t,n){return e=Yn(e,t),e=Yn(e,n),e^=n>>>13,t=Yn(t,n),t=Yn(t,e),t^=e<<8,n=Yn(n,e),n=Yn(n,t),n^=t>>>13,e=Yn(e,t),e=Yn(e,n),e^=n>>>12,t=Yn(t,n),t=Yn(t,e),t^=e<<16,n=Yn(n,e),n=Yn(n,t),n^=t>>>5,e=Yn(e,t),e=Yn(e,n),e^=n>>>3,t=Yn(t,n),t=Yn(t,e),t^=e<<10,n=Yn(n,e),n=Yn(n,t),[e,t,n^=t>>>15]}function Un(e,t){return Gn(e,t)[1]}function Gn(e,t){var n=(65535&e)+(65535&t),r=(e>>>16)+(t>>>16)+(n>>>16);return[r>>>16,r<<16|65535&n]}function Hn(e,t){var n=e[0],r=e[1],i=t[0],a=Gn(r,t[1]),o=a[0],s=a[1];return[Un(Un(n,i),o),s]}function Yn(e,t){var n=(65535&e)-(65535&t);return(e>>16)-(t>>16)+(n>>16)<<16|65535&n}function qn(e,t){return e<<t|e>>>32-t}function Wn(e,t){var n=e[0],r=e[1];return[n<<t|r>>>32-t,r<<t|n>>>32-t]}function Xn(e,t){return t>=e.length?0:255&e.charCodeAt(t)}function Kn(e,t,n){var r=0;if(n===Rn.Big)for(var i=0;i<4;i++)r+=Xn(e,t+i)<<24-8*i;else for(var a=0;a<4;a++)r+=Xn(e,t+a)<<8*a;return r}function Zn(e){return e.reduce((function(e,t){return e+function(e){for(var t="",n=0;n<4;n++)t+=String.fromCharCode(e>>>8*(3-n)&255);return t}(t)}),"")}function $n(e){for(var t="",n="1",r=e.length-1;r>=0;r--)t=Qn(t,Jn(Xn(e,r),n)),n=Jn(256,n);return t.split("").reverse().join("")}function Qn(e,t){for(var n="",r=Math.max(e.length,t.length),i=0,a=0;i<r||a;i++){var o=a+ +(e[i]||0)+ +(t[i]||0);o>=10?(a=1,n+=o-10):(a=0,n+=o)}return n}function Jn(e,t){for(var n="",r=t;0!==e;e>>>=1)1&e&&(n=Qn(n,r)),r=Qn(r,r);return n}!function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(Rn||(Rn={}));new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitTag",value:function(e){var t=this,n=this._serializeAttributes(e.attrs);if(0==e.children.length)return"<".concat(e.name).concat(n,"/>");var r=e.children.map((function(e){return e.visit(t)}));return"<".concat(e.name).concat(n,">").concat(r.join(""),"</").concat(e.name,">")}},{key:"visitText",value:function(e){return e.value}},{key:"visitDeclaration",value:function(e){return"<?xml".concat(this._serializeAttributes(e.attrs)," ?>")}},{key:"_serializeAttributes",value:function(e){var t=Object.keys(e).map((function(t){return"".concat(t,'="').concat(e[t],'"')})).join(" ");return t.length>0?" "+t:""}},{key:"visitDoctype",value:function(e){return"<!DOCTYPE ".concat(e.rootTag," [\n").concat(e.dtd,"\n]>")}}]),e}());function er(e){return e.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}var tr="i18n",nr="i18n-",rr="\ufffd";function ir(e){return e===tr||e.startsWith(nr)}function ar(e){return e instanceof Sn}function or(e){return ar(e)&&1===e.nodes.length&&e.nodes[0]instanceof _n}function sr(e){return!!e.i18n}function cr(e){return e.nodes[0]}function lr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t>0?":".concat(t):"";return"".concat(rr).concat(e).concat(n).concat(rr)}function ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e;return function(){return t++}}function pr(e){var t={};return e.forEach((function(e,n){t[n]=it(e.length>1?"[".concat(e.join("|"),"]"):e[0])})),t}function hr(e,t){for(var n=e.get(t)||[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];n.push.apply(n,i),e.set(t,n)}function dr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t,i=new Map,a=e instanceof Sn?e.nodes.find((function(e){return e instanceof En})):e;return a&&a.children.filter((function(e){return e instanceof Pn})).forEach((function(e,t){var a=lr(r+t,n);hr(i,e.name,a)})),i}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={};return e&&Object.keys(e).length&&Object.keys(e).forEach((function(r){return n[gr(r,t)]=e[r]})),n}function gr(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=er(e);if(!t)return n;var r,i=n.split("_");if(1===i.length)return e.toLowerCase();/^\d+$/.test(i[i.length-1])&&(r=i.pop());var a=i.shift().toLowerCase();return i.length&&(a+=i.map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join("")),r?"".concat(a,"_").concat(r):a}function mr(e){return"".concat("MSG_").concat(e).toUpperCase()}function vr(e){return new Ye(e.name,void 0,$,void 0,e.sourceSpan)}var br=/[-.]/,yr="_t",xr="ctx",Cr="rf";function wr(e,t){var n=null;return function(){return n||(e.push(new Ye(yr,void 0,Z)),n=Ze(t)),n}}function kr(e){if(this)throw new Error("Builder ".concat(this.constructor.name," doesn't support ").concat(e," yet"));throw new Error("Feature ".concat(e," is not supported yet"))}function Sr(e){throw new Error("Invalid state: Visitor ".concat(this.constructor.name," doesn't handle ").concat(e.constructor.name))}function Or(e){return Array.isArray(e)?et(e.map(Or)):it(e,$)}function Er(e,t){return Object.getOwnPropertyNames(e).length>0?function(e,t){return tt(Object.getOwnPropertyNames(e).map((function(n){var r,i,a,o=e[n];if(Array.isArray(o)){var s=Object(l.a)(o,2);i=s[0],r=s[1]}else{var c=ct(n,[n,o]),u=Object(l.a)(c,2);r=u[0],i=u[1]}return{key:a=r,quoted:br.test(a),value:t&&i!==r?et([Or(i),Or(r)]):Or(i)}})))}(e,t):null}function _r(e){for(;at(e[e.length-1]);)e.pop();return e}function Ir(e,t){if(Array.isArray(e.predicate)){var n=[];return e.predicate.forEach((function(e){var t=e.split(",").map((function(e){return it(e.trim())}));n.push.apply(n,Object(g.a)(t))})),t.getConstLiteral(et(n),!0)}return e.predicate}var Pr,Tr,Ar,Mr=function(){function e(){Object(m.a)(this,e),this.values=[]}return Object(v.a)(e,[{key:"set",value:function(e,t){t&&this.values.push({key:e,value:t,quoted:!1})}},{key:"toLiteralMap",value:function(){return tt(this.values)}}]),e}();function Dr(e){var t={};return e instanceof bn&&"ng-template"!==e.tagName?e.templateAttrs.forEach((function(e){return t[e.name]=""})):(e.attributes.forEach((function(e){ir(e.name)||(t[e.name]=e.value)})),e.inputs.forEach((function(e){t[e.name]=""})),e.outputs.forEach((function(e){t[e.name]=""}))),t}function jr(e,t,n){var r=$e(e,null,n);if(t.length>0)for(var i=0;i<t.length;i++)r=r.callFn(t[i],n);else r=r.callFn([],n);return r}function Nr(e){var t=e.expressions,n=e.strings;return 1===t.length&&2===n.length&&""===n[0]&&""===n[1]?1:t.length+n.length}function Rr(e){var t,n,r,i=Ze("t"),a=[],o=te,s=Fr(e)?i:new je(W.Or,i,e.internalType),c=null;if(null!==e.deps)"invalid"!==e.deps&&(c=new ge(s,Lr(e.deps,e.injectFn,e.target===Tr.Pipe)),t=e.deps,n=!1,r=t.map((function(e){var t=function(e){var t=[];return e.resolved===Ar.Attribute&&null!==e.attribute&&t.push({key:"attribute",value:e.attribute,quoted:!1}),e.optional&&t.push({key:"optional",value:it(!0),quoted:!1}),e.host&&t.push({key:"host",value:it(!0),quoted:!1}),e.self&&t.push({key:"self",value:it(!0),quoted:!1}),e.skipSelf&&t.push({key:"skipSelf",value:it(!0),quoted:!1}),t.length>0?tt(t):null}(e);return null!==t?(n=!0,t):it(null)})),o=n?Qe(et(r)):te);else{var l=Ze("\u0275".concat(e.name,"_BaseFactory")),u=$e(Rt.getInheritedFactory),p=l.set(u.callFn([e.internalType],void 0,!0)).toDeclStmt($,[Oe.Exported,Oe.Final]);a.push(p),c=l.callFn([s])}var h=c,d=[],f=null;function g(e){var t=Ze("r");d.push(t.set(Ve).toDeclStmt());var n=null;return n=null!==h?t.set(h).toStmt():$e(Rt.invalidFactory).callFn([]).toStmt(),d.push(rt(i,[n],[t.set(e).toStmt()])),t}if(Fr(e)&&e.delegateType===Pr.Factory){var m=Ze("\u0275".concat(e.name,"_BaseFactory")),v=$e(Rt.getFactoryOf);if(e.delegate.isEquivalent(e.internalType))throw new Error("Illegal state: compiling factory that delegates to itself");var b=m.set(v.callFn([e.delegate])).toDeclStmt($,[Oe.Exported,Oe.Final]);a.push(b),f=g(m.callFn([]))}else if(Fr(e)){var y=Lr(e.delegateDeps,e.injectFn,e.target===Tr.Pipe);f=g(new(e.delegateType===Pr.Class?ge:fe)(e.delegate,y))}else f=function(e){return void 0!==e.expression}(e)?g(e.expression):c;return null!==f?d.push(new Xe(f)):d.push($e(Rt.invalidFactory).callFn([]).toStmt()),{factory:nt([new Ae("t",Z)],d,$,void 0,"".concat(e.name,"_Factory")),statements:a,type:Qe($e(Rt.FactoryDef,[Ft(e.type.type,e.typeArgumentCount),o]))}}function Lr(e,t,n){return e.map((function(e,r){return function(e,t,n,r){switch(e.resolved){case Ar.Token:case Ar.ChangeDetectorRef:var i=0|(e.self?2:0)|(e.skipSelf?4:0)|(e.host?1:0)|(e.optional?8:0),a=0!==i||e.optional?it(i):null;if(n&&e.resolved===Ar.ChangeDetectorRef)return $e(Rt.injectPipeChangeDetectorRef).callFn(a?[a]:[]);var o=[e.token];return a&&o.push(a),$e(t).callFn(o);case Ar.Attribute:return $e(Rt.injectAttribute).callFn([e.token]);case Ar.Invalid:return $e(Rt.invalidFactoryDep).callFn([it(r)]);default:return kr("Unknown R3ResolvedDependencyType: ".concat(Ar[e.resolved]))}}(e,t,n,r)}))}function Fr(e){return void 0!==e.delegateType}function Br(e,t){return{statements:[],factory:e.node===t.node?t.prop("\u0275fac"):nt([new Ae("t",Z)],[new Xe(t.callMethod("\u0275fac",[Ze("t")]))])}}!function(e){e[e.Class=0]="Class",e[e.Function=1]="Function",e[e.Factory=2]="Factory"}(Pr||(Pr={})),function(e){e[e.Directive=0]="Directive",e[e.Component=1]="Component",e[e.Injectable=2]="Injectable",e[e.Pipe=3]="Pipe",e[e.NgModule=4]="NgModule"}(Tr||(Tr={})),function(e){e[e.Token=0]="Token",e[e.Attribute=1]="Attribute",e[e.ChangeDetectorRef=2]="ChangeDetectorRef",e[e.Invalid=3]="Invalid"}(Ar||(Ar={}));var Vr=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//];function zr(e,t){if(!(null==t||Array.isArray(t)&&2==t.length))throw new Error("Expected '".concat(e,"' to be an array, [start, end]."));if(null!=t){var n=t[0],r=t[1];Vr.forEach((function(e){if(e.test(n)||e.test(r))throw new Error("['".concat(n,"', '").concat(r,"'] contains unusable interpolation symbol."))}))}}var Ur=function(){function e(t,n){Object(m.a)(this,e),this.start=t,this.end=n}return Object(v.a)(e,null,[{key:"fromArray",value:function(t){return t?(zr("interpolation",t),new e(t[0],t[1])):Gr}}]),e}(),Gr=new Ur("{{","}}"),Hr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(m.a)(this,e),this.file=t,this.sourcesContent=new Map,this.lines=[],this.lastCol0=0,this.hasMappings=!1}return Object(v.a)(e,[{key:"addSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.sourcesContent.has(e)||this.sourcesContent.set(e,t),this}},{key:"addLine",value:function(){return this.lines.push([]),this.lastCol0=0,this}},{key:"addMapping",value:function(e,t,n,r){if(!this.currentLine)throw new Error("A line must be added before mappings can be added");if(null!=t&&!this.sourcesContent.has(t))throw new Error('Unknown source file "'.concat(t,'"'));if(null==e)throw new Error("The column in the generated code must be provided");if(e<this.lastCol0)throw new Error("Mapping should be added in output order");if(t&&(null==n||null==r))throw new Error("The source location must be provided when a source url is provided");return this.hasMappings=!0,this.lastCol0=e,this.currentLine.push({col0:e,sourceUrl:t,sourceLine0:n,sourceCol0:r}),this}},{key:"currentLine",get:function(){return this.lines.slice(-1)[0]}},{key:"toJSON",value:function(){var e=this;if(!this.hasMappings)return null;var t=new Map,n=[],r=[];Array.from(this.sourcesContent.keys()).forEach((function(i,a){t.set(i,a),n.push(i),r.push(e.sourcesContent.get(i)||null)}));var i="",a=0,o=0,s=0,c=0;return this.lines.forEach((function(e){a=0,i+=e.map((function(e){var n=Yr(e.col0-a);return a=e.col0,null!=e.sourceUrl&&(n+=Yr(t.get(e.sourceUrl)-o),o=t.get(e.sourceUrl),n+=Yr(e.sourceLine0-s),s=e.sourceLine0,n+=Yr(e.sourceCol0-c),c=e.sourceCol0),n})).join(","),i+=";"})),i=i.slice(0,-1),{file:this.file||"",version:3,sourceRoot:"",sources:n,sourcesContent:r,mappings:i}}},{key:"toJsComment",value:function(){return this.hasMappings?"//# sourceMappingURL=data:application/json;base64,"+function(e){var t="";e=ht(e);for(var n=0;n<e.length;){var r=e.charCodeAt(n++),i=e.charCodeAt(n++),a=e.charCodeAt(n++);t+=qr(r>>2),t+=qr((3&r)<<4|(isNaN(i)?0:i>>4)),t+=isNaN(i)?"=":qr((15&i)<<2|a>>6),t+=isNaN(i)||isNaN(a)?"=":qr(63&a)}return t}(JSON.stringify(this,null,0)):""}}]),e}();function Yr(e){e=e<0?1+(-e<<1):e<<1;var t="";do{var n=31&e;(e>>=5)>0&&(n|=32),t+=qr(n)}while(e>0);return t}function qr(e){if(e<0||e>=64)throw new Error("Can only encode value in the range [0, 63]");return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]}var Wr=/'|\\|\n|\r|\$/g,Xr=/^[$A-Z_][0-9A-Z_$]*$/i,Kr="  ",Zr=Ze("error",null,null),$r=Ze("stack",null,null),Qr=function e(t){Object(m.a)(this,e),this.indent=t,this.partsLength=0,this.parts=[],this.srcSpans=[]},Jr=function(){function e(t){Object(m.a)(this,e),this._indent=t,this._classes=[],this._preambleLineCount=0,this._lines=[new Qr(t)]}return Object(v.a)(e,[{key:"_currentLine",get:function(){return this._lines[this._lines.length-1]}},{key:"println",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.print(e||null,t,!0)}},{key:"lineIsEmpty",value:function(){return 0===this._currentLine.parts.length}},{key:"lineLength",value:function(){return this._currentLine.indent*Kr.length+this._currentLine.partsLength}},{key:"print",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.length>0&&(this._currentLine.parts.push(t),this._currentLine.partsLength+=t.length,this._currentLine.srcSpans.push(e&&e.sourceSpan||null)),n&&this._lines.push(new Qr(this._indent))}},{key:"removeEmptyLastLine",value:function(){this.lineIsEmpty()&&this._lines.pop()}},{key:"incIndent",value:function(){this._indent++,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}},{key:"decIndent",value:function(){this._indent--,this.lineIsEmpty()&&(this._currentLine.indent=this._indent)}},{key:"pushClass",value:function(e){this._classes.push(e)}},{key:"popClass",value:function(){return this._classes.pop()}},{key:"currentClass",get:function(){return this._classes.length>0?this._classes[this._classes.length-1]:null}},{key:"toSource",value:function(){return this.sourceLines.map((function(e){return e.parts.length>0?ni(e.indent)+e.parts.join(""):""})).join("\n")}},{key:"toSourceMapGenerator",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Hr(e),r=!1,i=function(){r||(n.addSource(e," ").addMapping(0,e,0,0),r=!0)},a=0;a<t;a++)n.addLine(),i();return this.sourceLines.forEach((function(e,t){n.addLine();for(var a=e.srcSpans,o=e.parts,s=e.indent*Kr.length,c=0;c<a.length&&!a[c];)s+=o[c].length,c++;for(c<a.length&&0===t&&0===s?r=!0:i();c<a.length;){var l=a[c],u=l.start.file,p=l.start.line,h=l.start.col;for(n.addSource(u.url,u.content).addMapping(s,u.url,p,h),s+=o[c].length,c++;c<a.length&&(l===a[c]||!a[c]);)s+=o[c].length,c++}})),n}},{key:"setPreambleLineCount",value:function(e){return this._preambleLineCount=e}},{key:"spanOf",value:function(e,t){var n=this._lines[e-this._preambleLineCount];if(n)for(var r=t-ni(n.indent).length,i=0;i<n.parts.length;i++){var a=n.parts[i];if(a.length>r)return n.srcSpans[i];r-=a.length}return null}},{key:"sourceLines",get:function(){return this._lines.length&&0===this._lines[this._lines.length-1].parts.length?this._lines.slice(0,-1):this._lines}}],[{key:"createRoot",value:function(){return new e(0)}}]),e}(),ei=function(){function e(t){Object(m.a)(this,e),this._escapeDollarInStrings=t}return Object(v.a)(e,[{key:"printLeadingComments",value:function(e,t){if(void 0!==e.leadingComments){var n,r=Object(u.a)(e.leadingComments);try{for(r.s();!(n=r.n()).done;){var i=n.value;i instanceof Ge?t.print(e,"/*".concat(i.toString(),"*/"),i.trailingNewline):i.multiline?t.print(e,"/* ".concat(i.text," */"),i.trailingNewline):i.text.split("\n").forEach((function(n){t.println(e,"// ".concat(n))}))}}catch(a){r.e(a)}finally{r.f()}}}},{key:"visitExpressionStmt",value:function(e,t){return this.printLeadingComments(e,t),e.expr.visitExpression(this,t),t.println(e,";"),null}},{key:"visitReturnStmt",value:function(e,t){return this.printLeadingComments(e,t),t.print(e,"return "),e.value.visitExpression(this,t),t.println(e,";"),null}},{key:"visitIfStmt",value:function(e,t){this.printLeadingComments(e,t),t.print(e,"if ("),e.condition.visitExpression(this,t),t.print(e,") {");var n=null!=e.falseCase&&e.falseCase.length>0;return e.trueCase.length<=1&&!n?(t.print(e," "),this.visitAllStatements(e.trueCase,t),t.removeEmptyLastLine(),t.print(e," ")):(t.println(),t.incIndent(),this.visitAllStatements(e.trueCase,t),t.decIndent(),n&&(t.println(e,"} else {"),t.incIndent(),this.visitAllStatements(e.falseCase,t),t.decIndent())),t.println(e,"}"),null}},{key:"visitThrowStmt",value:function(e,t){return this.printLeadingComments(e,t),t.print(e,"throw "),e.error.visitExpression(this,t),t.println(e,";"),null}},{key:"visitWriteVarExpr",value:function(e,t){var n=t.lineIsEmpty();return n||t.print(e,"("),t.print(e,"".concat(e.name," = ")),e.value.visitExpression(this,t),n||t.print(e,")"),null}},{key:"visitWriteKeyExpr",value:function(e,t){var n=t.lineIsEmpty();return n||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"] = "),e.value.visitExpression(this,t),n||t.print(e,")"),null}},{key:"visitWritePropExpr",value:function(e,t){var n=t.lineIsEmpty();return n||t.print(e,"("),e.receiver.visitExpression(this,t),t.print(e,".".concat(e.name," = ")),e.value.visitExpression(this,t),n||t.print(e,")"),null}},{key:"visitInvokeMethodExpr",value:function(e,t){e.receiver.visitExpression(this,t);var n=e.name;return null!=e.builtin&&null==(n=this.getBuiltinMethodName(e.builtin))||(t.print(e,".".concat(n,"(")),this.visitAllExpressions(e.args,t,","),t.print(e,")")),null}},{key:"visitInvokeFunctionExpr",value:function(e,t){return e.fn.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}},{key:"visitWrappedNodeExpr",value:function(e,t){throw new Error("Abstract emitter cannot visit WrappedNodeExpr.")}},{key:"visitTypeofExpr",value:function(e,t){t.print(e,"typeof "),e.expr.visitExpression(this,t)}},{key:"visitReadVarExpr",value:function(e,t){var n=e.name;if(null!=e.builtin)switch(e.builtin){case ie.Super:n="super";break;case ie.This:n="this";break;case ie.CatchError:n=Zr.name;break;case ie.CatchStack:n=$r.name;break;default:throw new Error("Unknown builtin variable ".concat(e.builtin))}return t.print(e,n),null}},{key:"visitInstantiateExpr",value:function(e,t){return t.print(e,"new "),e.classExpr.visitExpression(this,t),t.print(e,"("),this.visitAllExpressions(e.args,t,","),t.print(e,")"),null}},{key:"visitLiteralExpr",value:function(e,t){var n=e.value;return"string"==typeof n?t.print(e,ti(n,this._escapeDollarInStrings)):t.print(e,"".concat(n)),null}},{key:"visitLocalizedString",value:function(e,t){var n=e.serializeI18nHead();t.print(e,"$localize `"+n.raw);for(var r=1;r<e.messageParts.length;r++)t.print(e,"${"),e.expressions[r-1].visitExpression(this,t),t.print(e,"}".concat(e.serializeI18nTemplatePart(r).raw));return t.print(e,"`"),null}},{key:"visitConditionalExpr",value:function(e,t){return t.print(e,"("),e.condition.visitExpression(this,t),t.print(e,"? "),e.trueCase.visitExpression(this,t),t.print(e,": "),e.falseCase.visitExpression(this,t),t.print(e,")"),null}},{key:"visitNotExpr",value:function(e,t){return t.print(e,"!"),e.condition.visitExpression(this,t),null}},{key:"visitAssertNotNullExpr",value:function(e,t){return e.condition.visitExpression(this,t),null}},{key:"visitUnaryOperatorExpr",value:function(e,t){var n;switch(e.operator){case q.Plus:n="+";break;case q.Minus:n="-";break;default:throw new Error("Unknown operator ".concat(e.operator))}return e.parens&&t.print(e,"("),t.print(e,n),e.expr.visitExpression(this,t),e.parens&&t.print(e,")"),null}},{key:"visitBinaryOperatorExpr",value:function(e,t){var n;switch(e.operator){case W.Equals:n="==";break;case W.Identical:n="===";break;case W.NotEquals:n="!=";break;case W.NotIdentical:n="!==";break;case W.And:n="&&";break;case W.BitwiseAnd:n="&";break;case W.Or:n="||";break;case W.Plus:n="+";break;case W.Minus:n="-";break;case W.Divide:n="/";break;case W.Multiply:n="*";break;case W.Modulo:n="%";break;case W.Lower:n="<";break;case W.LowerEquals:n="<=";break;case W.Bigger:n=">";break;case W.BiggerEquals:n=">=";break;default:throw new Error("Unknown operator ".concat(e.operator))}return e.parens&&t.print(e,"("),e.lhs.visitExpression(this,t),t.print(e," ".concat(n," ")),e.rhs.visitExpression(this,t),e.parens&&t.print(e,")"),null}},{key:"visitReadPropExpr",value:function(e,t){return e.receiver.visitExpression(this,t),t.print(e,"."),t.print(e,e.name),null}},{key:"visitReadKeyExpr",value:function(e,t){return e.receiver.visitExpression(this,t),t.print(e,"["),e.index.visitExpression(this,t),t.print(e,"]"),null}},{key:"visitLiteralArrayExpr",value:function(e,t){return t.print(e,"["),this.visitAllExpressions(e.entries,t,","),t.print(e,"]"),null}},{key:"visitLiteralMapExpr",value:function(e,t){var n=this;return t.print(e,"{"),this.visitAllObjects((function(r){t.print(e,"".concat(ti(r.key,n._escapeDollarInStrings,r.quoted),":")),r.value.visitExpression(n,t)}),e.entries,t,","),t.print(e,"}"),null}},{key:"visitCommaExpr",value:function(e,t){return t.print(e,"("),this.visitAllExpressions(e.parts,t,","),t.print(e,")"),null}},{key:"visitAllExpressions",value:function(e,t,n){var r=this;this.visitAllObjects((function(e){return e.visitExpression(r,t)}),e,t,n)}},{key:"visitAllObjects",value:function(e,t,n,r){for(var i=!1,a=0;a<t.length;a++)a>0&&(n.lineLength()>80?(n.print(null,r,!0),i||(n.incIndent(),n.incIndent(),i=!0)):n.print(null,r,!1)),e(t[a]);i&&(n.decIndent(),n.decIndent())}},{key:"visitAllStatements",value:function(e,t){var n=this;e.forEach((function(e){return e.visitStatement(n,t)}))}}]),e}();function ti(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e)return null;var r=e.replace(Wr,(function(){return"$"==(arguments.length<=0?void 0:arguments[0])?t?"\\$":"$":"\n"==(arguments.length<=0?void 0:arguments[0])?"\\n":"\r"==(arguments.length<=0?void 0:arguments[0])?"\\r":"\\".concat(arguments.length<=0?void 0:arguments[0])})),i=n||!Xr.test(r);return i?"'".concat(r,"'"):r}function ni(e){for(var t="",n=0;n<e;n++)t+=Kr;return t}var ri=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.call(this,!1)}return Object(v.a)(n,[{key:"visitDeclareClassStmt",value:function(e,t){var n=this;return t.pushClass(e),this._visitClassConstructor(e,t),null!=e.parent&&(t.print(e,"".concat(e.name,".prototype = Object.create(")),e.parent.visitExpression(this,t),t.println(e,".prototype);")),e.getters.forEach((function(r){return n._visitClassGetter(e,r,t)})),e.methods.forEach((function(r){return n._visitClassMethod(e,r,t)})),t.popClass(),null}},{key:"_visitClassConstructor",value:function(e,t){t.print(e,"function ".concat(e.name,"(")),null!=e.constructorMethod&&this._visitParams(e.constructorMethod.params,t),t.println(e,") {"),t.incIndent(),null!=e.constructorMethod&&e.constructorMethod.body.length>0&&(t.println(e,"var self = this;"),this.visitAllStatements(e.constructorMethod.body,t)),t.decIndent(),t.println(e,"}")}},{key:"_visitClassGetter",value:function(e,t,n){n.println(e,"Object.defineProperty(".concat(e.name,".prototype, '").concat(t.name,"', { get: function() {")),n.incIndent(),t.body.length>0&&(n.println(e,"var self = this;"),this.visitAllStatements(t.body,n)),n.decIndent(),n.println(e,"}});")}},{key:"_visitClassMethod",value:function(e,t,n){n.print(e,"".concat(e.name,".prototype.").concat(t.name," = function(")),this._visitParams(t.params,n),n.println(e,") {"),n.incIndent(),t.body.length>0&&(n.println(e,"var self = this;"),this.visitAllStatements(t.body,n)),n.decIndent(),n.println(e,"};")}},{key:"visitWrappedNodeExpr",value:function(e,t){throw new Error("Cannot emit a WrappedNodeExpr in Javascript.")}},{key:"visitReadVarExpr",value:function(e,t){if(e.builtin===ie.This)t.print(e,"self");else{if(e.builtin===ie.Super)throw new Error("'super' needs to be handled at a parent ast node, not at the variable level!");Object(p.a)(Object(h.a)(n.prototype),"visitReadVarExpr",this).call(this,e,t)}return null}},{key:"visitDeclareVarStmt",value:function(e,t){return t.print(e,"var ".concat(e.name)),e.value&&(t.print(e," = "),e.value.visitExpression(this,t)),t.println(e,";"),null}},{key:"visitCastExpr",value:function(e,t){return e.value.visitExpression(this,t),null}},{key:"visitInvokeFunctionExpr",value:function(e,t){var r=e.fn;return r instanceof se&&r.builtin===ie.Super?(t.currentClass.parent.visitExpression(this,t),t.print(e,".call(this"),e.args.length>0&&(t.print(e,", "),this.visitAllExpressions(e.args,t,",")),t.print(e,")")):Object(p.a)(Object(h.a)(n.prototype),"visitInvokeFunctionExpr",this).call(this,e,t),null}},{key:"visitFunctionExpr",value:function(e,t){return t.print(e,"function".concat(e.name?" "+e.name:"","(")),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.print(e,"}"),null}},{key:"visitDeclareFunctionStmt",value:function(e,t){return t.print(e,"function ".concat(e.name,"(")),this._visitParams(e.params,t),t.println(e,") {"),t.incIndent(),this.visitAllStatements(e.statements,t),t.decIndent(),t.println(e,"}"),null}},{key:"visitTryCatchStmt",value:function(e,t){t.println(e,"try {"),t.incIndent(),this.visitAllStatements(e.bodyStmts,t),t.decIndent(),t.println(e,"} catch (".concat(Zr.name,") {")),t.incIndent();var n=[$r.set(Zr.prop("stack")).toDeclStmt(null,[Oe.Final])].concat(e.catchStmts);return this.visitAllStatements(n,t),t.decIndent(),t.println(e,"}"),null}},{key:"visitLocalizedString",value:function(e,t){var n=this;t.print(e,'$localize((this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e})(');for(var r=[e.serializeI18nHead()],i=1;i<e.messageParts.length;i++)r.push(e.serializeI18nTemplatePart(i));return t.print(e,"[".concat(r.map((function(e){return ti(e.cooked,!1)})).join(", "),"], ")),t.print(e,"[".concat(r.map((function(e){return ti(e.raw,!1)})).join(", "),"])")),e.expressions.forEach((function(r){t.print(e,", "),r.visitExpression(n,t)})),t.print(e,")"),null}},{key:"_visitParams",value:function(e,t){this.visitAllObjects((function(e){return t.print(null,e.name)}),e,t,",")}},{key:"getBuiltinMethodName",value:function(e){var t;switch(e){case oe.ConcatArray:t="concat";break;case oe.SubscribeObservable:t="subscribe";break;case oe.Bind:t="bind";break;default:throw new Error("Unknown builtin method: ".concat(e))}return t}}]),n}(ei),ii=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"evaluateStatements",value:function(e,t,n,r){var i=new ai(n),a=Jr.createRoot();return t.length>0&&!t[0].isEquivalent(it("use strict").toStmt())&&(t=[it("use strict").toStmt()].concat(Object(g.a)(t))),i.visitAllStatements(t,a),i.createReturnStmt(a),this.evaluateCode(e,a,i.getArgs(),r)}},{key:"evaluateCode",value:function(e,t,n,r){var i='"use strict";'.concat(t.toSource(),"\n//# sourceURL=").concat(e),a=[],o=[];for(var s in n)o.push(n[s]),a.push(s);if(r){var l=Object(c.a)(Function,Object(g.a)(a.concat("return null;"))).toString(),u=l.slice(0,l.indexOf("return null;")).split("\n").length-1;i+="\n".concat(t.toSourceMapGenerator(e,u).toJsComment())}var p=Object(c.a)(Function,Object(g.a)(a.concat(i)));return this.executeFunction(p,o)}},{key:"executeFunction",value:function(e,t){return e.apply(void 0,Object(g.a)(t))}}]),e}(),ai=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this)).reflector=e,r._evalArgNames=[],r._evalArgValues=[],r._evalExportedVars=[],r}return Object(v.a)(n,[{key:"createReturnStmt",value:function(e){new Xe(new Be(this._evalExportedVars.map((function(e){return new Fe(e,Ze(e),!1)})))).visitStatement(this,e)}},{key:"getArgs",value:function(){for(var e={},t=0;t<this._evalArgNames.length;t++)e[this._evalArgNames[t]]=this._evalArgValues[t];return e}},{key:"visitExternalExpr",value:function(e,t){return this._emitReferenceToExternal(e,this.reflector.resolveExternalReference(e.value),t),null}},{key:"visitWrappedNodeExpr",value:function(e,t){return this._emitReferenceToExternal(e,e.node,t),null}},{key:"visitDeclareVarStmt",value:function(e,t){return e.hasModifier(Oe.Exported)&&this._evalExportedVars.push(e.name),Object(p.a)(Object(h.a)(n.prototype),"visitDeclareVarStmt",this).call(this,e,t)}},{key:"visitDeclareFunctionStmt",value:function(e,t){return e.hasModifier(Oe.Exported)&&this._evalExportedVars.push(e.name),Object(p.a)(Object(h.a)(n.prototype),"visitDeclareFunctionStmt",this).call(this,e,t)}},{key:"visitDeclareClassStmt",value:function(e,t){return e.hasModifier(Oe.Exported)&&this._evalExportedVars.push(e.name),Object(p.a)(Object(h.a)(n.prototype),"visitDeclareClassStmt",this).call(this,e,t)}},{key:"_emitReferenceToExternal",value:function(e,t,n){var r=this._evalArgValues.indexOf(t);if(-1===r){r=this._evalArgValues.length,this._evalArgValues.push(t);var i=Dt({reference:t})||"val";this._evalArgNames.push("jit_".concat(i,"_").concat(r))}n.print(e,this._evalArgNames[r])}}]),n}(ri);var oi=function(){function e(t){Object(m.a)(this,e),this.context=t}return Object(v.a)(e,[{key:"resolveExternalReference",value:function(e){if("@angular/core"!==e.moduleName)throw new Error("Cannot resolve external reference to ".concat(e.moduleName,", only references to @angular/core are supported."));if(!this.context.hasOwnProperty(e.name))throw new Error("No value provided for @angular/core symbol '".concat(e.name,"'."));return this.context[e.name]}},{key:"parameters",value:function(e){throw new Error("Not implemented.")}},{key:"annotations",value:function(e){throw new Error("Not implemented.")}},{key:"shallowAnnotations",value:function(e){throw new Error("Not implemented.")}},{key:"tryAnnotations",value:function(e){throw new Error("Not implemented.")}},{key:"propMetadata",value:function(e){throw new Error("Not implemented.")}},{key:"hasLifecycleHook",value:function(e,t){throw new Error("Not implemented.")}},{key:"guards",value:function(e){throw new Error("Not implemented.")}},{key:"componentModuleUrl",value:function(e,t){throw new Error("Not implemented.")}}]),e}();function si(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return tt(Object.keys(e).map((function(n){return{key:n,quoted:t,value:e[n]}})))}function ci(e){var t=e.internalType,n=e.type,r=e.bootstrap,i=e.declarations,a=e.imports,o=e.exports,s=e.schemas,c=e.containsForwardDecls,l=e.emitInline,u=e.id,p=[],h={type:t};if(r.length&&(h.bootstrap=ui(r,c)),l)i.length&&(h.declarations=ui(i,c)),a.length&&(h.imports=ui(a,c)),o.length&&(h.exports=ui(o,c));else{var d=function(e){var t=e.adjacentType,n=e.declarations,r=e.imports,i=e.exports,a=e.containsForwardDecls,o={};n.length&&(o.declarations=ui(n,a));r.length&&(o.imports=ui(r,a));i.length&&(o.exports=ui(i,a));if(0===Object.keys(o).length)return null;var s=(l=new fe($e(Rt.setNgModuleScope),[t,Lt(o)]),u=new Ee({name:"ngJitMode",moduleName:null}),p=new je(W.Identical,new ce(u),it("undefined")),h=new je(W.Or,p,u,void 0,void 0,!0),new je(W.And,h,l)),c=new Me([],[s.toStmt()]);var l,u,p,h;return new fe(c,[]).toStmt()}(e);null!==d&&p.push(d)}return s&&s.length&&(h.schemas=et(s.map((function(e){return e.value})))),u&&(h.id=u),{expression:$e(Rt.defineNgModule).callFn([Lt(h)]),type:new K($e(Rt.NgModuleDefWithMeta,[new K(n.type),li(i),li(a),li(o)])),additionalStatements:p}}function li(e){var t=e.map((function(e){return Je(e.type)}));return e.length>0?Qe(et(t)):te}function ui(e,t){var n=et(e.map((function(e){return e.value})));return t?nt([],[new Xe(n)]):n}function pi(e){var t=[];return t.push({key:"name",value:it(e.pipeName),quoted:!1}),t.push({key:"type",value:e.type.value,quoted:!1}),t.push({key:"pure",value:it(e.pure),quoted:!1}),{expression:$e(Rt.definePipe).callFn([tt(t)]),type:new K($e(Rt.PipeDefWithMeta,[Ft(e.type.type,e.typeArgumentCount),new K(new me(e.pipeName))]))}}var hi,di=function e(t,n,r,i){Object(m.a)(this,e),this.input=n,this.errLocation=r,this.ctxLocation=i,this.message="Parser Error: ".concat(t," ").concat(r," [").concat(n,"] in ").concat(i)},fi=function(){function e(t,n){Object(m.a)(this,e),this.start=t,this.end=n}return Object(v.a)(e,[{key:"toAbsolute",value:function(e){return new Bi(e+this.start,e+this.end)}}]),e}(),gi=function(){function e(t,n){Object(m.a)(this,e),this.span=t,this.sourceSpan=n}return Object(v.a)(e,[{key:"visit",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null}},{key:"toString",value:function(){return"AST"}}]),e}(),mi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,e,r)).nameSpan=i,a}return n}(gi),vi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,r)).prefix=i,s.uninterpretedExpression=a,s.location=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitQuote(this,t)}},{key:"toString",value:function(){return"Quote"}}]),n}(gi),bi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"visit",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}]),n}(gi),yi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitImplicitReceiver(this,t)}}]),n}(gi),xi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,e,r)).expressions=i,a}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitChain(this,t)}}]),n}(gi),Ci=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,r)).condition=i,s.trueExp=a,s.falseExp=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitConditional(this,t)}}]),n}(gi),wi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,r,i)).receiver=a,s.name=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPropertyRead(this,t)}}]),n}(mi),ki=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,e,r,i)).receiver=a,c.name=o,c.value=s,c}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPropertyWrite(this,t)}}]),n}(mi),Si=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,r,i)).receiver=a,s.name=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitSafePropertyRead(this,t)}}]),n}(mi),Oi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(m.a)(this,n),(o=t.call(this,e,r)).obj=i,o.key=a,o}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitKeyedRead(this,t)}}]),n}(gi),Ei=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,r)).obj=i,s.key=a,s.value=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitKeyedWrite(this,t)}}]),n}(gi),_i=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,e,r,s)).exp=i,c.name=a,c.args=o,c}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPipe(this,t)}}]),n}(mi),Ii=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,e,r)).value=i,a}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitLiteralPrimitive(this,t)}}]),n}(gi),Pi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,e,r)).expressions=i,a}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitLiteralArray(this,t)}}]),n}(gi),Ti=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(m.a)(this,n),(o=t.call(this,e,r)).keys=i,o.values=a,o}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitLiteralMap(this,t)}}]),n}(gi),Ai=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(m.a)(this,n),(o=t.call(this,e,r)).strings=i,o.expressions=a,o}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitInterpolation(this,t)}}]),n}(gi),Mi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,e,r)).operation=i,s.left=a,s.right=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitBinary(this,t)}}]),n}(gi),Di=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s,c){var l;return Object(m.a)(this,n),(l=t.call(this,e,r,o,s,c)).operator=i,l.expr=a,l}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0!==e.visitUnary?e.visitUnary(this,t):e.visitBinary(this,t)}}],[{key:"createMinus",value:function(e,t,r){return new n(e,t,"-",r,"-",new Ii(e,t,0),r)}},{key:"createPlus",value:function(e,t,r){return new n(e,t,"+",r,"-",r,new Ii(e,t,0))}}]),n}(Mi),ji=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,e,r)).expression=i,a}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitPrefixNot(this,t)}}]),n}(gi),Ni=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,e,r)).expression=i,a}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitNonNullAssert(this,t)}}]),n}(gi),Ri=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,e,r,i)).receiver=a,c.name=o,c.args=s,c}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitMethodCall(this,t)}}]),n}(mi),Li=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,e,r,i)).receiver=a,c.name=o,c.args=s,c}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitSafeMethodCall(this,t)}}]),n}(mi),Fi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(m.a)(this,n),(o=t.call(this,e,r)).target=i,o.args=a,o}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitFunctionCall(this,t)}}]),n}(gi),Bi=function e(t,n){Object(m.a)(this,e),this.start=t,this.end=n},Vi=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,new fi(0,null===r?0:r.length),new Bi(a,null===r?a:a+r.length))).ast=e,s.source=r,s.location=i,s.errors=o,s}return Object(v.a)(n,[{key:"visit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}},{key:"toString",value:function(){return"".concat(this.source," in ").concat(this.location)}}]),n}(gi),zi=function e(t,n,r){Object(m.a)(this,e),this.sourceSpan=t,this.key=n,this.value=r},Ui=function e(t,n,r){Object(m.a)(this,e),this.sourceSpan=t,this.key=n,this.value=r},Gi=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visit",value:function(e,t){e.visit(this,t)}},{key:"visitUnary",value:function(e,t){this.visit(e.expr,t)}},{key:"visitBinary",value:function(e,t){this.visit(e.left,t),this.visit(e.right,t)}},{key:"visitChain",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitConditional",value:function(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}},{key:"visitPipe",value:function(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}},{key:"visitFunctionCall",value:function(e,t){e.target&&this.visit(e.target,t),this.visitAll(e.args,t)}},{key:"visitImplicitReceiver",value:function(e,t){}},{key:"visitInterpolation",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitKeyedRead",value:function(e,t){this.visit(e.obj,t),this.visit(e.key,t)}},{key:"visitKeyedWrite",value:function(e,t){this.visit(e.obj,t),this.visit(e.key,t),this.visit(e.value,t)}},{key:"visitLiteralArray",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitLiteralMap",value:function(e,t){this.visitAll(e.values,t)}},{key:"visitLiteralPrimitive",value:function(e,t){}},{key:"visitMethodCall",value:function(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}},{key:"visitPrefixNot",value:function(e,t){this.visit(e.expression,t)}},{key:"visitNonNullAssert",value:function(e,t){this.visit(e.expression,t)}},{key:"visitPropertyRead",value:function(e,t){this.visit(e.receiver,t)}},{key:"visitPropertyWrite",value:function(e,t){this.visit(e.receiver,t),this.visit(e.value,t)}},{key:"visitSafePropertyRead",value:function(e,t){this.visit(e.receiver,t)}},{key:"visitSafeMethodCall",value:function(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}},{key:"visitQuote",value:function(e,t){}},{key:"visitAll",value:function(e,t){var n,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.visit(i,t)}}catch(a){r.e(a)}finally{r.f()}}}]),e}(),Hi=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitImplicitReceiver",value:function(e,t){return e}},{key:"visitInterpolation",value:function(e,t){return new Ai(e.span,e.sourceSpan,e.strings,this.visitAll(e.expressions))}},{key:"visitLiteralPrimitive",value:function(e,t){return new Ii(e.span,e.sourceSpan,e.value)}},{key:"visitPropertyRead",value:function(e,t){return new wi(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}},{key:"visitPropertyWrite",value:function(e,t){return new ki(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,e.value.visit(this))}},{key:"visitSafePropertyRead",value:function(e,t){return new Si(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name)}},{key:"visitMethodCall",value:function(e,t){return new Ri(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,this.visitAll(e.args))}},{key:"visitSafeMethodCall",value:function(e,t){return new Li(e.span,e.sourceSpan,e.nameSpan,e.receiver.visit(this),e.name,this.visitAll(e.args))}},{key:"visitFunctionCall",value:function(e,t){return new Fi(e.span,e.sourceSpan,e.target.visit(this),this.visitAll(e.args))}},{key:"visitLiteralArray",value:function(e,t){return new Pi(e.span,e.sourceSpan,this.visitAll(e.expressions))}},{key:"visitLiteralMap",value:function(e,t){return new Ti(e.span,e.sourceSpan,e.keys,this.visitAll(e.values))}},{key:"visitUnary",value:function(e,t){switch(e.operator){case"+":return Di.createPlus(e.span,e.sourceSpan,e.expr.visit(this));case"-":return Di.createMinus(e.span,e.sourceSpan,e.expr.visit(this));default:throw new Error("Unknown unary operator ".concat(e.operator))}}},{key:"visitBinary",value:function(e,t){return new Mi(e.span,e.sourceSpan,e.operation,e.left.visit(this),e.right.visit(this))}},{key:"visitPrefixNot",value:function(e,t){return new ji(e.span,e.sourceSpan,e.expression.visit(this))}},{key:"visitNonNullAssert",value:function(e,t){return new Ni(e.span,e.sourceSpan,e.expression.visit(this))}},{key:"visitConditional",value:function(e,t){return new Ci(e.span,e.sourceSpan,e.condition.visit(this),e.trueExp.visit(this),e.falseExp.visit(this))}},{key:"visitPipe",value:function(e,t){return new _i(e.span,e.sourceSpan,e.exp.visit(this),e.name,this.visitAll(e.args),e.nameSpan)}},{key:"visitKeyedRead",value:function(e,t){return new Oi(e.span,e.sourceSpan,e.obj.visit(this),e.key.visit(this))}},{key:"visitKeyedWrite",value:function(e,t){return new Ei(e.span,e.sourceSpan,e.obj.visit(this),e.key.visit(this),e.value.visit(this))}},{key:"visitAll",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].visit(this);return t}},{key:"visitChain",value:function(e,t){return new xi(e.span,e.sourceSpan,this.visitAll(e.expressions))}},{key:"visitQuote",value:function(e,t){return new vi(e.span,e.sourceSpan,e.prefix,e.uninterpretedExpression,e.location)}}]),e}(),Yi=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitImplicitReceiver",value:function(e,t){return e}},{key:"visitInterpolation",value:function(e,t){var n=this.visitAll(e.expressions);return n!==e.expressions?new Ai(e.span,e.sourceSpan,e.strings,n):e}},{key:"visitLiteralPrimitive",value:function(e,t){return e}},{key:"visitPropertyRead",value:function(e,t){var n=e.receiver.visit(this);return n!==e.receiver?new wi(e.span,e.sourceSpan,e.nameSpan,n,e.name):e}},{key:"visitPropertyWrite",value:function(e,t){var n=e.receiver.visit(this),r=e.value.visit(this);return n!==e.receiver||r!==e.value?new ki(e.span,e.sourceSpan,e.nameSpan,n,e.name,r):e}},{key:"visitSafePropertyRead",value:function(e,t){var n=e.receiver.visit(this);return n!==e.receiver?new Si(e.span,e.sourceSpan,e.nameSpan,n,e.name):e}},{key:"visitMethodCall",value:function(e,t){var n=e.receiver.visit(this),r=this.visitAll(e.args);return n!==e.receiver||r!==e.args?new Ri(e.span,e.sourceSpan,e.nameSpan,n,e.name,r):e}},{key:"visitSafeMethodCall",value:function(e,t){var n=e.receiver.visit(this),r=this.visitAll(e.args);return n!==e.receiver||r!==e.args?new Li(e.span,e.sourceSpan,e.nameSpan,n,e.name,r):e}},{key:"visitFunctionCall",value:function(e,t){var n=e.target&&e.target.visit(this),r=this.visitAll(e.args);return n!==e.target||r!==e.args?new Fi(e.span,e.sourceSpan,n,r):e}},{key:"visitLiteralArray",value:function(e,t){var n=this.visitAll(e.expressions);return n!==e.expressions?new Pi(e.span,e.sourceSpan,n):e}},{key:"visitLiteralMap",value:function(e,t){var n=this.visitAll(e.values);return n!==e.values?new Ti(e.span,e.sourceSpan,e.keys,n):e}},{key:"visitUnary",value:function(e,t){var n=e.expr.visit(this);if(n!==e.expr)switch(e.operator){case"+":return Di.createPlus(e.span,e.sourceSpan,n);case"-":return Di.createMinus(e.span,e.sourceSpan,n);default:throw new Error("Unknown unary operator ".concat(e.operator))}return e}},{key:"visitBinary",value:function(e,t){var n=e.left.visit(this),r=e.right.visit(this);return n!==e.left||r!==e.right?new Mi(e.span,e.sourceSpan,e.operation,n,r):e}},{key:"visitPrefixNot",value:function(e,t){var n=e.expression.visit(this);return n!==e.expression?new ji(e.span,e.sourceSpan,n):e}},{key:"visitNonNullAssert",value:function(e,t){var n=e.expression.visit(this);return n!==e.expression?new Ni(e.span,e.sourceSpan,n):e}},{key:"visitConditional",value:function(e,t){var n=e.condition.visit(this),r=e.trueExp.visit(this),i=e.falseExp.visit(this);return n!==e.condition||r!==e.trueExp||i!==e.falseExp?new Ci(e.span,e.sourceSpan,n,r,i):e}},{key:"visitPipe",value:function(e,t){var n=e.exp.visit(this),r=this.visitAll(e.args);return n!==e.exp||r!==e.args?new _i(e.span,e.sourceSpan,n,e.name,r,e.nameSpan):e}},{key:"visitKeyedRead",value:function(e,t){var n=e.obj.visit(this),r=e.key.visit(this);return n!==e.obj||r!==e.key?new Oi(e.span,e.sourceSpan,n,r):e}},{key:"visitKeyedWrite",value:function(e,t){var n=e.obj.visit(this),r=e.key.visit(this),i=e.value.visit(this);return n!==e.obj||r!==e.key||i!==e.value?new Ei(e.span,e.sourceSpan,n,r,i):e}},{key:"visitAll",value:function(e){for(var t=[],n=!1,r=0;r<e.length;++r){var i=e[r],a=i.visit(this);t[r]=a,n=n||a!==i}return n?t:e}},{key:"visitChain",value:function(e,t){var n=this.visitAll(e.expressions);return n!==e.expressions?new xi(e.span,e.sourceSpan,n):e}},{key:"visitQuote",value:function(e,t){return e}}]),e}(),qi=function e(t,n,r,i,a){Object(m.a)(this,e),this.name=t,this.expression=n,this.type=r,this.sourceSpan=i,this.valueSpan=a,this.isLiteral=this.type===hi.LITERAL_ATTR,this.isAnimation=this.type===hi.ANIMATION};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LITERAL_ATTR=1]="LITERAL_ATTR",e[e.ANIMATION=2]="ANIMATION"}(hi||(hi={}));var Wi=function e(t,n,r,i,a,o){Object(m.a)(this,e),this.name=t,this.targetOrPhase=n,this.type=r,this.handler=i,this.sourceSpan=a,this.handlerSpan=o},Xi=function e(t,n,r,i,a){Object(m.a)(this,e),this.name=t,this.value=n,this.sourceSpan=r,this.keySpan=i,this.valueSpan=a},Ki=function e(t,n,r,i,a,o,s){Object(m.a)(this,e),this.name=t,this.type=n,this.securityContext=r,this.value=i,this.unit=a,this.sourceSpan=o,this.valueSpan=s},Zi=function e(){Object(m.a)(this,e)};Zi.event=Ze("$event");var $i=function e(t,n){Object(m.a)(this,e),this.stmts=t,this.allowDefault=n,this.render3Stmts=t.map((function(e){if(e instanceof Ye&&e.name==n.name&&e.value instanceof je){var t=e.value.lhs;return new Xe(t.value)}return e}))};function Qi(e,t,n,r,i,a,o){e||(e=new pa);var s=Ji({createLiteralArrayConverter:function(e){return function(e){return et(e)}},createLiteralMapConverter:function(e){return function(t){return tt(e.map((function(e,n){return{key:e.key,value:t[n],quoted:e.quoted}})))}},createPipeConverter:function(e){throw new Error("Illegal State: Actions are not allowed to contain pipes. Pipe: ".concat(e))}},n),c=new ua(e,t,r,i,a,o),l=[];!function e(t,n){Array.isArray(t)?t.forEach((function(t){return e(t,n)})):n.push(t)}(s.visit(c,ta.Statement),l),function(e,t,n){for(var r=e-1;r>=0;r--)n.unshift(oa(t,r))}(c.temporaryCount,r,l),c.usesImplicitReceiver&&e.notifyImplicitReceiverUse();var u=l.length-1,p=null;if(u>=0){var h=function(e){if(e instanceof We)return e.expr;if(e instanceof Xe)return e.value;return null}(l[u]);h&&(p=function(e){return Ze("pd_".concat(e))}(r),l[u]=p.set(h.cast(Z).notIdentical(it(!1))).toDeclStmt(null,[Oe.Final]))}return new $i(l,p)}function Ji(e,t){return function(e,t){var n=new la(e);return t.visit(n)}(e,t)}var ea,ta,na=function e(t,n){Object(m.a)(this,e),this.stmts=t,this.currValExpr=n};function ra(e,t,n,r,i,a){e||(e=new pa);var o=new ua(e,t,r,a),s=n.visit(o,ta.Expression),c=ia(o,r);if(o.usesImplicitReceiver&&e.notifyImplicitReceiverUse(),0===o.temporaryCount&&i==ea.TrySimple)return new na([],s);if(i===ea.Expression)return new na(c,s);var l=function(e){return Ze("currVal_".concat(e))}(r);return c.push(l.set(s).toDeclStmt(Z,[Oe.Final])),new na(c,l)}function ia(e,t){for(var n=[],r=0;r<e.temporaryCount;r++)n.push(oa(t,r));return n}function aa(e,t){return"tmp_".concat(e,"_").concat(t)}function oa(e,t){return new Ye(aa(e,t),Ve)}function sa(e,t){if(e!==ta.Expression)throw new Error("Expected an expression, but saw ".concat(t))}function ca(e,t){return e===ta.Statement?t.toStmt():t}!function(e){e[e.General=0]="General",e[e.TrySimple=1]="TrySimple",e[e.Expression=2]="Expression"}(ea||(ea={})),function(e){e[e.Statement=0]="Statement",e[e.Expression=1]="Expression"}(ta||(ta={}));var la=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this))._converterFactory=e,r}return Object(v.a)(n,[{key:"visitPipe",value:function(e,t){var n=this,r=[e.exp].concat(Object(g.a)(e.args)).map((function(e){return e.visit(n,t)}));return new ha(e.span,e.sourceSpan,r,this._converterFactory.createPipeConverter(e.name,r.length))}},{key:"visitLiteralArray",value:function(e,t){var n=this,r=e.expressions.map((function(e){return e.visit(n,t)}));return new ha(e.span,e.sourceSpan,r,this._converterFactory.createLiteralArrayConverter(e.expressions.length))}},{key:"visitLiteralMap",value:function(e,t){var n=this,r=e.values.map((function(e){return e.visit(n,t)}));return new ha(e.span,e.sourceSpan,r,this._converterFactory.createLiteralMapConverter(e.keys))}}]),n}(Hi),ua=function(){function e(t,n,r,i,a,o){Object(m.a)(this,e),this._localResolver=t,this._implicitReceiver=n,this.bindingId=r,this.interpolationFunction=i,this.baseSourceSpan=a,this.implicitReceiverAccesses=o,this._nodeMap=new Map,this._resultMap=new Map,this._currentTemporary=0,this.temporaryCount=0,this.usesImplicitReceiver=!1}return Object(v.a)(e,[{key:"visitUnary",value:function(e,t){var n;switch(e.operator){case"+":n=q.Plus;break;case"-":n=q.Minus;break;default:throw new Error("Unsupported operator ".concat(e.operator))}return ca(t,new De(n,this._visit(e.expr,ta.Expression),void 0,this.convertSourceSpan(e.span)))}},{key:"visitBinary",value:function(e,t){var n;switch(e.operation){case"+":n=W.Plus;break;case"-":n=W.Minus;break;case"*":n=W.Multiply;break;case"/":n=W.Divide;break;case"%":n=W.Modulo;break;case"&&":n=W.And;break;case"||":n=W.Or;break;case"==":n=W.Equals;break;case"!=":n=W.NotEquals;break;case"===":n=W.Identical;break;case"!==":n=W.NotIdentical;break;case"<":n=W.Lower;break;case">":n=W.Bigger;break;case"<=":n=W.LowerEquals;break;case">=":n=W.BiggerEquals;break;default:throw new Error("Unsupported operation ".concat(e.operation))}return ca(t,new je(n,this._visit(e.left,ta.Expression),this._visit(e.right,ta.Expression),void 0,this.convertSourceSpan(e.span)))}},{key:"visitChain",value:function(e,t){return function(e,t){if(e!==ta.Statement)throw new Error("Expected a statement, but saw ".concat(t))}(t,e),this.visitAll(e.expressions,t)}},{key:"visitConditional",value:function(e,t){return ca(t,this._visit(e.condition,ta.Expression).conditional(this._visit(e.trueExp,ta.Expression),this._visit(e.falseExp,ta.Expression),this.convertSourceSpan(e.span)))}},{key:"visitPipe",value:function(e,t){throw new Error("Illegal state: Pipes should have been converted into functions. Pipe: ".concat(e.name))}},{key:"visitFunctionCall",value:function(e,t){var n=this.visitAll(e.args,ta.Expression);return ca(t,e instanceof ha?e.converter(n):this._visit(e.target,ta.Expression).callFn(n,this.convertSourceSpan(e.span)))}},{key:"visitImplicitReceiver",value:function(e,t){return sa(t,e),this.usesImplicitReceiver=!0,this._implicitReceiver}},{key:"visitInterpolation",value:function(e,t){sa(t,e);for(var n=[it(e.expressions.length)],r=0;r<e.strings.length-1;r++)n.push(it(e.strings[r])),n.push(this._visit(e.expressions[r],ta.Expression));return n.push(it(e.strings[e.strings.length-1])),this.interpolationFunction?this.interpolationFunction(n):e.expressions.length<=9?$e(It.inlineInterpolate).callFn(n):$e(It.interpolate).callFn([n[0],et(n.slice(1),void 0,this.convertSourceSpan(e.span))])}},{key:"visitKeyedRead",value:function(e,t){var n=this.leftMostSafeNode(e);return n?this.convertSafeAccess(e,n,t):ca(t,this._visit(e.obj,ta.Expression).key(this._visit(e.key,ta.Expression)))}},{key:"visitKeyedWrite",value:function(e,t){var n=this._visit(e.obj,ta.Expression),r=this._visit(e.key,ta.Expression),i=this._visit(e.value,ta.Expression);return ca(t,n.key(r).set(i))}},{key:"visitLiteralArray",value:function(e,t){throw new Error("Illegal State: literal arrays should have been converted into functions")}},{key:"visitLiteralMap",value:function(e,t){throw new Error("Illegal State: literal maps should have been converted into functions")}},{key:"visitLiteralPrimitive",value:function(e,t){var n=null===e.value||void 0===e.value||!0===e.value||!0===e.value?$:void 0;return ca(t,it(e.value,n,this.convertSourceSpan(e.span)))}},{key:"_getLocal",value:function(e){return this._localResolver.getLocal(e)}},{key:"visitMethodCall",value:function(e,t){if(e.receiver instanceof yi&&"$any"==e.name){var n=this.visitAll(e.args,ta.Expression);if(1!=n.length)throw new Error("Invalid call to $any, expected 1 argument but received ".concat(n.length||"none"));return n[0].cast(Z,this.convertSourceSpan(e.span))}var r=this.leftMostSafeNode(e);if(r)return this.convertSafeAccess(e,r,t);var i=this.visitAll(e.args,ta.Expression),a=this.usesImplicitReceiver,o=null,s=this._visit(e.receiver,ta.Expression);if(s===this._implicitReceiver){var c=this._getLocal(e.name);c&&(this.usesImplicitReceiver=a,o=c.callFn(i)),this.addImplicitReceiverAccess(e.name)}return null==o&&(o=s.callMethod(e.name,i,this.convertSourceSpan(e.span))),ca(t,o)}},{key:"visitPrefixNot",value:function(e,t){return ca(t,(n=this._visit(e.expression,ta.Expression),new Ie(n,r)));var n,r}},{key:"visitNonNullAssert",value:function(e,t){return ca(t,(n=this._visit(e.expression,ta.Expression),new Pe(n,r)));var n,r}},{key:"visitPropertyRead",value:function(e,t){var n=this.leftMostSafeNode(e);if(n)return this.convertSafeAccess(e,n,t);var r=null,i=this.usesImplicitReceiver,a=this._visit(e.receiver,ta.Expression);return a===this._implicitReceiver&&((r=this._getLocal(e.name))&&(this.usesImplicitReceiver=i),this.addImplicitReceiverAccess(e.name)),null==r&&(r=a.prop(e.name)),ca(t,r)}},{key:"visitPropertyWrite",value:function(e,t){var n=this._visit(e.receiver,ta.Expression),r=this.usesImplicitReceiver,i=null;if(n===this._implicitReceiver){var a=this._getLocal(e.name);if(a){if(!(a instanceof Ne)){var o=e.name,s=e.value instanceof wi?e.value.name:void 0;throw new Error('Cannot assign value "'.concat(s,'" to template variable "').concat(o,'". Template variables are read-only.'))}i=a,this.usesImplicitReceiver=r,this.addImplicitReceiverAccess(e.name)}}return null===i&&(i=n.prop(e.name)),ca(t,i.set(this._visit(e.value,ta.Expression)))}},{key:"visitSafePropertyRead",value:function(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}},{key:"visitSafeMethodCall",value:function(e,t){return this.convertSafeAccess(e,this.leftMostSafeNode(e),t)}},{key:"visitAll",value:function(e,t){var n=this;return e.map((function(e){return n._visit(e,t)}))}},{key:"visitQuote",value:function(e,t){throw new Error("Quotes are not supported for evaluation!\n        Statement: ".concat(e.uninterpretedExpression," located at ").concat(e.location))}},{key:"_visit",value:function(e,t){var n=this._resultMap.get(e);return n||(this._nodeMap.get(e)||e).visit(this,t)}},{key:"convertSafeAccess",value:function(e,t,n){var r=this._visit(t.receiver,ta.Expression),i=void 0;this.needsTemporary(t.receiver)&&(r=(i=this.allocateTemporary()).set(r),this._resultMap.set(t.receiver,i));var a=r.isBlank();t instanceof Li?this._nodeMap.set(t,new Ri(t.span,t.sourceSpan,t.nameSpan,t.receiver,t.name,t.args)):this._nodeMap.set(t,new wi(t.span,t.sourceSpan,t.nameSpan,t.receiver,t.name));var o=this._visit(e,ta.Expression);return this._nodeMap.delete(t),i&&this.releaseTemporary(i),ca(n,a.conditional(it(null),o))}},{key:"leftMostSafeNode",value:function(e){var t=this,n=function(e,n){return(t._nodeMap.get(n)||n).visit(e)};return e.visit({visitUnary:function(e){return null},visitBinary:function(e){return null},visitChain:function(e){return null},visitConditional:function(e){return null},visitFunctionCall:function(e){return null},visitImplicitReceiver:function(e){return null},visitInterpolation:function(e){return null},visitKeyedRead:function(e){return n(this,e.obj)},visitKeyedWrite:function(e){return null},visitLiteralArray:function(e){return null},visitLiteralMap:function(e){return null},visitLiteralPrimitive:function(e){return null},visitMethodCall:function(e){return n(this,e.receiver)},visitPipe:function(e){return null},visitPrefixNot:function(e){return null},visitNonNullAssert:function(e){return null},visitPropertyRead:function(e){return n(this,e.receiver)},visitPropertyWrite:function(e){return null},visitQuote:function(e){return null},visitSafeMethodCall:function(e){return n(this,e.receiver)||e},visitSafePropertyRead:function(e){return n(this,e.receiver)||e}})}},{key:"needsTemporary",value:function(e){var t=this,n=function(e,n){return n&&(t._nodeMap.get(n)||n).visit(e)};return e.visit({visitUnary:function(e){return n(this,e.expr)},visitBinary:function(e){return n(this,e.left)||n(this,e.right)},visitChain:function(e){return!1},visitConditional:function(e){return n(this,e.condition)||n(this,e.trueExp)||n(this,e.falseExp)},visitFunctionCall:function(e){return!0},visitImplicitReceiver:function(e){return!1},visitInterpolation:function(e){return function(e,t){return t.some((function(t){return n(e,t)}))}(this,e.expressions)},visitKeyedRead:function(e){return!1},visitKeyedWrite:function(e){return!1},visitLiteralArray:function(e){return!0},visitLiteralMap:function(e){return!0},visitLiteralPrimitive:function(e){return!1},visitMethodCall:function(e){return!0},visitPipe:function(e){return!0},visitPrefixNot:function(e){return n(this,e.expression)},visitNonNullAssert:function(e){return n(this,e.expression)},visitPropertyRead:function(e){return!1},visitPropertyWrite:function(e){return!1},visitQuote:function(e){return!1},visitSafeMethodCall:function(e){return!0},visitSafePropertyRead:function(e){return!1}})}},{key:"allocateTemporary",value:function(){var e=this._currentTemporary++;return this.temporaryCount=Math.max(this._currentTemporary,this.temporaryCount),new se(aa(this.bindingId,e))}},{key:"releaseTemporary",value:function(e){if(this._currentTemporary--,e.name!=aa(this.bindingId,this._currentTemporary))throw new Error("Temporary ".concat(e.name," released out of order"))}},{key:"convertSourceSpan",value:function(e){if(this.baseSourceSpan){var t=this.baseSourceSpan.start.moveBy(e.start),n=this.baseSourceSpan.start.moveBy(e.end),r=this.baseSourceSpan.fullStart.moveBy(e.start);return new un(t,n,r)}return null}},{key:"addImplicitReceiverAccess",value:function(e){this.implicitReceiverAccesses&&this.implicitReceiverAccesses.add(e)}}]),e}();var pa=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"notifyImplicitReceiverUse",value:function(){}},{key:"getLocal",value:function(e){return e===Zi.event.name?Zi.event:null}}]),e}();var ha=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(m.a)(this,n),(o=t.call(this,e,r,null,i)).args=i,o.converter=a,o}return n}(Fi),da=function(){function e(){Object(m.a)(this,e),this.strictStyling=!0}return Object(v.a)(e,[{key:"shimCssText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=ja(e);e=Ma(e),e=this._insertDirectives(e);var i=this._scopeCssText(e,t,n);return[i].concat(Object(g.a)(r)).join("\n")}},{key:"_insertDirectives",value:function(e){return e=this._insertPolyfillDirectivesInCssText(e),this._insertPolyfillRulesInCssText(e)}},{key:"_insertPolyfillDirectivesInCssText",value:function(e){return e.replace(ga,(function(){return(arguments.length<=2?void 0:arguments[2])+"{"}))}},{key:"_insertPolyfillRulesInCssText",value:function(e){return e.replace(ma,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0].replace(t[1],"").replace(t[2],"");return t[4]+r}))}},{key:"_scopeCssText",value:function(e,t,n){var r=this._extractUnscopedRulesFromCssText(e);return e=this._insertPolyfillHostInCssText(e),e=this._convertColonHost(e),e=this._convertColonHostContext(e),e=this._convertShadowDOMSelectors(e),t&&(e=this._scopeSelectors(e,t,n)),(e=e+"\n"+r).trim()}},{key:"_extractUnscopedRulesFromCssText",value:function(e){var t,n="";for(va.lastIndex=0;null!==(t=va.exec(e));){n+=t[0].replace(t[2],"").replace(t[1],t[4])+"\n\n"}return n}},{key:"_convertColonHost",value:function(e){return this._convertColonRule(e,Ca,this._colonHostPartReplacer)}},{key:"_convertColonHostContext",value:function(e){return this._convertColonRule(e,wa,this._colonHostContextPartReplacer)}},{key:"_convertColonRule",value:function(e,t,n){return e.replace(t,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t[2]){for(var i=t[2].split(","),a=[],o=0;o<i.length;o++){var s=i[o].trim();if(!s)break;a.push(n(ka,s,t[3]))}return a.join(",")}return ka+t[3]}))}},{key:"_colonHostContextPartReplacer",value:function(e,t,n){return t.indexOf(ba)>-1?this._colonHostPartReplacer(e,t,n):e+t+n+", "+t+" "+e+n}},{key:"_colonHostPartReplacer",value:function(e,t,n){return e+t.replace(ba,"")+n}},{key:"_convertShadowDOMSelectors",value:function(e){return Oa.reduce((function(e,t){return e.replace(t," ")}),e)}},{key:"_scopeSelectors",value:function(e,t,n){var r,i,a,o,s,c=this;return r=function(e){var r=e.selector,i=e.content;return"@"!=e.selector[0]?r=c._scopeSelector(e.selector,t,n,c.strictStyling):(e.selector.startsWith("@media")||e.selector.startsWith("@supports")||e.selector.startsWith("@page")||e.selector.startsWith("@document"))&&(i=c._scopeSelectors(e.content,t,n)),new za(r,i)},i=Ga(e,Va,Ra),a=Ga(i.escapedString,Ba,Na),o=0,s=0,a.escapedString.replace(La,(function(){var e=arguments.length<=2?void 0:arguments[2],t="",n=arguments.length<=4?void 0:arguments[4],i="";n&&n.startsWith("{%BLOCK%")&&(t=a.blocks[o++],n=n.substring(Na.length+1),i="{");var s=r(new za(e,t));return"".concat(arguments.length<=1?void 0:arguments[1]).concat(s.selector).concat(arguments.length<=3?void 0:arguments[3]).concat(i).concat(s.content).concat(n)})).replace(Fa,(function(){return i.blocks[s++]}))}},{key:"_scopeSelector",value:function(e,t,n,r){var i=this;return e.split(",").map((function(e){return e.trim().split(Ea)})).map((function(e){var a=Object(s.a)(e),o=a[0],c=a.slice(1);return[function(e){return i._selectorNeedsScoping(e,t)?r?i._applyStrictSelectorScope(e,t,n):i._applySelectorScope(e,t,n):e}(o)].concat(Object(g.a)(c)).join(" ")})).join(", ")}},{key:"_selectorNeedsScoping",value:function(e,t){return!this._makeScopeMatcher(t).test(e)}},{key:"_makeScopeMatcher",value:function(e){return e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")"+_a,"m")}},{key:"_applySelectorScope",value:function(e,t,n){return this._applySimpleSelectorScope(e,t,n)}},{key:"_applySimpleSelectorScope",value:function(e,t,n){if(Ia.lastIndex=0,Ia.test(e)){var r=this.strictStyling?"[".concat(n,"]"):t;return e.replace(Sa,(function(e,t){return t.replace(/([^:]*)(:*)(.*)/,(function(e,t,n,i){return t+r+n+i}))})).replace(Ia,r+" ")}return t+" "+e}},{key:"_applyStrictSelectorScope",value:function(e,t,n){for(var r,i=this,a="["+(t=t.replace(/\[is=([^\]]*)\]/g,(function(e){return arguments.length<=1?void 0:arguments[1]})))+"]",o=function(e){var r=e.trim();if(!r)return"";if(e.indexOf(ka)>-1)r=i._applySimpleSelectorScope(e,t,n);else{var o=e.replace(Ia,"");if(o.length>0){var s=o.match(/([^:]*)(:*)(.*)/);s&&(r=s[1]+a+s[2]+s[3])}}return r},s=new fa(e),c="",l=0,u=/( |>|\+|~(?!=))\s*/g,p=!((e=s.content()).indexOf(ka)>-1);null!==(r=u.exec(e));){var h=r[1],d=e.slice(l,r.index).trim(),f=(p=p||d.indexOf(ka)>-1)?o(d):d;c+="".concat(f," ").concat(h," "),l=u.lastIndex}var g=e.substring(l);return c+=(p=p||g.indexOf(ka)>-1)?o(g):g,s.restore(c)}},{key:"_insertPolyfillHostInCssText",value:function(e){return e.replace(Ta,ya).replace(Pa,ba)}}]),e}(),fa=function(){function e(t){var n=this;Object(m.a)(this,e),this.placeholders=[],this.index=0,t=t.replace(/(\[[^\]]*\])/g,(function(e,t){var r="__ph-".concat(n.index,"__");return n.placeholders.push(t),n.index++,r})),this._content=t.replace(/(:nth-[-\w]+)(\([^)]+\))/g,(function(e,t,r){var i="__ph-".concat(n.index,"__");return n.placeholders.push(r),n.index++,t+i}))}return Object(v.a)(e,[{key:"restore",value:function(e){var t=this;return e.replace(/__ph-(\d+)__/g,(function(e,n){return t.placeholders[+n]}))}},{key:"content",value:function(){return this._content}}]),e}(),ga=/polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim,ma=/(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,va=/(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim,ba="-shadowcsshost",ya="-shadowcsscontext",xa=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",Ca=new RegExp("("+ba+xa,"gim"),wa=new RegExp("("+ya+xa,"gim"),ka=ba+"-no-combinator",Sa=/-shadowcsshost-no-combinator([^\s]*)/,Oa=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],Ea=/(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g,_a="([>\\s~+[.,{:][\\s\\S]*)?$",Ia=/-shadowcsshost/gim,Pa=/:host/gim,Ta=/:host-context/gim,Aa=/\/\*\s*[\s\S]*?\*\//g;function Ma(e){return e.replace(Aa,"")}var Da=/\/\*\s*#\s*source(Mapping)?URL=[\s\S]+?\*\//g;function ja(e){return e.match(Da)||[]}var Na="%BLOCK%",Ra="%QUOTED%",La=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,Fa=/%QUOTED%/g,Ba=new Map([["{","}"]]),Va=new Map([['"','"'],["'","'"]]),za=function e(t,n){Object(m.a)(this,e),this.selector=t,this.content=n};var Ua=function e(t,n){Object(m.a)(this,e),this.escapedString=t,this.blocks=n};function Ga(e,t,n){for(var r,i,a=[],o=[],s=0,c=0,l=-1,u=0;u<e.length;u++){var p=e[u];"\\"===p?u++:p===i?0===--s&&(o.push(e.substring(l,u)),a.push(n),c=u,l=-1,r=i=void 0):p===r?s++:0===s&&t.has(p)&&(r=p,i=t.get(p),s=1,l=u+1,a.push(e.substring(c,l)))}return-1!==l?(o.push(e.substring(l)),a.push(n)):a.push(e.substring(c)),new Ua(a.join(""),o)}var Ha="%COMP%",Ya="_nghost-".concat(Ha),qa="_ngcontent-".concat(Ha);var Wa=function e(t,n){Object(m.a)(this,e),this.sourceSpan=t,this.i18n=n},Xa=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,r,i)).value=e,a}return Object(v.a)(n,[{key:"visit",value:function(e,t){return e.visitText(this,t)}}]),n}(Wa),Ka=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o,s){var c;return Object(m.a)(this,n),(c=t.call(this,a,s)).switchValue=e,c.type=r,c.cases=i,c.switchValueSourceSpan=o,c}return Object(v.a)(n,[{key:"visit",value:function(e,t){return e.visitExpansion(this,t)}}]),n}(Wa),Za=function(){function e(t,n,r,i,a){Object(m.a)(this,e),this.value=t,this.expression=n,this.sourceSpan=r,this.valueSourceSpan=i,this.expSourceSpan=a}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitExpansionCase(this,t)}}]),e}(),$a=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a,o){var s;return Object(m.a)(this,n),(s=t.call(this,i,o)).name=e,s.value=r,s.valueSpan=a,s}return Object(v.a)(n,[{key:"visit",value:function(e,t){return e.visitAttribute(this,t)}}]),n}(Wa),Qa=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6?arguments[6]:void 0;return Object(m.a)(this,n),(o=t.call(this,a,l)).name=e,o.attrs=r,o.children=i,o.startSourceSpan=s,o.endSourceSpan=c,o}return Object(v.a)(n,[{key:"visit",value:function(e,t){return e.visitElement(this,t)}}]),n}(Wa),Ja=function(){function e(t,n){Object(m.a)(this,e),this.value=t,this.sourceSpan=n}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitComment(this,t)}}]),e}();function eo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[],i=e.visit?function(t){return e.visit(t,n)||t.visit(e,n)}:function(t){return t.visit(e,n)};return t.forEach((function(e){var t=i(e);t&&r.push(t)})),r}var to;!function(e){e[e.TAG_OPEN_START=0]="TAG_OPEN_START",e[e.TAG_OPEN_END=1]="TAG_OPEN_END",e[e.TAG_OPEN_END_VOID=2]="TAG_OPEN_END_VOID",e[e.TAG_CLOSE=3]="TAG_CLOSE",e[e.TEXT=4]="TEXT",e[e.ESCAPABLE_RAW_TEXT=5]="ESCAPABLE_RAW_TEXT",e[e.RAW_TEXT=6]="RAW_TEXT",e[e.COMMENT_START=7]="COMMENT_START",e[e.COMMENT_END=8]="COMMENT_END",e[e.CDATA_START=9]="CDATA_START",e[e.CDATA_END=10]="CDATA_END",e[e.ATTR_NAME=11]="ATTR_NAME",e[e.ATTR_QUOTE=12]="ATTR_QUOTE",e[e.ATTR_VALUE=13]="ATTR_VALUE",e[e.DOC_TYPE=14]="DOC_TYPE",e[e.EXPANSION_FORM_START=15]="EXPANSION_FORM_START",e[e.EXPANSION_CASE_VALUE=16]="EXPANSION_CASE_VALUE",e[e.EXPANSION_CASE_EXP_START=17]="EXPANSION_CASE_EXP_START",e[e.EXPANSION_CASE_EXP_END=18]="EXPANSION_CASE_EXP_END",e[e.EXPANSION_FORM_END=19]="EXPANSION_FORM_END",e[e.EOF=20]="EOF"}(to||(to={}));var no=function e(t,n,r){Object(m.a)(this,e),this.type=t,this.parts=n,this.sourceSpan=r},ro=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,i,e)).tokenType=r,a}return n}(pn),io=function e(t,n,r){Object(m.a)(this,e),this.tokens=t,this.errors=n,this.nonNormalizedIcuExpressions=r};var ao,oo=/\r\n?/g;function so(e){var t=0===e?"EOF":String.fromCharCode(e);return'Unexpected character "'.concat(t,'"')}function co(e){return'Unknown entity "'.concat(e,'" - use the "&#<decimal>;" or  "&#x<hex>;" syntax')}!function(e){e.HEX="hexadecimal",e.DEC="decimal"}(ao||(ao={}));var lo=function e(t){Object(m.a)(this,e),this.error=t},uo=function(){function e(t,n,r){Object(m.a)(this,e),this._getTagDefinition=n,this._currentTokenStart=null,this._currentTokenType=null,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this.nonNormalizedIcuExpressions=[],this._tokenizeIcu=r.tokenizeExpansionForms||!1,this._interpolationConfig=r.interpolationConfig||Gr,this._leadingTriviaCodePoints=r.leadingTriviaChars&&r.leadingTriviaChars.map((function(e){return e.codePointAt(0)||0}));var i=r.range||{endPos:t.content.length,startPos:0,startLine:0,startCol:0};this._cursor=r.escapedString?new yo(t,i):new bo(t,i),this._preserveLineEndings=r.preserveLineEndings||!1,this._escapedString=r.escapedString||!1,this._i18nNormalizeLineEndingsInICUs=r.i18nNormalizeLineEndingsInICUs||!1;try{this._cursor.init()}catch(a){this.handleError(a)}}return Object(v.a)(e,[{key:"_processCarriageReturns",value:function(e){return this._preserveLineEndings?e:e.replace(oo,"\n")}},{key:"tokenize",value:function(){for(;0!==this._cursor.peek();){var e=this._cursor.clone();try{this._attemptCharCode(60)?this._attemptCharCode(33)?this._attemptCharCode(91)?this._consumeCdata(e):this._attemptCharCode(45)?this._consumeComment(e):this._consumeDocType(e):this._attemptCharCode(qt)?this._consumeTagClose(e):this._consumeTagOpen(e):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeText()}catch(t){this.handleError(t)}}this._beginToken(to.EOF),this._endToken([])}},{key:"_tokenizeExpansionForm",value:function(){if(this.isExpansionFormStart())return this._consumeExpansionFormStart(),!0;if(this._cursor.peek()!==en&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._cursor.peek()===en){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1}},{key:"_beginToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._cursor.clone();this._currentTokenStart=t,this._currentTokenType=e}},{key:"_endToken",value:function(e,t){if(null===this._currentTokenStart)throw new ro("Programming error - attempted to end a token when there was no start to the token",this._currentTokenType,this._cursor.getSpan(t));if(null===this._currentTokenType)throw new ro("Programming error - attempted to end a token which has no token type",null,this._cursor.getSpan(this._currentTokenStart));var n=new no(this._currentTokenType,e,this._cursor.getSpan(this._currentTokenStart,this._leadingTriviaCodePoints));return this.tokens.push(n),this._currentTokenStart=null,this._currentTokenType=null,n}},{key:"_createError",value:function(e,t){this._isInExpansionForm()&&(e+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');var n=new ro(e,this._currentTokenType,t);return this._currentTokenStart=null,this._currentTokenType=null,new lo(n)}},{key:"handleError",value:function(e){if(e instanceof xo&&(e=this._createError(e.msg,this._cursor.getSpan(e.cursor))),!(e instanceof lo))throw e;this.errors.push(e.error)}},{key:"_attemptCharCode",value:function(e){return this._cursor.peek()===e&&(this._cursor.advance(),!0)}},{key:"_attemptCharCodeCaseInsensitive",value:function(e){return t=this._cursor.peek(),n=e,mo(t)==mo(n)&&(this._cursor.advance(),!0);var t,n}},{key:"_requireCharCode",value:function(e){var t=this._cursor.clone();if(!this._attemptCharCode(e))throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(t))}},{key:"_attemptStr",value:function(e){var t=e.length;if(this._cursor.charsLeft()<t)return!1;for(var n=this._cursor.clone(),r=0;r<t;r++)if(!this._attemptCharCode(e.charCodeAt(r)))return this._cursor=n,!1;return!0}},{key:"_attemptStrCaseInsensitive",value:function(e){for(var t=0;t<e.length;t++)if(!this._attemptCharCodeCaseInsensitive(e.charCodeAt(t)))return!1;return!0}},{key:"_requireStr",value:function(e){var t=this._cursor.clone();if(!this._attemptStr(e))throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(t))}},{key:"_attemptCharCodeUntilFn",value:function(e){for(;!e(this._cursor.peek());)this._cursor.advance()}},{key:"_requireCharCodeUntilFn",value:function(e,t){var n=this._cursor.clone();if(this._attemptCharCodeUntilFn(e),this._cursor.diff(n)<t)throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(n))}},{key:"_attemptUntilChar",value:function(e){for(;this._cursor.peek()!==e;)this._cursor.advance()}},{key:"_readChar",value:function(e){if(e&&38===this._cursor.peek())return this._decodeEntity();var t=String.fromCodePoint(this._cursor.peek());return this._cursor.advance(),t}},{key:"_decodeEntity",value:function(){var e=this._cursor.clone();if(this._cursor.advance(),!this._attemptCharCode(35)){var t=this._cursor.clone();if(this._attemptCharCodeUntilFn(go),this._cursor.peek()!=Xt)return this._cursor=t,"&";var n=this._cursor.getChars(t);this._cursor.advance();var r=S[n];if(!r)throw this._createError(co(n),this._cursor.getSpan(e));return r}var i=this._attemptCharCode(120)||this._attemptCharCode(88),a=this._cursor.clone();if(this._attemptCharCodeUntilFn(fo),this._cursor.peek()!=Xt){this._cursor.advance();var o=i?ao.HEX:ao.DEC;throw this._createError((s=o,c=this._cursor.getChars(e),'Unable to parse entity "'.concat(c,'" - ').concat(s,' character reference entities must end with ";"')),this._cursor.getSpan())}var s,c,l=this._cursor.getChars(a);this._cursor.advance();try{var u=parseInt(l,i?16:10);return String.fromCharCode(u)}catch(p){throw this._createError(co(this._cursor.getChars(e)),this._cursor.getSpan())}}},{key:"_consumeRawText",value:function(e,t){this._beginToken(e?to.ESCAPABLE_RAW_TEXT:to.RAW_TEXT);for(var n=[];;){var r=this._cursor.clone(),i=t();if(this._cursor=r,i)break;n.push(this._readChar(e))}return this._endToken([this._processCarriageReturns(n.join(""))])}},{key:"_consumeComment",value:function(e){var t=this;this._beginToken(to.COMMENT_START,e),this._requireCharCode(45),this._endToken([]),this._consumeRawText(!1,(function(){return t._attemptStr("--\x3e")})),this._beginToken(to.COMMENT_END),this._requireStr("--\x3e"),this._endToken([])}},{key:"_consumeCdata",value:function(e){var t=this;this._beginToken(to.CDATA_START,e),this._requireStr("CDATA["),this._endToken([]),this._consumeRawText(!1,(function(){return t._attemptStr("]]>")})),this._beginToken(to.CDATA_END),this._requireStr("]]>"),this._endToken([])}},{key:"_consumeDocType",value:function(e){this._beginToken(to.DOC_TYPE,e);var t=this._cursor.clone();this._attemptUntilChar(Zt);var n=this._cursor.getChars(t);this._cursor.advance(),this._endToken([n])}},{key:"_consumePrefixAndName",value:function(){for(var e,t,n=this._cursor.clone(),r="";this._cursor.peek()!==Wt&&!(((e=this._cursor.peek())<$t||Qt<e)&&(e<65||90<e)&&(e<48||e>57));)this._cursor.advance();return this._cursor.peek()===Wt?(r=this._cursor.getChars(n),this._cursor.advance(),t=this._cursor.clone()):t=n,this._requireCharCodeUntilFn(ho,""===r?0:1),[r,this._cursor.getChars(t)]}},{key:"_consumeTagOpen",value:function(e){var t,n,r,a=this.tokens.length,o=this._cursor.clone();try{if(!rn(this._cursor.peek()))throw this._createError(so(this._cursor.peek()),this._cursor.getSpan(e));for(n=(r=this._consumeTagOpenStart(e)).parts[0],t=r.parts[1],this._attemptCharCodeUntilFn(po);this._cursor.peek()!==qt&&this._cursor.peek()!==Zt;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(po),this._attemptCharCode(Kt)&&(this._attemptCharCodeUntilFn(po),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(po);this._consumeTagOpenEnd()}catch(c){if(c instanceof lo)return this._cursor=o,r&&(this.tokens.length=a),this._beginToken(to.TEXT,e),void this._endToken(["<"]);throw c}var s=this._getTagDefinition(t).contentType;s===i.RAW_TEXT?this._consumeRawTextWithTagClose(n,t,!1):s===i.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(n,t,!0)}},{key:"_consumeRawTextWithTagClose",value:function(e,t,n){var r=this;this._consumeRawText(n,(function(){return!!r._attemptCharCode(60)&&(!!r._attemptCharCode(qt)&&(r._attemptCharCodeUntilFn(po),!!r._attemptStrCaseInsensitive(t)&&(r._attemptCharCodeUntilFn(po),r._attemptCharCode(Zt))))}));this._beginToken(to.TAG_CLOSE),this._requireCharCodeUntilFn((function(e){return e===Zt}),3),this._cursor.advance(),this._endToken([e,t])}},{key:"_consumeTagOpenStart",value:function(e){this._beginToken(to.TAG_OPEN_START,e);var t=this._consumePrefixAndName();return this._endToken(t)}},{key:"_consumeAttributeName",value:function(){var e=this._cursor.peek();if(39===e||34===e)throw this._createError(so(e),this._cursor.getSpan());this._beginToken(to.ATTR_NAME);var t=this._consumePrefixAndName();this._endToken(t)}},{key:"_consumeAttributeValue",value:function(){var e;if(39===this._cursor.peek()||34===this._cursor.peek()){this._beginToken(to.ATTR_QUOTE);var t=this._cursor.peek();this._cursor.advance(),this._endToken([String.fromCodePoint(t)]),this._beginToken(to.ATTR_VALUE);for(var n=[];this._cursor.peek()!==t;)n.push(this._readChar(!0));e=n.join(""),this._endToken([this._processCarriageReturns(e)]),this._beginToken(to.ATTR_QUOTE),this._cursor.advance(),this._endToken([String.fromCodePoint(t)])}else{this._beginToken(to.ATTR_VALUE);var r=this._cursor.clone();this._requireCharCodeUntilFn(ho,1),e=this._cursor.getChars(r),this._endToken([this._processCarriageReturns(e)])}}},{key:"_consumeTagOpenEnd",value:function(){var e=this._attemptCharCode(qt)?to.TAG_OPEN_END_VOID:to.TAG_OPEN_END;this._beginToken(e),this._requireCharCode(Zt),this._endToken([])}},{key:"_consumeTagClose",value:function(e){this._beginToken(to.TAG_CLOSE,e),this._attemptCharCodeUntilFn(po);var t=this._consumePrefixAndName();this._attemptCharCodeUntilFn(po),this._requireCharCode(Zt),this._endToken(t)}},{key:"_consumeExpansionFormStart",value:function(){this._beginToken(to.EXPANSION_FORM_START),this._requireCharCode(Jt),this._endToken([]),this._expansionCaseStack.push(to.EXPANSION_FORM_START),this._beginToken(to.RAW_TEXT);var e=this._readUntil(Yt),t=this._processCarriageReturns(e);if(this._escapedString||this._i18nNormalizeLineEndingsInICUs)this._endToken([t]);else{var n=this._endToken([e]);t!==e&&this.nonNormalizedIcuExpressions.push(n)}this._requireCharCode(Yt),this._attemptCharCodeUntilFn(po),this._beginToken(to.RAW_TEXT);var r=this._readUntil(Yt);this._endToken([r]),this._requireCharCode(Yt),this._attemptCharCodeUntilFn(po)}},{key:"_consumeExpansionCaseStart",value:function(){this._beginToken(to.EXPANSION_CASE_VALUE);var e=this._readUntil(Jt).trim();this._endToken([e]),this._attemptCharCodeUntilFn(po),this._beginToken(to.EXPANSION_CASE_EXP_START),this._requireCharCode(Jt),this._endToken([]),this._attemptCharCodeUntilFn(po),this._expansionCaseStack.push(to.EXPANSION_CASE_EXP_START)}},{key:"_consumeExpansionCaseEnd",value:function(){this._beginToken(to.EXPANSION_CASE_EXP_END),this._requireCharCode(en),this._endToken([]),this._attemptCharCodeUntilFn(po),this._expansionCaseStack.pop()}},{key:"_consumeExpansionFormEnd",value:function(){this._beginToken(to.EXPANSION_FORM_END),this._requireCharCode(en),this._endToken([]),this._expansionCaseStack.pop()}},{key:"_consumeText",value:function(){var e=this._cursor.clone();this._beginToken(to.TEXT,e);var t=[];do{this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(t.push(this._interpolationConfig.start),this._inInterpolation=!0):this._interpolationConfig&&this._inInterpolation&&this._attemptStr(this._interpolationConfig.end)?(t.push(this._interpolationConfig.end),this._inInterpolation=!1):t.push(this._readChar(!0))}while(!this._isTextEnd());this._endToken([this._processCarriageReturns(t.join(""))])}},{key:"_isTextEnd",value:function(){if(60===this._cursor.peek()||0===this._cursor.peek())return!0;if(this._tokenizeIcu&&!this._inInterpolation){if(this.isExpansionFormStart())return!0;if(this._cursor.peek()===en&&this._isInExpansionCase())return!0}return!1}},{key:"_readUntil",value:function(e){var t=this._cursor.clone();return this._attemptUntilChar(e),this._cursor.getChars(t)}},{key:"_isInExpansionCase",value:function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===to.EXPANSION_CASE_EXP_START}},{key:"_isInExpansionForm",value:function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===to.EXPANSION_FORM_START}},{key:"isExpansionFormStart",value:function(){if(this._cursor.peek()!==Jt)return!1;if(this._interpolationConfig){var e=this._cursor.clone(),t=this._attemptStr(this._interpolationConfig.start);return this._cursor=e,!t}return!0}}]),e}();function po(e){return!tn(e)||0===e}function ho(e){return tn(e)||e===Zt||e===qt||39===e||34===e||e===Kt}function fo(e){return e==Xt||0==e||!function(e){return e>=$t&&e<=102||e>=65&&e<=70||nn(e)}(e)}function go(e){return e==Xt||0==e||!rn(e)}function mo(e){return e>=$t&&e<=Qt?e-$t+65:e}function vo(e){for(var t=[],n=void 0,r=0;r<e.length;r++){var i=e[r];n&&n.type==to.TEXT&&i.type==to.TEXT?(n.parts[0]+=i.parts[0],n.sourceSpan.end=i.sourceSpan.end):(n=i,t.push(n))}return t}var bo=function(){function e(t,n){if(Object(m.a)(this,e),t instanceof e){this.file=t.file,this.input=t.input,this.end=t.end;var r=t.state;this.state={peek:r.peek,offset:r.offset,line:r.line,column:r.column}}else{if(!n)throw new Error("Programming error: the range argument must be provided with a file argument.");this.file=t,this.input=t.content,this.end=n.endPos,this.state={peek:-1,offset:n.startPos,line:n.startLine,column:n.startCol}}}return Object(v.a)(e,[{key:"clone",value:function(){return new e(this)}},{key:"peek",value:function(){return this.state.peek}},{key:"charsLeft",value:function(){return this.end-this.state.offset}},{key:"diff",value:function(e){return this.state.offset-e.state.offset}},{key:"advance",value:function(){this.advanceState(this.state)}},{key:"init",value:function(){this.updatePeek(this.state)}},{key:"getSpan",value:function(e,t){var n=e=e||this;if(t)for(;this.diff(e)>0&&-1!==t.indexOf(e.peek());)n===e&&(e=e.clone()),e.advance();var r=this.locationFromCursor(e),i=this.locationFromCursor(this),a=n!==e?this.locationFromCursor(n):r;return new un(r,i,a)}},{key:"getChars",value:function(e){return this.input.substring(e.state.offset,this.state.offset)}},{key:"charAt",value:function(e){return this.input.charCodeAt(e)}},{key:"advanceState",value:function(e){if(e.offset>=this.end)throw this.state=e,new xo('Unexpected character "EOF"',this);var t=this.charAt(e.offset);t===Gt?(e.line++,e.column=0):an(t)||e.column++,e.offset++,this.updatePeek(e)}},{key:"updatePeek",value:function(e){e.peek=e.offset>=this.end?0:this.charAt(e.offset)}},{key:"locationFromCursor",value:function(e){return new cn(e.file,e.state.offset,e.state.line,e.state.column)}}]),e}(),yo=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r){var i;return Object(m.a)(this,n),e instanceof n?(i=t.call(this,e)).internalState=Object.assign({},e.internalState):(i=t.call(this,e,r)).internalState=i.state,Object(o.a)(i)}return Object(v.a)(n,[{key:"advance",value:function(){this.state=this.internalState,Object(p.a)(Object(h.a)(n.prototype),"advance",this).call(this),this.processEscapeSequence()}},{key:"init",value:function(){Object(p.a)(Object(h.a)(n.prototype),"init",this).call(this),this.processEscapeSequence()}},{key:"clone",value:function(){return new n(this)}},{key:"getChars",value:function(e){for(var t=e.clone(),n="";t.internalState.offset<this.internalState.offset;)n+=String.fromCodePoint(t.peek()),t.advance();return n}},{key:"processEscapeSequence",value:function(){var e=this,t=function(){return e.internalState.peek};if(92===t())if(this.internalState=Object.assign({},this.state),this.advanceState(this.internalState),110===t())this.state.peek=Gt;else if(114===t())this.state.peek=13;else if(118===t())this.state.peek=11;else if(116===t())this.state.peek=9;else if(98===t())this.state.peek=8;else if(102===t())this.state.peek=12;else if(117===t())if(this.advanceState(this.internalState),t()===Jt){this.advanceState(this.internalState);for(var n=this.clone(),r=0;t()!==en;)this.advanceState(this.internalState),r++;this.state.peek=this.decodeHexDigits(n,r)}else{var i=this.clone();this.advanceState(this.internalState),this.advanceState(this.internalState),this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(i,4)}else if(120===t()){this.advanceState(this.internalState);var a=this.clone();this.advanceState(this.internalState),this.state.peek=this.decodeHexDigits(a,2)}else if(on(t())){for(var o="",s=0,c=this.clone();on(t())&&s<3;)c=this.clone(),o+=String.fromCodePoint(t()),this.advanceState(this.internalState),s++;this.state.peek=parseInt(o,8),this.internalState=c.internalState}else an(this.internalState.peek)?(this.advanceState(this.internalState),this.state=this.internalState):this.state.peek=this.internalState.peek}},{key:"decodeHexDigits",value:function(e,t){var n=this.input.substr(e.internalState.offset,t),r=parseInt(n,16);if(isNaN(r))throw e.state=e.internalState,new xo("Invalid hexadecimal escape sequence",e);return r}}]),n}(bo),xo=function e(t,n){Object(m.a)(this,e),this.msg=t,this.cursor=n},Co=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i){var a;return Object(m.a)(this,n),(a=t.call(this,r,i)).elementName=e,a}return Object(v.a)(n,null,[{key:"create",value:function(e,t,r){return new n(e,t,r)}}]),n}(pn),wo=function e(t,n){Object(m.a)(this,e),this.rootNodes=t,this.errors=n},ko=function(){function e(t){Object(m.a)(this,e),this.getTagDefinition=t}return Object(v.a)(e,[{key:"parse",value:function(e,t,n){var r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new uo(new ln(e,t),n,r);return i.tokenize(),new io(vo(i.tokens),i.errors,i.nonNormalizedIcuExpressions)}(e,t,this.getTagDefinition,n),i=new So(r.tokens,this.getTagDefinition);return i.build(),new wo(i.rootNodes,r.errors.concat(i.errors))}}]),e}(),So=function(){function e(t,n){Object(m.a)(this,e),this.tokens=t,this.getTagDefinition=n,this._index=-1,this._elementStack=[],this.rootNodes=[],this.errors=[],this._advance()}return Object(v.a)(e,[{key:"build",value:function(){for(;this._peek.type!==to.EOF;)this._peek.type===to.TAG_OPEN_START?this._consumeStartTag(this._advance()):this._peek.type===to.TAG_CLOSE?this._consumeEndTag(this._advance()):this._peek.type===to.CDATA_START?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===to.COMMENT_START?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===to.TEXT||this._peek.type===to.RAW_TEXT||this._peek.type===to.ESCAPABLE_RAW_TEXT?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===to.EXPANSION_FORM_START?this._consumeExpansion(this._advance()):this._advance()}},{key:"_advance",value:function(){var e=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],e}},{key:"_advanceIf",value:function(e){return this._peek.type===e?this._advance():null}},{key:"_consumeCdata",value:function(e){this._consumeText(this._advance()),this._advanceIf(to.CDATA_END)}},{key:"_consumeComment",value:function(e){var t=this._advanceIf(to.RAW_TEXT);this._advanceIf(to.COMMENT_END);var n=null!=t?t.parts[0].trim():null;this._addToParent(new Ja(n,e.sourceSpan))}},{key:"_consumeExpansion",value:function(e){for(var t=this._advance(),n=this._advance(),r=[];this._peek.type===to.EXPANSION_CASE_VALUE;){var i=this._parseExpansionCase();if(!i)return;r.push(i)}if(this._peek.type===to.EXPANSION_FORM_END){var a=new un(e.sourceSpan.start,this._peek.sourceSpan.end,e.sourceSpan.fullStart);this._addToParent(new Ka(t.parts[0],n.parts[0],r,a,t.sourceSpan)),this._advance()}else this.errors.push(Co.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."))}},{key:"_parseExpansionCase",value:function(){var t=this._advance();if(this._peek.type!==to.EXPANSION_CASE_EXP_START)return this.errors.push(Co.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;var n=this._advance(),r=this._collectExpansionExpTokens(n);if(!r)return null;var i=this._advance();r.push(new no(to.EOF,[],i.sourceSpan));var a=new e(r,this.getTagDefinition);if(a.build(),a.errors.length>0)return this.errors=this.errors.concat(a.errors),null;var o=new un(t.sourceSpan.start,i.sourceSpan.end,t.sourceSpan.fullStart),s=new un(n.sourceSpan.start,i.sourceSpan.end,n.sourceSpan.fullStart);return new Za(t.parts[0],a.rootNodes,o,t.sourceSpan,s)}},{key:"_collectExpansionExpTokens",value:function(e){for(var t=[],n=[to.EXPANSION_CASE_EXP_START];;){if(this._peek.type!==to.EXPANSION_FORM_START&&this._peek.type!==to.EXPANSION_CASE_EXP_START||n.push(this._peek.type),this._peek.type===to.EXPANSION_CASE_EXP_END){if(!Oo(n,to.EXPANSION_CASE_EXP_START))return this.errors.push(Co.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(n.pop(),0==n.length)return t}if(this._peek.type===to.EXPANSION_FORM_END){if(!Oo(n,to.EXPANSION_FORM_START))return this.errors.push(Co.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;n.pop()}if(this._peek.type===to.EOF)return this.errors.push(Co.create(null,e.sourceSpan,"Invalid ICU message. Missing '}'.")),null;t.push(this._advance())}}},{key:"_consumeText",value:function(e){var t=e.parts[0];if(t.length>0&&"\n"==t[0]){var n=this._getParentElement();null!=n&&0==n.children.length&&this.getTagDefinition(n.name).ignoreFirstLf&&(t=t.substring(1))}t.length>0&&this._addToParent(new Xa(t,e.sourceSpan))}},{key:"_closeVoidElement",value:function(){var e=this._getParentElement();e&&this.getTagDefinition(e.name).isVoid&&this._elementStack.pop()}},{key:"_consumeStartTag",value:function(e){for(var t=e.parts[0],n=e.parts[1],r=[];this._peek.type===to.ATTR_NAME;)r.push(this._consumeAttr(this._advance()));var i=this._getElementFullName(t,n,this._getParentElement()),a=!1;if(this._peek.type===to.TAG_OPEN_END_VOID){this._advance(),a=!0;var o=this.getTagDefinition(i);o.canSelfClose||null!==w(i)||o.isVoid||this.errors.push(Co.create(i,e.sourceSpan,'Only void and foreign elements can be self closed "'.concat(e.parts[1],'"')))}else this._peek.type===to.TAG_OPEN_END&&(this._advance(),a=!1);var s=this._peek.sourceSpan.start,c=new un(e.sourceSpan.start,s,e.sourceSpan.fullStart),l=new un(e.sourceSpan.start,s,e.sourceSpan.fullStart),u=new Qa(i,r,[],c,l,void 0);this._pushElement(u),a&&this._popElement(i,c)}},{key:"_pushElement",value:function(e){var t=this._getParentElement();t&&this.getTagDefinition(t.name).isClosedByChild(e.name)&&this._elementStack.pop(),this._addToParent(e),this._elementStack.push(e)}},{key:"_consumeEndTag",value:function(e){var t=this._getElementFullName(e.parts[0],e.parts[1],this._getParentElement());if(this.getTagDefinition(t).isVoid)this.errors.push(Co.create(t,e.sourceSpan,'Void elements do not have end tags "'.concat(e.parts[1],'"')));else if(!this._popElement(t,e.sourceSpan)){var n='Unexpected closing tag "'.concat(t,'". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags');this.errors.push(Co.create(t,e.sourceSpan,n))}}},{key:"_popElement",value:function(e,t){for(var n=this._elementStack.length-1;n>=0;n--){var r=this._elementStack[n];if(r.name==e)return r.endSourceSpan=t,this._elementStack.splice(n,this._elementStack.length-n),!0;if(!this.getTagDefinition(r.name).closedByParent)return!1}return!1}},{key:"_consumeAttr",value:function(e){var t=k(e.parts[0],e.parts[1]),n=e.sourceSpan.end,r="",i=void 0;if(this._peek.type===to.ATTR_QUOTE&&this._advance(),this._peek.type===to.ATTR_VALUE){var a=this._advance();r=a.parts[0],n=a.sourceSpan.end,i=a.sourceSpan}this._peek.type===to.ATTR_QUOTE&&(n=this._advance().sourceSpan.end);return new $a(t,r,new un(e.sourceSpan.start,n,e.sourceSpan.fullStart),i)}},{key:"_getParentElement",value:function(){return this._elementStack.length>0?this._elementStack[this._elementStack.length-1]:null}},{key:"_addToParent",value:function(e){var t=this._getParentElement();null!=t?t.children.push(e):this.rootNodes.push(e)}},{key:"_getElementFullName",value:function(e,t,n){if(""===e&&""===(e=this.getTagDefinition(t).implicitNamespacePrefix||"")&&null!=n){var r=b(n.name)[1];this.getTagDefinition(r).preventNamespaceInheritance||(e=w(n.name))}return k(e,t)}}]),e}();function Oo(e,t){return e.length>0&&e[e.length-1]===t}var Eo=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.call(this,I)}return Object(v.a)(n,[{key:"parse",value:function(e,t,r){return Object(p.a)(Object(h.a)(n.prototype),"parse",this).call(this,e,t,r)}}]),n}(ko),_o="ngPreserveWhitespaces",Io=new Set(["pre","template","textarea","script","style"]),Po=" \f\n\r\t\v\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff",To=new RegExp("[^".concat(Po,"]")),Ao=new RegExp("[".concat(Po,"]{2,}"),"g");function Mo(e){return e.replace(new RegExp("\ue500","g")," ")}var Do=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitElement",value:function(e,t){return Io.has(e.name)||e.attrs.some((function(e){return e.name===_o}))?new Qa(e.name,eo(this,e.attrs),e.children,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n):new Qa(e.name,e.attrs,(n=this,r=e.children,i=[],r.forEach((function(e,t){var a={prev:r[t-1],next:r[t+1]},o=e.visit(n,a);o&&i.push(o)})),i),e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n);var n,r,i}},{key:"visitAttribute",value:function(e,t){return e.name!==_o?e:null}},{key:"visitText",value:function(e,t){var n=e.value.match(To),r=t&&(t.prev instanceof Ka||t.next instanceof Ka);return n||r?new Xa(Mo(e.value).replace(Ao," "),e.sourceSpan,e.i18n):null}},{key:"visitComment",value:function(e,t){return e}},{key:"visitExpansion",value:function(e,t){return e}},{key:"visitExpansionCase",value:function(e,t){return e}}]),e}();var jo,No=function(){function e(t,n,r){Object(m.a)(this,e),this.value=t,this.ngContentIndex=n,this.sourceSpan=r}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitText(this,t)}}]),e}(),Ro=function(){function e(t,n,r){Object(m.a)(this,e),this.name=t,this.value=n,this.sourceSpan=r}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitAttr(this,t)}}]),e}(),Lo=(r={},Object(a.a)(r,4,4),Object(a.a)(r,1,1),Object(a.a)(r,2,2),Object(a.a)(r,0,0),Object(a.a)(r,3,3),function(){function e(t,n,r,i,a,o,s,c,l,u,p,h,d){Object(m.a)(this,e),this.name=t,this.attrs=n,this.inputs=r,this.outputs=i,this.references=a,this.directives=o,this.providers=s,this.hasViewContainer=c,this.queryMatches=l,this.children=u,this.ngContentIndex=p,this.sourceSpan=h,this.endSourceSpan=d}return Object(v.a)(e,[{key:"visit",value:function(e,t){return e.visitElement(this,t)}}]),e}());!function(e){e[e.PublicService=0]="PublicService",e[e.PrivateService=1]="PrivateService",e[e.Component=2]="Component",e[e.Directive=3]="Directive",e[e.Builtin=4]="Builtin"}(jo||(jo={}));function Fo(e){if(null==e||0===e.length||"/"==e[0])return!1;var t=e.match(Bo);return null===t||"package"==t[1]||"asset"==t[1]}var Bo=/^([^:/?#]+):/,Vo=".",zo="attr",Uo="class",Go="style",Ho="animate-",Yo=function(){function e(t,n,r,i,a){if(Object(m.a)(this,e),this._exprParser=t,this._interpolationConfig=n,this._schemaRegistry=r,this.errors=a,this.pipesByName=null,this._usedPipes=new Map,i){var o=new Map;i.forEach((function(e){return o.set(e.name,e)})),this.pipesByName=o}}return Object(v.a)(e,[{key:"interpolationConfig",get:function(){return this._interpolationConfig}},{key:"getUsedPipes",value:function(){return Array.from(this._usedPipes.values())}},{key:"createBoundHostProperties",value:function(e,t){var n=this;if(e.hostProperties){var r=[];return Object.keys(e.hostProperties).forEach((function(i){var a=e.hostProperties[i];"string"==typeof a?n.parsePropertyBinding(i,a,!0,t,t.start.offset,void 0,[],r):n._reportError('Value of the host property binding "'.concat(i,'" needs to be a string representing an expression but got "').concat(a,'" (').concat(typeof a,")"),t)})),r}return null}},{key:"createDirectiveHostPropertyAsts",value:function(e,t,n){var r=this,i=this.createBoundHostProperties(e,n);return i&&i.map((function(e){return r.createBoundElementProperty(t,e)}))}},{key:"createDirectiveHostEventAsts",value:function(e,t){var n=this;if(e.hostListeners){var r=[];return Object.keys(e.hostListeners).forEach((function(i){var a=e.hostListeners[i];"string"==typeof a?n.parseEvent(i,a,t,t,[],r):n._reportError('Value of the host listener "'.concat(i,'" needs to be a string representing an expression but got "').concat(a,'" (').concat(typeof a,")"),t)})),r}return null}},{key:"parseInterpolation",value:function(e,t){var n=t.start.toString();try{var r=this._exprParser.parseInterpolation(e,n,t.start.offset,this._interpolationConfig);return r&&this._reportExpressionParserErrors(r.errors,t),this._checkPipes(r,t),r}catch(i){return this._reportError("".concat(i),t),this._exprParser.wrapLiteralPrimitive("ERROR",n,t.start.offset)}}},{key:"parseInlineTemplateBinding",value:function(e,t,n,r,i,a,o){var s,c=n.start.offset+"*".length,l=this._parseTemplateBindings(e,t,n,c,r),p=Object(u.a)(l);try{for(p.s();!(s=p.n()).done;){var h=s.value,d=Ko(n,h.sourceSpan),f=h.key.source,g=Ko(n,h.key.span);if(h instanceof zi){var m=h.value?h.value.source:"$implicit",v=h.value?Ko(n,h.value.span):void 0;o.push(new Xi(f,m,d,g,v))}else if(h.value){var b=Ko(n,h.value.ast.sourceSpan);this._parsePropertyAst(f,h.value,n,b,i,a)}else i.push([f,""]),this.parseLiteralAttr(f,null,n,r,void 0,i,a)}}catch(y){p.e(y)}finally{p.f()}}},{key:"_parseTemplateBindings",value:function(e,t,n,r,i){var a=this,o=n.start.toString();try{var s=this._exprParser.parseTemplateBindings(e,t,o,r,i);return this._reportExpressionParserErrors(s.errors,n),s.templateBindings.forEach((function(e){e.value instanceof Vi&&a._checkPipes(e.value,n)})),s.warnings.forEach((function(e){a._reportError(e,n,sn.WARNING)})),s.templateBindings}catch(c){return this._reportError("".concat(c),n),[]}}},{key:"parseLiteralAttr",value:function(e,t,n,r,i,a,o){Wo(e)?(e=e.substring(1),t&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',n,sn.ERROR),this._parseAnimation(e,t,n,r,i,a,o)):o.push(new qi(e,this._exprParser.wrapLiteralPrimitive(t,"",r),hi.LITERAL_ATTR,n,i))}},{key:"parsePropertyBinding",value:function(e,t,n,r,i,a,o,s){0===e.length&&this._reportError("Property name is missing in binding",r);var c=!1;e.startsWith(Ho)?(c=!0,e=e.substring(Ho.length)):Wo(e)&&(c=!0,e=e.substring(1)),c?this._parseAnimation(e,t,r,i,a,o,s):this._parsePropertyAst(e,this._parseBinding(t,n,a||r,i),r,a,o,s)}},{key:"parsePropertyInterpolation",value:function(e,t,n,r,i,a){var o=this.parseInterpolation(t,r||n);return!!o&&(this._parsePropertyAst(e,o,n,r,i,a),!0)}},{key:"_parsePropertyAst",value:function(e,t,n,r,i,a){i.push([e,t.source]),a.push(new qi(e,t,hi.DEFAULT,n,r))}},{key:"_parseAnimation",value:function(e,t,n,r,i,a,o){0===e.length&&this._reportError("Animation trigger is missing",n);var s=this._parseBinding(t||"undefined",!1,i||n,r);a.push([e,s.source]),o.push(new qi(e,s,hi.ANIMATION,n,i))}},{key:"_parseBinding",value:function(e,t,n,r){var i=(n&&n.start||"(unknown)").toString();try{var a=t?this._exprParser.parseSimpleBinding(e,i,r,this._interpolationConfig):this._exprParser.parseBinding(e,i,r,this._interpolationConfig);return a&&this._reportExpressionParserErrors(a.errors,n),this._checkPipes(a,n),a}catch(o){return this._reportError("".concat(o),n),this._exprParser.wrapLiteralPrimitive("ERROR",i,r)}}},{key:"createBoundElementProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t.isAnimation)return new Ki(t.name,4,R.NONE,t.expression,null,t.sourceSpan,t.valueSpan);var i=null,a=void 0,o=null,s=t.name.split(Vo),c=void 0;if(s.length>1)if(s[0]==zo){o=s.slice(1).join(Vo),n||this._validatePropertyOrAttributeName(o,t.sourceSpan,!0),c=Xo(this._schemaRegistry,e,o,!0);var l=o.indexOf(":");if(l>-1){var u=o.substring(0,l),p=o.substring(l+1);o=k(u,p)}a=1}else s[0]==Uo?(o=s[1],a=2,c=[R.NONE]):s[0]==Go&&(i=s.length>2?s[2]:null,o=s[1],a=3,c=[R.STYLE]);if(null===o){var h=this._schemaRegistry.getMappedPropName(t.name);o=r?h:t.name,c=Xo(this._schemaRegistry,e,h,!1),a=0,n||this._validatePropertyOrAttributeName(h,t.sourceSpan,!1)}return new Ki(o,a,c[0],t.expression,i,t.sourceSpan,t.valueSpan)}},{key:"parseEvent",value:function(e,t,n,r,i,a){0===e.length&&this._reportError("Event name is missing in binding",n),Wo(e)?(e=e.substr(1),this._parseAnimationEvent(e,t,n,r,a)):this._parseRegularEvent(e,t,n,r,i,a)}},{key:"calcPossibleSecurityContexts",value:function(e,t,n){var r=this._schemaRegistry.getMappedPropName(t);return Xo(this._schemaRegistry,e,r,n)}},{key:"_parseAnimationEvent",value:function(e,t,n,r,i){var a=lt(e,".",[e,""]),o=a[0],s=a[1].toLowerCase();if(s)switch(s){case"start":case"done":var c=this._parseAction(t,r);i.push(new Wi(o,s,1,c,n,r));break;default:this._reportError('The provided animation output phase value "'.concat(s,'" for "@').concat(o,'" is not supported (use start or done)'),n)}else this._reportError("The animation trigger output event (@".concat(o,") is missing its phase value name (start or done are currently supported)"),n)}},{key:"_parseRegularEvent",value:function(e,t,n,r,i,a){var o=ct(e,[null,e]),s=Object(l.a)(o,2),c=s[0],u=s[1],p=this._parseAction(t,r);i.push([e,p.source]),a.push(new Wi(u,c,0,p,n,r))}},{key:"_parseAction",value:function(e,t){var n=(t&&t.start||"(unknown").toString(),r=t&&t.start?t.start.offset:0;try{var i=this._exprParser.parseAction(e,n,r,this._interpolationConfig);return i&&this._reportExpressionParserErrors(i.errors,t),!i||i.ast instanceof bi?(this._reportError("Empty expressions are not allowed",t),this._exprParser.wrapLiteralPrimitive("ERROR",n,r)):(this._checkPipes(i,t),i)}catch(a){return this._reportError("".concat(a),t),this._exprParser.wrapLiteralPrimitive("ERROR",n,r)}}},{key:"_reportError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.ERROR;this.errors.push(new pn(t,e,n))}},{key:"_reportExpressionParserErrors",value:function(e,t){var n,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._reportError(i.message,t)}}catch(a){r.e(a)}finally{r.f()}}},{key:"_checkPipes",value:function(e,t){var n=this;if(e&&this.pipesByName){var r=new qo;e.visit(r),r.pipes.forEach((function(e,r){var i=n.pipesByName.get(r);i?n._usedPipes.set(r,i):n._reportError("The pipe '".concat(r,"' could not be found"),new un(t.start.moveBy(e.span.start),t.start.moveBy(e.span.end)))}))}}},{key:"_validatePropertyOrAttributeName",value:function(e,t,n){var r=n?this._schemaRegistry.validateAttribute(e):this._schemaRegistry.validateProperty(e);r.error&&this._reportError(r.msg,t,sn.ERROR)}}]),e}(),qo=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.apply(this,arguments)).pipes=new Map,e}return Object(v.a)(n,[{key:"visitPipe",value:function(e,t){return this.pipes.set(e.name,e),e.exp.visit(this),this.visitAll(e.args,t),null}}]),n}(Gi);function Wo(e){return"@"==e[0]}function Xo(e,t,n,r){var i=[];return M.parse(t).forEach((function(t){var a=t.element?[t.element]:e.allKnownElementNames(),o=new Set(t.notSelectors.filter((function(e){return e.isElementSelector()})).map((function(e){return e.element}))),s=a.filter((function(e){return!o.has(e)}));i.push.apply(i,Object(g.a)(s.map((function(t){return e.securityContext(t,n,r)}))))})),0===i.length?[R.NONE]:Array.from(new Set(i)).sort()}function Ko(e,t){var n=t.start-e.start.offset,r=t.end-e.end.offset;return new un(e.start.moveBy(n),e.end.moveBy(r),e.fullStart.moveBy(n),e.details)}var Zo;function $o(e){var t=null,n=null,r=null,i=!1,a="";e.attrs.forEach((function(e){var o=e.name.toLowerCase();"select"==o?t=e.value:"href"==o?n=e.value:"rel"==o?r=e.value:"ngNonBindable"==e.name?i=!0:"ngProjectAs"==e.name&&e.value.length>0&&(a=e.value)})),t=function(e){if(null===e||0===e.length)return"*";return e}(t);var o=e.name.toLowerCase(),s=Zo.OTHER;return x(o)?s=Zo.NG_CONTENT:"style"==o?s=Zo.STYLE:"script"==o?s=Zo.SCRIPT:"link"==o&&"stylesheet"==r&&(s=Zo.STYLESHEET),new Qo(s,t,n,i,a)}!function(e){e[e.NG_CONTENT=0]="NG_CONTENT",e[e.STYLE=1]="STYLE",e[e.STYLESHEET=2]="STYLESHEET",e[e.SCRIPT=3]="SCRIPT",e[e.OTHER=4]="OTHER"}(Zo||(Zo={}));var Qo=function e(t,n,r,i,a){Object(m.a)(this,e),this.type=t,this.selectAttr=n,this.hrefAttr=r,this.nonBindable=i,this.projectAs=a};var Jo;function es(){return Jo||(Jo=M.parse("*")[0]),Jo}var ts=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitElement",value:function(e,t){var n=$o(e);if(n.type===Zo.SCRIPT||n.type===Zo.STYLE||n.type===Zo.STYLESHEET)return null;var r=e.attrs.map((function(e){return[e.name,e.value]})),i=rs(e.name,r),a=t.findNgContentIndex(i),o=eo(this,e.children,is);return new Lo(e.name,eo(this,e.attrs),[],[],[],[],[],!1,[],o,a,e.sourceSpan,e.endSourceSpan)}},{key:"visitComment",value:function(e,t){return null}},{key:"visitAttribute",value:function(e,t){return new Ro(e.name,e.value,e.sourceSpan)}},{key:"visitText",value:function(e,t){var n=t.findNgContentIndex(es());return new No(e.value,n,e.sourceSpan)}},{key:"visitExpansion",value:function(e,t){return e}},{key:"visitExpansionCase",value:function(e,t){return e}}]),e}();var ns=function(){function e(t,n,r,i){Object(m.a)(this,e),this.isTemplateElement=t,this._ngContentIndexMatcher=n,this._wildcardNgContentIndex=r,this.providerContext=i}return Object(v.a)(e,[{key:"findNgContentIndex",value:function(e){var t=[];return this._ngContentIndexMatcher.match(e,(function(e,n){t.push(n)})),t.sort(),null!=this._wildcardNgContentIndex&&t.push(this._wildcardNgContentIndex),t.length>0?t[0]:null}}],[{key:"create",value:function(t,n,r){var i=new D,a=null,o=n.find((function(e){return e.directive.isComponent}));if(o)for(var s=o.directive.template.ngContentSelectors,c=0;c<s.length;c++){"*"===s[c]?a=c:i.addSelectables(M.parse(s[c]),c)}return new e(t,i,a,r)}}]),e}();function rs(e,t){var n=new M,r=b(e)[1];n.setElement(r);for(var i=0;i<t.length;i++){var a=t[i][0],o=b(a)[1],s=t[i][1];if(n.addAttribute(o,s),"class"==a.toLowerCase())s.trim().split(/\s+/g).forEach((function(e){return n.addClassName(e)}))}return n}var is=new ns(!0,new D,null,null);new ts;function as(e){return e instanceof Vi&&(e=e.ast),e instanceof bi}function os(e){var t=e.charCodeAt(0);if(t==e.charCodeAt(e.length-1)&&(39==t||34==t)){var n=e.substring(1,e.length-1);-1==n.indexOf("'")&&-1==n.indexOf('"')&&(e=n)}return e}function ss(e){return e.replace(/[a-z][A-Z]/g,(function(e){return e.charAt(0)+"-"+e.charAt(1)})).toLowerCase()}var cs,ls=function(){function e(t){Object(m.a)(this,e),this._directiveExpr=t,this._hasInitialValues=!1,this.hasBindings=!1,this.hasBindingsWithPipes=!1,this._classMapInput=null,this._styleMapInput=null,this._singleStyleInputs=null,this._singleClassInputs=null,this._lastStylingInput=null,this._firstStylingInput=null,this._stylesIndex=new Map,this._classesIndex=new Map,this._initialStyleValues=[],this._initialClassValues=[]}return Object(v.a)(e,[{key:"registerBoundInput",value:function(e){var t=null,n=e.name;switch(e.type){case 0:t=this.registerInputBasedOnName(n,e.value,e.sourceSpan);break;case 3:t=this.registerStyleInput(n,!1,e.value,e.sourceSpan,e.unit);break;case 2:t=this.registerClassInput(n,!1,e.value,e.sourceSpan)}return!!t}},{key:"registerInputBasedOnName",value:function(e,t,n){var r=null,i=e.substring(0,6),a="style"===e||"style."===i||"style!"===i;if(a||!a&&("class"===e||"class."===i||"class!"===i)){var o="."!==e.charAt(5),s=e.substr(o?5:6);r=a?this.registerStyleInput(s,o,t,n):this.registerClassInput(s,o,t,n)}return r}},{key:"registerStyleInput",value:function(e,t,n,r,i){if(as(n))return null;var a=ps(e=ss(e)),o=a.property,s=a.hasOverrideFlag,c=a.suffix,l={name:o,suffix:i="string"==typeof i&&0!==i.length?i:c,value:n,sourceSpan:r,hasOverrideFlag:s};return t?this._styleMapInput=l:((this._singleStyleInputs=this._singleStyleInputs||[]).push(l),us(this._stylesIndex,o)),this._lastStylingInput=l,this._firstStylingInput=this._firstStylingInput||l,this._checkForPipes(n),this.hasBindings=!0,l}},{key:"registerClassInput",value:function(e,t,n,r){if(as(n))return null;var i=ps(e),a=i.property,o={name:a,value:n,sourceSpan:r,hasOverrideFlag:i.hasOverrideFlag,suffix:null};if(t){if(this._classMapInput)throw new Error("[class] and [className] bindings cannot be used on the same element simultaneously");this._classMapInput=o}else(this._singleClassInputs=this._singleClassInputs||[]).push(o),us(this._classesIndex,a);return this._lastStylingInput=o,this._firstStylingInput=this._firstStylingInput||o,this._checkForPipes(n),this.hasBindings=!0,o}},{key:"_checkForPipes",value:function(e){e instanceof Vi&&e.ast instanceof _i&&(this.hasBindingsWithPipes=!0)}},{key:"registerStyleAttr",value:function(e){this._initialStyleValues=function(e){for(var t=[],n=0,r=0,i=0,a=0,o=0,s=null,c=!1;n<e.length;)switch(e.charCodeAt(n++)){case 40:r++;break;case 41:r--;break;case 39:c=c||a>0,0===i?i=39:39===i&&92!==e.charCodeAt(n-1)&&(i=0);break;case 34:c=c||a>0,0===i?i=34:34===i&&92!==e.charCodeAt(n-1)&&(i=0);break;case 58:s||0!==r||0!==i||(s=ss(e.substring(o,n-1).trim()),a=n);break;case 59:if(s&&a>0&&0===r&&0===i){var l=e.substring(a,n-1).trim();t.push(s,c?os(l):l),o=n,a=0,s=null,c=!1}}if(s&&a){var u=e.substr(a).trim();t.push(s,c?os(u):u)}return t}(e),this._hasInitialValues=!0}},{key:"registerClassAttr",value:function(e){this._initialClassValues=e.trim().split(/\s+/g),this._hasInitialValues=!0}},{key:"populateInitialStylingAttrs",value:function(e){if(this._initialClassValues.length){e.push(it(1));for(var t=0;t<this._initialClassValues.length;t++)e.push(it(this._initialClassValues[t]))}if(this._initialStyleValues.length){e.push(it(2));for(var n=0;n<this._initialStyleValues.length;n+=2)e.push(it(this._initialStyleValues[n]),it(this._initialStyleValues[n+1]))}}},{key:"assignHostAttrs",value:function(e,t){this._directiveExpr&&(e.length||this._hasInitialValues)&&(this.populateInitialStylingAttrs(e),t.set("hostAttrs",et(e)))}},{key:"buildClassMapInstruction",value:function(e){return this._classMapInput?this._buildMapBasedInstruction(e,!0,this._classMapInput):null}},{key:"buildStyleMapInstruction",value:function(e){return this._styleMapInput?this._buildMapBasedInstruction(e,!1,this._styleMapInput):null}},{key:"_buildMapBasedInstruction",value:function(e,t,n){var r,i=2,a=n.value.visit(e);return a instanceof Ai?(i+=a.expressions.length,r=t?function(e){switch(Nr(e)){case 1:return Rt.classMap;case 3:return Rt.classMapInterpolate1;case 5:return Rt.classMapInterpolate2;case 7:return Rt.classMapInterpolate3;case 9:return Rt.classMapInterpolate4;case 11:return Rt.classMapInterpolate5;case 13:return Rt.classMapInterpolate6;case 15:return Rt.classMapInterpolate7;case 17:return Rt.classMapInterpolate8;default:return Rt.classMapInterpolateV}}(a):function(e){switch(Nr(e)){case 1:return Rt.styleMap;case 3:return Rt.styleMapInterpolate1;case 5:return Rt.styleMapInterpolate2;case 7:return Rt.styleMapInterpolate3;case 9:return Rt.styleMapInterpolate4;case 11:return Rt.styleMapInterpolate5;case 13:return Rt.styleMapInterpolate6;case 15:return Rt.styleMapInterpolate7;case 17:return Rt.styleMapInterpolate8;default:return Rt.styleMapInterpolateV}}(a)):r=t?Rt.classMap:Rt.styleMap,{reference:r,calls:[{supportsInterpolation:!0,sourceSpan:n.sourceSpan,allocateBindingSlots:i,params:function(e){var t=e(a),n=Array.isArray(t)?t:[t];return n}}]}}},{key:"_buildSingleInputs",value:function(e,t,n,r,i){var a=[];return t.forEach((function(t){var o=a[a.length-1],s=t.value.visit(n),c=e,l=2;s instanceof Ai&&(l+=s.expressions.length,r&&(c=r(s)));var u={sourceSpan:t.sourceSpan,allocateBindingSlots:l,supportsInterpolation:!!r,params:function(e){var n=[];n.push(it(t.name));var r=e(s);return Array.isArray(r)?n.push.apply(n,Object(g.a)(r)):n.push(r),i||null===t.suffix||n.push(it(t.suffix)),n}};o&&o.reference===c?o.calls.push(u):a.push({reference:c,calls:[u]})})),a}},{key:"_buildClassInputs",value:function(e){return this._singleClassInputs?this._buildSingleInputs(Rt.classProp,this._singleClassInputs,e,null,!0):[]}},{key:"_buildStyleInputs",value:function(e){return this._singleStyleInputs?this._buildSingleInputs(Rt.styleProp,this._singleStyleInputs,e,hs,!1):[]}},{key:"buildUpdateLevelInstructions",value:function(e){var t=[];if(this.hasBindings){var n=this.buildStyleMapInstruction(e);n&&t.push(n);var r=this.buildClassMapInstruction(e);r&&t.push(r),t.push.apply(t,Object(g.a)(this._buildStyleInputs(e))),t.push.apply(t,Object(g.a)(this._buildClassInputs(e)))}return t}}]),e}();function us(e,t){e.has(t)||e.set(t,e.size)}function ps(e){var t=!1,n=e.indexOf("!important");-1!==n&&(e=n>0?e.substring(0,n):"",t=!0);var r=null,i=e,a=e.lastIndexOf(".");return a>0&&(r=e.substr(a+1),i=e.substring(0,a)),{property:i,suffix:r,hasOverrideFlag:t}}function hs(e){switch(Nr(e)){case 1:return Rt.styleProp;case 3:return Rt.stylePropInterpolate1;case 5:return Rt.stylePropInterpolate2;case 7:return Rt.stylePropInterpolate3;case 9:return Rt.stylePropInterpolate4;case 11:return Rt.stylePropInterpolate5;case 13:return Rt.stylePropInterpolate6;case 15:return Rt.stylePropInterpolate7;case 17:return Rt.stylePropInterpolate8;default:return Rt.stylePropInterpolateV}}!function(e){e[e.Character=0]="Character",e[e.Identifier=1]="Identifier",e[e.Keyword=2]="Keyword",e[e.String=3]="String",e[e.Operator=4]="Operator",e[e.Number=5]="Number",e[e.Error=6]="Error"}(cs||(cs={}));var ds=["var","let","as","null","undefined","true","false","if","else","this"],fs=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"tokenize",value:function(e){for(var t=new ys(e),n=[],r=t.scanToken();null!=r;)n.push(r),r=t.scanToken();return n}}]),e}(),gs=function(){function e(t,n,r,i,a){Object(m.a)(this,e),this.index=t,this.end=n,this.type=r,this.numValue=i,this.strValue=a}return Object(v.a)(e,[{key:"isCharacter",value:function(e){return this.type==cs.Character&&this.numValue==e}},{key:"isNumber",value:function(){return this.type==cs.Number}},{key:"isString",value:function(){return this.type==cs.String}},{key:"isOperator",value:function(e){return this.type==cs.Operator&&this.strValue==e}},{key:"isIdentifier",value:function(){return this.type==cs.Identifier}},{key:"isKeyword",value:function(){return this.type==cs.Keyword}},{key:"isKeywordLet",value:function(){return this.type==cs.Keyword&&"let"==this.strValue}},{key:"isKeywordAs",value:function(){return this.type==cs.Keyword&&"as"==this.strValue}},{key:"isKeywordNull",value:function(){return this.type==cs.Keyword&&"null"==this.strValue}},{key:"isKeywordUndefined",value:function(){return this.type==cs.Keyword&&"undefined"==this.strValue}},{key:"isKeywordTrue",value:function(){return this.type==cs.Keyword&&"true"==this.strValue}},{key:"isKeywordFalse",value:function(){return this.type==cs.Keyword&&"false"==this.strValue}},{key:"isKeywordThis",value:function(){return this.type==cs.Keyword&&"this"==this.strValue}},{key:"isError",value:function(){return this.type==cs.Error}},{key:"toNumber",value:function(){return this.type==cs.Number?this.numValue:-1}},{key:"toString",value:function(){switch(this.type){case cs.Character:case cs.Identifier:case cs.Keyword:case cs.Operator:case cs.String:case cs.Error:return this.strValue;case cs.Number:return this.numValue.toString();default:return null}}}]),e}();function ms(e,t,n){return new gs(e,t,cs.Character,n,String.fromCharCode(n))}function vs(e,t,n){return new gs(e,t,cs.Operator,0,n)}var bs=new gs(-1,-1,cs.Character,0,""),ys=function(){function e(t){Object(m.a)(this,e),this.input=t,this.peek=0,this.index=-1,this.length=t.length,this.advance()}return Object(v.a)(e,[{key:"advance",value:function(){this.peek=++this.index>=this.length?0:this.input.charCodeAt(this.index)}},{key:"scanToken",value:function(){for(var e=this.input,t=this.length,n=this.peek,r=this.index;n<=32;){if(++r>=t){n=0;break}n=e.charCodeAt(r)}if(this.peek=n,this.index=r,r>=t)return null;if(xs(n))return this.scanIdentifier();if(nn(n))return this.scanNumber(r);var i=r;switch(n){case 46:return this.advance(),nn(this.peek)?this.scanNumber(i):ms(i,this.index,46);case 40:case Ht:case Jt:case en:case 91:case 93:case Yt:case Wt:case Xt:return this.scanCharacter(i,n);case 39:case 34:return this.scanString();case 35:case 43:case 45:case 42:case qt:case 37:case 94:return this.scanOperator(i,String.fromCharCode(n));case 63:return this.scanComplexOperator(i,"?",46,".");case 60:case Zt:return this.scanComplexOperator(i,String.fromCharCode(n),Kt,"=");case 33:case Kt:return this.scanComplexOperator(i,String.fromCharCode(n),Kt,"=",Kt,"=");case 38:return this.scanComplexOperator(i,"&",38,"&");case 124:return this.scanComplexOperator(i,"|",124,"|");case 160:for(;tn(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error("Unexpected character [".concat(String.fromCharCode(n),"]"),0)}},{key:"scanCharacter",value:function(e,t){return this.advance(),ms(e,this.index,t)}},{key:"scanOperator",value:function(e,t){return this.advance(),vs(e,this.index,t)}},{key:"scanComplexOperator",value:function(e,t,n,r,i,a){this.advance();var o=t;return this.peek==n&&(this.advance(),o+=r),null!=i&&this.peek==i&&(this.advance(),o+=a),vs(e,this.index,o)}},{key:"scanIdentifier",value:function(){var e=this.index;for(this.advance();Cs(this.peek);)this.advance();var t,n,r,i=this.input.substring(e,this.index);return ds.indexOf(i)>-1?(t=e,n=this.index,r=i,new gs(t,n,cs.Keyword,0,r)):function(e,t,n){return new gs(e,t,cs.Identifier,0,n)}(e,this.index,i)}},{key:"scanNumber",value:function(e){var t,n=this.index===e;for(this.advance();;){if(nn(this.peek));else if(46==this.peek)n=!1;else{if(101!=(t=this.peek)&&69!=t)break;if(this.advance(),ws(this.peek)&&this.advance(),!nn(this.peek))return this.error("Invalid exponent",-1);n=!1}this.advance()}var r,i,a,o=this.input.substring(e,this.index),s=n?function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}(o):parseFloat(o);return r=e,i=this.index,a=s,new gs(r,i,cs.Number,a,"")}},{key:"scanString",value:function(){var e=this.index,t=this.peek;this.advance();for(var n="",r=this.index,i=this.input;this.peek!=t;)if(92==this.peek){n+=i.substring(r,this.index),this.advance();var a=void 0;if(this.peek=this.peek,117==this.peek){var o=i.substring(this.index+1,this.index+5);if(!/^[0-9a-f]+$/i.test(o))return this.error("Invalid unicode escape [\\u".concat(o,"]"),0);a=parseInt(o,16);for(var s=0;s<5;s++)this.advance()}else a=ks(this.peek),this.advance();n+=String.fromCharCode(a),r=this.index}else{if(0==this.peek)return this.error("Unterminated quote",0);this.advance()}var c,l,u,p=i.substring(r,this.index);return this.advance(),c=e,l=this.index,u=n+p,new gs(c,l,cs.String,0,u)}},{key:"error",value:function(e,t){var n=this.index+t;return function(e,t,n){return new gs(e,t,cs.Error,0,n)}(n,this.index,"Lexer Error: ".concat(e," at column ").concat(n," in expression [").concat(this.input,"]"))}}]),e}();function xs(e){return $t<=e&&e<=Qt||65<=e&&e<=90||95==e||36==e}function Cs(e){return rn(e)||nn(e)||95==e||36==e}function ws(e){return 45==e||43==e}function ks(e){switch(e){case 110:return Gt;case 102:return 12;case 114:return 13;case 116:return 9;case 118:return 11;default:return e}}var Ss=function e(t,n,r,i,a){Object(m.a)(this,e),this.strings=t,this.stringSpans=n,this.expressions=r,this.expressionsSpans=i,this.offsets=a},Os=function e(t,n,r){Object(m.a)(this,e),this.templateBindings=t,this.warnings=n,this.errors=r},Es=_s(Gr);function _s(e){var t=pt(e.start)+"([\\s\\S]*?)"+pt(e.end);return new RegExp(t,"g")}var Is,Ps=function(){function e(t){Object(m.a)(this,e),this._lexer=t,this.errors=[],this.simpleExpressionChecker=Ds}return Object(v.a)(e,[{key:"parseAction",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gr;this._checkNoInterpolation(e,t,r);var i=this._stripComments(e),a=this._lexer.tokenize(this._stripComments(e)),o=new Ms(e,t,n,a,i.length,!0,this.errors,e.length-i.length).parseChain();return new Vi(o,e,t,n,this.errors)}},{key:"parseBinding",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gr,i=this._parseBindingAst(e,t,n,r);return new Vi(i,e,t,n,this.errors)}},{key:"checkSimpleExpression",value:function(e){var t=new this.simpleExpressionChecker;return e.visit(t),t.errors}},{key:"parseSimpleBinding",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gr,i=this._parseBindingAst(e,t,n,r),a=this.checkSimpleExpression(i);return a.length>0&&this._reportError("Host binding expression cannot contain ".concat(a.join(" ")),e,t),new Vi(i,e,t,n,this.errors)}},{key:"_reportError",value:function(e,t,n,r){this.errors.push(new di(e,t,n,r))}},{key:"_parseBindingAst",value:function(e,t,n,r){var i=this._parseQuote(e,t,n);if(null!=i)return i;this._checkNoInterpolation(e,t,r);var a=this._stripComments(e),o=this._lexer.tokenize(a);return new Ms(e,t,n,o,a.length,!1,this.errors,e.length-a.length).parseChain()}},{key:"_parseQuote",value:function(e,t,n){if(null==e)return null;var r=e.indexOf(":");if(-1==r)return null;var i=e.substring(0,r).trim();if(!function(e){if(0==e.length)return!1;var t=new ys(e);if(!xs(t.peek))return!1;for(t.advance();0!==t.peek;){if(!Cs(t.peek))return!1;t.advance()}return!0}(i))return null;var a=e.substring(r+1),o=new fi(0,e.length);return new vi(o,o.toAbsolute(n),i,a,t)}},{key:"parseTemplateBindings",value:function(e,t,n,r,i){var a=this._lexer.tokenize(t);return new Ms(t,n,i,a,t.length,!1,this.errors,0).parseTemplateBindings({source:e,span:new Bi(r,r+e.length)})}},{key:"parseInterpolation",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gr,i=this.splitInterpolation(e,t,r);if(null==i)return null;for(var a=[],o=0;o<i.expressions.length;++o){var s=i.expressions[o],c=this._stripComments(s),l=this._lexer.tokenize(c),u=new Ms(e,t,n,l,c.length,!1,this.errors,i.offsets[o]+(s.length-c.length)).parseChain();a.push(u)}var p=new fi(0,null==e?0:e.length);return new Vi(new Ai(p,p.toAbsolute(n),i.strings,a),e,t,n,this.errors)}},{key:"splitInterpolation",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gr,r=[],i=[],a=[],o=[],s=[],c=0,l=!1,u=!1,p=n.start,h=n.end;c<e.length;)if(l){var d=c,f=d+p.length,g=e.indexOf(h,f);if(-1===g){l=!1,u=!0;break}var m=g+h.length,v=e.substring(f,g);v.trim().length>0?i.push(v):(this._reportError("Blank expressions are not allowed in interpolated strings",e,"at column ".concat(c," in"),t),i.push("$implicit")),a.push(f),s.push({start:d,end:m}),c=m,l=!1}else{var b=c;-1===(c=e.indexOf(p,c))&&(c=e.length);var y=e.substring(b,c);r.push(y),o.push({start:b,end:c}),l=!0}return l||(u?(r[r.length-1]+=e.substring(c),o[o.length-1].end=e.length):(r.push(e.substring(c)),o.push({start:c,end:e.length}))),0===i.length?null:new Ss(r,o,i,s,a)}},{key:"wrapLiteralPrimitive",value:function(e,t,n){var r=new fi(0,null==e?0:e.length);return new Vi(new Ii(r,r.toAbsolute(n),e),e,t,n,this.errors)}},{key:"_stripComments",value:function(e){var t=this._commentStart(e);return null!=t?e.substring(0,t).trim():e}},{key:"_commentStart",value:function(e){for(var t,n=null,r=0;r<e.length-1;r++){var i=e.charCodeAt(r),a=e.charCodeAt(r+1);if(i===qt&&a==qt&&null==n)return r;n===i?n=null:null==n&&(39===(t=i)||34===t||96===t)&&(n=i)}return null}},{key:"_checkNoInterpolation",value:function(e,t,n){var r,i=(r=n)===Gr?Es:_s(r),a=e.split(i);a.length>1&&this._reportError("Got interpolation (".concat(n.start).concat(n.end,") where expression was expected"),e,"at column ".concat(this._findInterpolationErrorColumn(a,1,n)," in"),t)}},{key:"_findInterpolationErrorColumn",value:function(e,t,n){for(var r="",i=0;i<t;i++)r+=i%2==0?e[i]:"".concat(n.start).concat(e[i]).concat(n.end);return r.length}}]),e}(),Ts=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.apply(this,arguments)).simpleExpressionChecker=js,e}return n}(Ps);!function(e){e[e.None=0]="None",e[e.Writable=1]="Writable"}(Is||(Is={}));var As,Ms=function(){function e(t,n,r,i,a,o,s,c){Object(m.a)(this,e),this.input=t,this.location=n,this.absoluteOffset=r,this.tokens=i,this.inputLength=a,this.parseAction=o,this.errors=s,this.offset=c,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.context=Is.None,this.sourceSpanCache=new Map,this.index=0}return Object(v.a)(e,[{key:"peek",value:function(e){var t=this.index+e;return t<this.tokens.length?this.tokens[t]:bs}},{key:"next",get:function(){return this.peek(0)}},{key:"atEOF",get:function(){return this.index>=this.tokens.length}},{key:"inputIndex",get:function(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}},{key:"currentEndIndex",get:function(){return this.index>0?this.peek(-1).end+this.offset:0===this.tokens.length?this.inputLength+this.offset:this.next.index+this.offset}},{key:"currentAbsoluteOffset",get:function(){return this.absoluteOffset+this.inputIndex}},{key:"span",value:function(e){return new fi(e,this.currentEndIndex)}},{key:"sourceSpan",value:function(e){var t="".concat(e,"@").concat(this.inputIndex);return this.sourceSpanCache.has(t)||this.sourceSpanCache.set(t,this.span(e).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(t)}},{key:"advance",value:function(){this.index++}},{key:"withContext",value:function(e,t){this.context|=e;var n=t();return this.context^=e,n}},{key:"consumeOptionalCharacter",value:function(e){return!!this.next.isCharacter(e)&&(this.advance(),!0)}},{key:"peekKeywordLet",value:function(){return this.next.isKeywordLet()}},{key:"peekKeywordAs",value:function(){return this.next.isKeywordAs()}},{key:"expectCharacter",value:function(e){this.consumeOptionalCharacter(e)||this.error("Missing expected ".concat(String.fromCharCode(e)))}},{key:"consumeOptionalOperator",value:function(e){return!!this.next.isOperator(e)&&(this.advance(),!0)}},{key:"expectOperator",value:function(e){this.consumeOptionalOperator(e)||this.error("Missing expected operator ".concat(e))}},{key:"prettyPrintToken",value:function(e){return e===bs?"end of input":"token ".concat(e)}},{key:"expectIdentifierOrKeyword",value:function(){var e=this.next;return e.isIdentifier()||e.isKeyword()?(this.advance(),e.toString()):(this.error("Unexpected ".concat(this.prettyPrintToken(e),", expected identifier or keyword")),"")}},{key:"expectIdentifierOrKeywordOrString",value:function(){var e=this.next;return e.isIdentifier()||e.isKeyword()||e.isString()?(this.advance(),e.toString()):(this.error("Unexpected ".concat(this.prettyPrintToken(e),", expected identifier, keyword, or string")),"")}},{key:"parseChain",value:function(){for(var e=[],t=this.inputIndex;this.index<this.tokens.length;){var n=this.parsePipe();if(e.push(n),this.consumeOptionalCharacter(Xt))for(this.parseAction||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(Xt););else this.index<this.tokens.length&&this.error("Unexpected token '".concat(this.next,"'"))}return 0==e.length?new bi(this.span(t),this.sourceSpan(t)):1==e.length?e[0]:new xi(this.span(t),this.sourceSpan(t),e)}},{key:"parsePipe",value:function(){var e=this.parseExpression();if(this.consumeOptionalOperator("|")){this.parseAction&&this.error("Cannot have a pipe in an action expression");do{for(var t=this.inputIndex,n=this.expectIdentifierOrKeyword(),r=this.sourceSpan(t),i=[];this.consumeOptionalCharacter(Wt);)i.push(this.parseExpression());var a=e.span.start;e=new _i(this.span(a),this.sourceSpan(a),e,n,i,r)}while(this.consumeOptionalOperator("|"))}return e}},{key:"parseExpression",value:function(){return this.parseConditional()}},{key:"parseConditional",value:function(){var e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){var n,r=this.parsePipe();if(this.consumeOptionalCharacter(Wt))n=this.parsePipe();else{var i=this.inputIndex,a=this.input.substring(e,i);this.error("Conditional expression ".concat(a," requires all 3 expressions")),n=new bi(this.span(e),this.sourceSpan(e))}return new Ci(this.span(e),this.sourceSpan(e),t,r,n)}return t}},{key:"parseLogicalOr",value:function(){for(var e=this.parseLogicalAnd();this.consumeOptionalOperator("||");){var t=this.parseLogicalAnd(),n=e.span.start;e=new Mi(this.span(n),this.sourceSpan(n),"||",e,t)}return e}},{key:"parseLogicalAnd",value:function(){for(var e=this.parseEquality();this.consumeOptionalOperator("&&");){var t=this.parseEquality(),n=e.span.start;e=new Mi(this.span(n),this.sourceSpan(n),"&&",e,t)}return e}},{key:"parseEquality",value:function(){for(var e=this.parseRelational();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"==":case"===":case"!=":case"!==":this.advance();var n=this.parseRelational(),r=e.span.start;e=new Mi(this.span(r),this.sourceSpan(r),t,e,n);continue}break}return e}},{key:"parseRelational",value:function(){for(var e=this.parseAdditive();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"<":case">":case"<=":case">=":this.advance();var n=this.parseAdditive(),r=e.span.start;e=new Mi(this.span(r),this.sourceSpan(r),t,e,n);continue}break}return e}},{key:"parseAdditive",value:function(){for(var e=this.parseMultiplicative();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"+":case"-":this.advance();var n=this.parseMultiplicative(),r=e.span.start;e=new Mi(this.span(r),this.sourceSpan(r),t,e,n);continue}break}return e}},{key:"parseMultiplicative",value:function(){for(var e=this.parsePrefix();this.next.type==cs.Operator;){var t=this.next.strValue;switch(t){case"*":case"%":case"/":this.advance();var n=this.parsePrefix(),r=e.span.start;e=new Mi(this.span(r),this.sourceSpan(r),t,e,n);continue}break}return e}},{key:"parsePrefix",value:function(){if(this.next.type==cs.Operator){var e,t=this.inputIndex;switch(this.next.strValue){case"+":return this.advance(),e=this.parsePrefix(),Di.createPlus(this.span(t),this.sourceSpan(t),e);case"-":return this.advance(),e=this.parsePrefix(),Di.createMinus(this.span(t),this.sourceSpan(t),e);case"!":return this.advance(),e=this.parsePrefix(),new ji(this.span(t),this.sourceSpan(t),e)}}return this.parseCallChain()}},{key:"parseCallChain",value:function(){for(var e=this,t=this.parsePrimary(),n=t.span.start;;)if(this.consumeOptionalCharacter(46))t=this.parseAccessMemberOrMethodCall(t,!1);else if(this.consumeOptionalOperator("?."))t=this.parseAccessMemberOrMethodCall(t,!0);else if(this.consumeOptionalCharacter(91))this.withContext(Is.Writable,(function(){e.rbracketsExpected++;var r=e.parsePipe();if(r instanceof bi&&e.error("Key access cannot be empty"),e.rbracketsExpected--,e.expectCharacter(93),e.consumeOptionalOperator("=")){var i=e.parseConditional();t=new Ei(e.span(n),e.sourceSpan(n),t,r,i)}else t=new Oi(e.span(n),e.sourceSpan(n),t,r)}));else if(this.consumeOptionalCharacter(40)){this.rparensExpected++;var r=this.parseCallArguments();this.rparensExpected--,this.expectCharacter(Ht),t=new Fi(this.span(n),this.sourceSpan(n),t,r)}else{if(!this.consumeOptionalOperator("!"))return t;t=new Ni(this.span(n),this.sourceSpan(n),t)}}},{key:"parsePrimary",value:function(){var e=this.inputIndex;if(this.consumeOptionalCharacter(40)){this.rparensExpected++;var t=this.parsePipe();return this.rparensExpected--,this.expectCharacter(Ht),t}if(this.next.isKeywordNull())return this.advance(),new Ii(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new Ii(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new Ii(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new Ii(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordThis())return this.advance(),new yi(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;var n=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new Pi(this.span(e),this.sourceSpan(e),n)}if(this.next.isCharacter(Jt))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMemberOrMethodCall(new yi(this.span(e),this.sourceSpan(e)),!1);if(this.next.isNumber()){var r=this.next.toNumber();return this.advance(),new Ii(this.span(e),this.sourceSpan(e),r)}if(this.next.isString()){var i=this.next.toString();return this.advance(),new Ii(this.span(e),this.sourceSpan(e),i)}return this.index>=this.tokens.length?(this.error("Unexpected end of expression: ".concat(this.input)),new bi(this.span(e),this.sourceSpan(e))):(this.error("Unexpected token ".concat(this.next)),new bi(this.span(e),this.sourceSpan(e)))}},{key:"parseExpressionList",value:function(e){var t=[];if(!this.next.isCharacter(e))do{t.push(this.parsePipe())}while(this.consumeOptionalCharacter(Yt));return t}},{key:"parseLiteralMap",value:function(){var e=[],t=[],n=this.inputIndex;if(this.expectCharacter(Jt),!this.consumeOptionalCharacter(en)){this.rbracesExpected++;do{var r=this.next.isString(),i=this.expectIdentifierOrKeywordOrString();e.push({key:i,quoted:r}),this.expectCharacter(Wt),t.push(this.parsePipe())}while(this.consumeOptionalCharacter(Yt));this.rbracesExpected--,this.expectCharacter(en)}return new Ti(this.span(n),this.sourceSpan(n),e,t)}},{key:"parseAccessMemberOrMethodCall",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.span.start,r=this.inputIndex,i=this.expectIdentifierOrKeyword(),a=this.sourceSpan(r);if(this.consumeOptionalCharacter(40)){this.rparensExpected++;var o=this.parseCallArguments();this.expectCharacter(Ht),this.rparensExpected--;var s=this.span(n),c=this.sourceSpan(n);return t?new Li(s,c,a,e,i,o):new Ri(s,c,a,e,i,o)}if(t)return this.consumeOptionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),new bi(this.span(n),this.sourceSpan(n))):new Si(this.span(n),this.sourceSpan(n),a,e,i);if(this.consumeOptionalOperator("=")){if(!this.parseAction)return this.error("Bindings cannot contain assignments"),new bi(this.span(n),this.sourceSpan(n));var l=this.parseConditional();return new ki(this.span(n),this.sourceSpan(n),a,e,i,l)}return new wi(this.span(n),this.sourceSpan(n),a,e,i)}},{key:"parseCallArguments",value:function(){if(this.next.isCharacter(Ht))return[];var e=[];do{e.push(this.parsePipe())}while(this.consumeOptionalCharacter(Yt));return e}},{key:"expectTemplateBindingKey",value:function(){var e="",t=!1,n=this.currentAbsoluteOffset;do{e+=this.expectIdentifierOrKeywordOrString(),(t=this.consumeOptionalOperator("-"))&&(e+="-")}while(t);return{source:e,span:new Bi(n,n+e.length)}}},{key:"parseTemplateBindings",value:function(e){var t=[];for(t.push.apply(t,Object(g.a)(this.parseDirectiveKeywordBindings(e)));this.index<this.tokens.length;){var n=this.parseLetBinding();if(n)t.push(n);else{var r=this.expectTemplateBindingKey(),i=this.parseAsBinding(r);i?t.push(i):(r.source=e.source+r.source[0].toUpperCase()+r.source.substring(1),t.push.apply(t,Object(g.a)(this.parseDirectiveKeywordBindings(r))))}this.consumeStatementTerminator()}return new Os(t,[],this.errors)}},{key:"parseDirectiveKeywordBindings",value:function(e){var t=[];this.consumeOptionalCharacter(Wt);var n=this.getDirectiveBoundTarget(),r=this.currentAbsoluteOffset,i=this.parseAsBinding(e);i||(this.consumeStatementTerminator(),r=this.currentAbsoluteOffset);var a=new Bi(e.span.start,r);return t.push(new Ui(a,e,n)),i&&t.push(i),t}},{key:"getDirectiveBoundTarget",value:function(){if(this.next===bs||this.peekKeywordAs()||this.peekKeywordLet())return null;var e=this.parsePipe(),t=e.span,n=t.start,r=t.end,i=this.input.substring(n,r);return new Vi(e,i,this.location,this.absoluteOffset+n,this.errors)}},{key:"parseAsBinding",value:function(e){if(!this.peekKeywordAs())return null;this.advance();var t=this.expectTemplateBindingKey();this.consumeStatementTerminator();var n=new Bi(e.span.start,this.currentAbsoluteOffset);return new zi(n,t,e)}},{key:"parseLetBinding",value:function(){if(!this.peekKeywordLet())return null;var e=this.currentAbsoluteOffset;this.advance();var t=this.expectTemplateBindingKey(),n=null;this.consumeOptionalOperator("=")&&(n=this.expectTemplateBindingKey()),this.consumeStatementTerminator();var r=new Bi(e,this.currentAbsoluteOffset);return new zi(r,t,n)}},{key:"consumeStatementTerminator",value:function(){this.consumeOptionalCharacter(Xt)||this.consumeOptionalCharacter(Yt)}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.errors.push(new di(e,this.input,this.locationText(t),this.location)),this.skip()}},{key:"locationText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e&&(e=this.index),e<this.tokens.length?"at column ".concat(this.tokens[e].index+1," in"):"at the end of the expression"}},{key:"skip",value:function(){for(var e=this.next;!(!(this.index<this.tokens.length)||e.isCharacter(Xt)||!(this.rparensExpected<=0)&&e.isCharacter(Ht)||!(this.rbracesExpected<=0)&&e.isCharacter(en)||!(this.rbracketsExpected<=0)&&e.isCharacter(93)||this.context&Is.Writable&&e.isOperator("="));)this.next.isError()&&this.errors.push(new di(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),e=this.next}}]),e}(),Ds=function(){function e(){Object(m.a)(this,e),this.errors=[]}return Object(v.a)(e,[{key:"visitImplicitReceiver",value:function(e,t){}},{key:"visitInterpolation",value:function(e,t){}},{key:"visitLiteralPrimitive",value:function(e,t){}},{key:"visitPropertyRead",value:function(e,t){}},{key:"visitPropertyWrite",value:function(e,t){}},{key:"visitSafePropertyRead",value:function(e,t){}},{key:"visitMethodCall",value:function(e,t){}},{key:"visitSafeMethodCall",value:function(e,t){}},{key:"visitFunctionCall",value:function(e,t){}},{key:"visitLiteralArray",value:function(e,t){this.visitAll(e.expressions,t)}},{key:"visitLiteralMap",value:function(e,t){this.visitAll(e.values,t)}},{key:"visitUnary",value:function(e,t){}},{key:"visitBinary",value:function(e,t){}},{key:"visitPrefixNot",value:function(e,t){}},{key:"visitNonNullAssert",value:function(e,t){}},{key:"visitConditional",value:function(e,t){}},{key:"visitPipe",value:function(e,t){this.errors.push("pipes")}},{key:"visitKeyedRead",value:function(e,t){}},{key:"visitKeyedWrite",value:function(e,t){}},{key:"visitAll",value:function(e,t){var n=this;return e.map((function(e){return e.visit(n,t)}))}},{key:"visitChain",value:function(e,t){}},{key:"visitQuote",value:function(e,t){}}]),e}(),js=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.apply(this,arguments)).errors=[],e}return Object(v.a)(n,[{key:"visitPipe",value:function(){this.errors.push("pipes")}}]),n}(Gi);function Ns(){return As||(As={},Rs(R.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),Rs(R.STYLE,["*|style"]),Rs(R.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","img|srcset","input|src","ins|cite","q|cite","source|src","source|srcset","track|src","video|poster","video|src"]),Rs(R.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])),As}function Rs(e,t){var n,r=Object(u.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;As[i.toLowerCase()]=e}}catch(a){r.e(a)}finally{r.f()}}var Ls=["[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot,*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored","[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate","abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate","media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume",":svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type","select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","shadow^[HTMLElement]|","slot^[HTMLElement]|name","source^[HTMLElement]|media,sizes,src,srcset,type","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|#height,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime",":svg:cursor^:svg:|"],Fs={class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Bs=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this))._schema={},Ls.forEach((function(t){var n={},r=t.split("|"),i=Object(l.a)(r,2),a=i[0],o=i[1].split(","),s=a.split("^"),c=Object(l.a)(s,2),u=c[0],p=c[1];u.split(",").forEach((function(t){return e._schema[t.toLowerCase()]=n}));var h=p&&e._schema[p.toLowerCase()];h&&Object.keys(h).forEach((function(e){n[e]=h[e]})),o.forEach((function(e){if(e.length>0)switch(e[0]){case"*":break;case"!":n[e.substring(1)]="boolean";break;case"#":n[e.substring(1)]="number";break;case"%":n[e.substring(1)]="object";break;default:n[e]="string"}}))})),e}return Object(v.a)(n,[{key:"hasProperty",value:function(e,t,n){if(n.some((function(e){return e.name===B.name})))return!0;if(e.indexOf("-")>-1){if(y(e)||x(e))return!1;if(n.some((function(e){return e.name===F.name})))return!0}return!!(this._schema[e.toLowerCase()]||this._schema.unknown)[t]}},{key:"hasElement",value:function(e,t){if(t.some((function(e){return e.name===B.name})))return!0;if(e.indexOf("-")>-1){if(y(e)||x(e))return!0;if(t.some((function(e){return e.name===F.name})))return!0}return!!this._schema[e.toLowerCase()]}},{key:"securityContext",value:function(e,t,n){n&&(t=this.getMappedPropName(t)),e=e.toLowerCase(),t=t.toLowerCase();var r=Ns()[e+"|"+t];return r||((r=Ns()["*|"+t])||R.NONE)}},{key:"getMappedPropName",value:function(e){return Fs[e]||e}},{key:"getDefaultComponentElementName",value:function(){return"ng-component"}},{key:"validateProperty",value:function(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:"Binding to event property '".concat(e,"' is disallowed for security reasons, ")+"please use (".concat(e.slice(2),")=...")+"\nIf '".concat(e,"' is a directive input, make sure the directive is imported by the")+" current module."}:{error:!1}}},{key:"validateAttribute",value:function(e){return e.toLowerCase().startsWith("on")?{error:!0,msg:"Binding to event attribute '".concat(e,"' is disallowed for security reasons, ")+"please use (".concat(e.slice(2),")=...")}:{error:!1}}},{key:"allKnownElementNames",value:function(){return Object.keys(this._schema)}},{key:"normalizeAnimationStyleProperty",value:function(e){return e.replace(st,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[1].toUpperCase()}))}},{key:"normalizeAnimationStyleValue",value:function(e,t,n){var r="",i=n.toString().trim(),a=null;if(function(e){switch(e){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}(e)&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{var o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&(a="Please provide a CSS unit value for ".concat(t,":").concat(n))}return{error:a,value:i+r}}}]),n}((function e(){Object(m.a)(this,e)}));var Vs=/^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.*))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/;function zs(e,t){var n=new Gs(t);return{nodes:eo(n,e),errors:t.errors.concat(n.errors),styleUrls:n.styleUrls,styles:n.styles,ngContentSelectors:n.ngContentSelectors}}var Us,Gs=function(){function e(t){Object(m.a)(this,e),this.bindingParser=t,this.errors=[],this.styles=[],this.styleUrls=[],this.ngContentSelectors=[],this.inI18nBlock=!1}return Object(v.a)(e,[{key:"visitElement",value:function(e){var t=this,n=ar(e.i18n);n&&(this.inI18nBlock&&this.reportError("Cannot mark an element as translatable inside of a translatable section. Please remove the nested i18n marker.",e.sourceSpan),this.inI18nBlock=!0);var r,i=$o(e);if(i.type===Zo.SCRIPT)return null;if(i.type===Zo.STYLE){var a=1===(r=e).children.length&&r.children[0]instanceof Xa?r.children[0].value:null;return null!==a&&this.styles.push(a),null}if(i.type===Zo.STYLESHEET&&Fo(i.hrefAttr))return this.styleUrls.push(i.hrefAttr),null;var o,s=C(e.name),c=[],l=[],p=[],h=[],d=[],f={},m=[],v=[],b=!1,y=Object(u.a)(e.attrs);try{for(y.s();!(o=y.n()).done;){var x=o.value,w=!1,k=Ys(x.name),S=!1;if(x.i18n&&(f[x.name]=x.i18n),k.startsWith("*")){b&&this.reportError("Can't have multiple template bindings on one element. Use only one attribute prefixed with *",x.sourceSpan),S=!0,b=!0;var O=x.value,E=k.substring("*".length),_=[],I=x.valueSpan?x.valueSpan.start.offset:x.sourceSpan.start.offset+x.name.length;this.bindingParser.parseInlineTemplateBinding(E,O,x.sourceSpan,I,[],m,_),v.push.apply(v,Object(g.a)(_.map((function(e){return new xn(e.name,e.value,e.sourceSpan,e.valueSpan)}))))}else w=this.parseAttribute(s,x,[],c,l,p,h);w||S||d.push(this.visitAttribute(x))}}catch(B){y.e(B)}finally{y.f()}var P,T=eo(i.nonBindable?Hs:this,e.children);if(i.type===Zo.NG_CONTENT){e.children&&!e.children.every((function(e){return function(e){return e instanceof Xa&&0==e.value.trim().length}(e)||function(e){return e instanceof Ja}(e)}))&&this.reportError("<ng-content> element cannot have content.",e.sourceSpan);var A=i.selectAttr,M=e.attrs.map((function(e){return t.visitAttribute(e)}));P=new yn(A,M,e.sourceSpan,e.i18n),this.ngContentSelectors.push(A)}else if(s){var D=this.extractAttributes(e.name,c,f);P=new bn(e.name,d,D.bound,l,[],T,h,p,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}else{var j=this.extractAttributes(e.name,c,f);P=new vn(e.name,d,j.bound,l,T,h,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,e.i18n)}if(b){var N=this.extractAttributes("ng-template",m,f),R=[];N.literal.forEach((function(e){return R.push(e)})),N.bound.forEach((function(e){return R.push(e)}));var L=P instanceof vn?{attributes:P.attributes,inputs:P.inputs,outputs:P.outputs}:{attributes:[],inputs:[],outputs:[]},F=s&&n?void 0:e.i18n;P=new bn(P.name,L.attributes,L.inputs,L.outputs,R,[P],[],v,e.sourceSpan,e.startSourceSpan,e.endSourceSpan,F)}return n&&(this.inI18nBlock=!1),P}},{key:"visitAttribute",value:function(e){return new fn(e.name,e.value,e.sourceSpan,e.valueSpan,e.i18n)}},{key:"visitText",value:function(e){return this._visitTextWithInterpolation(e.value,e.sourceSpan,e.i18n)}},{key:"visitExpansion",value:function(e){var t=this;if(!e.i18n)return null;if(!ar(e.i18n))throw new Error('Invalid type "'.concat(e.i18n.constructor,'" for "i18n" property of ').concat(e.sourceSpan.toString(),'. Expected a "Message"'));var n=e.i18n,r={},i={};return Object.keys(n.placeholders).forEach((function(a){var o=n.placeholders[a];if(a.startsWith("VAR_")){var s=t.bindingParser.interpolationConfig,c="".concat(s.start).concat(o).concat(s.end),l=a.trim();r[l]=t._visitTextWithInterpolation(c,e.sourceSpan)}else i[a]=t._visitTextWithInterpolation(o,e.sourceSpan)})),new wn(r,i,e.sourceSpan,n)}},{key:"visitExpansionCase",value:function(e){return null}},{key:"visitComment",value:function(e){return null}},{key:"extractAttributes",value:function(e,t,n){var r=this,i=[],a=[];return t.forEach((function(t){var o=n[t.name];if(t.isLiteral)a.push(new fn(t.name,t.expression.source||"",t.sourceSpan,void 0,o));else{var s=r.bindingParser.createBoundElementProperty(e,t,!0,!1);i.push(gn.fromBoundElementProperty(s,o))}})),{bound:i,literal:a}}},{key:"parseAttribute",value:function(e,t,n,r,i,a,o){var s=Ys(t.name),c=t.value,l=t.sourceSpan,u=t.valueSpan?t.valueSpan.start.offset:l.start.offset,p=s.match(Vs),h=!1;if(p){if(h=!0,null!=p[1])this.bindingParser.parsePropertyBinding(p[7],c,!1,l,u,t.valueSpan,n,r);else if(p[2])if(e){var d=p[7];this.parseVariable(d,c,l,t.valueSpan,a)}else this.reportError('"let-" is only supported on ng-template elements.',l);else if(p[3]){var f=p[7];this.parseReference(f,c,l,t.valueSpan,o)}else if(p[4]){var g=[];this.bindingParser.parseEvent(p[7],c,l,t.valueSpan||l,n,g),qs(g,i)}else if(p[5])this.bindingParser.parsePropertyBinding(p[7],c,!1,l,u,t.valueSpan,n,r),this.parseAssignmentEvent(p[7],c,l,t.valueSpan,n,i);else if(p[6])this.bindingParser.parseLiteralAttr(s,c,l,u,t.valueSpan,n,r);else if(p[8])this.bindingParser.parsePropertyBinding(p[8],c,!1,l,u,t.valueSpan,n,r),this.parseAssignmentEvent(p[8],c,l,t.valueSpan,n,i);else if(p[9])this.bindingParser.parsePropertyBinding(p[9],c,!1,l,u,t.valueSpan,n,r);else if(p[10]){var m=[];this.bindingParser.parseEvent(p[10],c,l,t.valueSpan||l,n,m),qs(m,i)}}else h=this.bindingParser.parsePropertyInterpolation(s,c,l,t.valueSpan,n,r);return h}},{key:"_visitTextWithInterpolation",value:function(e,t,n){var r=Mo(e),i=this.bindingParser.parseInterpolation(r,t);return i?new dn(i,t,n):new hn(r,t)}},{key:"parseVariable",value:function(e,t,n,r,i){e.indexOf("-")>-1?this.reportError('"-" is not allowed in variable names',n):0===e.length&&this.reportError("Variable does not have a name",n),i.push(new xn(e,t,n,r))}},{key:"parseReference",value:function(e,t,n,r,i){e.indexOf("-")>-1?this.reportError('"-" is not allowed in reference names',n):0===e.length&&this.reportError("Reference does not have a name",n),i.push(new Cn(e,t,n,r))}},{key:"parseAssignmentEvent",value:function(e,t,n,r,i,a){var o=[];this.bindingParser.parseEvent("".concat(e,"Change"),"".concat(t,"=$event"),n,r||n,i,o),qs(o,a)}},{key:"reportError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.ERROR;this.errors.push(new pn(t,e,n))}}]),e}(),Hs=new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitElement",value:function(e){var t=$o(e);if(t.type===Zo.SCRIPT||t.type===Zo.STYLE||t.type===Zo.STYLESHEET)return null;var n=eo(this,e.children,null);return new vn(e.name,eo(this,e.attrs),[],[],n,[],e.sourceSpan,e.startSourceSpan,e.endSourceSpan)}},{key:"visitComment",value:function(e){return null}},{key:"visitAttribute",value:function(e){return new fn(e.name,e.value,e.sourceSpan,void 0,e.i18n)}},{key:"visitText",value:function(e){return new hn(e.value,e.sourceSpan)}},{key:"visitExpansion",value:function(e){return null}},{key:"visitExpansionCase",value:function(e){return null}}]),e}());function Ys(e){return/^data-/i.test(e)?e.substring(5):e}function qs(e,t){t.push.apply(t,Object(g.a)(e.map((function(e){return mn.fromParsedEvent(e)}))))}function Ws(){return{getUniqueId:ur(),icus:new Map}}!function(e){e[e.ELEMENT=0]="ELEMENT",e[e.TEMPLATE=1]="TEMPLATE",e[e.PROJECTION=2]="PROJECTION"}(Us||(Us={}));var Xs=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;Object(m.a)(this,e),this.index=t,this.ref=n,this.level=r,this.templateIndex=i,this.meta=a,this.registry=o,this.bindings=new Set,this.placeholders=new Map,this.isEmitted=!1,this._unresolvedCtxCount=0,this._registry=o||Ws(),this.id=this._registry.getUniqueId()}return Object(v.a)(e,[{key:"appendTag",value:function(e,t,n,r){if(!t.isVoid||!r){var i=t.isVoid||!r?t.startName:t.closeName,a={type:e,index:n,ctx:this.id,isVoid:t.isVoid,closed:r};hr(this.placeholders,i,a)}}},{key:"icus",get:function(){return this._registry.icus}},{key:"isRoot",get:function(){return 0===this.level}},{key:"isResolved",get:function(){return 0===this._unresolvedCtxCount}},{key:"getSerializedPlaceholders",value:function(){var e=new Map;return this.placeholders.forEach((function(t,n){return e.set(n,t.map(Qs))})),e}},{key:"appendBinding",value:function(e){this.bindings.add(e)}},{key:"appendIcu",value:function(e,t){hr(this._registry.icus,e,t)}},{key:"appendBoundText",value:function(e){var t=this;dr(e,this.bindings.size,this.id).forEach((function(e,n){return hr.apply(void 0,[t.placeholders,n].concat(Object(g.a)(e)))}))}},{key:"appendTemplate",value:function(e,t){this.appendTag(Us.TEMPLATE,e,t,!1),this.appendTag(Us.TEMPLATE,e,t,!0),this._unresolvedCtxCount++}},{key:"appendElement",value:function(e,t,n){this.appendTag(Us.ELEMENT,e,t,n)}},{key:"appendProjection",value:function(e,t){this.appendTag(Us.PROJECTION,e,t,!1),this.appendTag(Us.PROJECTION,e,t,!0)}},{key:"forkChildContext",value:function(t,n,r){return new e(t,this.ref,this.level+1,n,r,this._registry)}},{key:"reconcileChildContext",value:function(e){var t=this;["start","close"].forEach((function(n){var r=e.meta["".concat(n,"Name")],i=(t.placeholders.get(r)||[]).find($s(t.id,e.templateIndex));i&&(i.ctx=e.id)})),e.placeholders.forEach((function(n,r){var i=t.placeholders.get(r);if(i){var a=i.findIndex($s(e.id,e.templateIndex));if(a>=0){var o=r.startsWith("CLOSE");if(r.endsWith("NG-TEMPLATE"))i.splice.apply(i,[a+(o?0:1),0].concat(Object(g.a)(n)));else n[o?n.length-1:0].tmpl=i[a],i.splice.apply(i,[a,1].concat(Object(g.a)(n)))}else i.push.apply(i,Object(g.a)(n));t.placeholders.set(r,i)}else t.placeholders.set(r,n)})),this._unresolvedCtxCount--}}]),e}();function Ks(e,t,n,r){var i=r?"/":"";return lr("".concat(i).concat(e).concat(t),n)}function Zs(e,t,n){var r=t.index,i=t.ctx;return t.isVoid?Ks(e,r,i)+Ks(e,r,i,!0):Ks(e,r,i,n)}function $s(e,t){return function(n){return"object"==typeof n&&n.type===Us.TEMPLATE&&n.index===t&&n.ctx===e}}function Qs(e){var t,n,r=function(e,t){return Zs("#",e,t)},i=function(e,t){return Zs("*",e,t)};switch(e.type){case Us.ELEMENT:return e.closed?r(e,!0)+(e.tmpl?i(e.tmpl,!0):""):e.tmpl?i(e.tmpl)+r(e)+(e.isVoid?i(e.tmpl,!0):""):r(e);case Us.TEMPLATE:return i(e,e.closed);case Us.PROJECTION:return t=e,n=e.closed,Zs("!",t,n);default:return e}}var Js=new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitText",value:function(e){return e.value}},{key:"visitContainer",value:function(e){var t=this;return e.children.map((function(e){return e.visit(t)})).join("")}},{key:"visitIcu",value:function(e){var t=this,n=Object.keys(e.cases).map((function(n){return"".concat(n," {").concat(e.cases[n].visit(t),"}")}));return"{".concat(e.expressionPlaceholder,", ").concat(e.type,", ").concat(n.join(" "),"}")}},{key:"visitTagPlaceholder",value:function(e){var t=this;return e.isVoid?this.formatPh(e.startName):"".concat(this.formatPh(e.startName)).concat(e.children.map((function(e){return e.visit(t)})).join("")).concat(this.formatPh(e.closeName))}},{key:"visitPlaceholder",value:function(e){return this.formatPh(e.name)}},{key:"visitIcuPlaceholder",value:function(e,t){return this.formatPh(e.name)}},{key:"formatPh",value:function(e){return"{".concat(gr(e,!1),"}")}}]),e}());function ec(e){return e.visit(Js)}var tc={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},nc=function(){function e(){Object(m.a)(this,e),this._placeHolderNameCounts={},this._signatureToName={}}return Object(v.a)(e,[{key:"getStartTagPlaceholderName",value:function(e,t,n){var r=this._hashTag(e,t,n);if(this._signatureToName[r])return this._signatureToName[r];var i=e.toUpperCase(),a=tc[i]||"TAG_".concat(i),o=this._generateUniqueName(n?a:"START_".concat(a));return this._signatureToName[r]=o,o}},{key:"getCloseTagPlaceholderName",value:function(e){var t=this._hashClosingTag(e);if(this._signatureToName[t])return this._signatureToName[t];var n=e.toUpperCase(),r=tc[n]||"TAG_".concat(n),i=this._generateUniqueName("CLOSE_".concat(r));return this._signatureToName[t]=i,i}},{key:"getPlaceholderName",value:function(e,t){var n=e.toUpperCase(),r="PH: ".concat(n,"=").concat(t);if(this._signatureToName[r])return this._signatureToName[r];var i=this._generateUniqueName(n);return this._signatureToName[r]=i,i}},{key:"getUniquePlaceholder",value:function(e){return this._generateUniqueName(e.toUpperCase())}},{key:"_hashTag",value:function(e,t,n){return"<".concat(e)+Object.keys(t).sort().map((function(e){return" ".concat(e,"=").concat(t[e])})).join("")+(n?"/>":"></".concat(e,">"))}},{key:"_hashClosingTag",value:function(e){return this._hashTag("/".concat(e),{},!1)}},{key:"_generateUniqueName",value:function(e){if(!this._placeHolderNameCounts.hasOwnProperty(e))return this._placeHolderNameCounts[e]=1,e;var t=this._placeHolderNameCounts[e];return this._placeHolderNameCounts[e]=t+1,"".concat(e,"_").concat(t)}}]),e}(),rc=new Ps(new fs);function ic(e){var t=new oc(rc,e);return function(e,n,r,i,a){return t.toI18nMessage(e,n,r,i,a)}}function ac(e,t){return t}var oc=function(){function e(t,n){Object(m.a)(this,e),this._expressionParser=t,this._interpolationConfig=n}return Object(v.a)(e,[{key:"toI18nMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0,a={isIcu:1==e.length&&e[0]instanceof Ka,icuDepth:0,placeholderRegistry:new nc,placeholderToContent:{},placeholderToMessage:{},visitNodeFn:i||ac},o=eo(this,e,a);return new Sn(o,a.placeholderToContent,a.placeholderToMessage,t,n,r)}},{key:"visitElement",value:function(e,t){var n=eo(this,e.children,t),r={};e.attrs.forEach((function(e){r[e.name]=e.value}));var i=I(e.name).isVoid,a=t.placeholderRegistry.getStartTagPlaceholderName(e.name,r,i);t.placeholderToContent[a]=e.sourceSpan.toString();var o="";i||(o=t.placeholderRegistry.getCloseTagPlaceholderName(e.name),t.placeholderToContent[o]="</".concat(e.name,">"));var s=new In(e.name,r,a,o,n,i,e.sourceSpan,e.startSourceSpan,e.endSourceSpan);return t.visitNodeFn(e,s)}},{key:"visitAttribute",value:function(e,t){var n=this._visitTextWithInterpolation(e.value,e.sourceSpan,t);return t.visitNodeFn(e,n)}},{key:"visitText",value:function(e,t){var n=this._visitTextWithInterpolation(e.value,e.sourceSpan,t);return t.visitNodeFn(e,n)}},{key:"visitComment",value:function(e,t){return null}},{key:"visitExpansion",value:function(e,t){var n=this;t.icuDepth++;var r={},i=new _n(e.switchValue,e.type,r,e.sourceSpan);if(e.cases.forEach((function(e){r[e.value]=new En(e.expression.map((function(e){return e.visit(n,t)})),e.expSourceSpan)})),t.icuDepth--,t.isIcu||t.icuDepth>0){var a=t.placeholderRegistry.getUniquePlaceholder("VAR_".concat(e.type));return i.expressionPlaceholder=a,t.placeholderToContent[a]=e.switchValue,t.visitNodeFn(e,i)}var o=t.placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString());t.placeholderToMessage[o]=this.toI18nMessage([e],"","","",void 0);var s=new Tn(i,o,e.sourceSpan);return t.visitNodeFn(e,s)}},{key:"visitExpansionCase",value:function(e,t){throw new Error("Unreachable code")}},{key:"_visitTextWithInterpolation",value:function(e,t,n){var r=this._expressionParser.splitInterpolation(e,t.start.toString(),this._interpolationConfig);if(!r)return new On(e,t);for(var i=[],a=new En(i,t),o=this._interpolationConfig,s=o.start,c=o.end,l=0;l<r.strings.length-1;l++){var u=r.expressions[l],p=u.split(cc)[2]||"INTERPOLATION",h=n.placeholderRegistry.getPlaceholderName(p,u);if(r.strings[l].length){var d=sc(t,r.stringSpans[l]);i.push(new On(r.strings[l],d))}var f=sc(t,r.expressionsSpans[l]);i.push(new Pn(u,h,f)),n.placeholderToContent[h]=s+u+c}var g=r.strings.length-1;if(r.strings[g].length){var m=sc(t,r.stringSpans[g]);i.push(new On(r.strings[g],m))}return a}}]),e}();function sc(e,t){var n=t.start,r=t.end;return new un(e.fullStart.moveBy(n),e.fullStart.moveBy(r))}var cc=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;var lc=function(e,t){return e instanceof Wa&&(t instanceof Tn&&e.i18n instanceof Sn&&(t.previousMessage=e.i18n),e.i18n=t),t},uc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(m.a)(this,e),this.interpolationConfig=t,this.keepI18nAttrs=n,this.enableI18nLegacyMessageIdFormat=r,this.hasI18nMeta=!1,this._createI18nMessage=ic(this.interpolationConfig)}return Object(v.a)(e,[{key:"_generateI18nMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=this._parseMetadata(t),i=r.meaning,a=r.description,o=r.customId,s=this._createI18nMessage(e,i,a,o,n);return this._setMessageId(s,t),this._setLegacyIds(s,t),s}},{key:"visitElement",value:function(e){if(function(e){return e.attrs.some((function(e){return ir(e.name)}))}(e)){this.hasI18nMeta=!0;var t,n=[],r={},i=Object(u.a)(e.attrs);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.name===tr){var o=e.i18n||a.value,s=this._generateI18nMessage(e.children,o,lc);s.nodes.length&&(e.i18n=s)}else if(a.name.startsWith(nr)){r[a.name.slice(nr.length)]=a.value}else n.push(a)}}catch(d){i.e(d)}finally{i.f()}if(Object.keys(r).length){var c,l=Object(u.a)(n);try{for(l.s();!(c=l.n()).done;){var p=c.value,h=r[p.name];void 0!==h&&p.value&&(p.i18n=this._generateI18nMessage([p],p.i18n||h))}}catch(d){l.e(d)}finally{l.f()}}this.keepI18nAttrs||(e.attrs=n)}return eo(this,e.children,e.i18n),e}},{key:"visitExpansion",value:function(e,t){var n,r=e.i18n;if(this.hasI18nMeta=!0,r instanceof Tn){var i=r.name;cr(n=this._generateI18nMessage([e],r)).name=i}else n=this._generateI18nMessage([e],t||r);return e.i18n=n,e}},{key:"visitText",value:function(e){return e}},{key:"visitAttribute",value:function(e){return e}},{key:"visitComment",value:function(e){return e}},{key:"visitExpansionCase",value:function(e){return e}},{key:"_parseMetadata",value:function(e){return"string"==typeof e?function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(r=r.trim()){var i,a=r.indexOf(pc),o=r.indexOf("|"),s=a>-1?[r.slice(0,a),r.slice(a+2)]:[r,""],c=Object(l.a)(s,2);i=c[0],e=c[1];var u=o>-1?[i.slice(0,o),i.slice(o+1)]:["",i],p=Object(l.a)(u,2);t=p[0],n=p[1]}return{customId:e,meaning:t,description:n}}(e):e instanceof Sn?e:{}}},{key:"_setMessageId",value:function(e,t){e.id||(e.id=t instanceof Sn&&t.id||Mn(e))}},{key:"_setLegacyIds",value:function(e,t){if(this.enableI18nLegacyMessageIdFormat)e.legacyIds=[An(e),Dn(e)];else if("string"!=typeof t){var n=t instanceof Sn?t:t instanceof Tn?t.previousMessage:void 0;e.legacyIds=n?n.legacyIds:[]}}}]),e}(),pc="@@";function hc(e){var t=[];return e.description&&t.push({tagName:"desc",text:e.description}),e.meaning&&t.push({tagName:"meaning",text:e.meaning}),0==t.length?null:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Ge(e)}(t)}function dc(e,t,n,r){var i=[it(function(e){return e.nodes.map((function(e){return e.visit(fc,null)})).join("")}(t))];Object.keys(r).length&&i.push(si(r,!0));var a=n.set(Ze("goog.getMsg").callFn(i)).toConstDecl(),o=hc(t);return null!==o&&a.addLeadingComment(o),[a,new We(e.set(n))]}var fc=new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"formatPh",value:function(e){return"{$".concat(gr(e),"}")}},{key:"visitText",value:function(e){return e.value}},{key:"visitContainer",value:function(e){var t=this;return e.children.map((function(e){return e.visit(t)})).join("")}},{key:"visitIcu",value:function(e){return ec(e)}},{key:"visitTagPlaceholder",value:function(e){var t=this;return e.isVoid?this.formatPh(e.startName):"".concat(this.formatPh(e.startName)).concat(e.children.map((function(e){return e.visit(t)})).join("")).concat(this.formatPh(e.closeName))}},{key:"visitPlaceholder",value:function(e){return this.formatPh(e.name)}},{key:"visitIcuPlaceholder",value:function(e,t){return this.formatPh(e.name)}}]),e}());function gc(e,t,n){var r=function(e){var t=[];return e.nodes.forEach((function(e){return e.visit(mc,t)})),function(e){var t=[],n=[];e[0]instanceof ye&&t.push(vc(e[0].sourceSpan.start));for(var r=0;r<e.length;r++){var i=e[r];i instanceof be?t.push(i):(n.push(i),e[r-1]instanceof ye&&t.push(vc(e[r-1].sourceSpan.end)))}e[e.length-1]instanceof ye&&t.push(vc(e[e.length-1].sourceSpan.end));return{messageParts:t,placeHolders:n}}(t)}(t),i=r.messageParts,a=r.placeHolders,o=function(e){var t=e.nodes[0],n=e.nodes[e.nodes.length-1];return new un(t.sourceSpan.start,n.sourceSpan.end,t.sourceSpan.fullStart,t.sourceSpan.details)}(t),s=a.map((function(e){return n[e.text]})),c=function(e,t,n,r,i){return new xe(e,t,n,r,i)}(t,i,a,s,o),l=e.set(c);return[new We(l)]}var mc=new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"visitText",value:function(e,t){t[t.length-1]instanceof be?t[t.length-1].text+=e.value:t.push(new be(e.value,e.sourceSpan))}},{key:"visitContainer",value:function(e,t){var n=this;e.children.forEach((function(e){return e.visit(n,t)}))}},{key:"visitIcu",value:function(e,t){t.push(new be(ec(e),e.sourceSpan))}},{key:"visitTagPlaceholder",value:function(e,t){var n,r,i=this;t.push(this.createPlaceholderPiece(e.startName,null!==(n=e.startSourceSpan)&&void 0!==n?n:e.sourceSpan)),e.isVoid||(e.children.forEach((function(e){return e.visit(i,t)})),t.push(this.createPlaceholderPiece(e.closeName,null!==(r=e.endSourceSpan)&&void 0!==r?r:e.sourceSpan)))}},{key:"visitPlaceholder",value:function(e,t){t.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}},{key:"visitIcuPlaceholder",value:function(e,t){t.push(this.createPlaceholderPiece(e.name,e.sourceSpan))}},{key:"createPlaceholderPiece",value:function(e,t){return new ye(gr(e,!1),t)}}]),e}());function vc(e){return new be("",new un(e,e))}var bc="ngProjectAs",yc=new Map([["window",Rt.resolveWindow],["document",Rt.resolveDocument],["body",Rt.resolveBody]]),xc=[" ","\n","\r","\t"];function Cc(e,t){return rt(Ze(Cr).bitwiseAnd(it(e),null,!1),t)}function wc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.type,i=e.name,a=e.target,o=e.phase,s=e.handler;if(a&&!yc.has(a))throw new Error("Unexpected global target '".concat(a,"' defined for '").concat(i,"' event.\n        Supported list of global targets: ").concat(Array.from(yc.keys()),"."));var c="$event",l=new Set,u=null===n||0===n.bindingLevel?Ze(xr):n.getOrCreateSharedContextVar(0),p=Qi(n,u,s,"b",(function(){return ut("Unexpected interpolation")}),e.handlerSpan,l),h=[];n&&(h.push.apply(h,Object(g.a)(n.restoreViewStatement())),h.push.apply(h,Object(g.a)(n.variableDeclarations()))),h.push.apply(h,Object(g.a)(p.render3Stmts));var d=1===r?zt(i,o):i,f=t&&Tt(t),m=[];l.has(c)&&m.push(new Ae(c,Z));var v=nt(m,h,$,null,f),b=[it(d),v];return a&&b.push(it(!1),$e(yc.get(a))),b}var kc=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,p=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0,g=arguments.length>13?arguments[13]:void 0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:{prepareStatements:[],constExpressions:[]};Object(m.a)(this,e),this.constantPool=t,this.level=i,this.contextName=a,this.i18nContext=o,this.templateIndex=s,this.templateName=c,this.directiveMatcher=l,this.directives=u,this.pipeTypeByName=p,this.pipes=h,this._namespace=d,this.i18nUseExternalIds=g,this._constants=v,this._dataIndex=0,this._bindingContext=0,this._prefixCode=[],this._creationCodeFns=[],this._updateCodeFns=[],this._currentIndex=0,this._tempVariables=[],this._nestedTemplateFns=[],this._unsupported=kr,this.i18n=null,this._pureFunctionSlots=0,this._bindingSlots=0,this._ngContentReservedSlots=[],this._ngContentSelectorsOffset=0,this._implicitReceiverExpr=null,this.visitReference=Sr,this.visitVariable=Sr,this.visitTextAttribute=Sr,this.visitBoundAttribute=Sr,this.visitBoundEvent=Sr,this._bindingScope=n.nestedScope(i),this.fileBasedI18nSuffix=f.replace(/[^A-Za-z0-9]/g,"_")+"_",this._valueConverter=new Sc(t,(function(){return r.allocateDataSlot()}),(function(e){return r.allocatePureFunctionSlots(e)}),(function(e,t,n,i){var a=p.get(e);a&&r.pipes.add(a),r._bindingScope.set(r.level,t,i),r.creationInstruction(null,Rt.pipe,[it(n),it(e)])}))}return Object(v.a)(e,[{key:"buildTemplateFunction",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;this._ngContentSelectorsOffset=r,this._namespace!==Rt.namespaceHTML&&this.creationInstruction(null,this._namespace),t.forEach((function(e){return n.registerContextVariables(e)}));var a=this.i18nContext||ar(i)&&!or(i)&&!(Bc(e)&&e[0].i18n===i),o=zc(e);if(a&&this.i18nStart(null,i,o),kn(this,e),this._pureFunctionSlots+=this._bindingSlots,this._valueConverter.updatePipeSlotOffsets(this._bindingSlots),this._nestedTemplateFns.forEach((function(e){return e()})),0===this.level&&this._ngContentReservedSlots.length){var s=[];if(this._ngContentReservedSlots.length>1||"*"!==this._ngContentReservedSlots[0]){var c=this._ngContentReservedSlots.map((function(e){return"*"!==e?U(e):e}));s.push(this.constantPool.getConstLiteral(Or(c),!0))}this.creationInstruction(null,Rt.projectionDef,s,!0)}a&&this.i18nEnd(null,o);var l=this._creationCodeFns.map((function(e){return e()})),u=this._updateCodeFns.map((function(e){return e()})),p=this._bindingScope.viewSnapshotStatements(),h=this._bindingScope.variableDeclarations().concat(this._tempVariables),d=l.length>0?[Cc(1,p.concat(l))]:[],f=u.length>0?[Cc(2,h.concat(u))]:[];return nt([new Ae(Cr,J),new Ae(xr,null)],[].concat(Object(g.a)(this._prefixCode),d,f),$,null,this.templateName)}},{key:"getLocal",value:function(e){return this._bindingScope.get(e)}},{key:"notifyImplicitReceiverUse",value:function(){this._bindingScope.notifyImplicitReceiverUse()}},{key:"i18nTranslate",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=r||this.i18nGenerateMainBlockVar(),o=this.i18nGenerateClosureVar(e.id),s=Gc(e,a,o,n,i);return(t=this._constants.prepareStatements).push.apply(t,Object(g.a)(s)),a}},{key:"registerContextVariables",value:function(e){var t=this._bindingScope.freshReferenceName(),n=this.level,r=Ze(e.name+t);this._bindingScope.set(n,e.name,r,1,(function(t,i){var a;if(t.bindingLevel===n)a=Ze(xr);else{var o=t.getSharedContextName(n);a=o||Ic(i)}return[r.set(a.prop(e.value||"$implicit")).toConstDecl()]}))}},{key:"i18nAppendBindings",value:function(e){var t=this;e.length>0&&e.forEach((function(e){return t.i18n.appendBinding(e)}))}},{key:"i18nBindProps",value:function(e){var t=this,n={};return Object.keys(e).forEach((function(r){var i=e[r];if(i instanceof hn)n[r]=it(i.value);else{var a=i.value.visit(t._valueConverter);if(t.allocateBindingSlots(a),a instanceof Ai){var o=a.strings,s=a.expressions,c=t.i18n,l=c.id,u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e.length)return"";for(var r="",i=e.length-1,a=0;a<i;a++)r+="".concat(e[a]).concat(lr(t+a,n));return r+e[i]}(o,c.bindings.size,l);t.i18nAppendBindings(s),n[r]=it(u)}}})),n}},{key:"i18nGenerateMainBlockVar",value:function(){return Ze(this.constantPool.uniqueName("i18n_"))}},{key:"i18nGenerateClosureVar",value:function(e){var t,n=this.fileBasedI18nSuffix.toUpperCase();if(this.i18nUseExternalIds){var r=mr("EXTERNAL_"),i=this.constantPool.uniqueName(n);t="".concat(r).concat(Tt(e),"$$").concat(i)}else{var a=mr(n);t=this.constantPool.uniqueName(a)}return Ze(t)}},{key:"i18nUpdateRef",value:function(e){var t=e.icus,n=e.meta,r=e.isRoot,i=e.isResolved,a=e.isEmitted;if(r&&i&&!a&&!or(n)){e.isEmitted=!0;var o,s=e.getSerializedPlaceholders(),c={},l=s.size?pr(s):{};t.size&&t.forEach((function(e,t){if(1===e.length)l[t]=e[0];else{var n=lr("".concat("I18N_EXP_").concat(t));l[t]=it(n),c[t]=et(e)}})),(Array.from(s.values()).some((function(e){return e.length>1}))||Object.keys(c).length)&&(o=function(e){var t=[e];return Object.keys(c).length&&t.push(si(c,!0)),_c(null,Rt.i18nPostprocess,t)}),this.i18nTranslate(n,l,e.ref,o)}}},{key:"i18nStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=this.allocateDataSlot();this.i18n=this.i18nContext?this.i18nContext.forkChildContext(r,this.templateIndex,t):new Xs(r,this.i18nGenerateMainBlockVar(),0,this.templateIndex,t);var i=this.i18n,a=i.id,o=i.ref,s=[it(r),this.addToConsts(o)];a>0&&s.push(it(a)),this.creationInstruction(e,n?Rt.i18n:Rt.i18nStart,s)}},{key:"i18nEnd",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;if(!this.i18n)throw new Error("i18nEnd is executed with no i18n context present");this.i18nContext?(this.i18nContext.reconcileChildContext(this.i18n),this.i18nUpdateRef(this.i18nContext)):this.i18nUpdateRef(this.i18n);var r=this.i18n,i=r.index,a=r.bindings;if(a.size){var o=[];a.forEach((function(n){o.push({sourceSpan:t,value:function(){return e.convertPropertyBinding(n)}})})),this.updateInstructionChainWithAdvance(this.getConstCount()-1,Rt.i18nExp,o),this.updateInstruction(t,Rt.i18nApply,[it(i)])}n||this.creationInstruction(t,Rt.i18nEnd),this.i18n=null}},{key:"i18nAttributesInstruction",value:function(e,t,n){var r=this,i=!1,a=[],o=[];if(t.forEach((function(e){var t=e.i18n;if(e instanceof fn)a.push(it(e.name),r.i18nTranslate(t));else{var s=e.value.visit(r._valueConverter);if(r.allocateBindingSlots(s),s instanceof Ai){var c=pr(dr(t));a.push(it(e.name),r.i18nTranslate(t,c)),s.expressions.forEach((function(e){i=!0,o.push({sourceSpan:n,value:function(){return r.convertPropertyBinding(e)}})}))}}})),o.length>0&&this.updateInstructionChainWithAdvance(e,Rt.i18nExp,o),a.length>0){var s=it(this.allocateDataSlot()),c=this.addToConsts(et(a));this.creationInstruction(n,Rt.i18nAttributes,[s,c]),i&&this.updateInstruction(n,Rt.i18nApply,[s])}}},{key:"getNamespaceInstruction",value:function(e){switch(e){case"math":return Rt.namespaceMathML;case"svg":return Rt.namespaceSVG;default:return Rt.namespaceHTML}}},{key:"addNamespaceInstruction",value:function(e,t){this._namespace=e,this.creationInstruction(t.sourceSpan,e)}},{key:"interpolatedUpdateInstruction",value:function(e,t,n,r,i,a){var o=this;this.updateInstructionWithAdvance(t,r.sourceSpan,e,(function(){return[it(n)].concat(Object(g.a)(o.getUpdateInstructionArguments(i)),Object(g.a)(a))}))}},{key:"visitContent",value:function(e){var t=this.allocateDataSlot(),n=this._ngContentSelectorsOffset+this._ngContentReservedSlots.length,r=[it(t)];this._ngContentReservedSlots.push(e.selector);var i=e.attributes.filter((function(e){return"select"!==e.name.toLowerCase()})),a=this.getAttributeExpressions(i,[],[]);a.length>0?r.push(it(n),et(a)):0!==n&&r.push(it(n)),this.creationInstruction(e.sourceSpan,Rt.projection,r),this.i18n&&this.i18n.appendProjection(e.i18n,t)}},{key:"visitElement",value:function(e){var t,n=this,r=this.allocateDataSlot(),i=new ls(null),a=!1,o=ar(e.i18n)&&!or(e.i18n),s=[],c=[],p=b(e.name),h=Object(l.a)(p,2),d=h[0],f=h[1],g=y(e.name),m=Object(u.a)(e.attributes);try{for(m.s();!(t=m.n()).done;){var v=t.value,x=v.name,C=v.value;"ngNonBindable"===x?a=!0:"style"===x?i.registerStyleAttr(C):"class"===x?i.registerClassAttr(C):(v.i18n?s:c).push(v)}}catch(V){m.e(V)}finally{m.f()}this.matchDirectives(e.name,e);var w=[it(r)];g||w.push(it(f));var k=[];e.inputs.forEach((function(e){i.registerBoundInput(e)||(0===e.type&&e.i18n?s.push(e):k.push(e))}));var S=this.getAttributeExpressions(c,k,e.outputs,i,[],s);w.push(this.addAttrsToConsts(S));var O=this.prepareRefsArray(e.references);w.push(this.addToConsts(O));var E=this._namespace,_=this.getNamespaceInstruction(d);_!==E&&this.addNamespaceInstruction(_,e),this.i18n&&this.i18n.appendElement(e.i18n,r);var I=!o&&this.i18n?!zc(e.children):e.children.length>0,P=!i.hasBindingsWithPipes&&0===e.outputs.length&&0===s.length&&!I,T=!P&&zc(e.children);if(P)this.creationInstruction(e.sourceSpan,g?Rt.elementContainer:Rt.element,_r(w));else{if(this.creationInstruction(e.sourceSpan,g?Rt.elementContainerStart:Rt.elementStart,_r(w)),a&&this.creationInstruction(e.sourceSpan,Rt.disableBindings),s.length>0&&this.i18nAttributesInstruction(r,s,e.sourceSpan),e.outputs.length>0){var A=e.outputs.map((function(t){return{sourceSpan:t.sourceSpan,params:n.prepareListenerParameter(e.name,t,r)}}));this.creationInstructionChain(Rt.listener,A)}o&&this.i18nStart(e.sourceSpan,e.i18n,T)}for(var M=i.buildUpdateLevelInstructions(this._valueConverter),D=M.length-1,j=0;j<=D;j++){var N=M[j];this._bindingSlots+=this.processStylingUpdateInstruction(r,N)}var R=it(void 0),L=[],F=[];if(k.forEach((function(e){var t=e.type;if(4===t){var i=e.value.visit(n._valueConverter),a=!(i instanceof Ii)||!!i.value;n.allocateBindingSlots(i),L.push({name:Vt(e.name),sourceSpan:e.sourceSpan,value:function(){return a?n.convertPropertyBinding(i):R}})}else{if(e.i18n)return;var o=e.value.visit(n._valueConverter);if(void 0!==o){var s=[],c=b(e.name),u=Object(l.a)(c,2),p=u[0],h=u[1],d=1===t,f=Fc(e.securityContext,d);if(f&&s.push(f),p){var g=it(p);f?s.push(g):s.push(it(null),g)}if(n.allocateBindingSlots(o),0===t)o instanceof Ai?n.interpolatedUpdateInstruction(Nc(o),r,h,e,o,s):L.push({name:h,sourceSpan:e.sourceSpan,value:function(){return n.convertPropertyBinding(o)},params:s});else if(1===t)if(o instanceof Ai&&Nr(o)>1)n.interpolatedUpdateInstruction(function(e){switch(Nr(e)){case 3:return Rt.attributeInterpolate1;case 5:return Rt.attributeInterpolate2;case 7:return Rt.attributeInterpolate3;case 9:return Rt.attributeInterpolate4;case 11:return Rt.attributeInterpolate5;case 13:return Rt.attributeInterpolate6;case 15:return Rt.attributeInterpolate7;case 17:return Rt.attributeInterpolate8;default:return Rt.attributeInterpolateV}}(o),r,h,e,o,s);else{var m=o instanceof Ai?o.expressions[0]:o;F.push({name:h,sourceSpan:e.sourceSpan,value:function(){return n.convertPropertyBinding(m)},params:s})}else n.updateInstructionWithAdvance(r,e.sourceSpan,Rt.classProp,(function(){return[it(r),it(h),n.convertPropertyBinding(o)].concat(s)}))}}})),L.length>0&&this.updateInstructionChainWithAdvance(r,Rt.property,L),F.length>0&&this.updateInstructionChainWithAdvance(r,Rt.attribute,F),kn(this,e.children),!o&&this.i18n&&this.i18n.appendElement(e.i18n,r,!0),!P){var B=e.endSourceSpan||e.sourceSpan;o&&this.i18nEnd(B,T),a&&this.creationInstruction(B,Rt.enableBindings),this.creationInstruction(B,g?Rt.elementContainerEnd:Rt.elementEnd)}}},{key:"visitTemplate",value:function(t){var n=this,r="ng-template",i=this.allocateDataSlot();this.i18n&&this.i18n.appendTemplate(t.i18n,i);var a=Tt(t.tagName||""),o="".concat(this.contextName).concat(a?"_"+a:"","_").concat(i),s="".concat(o,"_Template"),c=[it(i),Ze(s),it(t.tagName?b(t.tagName)[1]:t.tagName)];this.matchDirectives(r,t);var u=bt(t.attributes,sr),p=Object(l.a)(u,2),h=p[0],d=p[1],f=this.getAttributeExpressions(d,t.inputs,t.outputs,void 0,t.templateAttrs,h);if(c.push(this.addAttrsToConsts(f)),t.references&&t.references.length){var m=this.prepareRefsArray(t.references);c.push(this.addToConsts(m)),c.push($e(Rt.templateRefExtractor))}var v=new e(this.constantPool,this._bindingScope,this.level+1,o,this.i18n,i,s,this.directiveMatcher,this.directives,this.pipeTypeByName,this.pipes,this._namespace,this.fileBasedI18nSuffix,this.i18nUseExternalIds,this._constants);if(this._nestedTemplateFns.push((function(){var e,r=v.buildTemplateFunction(t.children,t.variables,n._ngContentReservedSlots.length+n._ngContentSelectorsOffset,t.i18n);(n.constantPool.statements.push(r.toDeclStmt(s)),v._ngContentReservedSlots.length)&&(e=n._ngContentReservedSlots).push.apply(e,Object(g.a)(v._ngContentReservedSlots))})),this.creationInstruction(t.sourceSpan,Rt.templateCreate,(function(){return c.splice(2,0,it(v.getConstCount()),it(v.getVarCount())),_r(c)})),this.templatePropertyBindings(i,t.templateAttrs),t.tagName===r){var y=bt(t.inputs,sr),x=Object(l.a)(y,2),C=x[0],w=x[1],k=[].concat(Object(g.a)(h),Object(g.a)(C));if(k.length>0&&this.i18nAttributesInstruction(i,k,t.sourceSpan),w.length>0&&this.templatePropertyBindings(i,w),t.outputs.length>0){var S=t.outputs.map((function(e){return{sourceSpan:e.sourceSpan,params:n.prepareListenerParameter("ng_template",e,i)}}));this.creationInstructionChain(Rt.listener,S)}}}},{key:"visitBoundText",value:function(e){var t=this;if(this.i18n){var n=e.value.visit(this._valueConverter);return this.allocateBindingSlots(n),void(n instanceof Ai&&(this.i18n.appendBoundText(e.i18n),this.i18nAppendBindings(n.expressions)))}var r=this.allocateDataSlot();this.creationInstruction(e.sourceSpan,Rt.text,[it(r)]);var i=e.value.visit(this._valueConverter);this.allocateBindingSlots(i),i instanceof Ai?this.updateInstructionWithAdvance(r,e.sourceSpan,function(e){switch(Nr(e)){case 1:return Rt.textInterpolate;case 3:return Rt.textInterpolate1;case 5:return Rt.textInterpolate2;case 7:return Rt.textInterpolate3;case 9:return Rt.textInterpolate4;case 11:return Rt.textInterpolate5;case 13:return Rt.textInterpolate6;case 15:return Rt.textInterpolate7;case 17:return Rt.textInterpolate8;default:return Rt.textInterpolateV}}(i),(function(){return t.getUpdateInstructionArguments(i)})):ut("Text nodes should be interpolated and never bound directly.")}},{key:"visitText",value:function(e){this.i18n||this.creationInstruction(e.sourceSpan,Rt.text,[it(this.allocateDataSlot()),it(e.value)])}},{key:"visitIcu",value:function(e){var t=!1;this.i18n||(t=!0,this.i18nStart(null,e.i18n,!0));var n=this.i18n,r=this.i18nBindProps(e.vars),i=this.i18nBindProps(e.placeholders),a=e.i18n,o=function(e){var t=fr(Object.assign(Object.assign({},r),i),!1);return _c(null,Rt.i18nPostprocess,[e,si(t,!0)])};if(or(n.meta))this.i18nTranslate(a,{},n.ref,o);else{var s=this.i18nTranslate(a,{},void 0,o);n.appendIcu(cr(a).name,s)}return t&&this.i18nEnd(null,!0),null}},{key:"allocateDataSlot",value:function(){return this._dataIndex++}},{key:"getConstCount",value:function(){return this._dataIndex}},{key:"getVarCount",value:function(){return this._pureFunctionSlots}},{key:"getConsts",value:function(){return this._constants}},{key:"getNgContentSelectors",value:function(){return this._ngContentReservedSlots.length?this.constantPool.getConstLiteral(Or(this._ngContentReservedSlots),!0):null}},{key:"bindingContext",value:function(){return"".concat(this._bindingContext++)}},{key:"templatePropertyBindings",value:function(e,t){var n=this,r=[];t.forEach((function(t){if(t instanceof gn){var i=t.value.visit(n._valueConverter);if(void 0!==i)if(n.allocateBindingSlots(i),i instanceof Ai){n.interpolatedUpdateInstruction(Nc(i),e,t.name,t,i,[])}else r.push({name:t.name,sourceSpan:t.sourceSpan,value:function(){return n.convertPropertyBinding(i)}})}})),r.length>0&&this.updateInstructionChainWithAdvance(e,Rt.property,r)}},{key:"instructionFn",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e[i?"unshift":"push"]((function(){var e=Array.isArray(r)?r:r();return _c(t,n,e).toStmt()}))}},{key:"processStylingUpdateInstruction",value:function(e,t){var n=this,r=0;if(t){var i=[];t.calls.forEach((function(e){r+=e.allocateBindingSlots,i.push({sourceSpan:e.sourceSpan,value:function(){return e.params((function(t){return e.supportsInterpolation&&t instanceof Ai?n.getUpdateInstructionArguments(t):n.convertPropertyBinding(t)}))}})})),this.updateInstructionChainWithAdvance(e,t.reference,i)}return r}},{key:"creationInstruction",value:function(e,t,n,r){this.instructionFn(this._creationCodeFns,e,t,n||[],r)}},{key:"creationInstructionChain",value:function(e,t){var n=t.length?t[0].sourceSpan:null;this._creationCodeFns.push((function(){return jr(e,t.map((function(e){return e.params()})),n).toStmt()}))}},{key:"updateInstructionWithAdvance",value:function(e,t,n,r){this.addAdvanceInstructionIfNecessary(e,t),this.updateInstruction(t,n,r)}},{key:"updateInstruction",value:function(e,t,n){this.instructionFn(this._updateCodeFns,e,t,n||[])}},{key:"updateInstructionChain",value:function(e,t){var n=t.length?t[0].sourceSpan:null;this._updateCodeFns.push((function(){var r=t.map((function(e){var t=e.value(),n=Array.isArray(t)?t:[t];return e.params&&n.push.apply(n,Object(g.a)(e.params)),e.name&&n.unshift(it(e.name)),n}));return jr(e,r,n).toStmt()}))}},{key:"updateInstructionChainWithAdvance",value:function(e,t,n){this.addAdvanceInstructionIfNecessary(e,n.length?n[0].sourceSpan:null),this.updateInstructionChain(t,n)}},{key:"addAdvanceInstructionIfNecessary",value:function(e,t){if(e!==this._currentIndex){var n=e-this._currentIndex;if(n<1)throw new Error("advance instruction can only go forwards");this.instructionFn(this._updateCodeFns,t,Rt.advance,[it(n)]),this._currentIndex=e}}},{key:"allocatePureFunctionSlots",value:function(e){var t=this._pureFunctionSlots;return this._pureFunctionSlots+=e,t}},{key:"allocateBindingSlots",value:function(e){this._bindingSlots+=e instanceof Ai?e.expressions.length:1}},{key:"getImplicitReceiverExpr",value:function(){return this._implicitReceiverExpr?this._implicitReceiverExpr:this._implicitReceiverExpr=0===this.level?Ze(xr):this._bindingScope.getOrCreateSharedContextVar(0)}},{key:"convertPropertyBinding",value:function(e){var t,n=ra(this,this.getImplicitReceiverExpr(),e,this.bindingContext(),ea.Expression,(function(){return ut("Unexpected interpolation")})),r=n.currValExpr;return(t=this._tempVariables).push.apply(t,Object(g.a)(n.stmts)),r}},{key:"getUpdateInstructionArguments",value:function(e){var t,n=function(e,t,n,r){var i=new ua(e,t,r,void 0),a=n.visit(i,ta.Expression);i.usesImplicitReceiver&&e.notifyImplicitReceiverUse();var o=ia(i,r),s=a.args.slice(1);if(n instanceof Ai){var c=n.strings;3===s.length&&""===c[0]&&""===c[1]?s=[s[1]]:s.length>=19&&(s=[et(s)])}return{stmts:o,args:s}}(this,this.getImplicitReceiverExpr(),e,this.bindingContext()),r=n.args,i=n.stmts;return(t=this._tempVariables).push.apply(t,Object(g.a)(i)),r}},{key:"matchDirectives",value:function(e,t){var n=this;if(this.directiveMatcher){var r=Dc(e,Dr(t));this.directiveMatcher.match(r,(function(e,t){n.directives.add(t)}))}}},{key:"getAttributeExpressions",value:function(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=new Set,c=[];function l(e,t){"string"==typeof e?s.has(e)||(c.push.apply(c,Object(g.a)(Tc(e))),void 0!==t&&c.push(t),s.add(e)):c.push(it(e))}if(e.forEach((function(e){e.name===bc&&(i=e),c.push.apply(c,Object(g.a)(Tc(e.name)).concat([Or(e.value)]))})),i&&c.push.apply(c,Object(g.a)(jc(i))),r&&r.populateInitialStylingAttrs(c),t.length||n.length){for(var u=c.length,p=0;p<t.length;p++){var h=t[p];4!==h.type&&1!==h.type&&l(h.name)}for(var d=0;d<n.length;d++){var f=n[d];1!==f.type&&l(f.name)}c.length!==u&&c.splice(u,0,it(3))}return a.length&&(c.push(it(4)),a.forEach((function(e){return l(e.name)}))),o.length&&(c.push(it(6)),o.forEach((function(e){return l(e.name)}))),c}},{key:"addToConsts",value:function(e){if(at(e))return ze;for(var t=this._constants.constExpressions,n=0;n<t.length;n++)if(t[n].isEquivalent(e))return it(n);return it(t.push(e)-1)}},{key:"addAttrsToConsts",value:function(e){return e.length>0?this.addToConsts(et(e)):ze}},{key:"prepareRefsArray",value:function(e){var t=this;return e&&0!==e.length?Or(jt(e.map((function(e){var n=t.allocateDataSlot(),r=t._bindingScope.freshReferenceName(),i=t.level,a=Ze(r);return t._bindingScope.set(i,e.name,a,0,(function(e,t){var r=t>0?[Ic(t).toStmt()]:[],i=a.set($e(Rt.reference).callFn([it(n)]));return r.concat(i.toConstDecl())}),!0),[e.name,e.value]})))):ze}},{key:"prepareListenerParameter",value:function(e,t,n){var r=this;return function(){var i=t.name,a=1===t.type?Ut(i,t.phase):Tt(i),o="".concat(r.templateName,"_").concat(e,"_").concat(a,"_").concat(n,"_listener"),s=r._bindingScope.nestedScope(r._bindingScope.bindingLevel);return wc(t,o,s)}}}]),e}(),Sc=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e,r,i,a){var o;return Object(m.a)(this,n),(o=t.call(this)).constantPool=e,o.allocateSlot=r,o.allocatePureFunctionSlots=i,o.definePipe=a,o._pipeBindExprs=[],o}return Object(v.a)(n,[{key:"visitPipe",value:function(e,t){var n=this.allocateSlot(),r="PIPE:".concat(n),i=this.allocatePureFunctionSlots(2+e.args.length),a=new wi(e.span,e.sourceSpan,e.nameSpan,new yi(e.span,e.sourceSpan),r),o=function(e){var t=Oc[e.length];return{identifier:t||Rt.pipeBindV,isVarLength:!t}}(e.args),s=o.identifier,c=o.isVarLength;this.definePipe(e.name,r,n,$e(s));var l=[e.exp].concat(Object(g.a)(e.args)),u=c?this.visitAll([new Pi(e.span,e.sourceSpan,l)]):this.visitAll(l),p=new Fi(e.span,e.sourceSpan,a,[new Ii(e.span,e.sourceSpan,n),new Ii(e.span,e.sourceSpan,i)].concat(Object(g.a)(u)));return this._pipeBindExprs.push(p),p}},{key:"updatePipeSlotOffsets",value:function(e){this._pipeBindExprs.forEach((function(t){t.args[1].value+=e}))}},{key:"visitLiteralArray",value:function(e,t){var n=this;return new ha(e.span,e.sourceSpan,this.visitAll(e.expressions),(function(e){var t=et(e);return Pc(n.constantPool,t,n.allocatePureFunctionSlots)}))}},{key:"visitLiteralMap",value:function(e,t){var n=this;return new ha(e.span,e.sourceSpan,this.visitAll(e.values),(function(t){var r=tt(t.map((function(t,n){return{key:e.keys[n].key,value:t,quoted:e.keys[n].quoted}})));return Pc(n.constantPool,r,n.allocatePureFunctionSlots)}))}}]),n}(Yi),Oc=[Rt.pipeBind1,Rt.pipeBind2,Rt.pipeBind3,Rt.pipeBind4];var Ec=[Rt.pureFunction0,Rt.pureFunction1,Rt.pureFunction2,Rt.pureFunction3,Rt.pureFunction4,Rt.pureFunction5,Rt.pureFunction6,Rt.pureFunction7,Rt.pureFunction8];function _c(e,t,n){return $e(t,null,e).callFn(n,e)}function Ic(e){return $e(Rt.nextContext).callFn(e>1?[it(e)]:[])}function Pc(e,t,n){var r=e.getLiteralFactory(t),i=r.literalFactory,a=r.literalFactoryArguments,o=n(1+a.length),s=function(e){var t=Ec[e.length];return{identifier:t||Rt.pureFunctionV,isVarLength:!t}}(a),c=s.identifier,l=s.isVarLength,u=[it(o),i];return l?u.push(et(a)):u.push.apply(u,Object(g.a)(a)),$e(c).callFn(u)}function Tc(e){var t=b(e),n=Object(l.a)(t,2),r=n[0],i=it(n[1]);return r?[it(0),it(r),i]:[i]}var Ac="$$shared_ctx$$",Mc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(m.a)(this,e),this.bindingLevel=t,this.parent=n,this.map=new Map,this.referenceNameIndex=0,this.restoreViewVariable=null}return Object(v.a)(e,[{key:"get",value:function(e){for(var t=this;t;){var n=t.map.get(e);if(null!=n)return t!==this&&(n={retrievalLevel:n.retrievalLevel,lhs:n.lhs,declareLocalCallback:n.declareLocalCallback,declare:!1,priority:n.priority,localRef:n.localRef},this.map.set(e,n),this.maybeGenerateSharedContextVar(n),this.maybeRestoreView(n.retrievalLevel,n.localRef)),n.declareLocalCallback&&!n.declare&&(n.declare=!0),n.lhs;t=t.parent}return 0===this.bindingLevel?null:this.getComponentProperty(e)}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(this.map.has(t)){if(a)return this;ut("The name ".concat(t," is already defined in scope to be ").concat(this.map.get(t)))}return this.map.set(t,{retrievalLevel:e,lhs:n,declare:!1,declareLocalCallback:i,priority:r,localRef:a||!1}),this}},{key:"getLocal",value:function(e){return this.get(e)}},{key:"notifyImplicitReceiverUse",value:function(){0!==this.bindingLevel&&(this.map.get("$$shared_ctx$$0").declare=!0)}},{key:"nestedScope",value:function(t){var n=new e(t,this);return t>0&&n.generateSharedContextVar(0),n}},{key:"getOrCreateSharedContextVar",value:function(e){var t=Ac+e;return this.map.has(t)||this.generateSharedContextVar(e),this.map.get(t).lhs}},{key:"getSharedContextName",value:function(e){var t=this.map.get(Ac+e);return t&&t.declare?t.lhs:null}},{key:"maybeGenerateSharedContextVar",value:function(e){if(1===e.priority&&e.retrievalLevel<this.bindingLevel){var t=this.map.get(Ac+e.retrievalLevel);t?t.declare=!0:this.generateSharedContextVar(e.retrievalLevel)}}},{key:"generateSharedContextVar",value:function(e){var t=Ze(xr+this.freshReferenceName());this.map.set(Ac+e,{retrievalLevel:e,lhs:t,declareLocalCallback:function(e,n){return[t.set(Ic(n)).toConstDecl()]},declare:!1,priority:2,localRef:!1})}},{key:"getComponentProperty",value:function(e){var t=this.map.get("$$shared_ctx$$0");return t.declare=!0,this.maybeRestoreView(0,!1),t.lhs.prop(e)}},{key:"maybeRestoreView",value:function(e,t){this.isListenerScope()&&(e<this.bindingLevel||t)&&(this.parent.restoreViewVariable||(this.parent.restoreViewVariable=Ze(this.parent.freshReferenceName())),this.restoreViewVariable=this.parent.restoreViewVariable)}},{key:"restoreViewStatement",value:function(){return this.restoreViewVariable?[_c(null,Rt.restoreView,[this.restoreViewVariable]).toStmt()]:[]}},{key:"viewSnapshotStatements",value:function(){var e=_c(null,Rt.getCurrentView,[]);return this.restoreViewVariable?[this.restoreViewVariable.set(e).toConstDecl()]:[]}},{key:"isListenerScope",value:function(){return this.parent&&this.parent.bindingLevel===this.bindingLevel}},{key:"variableDeclarations",value:function(){var e=this,t=0;return Array.from(this.map.values()).filter((function(e){return e.declare})).sort((function(e,t){return t.retrievalLevel-e.retrievalLevel||t.priority-e.priority})).reduce((function(n,r){var i=e.bindingLevel-r.retrievalLevel,a=r.declareLocalCallback(e,i-t);return t=i,n.concat(a)}),[])}},{key:"freshReferenceName",value:function(){for(var e=this;e.parent;)e=e.parent;return"".concat("_r").concat(e.referenceNameIndex++)}}],[{key:"createRootScope",value:function(){return(new e).set(0,"$event",Ze("$event"))}}]),e}();function Dc(e,t){var n=new M,r=b(e)[1];return n.setElement(r),Object.getOwnPropertyNames(t).forEach((function(e){var r=b(e)[1],i=t[e];(n.addAttribute(r,i),"class"===e.toLowerCase())&&i.trim().split(/\s+/).forEach((function(e){return n.addClassName(e)}))})),n}function jc(e){var t=U(e.value)[0];return[it(5),Or(t)]}function Nc(e){switch(Nr(e)){case 1:return Rt.propertyInterpolate;case 3:return Rt.propertyInterpolate1;case 5:return Rt.propertyInterpolate2;case 7:return Rt.propertyInterpolate3;case 9:return Rt.propertyInterpolate4;case 11:return Rt.propertyInterpolate5;case 13:return Rt.propertyInterpolate6;case 15:return Rt.propertyInterpolate7;case 17:return Rt.propertyInterpolate8;default:return Rt.propertyInterpolateV}}var Rc=new Bs;function Lc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr;return new Yo(new Ts(new fs),e,Rc,null,[])}function Fc(e,t){switch(e){case R.HTML:return $e(Rt.sanitizeHtml);case R.SCRIPT:return $e(Rt.sanitizeScript);case R.STYLE:return t?$e(Rt.sanitizeStyle):null;case R.URL:return $e(Rt.sanitizeUrl);case R.RESOURCE_URL:return $e(Rt.sanitizeResourceUrl);default:return null}}function Bc(e){return 1===e.length&&e[0]instanceof vn}function Vc(e){return e instanceof hn||e instanceof dn||e instanceof wn}function zc(e){return e.every(Vc)}var Uc="ngI18nClosureMode";function Gc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,a=[vr(t),rt(Hc(),dc(t,e,n,fr(r,!0)),gc(t,e,fr(r,!1)))];return i&&a.push(new We(t.set(i(t)))),a}function Hc(){return Je(Ze(Uc)).notIdentical(it("undefined",ee)).and(Ze(Uc))}var Yc=/attr\.([^\]]+)/;function qc(e,t,n){var r=new Mr,i=U(e.selector);return r.set("type",e.internalType),i.length>0&&r.set("selectors",Or(i)),e.queries.length>0&&r.set("contentQueries",function(e,t,n){var r,i=[],a=[],o=wr(a,yr),s=Object(u.a)(e);try{for(s.s();!(r=s.n()).done;){var c=r.value,l=c.static?Rt.staticContentQuery:Rt.contentQuery;i.push($e(l).callFn([Ze("dirIndex")].concat(Object(g.a)(Zc(c,t)))).toStmt());var p=o(),h=$e(Rt.loadQuery).callFn([]),d=$e(Rt.queryRefresh).callFn([p.set(h)]),f=Ze(xr).prop(c.propertyName).set(c.first?p.prop("first"):p);a.push(d.and(f).toStmt())}}catch(v){s.e(v)}finally{s.f()}var m=n?"".concat(n,"_ContentQueries"):null;return nt([new Ae(Cr,J),new Ae(xr,null),new Ae("dirIndex",null)],[Cc(1,i),Cc(2,a)],$,null,m)}(e.queries,t,e.name)),e.viewQueries.length&&r.set("viewQuery",function(e,t,n){var r=[],i=[],a=wr(i,yr);e.forEach((function(e){var n=$e(e.static?Rt.staticViewQuery:Rt.viewQuery).callFn(Zc(e,t));r.push(n.toStmt());var o=a(),s=$e(Rt.loadQuery).callFn([]),c=$e(Rt.queryRefresh).callFn([o.set(s)]),l=Ze(xr).prop(e.propertyName).set(e.first?o.prop("first"):o);i.push(c.and(l).toStmt())}));var o=n?"".concat(n,"_Query"):null;return nt([new Ae(Cr,J),new Ae(xr,null)],[Cc(1,r),Cc(2,i)],$,null,o)}(e.viewQueries,t,e.name)),r.set("hostBindings",function(e,t,n,r,i,a,o){var s=Ze(xr),c=new ls(s),l=e.specialAttributes,p=l.styleAttr,h=l.classAttr;void 0!==p&&c.registerStyleAttr(p);void 0!==h&&c.registerClassAttr(h);var d=[],f=[],m=t,v=tl(e),b=n.createDirectiveHostEventAsts(v,m);if(b&&b.length){var y=function(e,t){var n=[],r=[],i=[];e.forEach((function(e){var i=e.name&&Tt(e.name),a=1===e.type?Ut(i,e.targetOrPhase):i,o=t&&i?"".concat(t,"_").concat(a,"_HostBindingHandler"):null,s=wc(mn.fromParsedEvent(e),o);1==e.type?r.push(s):n.push(s)})),r.length>0&&i.push(jr(Rt.syntheticHostListener,r).toStmt());n.length>0&&i.push(jr(Rt.listener,n).toStmt());return i}(b,a);d.push.apply(d,Object(g.a)(y))}var x,C=n.createBoundHostProperties(v,m),w=[],k=0;C&&C.forEach((function(e){var t=e.name;c.registerInputBasedOnName(t,e.expression,e.sourceSpan)?k+=2:(w.push(e),k++)}));var S=function(){x||(x=new Sc(r,(function(){return ut("Unexpected node")}),(function(e){var t=k;return k+=e,t}),(function(){return ut("Unexpected pipe")})));return x},O=[],E=[],_=[];w.forEach((function(e){var t=e.expression.visit(S()),r=el(s,t),a=function(e){var t,n=e.name,r=n.match(Yc);r?(n=r[1],t=Rt.attribute):e.isAnimation?(n=Vt(n),t=Rt.syntheticHostProperty):t=Rt.hostProperty;return{bindingName:n,instruction:t,isAttribute:!!r}}(e),o=a.bindingName,c=a.instruction,l=a.isAttribute,u=n.calcPossibleSecurityContexts(i,o,l).filter((function(e){return e!==R.NONE})),p=null;u.length&&(p=2===u.length&&u.indexOf(R.URL)>-1&&u.indexOf(R.RESOURCE_URL)>-1?$e(Rt.sanitizeUrlOrResourceUrl):Fc(u[0],l));var h=[it(o),r.currValExpr];p&&h.push(p),f.push.apply(f,Object(g.a)(r.stmts)),c===Rt.hostProperty?O.push(h):c===Rt.attribute?E.push(h):c===Rt.syntheticHostProperty?_.push(h):f.push($e(c).callFn(h).toStmt())})),O.length>0&&f.push(jr(Rt.hostProperty,O).toStmt());E.length>0&&f.push(jr(Rt.attribute,E).toStmt());_.length>0&&f.push(jr(Rt.syntheticHostProperty,_).toStmt());var I=function(e){var t,n=[],r=Object(u.a)(Object.getOwnPropertyNames(e));try{for(r.s();!(t=r.n()).done;){var i=t.value,a=e[i];n.push(it(i),a)}}catch(o){r.e(o)}finally{r.f()}return n}(e.attributes);c.assignHostAttrs(I,o),c.hasBindings&&c.buildUpdateLevelInstructions(S()).forEach((function(e){if(e.calls.length>0){var t=[];e.calls.forEach((function(e){k+=Math.max(e.allocateBindingSlots-2,0),t.push(function(e,t,n){return e.params((function(e){return n(t,e).currValExpr}))}(e,s,el))})),f.push(jr(e.reference,t).toStmt())}}));k&&o.set("hostVars",it(k));if(d.length>0||f.length>0){var P=a?"".concat(a,"_HostBindings"):null,T=[];return d.length>0&&T.push(Cc(1,d)),f.length>0&&T.push(Cc(2,f)),nt([new Ae(Cr,J),new Ae(xr,null)],T,$,null,P)}return null}(e.host,e.typeSourceSpan,n,t,e.selector||"",e.name,r)),r.set("inputs",Er(e.inputs,!0)),r.set("outputs",Er(e.outputs)),null!==e.exportAs&&r.set("exportAs",et(e.exportAs.map((function(e){return it(e)})))),r}function Wc(e,t){var n=[],r=t.providers,i=t.viewProviders;if(r||i){var a=[r||new Le([])];i&&a.push(i),n.push($e(Rt.ProvidersFeature).callFn(a))}t.usesInheritance&&n.push($e(Rt.InheritDefinitionFeature)),t.fullInheritance&&n.push($e(Rt.CopyDefinitionFeature)),t.lifecycle.usesOnChanges&&n.push($e(Rt.NgOnChangesFeature)),n.length&&e.set("features",et(n))}function Xc(e,t,n){var r=qc(e,t,n);Wc(r,e);var i=$e(Rt.defineDirective).callFn([r.toLiteralMap()]),a=Jc(e);return{expression:i,type:Qe($e(Rt.DirectiveDefWithMeta,a))}}function Kc(e,t,n){var r=qc(e,t,n);Wc(r,e);var i=e.selector&&M.parse(e.selector),a=i&&i[0];if(a){var o=a.getAttrs();o.length&&r.set("attrs",t.getConstLiteral(et(o.map((function(e){return it(null!=e?e:void 0)}))),!0))}var s=null;if(e.directives.length>0){var c,l=new D,p=Object(u.a)(e.directives);try{for(p.s();!(c=p.n()).done;){var h=c.value,d=h.selector,f=h.expression;l.addSelectables(M.parse(d),f)}}catch(F){p.e(F)}finally{p.f()}s=l}var m=e.name,v=m?"".concat(m,"_Template"):null,b=new Set,y=new Set,x=e.changeDetection,C=e.template,w=new kc(t,Mc.createRootScope(),0,m,null,null,v,s,b,e.pipes,y,Rt.namespaceHTML,e.relativeContextFilePath,e.i18nUseExternalIds),k=w.buildTemplateFunction(C.nodes,[]),S=w.getNgContentSelectors();S&&r.set("ngContentSelectors",S),r.set("decls",it(w.getConstCount())),r.set("vars",it(w.getVarCount()));var O=w.getConsts(),E=O.constExpressions,_=O.prepareStatements;if(E.length>0){var I=et(E);_.length>0&&(I=nt([],[].concat(Object(g.a)(_),[new Xe(I)]))),r.set("consts",I)}if(r.set("template",k),b.size){var A=et(Array.from(b));e.wrapDirectivesAndPipesInClosure&&(A=nt([],[new Xe(A)])),r.set("directives",A)}if(y.size){var j=et(Array.from(y));e.wrapDirectivesAndPipesInClosure&&(j=nt([],[new Xe(j)])),r.set("pipes",j)}if(null===e.encapsulation&&(e.encapsulation=P.Emulated),e.styles&&e.styles.length){var N=(e.encapsulation==P.Emulated?function(e,t,n){var r=new da;return e.map((function(e){return r.shimCssText(e,t,n)}))}(e.styles,qa,Ya):e.styles).map((function(e){return t.getConstLiteral(it(e))}));r.set("styles",et(N))}else e.encapsulation===P.Emulated&&(e.encapsulation=P.None);e.encapsulation!==P.Emulated&&r.set("encapsulation",it(e.encapsulation)),null!==e.animations&&r.set("data",tt([{key:"animation",value:e.animations,quoted:!1}])),null!=x&&x!==T.Default&&r.set("changeDetection",it(x));var R=$e(Rt.defineComponent).callFn([r.toLiteralMap()]),L=Jc(e);return L.push(Qc(e.template.ngContentSelectors)),{expression:R,type:Qe($e(Rt.ComponentDefWithMeta,L))}}function Zc(e,t){var n=[Ir(e,t),it(e.descendants)];return e.read&&n.push(e.read),n}function $c(e){return Qe(tt(Object.keys(e).map((function(t){return{key:t,value:it(Array.isArray(e[t])?e[t][0]:e[t]),quoted:!0}}))))}function Qc(e){return e.length>0?Qe(et(e.map((function(e){return it(e)})))):te}function Jc(e){var t,n=null!==e.selector?e.selector.replace(/\n/g,""):null;return[Ft(e.type.type,e.typeArgumentCount),null!==n?(t=n,Qe(it(t))):te,null!==e.exportAs?Qc(e.exportAs):te,$c(e.inputs),$c(e.outputs),Qc(e.queries.map((function(e){return e.propertyName})))]}function el(e,t){return ra(null,e,t,"b",ea.Expression,(function(){return ut("Unexpected interpolation")}))}function tl(e){return{hostAttributes:{},hostListeners:e.listeners,hostProperties:e.properties}}var nl=/^(?:\[([^\]]+)\])|(?:\(([^\)]+)\))$/;var rl=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"get",value:function(e){return""}}]),e}(),il=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii;Object(m.a)(this,e),this.jitEvaluator=t,this.R3ResolvedDependencyType=Ar,this.R3FactoryTarget=Tr,this.ResourceLoader=rl,this.elementSchemaRegistry=new Bs}return Object(v.a)(e,[{key:"compilePipe",value:function(e,t,n){var r=pi({name:n.name,type:ll(n.type),internalType:new le(n.type),typeArgumentCount:n.typeArgumentCount,deps:gl(n.deps),pipeName:n.pipeName,pure:n.pure});return this.jitExpression(r.expression,e,t,[])}},{key:"compileInjectable",value:function(e,t,n){var r=function(e){var t=null,n={name:e.name,type:e.type,internalType:e.internalType,typeArgumentCount:e.typeArgumentCount,deps:[],injectFn:It.inject,target:Tr.Injectable};if(void 0!==e.useClass){var r=e.useClass.isEquivalent(e.internalType),i=void 0;void 0!==e.userDeps&&(i=e.userDeps),t=void 0!==i?Rr(Object.assign(Object.assign({},n),{delegate:e.useClass,delegateDeps:i,delegateType:Pr.Class})):r?Rr(n):Br(e.type.value,e.useClass)}else t=void 0!==e.useFactory?void 0!==e.userDeps?Rr(Object.assign(Object.assign({},n),{delegate:e.useFactory,delegateDeps:e.userDeps||[],delegateType:Pr.Function})):{statements:[],factory:nt([],[new Xe(e.useFactory.callFn([]))])}:void 0!==e.useValue?Rr(Object.assign(Object.assign({},n),{expression:e.useValue})):void 0!==e.useExisting?Rr(Object.assign(Object.assign({},n),{expression:$e(It.inject).callFn([e.useExisting])})):Br(e.type.value,e.internalType);var a={token:e.internalType,factory:t.factory};return null!==e.providedIn.value&&(a.providedIn=e.providedIn),{expression:$e(It.\u0275\u0275defineInjectable).callFn([Lt(a)]),type:new K($e(It.InjectableDef,[Ft(e.type.type,e.typeArgumentCount)])),statements:t.statements}}({name:n.name,type:ll(n.type),internalType:new le(n.type),typeArgumentCount:n.typeArgumentCount,providedIn:dl(n.providedIn),useClass:hl(n,al),useFactory:hl(n,ol),useValue:hl(n,sl),useExisting:hl(n,cl),userDeps:gl(n.userDeps)||void 0}),i=r.expression,a=r.statements;return this.jitExpression(i,e,t,a)}},{key:"compileInjector",value:function(e,t,n){var r=function(e){var t=Rr({name:e.name,type:e.type,internalType:e.internalType,typeArgumentCount:0,deps:e.deps,injectFn:Rt.inject,target:Tr.NgModule}),n={factory:t.factory};return null!==e.providers&&(n.providers=e.providers),e.imports.length>0&&(n.imports=et(e.imports)),{expression:$e(Rt.defineInjector).callFn([Lt(n)]),type:new K($e(Rt.InjectorDef,[new K(e.type.type)])),statements:t.statements}}({name:n.name,type:ll(n.type),internalType:new le(n.type),deps:gl(n.deps),providers:new le(n.providers),imports:n.imports.map((function(e){return new le(e)}))});return this.jitExpression(r.expression,e,t,r.statements)}},{key:"compileNgModule",value:function(e,t,n){var r=ci({type:ll(n.type),internalType:new le(n.type),adjacentType:new le(n.type),bootstrap:n.bootstrap.map(ll),declarations:n.declarations.map(ll),imports:n.imports.map(ll),exports:n.exports.map(ll),emitInline:!0,containsForwardDecls:!1,schemas:n.schemas?n.schemas.map(ll):null,id:n.id?new le(n.id):null});return this.jitExpression(r.expression,e,t,[])}},{key:"compileDirective",value:function(e,t,n){var r=new wt,i=Lc(),a=Xc(pl(n),r,i);return this.jitExpression(a.expression,e,t,r.statements)}},{key:"compileComponent",value:function(e,t,n){var r=new wt,i=n.interpolation?Ur.fromArray(n.interpolation):Gr,a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.interpolationConfig,i=n.preserveWhitespaces,a=n.enableI18nLegacyMessageIdFormat,o=Lc(r),s=(new Eo).parse(e,t,Object.assign(Object.assign({leadingTriviaChars:xc},n),{tokenizeExpansionForms:!0}));if(s.errors&&s.errors.length>0)return{errors:s.errors,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]};var c=s.rootNodes,l=new uc(r,!i,a);c=eo(l,c),i||(c=eo(new Do,c),l.hasI18nMeta&&(c=eo(new uc(r,!1),c)));var u=zs(c,o),p=u.nodes,h=u.errors,d=u.styleUrls,f=u.styles,g=u.ngContentSelectors;return h&&h.length>0?{errors:h,nodes:[],styleUrls:[],styles:[],ngContentSelectors:[]}:{nodes:p,styleUrls:d,styles:f,ngContentSelectors:g}}(n.template,t,{preserveWhitespaces:n.preserveWhitespaces,interpolationConfig:i});if(void 0!==a.errors){var o=a.errors.map((function(e){return e.toString()})).join(", ");throw new Error("Errors during JIT compilation of template for ".concat(n.name,": ").concat(o))}var s=Kc(Object.assign(Object.assign(Object.assign({},n),pl(n)),{selector:n.selector||this.elementSchemaRegistry.getDefaultComponentElementName(),template:a,wrapDirectivesAndPipesInClosure:!1,styles:[].concat(Object(g.a)(n.styles),Object(g.a)(a.styles)),encapsulation:n.encapsulation,interpolation:i,changeDetection:n.changeDetection,animations:null!=n.animations?new le(n.animations):null,viewProviders:null!=n.viewProviders?new le(n.viewProviders):null,relativeContextFilePath:"",i18nUseExternalIds:!0}),r,Lc(i)),c="ng:///".concat(n.name,".js");return this.jitExpression(s.expression,e,c,r.statements)}},{key:"compileFactory",value:function(e,t,n){var r=Rr({name:n.name,type:ll(n.type),internalType:new le(n.type),typeArgumentCount:n.typeArgumentCount,deps:gl(n.deps),injectFn:"directiveInject"===n.injectFn?It.directiveInject:It.inject,target:n.target});return this.jitExpression(r.factory,e,t,r.statements)}},{key:"createParseSourceSpan",value:function(e,t,n){return function(e,t,n){var r="in ".concat(e," ").concat(t," in ").concat(n),i=new ln("",r);return new un(new cn(i,-1,-1,-1),new cn(i,-1,-1,-1))}(e,t,n)}},{key:"jitExpression",value:function(e,t,n,r){var i=[].concat(Object(g.a)(r),[new Ye("$def",e,void 0,[Oe.Exported])]);return this.jitEvaluator.evaluateStatements(n,i,new oi(t),!0).$def}}]),e}(),al=Object.keys({useClass:null})[0],ol=Object.keys({useFactory:null})[0],sl=Object.keys({useValue:null})[0],cl=Object.keys({useExisting:null})[0],ll=function(e){var t=new le(e);return{value:t,type:t}};function ul(e){return Object.assign(Object.assign({},e),{predicate:Array.isArray(e.predicate)?e.predicate:new le(e.predicate),read:e.read?new le(e.read):null,static:e.static})}function pl(e){var t=vl(e.inputs||[]),n=vl(e.outputs||[]),r=e.propMetadata,i={},a={},o=function(e){r.hasOwnProperty(e)&&r[e].forEach((function(t){!function(e){return"Input"===e.ngMetadataName}(t)?function(e){return"Output"===e.ngMetadataName}(t)&&(a[e]=t.bindingPropertyName||e):i[e]=t.bindingPropertyName?[t.bindingPropertyName,e]:e}))};for(var s in r)o(s);return Object.assign(Object.assign({},e),{typeSourceSpan:e.typeSourceSpan,type:ll(e.type),internalType:new le(e.type),deps:gl(e.deps),host:ml(e.propMetadata,e.typeSourceSpan,e.host),inputs:Object.assign(Object.assign({},t),i),outputs:Object.assign(Object.assign({},n),a),queries:e.queries.map(ul),providers:null!=e.providers?new le(e.providers):null,viewQueries:e.viewQueries.map(ul),fullInheritance:!1})}function hl(e,t){return e.hasOwnProperty(t)?new le(e[t]):void 0}function dl(e){return null==e||"string"==typeof e?new me(e):new le(e)}function fl(e){return{token:null===e.token?new me(null):e.resolved===Ar.Attribute?new me(e.token):new le(e.token),attribute:null,resolved:e.resolved,host:e.host,optional:e.optional,self:e.self,skipSelf:e.skipSelf}}function gl(e){return null==e?null:e.map(fl)}function ml(e,t,n){var r=function(e){for(var t={},n={},r={},i={},a=0,o=Object.keys(e);a<o.length;a++){var s=o[a],c=e[s],l=s.match(nl);if(null===l)switch(s){case"class":if("string"!=typeof c)throw new Error("Class binding must be string");i.classAttr=c;break;case"style":if("string"!=typeof c)throw new Error("Style binding must be string");i.styleAttr=c;break;default:t[s]="string"==typeof c?it(c):c}else if(null!=l[1]){if("string"!=typeof c)throw new Error("Property binding must be string");r[l[1]]=c}else if(null!=l[2]){if("string"!=typeof c)throw new Error("Event binding must be string");n[l[2]]=c}}return{attributes:t,listeners:n,properties:r,specialAttributes:i}}(n||{}),i=function(e,t){var n=tl(e),r=Lc();return r.createDirectiveHostEventAsts(n,t),r.createBoundHostProperties(n,t),r.errors}(r,t);if(i.length)throw new Error(i.map((function(e){return e.msg})).join("\n"));var a=function(t){e.hasOwnProperty(t)&&e[t].forEach((function(e){!function(e){return"HostBinding"===e.ngMetadataName}(e)?function(e){return"HostListener"===e.ngMetadataName}(e)&&(r.listeners[e.eventName||t]="".concat(t,"(").concat((e.args||[]).join(","),")")):r.properties[e.hostPropertyName||t]=t}))};for(var o in e)a(o);return r}function vl(e){return e.reduce((function(e,t){var n=t.split(",").map((function(e){return e.trim()})),r=Object(l.a)(n,2),i=r[0],a=r[1];return e[i]=a||i,e}),{})}new function e(t){Object(m.a)(this,e),this.full=t;var n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}("10.2.5");var bl;!function(e){e[e.Extract=0]="Extract",e[e.Merge=1]="Merge"}(bl||(bl={}));new(function(){function e(){Object(m.a)(this,e),this.closedByParent=!1,this.contentType=i.PARSABLE_DATA,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0,this.preventNamespaceInheritance=!1}return Object(v.a)(e,[{key:"requireExtraParent",value:function(e){return!1}},{key:"isClosedByChild",value:function(e){return!1}}]),e}());var yl;!function(e){e[e.OnInit=0]="OnInit",e[e.OnDestroy=1]="OnDestroy",e[e.DoCheck=2]="DoCheck",e[e.OnChanges=3]="OnChanges",e[e.AfterContentInit=4]="AfterContentInit",e[e.AfterContentChecked=5]="AfterContentChecked",e[e.AfterViewInit=6]="AfterViewInit",e[e.AfterViewChecked=7]="AfterViewChecked"}(yl||(yl={}));yl.OnInit,yl.OnDestroy,yl.DoCheck,yl.OnChanges,yl.AfterContentInit,yl.AfterContentChecked,yl.AfterViewInit,yl.AfterViewChecked;Ze("_l");var xl="_any";new(function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"notifyImplicitReceiverUse",value:function(){}},{key:"getLocal",value:function(e){return e===Zi.event.name?Ze(xl):null}}]),e}()),Ze("_l"),Ze("_v"),Ze("_ck"),Ze("_co"),Ze("en"),Ze("ad");var Cl="useValue";new Set([Cl,"useFactory","data","id","loadChildren"]);var wl=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,null,[{key:"build",value:function(){var t=new Map;return{define:function(e,n){return t.set(e,n),this},done:function(){return t.size>0?new kl(t):e.empty}}}}]),e}();wl.missing={},wl.empty={resolve:function(e){return wl.missing}};var kl=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this)).bindings=e,r}return Object(v.a)(n,[{key:"resolve",value:function(e){return this.bindings.has(e)?this.bindings.get(e):wl.missing}}]),n}(wl);var Sl;new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");!function(e){e[e.Scheme=1]="Scheme",e[e.UserInfo=2]="UserInfo",e[e.Domain=3]="Domain",e[e.Port=4]="Port",e[e.Path=5]="Path",e[e.QueryData=6]="QueryData",e[e.Fragment=7]="Fragment"}(Sl||(Sl={}));!function(e){(e.ng||(e.ng={})).\u0275compilerFacade=new il}(mt)},"/J21":function(e,t,n){var r;e.exports=(function(e,t){var n=e.utils.isFunction;function r(e,t){return e-t}function i(e,n,r){return t.max(n,t.min(e,r))}e.sum=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.sumsqrd=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n]*e[n];return t},e.sumsqerr=function(t){for(var n,r=e.mean(t),i=0,a=t.length;--a>=0;)i+=(n=t[a]-r)*n;return i},e.sumrow=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.product=function(e){for(var t=1,n=e.length;--n>=0;)t*=e[n];return t},e.min=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]<t&&(t=e[n]);return t},e.max=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]>t&&(t=e[n]);return t},e.unique=function(e){for(var t={},n=[],r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n},e.mean=function(t){return e.sum(t)/t.length},e.meansqerr=function(t){return e.sumsqerr(t)/t.length},e.geomean=function(n){return t.pow(e.product(n),1/n.length)},e.median=function(e){var t=e.length,n=e.slice().sort(r);return 1&t?n[t/2|0]:(n[t/2-1]+n[t/2])/2},e.cumsum=function(t){return e.cumreduce(t,(function(e,t){return e+t}))},e.cumprod=function(t){return e.cumreduce(t,(function(e,t){return e*t}))},e.diff=function(e){var t,n=[],r=e.length;for(t=1;t<r;t++)n.push(e[t]-e[t-1]);return n},e.rank=function(e){var t,n=[],i={};for(t=0;t<e.length;t++)i[c=e[t]]?i[c]++:(i[c]=1,n.push(c));var a=n.sort(r),o={},s=1;for(t=0;t<a.length;t++){var c,l=i[c=a[t]],u=(s+(s+l-1))/2;o[c]=u,s+=l}return e.map((function(e){return o[e]}))},e.mode=function(e){var t,n=e.length,i=e.slice().sort(r),a=1,o=0,s=0,c=[];for(t=0;t<n;t++)i[t]===i[t+1]?a++:(a>o?(c=[i[t]],o=a,s=0):a===o&&(c.push(i[t]),s++),a=1);return 0===s?c[0]:c},e.range=function(t){return e.max(t)-e.min(t)},e.variance=function(t,n){return e.sumsqerr(t)/(t.length-(n?1:0))},e.pooledvariance=function(t){return t.reduce((function(t,n){return t+e.sumsqerr(n)}),0)/(t.reduce((function(e,t){return e+t.length}),0)-t.length)},e.deviation=function(t){for(var n=e.mean(t),r=t.length,i=new Array(r),a=0;a<r;a++)i[a]=t[a]-n;return i},e.stdev=function(n,r){return t.sqrt(e.variance(n,r))},e.pooledstdev=function(n){return t.sqrt(e.pooledvariance(n))},e.meandev=function(n){for(var r=e.mean(n),i=[],a=n.length-1;a>=0;a--)i.push(t.abs(n[a]-r));return e.mean(i)},e.meddev=function(n){for(var r=e.median(n),i=[],a=n.length-1;a>=0;a--)i.push(t.abs(n[a]-r));return e.median(i)},e.coeffvar=function(t){return e.stdev(t)/e.mean(t)},e.quartiles=function(e){var n=e.length,i=e.slice().sort(r);return[i[t.round(n/4)-1],i[t.round(n/2)-1],i[t.round(3*n/4)-1]]},e.quantiles=function(e,n,a,o){var s,c,l,u,p,h=e.slice().sort(r),d=[n.length],f=e.length;for(void 0===a&&(a=3/8),void 0===o&&(o=3/8),s=0;s<n.length;s++)l=f*(c=n[s])+(a+c*(1-a-o)),u=t.floor(i(l,1,f-1)),p=i(l-u,0,1),d[s]=(1-p)*h[u-1]+p*h[u];return d},e.percentile=function(e,t,n){var i=e.slice().sort(r),a=t*(i.length+(n?1:-1))+(n?0:1),o=parseInt(a),s=a-o;return o+1<i.length?i[o-1]+s*(i[o]-i[o-1]):i[o-1]},e.percentileOfScore=function(e,t,n){var r,i,a=0,o=e.length,s=!1;for("strict"===n&&(s=!0),i=0;i<o;i++)r=e[i],(s&&r<t||!s&&r<=t)&&a++;return a/o},e.histogram=function(n,r){r=r||4;var i,a=e.min(n),o=(e.max(n)-a)/r,s=n.length,c=[];for(i=0;i<r;i++)c[i]=0;for(i=0;i<s;i++)c[t.min(t.floor((n[i]-a)/o),r-1)]+=1;return c},e.covariance=function(t,n){var r,i=e.mean(t),a=e.mean(n),o=t.length,s=new Array(o);for(r=0;r<o;r++)s[r]=(t[r]-i)*(n[r]-a);return e.sum(s)/(o-1)},e.corrcoeff=function(t,n){return e.covariance(t,n)/e.stdev(t,1)/e.stdev(n,1)},e.spearmancoeff=function(t,n){return t=e.rank(t),n=e.rank(n),e.corrcoeff(t,n)},e.stanMoment=function(n,r){for(var i=e.mean(n),a=e.stdev(n),o=n.length,s=0,c=0;c<o;c++)s+=t.pow((n[c]-i)/a,r);return s/n.length},e.skewness=function(t){return e.stanMoment(t,3)},e.kurtosis=function(t){return e.stanMoment(t,4)-3};var a=e.prototype;!function(t){for(var r=0;r<t.length;r++)!function(t){a[t]=function(r,i){var o=[],s=0,c=this;if(n(r)&&(i=r,r=!1),i)return setTimeout((function(){i.call(c,a[t].call(c,r))})),this;if(this.length>1){for(c=!0===r?this:this.transpose();s<c.length;s++)o[s]=e[t](c[s]);return o}return e[t](this[0],r)}}(t[r])}("cumsum cumprod".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){a[t]=function(r,i){var o=[],s=0,c=this;if(n(r)&&(i=r,r=!1),i)return setTimeout((function(){i.call(c,a[t].call(c,r))})),this;if(this.length>1){for("sumrow"!==t&&(c=!0===r?this:this.transpose());s<c.length;s++)o[s]=e[t](c[s]);return!0===r?e[t](e.utils.toVector(o)):o}return e[t](this[0],r)}}(t[r])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(t){for(var r=0;r<t.length;r++)!function(t){a[t]=function(){var r,i=[],o=0,s=this,c=Array.prototype.slice.call(arguments);if(n(c[c.length-1])){r=c[c.length-1];var l=c.slice(0,c.length-1);return setTimeout((function(){r.call(s,a[t].apply(s,l))})),this}r=void 0;var u=function(n){return e[t].apply(s,[n].concat(c))};if(this.length>1){for(s=s.transpose();o<s.length;o++)i[o]=u(s[o]);return i}return u(this[0])}}(t[r])}("quantiles percentileOfScore".split(" "))}(r=function(e,t){var n=Array.prototype.concat,r=Array.prototype.slice,i=Object.prototype.toString;function a(t,n){var r=t>n?t:n;return e.pow(10,17-~~(e.log(r>0?r:-r)*e.LOG10E))}var o=Array.isArray||function(e){return"[object Array]"===i.call(e)};function s(e){return"[object Function]"===i.call(e)}function c(e){return"number"==typeof e&&e-e==0}function l(e){return n.apply([],e)}function u(){return new u._init(arguments)}function p(){return 0}function h(){return 1}function d(e,t){return e===t?1:0}u.fn=u.prototype,u._init=function(e){if(o(e[0]))if(o(e[0][0])){s(e[1])&&(e[0]=u.map(e[0],e[1]));for(var t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=s(e[1])?u.map(e[0],e[1]):e[0],this.length=1;else if(c(e[0]))this[0]=u.seq.apply(null,e),this.length=1;else{if(e[0]instanceof u)return u(e[0].toArray());this[0]=[],this.length=1}return this},u._init.prototype=u.prototype,u._init.constructor=u,u.utils={calcRdx:a,isArray:o,isFunction:s,isNumber:c,toVector:l},u._random_fn=e.random,u.setRandom=function(e){if("function"!=typeof e)throw new TypeError("fn is not a function");u._random_fn=e},u.extend=function(e){var t,n;if(1===arguments.length){for(n in e)u[n]=e[n];return this}for(t=1;t<arguments.length;t++)for(n in arguments[t])e[n]=arguments[t][n];return e},u.rows=function(e){return e.length||1},u.cols=function(e){return e[0].length||1},u.dimensions=function(e){return{rows:u.rows(e),cols:u.cols(e)}},u.row=function(e,t){return o(t)?t.map((function(t){return u.row(e,t)})):e[t]},u.rowa=function(e,t){return u.row(e,t)},u.col=function(e,t){if(o(t)){var n=u.arange(e.length).map((function(){return new Array(t.length)}));return t.forEach((function(t,r){u.arange(e.length).forEach((function(i){n[i][r]=e[i][t]}))})),n}for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=[e[i][t]];return r},u.cola=function(e,t){return u.col(e,t).map((function(e){return e[0]}))},u.diag=function(e){for(var t=u.rows(e),n=new Array(t),r=0;r<t;r++)n[r]=[e[r][r]];return n},u.antidiag=function(e){for(var t=u.rows(e)-1,n=new Array(t),r=0;t>=0;t--,r++)n[r]=[e[r][t]];return n},u.transpose=function(e){var t,n,r,i,a,s=[];for(o(e[0])||(e=[e]),n=e.length,r=e[0].length,a=0;a<r;a++){for(t=new Array(n),i=0;i<n;i++)t[i]=e[i][a];s.push(t)}return 1===s.length?s[0]:s},u.map=function(e,t,n){var r,i,a,s,c;for(o(e[0])||(e=[e]),i=e.length,a=e[0].length,s=n?e:new Array(i),r=0;r<i;r++)for(s[r]||(s[r]=new Array(a)),c=0;c<a;c++)s[r][c]=t(e[r][c],r,c);return 1===s.length?s[0]:s},u.cumreduce=function(e,t,n){var r,i,a,s,c;for(o(e[0])||(e=[e]),i=e.length,a=e[0].length,s=n?e:new Array(i),r=0;r<i;r++)for(s[r]||(s[r]=new Array(a)),a>0&&(s[r][0]=e[r][0]),c=1;c<a;c++)s[r][c]=t(s[r][c-1],e[r][c]);return 1===s.length?s[0]:s},u.alter=function(e,t){return u.map(e,t,!0)},u.create=function(e,t,n){var r,i,a=new Array(e);for(s(t)&&(n=t,t=e),r=0;r<e;r++)for(a[r]=new Array(t),i=0;i<t;i++)a[r][i]=n(r,i);return a},u.zeros=function(e,t){return c(t)||(t=e),u.create(e,t,p)},u.ones=function(e,t){return c(t)||(t=e),u.create(e,t,h)},u.rand=function(e,t){return c(t)||(t=e),u.create(e,t,u._random_fn)},u.identity=function(e,t){return c(t)||(t=e),u.create(e,t,d)},u.symmetric=function(e){var t,n,r=e.length;if(e.length!==e[0].length)return!1;for(t=0;t<r;t++)for(n=0;n<r;n++)if(e[n][t]!==e[t][n])return!1;return!0},u.clear=function(e){return u.alter(e,p)},u.seq=function(e,t,n,r){s(r)||(r=!1);var i,o=[],c=a(e,t),l=(t*c-e*c)/((n-1)*c),u=e;for(i=0;u<=t&&i<n;u=(e*c+l*c*++i)/c)o.push(r?r(u,i):u);return o},u.arange=function(e,n,r){var i,a=[];if(r=r||1,n===t&&(n=e,e=0),e===n||0===r)return[];if(e<n&&r<0)return[];if(e>n&&r>0)return[];if(r>0)for(i=e;i<n;i+=r)a.push(i);else for(i=e;i>n;i+=r)a.push(i);return a},u.slice=function(){function e(e,n,r,i){var a,o=[],s=e.length;if(n===t&&r===t&&i===t)return u.copy(e);if(i=i||1,(n=(n=n||0)>=0?n:s+n)===(r=(r=r||e.length)>=0?r:s+r)||0===i)return[];if(n<r&&i<0)return[];if(n>r&&i>0)return[];if(i>0)for(a=n;a<r;a+=i)o.push(e[a]);else for(a=n;a>r;a+=i)o.push(e[a]);return o}function n(t,n){var r,i;return c((n=n||{}).row)?c(n.col)?t[n.row][n.col]:e(u.rowa(t,n.row),(r=n.col||{}).start,r.end,r.step):c(n.col)?e(u.cola(t,n.col),(i=n.row||{}).start,i.end,i.step):(i=n.row||{},r=n.col||{},e(t,i.start,i.end,i.step).map((function(t){return e(t,r.start,r.end,r.step)})))}return n}(),u.sliceAssign=function(n,r,i){var a,o;if(c(r.row)){if(c(r.col))return n[r.row][r.col]=i;r.col=r.col||{},r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1,a=u.arange(r.col.start,e.min(n.length,r.col.end),r.col.step);var s=r.row;return a.forEach((function(e,t){n[s][e]=i[t]})),n}if(c(r.col)){r.row=r.row||{},r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,o=u.arange(r.row.start,e.min(n[0].length,r.row.end),r.row.step);var l=r.col;return o.forEach((function(e,t){n[e][l]=i[t]})),n}return i[0].length===t&&(i=[i]),r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1,o=u.arange(r.row.start,e.min(n.length,r.row.end),r.row.step),a=u.arange(r.col.start,e.min(n[0].length,r.col.end),r.col.step),o.forEach((function(e,t){a.forEach((function(r,a){n[e][r]=i[t][a]}))})),n},u.diagonal=function(e){var t=u.zeros(e.length,e.length);return e.forEach((function(e,n){t[n][n]=e})),t},u.copy=function(e){return e.map((function(e){return c(e)?e:e.map((function(e){return e}))}))};var f=u.prototype;return f.length=0,f.push=Array.prototype.push,f.sort=Array.prototype.sort,f.splice=Array.prototype.splice,f.slice=Array.prototype.slice,f.toArray=function(){return this.length>1?r.call(this):r.call(this)[0]},f.map=function(e,t){return u(u.map(this,e,t))},f.cumreduce=function(e,t){return u(u.cumreduce(this,e,t))},f.alter=function(e){return u.alter(this,e),this},function(e){for(var t=0;t<e.length;t++)!function(e){f[e]=function(t){var n,r=this;return t?(setTimeout((function(){t.call(r,f[e].call(r))})),this):(n=u[e](this),o(n)?u(n):n)}}(e[t])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){f[e]=function(t,n){var r=this;return n?(setTimeout((function(){n.call(r,f[e].call(r,t))})),this):u(u[e](this,t))}}(e[t])}("row col".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){f[e]=function(){return u(u[e].apply(null,arguments))}}(e[t])}("create zeros ones rand identity".split(" ")),u}(Math),Math),function(e,t){e.gammaln=function(e){var n,r,i,a=0,o=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],s=1.000000000190015;for(i=(r=n=e)+5.5,i-=(n+.5)*t.log(i);a<6;a++)s+=o[a]/++r;return t.log(2.5066282746310007*s/n)-i},e.loggam=function(e){var n,r,i,a,o,s,c,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(n=e,c=0,1==e||2==e)return 0;for(e<=7&&(n=e+(c=t.floor(7-e))),r=1/(n*n),i=2*t.PI,o=l[9],s=8;s>=0;s--)o*=r,o+=l[s];if(a=o/n+.5*t.log(i)+(n-.5)*t.log(n)-n,e<=7)for(s=1;s<=c;s++)a-=t.log(n-1),n-=1;return a},e.gammafn=function(e){var n,r,i,a,o=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],s=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],c=!1,l=0,u=0,p=0,h=e;if(e>171.6243769536076)return 1/0;if(h<=0){if(!(a=h%1+36e-17))return 1/0;c=(1&h?-1:1)*t.PI/t.sin(t.PI*a),h=1-h}for(i=h,r=h<1?h++:(h-=l=(0|h)-1)-1,n=0;n<8;++n)p=(p+o[n])*r,u=u*r+s[n];if(a=p/u+1,i<h)a/=i;else if(i>h)for(n=0;n<l;++n)a*=h,h++;return c&&(a=c/a),a},e.gammap=function(t,n){return e.lowRegGamma(t,n)*e.gammafn(t)},e.lowRegGamma=function(n,r){var i,a=e.gammaln(n),o=n,s=1/n,c=s,l=r+1-n,u=1/1e-30,p=1/l,h=p,d=1,f=-~(8.5*t.log(n>=1?n:1/n)+.4*n+17);if(r<0||n<=0)return NaN;if(r<n+1){for(;d<=f;d++)s+=c*=r/++o;return s*t.exp(-r+n*t.log(r)-a)}for(;d<=f;d++)h*=(p=1/(p=(i=-d*(d-n))*p+(l+=2)))*(u=l+i/u);return 1-h*t.exp(-r+n*t.log(r)-a)},e.factorialln=function(t){return t<0?NaN:e.gammaln(t+1)},e.factorial=function(t){return t<0?NaN:e.gammafn(t+1)},e.combination=function(n,r){return n>170||r>170?t.exp(e.combinationln(n,r)):e.factorial(n)/e.factorial(r)/e.factorial(n-r)},e.combinationln=function(t,n){return e.factorialln(t)-e.factorialln(n)-e.factorialln(t-n)},e.permutation=function(t,n){return e.factorial(t)/e.factorial(t-n)},e.betafn=function(n,r){if(!(n<=0||r<=0))return n+r>170?t.exp(e.betaln(n,r)):e.gammafn(n)*e.gammafn(r)/e.gammafn(n+r)},e.betaln=function(t,n){return e.gammaln(t)+e.gammaln(n)-e.gammaln(t+n)},e.betacf=function(e,n,r){var i,a,o,s,c=1e-30,l=1,u=n+r,p=n+1,h=n-1,d=1,f=1-u*e/p;for(t.abs(f)<c&&(f=c),s=f=1/f;l<=100&&(f=1+(a=l*(r-l)*e/((h+(i=2*l))*(n+i)))*f,t.abs(f)<c&&(f=c),d=1+a/d,t.abs(d)<c&&(d=c),s*=(f=1/f)*d,f=1+(a=-(n+l)*(u+l)*e/((n+i)*(p+i)))*f,t.abs(f)<c&&(f=c),d=1+a/d,t.abs(d)<c&&(d=c),s*=o=(f=1/f)*d,!(t.abs(o-1)<3e-7));l++);return s},e.gammapinv=function(n,r){var i,a,o,s,c,l,u=0,p=r-1,h=1e-8,d=e.gammaln(r);if(n>=1)return t.max(100,r+100*t.sqrt(r));if(n<=0)return 0;for(r>1?(c=t.log(p),l=t.exp(p*(c-1)-d),s=n<.5?n:1-n,i=(2.30753+.27061*(a=t.sqrt(-2*t.log(s))))/(1+a*(.99229+.04481*a))-a,n<.5&&(i=-i),i=t.max(.001,r*t.pow(1-1/(9*r)-i/(3*t.sqrt(r)),3))):i=n<(a=1-r*(.253+.12*r))?t.pow(n/a,1/r):1-t.log(1-(n-a)/(1-a));u<12;u++){if(i<=0)return 0;if((i-=a=(o=(e.lowRegGamma(r,i)-n)/(a=r>1?l*t.exp(-(i-p)+p*(t.log(i)-c)):t.exp(-i+p*t.log(i)-d)))/(1-.5*t.min(1,o*((r-1)/i-1))))<=0&&(i=.5*(i+a)),t.abs(a)<h*i)break}return i},e.erf=function(e){var n,r,i,a,o=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],s=o.length-1,c=!1,l=0,u=0;for(e<0&&(e=-e,c=!0),r=4*(n=2/(2+e))-2;s>0;s--)i=l,l=r*l-u+o[s],u=i;return a=n*t.exp(-e*e+.5*(o[0]+r*l)-u),c?a-1:1-a},e.erfc=function(t){return 1-e.erf(t)},e.erfcinv=function(n){var r,i,a,o,s=0;if(n>=2)return-100;if(n<=0)return 100;for(o=n<1?n:2-n,r=-.70711*((2.30753+.27061*(a=t.sqrt(-2*t.log(o/2))))/(1+a*(.99229+.04481*a))-a);s<2;s++)r+=(i=e.erfc(r)-o)/(1.1283791670955126*t.exp(-r*r)-r*i);return n<1?r:-r},e.ibetainv=function(n,r,i){var a,o,s,c,l,u,p,h,d,f,g=1e-8,m=r-1,v=i-1,b=0;if(n<=0)return 0;if(n>=1)return 1;for(r>=1&&i>=1?(s=n<.5?n:1-n,u=(2.30753+.27061*(c=t.sqrt(-2*t.log(s))))/(1+c*(.99229+.04481*c))-c,n<.5&&(u=-u),p=(u*u-3)/6,h=2/(1/(2*r-1)+1/(2*i-1)),d=u*t.sqrt(p+h)/h-(1/(2*i-1)-1/(2*r-1))*(p+5/6-2/(3*h)),u=r/(r+i*t.exp(2*d))):(a=t.log(r/(r+i)),o=t.log(i/(r+i)),u=n<(c=t.exp(r*a)/r)/(d=c+(l=t.exp(i*o)/i))?t.pow(r*d*n,1/r):1-t.pow(i*d*(1-n),1/i)),f=-e.gammaln(r)-e.gammaln(i)+e.gammaln(r+i);b<10;b++){if(0===u||1===u)return u;if((u-=c=(l=(e.ibeta(u,r,i)-n)/(c=t.exp(m*t.log(u)+v*t.log(1-u)+f)))/(1-.5*t.min(1,l*(m/u-v/(1-u)))))<=0&&(u=.5*(u+c)),u>=1&&(u=.5*(u+c+1)),t.abs(c)<g*u&&b>0)break}return u},e.ibeta=function(n,r,i){var a=0===n||1===n?0:t.exp(e.gammaln(r+i)-e.gammaln(r)-e.gammaln(i)+r*t.log(n)+i*t.log(1-n));return!(n<0||n>1)&&(n<(r+1)/(r+i+2)?a*e.betacf(n,r,i)/r:1-a*e.betacf(1-n,i,r)/i)},e.randn=function(n,r){var i,a,o,s,c;if(r||(r=n),n)return e.create(n,r,(function(){return e.randn()}));do{i=e._random_fn(),a=1.7156*(e._random_fn()-.5),c=(o=i-.449871)*o+(s=t.abs(a)+.386595)*(.196*s-.25472*o)}while(c>.27597&&(c>.27846||a*a>-4*t.log(i)*i*i));return a/i},e.randg=function(n,r,i){var a,o,s,c,l,u,p=n;if(i||(i=r),n||(n=1),r)return(u=e.zeros(r,i)).alter((function(){return e.randg(n)})),u;n<1&&(n+=1),a=n-1/3,o=1/t.sqrt(9*a);do{do{c=1+o*(l=e.randn())}while(c<=0);c*=c*c,s=e._random_fn()}while(s>1-.331*t.pow(l,4)&&t.log(s)>.5*l*l+a*(1-c+t.log(c)));if(n==p)return a*c;do{s=e._random_fn()}while(0===s);return t.pow(s,1/p)*a*c},function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e.map(this,(function(n){return e[t](n)})))}}(t[n])}("gammaln gammafn factorial factorialln".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e[t].apply(null,arguments))}}(t[n])}("randn".split(" "))}(r,Math),function(e,t){function n(e,n,r,i){for(var a,o=0,s=1,c=1,l=1,u=0,p=0;t.abs((c-p)/c)>i;)p=c,s=l+(a=-(n+u)*(n+r+u)*e/(n+2*u)/(n+2*u+1))*s,c=(o=c+a*o)+(a=(u+=1)*(r-u)*e/(n+2*u-1)/(n+2*u))*c,o/=l=s+a*l,s/=l,c/=l,l=1;return c/n}function r(e){return e/t.abs(e)}function i(n,r,i){var a=12,o=6,s=-30,c=-50,l=60,u=8,p=3,h=2,d=3,f=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],g=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],m=.5*n;if(m>=u)return 1;var v,b=2*e.normal.cdf(m,0,1,1,0)-1;b=b>=t.exp(c/i)?t.pow(b,i):0;for(var y=m,x=(u-m)/(v=n>p?h:d),C=y+x,w=0,k=i-1,S=1;S<=v;S++){for(var O=0,E=.5*(C+y),_=.5*(C-y),I=1;I<=a;I++){var P,T=E+_*(o<I?f[(P=a-I+1)-1]:-f[(P=I)-1]),A=T*T;if(A>l)break;var M=2*e.normal.cdf(T,0,1,1,0)*.5-2*e.normal.cdf(T,n,1,1,0)*.5;M>=t.exp(s/k)&&(O+=M=g[P-1]*t.exp(-.5*A)*t.pow(M,k))}w+=O*=2*_*i/t.sqrt(2*t.PI),y=C,C+=x}return(b+=w)<=t.exp(s/r)?0:(b=t.pow(b,r))>=1?1:b}function a(e,n,r){var i=.322232421088,a=.099348462606,o=-1,s=.588581570495,c=-.342242088547,l=.531103462366,u=-.204231210125,p=.10353775285,h=-453642210148e-16,d=.0038560700634,f=.8832,g=.2368,m=1.214,v=1.208,b=1.4142,y=120,x=.5-.5*e,C=t.sqrt(t.log(1/(x*x))),w=C+((((C*h+u)*C+c)*C+o)*C+i)/((((C*d+p)*C+l)*C+s)*C+a);r<y&&(w+=(w*w*w+w)/r/4);var k=f-g*w;return r<y&&(k+=-m/r+v*w/r),w*(k*t.log(n-1)+b)}!function(t){for(var n=0;n<t.length;n++)!function(t){e[t]=function e(t,n,r){return this instanceof e?(this._a=t,this._b=n,this._c=r,this):new e(t,n,r)},e.fn[t]=function(n,r,i){var a=e[t](n,r,i);return a.data=this,a},e[t].prototype.sample=function(n){var r=this._a,i=this._b,a=this._c;return n?e.alter(n,(function(){return e[t].sample(r,i,a)})):e[t].sample(r,i,a)},function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(r){var i=this._a,a=this._b,o=this._c;return r||0===r||(r=this.data),"number"!=typeof r?e.fn.map.call(r,(function(r){return e[t][n](r,i,a,o)})):e[t][n](r,i,a,o)}}(n[r])}("pdf cdf inv".split(" ")),function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(){return e[t][n](this._a,this._b,this._c)}}(n[r])}("mean median mode variance".split(" "))}(t[n])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(n,r,i){return n>1||n<0?0:1==r&&1==i?1:r<512&&i<512?t.pow(n,r-1)*t.pow(1-n,i-1)/e.betafn(r,i):t.exp((r-1)*t.log(n)+(i-1)*t.log(1-n)-e.betaln(r,i))},cdf:function(t,n,r){return t>1||t<0?1*(t>1):e.ibeta(t,n,r)},inv:function(t,n,r){return e.ibetainv(t,n,r)},mean:function(e,t){return e/(e+t)},median:function(t,n){return e.ibetainv(.5,t,n)},mode:function(e,t){return(e-1)/(e+t-2)},sample:function(t,n){var r=e.randg(t);return r/(r+e.randg(n))},variance:function(e,n){return e*n/(t.pow(e+n,2)*(e+n+1))}}),e.extend(e.centralF,{pdf:function(n,r,i){var a;return n<0?0:r<=2?0===n&&r<2?1/0:0===n&&2===r?1:1/e.betafn(r/2,i/2)*t.pow(r/i,r/2)*t.pow(n,r/2-1)*t.pow(1+r/i*n,-(r+i)/2):(a=r*n/(i+n*r),r*(i/(i+n*r))/2*e.binomial.pdf((r-2)/2,(r+i-2)/2,a))},cdf:function(t,n,r){return t<0?0:e.ibeta(n*t/(n*t+r),n/2,r/2)},inv:function(t,n,r){return r/(n*(1/e.ibetainv(t,n/2,r/2)-1))},mean:function(e,t){return t>2?t/(t-2):void 0},mode:function(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0},sample:function(t,n){return 2*e.randg(t/2)/t/(2*e.randg(n/2)/n)},variance:function(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}}),e.extend(e.cauchy,{pdf:function(e,n,r){return r<0?0:r/(t.pow(e-n,2)+t.pow(r,2))/t.PI},cdf:function(e,n,r){return t.atan((e-n)/r)/t.PI+.5},inv:function(e,n,r){return n+r*t.tan(t.PI*(e-.5))},median:function(e){return e},mode:function(e){return e},sample:function(n,r){return e.randn()*t.sqrt(1/(2*e.randg(.5)))*r+n}}),e.extend(e.chisquare,{pdf:function(n,r){return n<0?0:0===n&&2===r?.5:t.exp((r/2-1)*t.log(n)-n/2-r/2*t.log(2)-e.gammaln(r/2))},cdf:function(t,n){return t<0?0:e.lowRegGamma(n/2,t/2)},inv:function(t,n){return 2*e.gammapinv(t,.5*n)},mean:function(e){return e},median:function(e){return e*t.pow(1-2/(9*e),3)},mode:function(e){return e-2>0?e-2:0},sample:function(t){return 2*e.randg(t/2)},variance:function(e){return 2*e}}),e.extend(e.exponential,{pdf:function(e,n){return e<0?0:n*t.exp(-n*e)},cdf:function(e,n){return e<0?0:1-t.exp(-n*e)},inv:function(e,n){return-t.log(1-e)/n},mean:function(e){return 1/e},median:function(e){return 1/e*t.log(2)},mode:function(){return 0},sample:function(n){return-1/n*t.log(e._random_fn())},variance:function(e){return t.pow(e,-2)}}),e.extend(e.gamma,{pdf:function(n,r,i){return n<0?0:0===n&&1===r?1/i:t.exp((r-1)*t.log(n)-n/i-e.gammaln(r)-r*t.log(i))},cdf:function(t,n,r){return t<0?0:e.lowRegGamma(n,t/r)},inv:function(t,n,r){return e.gammapinv(t,n)*r},mean:function(e,t){return e*t},mode:function(e,t){if(e>1)return(e-1)*t},sample:function(t,n){return e.randg(t)*n},variance:function(e,t){return e*t*t}}),e.extend(e.invgamma,{pdf:function(n,r,i){return n<=0?0:t.exp(-(r+1)*t.log(n)-i/n-e.gammaln(r)+r*t.log(i))},cdf:function(t,n,r){return t<=0?0:1-e.lowRegGamma(n,r/t)},inv:function(t,n,r){return r/e.gammapinv(1-t,n)},mean:function(e,t){return e>1?t/(e-1):void 0},mode:function(e,t){return t/(e+1)},sample:function(t,n){return n/e.randg(t)},variance:function(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}}),e.extend(e.kumaraswamy,{pdf:function(e,n,r){return 0===e&&1===n?r:1===e&&1===r?n:t.exp(t.log(n)+t.log(r)+(n-1)*t.log(e)+(r-1)*t.log(1-t.pow(e,n)))},cdf:function(e,n,r){return e<0?0:e>1?1:1-t.pow(1-t.pow(e,n),r)},inv:function(e,n,r){return t.pow(1-t.pow(1-e,1/r),1/n)},mean:function(t,n){return n*e.gammafn(1+1/t)*e.gammafn(n)/e.gammafn(1+1/t+n)},median:function(e,n){return t.pow(1-t.pow(2,-1/n),1/e)},mode:function(e,n){if(e>=1&&n>=1&&1!==e&&1!==n)return t.pow((e-1)/(e*n-1),1/e)},variance:function(){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(e,n,r){return e<=0?0:t.exp(-t.log(e)-.5*t.log(2*t.PI)-t.log(r)-t.pow(t.log(e)-n,2)/(2*r*r))},cdf:function(n,r,i){return n<0?0:.5+.5*e.erf((t.log(n)-r)/t.sqrt(2*i*i))},inv:function(n,r,i){return t.exp(-1.4142135623730951*i*e.erfcinv(2*n)+r)},mean:function(e,n){return t.exp(e+n*n/2)},median:function(e){return t.exp(e)},mode:function(e,n){return t.exp(e-n*n)},sample:function(n,r){return t.exp(e.randn()*r+n)},variance:function(e,n){return(t.exp(n*n)-1)*t.exp(2*e+n*n)}}),e.extend(e.noncentralt,{pdf:function(n,r,i){var a=1e-14;return t.abs(i)<a?e.studentt.pdf(n,r):t.abs(n)<a?t.exp(e.gammaln((r+1)/2)-i*i/2-.5*t.log(t.PI*r)-e.gammaln(r/2)):r/n*(e.noncentralt.cdf(n*t.sqrt(1+2/r),r+2,i)-e.noncentralt.cdf(n,r,i))},cdf:function(n,r,i){var a=1e-14,o=200;if(t.abs(i)<a)return e.studentt.cdf(n,r);var s=!1;n<0&&(s=!0,i=-i);for(var c=e.normal.cdf(-i,0,1),l=a+1,u=l,p=n*n/(n*n+r),h=0,d=t.exp(-i*i/2),f=t.exp(-i*i/2-.5*t.log(2)-e.gammaln(1.5))*i;h<o||u>a||l>a;)u=l,h>0&&(d*=i*i/(2*h),f*=i*i/(2*(h+.5))),c+=.5*(l=d*e.beta.cdf(p,h+.5,r/2)+f*e.beta.cdf(p,h+1,r/2)),h++;return s?1-c:c}}),e.extend(e.normal,{pdf:function(e,n,r){return t.exp(-.5*t.log(2*t.PI)-t.log(r)-t.pow(e-n,2)/(2*r*r))},cdf:function(n,r,i){return.5*(1+e.erf((n-r)/t.sqrt(2*i*i)))},inv:function(t,n,r){return-1.4142135623730951*r*e.erfcinv(2*t)+n},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},sample:function(t,n){return e.randn()*n+t},variance:function(e,t){return t*t}}),e.extend(e.pareto,{pdf:function(e,n,r){return e<n?0:r*t.pow(n,r)/t.pow(e,r+1)},cdf:function(e,n,r){return e<n?0:1-t.pow(n/e,r)},inv:function(e,n,r){return n/t.pow(1-e,1/r)},mean:function(e,n){if(!(n<=1))return n*t.pow(e,n)/(n-1)},median:function(e,n){return e*(n*t.SQRT2)},mode:function(e){return e},variance:function(e,n){if(!(n<=2))return e*e*n/(t.pow(n-1,2)*(n-2))}}),e.extend(e.studentt,{pdf:function(n,r){return r=r>1e100?1e100:r,1/(t.sqrt(r)*e.betafn(.5,r/2))*t.pow(1+n*n/r,-(r+1)/2)},cdf:function(n,r){var i=r/2;return e.ibeta((n+t.sqrt(n*n+r))/(2*t.sqrt(n*n+r)),i,i)},inv:function(n,r){var i=e.ibetainv(2*t.min(n,1-n),.5*r,.5);return i=t.sqrt(r*(1-i)/i),n>.5?i:-i},mean:function(e){return e>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(n){return e.randn()*t.sqrt(n/(2*e.randg(n/2)))},variance:function(e){return e>2?e/(e-2):e>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(e,n,r){return e<0||n<0||r<0?0:r/n*t.pow(e/n,r-1)*t.exp(-t.pow(e/n,r))},cdf:function(e,n,r){return e<0?0:1-t.exp(-t.pow(e/n,r))},inv:function(e,n,r){return n*t.pow(-t.log(1-e),1/r)},mean:function(t,n){return t*e.gammafn(1+1/n)},median:function(e,n){return e*t.pow(t.log(2),1/n)},mode:function(e,n){return n<=1?0:e*t.pow((n-1)/n,1/n)},sample:function(n,r){return n*t.pow(-t.log(e._random_fn()),1/r)},variance:function(n,r){return n*n*e.gammafn(1+2/r)-t.pow(e.weibull.mean(n,r),2)}}),e.extend(e.uniform,{pdf:function(e,t,n){return e<t||e>n?0:1/(n-t)},cdf:function(e,t,n){return e<t?0:e<n?(e-t)/(n-t):1},inv:function(e,t,n){return t+e*(n-t)},mean:function(e,t){return.5*(e+t)},median:function(t,n){return e.mean(t,n)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(t,n){return t/2+n/2+(n/2-t/2)*(2*e._random_fn()-1)},variance:function(e,n){return t.pow(n-e,2)/12}}),e.extend(e.binomial,{pdf:function(n,r,i){return 0===i||1===i?r*i===n?1:0:e.combination(r,n)*t.pow(i,n)*t.pow(1-i,r-n)},cdf:function(r,i,a){var o,s=1e-10;if(r<0)return 0;if(r>=i)return 1;if(a<0||a>1||i<=0)return NaN;var c=a,l=(r=t.floor(r))+1,u=i-r,p=l+u,h=t.exp(e.gammaln(p)-e.gammaln(u)-e.gammaln(l)+l*t.log(c)+u*t.log(1-c));return o=c<(l+1)/(p+2)?h*n(c,l,u,s):1-h*n(1-c,u,l,s),t.round(1/s*(1-o))/(1/s)}}),e.extend(e.negbin,{pdf:function(n,r,i){return n===n>>>0&&(n<0?0:e.combination(n+r-1,r-1)*t.pow(1-i,n)*t.pow(i,r))},cdf:function(t,n,r){var i=0,a=0;if(t<0)return 0;for(;a<=t;a++)i+=e.negbin.pdf(a,n,r);return i}}),e.extend(e.hypgeom,{pdf:function(n,r,i,a){if(n!=n|0)return!1;if(n<0||n<i-(r-a))return 0;if(n>a||n>i)return 0;if(2*i>r)return 2*a>r?e.hypgeom.pdf(r-i-a+n,r,r-i,r-a):e.hypgeom.pdf(a-n,r,r-i,a);if(2*a>r)return e.hypgeom.pdf(i-n,r,i,r-a);if(i<a)return e.hypgeom.pdf(n,r,a,i);for(var o=1,s=0,c=0;c<n;c++){for(;o>1&&s<a;)o*=1-i/(r-s),s++;o*=(a-c)*(i-c)/((c+1)*(r-i-a+c+1))}for(;s<a;s++)o*=1-i/(r-s);return t.min(1,t.max(0,o))},cdf:function(n,r,i,a){if(n<0||n<i-(r-a))return 0;if(n>=a||n>=i)return 1;if(2*i>r)return 2*a>r?e.hypgeom.cdf(r-i-a+n,r,r-i,r-a):1-e.hypgeom.cdf(a-n-1,r,r-i,a);if(2*a>r)return 1-e.hypgeom.cdf(i-n-1,r,i,r-a);if(i<a)return e.hypgeom.cdf(n,r,a,i);for(var o=1,s=1,c=0,l=0;l<n;l++){for(;o>1&&c<a;){var u=1-i/(r-c);s*=u,o*=u,c++}o+=s*=(a-l)*(i-l)/((l+1)*(r-i-a+l+1))}for(;c<a;c++)o*=1-i/(r-c);return t.min(1,t.max(0,o))}}),e.extend(e.poisson,{pdf:function(n,r){return r<0||n%1!=0||n<0?0:t.pow(r,n)*t.exp(-r)/e.factorial(n)},cdf:function(t,n){var r=[],i=0;if(t<0)return 0;for(;i<=t;i++)r.push(e.poisson.pdf(i,n));return e.sum(r)},mean:function(e){return e},variance:function(e){return e},sampleSmall:function(n){var r=1,i=0,a=t.exp(-n);do{i++,r*=e._random_fn()}while(r>a);return i-1},sampleLarge:function(n){var r,i,a,o,s,c,l,u,p,h,d=n;for(o=t.sqrt(d),s=t.log(d),c=.02483*(l=.931+2.53*o)-.059,u=1.1239+1.1328/(l-3.4),p=.9277-3.6224/(l-2);;){if(i=t.random()-.5,a=t.random(),h=.5-t.abs(i),r=t.floor((2*c/h+l)*i+d+.43),h>=.07&&a<=p)return r;if(!(r<0||h<.013&&a>h)&&t.log(a)+t.log(u)-t.log(c/(h*h)+l)<=r*s-d-e.loggam(r+1))return r}},sample:function(e){return e<10?this.sampleSmall(e):this.sampleLarge(e)}}),e.extend(e.triangular,{pdf:function(e,t,n,r){return n<=t||r<t||r>n?NaN:e<t||e>n?0:e<r?2*(e-t)/((n-t)*(r-t)):e===r?2/(n-t):2*(n-e)/((n-t)*(n-r))},cdf:function(e,n,r,i){return r<=n||i<n||i>r?NaN:e<=n?0:e>=r?1:e<=i?t.pow(e-n,2)/((r-n)*(i-n)):1-t.pow(r-e,2)/((r-n)*(r-i))},inv:function(e,n,r,i){return r<=n||i<n||i>r?NaN:e<=(i-n)/(r-n)?n+(r-n)*t.sqrt(e*((i-n)/(r-n))):n+(r-n)*(1-t.sqrt((1-e)*(1-(i-n)/(r-n))))},mean:function(e,t,n){return(e+t+n)/3},median:function(e,n,r){return r<=(e+n)/2?n-t.sqrt((n-e)*(n-r))/t.sqrt(2):r>(e+n)/2?e+t.sqrt((n-e)*(r-e))/t.sqrt(2):void 0},mode:function(e,t,n){return n},sample:function(n,r,i){var a=e._random_fn();return a<(i-n)/(r-n)?n+t.sqrt(a*(r-n)*(i-n)):r-t.sqrt((1-a)*(r-n)*(r-i))},variance:function(e,t,n){return(e*e+t*t+n*n-e*t-e*n-t*n)/18}}),e.extend(e.arcsine,{pdf:function(e,n,r){return r<=n?NaN:e<=n||e>=r?0:2/t.PI*t.pow(t.pow(r-n,2)-t.pow(2*e-n-r,2),-.5)},cdf:function(e,n,r){return e<n?0:e<r?2/t.PI*t.asin(t.sqrt((e-n)/(r-n))):1},inv:function(e,n,r){return n+(.5-.5*t.cos(t.PI*e))*(r-n)},mean:function(e,t){return t<=e?NaN:(e+t)/2},median:function(e,t){return t<=e?NaN:(e+t)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(n,r){return(n+r)/2+(r-n)/2*t.sin(2*t.PI*e.uniform.sample(0,1))},variance:function(e,n){return n<=e?NaN:t.pow(n-e,2)/8}}),e.extend(e.laplace,{pdf:function(e,n,r){return r<=0?0:t.exp(-t.abs(e-n)/r)/(2*r)},cdf:function(e,n,r){return r<=0?0:e<n?.5*t.exp((e-n)/r):1-.5*t.exp(-(e-n)/r)},mean:function(e){return e},median:function(e){return e},mode:function(e){return e},variance:function(e,t){return 2*t*t},sample:function(n,i){var a=e._random_fn()-.5;return n-i*r(a)*t.log(1-2*t.abs(a))}}),e.extend(e.tukey,{cdf:function(n,r,a){var o=1,s=r,c=16,l=8,u=-30,p=1e-14,h=100,d=800,f=5e3,g=25e3,m=1,v=.5,b=.25,y=.125,x=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],C=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(n<=0)return 0;if(a<2||o<1||s<2)return NaN;if(!Number.isFinite(n))return 1;if(a>g)return i(n,o,s);var w,k=.5*a,S=k*t.log(a)-a*t.log(2)-e.gammaln(k),O=k-1,E=.25*a;w=a<=h?m:a<=d?v:a<=f?b:y,S+=t.log(w);for(var _=0,I=1;I<=50;I++){for(var P=0,T=(2*I-1)*w,A=1;A<=c;A++){var M,D;l<A?(M=A-l-1,D=S+O*t.log(T+x[M]*w)-(x[M]*w+T)*E):(M=A-1,D=S+O*t.log(T-x[M]*w)+(x[M]*w-T)*E),D>=u&&(P+=i(l<A?n*t.sqrt(.5*(x[M]*w+T)):n*t.sqrt(.5*(-x[M]*w+T)),o,s)*C[M]*t.exp(D))}if(I*w>=1&&P<=p)break;_+=P}if(P>p)throw new Error("tukey.cdf failed to converge");return _>1&&(_=1),_},inv:function(n,r,i){var o=1e-4,s=50;if(i<2||r<2)return NaN;if(n<0||n>1)return NaN;if(0===n)return 0;if(1===n)return 1/0;var c,l=a(n,r,i),u=e.tukey.cdf(l,r,i)-n;c=u>0?t.max(0,l-1):l+1;for(var p,h=e.tukey.cdf(c,r,i)-n,d=1;d<s;d++)if(p=c-h*(c-l)/(h-u),u=h,l=c,p<0&&(p=0,h=-n),h=e.tukey.cdf(p,r,i)-n,c=p,t.abs(c-l)<o)return p;throw new Error("tukey.inv failed to converge")}})}(r,Math),function(e,t){var n=Array.prototype.push,r=e.utils.isArray;function i(t){return r(t)||t instanceof e}e.extend({add:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.map(t,(function(e,t,r){return e+n[t][r]}))):e.map(t,(function(e){return e+n}))},subtract:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.map(t,(function(e,t,r){return e-n[t][r]||0}))):e.map(t,(function(e){return e-n}))},divide:function(t,n){return i(n)?(i(n[0])||(n=[n]),e.multiply(t,e.inv(n))):e.map(t,(function(e){return e/n}))},multiply:function(t,n){var r,a,o,s,c,l,u,p;if(void 0===t.length&&void 0===n.length)return t*n;if(c=t.length,l=t[0].length,u=e.zeros(c,o=i(n)?n[0].length:l),p=0,i(n)){for(;p<o;p++)for(r=0;r<c;r++){for(s=0,a=0;a<l;a++)s+=t[r][a]*n[a][p];u[r][p]=s}return 1===c&&1===p?u[0][0]:u}return e.map(t,(function(e){return e*n}))},outer:function(t,n){return e.multiply(t.map((function(e){return[e]})),[n])},dot:function(t,n){i(t[0])||(t=[t]),i(n[0])||(n=[n]);for(var r,a,o=1===t[0].length&&1!==t.length?e.transpose(t):t,s=1===n[0].length&&1!==n.length?e.transpose(n):n,c=[],l=0,u=o.length,p=o[0].length;l<u;l++){for(c[l]=[],r=0,a=0;a<p;a++)r+=o[l][a]*s[l][a];c[l]=r}return 1===c.length?c[0]:c},pow:function(n,r){return e.map(n,(function(e){return t.pow(e,r)}))},exp:function(n){return e.map(n,(function(e){return t.exp(e)}))},log:function(n){return e.map(n,(function(e){return t.log(e)}))},abs:function(n){return e.map(n,(function(e){return t.abs(e)}))},norm:function(e,n){var r=0,a=0;for(isNaN(n)&&(n=2),i(e[0])&&(e=e[0]);a<e.length;a++)r+=t.pow(t.abs(e[a]),n);return t.pow(r,1/n)},angle:function(n,r){return t.acos(e.dot(n,r)/(e.norm(n)*e.norm(r)))},aug:function(e,t){var r,i=[];for(r=0;r<e.length;r++)i.push(e[r].slice());for(r=0;r<i.length;r++)n.apply(i[r],t[r]);return i},inv:function(t){for(var n,r=t.length,i=t[0].length,a=e.identity(r,i),o=e.gauss_jordan(t,a),s=[],c=0;c<r;c++)for(s[c]=[],n=i;n<o[0].length;n++)s[c][n-i]=o[c][n];return s},det:function(e){var t,n=e.length,r=2*n,i=new Array(r),a=n-1,o=r-1,s=a-n+1,c=o,l=0,u=0;if(2===n)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)i[l]=1;for(l=0;l<n;l++){for(t=0;t<n;t++)i[s<0?s+n:s]*=e[l][t],i[c<n?c+n:c]*=e[l][t],s++,c--;s=--a-n+1,c=--o}for(l=0;l<n;l++)u+=i[l];for(;l<r;l++)u-=i[l];return u},gauss_elimination:function(n,r){var i,a,o,s,c=0,l=0,u=n.length,p=n[0].length,h=1,d=0,f=[];for(i=(n=e.aug(n,r))[0].length,c=0;c<u;c++){for(a=n[c][c],l=c,s=c+1;s<p;s++)a<t.abs(n[s][c])&&(a=n[s][c],l=s);if(l!=c)for(s=0;s<i;s++)o=n[c][s],n[c][s]=n[l][s],n[l][s]=o;for(l=c+1;l<u;l++)for(h=n[l][c]/n[c][c],s=c;s<i;s++)n[l][s]=n[l][s]-h*n[c][s]}for(c=u-1;c>=0;c--){for(d=0,l=c+1;l<=u-1;l++)d+=f[l]*n[c][l];f[c]=(n[c][i-1]-d)/n[c][c]}return f},gauss_jordan:function(n,r){var i,a,o,s=e.aug(n,r),c=s.length,l=s[0].length,u=0;for(a=0;a<c;a++){var p=a;for(o=a+1;o<c;o++)t.abs(s[o][a])>t.abs(s[p][a])&&(p=o);var h=s[a];for(s[a]=s[p],s[p]=h,o=a+1;o<c;o++)for(u=s[o][a]/s[a][a],i=a;i<l;i++)s[o][i]-=s[a][i]*u}for(a=c-1;a>=0;a--){for(u=s[a][a],o=0;o<a;o++)for(i=l-1;i>a-1;i--)s[o][i]-=s[a][i]*s[o][a]/u;for(s[a][a]/=u,i=c;i<l;i++)s[a][i]/=u}return s},triaUpSolve:function(t,n){var r,i=t[0].length,a=e.zeros(1,i)[0],o=!1;return null!=n[0].length&&(n=n.map((function(e){return e[0]})),o=!0),e.arange(i-1,-1,-1).forEach((function(o){r=e.arange(o+1,i).map((function(e){return a[e]*t[o][e]})),a[o]=(n[o]-e.sum(r))/t[o][o]})),o?a.map((function(e){return[e]})):a},triaLowSolve:function(t,n){var r,i=t[0].length,a=e.zeros(1,i)[0],o=!1;return null!=n[0].length&&(n=n.map((function(e){return e[0]})),o=!0),e.arange(i).forEach((function(i){r=e.arange(i).map((function(e){return t[i][e]*a[e]})),a[i]=(n[i]-e.sum(r))/t[i][i]})),o?a.map((function(e){return[e]})):a},lu:function(t){var n,r=t.length,i=e.identity(r),a=e.zeros(t.length,t[0].length);return e.arange(r).forEach((function(e){a[0][e]=t[0][e]})),e.arange(1,r).forEach((function(o){e.arange(o).forEach((function(r){n=e.arange(r).map((function(e){return i[o][e]*a[e][r]})),i[o][r]=(t[o][r]-e.sum(n))/a[r][r]})),e.arange(o,r).forEach((function(r){n=e.arange(o).map((function(e){return i[o][e]*a[e][r]})),a[o][r]=t[n.length][r]-e.sum(n)}))})),[i,a]},cholesky:function(n){var r,i=n.length,a=e.zeros(n.length,n[0].length);return e.arange(i).forEach((function(o){r=e.arange(o).map((function(e){return t.pow(a[o][e],2)})),a[o][o]=t.sqrt(n[o][o]-e.sum(r)),e.arange(o+1,i).forEach((function(t){r=e.arange(o).map((function(e){return a[o][e]*a[t][e]})),a[t][o]=(n[o][t]-e.sum(r))/a[o][o]}))})),a},gauss_jacobi:function(n,r,i,a){for(var o,s,c,l,u=0,p=0,h=n.length,d=[],f=[],g=[];u<h;u++)for(d[u]=[],f[u]=[],g[u]=[],p=0;p<h;p++)u>p?(d[u][p]=n[u][p],f[u][p]=g[u][p]=0):u<p?(f[u][p]=n[u][p],d[u][p]=g[u][p]=0):(g[u][p]=n[u][p],d[u][p]=f[u][p]=0);for(c=e.multiply(e.multiply(e.inv(g),e.add(d,f)),-1),s=e.multiply(e.inv(g),r),o=i,l=e.add(e.multiply(c,i),s),u=2;t.abs(e.norm(e.subtract(l,o)))>a;)o=l,l=e.add(e.multiply(c,o),s),u++;return l},gauss_seidel:function(n,r,i,a){for(var o,s,c,l,u,p=0,h=n.length,d=[],f=[],g=[];p<h;p++)for(d[p]=[],f[p]=[],g[p]=[],o=0;o<h;o++)p>o?(d[p][o]=n[p][o],f[p][o]=g[p][o]=0):p<o?(f[p][o]=n[p][o],d[p][o]=g[p][o]=0):(g[p][o]=n[p][o],d[p][o]=f[p][o]=0);for(l=e.multiply(e.multiply(e.inv(e.add(g,d)),f),-1),c=e.multiply(e.inv(e.add(g,d)),r),s=i,u=e.add(e.multiply(l,i),c),p=2;t.abs(e.norm(e.subtract(u,s)))>a;)s=u,u=e.add(e.multiply(l,s),c),p+=1;return u},SOR:function(n,r,i,a,o){for(var s,c,l,u,p,h=0,d=n.length,f=[],g=[],m=[];h<d;h++)for(f[h]=[],g[h]=[],m[h]=[],s=0;s<d;s++)h>s?(f[h][s]=n[h][s],g[h][s]=m[h][s]=0):h<s?(g[h][s]=n[h][s],f[h][s]=m[h][s]=0):(m[h][s]=n[h][s],f[h][s]=g[h][s]=0);for(u=e.multiply(e.inv(e.add(m,e.multiply(f,o))),e.subtract(e.multiply(m,1-o),e.multiply(g,o))),l=e.multiply(e.multiply(e.inv(e.add(m,e.multiply(f,o))),r),o),c=i,p=e.add(e.multiply(u,i),l),h=2;t.abs(e.norm(e.subtract(p,c)))>a;)c=p,p=e.add(e.multiply(u,c),l),h++;return p},householder:function(n){for(var r,i,a,o,s=n.length,c=n[0].length,l=0,u=[],p=[];l<s-1;l++){for(r=0,o=l+1;o<c;o++)r+=n[o][l]*n[o][l];for(r=(n[l+1][l]>0?-1:1)*t.sqrt(r),i=t.sqrt((r*r-n[l+1][l]*r)/2),(u=e.zeros(s,1))[l+1][0]=(n[l+1][l]-r)/(2*i),a=l+2;a<s;a++)u[a][0]=n[a][l]/(2*i);p=e.subtract(e.identity(s,c),e.multiply(e.multiply(u,e.transpose(u)),2)),n=e.multiply(p,e.multiply(n,p))}return n},QR:function(){var n=e.sum,r=e.arange;function i(i){var a,o,s,c=i.length,l=i[0].length,u=e.zeros(l,l);for(i=e.copy(i),o=0;o<l;o++){for(u[o][o]=t.sqrt(n(r(c).map((function(e){return i[e][o]*i[e][o]})))),a=0;a<c;a++)i[a][o]=i[a][o]/u[o][o];for(s=o+1;s<l;s++)for(u[o][s]=n(r(c).map((function(e){return i[e][o]*i[e][s]}))),a=0;a<c;a++)i[a][s]=i[a][s]-i[a][o]*u[o][s]}return[i,u]}return i}(),lstsq:function(){function t(t){var n=(t=e.copy(t)).length,r=e.identity(n);return e.arange(n-1,-1,-1).forEach((function(n){e.sliceAssign(r,{row:n},e.divide(e.slice(r,{row:n}),t[n][n])),e.sliceAssign(t,{row:n},e.divide(e.slice(t,{row:n}),t[n][n])),e.arange(n).forEach((function(i){var a=e.multiply(t[i][n],-1),o=e.slice(t,{row:i}),s=e.multiply(e.slice(t,{row:n}),a);e.sliceAssign(t,{row:i},e.add(o,s));var c=e.slice(r,{row:i}),l=e.multiply(e.slice(r,{row:n}),a);e.sliceAssign(r,{row:i},e.add(c,l))}))})),r}function n(n,r){var i=!1;void 0===r[0].length&&(r=r.map((function(e){return[e]})),i=!0);var a=e.QR(n),o=a[0],s=a[1],c=n[0].length,l=e.slice(o,{col:{end:c}}),u=t(e.slice(s,{row:{end:c}})),p=e.transpose(l);void 0===p[0].length&&(p=[p]);var h=e.multiply(e.multiply(u,p),r);return void 0===h.length&&(h=[[h]]),i?h.map((function(e){return e[0]})):h}return n}(),jacobi:function(n){for(var r,i,a,o,s,c,l,u=1,p=n.length,h=e.identity(p,p),d=[];1===u;){for(s=n[0][1],a=0,o=1,r=0;r<p;r++)for(i=0;i<p;i++)r!=i&&s<t.abs(n[r][i])&&(s=t.abs(n[r][i]),a=r,o=i);for(c=n[a][a]===n[o][o]?n[a][o]>0?t.PI/4:-t.PI/4:t.atan(2*n[a][o]/(n[a][a]-n[o][o]))/2,(l=e.identity(p,p))[a][a]=t.cos(c),l[a][o]=-t.sin(c),l[o][a]=t.sin(c),l[o][o]=t.cos(c),h=e.multiply(h,l),n=e.multiply(e.multiply(e.inv(l),n),l),u=0,r=1;r<p;r++)for(i=1;i<p;i++)r!=i&&t.abs(n[r][i])>.001&&(u=1)}for(r=0;r<p;r++)d.push(n[r][r]);return[h,d]},rungekutta:function(e,t,n,r,i,a){var o,s,c;if(2===a)for(;r<=n;)i+=((o=t*e(r,i))+(s=t*e(r+t,i+o)))/2,r+=t;if(4===a)for(;r<=n;)i+=((o=t*e(r,i))+2*(s=t*e(r+t/2,i+o/2))+2*(c=t*e(r+t/2,i+s/2))+t*e(r+t,i+c))/6,r+=t;return i},romberg:function(e,n,r,i){for(var a,o,s,c,l,u=0,p=(r-n)/2,h=[],d=[],f=[];u<i/2;){for(l=e(n),s=n,c=0;s<=r;s+=p,c++)h[c]=s;for(a=h.length,s=1;s<a-1;s++)l+=(s%2!=0?4:2)*e(h[s]);l=p/3*(l+e(r)),f[u]=l,p/=2,u++}for(o=f.length,a=1;1!==o;){for(s=0;s<o-1;s++)d[s]=(t.pow(4,a)*f[s+1]-f[s])/(t.pow(4,a)-1);o=d.length,f=d,d=[],a++}return f},richardson:function(e,n,r,i){function a(e,t){for(var n,r=0,i=e.length;r<i;r++)e[r]===t&&(n=r);return n}for(var o,s,c,l,u,p=t.abs(r-e[a(e,r)+1]),h=0,d=[],f=[];i>=p;)o=a(e,r+i),s=a(e,r),d[h]=(n[o]-2*n[s]+n[2*s-o])/(i*i),i/=2,h++;for(l=d.length,c=1;1!=l;){for(u=0;u<l-1;u++)f[u]=(t.pow(4,c)*d[u+1]-d[u])/(t.pow(4,c)-1);l=f.length,d=f,f=[],c++}return d},simpson:function(e,t,n,r){for(var i,a=(n-t)/r,o=e(t),s=[],c=t,l=0,u=1;c<=n;c+=a,l++)s[l]=c;for(i=s.length;u<i-1;u++)o+=(u%2!=0?4:2)*e(s[u]);return a/3*(o+e(n))},hermite:function(e,t,n,r){for(var i,a=e.length,o=0,s=0,c=[],l=[],u=[],p=[];s<a;s++){for(c[s]=1,i=0;i<a;i++)s!=i&&(c[s]*=(r-e[i])/(e[s]-e[i]));for(l[s]=0,i=0;i<a;i++)s!=i&&(l[s]+=1/(e[s]-e[i]));u[s]=(1-2*(r-e[s])*l[s])*(c[s]*c[s]),p[s]=(r-e[s])*(c[s]*c[s]),o+=u[s]*t[s]+p[s]*n[s]}return o},lagrange:function(e,t,n){for(var r,i,a=0,o=0,s=e.length;o<s;o++){for(i=t[o],r=0;r<s;r++)o!=r&&(i*=(n-e[r])/(e[o]-e[r]));a+=i}return a},cubic_spline:function(t,n,r){for(var i,a=t.length,o=0,s=[],c=[],l=[],u=[],p=[],h=[],d=[];o<a-1;o++)p[o]=t[o+1]-t[o];for(l[0]=0,o=1;o<a-1;o++)l[o]=3/p[o]*(n[o+1]-n[o])-3/p[o-1]*(n[o]-n[o-1]);for(o=1;o<a-1;o++)s[o]=[],c[o]=[],s[o][o-1]=p[o-1],s[o][o]=2*(p[o-1]+p[o]),s[o][o+1]=p[o],c[o][0]=l[o];for(u=e.multiply(e.inv(s),c),i=0;i<a-1;i++)h[i]=(n[i+1]-n[i])/p[i]-p[i]*(u[i+1][0]+2*u[i][0])/3,d[i]=(u[i+1][0]-u[i][0])/(3*p[i]);for(i=0;i<a&&!(t[i]>r);i++);return n[i-=1]+(r-t[i])*h[i]+e.sq(r-t[i])*u[i]+(r-t[i])*e.sq(r-t[i])*d[i]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(t){var n,r,i=t.length,a=t[0].length,o=0,s=[],c=[],l=[],u=[],p=[],h=[],d=[],f=[],g=[],m=[];for(o=0;o<i;o++)s[o]=e.sum(t[o])/a;for(o=0;o<a;o++)for(d[o]=[],n=0;n<i;n++)d[o][n]=t[n][o]-s[n];for(d=e.transpose(d),o=0;o<i;o++)for(f[o]=[],n=0;n<i;n++)f[o][n]=e.dot([d[o]],[d[n]])/(a-1);for(g=(l=e.jacobi(f))[0],c=l[1],m=e.transpose(g),o=0;o<c.length;o++)for(n=o;n<c.length;n++)c[o]<c[n]&&(r=c[o],c[o]=c[n],c[n]=r,u=m[o],m[o]=m[n],m[n]=u);for(h=e.transpose(d),o=0;o<i;o++)for(p[o]=[],n=0;n<h.length;n++)p[o][n]=e.dot([m[o]],[h[n]]);return[t,c,m,p]}}),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(n,r){var i=this;return r?(setTimeout((function(){r.call(i,e.fn[t].call(i,n))}),15),this):"number"==typeof e[t](this,n)?e[t](this,n):e(e[t](this,n))}}(t[n])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(r,Math),function(e,t){var n=[].slice,r=e.utils.isNumber,i=e.utils.isArray;function a(e,n,r,i){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var a=(e*n+r*i)/(n+i);return(e-r)/t.sqrt(a*(1-a)*(1/n+1/i))}e.extend({zscore:function(){var t=n.call(arguments);return r(t[1])?(t[0]-t[1])/t[2]:(t[0]-e.mean(t[1]))/e.stdev(t[1],t[2])},ztest:function(){var r,a=n.call(arguments);return i(a[1])?(r=e.zscore(a[0],a[1],a[3]),1===a[2]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1)):a.length>2?(r=e.zscore(a[0],a[1],a[2]),1===a[3]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1)):(r=a[0],1===a[1]?e.normal.cdf(-t.abs(r),0,1):2*e.normal.cdf(-t.abs(r),0,1))}}),e.extend(e.fn,{zscore:function(e,t){return(e-this.mean())/this.stdev(t)},ztest:function(n,r,i){var a=t.abs(this.zscore(n,i));return 1===r?e.normal.cdf(-a,0,1):2*e.normal.cdf(-a,0,1)}}),e.extend({tscore:function(){var r=n.call(arguments);return 4===r.length?(r[0]-r[1])/(r[2]/t.sqrt(r[3])):(r[0]-e.mean(r[1]))/(e.stdev(r[1],!0)/t.sqrt(r[1].length))},ttest:function(){var i,a=n.call(arguments);return 5===a.length?(i=t.abs(e.tscore(a[0],a[1],a[2],a[3])),1===a[4]?e.studentt.cdf(-i,a[3]-1):2*e.studentt.cdf(-i,a[3]-1)):r(a[1])?(i=t.abs(a[0]),1==a[2]?e.studentt.cdf(-i,a[1]-1):2*e.studentt.cdf(-i,a[1]-1)):(i=t.abs(e.tscore(a[0],a[1])),1==a[2]?e.studentt.cdf(-i,a[1].length-1):2*e.studentt.cdf(-i,a[1].length-1))}}),e.extend(e.fn,{tscore:function(e){return(e-this.mean())/(this.stdev(!0)/t.sqrt(this.cols()))},ttest:function(n,r){return 1===r?1-e.studentt.cdf(t.abs(this.tscore(n)),this.cols()-1):2*e.studentt.cdf(-t.abs(this.tscore(n)),this.cols()-1)}}),e.extend({anovafscore:function(){var r,i,a,o,s,c,l,u,p=n.call(arguments);if(1===p.length){for(s=new Array(p[0].length),l=0;l<p[0].length;l++)s[l]=p[0][l];p=s}for(i=new Array,l=0;l<p.length;l++)i=i.concat(p[l]);for(a=e.mean(i),r=0,l=0;l<p.length;l++)r+=p[l].length*t.pow(e.mean(p[l])-a,2);for(r/=p.length-1,c=0,l=0;l<p.length;l++)for(o=e.mean(p[l]),u=0;u<p[l].length;u++)c+=t.pow(p[l][u]-o,2);return r/(c/=i.length-p.length)},anovaftest:function(){var t,i,a,o,s=n.call(arguments);if(r(s[0]))return 1-e.centralF.cdf(s[0],s[1],s[2]);var c=e.anovafscore(s);for(t=s.length-1,a=0,o=0;o<s.length;o++)a+=s[o].length;return i=a-t-1,1-e.centralF.cdf(c,t,i)},ftest:function(t,n,r){return 1-e.centralF.cdf(t,n,r)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){var t,n=0;for(t=0;t<this.length;t++)n+=this[t].length;return e.ftest(this.anovafscore(),this.length-1,n-this.length)}}),e.extend({qscore:function(){var i,a,o,s,c,l=n.call(arguments);return r(l[0])?(i=l[0],a=l[1],o=l[2],s=l[3],c=l[4]):(i=e.mean(l[0]),a=e.mean(l[1]),o=l[0].length,s=l[1].length,c=l[2]),t.abs(i-a)/(c*t.sqrt((1/o+1/s)/2))},qtest:function(){var t,r=n.call(arguments);3===r.length?(t=r[0],r=r.slice(1)):7===r.length?(t=e.qscore(r[0],r[1],r[2],r[3],r[4]),r=r.slice(5)):(t=e.qscore(r[0],r[1],r[2]),r=r.slice(3));var i=r[0],a=r[1];return 1-e.tukey.cdf(t,a,i-a)},tukeyhsd:function(t){for(var n=e.pooledstdev(t),r=t.map((function(t){return e.mean(t)})),i=t.reduce((function(e,t){return e+t.length}),0),a=[],o=0;o<t.length;++o)for(var s=o+1;s<t.length;++s){var c=e.qtest(r[o],r[s],t[o].length,t[s].length,n,i,t.length);a.push([[o,s],c])}return a}}),e.extend({normalci:function(){var r,i=n.call(arguments),a=new Array(2);return r=4===i.length?t.abs(e.normal.inv(i[1]/2,0,1)*i[2]/t.sqrt(i[3])):t.abs(e.normal.inv(i[1]/2,0,1)*e.stdev(i[2])/t.sqrt(i[2].length)),a[0]=i[0]-r,a[1]=i[0]+r,a},tci:function(){var r,i=n.call(arguments),a=new Array(2);return r=4===i.length?t.abs(e.studentt.inv(i[1]/2,i[3]-1)*i[2]/t.sqrt(i[3])):t.abs(e.studentt.inv(i[1]/2,i[2].length-1)*e.stdev(i[2],!0)/t.sqrt(i[2].length)),a[0]=i[0]-r,a[1]=i[0]+r,a},significant:function(e,t){return e<t}}),e.extend(e.fn,{normalci:function(t,n){return e.normalci(t,n,this.toArray())},tci:function(t,n){return e.tci(t,n,this.toArray())}}),e.extend(e.fn,{oneSidedDifferenceOfProportions:function(t,n,r,i){var o=a(t,n,r,i);return e.ztest(o,1)},twoSidedDifferenceOfProportions:function(t,n,r,i){var o=a(t,n,r,i);return e.ztest(o,2)}})}(r,Math),r.models=function(){function e(e){var n=e[0].length;return r.arange(n).map((function(i){var a=r.arange(n).filter((function(e){return e!==i}));return t(r.col(e,i).map((function(e){return e[0]})),r.col(e,a))}))}function t(e,t){var n=e.length,i=t[0].length-1,a=n-i-1,o=r.lstsq(t,e),s=r.multiply(t,o.map((function(e){return[e]}))).map((function(e){return e[0]})),c=r.subtract(e,s),l=r.mean(e),u=r.sum(s.map((function(e){return Math.pow(e-l,2)}))),p=r.sum(e.map((function(e,t){return Math.pow(e-s[t],2)}))),h=u+p;return{exog:t,endog:e,nobs:n,df_model:i,df_resid:a,coef:o,predict:s,resid:c,ybar:l,SST:h,SSE:u,SSR:p,R2:u/h}}function n(t){var n=e(t.exog),i=Math.sqrt(t.SSR/t.df_resid),a=n.map((function(e){var t=e.SST,n=e.R2;return i/Math.sqrt(t*(1-n))})),o=t.coef.map((function(e,t){return(e-0)/a[t]})),s=o.map((function(e){var n=r.studentt.cdf(e,t.df_resid);return 2*(n>.5?1-n:n)})),c=r.studentt.inv(.975,t.df_resid),l=t.coef.map((function(e,t){var n=c*a[t];return[e-n,e+n]}));return{se:a,t:o,p:s,sigmaHat:i,interval95:l}}function i(e){var t,n,i,a=e.R2/e.df_model/((1-e.R2)/e.df_resid);return{F_statistic:a,pvalue:1-(t=a,n=e.df_model,i=e.df_resid,r.beta.cdf(t/(i/n+t),n/2,i/2))}}function a(e,r){var a=t(e,r),o=n(a),s=i(a),c=1-(1-a.R2)*((a.nobs-1)/a.df_resid);return a.t=o,a.f=s,a.adjust_R2=c,a}return{ols:a}}(),r.extend({buildxmatrix:function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;t++){var n=[1];e[t]=n.concat(arguments[t])}return r(e)},builddxmatrix:function(){for(var e=new Array(arguments[0].length),t=0;t<arguments[0].length;t++){var n=[1];e[t]=n.concat(arguments[0][t])}return r(e)},buildjxmatrix:function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return r.builddxmatrix(t)},buildymatrix:function(e){return r(e).transpose()},buildjymatrix:function(e){return e.transpose()},matrixmult:function(e,t){var n,i,a,o,s;if(e.cols()==t.rows()){if(t.rows()>1){for(o=[],n=0;n<e.rows();n++)for(o[n]=[],i=0;i<t.cols();i++){for(s=0,a=0;a<e.cols();a++)s+=e.toArray()[n][a]*t.toArray()[a][i];o[n][i]=s}return r(o)}for(o=[],n=0;n<e.rows();n++)for(o[n]=[],i=0;i<t.cols();i++){for(s=0,a=0;a<e.cols();a++)s+=e.toArray()[n][a]*t.toArray()[i];o[n][i]=s}return r(o)}},regress:function(e,t){var n=r.xtranspxinv(e),i=e.transpose(),a=r.matrixmult(r(n),i);return r.matrixmult(a,t)},regresst:function(e,t,n){var i=r.regress(e,t),a={anova:{}},o=r.jMatYBar(e,i);a.yBar=o;var s=t.mean();a.anova.residuals=r.residuals(t,o),a.anova.ssr=r.ssr(o,s),a.anova.msr=a.anova.ssr/(e[0].length-1),a.anova.sse=r.sse(t,o),a.anova.mse=a.anova.sse/(t.length-(e[0].length-1)-1),a.anova.sst=r.sst(t,s),a.anova.mst=a.anova.sst/(t.length-1),a.anova.r2=1-a.anova.sse/a.anova.sst,a.anova.r2<0&&(a.anova.r2=0),a.anova.fratio=a.anova.msr/a.anova.mse,a.anova.pvalue=r.anovaftest(a.anova.fratio,e[0].length-1,t.length-(e[0].length-1)-1),a.anova.rmse=Math.sqrt(a.anova.mse),a.anova.r2adj=1-a.anova.mse/a.anova.mst,a.anova.r2adj<0&&(a.anova.r2adj=0),a.stats=new Array(e[0].length);for(var c,l,u,p=r.xtranspxinv(e),h=0;h<i.length;h++)c=Math.sqrt(a.anova.mse*Math.abs(p[h][h])),l=Math.abs(i[h]/c),u=r.ttest(l,t.length-e[0].length-1,n),a.stats[h]=[i[h],c,l,u];return a.regress=i,a},xtranspx:function(e){return r.matrixmult(e.transpose(),e)},xtranspxinv:function(e){var t=r.matrixmult(e.transpose(),e);return r.inv(t)},jMatYBar:function(e,t){var n=r.matrixmult(e,t);return new r(n)},residuals:function(e,t){return r.matrixsubtract(e,t)},ssr:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},sse:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n},sst:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},matrixsubtract:function(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++){n[i]=new Array(e[i].length);for(var a=0;a<e[i].length;a++)n[i][a]=e[i][a]-t[i][a]}return r(n)}}),r.jStat=r,r)},"/YfA":function(e,t,n){"use strict";n.d(t,"a",(function(){return te})),n.d(t,"b",(function(){return ne}));var r,i=n("MMYH"),a=n("9fIP"),o=n("EM62"),s=n("ZTXN"),c=n("g6G6"),l=n("3p4X"),u=n("xVbo"),p=n("4xW2"),h=n("Ohay"),d=n("8j5Y"),f=n("2kYt"),g=["dialogPopup"],m=["hueSlider"],v=["alphaSlider"];function b(e,t){if(1&e&&o.gc(0,"div"),2&e){var n=o.xc();o.Vb("arrow arrow-",n.cpUsePosition,""),o.Zc("top",n.arrowTop,"px")}}function y(e,t){if(1&e){var n=o.mc();o.lc(0,"div",26),o.tc("newValue",(function(e){return o.Pc(n),o.xc().onColorChange(e)}))("dragStart",(function(){return o.Pc(n),o.xc().onDragStart("saturation-lightness")}))("dragEnd",(function(){return o.Pc(n),o.xc().onDragEnd("saturation-lightness")})),o.gc(1,"div",13),o.kc()}if(2&e){var r=o.xc();o.Zc("background-color",r.hueSliderColor),o.Cc("rgX",1)("rgY",1),o.Sb(1),o.Zc("top",null==r.slider?null:r.slider.v,"px")("left",null==r.slider?null:r.slider.s,"px")}}function x(e,t){if(1&e){var n=o.mc();o.lc(0,"button",27),o.tc("click",(function(e){o.Pc(n);var t=o.xc();return t.onAddPresetColor(e,t.selectedColor)})),o.ed(1),o.kc()}if(2&e){var r=o.xc();o.Ub(r.cpAddColorButtonClass),o.Cc("disabled",r.cpPresetColors&&r.cpPresetColors.length>=r.cpMaxPresetColorsLength),o.Sb(1),o.gd(" ",r.cpAddColorButtonText," ")}}function C(e,t){1&e&&o.gc(0,"div",28)}function w(e,t){if(1&e){var n=o.mc();o.lc(0,"input",34),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc(2).onAlphaInput(e)})),o.kc()}if(2&e){var r=o.xc(2);o.Cc("rg",1)("value",null==r.cmykText?null:r.cmykText.a)}}function k(e,t){1&e&&(o.lc(0,"div"),o.ed(1,"A"),o.kc())}function S(e,t){if(1&e){var n=o.mc();o.lc(0,"div",29),o.lc(1,"div",30),o.lc(2,"input",31),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onCyanInput(e)})),o.kc(),o.lc(3,"input",31),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onMagentaInput(e)})),o.kc(),o.lc(4,"input",31),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onYellowInput(e)})),o.kc(),o.lc(5,"input",31),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onBlackInput(e)})),o.kc(),o.cd(6,w,1,2,"input",32),o.kc(),o.lc(7,"div",30),o.lc(8,"div"),o.ed(9,"C"),o.kc(),o.lc(10,"div"),o.ed(11,"M"),o.kc(),o.lc(12,"div"),o.ed(13,"Y"),o.kc(),o.lc(14,"div"),o.ed(15,"K"),o.kc(),o.cd(16,k,2,0,"div",33),o.kc(),o.kc()}if(2&e){var r=o.xc();o.Zc("display",3!==r.format?"none":"block"),o.Sb(2),o.Cc("rg",100)("value",null==r.cmykText?null:r.cmykText.c),o.Sb(1),o.Cc("rg",100)("value",null==r.cmykText?null:r.cmykText.m),o.Sb(1),o.Cc("rg",100)("value",null==r.cmykText?null:r.cmykText.y),o.Sb(1),o.Cc("rg",100)("value",null==r.cmykText?null:r.cmykText.k),o.Sb(1),o.Cc("ngIf","disabled"!==r.cpAlphaChannel),o.Sb(10),o.Cc("ngIf","disabled"!==r.cpAlphaChannel)}}function O(e,t){if(1&e){var n=o.mc();o.lc(0,"input",34),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc(2).onAlphaInput(e)})),o.kc()}if(2&e){var r=o.xc(2);o.Cc("rg",1)("value",null==r.hslaText?null:r.hslaText.a)}}function E(e,t){1&e&&(o.lc(0,"div"),o.ed(1,"A"),o.kc())}function _(e,t){if(1&e){var n=o.mc();o.lc(0,"div",35),o.lc(1,"div",30),o.lc(2,"input",36),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onHueInput(e)})),o.kc(),o.lc(3,"input",31),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onSaturationInput(e)})),o.kc(),o.lc(4,"input",31),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onLightnessInput(e)})),o.kc(),o.cd(5,O,1,2,"input",32),o.kc(),o.lc(6,"div",30),o.lc(7,"div"),o.ed(8,"H"),o.kc(),o.lc(9,"div"),o.ed(10,"S"),o.kc(),o.lc(11,"div"),o.ed(12,"L"),o.kc(),o.cd(13,E,2,0,"div",33),o.kc(),o.kc()}if(2&e){var r=o.xc();o.Zc("display",2!==r.format?"none":"block"),o.Sb(2),o.Cc("rg",360)("value",null==r.hslaText?null:r.hslaText.h),o.Sb(1),o.Cc("rg",100)("value",null==r.hslaText?null:r.hslaText.s),o.Sb(1),o.Cc("rg",100)("value",null==r.hslaText?null:r.hslaText.l),o.Sb(1),o.Cc("ngIf","disabled"!==r.cpAlphaChannel),o.Sb(8),o.Cc("ngIf","disabled"!==r.cpAlphaChannel)}}function I(e,t){if(1&e){var n=o.mc();o.lc(0,"input",34),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc(2).onAlphaInput(e)})),o.kc()}if(2&e){var r=o.xc(2);o.Cc("rg",1)("value",null==r.rgbaText?null:r.rgbaText.a)}}function P(e,t){1&e&&(o.lc(0,"div"),o.ed(1,"A"),o.kc())}function T(e,t){if(1&e){var n=o.mc();o.lc(0,"div",37),o.lc(1,"div",30),o.lc(2,"input",38),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onRedInput(e)})),o.kc(),o.lc(3,"input",38),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onGreenInput(e)})),o.kc(),o.lc(4,"input",38),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onBlueInput(e)})),o.kc(),o.cd(5,I,1,2,"input",32),o.kc(),o.lc(6,"div",30),o.lc(7,"div"),o.ed(8,"R"),o.kc(),o.lc(9,"div"),o.ed(10,"G"),o.kc(),o.lc(11,"div"),o.ed(12,"B"),o.kc(),o.cd(13,P,2,0,"div",33),o.kc(),o.kc()}if(2&e){var r=o.xc();o.Zc("display",1!==r.format?"none":"block"),o.Sb(2),o.Cc("rg",255)("value",null==r.rgbaText?null:r.rgbaText.r),o.Sb(1),o.Cc("rg",255)("value",null==r.rgbaText?null:r.rgbaText.g),o.Sb(1),o.Cc("rg",255)("value",null==r.rgbaText?null:r.rgbaText.b),o.Sb(1),o.Cc("ngIf","disabled"!==r.cpAlphaChannel),o.Sb(8),o.Cc("ngIf","disabled"!==r.cpAlphaChannel)}}function A(e,t){if(1&e){var n=o.mc();o.lc(0,"input",34),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc(2).onAlphaInput(e)})),o.kc()}if(2&e){var r=o.xc(2);o.Cc("rg",1)("value",r.hexAlpha)}}function M(e,t){1&e&&(o.lc(0,"div"),o.ed(1,"A"),o.kc())}function D(e,t){if(1&e){var n=o.mc();o.lc(0,"div",39),o.lc(1,"div",30),o.lc(2,"input",40),o.tc("blur",(function(){return o.Pc(n),o.xc().onHexInput(null)}))("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onHexInput(e)})),o.kc(),o.cd(3,A,1,2,"input",32),o.kc(),o.lc(4,"div",30),o.lc(5,"div"),o.ed(6,"Hex"),o.kc(),o.cd(7,M,2,0,"div",33),o.kc(),o.kc()}if(2&e){var r=o.xc();o.Zc("display",0!==r.format?"none":"block"),o.Xb("hex-alpha","forced"===r.cpAlphaChannel),o.Sb(2),o.Cc("value",r.hexText),o.Sb(1),o.Cc("ngIf","forced"===r.cpAlphaChannel),o.Sb(4),o.Cc("ngIf","forced"===r.cpAlphaChannel)}}function j(e,t){if(1&e){var n=o.mc();o.lc(0,"input",34),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc(2).onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc(2).onAlphaInput(e)})),o.kc()}if(2&e){var r=o.xc(2);o.Cc("rg",1)("value",null==r.hslaText?null:r.hslaText.a)}}function N(e,t){if(1&e){var n=o.mc();o.lc(0,"div",41),o.lc(1,"div",30),o.lc(2,"input",31),o.tc("keyup.enter",(function(e){return o.Pc(n),o.xc().onAcceptColor(e)}))("newValue",(function(e){return o.Pc(n),o.xc().onValueInput(e)})),o.kc(),o.cd(3,j,1,2,"input",32),o.kc(),o.lc(4,"div",30),o.lc(5,"div"),o.ed(6,"V"),o.kc(),o.lc(7,"div"),o.ed(8,"A"),o.kc(),o.kc(),o.kc()}if(2&e){var r=o.xc();o.Sb(2),o.Cc("rg",100)("value",null==r.hslaText?null:r.hslaText.l),o.Sb(1),o.Cc("ngIf","disabled"!==r.cpAlphaChannel)}}function R(e,t){if(1&e){var n=o.mc();o.lc(0,"div",42),o.lc(1,"span",43),o.tc("click",(function(){return o.Pc(n),o.xc().onFormatToggle(-1)})),o.kc(),o.lc(2,"span",43),o.tc("click",(function(){return o.Pc(n),o.xc().onFormatToggle(1)})),o.kc(),o.kc()}}function L(e,t){if(1&e){var n=o.mc();o.lc(0,"span",50),o.tc("click",(function(e){o.Pc(n);var t=o.xc().$implicit;return o.xc(3).onRemovePresetColor(e,t)})),o.kc()}if(2&e){var r=o.xc(4);o.Ub(r.cpRemoveColorButtonClass)}}function F(e,t){if(1&e){var n=o.mc();o.lc(0,"div",48),o.tc("click",(function(){o.Pc(n);var e=t.$implicit;return o.xc(3).setColorFromString(e)})),o.cd(1,L,1,3,"span",49),o.kc()}if(2&e){var r=t.$implicit,i=o.xc(3);o.Zc("background-color",r),o.Sb(1),o.Cc("ngIf",i.cpAddColorButton)}}function B(e,t){if(1&e&&(o.lc(0,"div"),o.cd(1,F,2,3,"div",47),o.kc()),2&e){var n=o.xc(2);o.Ub(n.cpPresetColorsClass),o.Sb(1),o.Cc("ngForOf",n.cpPresetColors)}}function V(e,t){if(1&e&&(o.lc(0,"div"),o.ed(1),o.kc()),2&e){var n=o.xc(2);o.Ub(n.cpPresetEmptyMessageClass),o.Sb(1),o.fd(n.cpPresetEmptyMessage)}}function z(e,t){if(1&e&&(o.lc(0,"div",44),o.gc(1,"hr"),o.lc(2,"div",45),o.ed(3),o.kc(),o.cd(4,B,2,4,"div",46),o.cd(5,V,2,4,"div",46),o.kc()),2&e){var n=o.xc();o.Sb(3),o.fd(n.cpPresetLabel),o.Sb(1),o.Cc("ngIf",null==n.cpPresetColors?null:n.cpPresetColors.length),o.Sb(1),o.Cc("ngIf",!(null!=n.cpPresetColors&&n.cpPresetColors.length)&&n.cpAddColorButton)}}function U(e,t){if(1&e){var n=o.mc();o.lc(0,"button",53),o.tc("click",(function(e){return o.Pc(n),o.xc(2).onCancelColor(e)})),o.ed(1),o.kc()}if(2&e){var r=o.xc(2);o.Ub(r.cpCancelButtonClass),o.Sb(1),o.fd(r.cpCancelButtonText)}}function G(e,t){if(1&e){var n=o.mc();o.lc(0,"button",53),o.tc("click",(function(e){return o.Pc(n),o.xc(2).onAcceptColor(e)})),o.ed(1),o.kc()}if(2&e){var r=o.xc(2);o.Ub(r.cpOKButtonClass),o.Sb(1),o.fd(r.cpOKButtonText)}}function H(e,t){if(1&e&&(o.lc(0,"div",51),o.cd(1,U,2,4,"button",52),o.cd(2,G,2,4,"button",52),o.kc()),2&e){var n=o.xc();o.Sb(1),o.Cc("ngIf",n.cpCancelButton),o.Sb(1),o.Cc("ngIf",n.cpOKButton)}}!function(e){e[e.HEX=0]="HEX",e[e.RGBA=1]="RGBA",e[e.HSLA=2]="HSLA",e[e.CMYK=3]="CMYK"}(r||(r={}));var Y=function e(t,n,r,i){Object(a.a)(this,e),this.r=t,this.g=n,this.b=r,this.a=i},q=function e(t,n,r,i){Object(a.a)(this,e),this.h=t,this.s=n,this.v=r,this.a=i},W=function e(t,n,r,i){Object(a.a)(this,e),this.h=t,this.s=n,this.l=r,this.a=i},X=function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;Object(a.a)(this,e),this.c=t,this.m=n,this.y=r,this.k=i,this.a=o};var K=function(){function e(){Object(a.a)(this,e),this.newValue=new o.t}return Object(i.a)(e,[{key:"inputChange",value:function(e){var t=e.target.value;if(void 0===this.rg)this.newValue.emit(t);else{var n=parseFloat(t);this.newValue.emit({v:n,rg:this.rg})}}}]),e}();K.\u0275fac=function(e){return new(e||K)},K.\u0275dir=o.ac({type:K,selectors:[["","text",""]],hostBindings:function(e,t){1&e&&o.tc("input",(function(e){return t.inputChange(e)}))},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),K.propDecorators={rg:[{type:o.D}],text:[{type:o.D}],newValue:[{type:o.O}],inputChange:[{type:o.w,args:["input",["$event"]]}]};var Z=function(){function e(t){var n=this;Object(a.a)(this,e),this.elRef=t,this.dragEnd=new o.t,this.dragStart=new o.t,this.newValue=new o.t,this.listenerMove=function(e){return n.move(e)},this.listenerStop=function(){return n.stop()}}return Object(i.a)(e,[{key:"mouseDown",value:function(e){this.start(e)}},{key:"touchStart",value:function(e){this.start(e)}},{key:"move",value:function(e){e.preventDefault(),this.setCursor(e)}},{key:"start",value:function(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}},{key:"stop",value:function(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}},{key:"getX",value:function(e){var t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-t.left-window.pageXOffset}},{key:"getY",value:function(e){var t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-t.top-window.pageYOffset}},{key:"setCursor",value:function(e){var t=this.elRef.nativeElement.offsetWidth,n=this.elRef.nativeElement.offsetHeight,r=Math.max(0,Math.min(this.getX(e),t)),i=Math.max(0,Math.min(this.getY(e),n));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:r/t,v:1-i/n,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:i/n,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:r/t,rgX:this.rgX})}}]),e}();Z.\u0275fac=function(e){return new(e||Z)(o.fc(o.r))},Z.\u0275dir=o.ac({type:Z,selectors:[["","slider",""]],hostBindings:function(e,t){1&e&&o.tc("mousedown",(function(e){return t.mouseDown(e)}))("touchstart",(function(e){return t.touchStart(e)}))},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),Z.ctorParameters=function(){return[{type:o.r}]},Z.propDecorators={rgX:[{type:o.D}],rgY:[{type:o.D}],slider:[{type:o.D}],dragEnd:[{type:o.O}],dragStart:[{type:o.O}],newValue:[{type:o.O}],mouseDown:[{type:o.w,args:["mousedown",["$event"]]}],touchStart:[{type:o.w,args:["touchstart",["$event"]]}]};var $=function e(t,n,r,i){Object(a.a)(this,e),this.h=t,this.s=n,this.v=r,this.a=i},Q=function e(t,n,r,i){Object(a.a)(this,e),this.h=t,this.s=n,this.v=r,this.a=i},J=function(){function e(){Object(a.a)(this,e),this.active=null}return Object(i.a)(e,[{key:"setActive",value:function(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}},{key:"hsva2hsla",value:function(e){var t=e.h,n=e.s,r=e.v,i=e.a;if(0===r)return new W(t,0,0,i);if(0===n&&1===r)return new W(t,1,1,i);var a=r*(2-n)/2;return new W(t,r*n/(1-Math.abs(2*a-1)),a,i)}},{key:"hsla2hsva",value:function(e){var t=Math.min(e.h,1),n=Math.min(e.s,1),r=Math.min(e.l,1),i=Math.min(e.a,1);if(0===r)return new q(t,0,0,i);var a=r+n*(1-Math.abs(2*r-1))/2;return new q(t,2*(a-r)/a,a,i)}},{key:"hsvaToRgba",value:function(e){var t,n,r,i=e.h,a=e.s,o=e.v,s=e.a,c=Math.floor(6*i),l=6*i-c,u=o*(1-a),p=o*(1-l*a),h=o*(1-(1-l)*a);switch(c%6){case 0:t=o,n=h,r=u;break;case 1:t=p,n=o,r=u;break;case 2:t=u,n=o,r=h;break;case 3:t=u,n=p,r=o;break;case 4:t=h,n=u,r=o;break;case 5:t=o,n=u,r=p;break;default:t=0,n=0,r=0}return new Y(t,n,r,s)}},{key:"cmykToRgb",value:function(e){var t=(1-e.c)*(1-e.k),n=(1-e.m)*(1-e.k),r=(1-e.y)*(1-e.k);return new Y(t,n,r,e.a)}},{key:"rgbaToCmyk",value:function(e){var t=1-Math.max(e.r,e.g,e.b);if(1===t)return new X(0,0,0,1,e.a);var n=(1-e.r-t)/(1-t),r=(1-e.g-t)/(1-t),i=(1-e.b-t)/(1-t);return new X(n,r,i,t,e.a)}},{key:"rgbaToHsva",value:function(e){var t,n,r=Math.min(e.r,1),i=Math.min(e.g,1),a=Math.min(e.b,1),o=Math.min(e.a,1),s=Math.max(r,i,a),c=Math.min(r,i,a),l=s,u=s-c;if(n=0===s?0:u/s,s===c)t=0;else{switch(s){case r:t=(i-a)/u+(i<a?6:0);break;case i:t=(a-r)/u+2;break;case a:t=(r-i)/u+4;break;default:t=0}t/=6}return new q(t,n,l,o)}},{key:"rgbaToHex",value:function(e,t){var n="#"+(1<<24|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return t&&(n+=(256|Math.round(255*e.a)).toString(16).substr(1)),n}},{key:"normalizeCMYK",value:function(e){return new X(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}},{key:"denormalizeCMYK",value:function(e){return new X(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}},{key:"denormalizeRGBA",value:function(e){return new Y(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}},{key:"stringToHsva",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;e=(e||"").toLowerCase();var r=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new Y(parseInt(e[2],10)/255,parseInt(e[3],10)/255,parseInt(e[4],10)/255,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new W(parseInt(e[2],10)/360,parseInt(e[3],10)/100,parseInt(e[4],10)/100,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}}];for(var i in t?r.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(e){return new Y(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,parseInt(e[4]||"FF",16)/255)}}):r.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(e){return new Y(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1)}}),r.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(e){return new Y(parseInt(e[1]+e[1],16)/255,parseInt(e[2]+e[2],16)/255,parseInt(e[3]+e[3],16)/255,1)}}),r)if(r.hasOwnProperty(i)){var a=r[i],o=a.re.exec(e),s=o&&a.parse(o);if(s)return s instanceof Y?n=this.rgbaToHsva(s):s instanceof W&&(n=this.hsla2hsva(s)),n}return n}},{key:"outputFormat",value:function(e,t,n){switch("auto"===t&&(t=e.a<1?"rgba":"hex"),t){case"hsla":var r=this.hsva2hsla(e),i=new W(Math.round(360*r.h),Math.round(100*r.s),Math.round(100*r.l),Math.round(100*r.a)/100);return e.a<1||"always"===n?"hsla("+i.h+","+i.s+"%,"+i.l+"%,"+i.a+")":"hsl("+i.h+","+i.s+"%,"+i.l+"%)";case"rgba":var a=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===n?"rgba("+a.r+","+a.g+","+a.b+","+Math.round(100*a.a)/100+")":"rgb("+a.r+","+a.g+","+a.b+")";default:var o="always"===n||"forced"===n;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),o)}}}]),e}();J.\u0275fac=function(e){return new(e||J)},J.\u0275prov=o.bc({token:J,factory:J.\u0275fac}),J.ctorParameters=function(){return[]};var ee=function(){function e(t,n,i){Object(a.a)(this,e),this.elRef=t,this.cdRef=n,this.service=i,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[r.HEX,r.RGBA,r.HSLA,r.CMYK],this.useRootViewContainer=!1,this.colorPickerHover=new s.a}return Object(i.a)(e,[{key:"handleEsc",value:function(e){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(e)}},{key:"handleEnter",value:function(e){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(e)}},{key:"handleMouseEnter",value:function(){this.colorPickerHover.next(!0)}},{key:"handleMouseLeave",value:function(){this.colorPickerHover.next(!1)}},{key:"ngOnInit",value:function(){var e=this;this.slider=new $(0,0,0,0);var t=this.hueSlider.nativeElement.offsetWidth||140,n=this.alphaSlider.nativeElement.offsetWidth||140;this.sliderDimMax=new Q(t,this.cpWidth,130,n),this.cpCmykEnabled?this.format=r.CMYK:"rgba"===this.cpOutputFormat?this.format=r.RGBA:"hsla"===this.cpOutputFormat?this.format=r.HSLA:this.format=r.HEX,this.listenerMouseDown=function(t){e.onMouseDown(t)},this.listenerResize=function(){e.onResize()},this.openDialog(this.initialColor,!1)}},{key:"ngOnDestroy",value:function(){this.closeDialog()}},{key:"ngAfterViewInit",value:function(){if(230!==this.cpWidth||"inline"===this.cpDialogDisplay){var e=this.hueSlider.nativeElement.offsetWidth||140,t=this.alphaSlider.nativeElement.offsetWidth||140;this.sliderDimMax=new Q(e,this.cpWidth,130,t),this.updateColorPicker(!1),this.cdRef.detectChanges()}}},{key:"openDialog",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,t),this.openColorPicker()}},{key:"closeDialog",value:function(){this.closeColorPicker()}},{key:"setupDialog",value:function(e,t,n,r,i,a,o,s,c,l,u,p,h,d,f,g,m,v,b,y,x,C,w,k,S,O,E,_,I,P,T,A,M,D,j,N){this.setInitialColor(n),this.setColorMode(s),this.isIE10=10===function(){var e="";"undefined"!=typeof navigator&&(e=navigator.userAgent.toLowerCase());var t=e.indexOf("msie ");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}(),this.directiveInstance=e,this.directiveElementRef=t,this.cpDisableInput=p,this.cpCmykEnabled=c,this.cpAlphaChannel=l,this.cpOutputFormat=u,this.cpDialogDisplay=a,this.cpIgnoredElements=h,this.cpSaveClickOutside=d,this.cpCloseClickOutside=f,this.useRootViewContainer=g,this.width=this.cpWidth=parseInt(r,10),this.height=this.cpHeight=parseInt(i,10),this.cpPosition=m,this.cpPositionOffset=parseInt(v,10),this.cpOKButton=O,this.cpOKButtonText=_,this.cpOKButtonClass=E,this.cpCancelButton=I,this.cpCancelButtonText=T,this.cpCancelButtonClass=P,this.fallbackColor=o||"#fff",this.setPresetConfig(y,x),this.cpPresetColorsClass=C,this.cpMaxPresetColorsLength=w,this.cpPresetEmptyMessage=k,this.cpPresetEmptyMessageClass=S,this.cpAddColorButton=A,this.cpAddColorButtonText=D,this.cpAddColorButtonClass=M,this.cpRemoveColorButtonClass=j,this.cpTriggerElement=N,b||(this.dialogArrowOffset=0),"inline"===a&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===u&&"always"!==l&&"forced"!==l&&(this.cpAlphaChannel="disabled")}},{key:"setColorMode",value:function(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3;break;default:this.cpColorMode=1}}},{key:"setInitialColor",value:function(e){this.initialColor=e}},{key:"setPresetConfig",value:function(e,t){this.cpPresetLabel=e,this.cpPresetColors=t}},{key:"setColorFromString",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];("always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel)&&((t=this.service.stringToHsva(e,!0))||this.hsva)||(t=this.service.stringToHsva(e,!1)),t||this.hsva||(t=this.service.stringToHsva(this.fallbackColor,!1)),t&&(this.hsva=t,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(n,r))}},{key:"onResize",value:function(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}},{key:"onDragEnd",value:function(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}},{key:"onDragStart",value:function(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}},{key:"onMouseDown",value:function(e){!this.show||this.isIE10||"popup"!==this.cpDialogDisplay||e.target===this.directiveElementRef.nativeElement||this.isDescendant(this.elRef.nativeElement,e.target)||this.isDescendant(this.directiveElementRef.nativeElement,e.target)||0!==this.cpIgnoredElements.filter((function(t){return t===e.target})).length||(this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker())}},{key:"onAcceptColor",value:function(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}},{key:"onCancelColor",value:function(e){this.hsva=null,e.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}},{key:"onFormatToggle",value:function(e){var t=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),n=((this.dialogInputFields.indexOf(this.format)+e)%t+t)%t;this.format=this.dialogInputFields[n]}},{key:"onColorChange",value:function(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}},{key:"onHueChange",value:function(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}},{key:"onValueChange",value:function(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}},{key:"onAlphaChange",value:function(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}},{key:"onHexInput",value:function(e){if(null===e)this.updateColorPicker();else{e&&"#"!==e[0]&&(e="#"+e);var t=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(t=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);var n=t.test(e);n&&(e.length<5&&(e="#"+e.substring(1).split("").map((function(e){return e+e})).join("")),"forced"===this.cpAlphaChannel&&(e+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:n,value:e,color:this.outputColor})}}},{key:"onRedInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:n,value:t.r,color:this.outputColor})}},{key:"onBlueInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:n,value:t.b,color:this.outputColor})}},{key:"onGreenInput",value:function(e){var t=this.service.hsvaToRgba(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:n,value:t.g,color:this.outputColor})}},{key:"onHueInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:t,value:this.hsva.h,color:this.outputColor})}},{key:"onValueInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:t,value:this.hsva.v,color:this.outputColor})}},{key:"onAlphaInput",value:function(e){var t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:t,value:this.hsva.a,color:this.outputColor})}},{key:"onLightnessInput",value:function(e){var t=this.service.hsva2hsla(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:n,value:t.l,color:this.outputColor})}},{key:"onSaturationInput",value:function(e){var t=this.service.hsva2hsla(this.hsva),n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(t.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:n,value:t.s,color:this.outputColor})}},{key:"onCyanInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}},{key:"onMagentaInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}},{key:"onYellowInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}},{key:"onBlackInput",value:function(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}},{key:"onAddPresetColor",value:function(e,t){e.stopPropagation(),this.cpPresetColors.filter((function(e){return e===t})).length||(this.cpPresetColors=this.cpPresetColors.concat(t),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}},{key:"onRemovePresetColor",value:function(e,t){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter((function(e){return e!==t})),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}},{key:"openColorPicker",value:function(){var e=this;this.show||(this.show=!0,this.hidden=!0,setTimeout((function(){e.hidden=!1,e.setDialogPosition(),e.cdRef.detectChanges()}),0),this.directiveInstance.stateChanged(!0),this.isIE10||(document.addEventListener("mousedown",this.listenerMouseDown),document.addEventListener("touchstart",this.listenerMouseDown)),window.addEventListener("resize",this.listenerResize))}},{key:"closeColorPicker",value:function(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(document.removeEventListener("mousedown",this.listenerMouseDown),document.removeEventListener("touchstart",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}},{key:"updateColorPicker",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.sliderDimMax){var i,a,o;2===this.cpColorMode&&(this.hsva.s=0);var s=this.outputColor;if(a=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(n?(o=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(o)):(o=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(o))),o=this.service.denormalizeRGBA(o),this.sliderH=this.hsva.h):o=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),i=this.service.denormalizeRGBA(this.service.hsvaToRgba(new q(this.sliderH||this.hsva.h,1,1,1))),t){this.hslaText=new W(Math.round(360*a.h),Math.round(100*a.s),Math.round(100*a.l),Math.round(100*a.a)/100),this.rgbaText=new Y(o.r,o.g,o.b,Math.round(100*o.a)/100),this.cpCmykEnabled&&(this.cmykText=new X(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100));var c="always"===this.cpAlphaChannel;this.hexText=this.service.rgbaToHex(o,c),this.hexAlpha=this.rgbaText.a}if("auto"===this.cpOutputFormat&&this.format!==r.RGBA&&this.format!==r.CMYK&&this.hsva.a<1&&(this.format=this.hsva.a<1?r.RGBA:r.HEX),this.hueSliderColor="rgb("+i.r+","+i.g+","+i.b+")",this.alphaSliderColor="rgb("+o.r+","+o.g+","+o.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==r.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){var l=Math.round(100*this.cmyk.a)/100;this.cmykColor="cmyka(".concat(this.cmyk.c,",").concat(this.cmyk.m,",").concat(this.cmyk.y,",").concat(this.cmyk.k,",").concat(l,")")}else this.cmykColor="cmyk(".concat(this.cmyk.c,",").concat(this.cmyk.m,",").concat(this.cmyk.y,",").concat(this.cmyk.k,")");this.slider=new $((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&s!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}},{key:"setDialogPosition",value:function(){if("inline"===this.cpDialogDisplay)this.position="relative";else{for(var e,t="static",n="",r=null,i=null,a=this.directiveElementRef.nativeElement.parentNode,o=this.dialogElement.nativeElement.offsetHeight;null!==a&&"HTML"!==a.tagName;){if("static"!==(t=(e=window.getComputedStyle(a)).getPropertyValue("position"))&&null===r&&(r=a),(n=e.getPropertyValue("transform"))&&"none"!==n&&null===i&&(i=a),"fixed"===t){r=i;break}a=a.parentNode}var s=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==t);if(this.useRootViewContainer||"fixed"===t&&(!r||r instanceof HTMLUnknownElement))this.top=s.top,this.left=s.left;else{null===r&&(r=a);var c=this.createDialogBox(r,"fixed"!==t);this.top=s.top-c.top,this.left=s.left-c.left}"fixed"===t&&(this.position="fixed");var l=this.cpPosition;if("auto"===this.cpPosition)l=function(e,t){var n="right",r="bottom",i=e.height,a=e.width,o=t.top,s=t.left,c=o+t.height,l=s+t.width,u=o-i<0,p=c+i>(window.innerHeight||document.documentElement.clientHeight),h=s-a<0,d=l+a>(window.innerWidth||document.documentElement.clientWidth);if(p&&(r="top"),u&&(r="bottom"),h&&(n="right"),d&&(n="left"),u&&p&&h&&d)return["left","right","top","bottom"].reduce((function(t,n){return e[t]>e[n]?t:n}));return h&&d?u?"bottom":p||o>c?"top":"bottom":u&&p?h?"right":d||s>l?"left":"right":"".concat(r,"-").concat(n)}(this.dialogElement.nativeElement.getBoundingClientRect(),this.cpTriggerElement.nativeElement.getBoundingClientRect());"top"===l?(this.arrowTop=o-1,this.top-=o+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*s.width-this.dialogArrowOffset):"bottom"===l?(this.top+=s.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*s.width-this.dialogArrowOffset):"top-left"===l||"left-top"===l?(this.top-=o-s.height+s.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===l||"right-top"===l?(this.top-=o-s.height+s.height*this.cpPositionOffset/100,this.left+=s.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===l||"bottom-left"===l||"left-bottom"===l?(this.top+=s.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=s.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=s.width+this.dialogArrowSize-2),this.cpUsePosition=l}}},{key:"isDescendant",value:function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}},{key:"createDialogBox",value:function(e,t){return{top:e.getBoundingClientRect().top+(t?window.pageYOffset:0),left:e.getBoundingClientRect().left+(t?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}}]),e}();ee.\u0275fac=function(e){return new(e||ee)(o.fc(o.r),o.fc(o.j),o.fc(J))},ee.\u0275cmp=o.Zb({type:ee,selectors:[["color-picker"]],viewQuery:function(e,t){var n;(1&e&&(o.Wc(g,!0),o.Wc(m,!0),o.Wc(v,!0)),2&e)&&(o.Lc(n=o.uc())&&(t.dialogElement=n.first),o.Lc(n=o.uc())&&(t.hueSlider=n.first),o.Lc(n=o.uc())&&(t.alphaSlider=n.first))},hostBindings:function(e,t){1&e&&o.tc("keyup.esc",(function(e){return t.handleEsc(e)}),!1,o.Oc)("keyup.enter",(function(e){return t.handleEnter(e)}),!1,o.Oc)("mouseenter",(function(){return t.handleMouseEnter()}))("mouseleave",(function(){return t.handleMouseLeave()}))},decls:28,vars:47,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"]],template:function(e,t){1&e&&(o.lc(0,"div",0,1),o.tc("click",(function(e){return e.stopPropagation()})),o.cd(2,b,1,5,"div",2),o.cd(3,y,2,8,"div",3),o.lc(4,"div",4),o.lc(5,"div",5),o.gc(6,"div",6),o.gc(7,"div",7),o.cd(8,x,2,5,"button",8),o.kc(),o.lc(9,"div",9),o.cd(10,C,1,0,"div",10),o.lc(11,"div",11,12),o.tc("newValue",(function(e){return t.onHueChange(e)}))("dragStart",(function(){return t.onDragStart("hue")}))("dragEnd",(function(){return t.onDragEnd("hue")})),o.gc(13,"div",13),o.kc(),o.lc(14,"div",14,15),o.tc("newValue",(function(e){return t.onValueChange(e)}))("dragStart",(function(){return t.onDragStart("value")}))("dragEnd",(function(){return t.onDragEnd("value")})),o.gc(16,"div",13),o.kc(),o.lc(17,"div",16,17),o.tc("newValue",(function(e){return t.onAlphaChange(e)}))("dragStart",(function(){return t.onDragStart("alpha")}))("dragEnd",(function(){return t.onDragEnd("alpha")})),o.gc(19,"div",13),o.kc(),o.kc(),o.kc(),o.cd(20,S,17,12,"div",18),o.cd(21,_,14,10,"div",19),o.cd(22,T,14,10,"div",20),o.cd(23,D,8,7,"div",21),o.cd(24,N,9,3,"div",22),o.cd(25,R,3,0,"div",23),o.cd(26,z,6,3,"div",24),o.cd(27,H,3,2,"div",25),o.kc()),2&e&&(o.Zc("display",t.show?"block":"none")("visibility",t.hidden?"hidden":"visible")("top",t.top,"px")("left",t.left,"px")("position",t.position)("height",t.cpHeight,"px")("width",t.cpWidth,"px"),o.Xb("open",t.show),o.Sb(2),o.Cc("ngIf","popup"==t.cpDialogDisplay),o.Sb(1),o.Cc("ngIf",1===(t.cpColorMode||1)),o.Sb(4),o.Zc("background-color",t.selectedColor),o.Sb(1),o.Cc("ngIf",t.cpAddColorButton),o.Sb(2),o.Cc("ngIf","disabled"===t.cpAlphaChannel),o.Sb(1),o.Zc("display",1===(t.cpColorMode||1)?"block":"none"),o.Cc("rgX",1),o.Sb(2),o.Zc("left",null==t.slider?null:t.slider.h,"px"),o.Sb(1),o.Zc("display",2===(t.cpColorMode||1)?"block":"none"),o.Cc("rgX",1),o.Sb(2),o.Zc("right",null==t.slider?null:t.slider.v,"px"),o.Sb(1),o.Zc("display","disabled"===t.cpAlphaChannel?"none":"block")("background-color",t.alphaSliderColor),o.Cc("rgX",1),o.Sb(2),o.Zc("left",null==t.slider?null:t.slider.a,"px"),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&2===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),o.Sb(1),o.Cc("ngIf",(null==t.cpPresetColors?null:t.cpPresetColors.length)||t.cpAddColorButton),o.Sb(1),o.Cc("ngIf",t.cpOKButton||t.cpCancelButton))},directives:[f.t,Z,K,f.s],styles:['.color-picker{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;background-color:#fff;border:1px solid #777;cursor:default;height:auto;position:absolute;user-select:none;width:230px;z-index:1000}.color-picker *{box-sizing:border-box;font-size:11px;margin:0}.color-picker input{color:#000;font-size:13px;height:26px;min-width:0;text-align:center;width:0}.color-picker input:-moz-submit-invalid,.color-picker input:-moz-ui-invalid,.color-picker input:invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.color-picker .arrow{border-style:solid;height:0;position:absolute;width:0;z-index:999999}.color-picker .arrow.arrow-top{border-color:#777 transparent transparent;border-width:10px 5px;left:8px}.color-picker .arrow.arrow-bottom{border-color:transparent transparent #777;border-width:10px 5px;left:8px;top:-20px}.color-picker .arrow.arrow-left-top,.color-picker .arrow.arrow-top-left{border-color:transparent transparent transparent #777;border-width:5px 10px;bottom:8px;right:-21px}.color-picker .arrow.arrow-right-top,.color-picker .arrow.arrow-top-right{border-color:transparent #777 transparent transparent;border-width:5px 10px;bottom:8px;left:-20px}.color-picker .arrow.arrow-bottom-left,.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom{border-color:transparent transparent transparent #777;border-width:5px 10px;right:-21px;top:8px}.color-picker .arrow.arrow-bottom-right,.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom{border-color:transparent #777 transparent transparent;border-width:5px 10px;left:-20px;top:8px}.color-picker .cursor{border:2px solid #222;border-radius:50%;cursor:default;height:16px;position:relative;width:16px}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{padding:16px 8px;position:relative}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{color:#555;font-size:11px;overflow:hidden;padding:4px;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%}.color-picker .preset-area .preset-color{border:1px solid #a9a9a9;border-radius:25%;cursor:pointer;display:inline-block;height:18px;margin:4px 6px 8px;position:relative;width:18px}.color-picker .preset-area .preset-empty-message{font-style:italic;margin-bottom:8px;margin-top:4px;min-height:18px;text-align:center}.color-picker .hex-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{clear:left;color:#555;flex:1 1 auto;float:left;text-align:center}.color-picker .hex-text .box input{border:1px solid #a9a9a9;flex:1 1 auto;padding:1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{color:#555;flex:1 1 auto;margin-right:8px;text-align:center}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{border:1px solid #a9a9a9;flex:1;float:left;margin:0 8px 0 0;padding:1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC");direction:ltr}.color-picker .hue,.color-picker .value{background-size:100% 100%;border:none;cursor:pointer;height:16px;margin-bottom:16px;width:100%}.color-picker .value{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=");direction:rtl}.color-picker .alpha{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:16px;width:100%}.color-picker .type-policy{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==");background-position:50%;background-repeat:no-repeat;background-size:8px 16px;height:24px;position:absolute;right:12px;top:218px;width:16px}.color-picker .type-policy .type-policy-arrow{display:block;height:50%;width:100%}.color-picker .selected-color{border:1px solid #a9a9a9;border-radius:50%;height:40px;left:8px;position:absolute;top:16px;width:40px}.color-picker .selected-color-background{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC");border-radius:50%;height:40px;width:40px}.color-picker .saturation-lightness{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:130px;touch-action:manipulation;width:100%}.color-picker .cp-add-color-button-class{background:transparent;border:0;cursor:pointer;display:inline;margin:3px -3px;padding:0;position:absolute}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{color:#999;cursor:not-allowed}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{background:#fff;border-radius:50%;box-shadow:1px 1px 5px #333;cursor:pointer;display:block;height:10px;position:absolute;right:-5px;text-align:center;top:-5px;width:10px}.color-picker .cp-remove-color-button-class:before{bottom:3.5px;content:"x";display:inline-block;font-size:10px;position:relative}'],encapsulation:2}),ee.ctorParameters=function(){return[{type:o.r},{type:o.j},{type:J}]},ee.propDecorators={dialogElement:[{type:o.gb,args:["dialogPopup",{static:!0}]}],hueSlider:[{type:o.gb,args:["hueSlider",{static:!0}]}],alphaSlider:[{type:o.gb,args:["alphaSlider",{static:!0}]}],handleEsc:[{type:o.w,args:["document:keyup.esc",["$event"]]}],handleEnter:[{type:o.w,args:["document:keyup.enter",["$event"]]}],handleMouseEnter:[{type:o.w,args:["mouseenter"]}],handleMouseLeave:[{type:o.w,args:["mouseleave"]}]};var te=function(){function e(t,n,r,i,c,l){Object(a.a)(this,e),this.injector=t,this.cfr=n,this.appRef=r,this.vcRef=i,this.elRef=c,this._service=l,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.hostElementHover=new s.a,this.colorPickerHover=new s.a,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOpenOnHover=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new o.t(!0),this.cpToggleChange=new o.t(!0),this.cpSliderChange=new o.t(!0),this.cpSliderDragEnd=new o.t(!0),this.cpSliderDragStart=new o.t(!0),this.colorPickerOpen=new o.t(!0),this.colorPickerClose=new o.t(!0),this.colorPickerCancel=new o.t(!0),this.colorPickerSelect=new o.t(!0),this.colorPickerChange=new o.t(!1),this.cpCmykColorChange=new o.t(!0),this.cpPresetColorsChange=new o.t(!0),this.subs=[]}return Object(i.a)(e,[{key:"handleClick",value:function(){this.inputFocus()}},{key:"handleFocus",value:function(){this.inputFocus()}},{key:"handleInput",value:function(e){this.inputChange(e)}},{key:"handleMouseOver",value:function(){this.hostElementHover.next(!0)}},{key:"handleMouseOut",value:function(){this.hostElementHover.next(!1)}},{key:"ngOnInit",value:function(){this.subs.push(this.listenToHoverEvents().subscribe())}},{key:"ngOnDestroy",value:function(){for(;this.subs.length>0;){var e=this.subs.pop();e&&e.unsubscribe()}null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}},{key:"ngOnChanges",value:function(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}},{key:"listenToHoverEvents",value:function(){var e=this;return Object(c.a)(this.hostElementHover,this.colorPickerHover).pipe(Object(u.a)((function(){return e.cpOpenOnHover})),Object(p.a)((function(e){return e?Object(l.a)(0):Object(l.a)(250)})),Object(h.a)(),Object(d.a)((function(t){t?e.openDialog():e.closeDialog()})))}},{key:"openDialog",value:function(){var e=this;if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{var t=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){var n=this.appRef.componentTypes[0],r=this.injector.get(n,o.C.NULL);r!==o.C.NULL?(t=r.vcRef||r.viewContainerRef||this.vcRef)===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor."):this.viewAttachedToAppRef=!0}var i=this.cfr.resolveComponentFactory(ee);if(this.viewAttachedToAppRef)this.cmpRef=i.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{var a=o.T.fromResolvedProviders([],t.parentInjector);this.cmpRef=t.createComponent(i,0,a,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass,this.elRef),this.dialog=this.cmpRef.instance,this.vcRef!==t&&this.cmpRef.changeDetectorRef.detectChanges(),this.subs.push(this.cmpRef.instance.colorPickerHover.pipe(Object(d.a)((function(t){return e.colorPickerHover.next(t)}))).subscribe())}}},{key:"closeDialog",value:function(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}},{key:"cmykChanged",value:function(e){this.cpCmykColorChange.emit(e)}},{key:"stateChanged",value:function(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}},{key:"colorChanged",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.ignoreChanges=t,this.colorPickerChange.emit(e)}},{key:"colorSelected",value:function(e){this.colorPickerSelect.emit(e)}},{key:"colorCanceled",value:function(){this.colorPickerCancel.emit()}},{key:"inputFocus",value:function(){var e=this.elRef.nativeElement,t=this.cpIgnoredElements.filter((function(t){return t===e}));this.cpDisabled||t.length||("undefined"!=typeof document&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}},{key:"inputChange",value:function(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}},{key:"inputChanged",value:function(e){this.cpInputChange.emit(e)}},{key:"sliderChanged",value:function(e){this.cpSliderChange.emit(e)}},{key:"sliderDragEnd",value:function(e){this.cpSliderDragEnd.emit(e)}},{key:"sliderDragStart",value:function(e){this.cpSliderDragStart.emit(e)}},{key:"presetColorsChanged",value:function(e){this.cpPresetColorsChange.emit(e)}}]),e}();te.\u0275fac=function(e){return new(e||te)(o.fc(o.C),o.fc(o.m),o.fc(o.g),o.fc(o.hb),o.fc(o.r),o.fc(J))},te.\u0275dir=o.ac({type:te,selectors:[["","colorPicker",""]],hostBindings:function(e,t){1&e&&o.tc("click",(function(){return t.handleClick()}))("focus",(function(){return t.handleFocus()}))("input",(function(e){return t.handleInput(e)}))("mouseenter",(function(){return t.handleMouseOver()}))("mouseleave",(function(){return t.handleMouseOut()}))},inputs:{cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOpenOnHover:"cpOpenOnHover",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpPresetLabel:"cpPresetLabel",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",colorPicker:"colorPicker",cpPresetColors:"cpPresetColors"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[o.Qb]}),te.ctorParameters=function(){return[{type:o.C},{type:o.m},{type:o.g},{type:o.hb},{type:o.r},{type:J}]},te.propDecorators={colorPicker:[{type:o.D}],cpWidth:[{type:o.D}],cpHeight:[{type:o.D}],cpToggle:[{type:o.D}],cpDisabled:[{type:o.D}],cpIgnoredElements:[{type:o.D}],cpFallbackColor:[{type:o.D}],cpColorMode:[{type:o.D}],cpCmykEnabled:[{type:o.D}],cpOutputFormat:[{type:o.D}],cpAlphaChannel:[{type:o.D}],cpDisableInput:[{type:o.D}],cpDialogDisplay:[{type:o.D}],cpSaveClickOutside:[{type:o.D}],cpCloseClickOutside:[{type:o.D}],cpUseRootViewContainer:[{type:o.D}],cpPosition:[{type:o.D}],cpPositionOffset:[{type:o.D}],cpPositionRelativeToArrow:[{type:o.D}],cpOpenOnHover:[{type:o.D}],cpOKButton:[{type:o.D}],cpOKButtonText:[{type:o.D}],cpOKButtonClass:[{type:o.D}],cpCancelButton:[{type:o.D}],cpCancelButtonText:[{type:o.D}],cpCancelButtonClass:[{type:o.D}],cpPresetLabel:[{type:o.D}],cpPresetColors:[{type:o.D}],cpPresetColorsClass:[{type:o.D}],cpMaxPresetColorsLength:[{type:o.D}],cpPresetEmptyMessage:[{type:o.D}],cpPresetEmptyMessageClass:[{type:o.D}],cpAddColorButton:[{type:o.D}],cpAddColorButtonText:[{type:o.D}],cpAddColorButtonClass:[{type:o.D}],cpRemoveColorButtonClass:[{type:o.D}],cpInputChange:[{type:o.O}],cpToggleChange:[{type:o.O}],cpSliderChange:[{type:o.O}],cpSliderDragEnd:[{type:o.O}],cpSliderDragStart:[{type:o.O}],colorPickerOpen:[{type:o.O}],colorPickerClose:[{type:o.O}],colorPickerCancel:[{type:o.O}],colorPickerSelect:[{type:o.O}],colorPickerChange:[{type:o.O}],cpCmykColorChange:[{type:o.O}],cpPresetColorsChange:[{type:o.O}],handleClick:[{type:o.w,args:["click"]}],handleFocus:[{type:o.w,args:["focus"]}],handleInput:[{type:o.w,args:["input",["$event"]]}],handleMouseOver:[{type:o.w,args:["mouseenter"]}],handleMouseOut:[{type:o.w,args:["mouseleave"]}]};var ne=function e(){Object(a.a)(this,e)};ne.\u0275mod=o.dc({type:ne}),ne.\u0275inj=o.cc({factory:function(e){return new(e||ne)},providers:[J],imports:[[f.c]]})},"/ege":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("EM62"),i=function(){function e(e,t){this._context={ngLet:null},e.createEmbeddedView(t,this._context)}return Object.defineProperty(e.prototype,"ngLet",{set:function(e){this._context.ngLet=e},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(r.fc(r.hb),r.fc(r.cb))},e.\u0275dir=r.ac({type:e,selectors:[["","ngLet",""]],inputs:{ngLet:"ngLet"}}),e}()},"/g0E":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n("DL1I");var r=n("X0jn"),i=n("EM62"),a=n("2kYt");function o(e,t){if(1&e&&(i.wc(),i.gc(0,"stop")),2&e){var n=t.$implicit,r=t.index,a=i.xc(3);i.Tb("offset",a.gradient.ratios[r])("stop-color",n)}}function s(e,t){if(1&e&&(i.wc(),i.lc(0,"linearGradient",7),i.cd(1,o,1,2,"stop",8),i.kc()),2&e){var n=i.xc(2);i.Cc("id",n.linearId),i.Tb("x1",n.gradient.x0)("y1",n.gradient.y0)("x2",n.gradient.x1)("y2",n.gradient.y1),i.Sb(1),i.Cc("ngForOf",n.gradient.colors)}}function c(e,t){if(1&e&&(i.wc(),i.gc(0,"stop")),2&e){var n=t.$implicit,r=t.index,a=i.xc(3);i.Tb("offset",a.gradient.ratios[r])("stop-color",n)}}function l(e,t){if(1&e&&(i.wc(),i.lc(0,"radialGradient",7),i.cd(1,c,1,2,"stop",8),i.kc()),2&e){var n=i.xc(2);i.Cc("id",n.radialId),i.Tb("cx",n.gradient.x0)("cy",n.gradient.y0)("r",n.gradient.r0)("fx",n.gradient.x1)("fy",n.gradient.y1)("fr",n.gradient.r1),i.Sb(1),i.Cc("ngForOf",n.gradient.colors)}}function u(e,t){if(1&e&&(i.wc(),i.lc(0,"svg",3),i.cd(1,s,2,6,"linearGradient",4),i.cd(2,l,2,8,"radialGradient",4),i.gc(3,"rect",5),i.lc(4,"text",6),i.ed(5,"Aa"),i.kc(),i.kc()),2&e){var n=i.xc();i.Sb(1),i.Cc("ngIf",n.data.isLinearGradient),i.Sb(1),i.Cc("ngIf",n.data.isRadialGradient),i.Sb(1),i.Cc("ngStyle",n.tileStyles),i.Sb(1),i.Cc("ngStyle",n.fontStyles)}}function p(e,t){if(1&e&&(i.wc(),i.lc(0,"svg",9),i.gc(1,"circle",10),i.gc(2,"line",11),i.kc()),2&e){var n=i.xc();i.Sb(1),i.Cc("ngStyle",n.tileStyles),i.Sb(1),i.Tb("stroke",n.fontStyles.fill)}}var h=function(){function e(){}return Object.defineProperty(e.prototype,"tileStyles",{get:function(){var e,t;return e=this.data.fillStyle===r.h.LinearGradient?"url(#"+this.linearId+")":this.data.fillStyle===r.h.RadialGradient?"url(#"+this.radialId+")":this.data.fillColor,t="circle"===this.svgType?0===this.data.lineStyle[0]&&0===this.data.lineStyle[1]?[0,0]:[2,5]:this.data.lineStyle,{fill:e,"fill-opacity":this.data.fillAlpha,stroke:this.data.lineColor,"stroke-opacity":this.data.fillAlpha,"stroke-width":r.a,"stroke-dasharray":t,"stroke-linecap":"round","stroke-miterlimit":10,"stroke-linejoin":"round"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gradient",{get:function(){return this.data.getGradient(43,43)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyles",{get:function(){return{"font-size":16,fill:this.data.textColor,"font-weight":"normal","font-style":"normal","text-decoration":"none"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linearId",{get:function(){return"linear-"+this.data.styleId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radialId",{get:function(){return"radial-"+this.data.styleId},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Zb({type:e,selectors:[["styling-tile"]],inputs:{data:"data",svgType:"svgType"},decls:3,vars:4,consts:[[1,"style-tile-wrapper"],["class","style-tile","xmlns","http://www.w3.org/2000/svg","width","43","height","43","viewBox","0 0 43 43",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","-1 -1 22 22",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","43","height","43","viewBox","0 0 43 43",1,"style-tile"],["gradientUnits","userSpaceOnUse",3,"id",4,"ngIf"],["x","2.5","y","2.5","width","38","height","38","rx","4","ry","4",3,"ngStyle"],["transform","translate(12.11 26.22)",3,"ngStyle"],["gradientUnits","userSpaceOnUse",3,"id"],[4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","-1 -1 22 22"],["cx","10","cy","10","r","10",3,"ngStyle"],["x1","7","y1","12.34","x2","13","y2","12.34","stroke-miterlimit","10","stroke-width","2"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.cd(1,u,6,4,"svg",1),i.cd(2,p,3,2,"svg",2),i.kc()),2&e&&(i.Xb("circle","circle"===t.svgType),i.Sb(1),i.Cc("ngIf","circle"!==t.svgType),i.Sb(1),i.Cc("ngIf","circle"===t.svgType))},directives:[a.t,a.w,a.s],styles:[".style-tile[_ngcontent-%COMP%]{border-radius:4px}.style-tile-wrapper[_ngcontent-%COMP%]{height:43px}.style-tile-wrapper.circle[_ngcontent-%COMP%]{height:26px;padding:2px;border:1px solid #fff;border-radius:100%}"],changeDetection:0}),e}()},"/nnd":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("5xGT"),i=n("19Zn"),a=n("GoAz"),o=n("TLy2"),s=n("5uDM"),c=n("xVbo"),l=n("YtkY"),u=n("J+dc"),p=n("QoSw"),h=n("c7W3"),d=n("ZyLw"),f=(n("w5Uk"),n("EM62")),g=n("2kYt"),m=n("jw4I");function v(e,t){if(1&e){var n=f.mc();f.lc(0,"text-styling-tile",3),f.tc("mouseenter",(function(){f.Pc(n);var e=t.$implicit;return f.xc().previewTileStyles(e.format)}))("click",(function(){f.Pc(n);var e=t.$implicit;return f.xc().setTileStyles(e.format)})),f.kc()}if(2&e){var r=t.$implicit;f.Cc("styleSpan",r.textStyle)("styleID",r.id)}}var b=function(){function e(e,t,n,r){this.loader=e,this.state=t,this.ll=n,this.commandService=r,this.previewState=!1,this.styledText=this.getStyledText(),this.textFormatter=new i.F}return Object.defineProperty(e,"openForContextAware",{get:function(){return"atLeastOne"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return"textstyle"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return"text-style"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return"Text Styles"},enumerable:!1,configurable:!0}),e.prototype.onActive=function(){r.Kb.track("right.textstyles.panel.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){r.Kb.track("right.textstyles.panel.click",{value1Type:"status",value1:"close"})},e.prototype.previewTileStyles=function(e){this.previewState=!0,this.commandService.preview(h.a.applyShapeStyle,{format:{"*":e}})},e.prototype.setTileStyles=function(e){r.Kb.track("right.textstyles.swatch.click"),this.commandService.dispatch(h.a.applyShapeStyle,{format:{"*":e}})},e.prototype.resetTilePreview=function(){this.previewState&&(this.commandService.dispatch(h.a.resetDiagramPreview),this.previewState=!1)},e.prototype.getShapeText=function(){var e=this.ll.forCurrent(!1);return this.state.changes("Selected").pipe(Object(o.a)((function(t){return Object(a.a)(t).pipe(Object(s.a)((function(t){return e.getShapeOnce(t).pipe(Object(c.a)((function(e){return e.hasAnyText})),Object(l.a)((function(e){return e.previewText})))})),Object(u.a)(1))})))},e.prototype.getStyledText=function(){var e=this;return this.getShapeText().pipe(Object(l.a)((function(t){return e.loader.getTextStyles().map((function(n,r){var i={indexStart:0,indexEnd:void 0,styles:n};return{id:"tstc-"+r,textStyle:e.textFormatter.apply(t,i),format:i}}))})))},e.\u0275fac=function(t){return new(t||e)(f.fc(d.a),f.fc(r.Ib),f.fc(p.a),f.fc(r.B))},e.\u0275cmp=f.Zb({type:e,selectors:[["text-styling-panel"]],decls:5,vars:3,consts:[[1,"text-style-panel","panel-container",3,"mouseleave"],[1,"panel-heading"],[3,"styleSpan","styleID","mouseenter","click",4,"ngFor","ngForOf"],[3,"styleSpan","styleID","mouseenter","click"]],template:function(e,t){1&e&&(f.lc(0,"div",0),f.tc("mouseleave",(function(){return t.resetTilePreview()})),f.lc(1,"h1",1),f.ed(2,"Text Styles"),f.kc(),f.cd(3,v,1,2,"text-styling-tile",2),f.yc(4,"async"),f.kc()),2&e&&(f.Sb(3),f.Cc("ngForOf",f.zc(4,1,t.styledText)))},directives:[g.s,m.a],pipes:[g.b],encapsulation:2,changeDetection:0}),e}()},"/w05":function(e,t,n){"use strict";t.__esModule=!0,t.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},t.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},t.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},t.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},t.preparePath=function(e,t,n){n=this.locInfo(n);for(var r=e?"@":"",i=[],o=0,s=0,c=t.length;s<c;s++){var l=t[s].part,u=t[s].original!==l;if(r+=(t[s].separator||"")+l,u||".."!==l&&"."!==l&&"this"!==l)i.push(l);else{if(i.length>0)throw new a.default("Invalid path: "+r,{loc:n});".."===l&&o++}}return{type:"PathExpression",data:e,depth:o,parts:i,original:r,loc:n}},t.prepareMustache=function(e,t,n,r,i,a){var o=r.charAt(3)||r.charAt(2),s="{"!==o&&"&"!==o;return{type:/\*/.test(r)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:s,strip:i,loc:this.locInfo(a)}},t.prepareRawBlock=function(e,t,n,r){o(e,n),r=this.locInfo(r);var i={type:"Program",body:t,strip:{},loc:r};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}},t.prepareBlock=function(e,t,n,r,i,s){r&&r.path&&o(e,r);var c=/\*/.test(e.open);t.blockParams=e.blockParams;var l=void 0,u=void 0;if(n){if(c)throw new a.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=r.strip),u=n.strip,l=n.program}i&&(i=l,l=t,t=i);return{type:c?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:l,openStrip:e.strip,inverseStrip:u,closeStrip:r&&r.strip,loc:this.locInfo(s)}},t.prepareProgram=function(e,t){if(!t&&e.length){var n=e[0].loc,r=e[e.length-1].loc;n&&r&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},t.preparePartialBlock=function(e,t,n,r){return o(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(r)}};var r,i=n("0KrK"),a=(r=i)&&r.__esModule?r:{default:r};function o(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var n={loc:e.path.loc};throw new a.default(e.path.original+" doesn't match "+t,n)}}},"/xGf":function(e,t,n){e.exports=n("4e1j")},"0KrK":function(e,t,n){"use strict";t.__esModule=!0;var r=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function i(e,t){var n=t&&t.loc,a=void 0,o=void 0,s=void 0,c=void 0;n&&(a=n.start.line,o=n.end.line,s=n.start.column,c=n.end.column,e+=" - "+a+":"+s);for(var l=Error.prototype.constructor.call(this,e),u=0;u<r.length;u++)this[r[u]]=l[r[u]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{n&&(this.lineNumber=a,this.endLineNumber=o,Object.defineProperty?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:c,enumerable:!0})):(this.column=s,this.endColumn=c))}catch(p){}}i.prototype=new Error,t.default=i,e.exports=t.default},"0N1A":function(e,t){var n,r,i,a,o,s,c,l,u,p,h,d,f,g,m,v=!1;function b(){if(!v){v=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),b=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(d=/\b(iPhone|iP[ao]d)/.exec(e),f=/\b(iP[ao]d)/.exec(e),p=/Android/i.exec(e),g=/FBAN\/\w+;/i.exec(e),m=/Mobile/i.exec(e),h=!!/Win64/.exec(e),t){(n=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(n=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(e);s=y?parseFloat(y[1])+4:n,r=t[2]?parseFloat(t[2]):NaN,i=t[3]?parseFloat(t[3]):NaN,(a=t[4]?parseFloat(t[4]):NaN)?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),o=t&&t[1]?parseFloat(t[1]):NaN):o=NaN}else n=r=i=o=a=NaN;if(b){if(b[1]){var x=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);c=!x||parseFloat(x[1].replace("_","."))}else c=!1;l=!!b[2],u=!!b[3]}else c=l=u=!1}}var y={ie:function(){return b()||n},ieCompatibilityMode:function(){return b()||s>n},ie64:function(){return y.ie()&&h},firefox:function(){return b()||r},opera:function(){return b()||i},webkit:function(){return b()||a},safari:function(){return y.webkit()},chrome:function(){return b()||o},windows:function(){return b()||l},osx:function(){return b()||c},linux:function(){return b()||u},iphone:function(){return b()||d},mobile:function(){return b()||d||f||p||m},nativeApp:function(){return b()||g},android:function(){return b()||p},ipad:function(){return b()||f}};e.exports=y},"0fSw":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("EM62"),i=function(){function e(){this.toolbars={}}return e.prototype.register=function(e){if(!e||!e.id)throw new Error("The floating toolbar instance to be registered is not valid.");this.toolbars[e.id]=e},e.prototype.unregister=function(e){delete this.toolbars[e]},e.prototype.get=function(e){return this.toolbars[e]},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac}),e}()},"0itG":function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var r=n("D57K"),i=n("EM62"),a=n("5xGT"),o=n("hX56"),s=n("4y1S"),c=n("nsO7"),l=n("C05f"),u=n("HM3f"),p=n("ROBh"),h=n("YtkY"),d=n("TLy2"),f=n("8j5Y"),g=n("Ohay"),m=n("Lrfq"),v=n("c7W3"),b=n("QoSw"),y=n("SBw3"),x=(n("2m+3"),n("WydG")),C=n("iV8b"),w=n("iy5+"),k=n("NNJu"),S=n("s2Ay"),O=n("crdX"),E=n("2kYt"),_=n("j1Bk"),I=n("Wrqg"),P=n("am3J"),T=n("pYIu"),A=n("TdEb"),M=n("pVzg"),D=n("lQIu"),j=n("ZFuN"),N=["diagramInfoSection"],R=["gridSection"];function L(e,t){if(1&e&&(i.wc(),i.vc(),i.lc(0,"div",19),i.lc(1,"label",14),i.ed(2,"LABELS.LAST_UPDATED"),i.kc(),i.lc(3,"div",20),i.lc(4,"div",21),i.ed(5),i.lc(6,"span",22),i.ed(7),i.kc(),i.kc(),i.kc(),i.kc()),2&e){var n=i.xc(2).ngIf;i.Sb(5),i.gd("",null==n?null:n.updatedBy," "),i.Sb(2),i.fd(null==n?null:n.updatedDate)}}function F(e,t){if(1&e&&(i.wc(),i.vc(),i.lc(0,"div",13),i.lc(1,"label",14),i.ed(2,"LABELS.DIAGRAM_SIZE"),i.kc(),i.lc(3,"div",20),i.lc(4,"div",23),i.gc(5,"text-input",24),i.kc(),i.lc(6,"div",23),i.gc(7,"text-input",25),i.kc(),i.kc(),i.kc()),2&e){var n=i.xc(2).ngIf;i.Sb(5),i.Ec("value","",null==n?null:n.width," px"),i.Sb(2),i.Ec("value","",null==n?null:n.height," px")}}function B(e,t){if(1&e){var n=i.mc();i.wc(),i.vc(),i.lc(0,"div",19),i.lc(1,"text-input",26),i.tc("updateText",(function(e){return i.Pc(n),i.xc(3).updateDescription(e)})),i.yc(2,"translate"),i.yc(3,"translate"),i.kc(),i.kc()}if(2&e){var r=i.xc().ngIf,a=i.xc().ngIf;i.Sb(1),i.Dc("label",i.zc(2,4,"LABELS.DESCRIPTION")),i.Dc("placeholder",i.zc(3,6,"PLACEHOLDERS.ADD_DESCRIPTION")),i.Dc("value",null==a?null:a.description),i.Cc("readonly","view"===r)}}var V=function(){return[]};function z(e,t){if(1&e){var n=i.mc();i.wc(),i.vc(),i.lc(0,"div",13),i.lc(1,"tags-input-field",27),i.tc("updateTags",(function(e){return i.Pc(n),i.xc(3).updateTags(e)})),i.yc(2,"translate"),i.yc(3,"translate"),i.kc(),i.kc()}if(2&e){var r=i.xc().ngIf,a=i.xc().ngIf;i.Sb(1),i.Dc("label",i.zc(2,4,"LABELS.TAGS")),i.Dc("placeholder",i.zc(3,6,"PLACEHOLDERS.ADD_TAGS")),i.Cc("items",null!=a&&a.tagsArray?a.tagsArray:i.Gc(8,V))("readonly","view"===r)}}function U(e,t){if(1&e){var n=i.mc();i.wc(),i.vc(),i.lc(0,"simple-dropdown-item",37),i.lc(1,"div",38),i.tc("click",(function(){i.Pc(n);var e=t.$implicit;return i.xc(4).updateDocumentStatus(e)})),i.gc(2,"span",32),i.lc(3,"span",39),i.ed(4),i.kc(),i.kc(),i.kc()}if(2&e){var r=t.$implicit;i.Cc("item",r),i.Sb(2),i.Zc("background-color",r.bgColor)("color",r.textColor),i.Sb(2),i.fd(r.label)}}var G=function(){return{closeOnItemClicked:!0,closeOnBlur:!0}};function H(e,t){if(1&e){var n=i.mc();i.lc(0,"abs-dropdown",28),i.lc(1,"simple-dropdown-button",29),i.tc("clicked",(function(e){return i.Pc(n),i.xc(3).onDropdownOpen(e)})),i.lc(2,"div",30),i.lc(3,"div",31),i.gc(4,"span",32),i.yc(5,"async"),i.yc(6,"async"),i.lc(7,"span",33),i.ed(8),i.yc(9,"async"),i.kc(),i.kc(),i.wc(),i.lc(10,"svg",34),i.gc(11,"use",35),i.kc(),i.kc(),i.kc(),i.cd(12,U,5,6,"simple-dropdown-item",36),i.kc()}if(2&e){var r=i.xc(3);i.Cc("settings",i.Gc(14,G)),i.Sb(1),i.Cc("items",r.documentStatusItems),i.Sb(3),i.Zc("background-color",i.zc(5,8,r.documentStatus).bgColor)("color",i.zc(6,10,r.documentStatus).textColor),i.Sb(4),i.fd(i.zc(9,12,r.documentStatus).label),i.Sb(4),i.Cc("ngForOf",r.documentStatusItems)}}function Y(e,t){if(1&e&&(i.lc(0,"div",40),i.gc(1,"span",32),i.yc(2,"async"),i.yc(3,"async"),i.lc(4,"span",33),i.ed(5),i.yc(6,"async"),i.kc(),i.kc()),2&e){var n=i.xc(3);i.Sb(1),i.Zc("background-color",i.zc(2,5,n.documentStatus).bgColor)("color",i.zc(3,7,n.documentStatus).textColor),i.Sb(4),i.fd(i.zc(6,9,n.documentStatus).label)}}function q(e,t){if(1&e){var n=i.mc();i.lc(0,"collapsable-panel-item",41),i.yc(1,"translate"),i.lc(2,"div",42),i.lc(3,"toggle-button",43),i.tc("change",(function(e){return i.Pc(n),i.xc(3).showGrid(e)})),i.yc(4,"translate"),i.yc(5,"async"),i.kc(),i.kc(),i.lc(6,"div",42),i.lc(7,"toggle-button",44),i.tc("change",(function(e){return i.Pc(n),i.xc(3).snapToGrid(e)})),i.yc(8,"translate"),i.kc(),i.kc(),i.lc(9,"div",42),i.lc(10,"toggle-button",45),i.tc("change",(function(e){return i.Pc(n),i.xc(3).showGuides(e)})),i.yc(11,"translate"),i.yc(12,"async"),i.kc(),i.kc(),i.lc(13,"div",42),i.lc(14,"toggle-button",46),i.tc("change",(function(e){return i.Pc(n),i.xc(3).snapToGuides(e)})),i.yc(15,"async"),i.yc(16,"translate"),i.kc(),i.kc(),i.kc()}if(2&e){var r=i.xc(3);i.Dc("heading",i.zc(1,8,"PANEL_HEADINGS.GRID")),i.Sb(3),i.Dc("label",i.zc(4,10,"LABELS.SHOW_GRID")),i.Cc("checked",i.zc(5,12,r.gridService.showGrid)),i.Sb(4),i.Dc("label",i.zc(8,14,"LABELS.SNAP_TO_GRID")),i.Sb(3),i.Dc("label",i.zc(11,16,"LABELS.SHOW_GUIDES")),i.Cc("checked",i.zc(12,18,r.state.changes("ShowGuides"))),i.Sb(4),i.Dc("label",i.zc(16,22,"LABELS.SNAP_TO_GUIDES")),i.Cc("checked",i.zc(15,20,r.state.changes("SnapToGuides")))}}function W(e,t){if(1&e){var n=i.mc();i.lc(0,"div"),i.lc(1,"div",4,5),i.lc(3,"div",6),i.gc(4,"panel-icon-header",7),i.lc(5,"button",8),i.tc("click",(function(){return i.Pc(n),i.xc(2).closePanel()})),i.wc(),i.lc(6,"svg",9),i.gc(7,"use",10),i.kc(),i.kc(),i.kc(),i.cd(8,L,8,2,"div",11),i.cd(9,F,8,2,"div",12),i.cd(10,B,4,8,"div",11),i.yc(11,"async"),i.cd(12,z,4,9,"div",12),i.yc(13,"async"),i.vc(),i.lc(14,"div",13),i.lc(15,"label",14),i.ed(16,"LABELS.DOCUMENT_STATUS.INPUT_LABEL"),i.kc(),i.cd(17,H,13,15,"abs-dropdown",15),i.yc(18,"async"),i.cd(19,Y,7,11,"ng-template",null,16,i.dd),i.kc(),i.kc(),i.lc(21,"div",null,17),i.cd(23,q,17,24,"collapsable-panel-item",18),i.kc(),i.kc()}if(2&e){var r=t.ngIf,a=i.Mc(20),o=i.xc().ngIf,s=i.xc();i.Sb(8),i.Cc("ngIf","view"===r),i.Sb(1),i.Cc("ngIf","view"===r),i.Sb(1),i.Cc("ngIf",(null==o?null:o.description)||"edit"===r&&i.zc(11,7,s.enableControls)),i.Sb(2),i.Cc("ngIf",(null==o?null:o.tagsArray)||"edit"===r&&i.zc(13,9,s.enableControls)),i.Sb(5),i.Cc("ngIf","edit"===r&&i.zc(18,11,s.enableControls))("ngIfElse",a),i.Sb(6),i.Cc("ngIf","edit"===r)}}function X(e,t){if(1&e&&(i.lc(0,"div",2),i.cd(1,W,24,13,"div",3),i.yc(2,"async"),i.kc()),2&e){var n=i.xc();i.Sb(1),i.Cc("ngIf",i.zc(2,1,n.uiState))}}var K=function(e){function t(t,n,r,i,a,o,s,c,u,p){var h=e.call(this,a,s,i,t,n,o)||this;return h.state=t,h.ll=n,h.gridService=r,h.commandService=i,h.componentFactoryResolver=a,h.injector=o,h.featureList=s,h.dataStore=c,h.translator=u,h.documentStatusMap=p,h.features=new l.a([]),h.documentStatus=new l.a(h.documentStatusMap.getDocumentStatus("none")),h.subs=[],h.enableControls=new l.a(!0),h}return Object(r.e)(t,e),Object.defineProperty(t,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return"diagraminfo"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return"properties"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.translator.instant("TOOLTIPS.DIAGRAM_INFO")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uiState",{get:function(){return this.state.changes("InterfaceControlState")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEditorOpen",{get:function(){return this.state.changes("EditingText").pipe(Object(h.a)((function(e){return!!e.open})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"documentStatusItems",{get:function(){return this.documentStatusMap.getAllStatuses()},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.translator.onLangChange.subscribe((function(){e.documentStatus.next(e.documentStatusMap.getDocumentStatus(e.documentStatus.value.id))})),this.state.changes("SidebarControls").subscribe((function(t){t===w.b.ENABLED?e.enableControls.next(!0):t===w.b.DISABLED&&e.enableControls.next(!1)})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.ngOnInit=function(){this.diagram||(this.diagram=this.getDiagramObservable())},t.prototype.onActive=function(){this.diagram||(this.diagram=this.getDiagramObservable()),this.diagramSub=this.diagram.connect(),a.Kb.track("right.info.panel.click",{value1Type:"status",value1:"open"})},t.prototype.onInactive=function(){a.Kb.track("right.info.panel.click",{value1Type:"status",value1:"close"}),this.diagramSub.unsubscribe()},t.prototype.updateDescription=function(e){a.Kb.track("right.info.description.change"),this.commandService.dispatch(v.a.updateDiagramInfo,{description:e})},t.prototype.updateTags=function(e){a.Kb.track("right.info.tags.update",{value1Type:"tags",value1:e}),this.commandService.dispatch(v.a.updateDiagramInfo,{tags:e})},t.prototype.updateDocumentStatus=function(e){var t=this.documentStatusMap.getDocumentStatus(e.id);a.Kb.track("right.info.status.change",{value1Type:"selectedStatus",value1:t.id,value2Type:"previousStatus",value2:this.documentStatus.getValue().id}),this.commandService.dispatch(v.a.updateDiagramInfo,{status:t.id}).subscribe({error:function(e){a.Kb.track("notification.right.Info.statusChange.fail",{value1Type:"error",value1:e?e.message:"Unknown"})},complete:function(){a.Kb.track("notification.right.Info.statusChange.success")}})},t.prototype.onDropdownOpen=function(){a.Kb.track("right.info.status.click")},t.prototype.showGrid=function(e){var t=e?"true":"false";a.Kb.track("right.info.grid."+t),this.gridService.showGrid.value!==e&&this.gridService.showGrid.next(e)},t.prototype.snapToGrid=function(e){var t=e?"true":"false";a.Kb.track("right.info.snap."+t),this.gridService.enableSnapToGrid.value!==e&&this.gridService.enableSnapToGrid.next(e)},t.prototype.showGuides=function(e){this.state.get("ShowGuides")!==e&&this.state.set("ShowGuides",e)},t.prototype.snapToGuides=function(e){this.state.get("SnapToGuides")!==e&&this.state.set("SnapToGuides",e)},t.prototype.closePanel=function(){this.state.set("OpenRightSidebar",k.r.None)},t.prototype.handleListData=function(e,t){if(e.forEach((function(e){return e.selected=!1})),void 0===t||"object"==typeof t&&Object(c.isEmpty)(t))return e;var n=e.find((function(e){return""+e.value==""+t}));if(n)n.selected=!0;else{var r=e.find((function(e){return e.custom}));r?(r.id=t,r.label=t,r.buttonLabel=t,r.value=t,r.selected=!0):e.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}},t.prototype.getDiagramObservable=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(d.a)((function(e){return e.getDiagramModel()})),Object(d.a)((function(t){var n=e.dataStore.findOne(s.v,{id:t.updatedBy}).pipe(Object(h.a)((function(e){return e&&e.firstName?e:{firstName:"Someone"}})));return Object(u.b)([Object(p.a)(t),n])})),Object(h.a)((function(t){var n=Object(r.h)(t,2),i=n[0],a=n[1],o=i.getBounds();return{description:i.description,tagsArray:i.tagsArray,status:i.status,width:Math.round(o.width),height:Math.round(o.height),typeName:i.typeName?i.typeName:"Block Diagram",updatedBy:a.firstName,updatedDate:e.translator.instant("LABELS.UPDATED_THIS")+" "+i.lastUpdatedMoment()}})),Object(f.a)((function(t){e.documentStatus.next(e.documentStatusMap.getDocumentStatus(t.status))})),Object(g.a)((function(e,t){return Object(c.isEqual)(e,t)})),Object(m.a)())},t.\u0275fac=function(e){return new(e||t)(i.fc(a.Ib),i.fc(b.a),i.fc("GridService"),i.fc(a.B),i.fc(i.m),i.fc(i.C),i.fc(y.a),i.fc(o.b),i.fc(S.e),i.fc(C.a))},t.\u0275cmp=i.Zb({type:t,selectors:[["diagram-info-panel"]],viewQuery:function(e,t){var n;(1&e&&(i.jd(N,!0,i.r),i.jd(R,!0,i.r)),2&e)&&(i.Lc(n=i.uc())&&(t.diagramInfoSection=n.first),i.Lc(n=i.uc())&&(t.gridSection=n.first))},features:[i.Pb],decls:3,vars:3,consts:[[1,"sidebar-scrollbar"],["class","panel-container",4,"ngIf"],[1,"panel-container"],[4,"ngIf"],[1,"panel-section","fx-margin-top-24"],["diagramInfoSection",""],[1,"panel-title-close-container"],["mainText","HEADER_MENU.PREFERENCES"],[1,"panel-close-btn",3,"click"],[1,"nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],["class","panel-item fx-margin-top-24",4,"ngIf"],["class","panel-item",4,"ngIf"],[1,"panel-item"],["translate",""],["class","document-status-dropdown",3,"settings",4,"ngIf","ngIfElse"],["readonlyStatus",""],["gridSection",""],["testId","grid-panel",3,"heading",4,"ngIf"],[1,"panel-item","fx-margin-top-24"],[1,"row"],[1,"col","fx-margin-top-5"],[1,"grey","info-panel-user-time-stamp"],[1,"col"],["inline","true","label","W","readonly","true","transparentTextBox","true",3,"value"],["inline","true","label","H","readonly","true","transparentTextBox","true",3,"value"],["multiLined","true","data-testid","diagram-description",1,"info-panel-text-input",3,"label","placeholder","value","readonly","updateText"],["data-testid","add-tags",1,"info-panel-text-input",3,"label","items","placeholder","readonly","updateTags"],[1,"document-status-dropdown",3,"settings"],["ddbutton","",1,"document-status-dropdown-container",3,"items","clicked"],[1,"dropdown-idle"],[1,"document-status-dd-item"],[1,"document-status-dd-item-dot"],["translate","",1,"document-status-dd-item-text"],[1,"document-status-dropdown-icon","light-nv-blue"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-thick"],["dditem","",3,"item",4,"ngFor","ngForOf"],["dditem","",3,"item"],[1,"document-status-dd-item","document-status-list-item",3,"click"],[1,"document-status-dd-item-text"],[1,"document-status-dd-item","document-status-list-item","document-status-label"],["testId","grid-panel",3,"heading"],[1,"panel-item","fx-margin-right-50"],["data-testid","show-grid-toggle",3,"label","checked","change"],["data-testid","snap-grid-toggle","checked","gridService.enableSnapToGrid | async",3,"label","change"],["data-testid","show-guides-toggle",3,"label","checked","change"],["data-testid","snap-guides-toggle",3,"checked","label","change"]],template:function(e,t){1&e&&(i.lc(0,"perfect-scrollbar",0),i.cd(1,X,3,3,"div",1),i.yc(2,"async"),i.kc()),2&e&&(i.Sb(1),i.Cc("ngIf",i.zc(2,1,t.diagram)))},directives:[O.b,E.t,_.a,S.a,I.a,P.a,T.a,A.a,E.s,M.a,D.b,j.a],pipes:[E.b,S.d],styles:[".info-panel-text-formatting[_ngcontent-%COMP%]{display:flex}.info-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container{display:inline-block;width:22px}.info-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container button{padding:0;margin:0}.info-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container .nu-icon{width:24px;height:24px}.info-panel-text-formatting[_ngcontent-%COMP%]   .info-panel-text-bius[_ngcontent-%COMP%]{flex:1}.info-panel-text-formatting[_ngcontent-%COMP%]   .info-panel-text-align[_ngcontent-%COMP%]{margin-right:15px}.info-panel-line-formatting[_ngcontent-%COMP%]   .shrink[_ngcontent-%COMP%]{width:calc(54% - 10px)}.info-panel-line-formatting[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]{width:46%}.info-panel-style-color-pickers[_ngcontent-%COMP%]  .colorpicker-container{margin-bottom:20px}.info-panel-user-time-stamp[_ngcontent-%COMP%]{text-transform:lowercase}.info-panel-overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5);z-index:1}.panel-section-color-text[_ngcontent-%COMP%]{margin-left:0}.document-status-dropdown-container[_ngcontent-%COMP%]{background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;background-color:#fff;border-radius:4px;border:1px solid #d3d3e7;margin-top:5px;display:flex;align-items:center;padding:4px;height:36px}.document-status-dropdown-container[_ngcontent-%COMP%]:hover{border:1px solid #80c6b9}.dropdown-selected[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.dropdown-value[_ngcontent-%COMP%]{flex:1}.document-status-dd-item-list[_ngcontent-%COMP%]{position:absolute;border:1px solid #d3d3e7;border-radius:4px;width:100%;background-color:#fff;padding-right:10px;padding-left:10px;right:0;min-width:130px;z-index:1;overflow:hidden;box-shadow:0 2px 2px #c3c3de;opacity:0;transform:translateY(-5px)}.document-status-dd-item[_ngcontent-%COMP%]{display:flex;align-items:center}.document-status-list-item[_ngcontent-%COMP%]{padding:6px 0}.document-status-label[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #d3d3e7;margin-top:5px;padding:8px;box-shadow:0 2px 2px rgba(195,195,222,.25)}.document-status-dropdown-icon[_ngcontent-%COMP%]{margin-right:10px;height:12px;width:12px}.document-status-dd-item-dot[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%;margin:10px}.document-status-dd-item-text[_ngcontent-%COMP%]{color:#04263d;font-weight:400;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.dropdown-idle[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.dropdown-idle[_ngcontent-%COMP%]   .document-status-dd-item[_ngcontent-%COMP%]{flex-grow:1}.chevron[_ngcontent-%COMP%]{width:24px;height:24px}.document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-inner, .document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-inner-wrapper, .document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container, .document-status-dropdown[_ngcontent-%COMP%]  .simple-dd-btn-container{width:100%;max-width:100%}@media only screen and (max-height:736px){.document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container{height:200px}}.info-panel-main-title[_ngcontent-%COMP%]{font-family:Lato,sans-serif;font-size:18px;font-style:normal;font-weight:400;line-height:22px;letter-spacing:0;text-align:left}.info-panel-text-input[_ngcontent-%COMP%]    , .info-panel-text-input[_ngcontent-%COMP%]     .text-input{height:36px}.panel-title-close-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:40px}.panel-close-btn[_ngcontent-%COMP%]{margin-top:10px;background:transparent;margin-right:-10px;cursor:pointer}.nu-ic-close[_ngcontent-%COMP%], .panel-close-btn[_ngcontent-%COMP%]{height:35px;width:35px}"],changeDetection:0}),t}(x.a)},"13fK":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("ROBh"),i=n("5xGT"),a=n("QoSw"),o=n("YtkY"),s=n("EM62"),c=function(){function e(e,t){this.ll=e,this.states=t}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this.states.get("Selected");return this.locator.getDiagramOnce().pipe(Object(o.a)((function(e){return!e.isShapeInGroup(t)})))},e.prototype.getFeatureData=function(e,t){var n=t.options.map((function(e){return{id:e.id,label:e.label,itemIcon:{type:"svg",value:e.icon},value:e}}));return Object(r.a)({value:n})},e.prototype.getApplyData=function(e,t){var n={shapeIds:this.states.get("Selected"),isVertical:t.value.isVertical,alignment:t.value.alignment};return Object(r.a)(n)},e.\u0275fac=function(t){return new(t||e)(s.pc(a.a),s.pc(i.Ib))},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},"142O":function(e,t,n){"use strict";t.__esModule=!0;var r=n("XVEb");t.default=function(e){e.registerDecorator("inline",(function(e,t,n,i){var a=e;return t.partials||(t.partials={},a=function(i,a){var o=n.partials;n.partials=r.extend({},o,t.partials);var s=e(i,a);return n.partials=o,s}),t.partials[i.args[0]]=i.fn,a}))},e.exports=t.default},"16Fa":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("D57K"),i=n("Jzy8"),a=n("hX56"),o=n("4y1S"),s=n("nsO7"),c=n("ROBh"),l=n("P4Xx"),u=n("YtkY"),p=n("J+dc"),h=n("TLy2"),d=n("QoSw"),f=n("oyCe"),g=n("X0jn"),m=n("EM62"),v=function(){function e(e,t,n,r){this.dataStore=e,this.diagramSnapshotSvc=t,this.ll=n,this.planPermManager=r,this.locators={}}return e.prototype.getHistoryItems=function(e,t){void 0===t&&(t=!1);var n=this.dataStore.getModelStore(f.a).findOneHistoryMetadata({id:e}).pipe(Object(u.a)((function(e){return e&&e.snapshots||[]})));return t?n.pipe(Object(p.a)(1)):n},e.prototype.getHistoryItemsWithUsers=function(e,t){var n=this;return void 0===t&&(t=!1),this.getHistoryItems(e,t).pipe(Object(u.a)((function(e){return e.filter((function(e){return e.ts>n.getHistoryPermissionDuration()}))})),Object(h.a)((function(e){if(0===e.length)return Object(c.a)(e);var t=Object(s.uniq)(Object(s.flatMap)(e,(function(e){return e.userIds})));return Object(l.a)(t.map((function(e){return n.dataStore.findOneLatest(o.v,{id:e})}))).pipe(Object(u.a)((function(t){var n=t.filter(Boolean).reduce((function(e,t){return e[t.id]=t,e}),{});return e.map((function(e){return Object(r.a)(Object(r.a)({},e),{users:(e.userIds||[]).map((function(e){return n[e]})).filter(Boolean)})}))})))})))},e.prototype.getLatestHistoryItem=function(e,t){return void 0===t&&(t=!0),this.getHistoryItems(e,t).pipe(Object(u.a)((function(e){return e[e.length-1]})))},e.prototype.fetchSnapshot=function(e,t){return this.getSnapshotLocator(e,t).getDiagramOnce()},e.prototype.getSnapshotLocator=function(e,t){if(!this.locators[e]||!this.locators[e][t]){var n=this.ll.createSnapshotLocator(e,this.fetchRawSnapshot(e,t));this.locators[e]||(this.locators[e]={}),this.locators[e][t]=n}return this.locators[e][t]},e.prototype.fetchRawSnapshot=function(e,t){return this.diagramSnapshotSvc.fetchSnapshot(e,t)},e.prototype.getHistoryPermissionDuration=function(){return-1===this.planPermManager.getMaxUsage(g.p.CREATELY_VERSION_HISTORY)?this.planPermManager.getMaxUsage(g.p.CREATELY_VERSION_HISTORY):(new Date).getTime()-864e5*this.planPermManager.getMaxUsage(g.p.CREATELY_VERSION_HISTORY)},e.\u0275fac=function(t){return new(t||e)(m.pc(a.b),m.pc(i.m),m.pc(d.a),m.pc(o.m))},e.\u0275prov=m.bc({token:e,factory:e.\u0275fac}),e}()},"1JG0":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("gZOS"),a=n("yH5A"),o=n("EM62"),s=function(){function e(){}return e.prototype.getSakotaDiff=function(e,t){var n=i.Sakota.create(e);return this._applyChanges(n,e,t),n.__sakota__.getChanges()},e.prototype.applyChanges=function(e,t){this._applyChanges(e,e,t)},e.prototype._applyChanges=function(e,t,n){var r=this;Object(a.observableDiff)(t,n,(function(t){if("A"===t.kind){var i=t.path.slice(),o=r.getProp(e,i).slice();Object(a.applyChange)(r.getWrappedObj(i.slice().reverse(),o),n,t);var s=i.pop();r.getProp(e,i)[s]=o}else Object(a.applyChange)(e,n,t)}))},e.prototype.getProp=function(e,t){if(!t||0===t.length)return e;var n=Object(r.h)(t),i=n[0],a=n.slice(1);return this.getProp(e[i],a)},e.prototype.getWrappedObj=function(e,t){var n;if(0===e.length)return t;var i=Object(r.h)(e),a=i[0],o=i.slice(1);return this.getWrappedObj(o,((n={})[a]=t,n))},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},"1NHC":function(e,t,n){var r=n("sfKy"),i=n("oFOz"),a=n("eQvJ"),o=n("7B5I"),s=n("39iF");t.ABS=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.abs(e)},t.ACOS=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.acos(e);return isNaN(t)&&(t=i.num),t},t.ACOSH=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.log(e+Math.sqrt(e*e-1));return isNaN(t)&&(t=i.num),t},t.ACOT=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.atan(1/e)},t.ACOTH=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=.5*Math.log((e+1)/(e-1));return isNaN(t)&&(t=i.num),t},t.AGGREGATE=function(e,n,o,s){if(e=r.parseNumber(e),n=r.parseNumber(e),r.anyIsError(e,n))return i.value;switch(e){case 1:return a.AVERAGE(o);case 2:return a.COUNT(o);case 3:return a.COUNTA(o);case 4:return a.MAX(o);case 5:return a.MIN(o);case 6:return t.PRODUCT(o);case 7:return a.STDEV.S(o);case 8:return a.STDEV.P(o);case 9:return t.SUM(o);case 10:return a.VAR.S(o);case 11:return a.VAR.P(o);case 12:return a.MEDIAN(o);case 13:return a.MODE.SNGL(o);case 14:return a.LARGE(o,s);case 15:return a.SMALL(o,s);case 16:return a.PERCENTILE.INC(o,s);case 17:return a.QUARTILE.INC(o,s);case 18:return a.PERCENTILE.EXC(o,s);case 19:return a.QUARTILE.EXC(o,s)}},t.ARABIC=function(e){if(null==e)return 0;if(e instanceof Error)return e;if(!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(e))return i.value;var t=0;return e.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(e){t+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[e]})),t},t.ASIN=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.asin(e);return isNaN(t)&&(t=i.num),t},t.ASINH=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.log(e+Math.sqrt(e*e+1))},t.ATAN=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.atan(e)},t.ATAN2=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||Math.atan2(e,t)},t.ATANH=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.log((1+e)/(1-e))/2;return isNaN(t)&&(t=i.num),t},t.BASE=function(e,t,n){e=r.parseNumber(e),t=r.parseNumber(t),n=r.parseNumber(n);var a=r.anyError(e,t,n);if(a)return a;if(0===t)return i.num;var o=e.toString(t);return new Array(Math.max(n+1-o.length,0)).join("0")+o},t.CEILING=function(e,n,i){e=r.parseNumber(e),n=r.parseNumber(n),i=r.parseNumber(i);var a=r.anyError(e,n,i);if(a)return a;if(0===n)return 0;n=Math.abs(n);var o=-Math.floor(Math.log(n)/Math.log(10));return e>=0?t.ROUND(Math.ceil(e/n)*n,o):0===i?-t.ROUND(Math.floor(Math.abs(e)/n)*n,o):-t.ROUND(Math.ceil(Math.abs(e)/n)*n,o)},t.CEILING.MATH=t.CEILING,t.CEILING.PRECISE=t.CEILING,t.COMBIN=function(e,n){e=r.parseNumber(e),n=r.parseNumber(n);var a=r.anyError(e,n);return a||(e<n?i.num:t.FACT(e)/(t.FACT(n)*t.FACT(e-n)))},t.COMBINA=function(e,n){e=r.parseNumber(e),n=r.parseNumber(n);var a=r.anyError(e,n);return a||(e<n?i.num:0===e&&0===n?1:t.COMBIN(e+n-1,e-1))},t.COS=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.cos(e)},t.COSH=function(e){return(e=r.parseNumber(e))instanceof Error?e:(Math.exp(e)+Math.exp(-e))/2},t.COT=function(e){return(e=r.parseNumber(e))instanceof Error?e:0===e?i.div0:1/Math.tan(e)},t.COTH=function(e){if((e=r.parseNumber(e))instanceof Error)return e;if(0===e)return i.div0;var t=Math.exp(2*e);return(t+1)/(t-1)},t.CSC=function(e){return(e=r.parseNumber(e))instanceof Error?e:0===e?i.div0:1/Math.sin(e)},t.CSCH=function(e){return(e=r.parseNumber(e))instanceof Error?e:0===e?i.div0:2/(Math.exp(e)-Math.exp(-e))},t.DECIMAL=function(e,t){if(arguments.length<1)return i.value;e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(0===t?i.num:parseInt(e,t))},t.DEGREES=function(e){return(e=r.parseNumber(e))instanceof Error?e:180*e/Math.PI},t.EVEN=function(e){return(e=r.parseNumber(e))instanceof Error?e:t.CEILING(e,-2,-1)},t.EXP=function(e){return arguments.length<1?i.na:arguments.length>1?i.error:(e=r.parseNumber(e))instanceof Error?e:e=Math.exp(e)};var c=[];t.FACT=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var n=Math.floor(e);return 0===n||1===n?1:(c[n]>0||(c[n]=t.FACT(n-1)*n),c[n])},t.FACTDOUBLE=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var n=Math.floor(e);return n<=0?1:n*t.FACTDOUBLE(n-2)},t.FLOOR=function(e,n){e=r.parseNumber(e),n=r.parseNumber(n);var a=r.anyError(e,n);if(a)return a;if(0===n)return 0;if(!(e>=0&&n>0||e<=0&&n<0))return i.num;n=Math.abs(n);var o=-Math.floor(Math.log(n)/Math.log(10));return e>=0?t.ROUND(Math.floor(e/n)*n,o):-t.ROUND(Math.ceil(Math.abs(e)/n),o)},t.FLOOR.MATH=function(e,n,i){if(n instanceof Error)return n;n=void 0===n?0:n,e=r.parseNumber(e),n=r.parseNumber(n),i=r.parseNumber(i);var a=r.anyError(e,n,i);if(a)return a;if(0===n)return 0;n=n?Math.abs(n):1;var o=-Math.floor(Math.log(n)/Math.log(10));return e>=0?t.ROUND(Math.floor(e/n)*n,o):0===i||void 0===i?-t.ROUND(Math.ceil(Math.abs(e)/n)*n,o):-t.ROUND(Math.floor(Math.abs(e)/n)*n,o)},t.FLOOR.PRECISE=t.FLOOR.MATH,t.GCD=function(){var e=r.parseNumberArray(r.flatten(arguments));if(e instanceof Error)return e;for(var t=e.length,n=e[0],i=n<0?-n:n,a=1;a<t;a++){for(var o=e[a],s=o<0?-o:o;i&&s;)i>s?i%=s:s%=i;i+=s}return i},t.INT=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.floor(e)},t.ISO={CEILING:t.CEILING},t.LCM=function(){var e=r.parseNumberArray(r.flatten(arguments));if(e instanceof Error)return e;for(var t,n,i,a,o=1;void 0!==(i=e.pop());){if(0===i)return 0;for(;i>1;){if(i%2){for(t=3,n=Math.floor(Math.sqrt(i));t<=n&&i%t;t+=2);a=t<=n?t:i}else a=2;for(i/=a,o*=a,t=e.length;t;e[--t]%a==0&&1==(e[t]/=a)&&e.splice(t,1));}}return o},t.LN=function(e){return(e=r.parseNumber(e))instanceof Error?e:0===e?i.num:Math.log(e)},t.LN10=function(){return Math.log(10)},t.LN2=function(){return Math.log(2)},t.LOG10E=function(){return Math.LOG10E},t.LOG2E=function(){return Math.LOG2E},t.LOG=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(0===e||0===t?i.num:Math.log(e)/Math.log(t))},t.LOG10=function(e){return(e=r.parseNumber(e))instanceof Error?e:0===e?i.num:Math.log(e)/Math.log(10)},t.MOD=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);if(n)return n;if(0===t)return i.div0;var a=Math.abs(e%t);return a=e<0?t-a:a,t>0?a:-a},t.MROUND=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(e*t==0?0:e*t<0?i.num:Math.round(e/t)*t)},t.MULTINOMIAL=function(){var e=r.parseNumberArray(r.flatten(arguments));if(e instanceof Error)return e;for(var n=0,i=1,a=0;a<e.length;a++)n+=e[a],i*=t.FACT(e[a]);return t.FACT(n)/i},t.ODD=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.ceil(Math.abs(e));return t=1&t?t:t+1,e>=0?t:-t},t.PI=function(){return Math.PI},t.E=function(){return Math.E},t.POWER=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);if(n)return n;if(0===e&&0===t)return i.num;var a=Math.pow(e,t);return isNaN(a)?i.num:a},t.PRODUCT=function(){var e=r.flatten(arguments),t=e.filter((function(e){return null!=e}));if(0===t.length)return 0;var n=r.parseNumberArray(t);if(n instanceof Error)return n;for(var i=1,a=0;a<n.length;a++)i*=n[a];return i},t.QUOTIENT=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||parseInt(e/t,10)},t.RADIANS=function(e){return(e=r.parseNumber(e))instanceof Error?e:e*Math.PI/180},t.RAND=function(){return Math.random()},t.RANDBETWEEN=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||e+Math.ceil((t-e+1)*Math.random())-1},t.ROMAN=function(e){if((e=r.parseNumber(e))instanceof Error)return e;for(var t=String(e).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],i="",a=3;a--;)i=(n[+t.pop()+10*a]||"")+i;return new Array(+t.join("")+1).join("M")+i},t.ROUND=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||Math.round(e*Math.pow(10,t))/Math.pow(10,t)},t.ROUNDDOWN=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(e>0?1:-1)*Math.floor(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)},t.ROUNDUP=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(e>0?1:-1)*Math.ceil(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)},t.SEC=function(e){return(e=r.parseNumber(e))instanceof Error?e:1/Math.cos(e)},t.SECH=function(e){return(e=r.parseNumber(e))instanceof Error?e:2/(Math.exp(e)+Math.exp(-e))},t.SERIESSUM=function(e,t,n,a){if(e=r.parseNumber(e),t=r.parseNumber(t),n=r.parseNumber(n),a=r.parseNumberArray(a),r.anyIsError(e,t,n,a))return i.value;for(var o=a[0]*Math.pow(e,t),s=1;s<a.length;s++)o+=a[s]*Math.pow(e,t+s*n);return o},t.SIGN=function(e){return(e=r.parseNumber(e))instanceof Error?e:e<0?-1:0===e?0:1},t.SIN=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.sin(e)},t.SINH=function(e){return(e=r.parseNumber(e))instanceof Error?e:(Math.exp(e)-Math.exp(-e))/2},t.SQRT=function(e){return(e=r.parseNumber(e))instanceof Error?e:e<0?i.num:Math.sqrt(e)},t.SQRTPI=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.sqrt(e*Math.PI)},t.SQRT1_2=function(){return 1/Math.sqrt(2)},t.SQRT2=function(){return Math.sqrt(2)},t.SUBTOTAL=function(e,n){if((e=r.parseNumber(e))instanceof Error)return e;switch(e){case 1:return a.AVERAGE(n);case 2:return a.COUNT(n);case 3:return a.COUNTA(n);case 4:return a.MAX(n);case 5:return a.MIN(n);case 6:return t.PRODUCT(n);case 7:return a.STDEV.S(n);case 8:return a.STDEV.P(n);case 9:return t.SUM(n);case 10:return a.VAR.S(n);case 11:return a.VAR.P(n);case 101:return a.AVERAGE(n);case 102:return a.COUNT(n);case 103:return a.COUNTA(n);case 104:return a.MAX(n);case 105:return a.MIN(n);case 106:return t.PRODUCT(n);case 107:return a.STDEV.S(n);case 108:return a.STDEV.P(n);case 109:return t.SUM(n);case 110:return a.VAR.S(n);case 111:return a.VAR.P(n)}},t.ADD=function(e,t){if(2!==arguments.length)return i.na;e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||e+t},t.MINUS=function(e,t){if(2!==arguments.length)return i.na;e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||e-t},t.DIVIDE=function(e,t){if(2!==arguments.length)return i.na;e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(0===t?i.div0:e/t)},t.MULTIPLY=function(e,t){if(2!==arguments.length)return i.na;e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||e*t},t.GT=function(e,t){if(2!==arguments.length)return i.na;if(e instanceof Error)return e;if(t instanceof Error)return t;r.anyIsString(e,t)?(e=r.parseString(e),t=r.parseString(t)):(e=r.parseNumber(e),t=r.parseNumber(t));var n=r.anyError(e,t);return n||e>t},t.GTE=function(e,t){if(2!==arguments.length)return i.na;r.anyIsString(e,t)?(e=r.parseString(e),t=r.parseString(t)):(e=r.parseNumber(e),t=r.parseNumber(t));var n=r.anyError(e,t);return n||e>=t},t.LT=function(e,t){if(2!==arguments.length)return i.na;r.anyIsString(e,t)?(e=r.parseString(e),t=r.parseString(t)):(e=r.parseNumber(e),t=r.parseNumber(t));var n=r.anyError(e,t);return n||e<t},t.LTE=function(e,t){if(2!==arguments.length)return i.na;r.anyIsString(e,t)?(e=r.parseString(e),t=r.parseString(t)):(e=r.parseNumber(e),t=r.parseNumber(t));var n=r.anyError(e,t);return n||e<=t},t.EQ=function(e,t){return 2!==arguments.length?i.na:e instanceof Error?e:t instanceof Error?t:(null===e&&(e=void 0),null===t&&(t=void 0),e===t)},t.NE=function(e,t){return 2!==arguments.length?i.na:e instanceof Error?e:t instanceof Error?t:(null===e&&(e=void 0),null===t&&(t=void 0),e!==t)},t.POW=function(e,n){return 2!==arguments.length?i.na:t.POWER(e,n)},t.SUM=function(){var e=0;return r.arrayEach(r.argsToArray(arguments),(function(n){if(e instanceof Error)return!1;if(n instanceof Error)e=n;else if("number"==typeof n)e+=n;else if("string"==typeof n){var r=parseFloat(n);!isNaN(r)&&(e+=r)}else if(Array.isArray(n)){var i=t.SUM.apply(null,n);i instanceof Error?e=i:e+=i}})),e},t.SUMIF=function(e,t,n){if(e=r.flatten(e),n=n?r.flatten(n):e,e instanceof Error)return e;if(null==t||t instanceof Error)return 0;for(var i=0,a="*"===t,o=a?null:s.parse(t+""),c=0;c<e.length;c++){var l=e[c],u=n[c];if(a)i+=l;else{var p=[s.createToken(l,s.TOKEN_TYPE_LITERAL)].concat(o);i+=s.compute(p)?u:0}}return i},t.SUMIFS=function(){var e=r.argsToArray(arguments),t=r.parseNumberArray(r.flatten(e.shift()));if(t instanceof Error)return t;for(var n=e,i=n.length/2,a=0;a<i;a++)n[2*a]=r.flatten(n[2*a]);var o=0;for(a=0;a<t.length;a++){for(var c=!1,l=0;l<i;l++){var u=n[2*l][a],p=n[2*l+1],h=void 0===p||"*"===p,d=!1;if(h)d=!0;else{var f=s.parse(p+""),g=[s.createToken(u,s.TOKEN_TYPE_LITERAL)].concat(f);d=s.compute(g)}if(!d){c=!1;break}c=!0}c&&(o+=t[a])}return o},t.SUMPRODUCT=function(){if(!arguments||0===arguments.length)return i.value;for(var e,t,n,a,o=arguments.length+1,s=0,c=0;c<arguments[0].length;c++)if(arguments[0][c]instanceof Array)for(var l=0;l<arguments[0][c].length;l++){for(e=1,t=1;t<o;t++){var u=arguments[t-1][c][l];if(u instanceof Error)return u;if((a=r.parseNumber(u))instanceof Error)return a;e*=a}s+=e}else{for(e=1,t=1;t<o;t++){var p=arguments[t-1][c];if(p instanceof Error)return p;if((n=r.parseNumber(p))instanceof Error)return n;e*=n}s+=e}return s},t.SUMSQ=function(){var e=r.parseNumberArray(r.flatten(arguments));if(e instanceof Error)return e;for(var t=0,n=e.length,i=0;i<n;i++)t+=o.ISNUMBER(e[i])?e[i]*e[i]:0;return t},t.SUMX2MY2=function(e,t){if(e=r.parseNumberArray(r.flatten(e)),t=r.parseNumberArray(r.flatten(t)),r.anyIsError(e,t))return i.value;for(var n=0,a=0;a<e.length;a++)n+=e[a]*e[a]-t[a]*t[a];return n},t.SUMX2PY2=function(e,t){if(e=r.parseNumberArray(r.flatten(e)),t=r.parseNumberArray(r.flatten(t)),r.anyIsError(e,t))return i.value;var n=0;e=r.parseNumberArray(r.flatten(e)),t=r.parseNumberArray(r.flatten(t));for(var a=0;a<e.length;a++)n+=e[a]*e[a]+t[a]*t[a];return n},t.SUMXMY2=function(e,t){if(e=r.parseNumberArray(r.flatten(e)),t=r.parseNumberArray(r.flatten(t)),r.anyIsError(e,t))return i.value;var n=0;e=r.flatten(e),t=r.flatten(t);for(var a=0;a<e.length;a++)n+=Math.pow(e[a]-t[a],2);return n},t.TAN=function(e){return(e=r.parseNumber(e))instanceof Error?e:Math.tan(e)},t.TANH=function(e){if((e=r.parseNumber(e))instanceof Error)return e;var t=Math.exp(2*e);return(t-1)/(t+1)},t.TRUNC=function(e,t){e=r.parseNumber(e),t=r.parseNumber(t);var n=r.anyError(e,t);return n||(e>0?1:-1)*Math.floor(Math.abs(e)*Math.pow(10,t))/Math.pow(10,t)}},"1OKj":function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("KEM+")),a=r(n("VrFO")),o=r(n("Y9Ll")),s=n("Y6vQ"),c=n("4e42").getGrammar,l=function(){function e(){(0,a.default)(this,e),this.expr=this.expr.bind(this),this._grammar=c()}return(0,o.default)(e,[{key:"addBinaryOp",value:function(e,t,n,r){this._addGrammarElement(e,(0,i.default)({type:"binaryOp",precedence:t},r?"evalOnDemand":"eval",n))}},{key:"addFunction",value:function(e,t){this._grammar.functions[e]=t}},{key:"addFunctions",value:function(e){for(var t in e)this._grammar.functions[t]=e[t]}},{key:"addUnaryOp",value:function(e,t){this._addGrammarElement(e,{type:"unaryOp",weight:1/0,eval:t})}},{key:"addTransform",value:function(e,t){this._grammar.transforms[e]=t}},{key:"addTransforms",value:function(e){for(var t in e)this._grammar.transforms[t]=e[t]}},{key:"compile",value:function(e){return this.createExpression(e).compile()}},{key:"createExpression",value:function(e){return new s(this._grammar,e)}},{key:"getFunction",value:function(e){return this._grammar.functions[e]}},{key:"getTransform",value:function(e){return this._grammar.transforms[e]}},{key:"eval",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.createExpression(e);return n.eval(t)}},{key:"evalSync",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.createExpression(e);return n.evalSync(t)}},{key:"expr",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=e.reduce((function(e,t,r){return e+=t+(r<n.length?n[r]:"")}),"");return this.createExpression(i)}},{key:"removeOp",value:function(e){!this._grammar.elements[e]||"binaryOp"!==this._grammar.elements[e].type&&"unaryOp"!==this._grammar.elements[e].type||delete this._grammar.elements[e]}},{key:"_addGrammarElement",value:function(e,t){this._grammar.elements[e]=t}}]),e}();e.exports=new l,e.exports.Jexl=l},"1U5y":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("5xGT"),i=n("19Zn"),a=n("ROBh"),o=n("P4Xx"),s=n("nsO7"),c=n("6EBr"),l=n("YtkY"),u=n("0jHB"),p=n("EM62"),h=function(){function e(e,t){this.staticRenderer=e,this.defLocator=t,this.longArrowWidth=70,this.shortArrowWidth=30,this.arrowheadHeight=11.5,this.arrowThickness=2}return e.prototype.getFeatureData=function(e,t){var n=this,r="changeLeftArrowHead"===e?"left":"right",i=t.options.map((function(e){return n.getItemData(e,e,r,t.shapeId,t.end)})),a=this.getItemData("none",null,r,t.shapeId,t.end);i.unshift(a);var o=Object(s.uniqBy)(i,(function(e){return e.id}));return(o.find((function(e){return e.id===t.selected}))||a).selected=!0,this.loadSourceFiles(t.options).pipe(Object(l.a)((function(){return{value:o}})))},e.prototype.getApplyData=function(e,t){var n,r,i={changes:(n={},n[t.shapeId]=(r={},r[t.end]=t.value,r),n)};return Object(a.a)(i)},e.prototype.getDrawableIcon=function(e,t,n){var i=this;if(!e)return n===this.shortArrowWidth?"left"===t?{type:"svg",value:"arrow-default-left"}:{type:"svg",value:"arrow-default-right"}:{type:"canvas",value:function(e,t){var r=t?c.a.primarySelectionColor:c.a.defaultIconColor;i.drawTail(e,r,n)}};var a=r.fb.fromTransform({scaleX:1,scaleY:1,skewX:0,skewY:0,x:"right"===t?n-this.arrowThickness:this.arrowThickness,y:this.arrowheadHeight/2+2*this.arrowThickness,angle:"right"===t?0:180});return{type:"canvas",value:function(t,r){var o=r?c.a.primarySelectionColor:c.a.defaultIconColor;i.drawTail(t,o,n),i.staticRenderer.renderArrowHeadSync(t,e,{x:0,y:0,width:i.arrowheadHeight,height:i.arrowheadHeight},a,{lineColor:o,lineThickness:i.arrowThickness})}}},e.prototype.drawTail=function(e,t,n){e.setStrokeStyle(this.arrowThickness),e.beginStroke(t),e.moveTo(this.arrowThickness,this.arrowheadHeight/2+2*this.arrowThickness),e.lineTo(n-this.arrowThickness,this.arrowheadHeight/2+2*this.arrowThickness)},e.prototype.loadSourceFiles=function(e){var t=this,n=e.map((function(e){return t.defLocator.getClass(e)}));return Object(o.a)(n)},e.prototype.getItemData=function(e,t,n,r,i){return{id:e,label:null,itemIcon:this.getDrawableIcon(t,n,this.longArrowWidth),buttonIcon:this.getDrawableIcon(t,n,this.shortArrowWidth),value:t,shapeId:r,end:i}},e.\u0275fac=function(t){return new(t||e)(p.pc(i.C),p.pc(u.a))},e.\u0275prov=p.bc({token:e,factory:e.\u0275fac}),e}()},"1ahL":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("Lmsv"),i=n("5xGT"),a=n("U8K0"),o=n("EM62");function s(e,t){if(1&e&&o.gc(0,"notification-list-item",5),2&e){var n=t.$implicit;o.Cc("notification",n)}}function c(e,t){if(1&e){var n=o.mc();o.lc(0,"div",2),o.lc(1,"perfect-scrollbar",3),o.tc("psYReachEnd",(function(){return o.Pc(n),o.xc().loadMore()})),o.cd(2,s,1,1,"notification-list-item",4),o.yc(3,"async"),o.kc(),o.kc()}if(2&e){var r=o.xc();o.Sb(2),o.Cc("ngForOf",o.zc(3,1,r.notifications))}}function l(e,t){1&e&&(o.lc(0,"div",2),o.lc(1,"div",6),o.lc(2,"div",7),o.ed(3,"GLOBAL_NOTIFICATION.NO_NOTIFICATION"),o.kc(),o.kc(),o.kc())}var u=function(){function e(e,t){this.globalNotificationService=e,this.commandService=t,this.notifications=this.globalNotificationService.getGlobalNotifications()}return e.prototype.loadMore=function(){var e=this.globalNotificationService.getNoOfGlobalNotifications();this.commandService.dispatch(a.a.getGlobalNotifications,{offset:e,limit:20})},e.\u0275fac=function(t){return new(t||e)(o.fc(r.a),o.fc(i.B))},e.\u0275cmp=o.Zb({type:e,selectors:[["global-notification-notifications"]],decls:5,vars:6,consts:[[1,"notifications-tab-container"],["class","notifications-list-container",4,"ngIf"],[1,"notifications-list-container"],[3,"psYReachEnd"],[3,"notification",4,"ngFor","ngForOf"],[3,"notification"],[1,"globle-notification-no-notification-container","fx-margin-bottom-30"],["translate","",1,"globle-notification-no-notification-text"]],template:function(e,t){if(1&e&&(o.lc(0,"div",0),o.cd(1,c,4,3,"div",1),o.yc(2,"async"),o.cd(3,l,4,0,"div",1),o.yc(4,"async"),o.kc()),2&e){var n,r;o.Sb(1),o.Cc("ngIf",(null==(n=o.zc(2,2,t.notifications))?null:n.length)>0),o.Sb(2),o.Cc("ngIf",!((null==(r=o.zc(4,4,t.notifications))?null:r.length)>0))}},styles:[".notifications-list[_ngcontent-%COMP%]{color:#fff;margin:0 auto;max-height:calc(100% - 60px);width:100%}.notifications-tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.notifications-list-container[_ngcontent-%COMP%]{flex:1;overflow:auto}.notifications-list-boundary[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:center;justify-content:space-around;align-items:center;font-style:normal;font-weight:400;font-size:12px;line-height:14px;color:#7e7e7e}.notifications-list-boundary[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:1px solid #f2f2f2;transform:rotate(180deg);width:140px}.globle-notification-no-notification-container[_ngcontent-%COMP%]{margin-top:18px;margin-left:18px;margin-right:12px}.globle-notification-no-notification-text[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:17px;color:#7e7e7e;padding-top:12px;padding-bottom:12px;text-align:center}"],changeDetection:0}),e}()},"1pbQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n("D57K"),i=n("c7W3"),a=n("5xGT"),o=n("NNJu"),s=n("4C8c"),c=n("C05f"),l=n("TLy2"),u=n("Ohay"),p=n("YtkY"),h=n("8j5Y"),d=n("EM62"),f=n("s2Ay"),g=n("rPyh"),m=n("2kYt"),v=n("sIsI");function b(e,t){if(1&e&&(d.lc(0,"div",13),d.ed(1),d.kc()),2&e){var n=d.xc().$implicit;d.Sb(1),d.gd(" ",n.oldValue," ")}}function y(e,t){if(1&e&&(d.lc(0,"div",5),d.lc(1,"div",6),d.ed(2),d.yc(3,"async"),d.kc(),d.lc(4,"div",7),d.cd(5,b,2,1,"div",8),d.lc(6,"div",9),d.ed(7),d.kc(),d.kc(),d.lc(8,"div",10),d.lc(9,"div",11),d.ed(10),d.yc(11,"translate"),d.kc(),d.lc(12,"div",12),d.ed(13),d.kc(),d.kc(),d.kc()),2&e){var n=t.$implicit;d.Sb(2),d.gd(" ",d.zc(3,6,n.title)," "),d.Sb(3),d.Cc("ngIf",void 0!==n.oldValue&&""!==n.oldValue),d.Sb(2),d.gd(" ",n.newValue," "),d.Sb(3),d.hd(" ",d.zc(11,8,"SHAPE_DATA.TABS.HISTORY.BY")," ",n.userName," "),d.Sb(3),d.gd(" ",n.time," ")}}function x(e,t){if(1&e){var n=d.mc();d.lc(0,"app-collapsible-menu-item",2),d.tc("activeChange",(function(e){d.Pc(n);var r=t.$implicit;return d.xc().toggleCollabsibleItem(r.date,e)})),d.lc(1,"div",3),d.cd(2,y,14,10,"div",4),d.kc(),d.kc()}if(2&e){var r=t.$implicit,i=d.xc();d.Cc("title",r.date)("subTitleRight",i.getGroupSubTitle(r.userNames))("active",r.active),d.Sb(2),d.Cc("ngForOf",r.items)}}var C=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n)||this;return o.componentFactoryResolver=t,o.injector=n,o.commandSvc=r,o.shapeHistoryService=i,o.translateService=a,o.subs=[],o.historyGroups=new c.a([]),o.activeShapeHistoryGroups={},o}return Object(r.e)(t,e),t.prototype.ngAfterViewInit=function(){var e=this,t=this.commandSvc.dispatch(i.a.getEntityHistory,this.eDataId,{entityId:this.entityId}).pipe(Object(l.a)((function(){return e.shapeHistoryService.getShapeHistoryGroups(e.eDataId,e.entityId).pipe(Object(u.a)((function(e,t){return e===t||(null==e?void 0:e.length)===t.length})),Object(p.a)((function(t){var n=[];if(t&&t.length>0){var r=void 0;t.forEach((function(t){var i=e.getShapeHistoryViewItem(t);r&&r.date===t.date||(r={items:[],date:t.date,userNames:new Set,active:!!e.activeShapeHistoryGroups[t.date]},n.push(r)),r.userNames.add(t.userName),r.items.push(i)}))}return n})),Object(h.a)((function(t){return e.historyGroups.next(t)})))}))).subscribe();this.subs.push(t)},t.prototype.toggleCollabsibleItem=function(e,t){this.activeShapeHistoryGroups[e]=!this.activeShapeHistoryGroups[e]},t.prototype.getGroupSubTitle=function(e){var t=e.size>3?e.size-3:0,n=t<1?"":1===t?this.translateService.instant("SHAPE_DATA.TABS.HISTORY.SUBTITLE.AND_OTHER"):this.translateService.instant("SHAPE_DATA.TABS.HISTORY.SUBTITLE.AND_OTHERS",{count:t});return Object(r.j)(e).slice(0,3).join(", ")+" "+n},t.prototype.ngOnDestroy=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},t.prototype.getShapeHistoryViewItem=function(e){return{id:e.id,title:this.getShapeHistoryViewTitle(e),oldValue:this.getTranslatedValue(e.type,e.oldValue),newValue:this.getTranslatedValue(e.type,e.newValue),date:e.date,time:e.time,userName:e.userName}},t.prototype.getTranslatedValue=function(e,t){var n;return(null===(n=t)||void 0===n?void 0:n.translate)?this.translateService.instant("SHAPE_DATA.TABS.HISTORY."+(null==e?void 0:e.toUpperCase())+"."+t.key):t},t.prototype.getShapeHistoryViewTitle=function(e){var t;return this.translateService.get("SHAPE_DATA.TABS.HISTORY."+(null===(t=e.type)||void 0===t?void 0:t.toUpperCase())+"."+e.action).pipe(Object(p.a)((function(t){return("DELETED"===e.type&&"DELETED"===e.fieldName?"":e.fieldName)+" "+t})))},t.\u0275fac=function(e){return new(e||t)(d.fc(d.m),d.fc(d.C),d.fc(a.B),d.fc(s.a),d.fc(f.e))},t.\u0275cmp=d.Zb({type:t,selectors:[["shape-history"]],inputs:{eDataId:"eDataId",entityId:"entityId"},features:[d.Pb],decls:4,vars:3,consts:[[1,"shape-history-section"],[3,"title","subTitleRight","active","activeChange",4,"ngFor","ngForOf"],[3,"title","subTitleRight","active","activeChange"],[1,"shape-history-group"],["class","shape-history-item",4,"ngFor","ngForOf"],[1,"shape-history-item"],[1,"history-item-title"],[1,"history-item-change"],["class","history-item-old-val history-item-prop",4,"ngIf"],[1,"history-item-new-val","history-item-prop"],[1,"history-item-meta"],[1,"history-item-user","history-item-prop"],[1,"history-item-time","history-item-prop"],[1,"history-item-old-val","history-item-prop"]],template:function(e,t){1&e&&(d.lc(0,"div",0),d.lc(1,"app-collapsible-menu"),d.cd(2,x,3,4,"app-collapsible-menu-item",1),d.yc(3,"async"),d.kc(),d.kc()),2&e&&(d.Sb(2),d.Cc("ngForOf",d.zc(3,1,t.historyGroups)))},directives:[g.a,m.s,v.a,m.t],pipes:[m.b,f.d],styles:[".shape-history-section[_ngcontent-%COMP%]{margin-left:-10px}.shape-history-group[_ngcontent-%COMP%]{padding-left:20px}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item .col-menu-item-heading-inner{width:100%}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item .col-menu-item-container.expanded{margin-bottom:15px}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item .col-menu-item-heading-title{color:#14282e;font-family:Open Sans;font-weight:600}app-collapsible-menu[_ngcontent-%COMP%]  app-collapsible-menu-item .col-menu-item-heading-sub-title-right{color:#697274;font-family:Open Sans;font-weight:400}.shape-history-item[_ngcontent-%COMP%]{float:none;max-width:454px;font-family:Open Sans;font-style:normal;font-weight:400;font-size:14px;line-height:140%;display:block;padding-top:10px;padding-bottom:15px}.shape-history-item[_ngcontent-%COMP%]   .history-item-title[_ngcontent-%COMP%]{color:#14282e;margin-left:8px}.shape-history-item[_ngcontent-%COMP%]   .history-item-prop[_ngcontent-%COMP%]{margin:4px 8px;float:left}.shape-history-item[_ngcontent-%COMP%]   .history-item-change[_ngcontent-%COMP%]{overflow:hidden;margin-left:8px}.shape-history-item[_ngcontent-%COMP%]   .history-item-change[_ngcontent-%COMP%]   .history-item-old-val[_ngcontent-%COMP%]{-webkit-text-decoration-line:line-through;text-decoration-line:line-through;color:rgba(240,98,82,.65);background:rgba(240,106,82,.05)}.shape-history-item[_ngcontent-%COMP%]   .history-item-change[_ngcontent-%COMP%]   .history-item-new-val[_ngcontent-%COMP%]{color:#29947f;background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65)}.shape-history-item[_ngcontent-%COMP%]   .history-item-meta[_ngcontent-%COMP%]{overflow:hidden}.shape-history-item[_ngcontent-%COMP%]   .history-item-meta[_ngcontent-%COMP%]   .history-item-user[_ngcontent-%COMP%]{color:rgba(41,53,56,.7)}.shape-history-item[_ngcontent-%COMP%]   .history-item-meta[_ngcontent-%COMP%]   .history-item-time[_ngcontent-%COMP%]{color:rgba(98,104,106,.6)}.col-title[_ngcontent-%COMP%]{overflow:hidden}.col-title[_ngcontent-%COMP%]   .col-title-date[_ngcontent-%COMP%], .col-title[_ngcontent-%COMP%]   .col-title-users[_ngcontent-%COMP%]{float:left}"],changeDetection:0}),t}(o.k)},"1t/h":function(e,t,n){e.exports=n("EnCR")},"2ZsA":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("6EBr"),i=n("ROBh"),a=n("EM62"),o=function(){function e(){this.btnRadius=12.5,this.itemRadius=11}return e.prototype.getFeatureData=function(e,t){var n=this;return t.data.forEach((function(e){e.buttonIcon=n.getDrawableIcon(e.value,n.btnRadius,!1),e.itemIcon=n.getDrawableIcon(e.value,n.itemRadius,e.selected)})),Object(i.a)({value:t.data})},e.prototype.getApplyData=function(e,t){return Object(i.a)({styles:{color:t.value}})},e.prototype.getDrawableIcon=function(e,t,n){return{type:"canvas",value:function(i,a){i.setStrokeStyle(1),i.beginStroke("#ffffff"===e||"rgb(255, 255, 255)"===e?"#E7E6E6":e),i.beginFill(e),i.drawCircle(t,t,t-3),i.endFill(),i.endStroke(),(a||n)&&(i.setStrokeStyle(1),i.beginStroke(r.a.primarySelectionColor),i.drawCircle(t,t,t-1),i.endStroke())},width:2*t,height:2*t}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},"2aGL":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("D57K"),i=n("W9bu"),a=n("NNJu"),o=n("5xGT"),s=n("EM62"),c=n("2kYt"),l=n("lQIu");function u(e,t){if(1&e&&(s.lc(0,"div",13),s.ed(1),s.yc(2,"async"),s.kc()),2&e){var n=s.xc().$implicit;s.Sb(1),s.fd(s.zc(2,1,n.name))}}function p(e,t){if(1&e){var n=s.mc();s.lc(0,"div",10),s.cd(1,u,3,3,"div",11),s.lc(2,"a",12),s.tc("click",(function(){s.Pc(n);var e=t.$implicit;return s.xc(3).navigateToShape(e)})),s.ed(3),s.kc(),s.kc()}if(2&e){var r=t.index;s.Sb(1),s.Cc("ngIf",0===r),s.Sb(2),s.fd(r+1)}}function h(e,t){if(1&e&&(s.lc(0,"div",8),s.cd(1,p,4,2,"div",9),s.kc()),2&e){var n=t.$implicit,r=s.xc().$implicit;s.Sb(1),s.Cc("ngForOf",r.shapesMap[n.key])}}function d(e,t){if(1&e&&(s.lc(0,"div",1),s.lc(1,"div",2),s.lc(2,"div",3),s.ed(3),s.yc(4,"async"),s.kc(),s.lc(5,"collapsable-panel-item",4),s.lc(6,"div",5),s.lc(7,"div",6),s.cd(8,h,2,1,"div",7),s.yc(9,"keyvalue"),s.kc(),s.kc(),s.kc(),s.kc(),s.kc()),2&e){var n=t.$implicit,r=s.xc();s.Sb(3),s.fd(s.zc(4,4,n.name)),s.Sb(2),s.Fc("heading","",n.count," ",r.getPlural("Instance",n.count),""),s.Sb(3),s.Cc("ngForOf",s.zc(9,6,n.shapesMap))}}var f=function(e){function t(t,n,r,i){var a=e.call(this,r,i)||this;return a.linkSvc=t,a.state=n,a.componentFactoryResolver=r,a.injector=i,a.subs=[],a}return Object(r.e)(t,e),t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.apply=function(){this.itemRef.instance.apply()},t.prototype.navigateToShape=function(e){this.state.get("CurrentDiagram")!==e.docId?this.linkSvc.navigateToDiagram(e.docId,["s",e.shapeId]).subscribe():this.linkSvc.navigateToShape(e.shapeId)},t.prototype.getPlural=function(e,t){return t>1?e+"s":e},t.\u0275fac=function(e){return new(e||t)(s.fc(i.a),s.fc(o.Ib),s.fc(s.m),s.fc(s.C))},t.\u0275cmp=s.Zb({type:t,selectors:[["shape-info-item"]],inputs:{shapes:"shapes"},features:[s.Pb],decls:1,vars:1,consts:[["class","links-renderer-item",4,"ngFor","ngForOf"],[1,"links-renderer-item"],[1,"links-renderer-shape-item-doc"],[1,"links-renderer-item-doc-name"],[3,"heading"],[1,"contianer"],[1,"row"],["class","col my-auto",4,"ngFor","ngForOf"],[1,"col","my-auto"],["class","links-renderer-item-instance",4,"ngFor","ngForOf"],[1,"links-renderer-item-instance"],["class","links-renderer-item-instance-name",4,"ngIf"],[1,"primary","links-renderer-item-circle",3,"click"],[1,"links-renderer-item-instance-name"]],template:function(e,t){1&e&&s.cd(0,d,10,8,"div",0),2&e&&s.Cc("ngForOf",t.shapes)},directives:[c.s,l.b,c.t],pipes:[c.b,c.l],styles:[".links-renderer-shape-item-doc[_ngcontent-%COMP%]{margin-bottom:5px}.links-renderer-shape-item-doc[_ngcontent-%COMP%]   .links-renderer-shape-item-doc-count[_ngcontent-%COMP%]{background-color:#04263d;padding:5px;font-size:12px;text-align:center;color:#fff;border-radius:5px;margin-left:10px}.links-renderer-item-circle[_ngcontent-%COMP%]{border:1px solid #d6d6d6;border-radius:25px;width:auto;height:25px;padding:4px 7px;display:inline-block;margin-right:7px}.links-renderer-item-instance[_ngcontent-%COMP%], .links-renderer-item-instance-name[_ngcontent-%COMP%]{display:inline-block}.links-renderer-item-instance-name[_ngcontent-%COMP%]{color:rgba(61,66,66,.6);margin-right:7px}.row[_ngcontent-%COMP%]{margin-left:0}"],changeDetection:0}),t}(a.k)},"2m+3":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("C05f"),a=(n("kWt5"),n("ADlH")),o=n("EM62"),s=function(){function e(){this.enableSnapToGrid=new i.a(!0),this.showGrid=new i.a(!0),this.gridSizeMajor=5*e.gridSize}return e.prototype.isOnGrid=function(t){return t%e.gridSize==0},e.prototype.isOnGridMajor=function(e){return e%this.gridSizeMajor==0},e.prototype.snapToGrid=function(t){return Object(a.roundN)(t,e.gridSize)},e.prototype.snapToGridNext=function(t){return Object(a.ceilN)(t,e.gridSize)},e.prototype.snapToGridPrevious=function(t){return Object(a.floorN)(t,e.gridSize)},e.prototype.getGridLines=function(t,n){var i,a;return Object(r.f)(this,(function(r){switch(r.label){case 0:if(t===n)throw Error("Start and end of the grid line location cant be same");i=t<n?e.gridSize:-e.gridSize,a=t,this.isOnGrid(t)||(a=i>0?this.snapToGridNext(t):this.snapToGridPrevious(t)),r.label=1;case 1:return i>0&&a<n||i<0&&a>n?[4,a]:[3,3];case 2:return r.sent(),a+=i,[3,1];case 3:return[2]}}))},e.prototype.point=function(e){return this.enableSnapToGrid.value&&(e.x=this.adjustToGrid(e.x),e.y=this.adjustToGrid(e.y)),e},e.prototype.shapeTransform=function(e,t){return t},e.prototype.connectorPoints=function(e,t){return t},e.prototype.adjustToGrid=function(t){return t.value=Math.round(t.value),this.isOnGrid(t.value)?(this.adjustToGridProperty("low",t),this.adjustToGridProperty("high",t),t):0===t.low?(t.value=this.snapToGridNext(t.value),this.adjustToGridProperty("high",t)):0===t.high?(t.value=this.snapToGridPrevious(t.value),this.adjustToGridProperty("low",t)):(t.low<=e.gridSize&&t.high<=e.gridSize?t.value=this.snapToGrid(t.value):t.low>e.gridSize&&t.high>e.gridSize?t.low<t.high?t.value=this.snapToGridPrevious(t.value-t.low):t.value=this.snapToGridNext(t.value+t.high):t.low>e.gridSize?t.value=this.snapToGridNext(t.value):t.high>e.gridSize&&(t.value=this.snapToGridPrevious(t.value)),this.adjustToGridProperty("low",t),this.adjustToGridProperty("high",t),t)},e.prototype.adjustToGridProperty=function(t,n){return 0===n[t]||(n[t]<=e.gridSize?n[t]=e.gridSize:n[t]=this.snapToGridNext(n[t])),n},e.gridSize=10,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},"2zxM":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("ROBh"),i=n("5xGT"),a=n("w1VY"),o=n("SBw3"),s=n("xVbo"),c=n("YtkY"),l=n("wx9+"),u=n("EM62"),p=function(){function e(e,t,n,r,i){this.viewport=e,this.coordinate=t,this.state=n,this.random=r,this.featureList=i}return e.prototype.getFeatureData=function(e){var t=this.featureList.getFeature(e);return Object(r.a)(t)},e.prototype.getApplyData=function(e){var t=this;return this.viewport.getShapeOnce(this.state.get("Selected")[0]).pipe(Object(s.a)((function(e){return!!e})),Object(c.a)((function(e){var n=t.coordinate.width(100),r=e.bounds.y+e.bounds.height/2;return{id:t.random.shapeId(),points:[{id:t.random.pointId(),x:e.bounds.right,y:r,shapeId:e.id},{id:t.random.pointId(),x:e.bounds.right+n,y:r}]}})))},e.\u0275fac=function(t){return new(t||e)(u.pc(l.a),u.pc(a.a),u.pc(i.Ib),u.pc(i.sb),u.pc(o.a))},e.\u0275prov=u.bc({token:e,factory:e.\u0275fac}),e}()},"3+4Q":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("5xGT"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.prototype.isDeleted=function(){return!!this.deleted},t.prototype.isEdited=function(){return!!this.edited},t.prototype.isNew=function(e){return!(this.isResolved()||this.userId===e||this.seenBy&&this.seenBy.includes(e))},t.prototype.getTime=function(){return""+i.J.formatDistance(this.added,(new Date).getTime())},t.prototype.isResolved=function(){return!!this.resolved},t}(i.h);Object.defineProperty(a,"name",{writable:!0,value:"CommentModel"})},"3/2H":function(e,t,n){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){a.default(e)};var r,i=n("142O"),a=(r=i)&&r.__esModule?r:{default:r}},"33n6":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.parseWithoutProcessing=l,t.parse=function(e,t){var n=l(e,t);return new a.default(t).accept(n)};var i=r(n("Jk8n")),a=r(n("L8TE")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("/w05")),s=n("XVEb");t.parser=i.default;var c={};function l(e,t){return"Program"===e.type?e:(i.default.yy=c,c.locInfo=function(e){return new c.SourceLocation(t&&t.srcName,e)},i.default.parse(e))}s.extend(c,o)},"35j0":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("YtkY"),i=n("QoSw"),a=n("5xGT"),o=n("ROBh"),s=n("EM62"),c=function(){function e(e,t){this.state=e,this.ll=t}return e.prototype.getFeatureData=function(e,t){var n=this;return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(r.a)((function(e){var t=n.state.get("Selected");if(t.length>1&&e.isShapeInGroup(t)){var r=e.getGroupHierarchy(t[0])[0];return{value:!!e.groups[r].links}}return 1===t.length?{value:!!e.shapes[t[0]].links}:{value:!1}})))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return t.length>1?this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(r.a)((function(e){return!!e.isShapeInGroup(t)}))):Object(o.a)(!0)},e.prototype.getApplyData=function(e,t){return Object(o.a)({open:!0})},e.\u0275fac=function(t){return new(t||e)(s.pc(a.Ib),s.pc(i.a))},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},"39iF":function(e,t){var n=[">",">=","<","<=","=","<>"],r="operator",i="literal",a=[r,i];function o(e,t){if(-1===a.indexOf(t))throw new Error("Unsupported token type: "+t);return{value:e,type:t}}function s(e){for(var t="",a=[],s=0;s<e.length;s++){var c=e[s];0===s&&n.indexOf(c)>=0?a.push(o(c,r)):t+=c}return t.length>0&&a.push(o(function(e){return"string"!=typeof e||/^\d+(\.\d+)?$/.test(e)&&(e=-1===e.indexOf(".")?parseInt(e,10):parseFloat(e)),e}(t),i)),a.length>0&&a[0].type!==r&&a.unshift(o("=",r)),a}t.TOKEN_TYPE_OPERATOR=r,t.TOKEN_TYPE_LITERAL=i,t.parse=function(e){return s(function(e){for(var t=e.length,n=[],r=0,i="",a="";r<t;){var o=e.charAt(r);switch(o){case">":case"<":case"=":a+=o,i.length>0&&(n.push(i),i="");break;default:a.length>0&&(n.push(a),a=""),i+=o}r++}return i.length>0&&n.push(i),a.length>0&&n.push(a),n}(e))},t.createToken=o,t.compute=function(e){for(var t,n=[],a=0;a<e.length;a++){var o=e[a];switch(o.type){case r:t=o.value;break;case i:n.push(o.value)}}return function(e,t){var n=!1;switch(t){case">":n=e[0]>e[1];break;case">=":n=e[0]>=e[1];break;case"<":n=e[0]<e[1];break;case"<=":n=e[0]<=e[1];break;case"=":n=e[0]==e[1];break;case"<>":n=e[0]!=e[1]}return n}(n,t)}},"3AeD":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("D57K"),i=n("8j5Y"),a=n("J+dc"),o=n("TLy2"),s=n("5xGT"),c=n("P4Xx"),l=n("ROBh"),u=n("gZOS"),p=n("nsO7"),h=n("CSUU"),d=n("diDk"),f=n("X0jn"),g=n("dKf+"),m=n("EM62"),v=function(){function e(e,t,n){this.smartContainerSvc=e,this.edatall=t,this.ds=n}return Object.defineProperty(e.prototype,"name",{get:function(){return"ContainerChildrenLayoutingBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=this,r=e.__sakota__.getChanges(),a=u.Sakota.create(e);return Object(c.a)(this.childDetached(a,r),this.containerRegionSizeChanges(a,r),this.childTranslated(a,r,t),this.childContainerRegionIdChanges(a,r),this.updateSmartContainerChildren(a,r),this.childTransformed(a,r,t)).pipe(Object(i.a)({complete:function(){var r=a.__sakota__.getChanges(),i=e.__sakota__.mergeChanges(r);Object(p.isEmpty)(i)&&t!==s.A.PREVIEW&&!Object(p.isEmpty)(r)&&n.ds.addPreviewChange(r)}}))},e.prototype.containerRegionSizeChanges=function(t,n){var i=[Object(l.a)({})];for(var a in n.$set){e.regexScaleX.lastIndex=0;var o=e.regexScaleX.exec(a)||e.regexScaleY.exec(a);if(o){var s=o[1],u=t.shapes[s];if(!Object(p.isEmpty)(u.children))for(var h in u.children)this.smartContainerSvc.updateGridChildPosition(u,t.shapes[h]),this.smartContainerSvc.updateTimeLineChildPosition(t,u,t.shapes[h]);var d=u.containerRegions;d&&i.push(this.layoutChildren(t,u,Object.keys(d),!1))}}return c.a.apply(void 0,Object(r.j)(i))},e.prototype.childContainerRegionIdChanges=function(t,n){var i=[Object(l.a)({})];for(var a in n.$set){e.regexContainerRegionId.lastIndex=0;var o=e.regexContainerRegionId.exec(a);if(o){var s=o[1],u=t.shapes[s];if(u.containerId){var p=t.shapes[u.containerId];this.smartContainerSvc.updateChildIdentifiers(t,p,u)}}}return c.a.apply(void 0,Object(r.j)(i))},e.prototype.updateSmartContainerChildren=function(t,n){var i=this,s=[Object(l.a)({})],u=function(l){e.regexIdentifierChanges.lastIndex=0;var u=e.regexIdentifierChanges.exec(l);if(!u)return"continue";var h,d,f=n.$set[l],g=u[1],m=u[2],v=t.shapes[g],b=t.getDataItem(g,m);if(b&&(h=b.smartContainerIdentifier,d=b.smartContainerType),!h||!d)return"continue";if(v.eDataId&&v.entityId){var y=p.edatall.getEntityOnce(v.eDataId,v.entityId).pipe(Object(a.a)(1),Object(o.a)((function(e){var n=[];return Object.keys(e.shapes[t.id]).forEach((function(e){i.updateSmartContainerChildData(t,e,f,h,d,n)})),c.a.apply(void 0,Object(r.j)(n))})));s.push(y)}else v.containerId&&p.updateSmartContainerChildData(t,v.id,f,h,d,s)},p=this;for(var h in n.$set)u(h);return c.a.apply(void 0,Object(r.j)(s))},e.prototype.updateSmartContainerChildData=function(e,t,n,r,i,a){var o=e.shapes[t];if(o.containerId){var s=e.shapes[o.containerId];if(s.containerContexts&&s.containerContexts[0]){var c=s.containerContexts[0];if(i===f.s.Region){if(s.data.identifier&&s.data.identifier.value===r&&c===f.s.Region){var l=Object.values(s.texts).filter((function(e){return Object.keys(s.containerRegions).includes(e.id)})).filter((function(e){return e.plainText===n}));if(l.length>0){var u=l[0].id;s.containerRegions[o.containerRegionId]&&delete s.containerRegions[o.containerRegionId].shapes[t];var h=s.containerRegions[u];if(h.shapes&&!h.shapes[t]){var d=this.getShapeRegionLayoutIndex(e,h,o);o.layoutIndex=d,h.shapes[t]=!0}else Object(p.isEmpty)(h.shapes)&&(o.layoutIndex=1,h.shapes||(h.shapes={}),h.shapes[t]=!0);a.push(this.layoutChildren(e,s,[u,o.containerRegionId]))}}}else i===f.s.XWithWidth?s.data.identifier&&s.data.identifier.value===r&&c===f.s.XWithWidth&&(this.smartContainerSvc.updateTimeLineChildPosition(e,s,o),this.updateRelativeTranslate(s,o)):i===f.s.XY&&s.data.identifier&&s.data.identifier.value===r&&c===f.s.XY&&(this.smartContainerSvc.updateGridChildPosition(s,o),this.updateRelativeTranslate(s,o))}}},e.prototype.childDetached=function(t,n){var i=[Object(l.a)({})];for(var a in n.$unset){e.regexChildren.lastIndex=0;var o=e.regexChildren.exec(a);if(o){var s=o[1],u=o[2],p=t.shapes[s],h=[],d=p.containerRegions;for(var f in d){var g=d[f];g.shapes&&g.shapes[u]&&h.push(f)}this.manageChildrenInRegions(t,p.id,u),i.push(this.layoutChildren(t,p,h))}}return c.a.apply(void 0,Object(r.j)(i))},e.prototype.childTranslated=function(t,n,i){var a=[Object(l.a)({})],o=new Set;for(var s in n.$set){e.regexChildrenRelativeX.lastIndex=0,e.regexChildrenRelativeY.lastIndex=0,e.regexChildrenRelativeAngle.lastIndex=0,e.regexChildren.lastIndex=0,e.regexChildrenContextChange.lastIndex=0;var u=e.regexChildrenRelativeX.exec(s)||e.regexChildrenRelativeY.exec(s)||e.regexChildrenRelativeAngle.exec(s)||e.regexChildren.exec(s)||e.regexChildrenContextChange.exec(s);if(u&&u[1]&&u[2]){var p=u[1],h=u[2],d=t.shapes[h];if(!o.has(h)){var f=t.shapes[p];"Execute"===i&&this.reArrangeContainerChildren(t,d,f,h,a),o.add(h)}}else if(u&&u[1]){h=u[1],d=t.shapes[h];if(!o.has(h)&&d.containerId){f=t.shapes[d.containerId];"Execute"===i&&this.reArrangeContainerChildren(t,d,f,h,a),o.add(h)}}}return c.a.apply(void 0,Object(r.j)(a))},e.prototype.reArrangeContainerChildren=function(e,t,n,r,i){var a=t.containerRegionId;if(this.manageChildrenInRegions(e,n.id,r),Object.keys(n.children).includes(r)){var o={x:n.x,y:n.y,width:n.width,height:n.height},c={x:t.x,y:t.y,width:t.width,height:t.height},l=a===t.containerRegionId?[a]:[a,t.containerRegionId];s.vb.from(o).contains(s.vb.from(c))&&(this.smartContainerSvc.updateGridChildDataItems(e,n,t),this.smartContainerSvc.updateGridChildActiveText(e,n,t)),i.push(this.layoutChildren(e,n,l,!1))}},e.prototype.childTransformed=function(t,n,i){var a=[Object(l.a)({})];if("Execute"===i&&!Object(p.isEmpty)(n.$set)){var o=Object.keys(n.$set).some((function(t){return e.regexUserSetWidth.test(t)}));for(var u in n.$set){e.regexUserSetWidth.lastIndex=0;var h=e.regexUserSetWidth.exec(u);e.regexX.lastIndex=0;var d=e.regexX.exec(u);if(h&&h[1]||d&&d[1]&&!o){var g=h?h[1]:d[1],m=t.shapes[g],v=m.containerId,b=m.shapeContext;if(v&&b&&b===f.s.XWithWidth){this.manageChildrenInRegions(t,v,g);var y=t.shapes[v];if(Object.keys(y.children).includes(g)){var x={x:y.x,y:y.y,width:y.width,height:y.height},C={x:m.x,y:m.y,width:m.width,height:m.height};s.vb.from(x).contains(s.vb.from(C))&&this.smartContainerSvc.updateTimeLineDateChange(t,y,m)}}}}}return c.a.apply(void 0,Object(r.j)(a))},e.prototype.layoutChildren=function(e,t,n,a){var o=this;void 0===a&&(a=!0);var u=[Object(l.a)({})],h=[];return n.forEach((function(n){var i=t.containerRegions[n];if(i&&i.shapes&&!Object(p.isEmpty)(i.shapes)){h.push.apply(h,Object(r.j)(Object.keys(i.shapes)));var a=Object.keys(i.shapes).map((function(t){return e.shapes[t]})),o={x:i.x+t.x,y:i.y+t.y,width:i.width,height:i.height};u.push(s.Z.apply(e,a,o,i.layoutingData))}})),c.a.apply(void 0,Object(r.j)(u)).pipe(Object(i.a)({complete:function(){var n,i;if(!Object(p.isEmpty)(t.children)&&h.length>0)try{for(var s=Object(r.k)(h),c=s.next();!c.done;c=s.next()){var l=c.value;o.updateRelativeTranslate(t,e.shapes[l])}}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}a&&(t.resizeContainerAfterLayouting?t.resizeContainerAfterLayouting(e,t):o.resizeContainerAfterLayouting(e,t))}}))},e.prototype.updateRelativeTranslate=function(e,t){var n=e.defaultBounds.getTransformedPoints(e.transform),r=t,i=r.defaultBounds.getTransformedPoints(r.transform),a=r.angle-e.angle,o=s.ab.from(n.topLeft.x,n.topLeft.y,n.bottomLeft.x,n.bottomLeft.y).perpendicularTo(i.topLeft),c=s.ab.from(o.x,o.y,i.topLeft.x,i.topLeft.y).length(),l=s.ab.from(n.topLeft.x,n.topLeft.y,n.topRight.x,n.topRight.y).perpendicularTo(i.topLeft),u=s.ab.from(l.x,l.y,i.topLeft.x,i.topLeft.y).length();e.children[t.id]&&(e.children[t.id].relativeX=c,e.children[t.id].relativeY=u,e.children[t.id].relativeAngle=a)},e.prototype.manageChildrenInRegions=function(e,t,n){var r=e.shapes[t],i=e.shapes[n],a=r.containerRegions;if(i){this.updateRelativeTranslate(r,i);var o=Object.keys(a).find((function(e){var t=a[e],n=r.children[i.id];if(n){var o=n.relativeX,s=n.relativeY,c=o+i.bounds.width/2,l=s+i.bounds.height/2,u=c<=t.x+t.width&&c>t.x,p=l<=t.y+t.height&&l>t.y;return u&&p}}));if(o!==i.containerRegionId&&i.containerRegionId){var s=a[i.containerRegionId];s&&s.shapes&&s.shapes[n]&&delete s.shapes[n]}if(o){var c=a[o];if(c)if(i.containerRegionId=o,c.shapes&&!c.shapes[i.id]){var l=this.getShapeRegionLayoutIndex(e,c,i);i.layoutIndex=l,c.shapes[i.id]=!0}else if(Object(p.isEmpty)(c.shapes))i.layoutIndex=1,c.shapes||(c.shapes={}),c.shapes[i.id]=!0;else if(c.shapes&&c.shapes[i.id]){l=this.getShapeRegionLayoutIndex(e,c,i);i.layoutIndex=l,c.shapes[i.id]=!0}}else i.containerRegionId=void 0}else for(var u in a){var h=a[u];if(h.shapes&&h.shapes[n])return void delete h.shapes[n]}},e.prototype.getShapeRegionLayoutIndex=function(e,t,n){var r=Object.keys(t.shapes).filter((function(e){return e!==n.id})).map((function(t){return e.shapes[t]}));r.push(n);var i=r.reduce((function(e,t){return e[t.id]=t,e}),{}),a=Object(p.sortBy)(r,(function(e){return e.y}));if(1===a.length)return 1;for(var o=0;o<a.length;o++){var s=a[o],c=a[o-1],l=a[o+1],u=o+1;if(s.id===n.id&&0===o&&u<a.length)return i[l.id].layoutIndex/2;if(s.id===n.id&&o===a.length-1)return i[c.id].layoutIndex+1;if(s.id===n.id)return(i[l.id].layoutIndex+i[c.id].layoutIndex)/2}},e.prototype.resizeContainerAfterLayouting=function(t,n){var i=n.bounds;if(n.children&&Object.keys(n.children).length){var a=t.getBounds(Object(r.j)(Object.keys(n.children)));a.absorb(i);var o=a.width-i.width,s=a.height-i.height;if(o>0){var c=n.width+o+e.containerResizePadding;n.scaleX=c/n.defaultBounds.width}if(s>0){var l=n.height+s+e.containerResizePadding;n.scaleY=l/n.defaultBounds.height}}},e.containerResizePadding=10,e.regexX=/shapes\.([^\.]+)\.x/g,e.regexY=/shapes\.([^\.]+)\.y/g,e.regexScaleX=/shapes\.([^\.]+)\.scaleX/g,e.regexUserSetWidth=/shapes\.([^\.]+)\.userSetWidth/g,e.regexScaleY=/shapes\.([^\.]+)\.scaleY/g,e.regexContainerRegionId=/shapes\.([^\.]+)\.containerRegionId/g,e.regexIdentifierChanges=/shapes\.([^\.]+)\.data\.([^\.]+)\.value/g,e.regexChildren=/shapes\.([^\.]+)\.children\.([^\.]+)/g,e.regexAngle=/shapes\.([^\.]+)\.angle/g,e.regexChildrenRelativeX=/shapes\.([^\.]+)\.children\.([^\.]+)\.relativeX/g,e.regexChildrenRelativeY=/shapes\.([^\.]+)\.children\.([^\.]+)\.relativeY/g,e.regexChildrenRelativeAngle=/shapes\.([^\.]+)\.children\.([^\.]+)\.relativeAngle/g,e.regexChildrenContextChange=/shapes\.([^\.]+)\.shapeContext/g,e.\u0275fac=function(t){return new(t||e)(m.pc(h.a),m.pc(d.a),m.pc(g.a))},e.\u0275prov=m.bc({token:e,factory:e.\u0275fac}),e}()},"3QsU":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return g}));var r,i,a=n("5xGT"),o=(n("NNJu"),n("X0jn")),s=n("C05f"),c=n("KTx3"),l=n("xVbo"),u=n("8j5Y"),p=n("EM62"),h=n("s2Ay"),d=["searchInputField"];function f(e,t){1&e&&p.gc(0,"document-search")}!function(e){e.OPEN="open",e.CLOSE="close"}(r||(r={})),function(e){e.DOCUMENT="document",e.GLOBAL="global",e.COMMAND="command"}(i||(i={}));var g=function(){function e(e,t){this.translateService=e,this.state=t,this.showDocumentSearchResults=new s.a(!1),this.subs=[],this.onSearchQueryChange=new s.a("")}return e.prototype.ngOnInit=function(){var e=this;this.handlePlaceHolderText(),this.subs.push(Object(c.a)(window,"keydown").pipe(Object(l.a)((function(e){return e.keyCode===o.j.Escape})),Object(u.a)((function(){e.searchInputField.inputText?e.searchInputField.clear():e.state.set("GlobalSearch",{state:r.CLOSE}),e.showSearchResultsComponent(!1)}))).subscribe(),this.onSearchQueryChange.pipe(Object(u.a)((function(t){t.length>2&&(e.state.set("GlobalSearchText",{searchText:t}),e.showSearchResultsComponent(!0))}))).subscribe())},e.prototype.ngAfterViewInit=function(){this.subs.push(this.listenForOutSideClick().subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.listenForOutSideClick=function(){var e=this;return Object(c.a)(document,"click").pipe(Object(u.a)((function(t){e.validateOutSideContainerClick(t)})))},e.prototype.validateOutSideContainerClick=function(e){"globalSearchContainer"===e.target.id&&this.closeGlobalSearchWindow()},e.prototype.closeGlobalSearchWindow=function(){this.searchInputField.clear(),this.state.set("GlobalSearch",{state:r.CLOSE})},e.prototype.handlePlaceHolderText=function(){this.state.get("GlobalSearch").scope===i.DOCUMENT&&(this.searchPlaceholder=this.translateService.instant("PLACEHOLDERS.DOCUMENT_SEARCH"))},e.prototype.showSearchResultsComponent=function(e){this.state.get("GlobalSearch").scope===i.DOCUMENT&&this.showDocumentSearchResults.next(e)},e.\u0275fac=function(t){return new(t||e)(p.fc(h.e),p.fc(a.Ib))},e.\u0275cmp=p.Zb({type:e,selectors:[["global-search"]],viewQuery:function(e,t){var n;(1&e&&p.jd(d,!0),2&e)&&(p.Lc(n=p.uc())&&(t.searchInputField=n.first))},decls:6,vars:9,consts:[["id","globalSearchContainer",1,"global-search-container","fx-cover","fx-pointer-events-auto"],[1,"global-search-input-field"],["icon","search-thin",3,"showClearButton","emitForInputChange","placeholder","debounce","autoFocus","transparentTextBox","updateText"],["searchInputField",""],[4,"ngIf"]],template:function(e,t){1&e&&(p.lc(0,"div",0),p.lc(1,"div",1),p.lc(2,"text-input",2,3),p.tc("updateText",(function(e){return t.onSearchQueryChange.next(e)})),p.kc(),p.cd(4,f,1,0,"document-search",4),p.yc(5,"async"),p.kc(),p.kc()),2&e&&(p.Sb(2),p.Dc("placeholder",t.searchPlaceholder),p.Cc("showClearButton",!0)("emitForInputChange",!0)("debounce",100)("autoFocus",!0)("transparentTextBox",!0),p.Sb(2),p.Cc("ngIf",p.zc(5,7,t.showDocumentSearchResults)))},styles:[".global-search-container[_ngcontent-%COMP%]{z-index:2;display:flex;flex-direction:column;align-items:center}.global-search-input-field[_ngcontent-%COMP%]{width:100%;max-width:585px;min-width:585px;background-color:#fff;border-radius:4px;padding:5px 15px 0;margin-top:25px;box-shadow:0 2px 2px #c3c3de;border:1px solid #d3d3e7}text-input[_ngcontent-%COMP%] {margin-bottom:15px;display:block}text-input[_ngcontent-%COMP%]  .text-input{width:100%}"],changeDetection:0}),e}()},"3Uyd":function(e,t,n){"use strict";n.d(t,"a",(function(){return Z})),n.d(t,"b",(function(){return Q})),n.d(t,"c",(function(){return Y})),n.d(t,"d",(function(){return q})),n.d(t,"e",(function(){return z})),n.d(t,"f",(function(){return X})),n.d(t,"g",(function(){return W})),n.d(t,"h",(function(){return K}));var r=n("MMYH"),i=n("PRnZ"),a=n("sRHE"),o=n("8K1b"),s=n("AqVP"),c=n("9fIP"),l=n("EM62"),u=n("cqs0"),p=n("5XID"),h=n("ZTXN"),d=n("bwdy"),f=0,g=new l.B("CdkAccordion"),m=function(){function e(){Object(c.a)(this,e),this._stateChanges=new h.a,this._openCloseAllActions=new h.a,this.id="cdk-accordion-".concat(f++),this._multi=!1}return Object(r.a)(e,[{key:"multi",get:function(){return this._multi},set:function(e){this._multi=Object(p.b)(e)}},{key:"openAll",value:function(){this._openCloseAll(!0)}},{key:"closeAll",value:function(){this._openCloseAll(!1)}},{key:"ngOnChanges",value:function(e){this._stateChanges.next(e)}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"_openCloseAll",value:function(e){this.multi&&this._openCloseAllActions.next(e)}}]),e}();m.\u0275fac=function(e){return new(e||m)},m.\u0275dir=l.ac({type:m,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[l.Rb([{provide:g,useExisting:m}]),l.Qb]}),m.propDecorators={multi:[{type:l.D}]};var v=0,b=void 0,y=function(){function e(t,n,r){var i=this;Object(c.a)(this,e),this.accordion=t,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=d.a.EMPTY,this.closed=new l.t,this.opened=new l.t,this.destroyed=new l.t,this.expandedChange=new l.t,this.id="cdk-accordion-child-".concat(v++),this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=function(){},this._removeUniqueSelectionListener=r.listen((function(e,t){i.accordion&&!i.accordion.multi&&i.accordion.id===t&&i.id!==e&&(i.expanded=!1)})),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}return Object(r.a)(e,[{key:"expanded",get:function(){return this._expanded},set:function(e){if(e=Object(p.b)(e),this._expanded!==e){if(this._expanded=e,this.expandedChange.emit(e),e){this.opened.emit();var t=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,t)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(p.b)(e)}},{key:"ngOnDestroy",value:function(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}},{key:"toggle",value:function(){this.disabled||(this.expanded=!this.expanded)}},{key:"close",value:function(){this.disabled||(this.expanded=!1)}},{key:"open",value:function(){this.disabled||(this.expanded=!0)}},{key:"_subscribeToOpenCloseAllActions",value:function(){var e=this;return this.accordion._openCloseAllActions.subscribe((function(t){e.disabled||(e.expanded=t)}))}}]),e}();y.\u0275fac=function(e){return new(e||y)(l.fc(g,12),l.fc(l.j),l.fc(u.c))},y.\u0275dir=l.ac({type:y,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[l.Rb([{provide:g,useValue:b}])]}),y.ctorParameters=function(){return[{type:m,decorators:[{type:l.N},{type:l.y,args:[g]},{type:l.ab}]},{type:l.j},{type:u.c}]},y.propDecorators={closed:[{type:l.O}],opened:[{type:l.O}],destroyed:[{type:l.O}],expandedChange:[{type:l.O}],expanded:[{type:l.D}],disabled:[{type:l.D}]};var x=function e(){Object(c.a)(this,e)};x.\u0275mod=l.dc({type:x}),x.\u0275inj=l.cc({factory:function(e){return new(e||x)}});var C=n("Sv/w"),w=n("2kYt"),k=n("sg/T"),S=n("Ohay"),O=n("jIqt"),E=n("xVbo"),_=n("J+dc"),I=n("fAiE"),P=n("5lCh"),T=n("6Oco"),A=n("g6G6"),M=n("f7+R"),D=["body"];function j(e,t){}var N=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]];function R(e,t){if(1&e&&l.gc(0,"span",2),2&e){var n=l.xc();l.Cc("@indicatorRotate",n._getExpandedState())}}var L=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],F=new l.B("MAT_ACCORDION"),B="225ms cubic-bezier(0.4,0.0,0.2,1)",V={indicatorRotate:Object(M.m)("indicatorRotate",[Object(M.j)("collapsed, void",Object(M.k)({transform:"rotate(0deg)"})),Object(M.j)("expanded",Object(M.k)({transform:"rotate(180deg)"})),Object(M.l)("expanded <=> collapsed, void => collapsed",Object(M.e)(B))]),bodyExpansion:Object(M.m)("bodyExpansion",[Object(M.j)("collapsed, void",Object(M.k)({height:"0px",visibility:"hidden"})),Object(M.j)("expanded",Object(M.k)({height:"*",visibility:"visible"})),Object(M.l)("expanded <=> collapsed, void => collapsed",Object(M.e)(B))])},z=function e(t){Object(c.a)(this,e),this._template=t};z.\u0275fac=function(e){return new(e||z)(l.fc(l.cb))},z.\u0275dir=l.ac({type:z,selectors:[["ng-template","matExpansionPanelContent",""]]}),z.ctorParameters=function(){return[{type:l.cb}]};var U=0,G=new l.B("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),H=void 0,Y=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r,i,a,o,s,u){var p;return Object(c.a)(this,n),(p=t.call(this,e,r,i))._viewContainerRef=a,p._animationMode=s,p._hideToggle=!1,p.afterExpand=new l.t,p.afterCollapse=new l.t,p._inputChanges=new h.a,p._headerId="mat-expansion-panel-header-".concat(U++),p._bodyAnimationDone=new h.a,p.accordion=e,p._document=o,p._bodyAnimationDone.pipe(Object(S.a)((function(e,t){return e.fromState===t.fromState&&e.toState===t.toState}))).subscribe((function(e){"void"!==e.fromState&&("expanded"===e.toState?p.afterExpand.emit():"collapsed"===e.toState&&p.afterCollapse.emit())})),u&&(p.hideToggle=u.hideToggle),p}return Object(r.a)(n,[{key:"hideToggle",get:function(){return this._hideToggle||this.accordion&&this.accordion.hideToggle},set:function(e){this._hideToggle=Object(p.b)(e)}},{key:"togglePosition",get:function(){return this._togglePosition||this.accordion&&this.accordion.togglePosition},set:function(e){this._togglePosition=e}},{key:"_hasSpacing",value:function(){return!!this.accordion&&(this.expanded&&"default"===this.accordion.displayMode)}},{key:"_getExpandedState",value:function(){return this.expanded?"expanded":"collapsed"}},{key:"toggle",value:function(){this.expanded=!this.expanded}},{key:"close",value:function(){this.expanded=!1}},{key:"open",value:function(){this.expanded=!0}},{key:"ngAfterContentInit",value:function(){var e=this;this._lazyContent&&this.opened.pipe(Object(O.a)(null),Object(E.a)((function(){return e.expanded&&!e._portal})),Object(_.a)(1)).subscribe((function(){e._portal=new C.f(e._lazyContent._template,e._viewContainerRef)}))}},{key:"ngOnChanges",value:function(e){this._inputChanges.next(e)}},{key:"ngOnDestroy",value:function(){Object(i.a)(Object(a.a)(n.prototype),"ngOnDestroy",this).call(this),this._bodyAnimationDone.complete(),this._inputChanges.complete()}},{key:"_containsFocus",value:function(){if(this._body){var e=this._document.activeElement,t=this._body.nativeElement;return e===t||t.contains(e)}return!1}}]),n}(y);Y.\u0275fac=function(e){return new(e||Y)(l.fc(F,12),l.fc(l.j),l.fc(u.c),l.fc(l.hb),l.fc(w.e),l.fc(P.a,8),l.fc(G,8))},Y.\u0275cmp=l.Zb({type:Y,selectors:[["mat-expansion-panel"]],contentQueries:function(e,t,n){var r;(1&e&&l.Yb(n,z,!0),2&e)&&(l.Lc(r=l.uc())&&(t._lazyContent=r.first))},viewQuery:function(e,t){var n;(1&e&&l.jd(D,!0),2&e)&&(l.Lc(n=l.uc())&&(t._body=n.first))},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,t){2&e&&l.Xb("mat-expanded",t.expanded)("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-expansion-panel-spacing",t._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[l.Rb([{provide:F,useValue:H}]),l.Pb,l.Qb],ngContentSelectors:["mat-expansion-panel-header","*","mat-action-row"],decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,t){1&e&&(l.Bc(N),l.Ac(0),l.lc(1,"div",0,1),l.tc("@bodyExpansion.done",(function(e){return t._bodyAnimationDone.next(e)})),l.lc(3,"div",2),l.Ac(4,1),l.cd(5,j,0,0,"ng-template",3),l.kc(),l.Ac(6,2),l.kc()),2&e&&(l.Sb(1),l.Cc("@bodyExpansion",t._getExpandedState())("id",t.id),l.Tb("aria-labelledby",t._headerId),l.Sb(4),l.Cc("cdkPortalOutlet",t._portal))},directives:[C.b],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[V.bodyExpansion]},changeDetection:0}),Y.ctorParameters=function(){return[{type:void 0,decorators:[{type:l.N},{type:l.ab},{type:l.y,args:[F]}]},{type:l.j},{type:u.c},{type:l.hb},{type:void 0,decorators:[{type:l.y,args:[w.e]}]},{type:String,decorators:[{type:l.N},{type:l.y,args:[P.a]}]},{type:void 0,decorators:[{type:l.y,args:[G]},{type:l.N}]}]},Y.propDecorators={hideToggle:[{type:l.D}],togglePosition:[{type:l.D}],afterExpand:[{type:l.O}],afterCollapse:[{type:l.O}],_lazyContent:[{type:l.n,args:[z]}],_body:[{type:l.gb,args:["body"]}]};var q=function e(){Object(c.a)(this,e)};q.\u0275fac=function(e){return new(e||q)},q.\u0275dir=l.ac({type:q,selectors:[["mat-action-row"]],hostAttrs:[1,"mat-action-row"]});var W=function(){function e(t,n,r,i,a,o){var s=this;Object(c.a)(this,e),this.panel=t,this._element=n,this._focusMonitor=r,this._changeDetectorRef=i,this._animationMode=o,this._parentChangeSubscription=d.a.EMPTY;var l=t.accordion?t.accordion._stateChanges.pipe(Object(E.a)((function(e){return!(!e.hideToggle&&!e.togglePosition)}))):T.a;this._parentChangeSubscription=Object(A.a)(t.opened,t.closed,l,t._inputChanges.pipe(Object(E.a)((function(e){return!!(e.hideToggle||e.disabled||e.togglePosition)})))).subscribe((function(){return s._changeDetectorRef.markForCheck()})),t.closed.pipe(Object(E.a)((function(){return t._containsFocus()}))).subscribe((function(){return r.focusVia(n,"program")})),a&&(this.expandedHeight=a.expandedHeight,this.collapsedHeight=a.collapsedHeight)}return Object(r.a)(e,[{key:"disabled",get:function(){return this.panel.disabled}},{key:"_toggle",value:function(){this.disabled||this.panel.toggle()}},{key:"_isExpanded",value:function(){return this.panel.expanded}},{key:"_getExpandedState",value:function(){return this.panel._getExpandedState()}},{key:"_getPanelId",value:function(){return this.panel.id}},{key:"_getTogglePosition",value:function(){return this.panel.togglePosition}},{key:"_showToggle",value:function(){return!this.panel.hideToggle&&!this.panel.disabled}},{key:"_getHeaderHeight",value:function(){var e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}},{key:"_keydown",value:function(e){switch(e.keyCode){case I.o:case I.g:Object(I.t)(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._element,e,t)}},{key:"ngAfterViewInit",value:function(){var e=this;this._focusMonitor.monitor(this._element).subscribe((function(t){t&&e.panel.accordion&&e.panel.accordion._handleHeaderFocus(e)}))}},{key:"ngOnDestroy",value:function(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}]),e}();W.\u0275fac=function(e){return new(e||W)(l.fc(Y,1),l.fc(l.r),l.fc(k.h),l.fc(l.j),l.fc(G,8),l.fc(P.a,8))},W.\u0275cmp=l.Zb({type:W,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,t){1&e&&l.tc("click",(function(){return t._toggle()}))("keydown",(function(e){return t._keydown(e)})),2&e&&(l.Tb("id",t.panel._headerId)("tabindex",t.disabled?-1:0)("aria-controls",t._getPanelId())("aria-expanded",t._isExpanded())("aria-disabled",t.panel.disabled),l.Zc("height",t._getHeaderHeight()),l.Xb("mat-expanded",t._isExpanded())("mat-expansion-toggle-indicator-after","after"===t._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===t._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},ngContentSelectors:["mat-panel-title","mat-panel-description","*"],decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,t){1&e&&(l.Bc(L),l.lc(0,"span",0),l.Ac(1),l.Ac(2,1),l.Ac(3,2),l.kc(),l.cd(4,R,1,1,"span",1)),2&e&&(l.Sb(4),l.Cc("ngIf",t._showToggle()))},directives:[w.t],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}\n'],encapsulation:2,data:{animation:[V.indicatorRotate]},changeDetection:0}),W.ctorParameters=function(){return[{type:Y,decorators:[{type:l.u}]},{type:l.r},{type:k.h},{type:l.j},{type:void 0,decorators:[{type:l.y,args:[G]},{type:l.N}]},{type:String,decorators:[{type:l.N},{type:l.y,args:[P.a]}]}]},W.propDecorators={expandedHeight:[{type:l.D}],collapsedHeight:[{type:l.D}]};var X=function e(){Object(c.a)(this,e)};X.\u0275fac=function(e){return new(e||X)},X.\u0275dir=l.ac({type:X,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]});var K=function e(){Object(c.a)(this,e)};K.\u0275fac=function(e){return new(e||K)},K.\u0275dir=l.ac({type:K,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]});var Z=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments))._ownHeaders=new l.S,e._hideToggle=!1,e.displayMode="default",e.togglePosition="after",e}return Object(r.a)(n,[{key:"hideToggle",get:function(){return this._hideToggle},set:function(e){this._hideToggle=Object(p.b)(e)}},{key:"ngAfterContentInit",value:function(){var e=this;this._headers.changes.pipe(Object(O.a)(this._headers)).subscribe((function(t){e._ownHeaders.reset(t.filter((function(t){return t.panel.accordion===e}))),e._ownHeaders.notifyOnChanges()})),this._keyManager=new k.g(this._ownHeaders).withWrap().withHomeAndEnd()}},{key:"_handleHeaderKeydown",value:function(e){this._keyManager.onKeydown(e)}},{key:"_handleHeaderFocus",value:function(e){this._keyManager.updateActiveItem(e)}}]),n}(m);Z.\u0275fac=function(e){return $(e||Z)},Z.\u0275dir=l.ac({type:Z,selectors:[["mat-accordion"]],contentQueries:function(e,t,n){var r;(1&e&&l.Yb(n,W,!0),2&e)&&(l.Lc(r=l.uc())&&(t._headers=r))},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,t){2&e&&l.Xb("mat-accordion-multi",t.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[l.Rb([{provide:F,useExisting:Z}]),l.Pb]}),Z.propDecorators={_headers:[{type:l.o,args:[W,{descendants:!0}]}],hideToggle:[{type:l.D}],displayMode:[{type:l.D}],togglePosition:[{type:l.D}]};var $=l.nc(Z),Q=function e(){Object(c.a)(this,e)};Q.\u0275mod=l.dc({type:Q}),Q.\u0275inj=l.cc({factory:function(e){return new(e||Q)},imports:[[w.c,x,C.e]]})},"43qC":function(e,t){e.exports=function(e){return!!e&&"object"==typeof e}},"4e1j":function(e,t,n){"use strict";var r=n("0N1A"),i=n("4kdB");function a(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,i=10*n,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(1==e.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}}a.getEventType=function(){return r.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},e.exports=a},"4e42":function(e,t,n){"use strict";t.getGrammar=function(){return{elements:{".":{type:"dot"},"[":{type:"openBracket"},"]":{type:"closeBracket"},"|":{type:"pipe"},"{":{type:"openCurl"},"}":{type:"closeCurl"},":":{type:"colon"},",":{type:"comma"},"(":{type:"openParen"},")":{type:"closeParen"},"?":{type:"question"},"+":{type:"binaryOp",precedence:30,eval:function(e,t){return e+t}},"-":{type:"binaryOp",precedence:30,eval:function(e,t){return e-t}},"*":{type:"binaryOp",precedence:40,eval:function(e,t){return e*t}},"/":{type:"binaryOp",precedence:40,eval:function(e,t){return e/t}},"//":{type:"binaryOp",precedence:40,eval:function(e,t){return Math.floor(e/t)}},"%":{type:"binaryOp",precedence:50,eval:function(e,t){return e%t}},"^":{type:"binaryOp",precedence:50,eval:function(e,t){return Math.pow(e,t)}},"==":{type:"binaryOp",precedence:20,eval:function(e,t){return e==t}},"!=":{type:"binaryOp",precedence:20,eval:function(e,t){return e!=t}},">":{type:"binaryOp",precedence:20,eval:function(e,t){return e>t}},">=":{type:"binaryOp",precedence:20,eval:function(e,t){return e>=t}},"<":{type:"binaryOp",precedence:20,eval:function(e,t){return e<t}},"<=":{type:"binaryOp",precedence:20,eval:function(e,t){return e<=t}},"&&":{type:"binaryOp",precedence:10,evalOnDemand:function(e,t){return e.eval().then((function(e){return e?t.eval():e}))}},"||":{type:"binaryOp",precedence:10,evalOnDemand:function(e,t){return e.eval().then((function(e){return e||t.eval()}))}},in:{type:"binaryOp",precedence:20,eval:function(e,t){return"string"==typeof t?-1!==t.indexOf(e):!!Array.isArray(t)&&t.some((function(t){return t===e}))}},"!":{type:"unaryOp",precedence:1/0,eval:function(e){return!e}}},functions:{},transforms:{}}}},"4j/0":function(e,t,n){"use strict";var r=n("hKez").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=p,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"4kdB":function(e,t,n){"use strict";var r,i=n("c3EF");i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,a=n in document;if(!a){var o=document.createElement("div");o.setAttribute(n,"return;"),a="function"==typeof o[n]}return!a&&r&&"wheel"===e&&(a=document.implementation.hasFeature("Events.wheel","3.0")),a}},"4t+C":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("q+iX"),i=n("TLy2"),a=n("J+dc"),o=n("YtkY"),s=n("i+Vu"),c=n("QoSw"),l=n("D57K"),u=n("1t/h"),p=function(){function e(){}return e.prototype.hasParent=function(e){return!1},e}(),h=[function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.e)(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t.prototype.createObject=function(e){return u.EClass.create({name:e.name})},t.prototype.resolve=function(e,t,n){var r=this.getDynamicTypes(e,t,n.entities);this.resolveAttributes(e,t[n.id],r),this.resolveOperations(e,t[n.id],r),this.resolveLinks(e,t)},t.prototype.hasParent=function(e){return"__global__"!==this.getPackageId(e)},t.prototype.resolveAttributes=function(e,t,n){var r=this,i=t[e.id];Object.values(e.data.attributes).forEach((function(e){i.get("eStructuralFeatures").add(r.getAttribute(e,n))}))},t.prototype.resolveOperations=function(e,t,n){var r=this,i=t[e.id];Object.values(e.data.operations).forEach((function(e){i.get("eOperations").add(r.getOperation(e,n))}))},t.prototype.resolveLinks=function(e,t){},t.prototype.getDynamicTypes=function(e,t,n){var r={};if(e.links){var i=this.getPackageId(e.links);for(var a in e.links){var o=e.links[a];if("connectorBi"===o.type){var s=t[o.eDataId][o.entityId];r.hasOwnProperty(s.get("name"))&&this.getPackageId(n[o.entityId].links)!==i||(r[s.get("name")]=s)}}}return r},t.prototype.getPackageId=function(e){if(e)for(var t in e){var n=e[t];if("parent"===n.type&&"uml.package"===n.handshake)return n.entityId}return"__global__"},t.prototype.getAttribute=function(e,n){if(e.value.type.value){if(t.eCoreClassMap.hasOwnProperty(e.value.type.value))return u.EAttribute.create({name:e.value.name.value,eType:t.eCoreClassMap[e.value.type.value]});if(n.hasOwnProperty(e.value.type.value))return u.EReference.create({name:e.value.name.value,eType:n[e.value.type.value]})}return u.EAttribute.create({name:e.value.name.value})},t.prototype.getOperation=function(e,n){var r=this,i=u.EOperation.create({name:e.value.name.value});return e.value.returnType.value.name.value&&(t.eCoreClassMap.hasOwnProperty(e.value.returnType.value.name.value)?i.set("eType",t.eCoreClassMap[e.value.returnType.value.name.value]):n.hasOwnProperty(e.value.returnType.value.name.value)&&i.set("eType",n[e.value.returnType.value.name.value])),e.value.parameters.value&&Object.values(e.value.parameters.value).forEach((function(e){i.get("eParameters").add(r.getParameter(e,n))})),i},t.prototype.getParameter=function(e,n){if(e.value.type.value){if(t.eCoreClassMap.hasOwnProperty(e.value.type.value))return u.EParameter.create({name:e.value.name.value,eType:t.eCoreClassMap[e.value.type.value]});if(n.hasOwnProperty(e.value.type.value))return u.EParameter.create({name:e.value.name.value,eType:n[e.value.type.value]})}return u.EParameter.create({name:e.value.name.value})},t.eDefId="creately.entity.uml.class",t.eCoreClassMap={string:u.EString,boolean:u.EBoolean,int:u.EInt},t._instance=new t,t}(p),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.e)(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t.prototype.createObject=function(e){return u.EPackage.create({name:e.name})},t.prototype.resolve=function(e,t,n){this.resolveLinks(e,t,n.id)},t.prototype.resolveLinks=function(e,t,n){if(e.links)for(var r in e.links){var i=e.links[r];"child"===i.type&&"uml.package"===i.handshake&&t[n][e.id].get("eClassifiers").add(t[i.eDataId][i.entityId])}},t.eDefId="creately.entity.uml.package",t._instance=new t,t}(p)],d=n("EM62"),f=function(){function e(e,t){var n=this;this.eDataService=e,this.ll=t,this._models={},h.forEach((function(e){n._models[e.eDefId]=e}))}return e.prototype.exportEcoreModel=function(e){var t=this;return void 0===e&&(e=!1),this.getEcoreModel().pipe(Object(i.a)((function(n){return t.ll.forCurrentObserver(!1).pipe(Object(a.a)(1),Object(i.a)((function(e){return e.getDiagramOnce()})),Object(o.a)((function(t){return{name:t.name,data:e?r.XMI.to(n,!0):n.to()}})))})))},e.prototype.getEcoreModel=function(){var e=this;return this.eDataService.getEdataForCurrentDiagram().pipe(Object(o.a)((function(e){return e.filter((function(e){return"creately.edata.uml"===e.defId}))})),Object(o.a)((function(t){var n={};t.forEach((function(t){n[t.id]={},Object.values(t.entities).filter((function(e){return!!e.data})).forEach((function(r){var i=e.getEcoreModelExporter(r.eDefId);i&&(n[t.id][r.id]=i.createObject(r.data))}))}));var i=r.ResourceSet.create().create({uri:"resources"});return t.forEach((function(t){Object.values(t.entities).filter((function(e){return!!e.data})).forEach((function(r){var a=e.getEcoreModelExporter(r.eDefId);a&&(a.resolve(r,n,t),a.hasParent(r.links)||i.get("contents").add(n[t.id][r.id]))}))})),i})))},e.prototype.getEcoreModelExporter=function(e){return this._models[e]?this._models[e].instance:null},e.\u0275fac=function(t){return new(t||e)(d.pc(s.a),d.pc(c.a))},e.\u0275prov=d.bc({token:e,factory:e.\u0275fac}),e}()},"54H5":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("5xGT"),a=n("X0jn"),o=n("Zuf/"),s=n("I2sK"),c=n("GoAz"),l=n("6Oco"),u=n("9WAt"),p=n("4e/d"),h=n("kMe2"),d=function(){function e(){this.name="ContainerRulesBinder"}return e.prototype.apply=function(e,t){var n;if(t===i.A.EXECUTE){var r={},a=e.__sakota__.getChanges();if(a.$set){var o=Object.keys(a.$set).filter((function(e){return/shapes\.([^\.]+)\.data\.([^\.]+)\.value/.test(e)}));if(o.length>0){o.forEach((function(e){var t=e.split("."),n=t[1],i=t[2];r[n]||(r[n]=[]),r[n].push(i)}));var s=[];for(var h in r){var d=e.shapes[h];if(d.containerId){var f=e.shapes[d.containerId];(null===(n=f.rules)||void 0===n?void 0:n.length)>0&&s.push(this.applyRules(e,d,f))}}return s.length>0?Object(c.a)(Promise.all(s)).pipe(Object(u.a)(),Object(p.a)((function(){return l.a}))):l.a}}}return l.a},e.prototype.applyRules=function(e,t,n){return Object(r.c)(this,void 0,void 0,(function(){var i,a,o,s,c=this;return Object(r.f)(this,(function(r){switch(r.label){case 0:for(o in i=this.getRulesEngine(e),n.rules.forEach((function(e){i.addRule(e)})),a={childShape:t,container:n})i.addFact(o,a[o]);return i.addFact("container",n),[4,i.run()];case 1:return(s=r.sent().events).length>0&&s.forEach((function(r){var i;switch(r.type){case"updateChildData":c.updateShapeData(e,t,r.params,a);break;case"updateData":c.updateShapeData(e,n,r.params,a);break;case"updateRoles":c.updateRoles(e,t,r.params,null===(i=n.data)||void 0===i?void 0:i.identifier.value)}})),[2]}}))}))},e.prototype.updateShapeData=function(e,t,n,r){var i;if(n.dataItemLabel){var a=Object.values(t.getDataItems(e)).find((function(e){return e.label===n.dataItemLabel}));a&&(n.dataItemId=a.id)}n.dataItemId&&(i=t.data[n.dataItemId]),i&&(n.value?i.value=n.value:n.formula&&(i.value=s(n.formula).evaluate(r)))},e.prototype.updateRoles=function(e,t,n,r){var i;if(t.data[r]){var o=t.data[r].value,s=Object.values(t.getDataItems(e)).filter((function(e){return e.systemType===a.v.Role})),c={};s.forEach((function(e){c[e.label]=t.data[e.id]}));var l=n.roles.indexOf(o);-1!==l&&((null===(i=c[o])||void 0===i?void 0:i.value.roleData)&&(c[o].value.roleData.roleType=h.b.Active),n.roles.slice(0,l).forEach((function(e){var t;(null===(t=c[e])||void 0===t?void 0:t.value.roleData.roleType)&&(c[e].value.roleData.roleType=h.b.Done)})),n.roles.slice(l+1).forEach((function(e){var t;(null===(t=c[e])||void 0===t?void 0:t.value.roleData.roleType)&&(c[e].value.roleData.roleType=h.b.Next)})))}},e.prototype.getRulesEngine=function(e){var t=this,n=new o.Engine([],{pathResolver:function(e,t){return s(t).evaluate(e)}});return n.addFact("shapeData",(function(t){var n=t.shape;if(n&&n.data)return t.dataItemId?n.getDataItems(e)[t.dataItemId]:t.dataItemLabel?Object.values(n.getDataItems(e)).find((function(e){return e.label===t.dataItemLabel})):n.getDataItems(e)})),n.addFact("childData",(function(e,n){return Object(r.c)(t,void 0,void 0,(function(){var t;return Object(r.f)(this,(function(r){switch(r.label){case 0:return t=e,[4,n.factValue("childShape")];case 1:return t.shape=r.sent(),[2,n.factValue("shapeData",e)]}}))}))})),n.addFact("containerData",(function(e,n){return Object(r.c)(t,void 0,void 0,(function(){var t;return Object(r.f)(this,(function(r){switch(r.label){case 0:return t=e,[4,n.factValue("container")];case 1:return t.shape=r.sent(),[2,n.factValue("shapeData",e)]}}))}))})),n.addFact("updatedDataFields",(function(n,i){return Object(r.c)(t,void 0,void 0,(function(){var t,a,o,s;return Object(r.f)(this,(function(r){switch(r.label){case 0:return[4,i.factValue("childShape")];case 1:return t=r.sent(),(a=t.__sakota__.getChanges()).$set?(o=Object.keys(a.$set).filter((function(e){return/data\.([^\.]+)\.value/.test(e)})).map((function(e){return e.split(".")[1]})),(null==n?void 0:n.labels)?(s=t.getDataItems(e),[2,o.map((function(e){return s[e].label}))]):[2,o]):[2,[]]}}))}))})),n},e}()},"61p6":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("5xGT"),i=n("RrMq"),a=n("EM62"),o=n("s2Ay"),s=function(){function e(e){this.translator=e,this.id="shapeData",this.icon="data",this.width=550,this.disableAutoOpen=!0}return Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.translator.instant("TOOLTIPS.SHAPE_DATA")},enumerable:!1,configurable:!0}),e.prototype.onActive=function(){r.Kb.track("right.data.panel.click",{value1Type:"status",value1:"open"}),this.shapeDataEditor&&this.shapeDataEditor.init()},e.prototype.onInactive=function(){r.Kb.track("right.data.panel.click",{value1Type:"status",value1:"close"}),this.shapeDataEditor&&this.shapeDataEditor.unsubscribe()},e.prototype.ngAfterViewInit=function(){this.shapeDataEditor.init()},e.\u0275fac=function(t){return new(t||e)(a.fc(o.e))},e.\u0275cmp=a.Zb({type:e,selectors:[["shape-data-panel"]],viewQuery:function(e,t){var n;(1&e&&a.jd(i.a,!0),2&e)&&(a.Lc(n=a.uc())&&(t.shapeDataEditor=n.first))},decls:2,vars:0,consts:[["parentName","shape-data-panel"],["shapeDataEditor",""]],template:function(e,t){1&e&&a.gc(0,"shape-data-editor",0,1)},directives:[i.a],styles:[".shape-data-editor-tabs[_ngcontent-%COMP%]{height:calc(100% - 55px);overflow:hidden}abs-tab[_ngcontent-%COMP%]{display:block;height:100%}.shape-data-editor-overlay[_ngcontent-%COMP%]{z-index:100;background-color:hsla(0,0%,40.8%,.8)}.shape-data-editor-container[_ngcontent-%COMP%]{width:60%;height:calc(100% - 20px);background:#fff;position:relative}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:focus, .shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:hover{background-color:#fff}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label{margin-right:12px}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-view{position:relative!important;top:0;left:0;z-index:1000;transform:unset!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-container{position:relative;z-index:2;background:unset;border:unset;box-shadow:unset;border-radius:unset;width:100%;transform:unset}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input-user{display:none}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input{border-top:unset!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area{padding:5px;max-height:650px!important}.shape-data-editor-container[_ngcontent-%COMP%]  .temp-resolve-menu{display:block}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area comment-thread-item:first-child{display:none!important}.shape-data-editor-header[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;padding-top:20px;font-size:18px}.shape-data-editor-header[_ngcontent-%COMP%]  .editable-label{font-size:18px}.shape-data-editor-container-inner[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:4px;display:flex;flex-direction:column;padding:30px;box-sizing:border-box}.shape-data-editor-icon-container[_ngcontent-%COMP%]{width:100px;margin-right:15px;border-radius:4px 0 0 4px}.shape-data-editor-icon-container.neutral[_ngcontent-%COMP%]{background-color:#40b29e}.shape-data-editor-icon-container.warning[_ngcontent-%COMP%]{background-color:#ffc648}.shape-data-editor-icon-container.success[_ngcontent-%COMP%]{background-color:#61a15e}.shape-data-editor-icon-container.error[_ngcontent-%COMP%]{background-color:#d92626}.shape-data-editor-content[_ngcontent-%COMP%]{flex:1;word-break:break-word;display:flex;flex-direction:column}.shape-data-editor-content-text[_ngcontent-%COMP%]{flex:1}.shape-data-editor-button-container[_ngcontent-%COMP%]{text-align:right}.shape-data-editor-close-btn[_ngcontent-%COMP%]{top:5px;right:5px;position:absolute}.shape-data-editor-external-link-msg[_ngcontent-%COMP%]{background-color:#eceef2;height:80vh;position:relative;display:flex;align-items:center;justify-content:center}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]{display:inline-block;text-align:center;max-width:500px}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7e7e7e}.shape-data-editor-comments-section[_ngcontent-%COMP%]{float:right;width:33%;height:100%;background:#f6f6f9}.shape-data-editor-tabs-section[_ngcontent-%COMP%]{float:left;width:67%;height:100%}.shape-data-editor-comments-header[_ngcontent-%COMP%]{font-size:16px;margin:20px 10px 10px}"],changeDetection:0}),e}()},"6T0K":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("X0jn"),i=n("5xGT"),a=n("nsO7"),o=n("6Oco"),s=n("19Zn"),c=n("C0rp"),l=n("EM62"),u=function(){function e(){this.textFormatter=new s.F}return Object.defineProperty(e.prototype,"name",{get:function(){return"TextDataItemBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["data","texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){if(t===i.A.PREVIEW)return o.a;var n=e.__sakota__.getChanges();return n.$set?(this.applyDataToText(e,n),this.applyTextToData(e,n),o.a):o.a},e.prototype.applyDataToText=function(t,n){var r=this,i=function(i){e.regexData.lastIndex=0;var o,s=e.regexData.exec(i),c=[];if(s)o=s[1],c=[s[2]];else{var l=i.split(".");if(!(2===l.length&&"shapes"===l[0]&&n.$set[i]&&n.$set[i].data))return"continue";o=l[1],c=Object.keys(n.$set[i].data)}var u=t.shapes[o],p=t.getShapeDataItems(o);c.forEach((function(e){var i=u.texts[e],s=p[e];if(Object(a.values)(u.texts).forEach((function(e){if(!Object(a.isEmpty)(e.handlebars)){var t=JSON.parse(e.handlebars),n=r.getStringValue(s);Object.keys(t).includes(s.label)&&(s.label&&!Object(a.isNil)(n)?t[s.label]=n:s.label&&(t[s.label]=s.label),e.handlebars=JSON.stringify(t))}})),!i&&u.eData){var c=t.getShapeDataItems(o)[e];if(c&&c.primaryTextBound&&(i=r.getPrimaryTextModel(u)),i&&!n.$set["shapes."+o+".texts."+e+".content"]){var l=n.$set["shapes."+o+".data."+e+".value"]||(n.$set["shapes."+o+".data."+e]||{}).value||Object(a.get)(n.$set["shapes."+o],"data."+e+".value");l&&i.content&&i.content[0]&&(i.content[0].text=l,i.content=[i.content[0]])}}}))};for(var o in n.$set)i(o)},e.prototype.getPrimaryTextModel=function(e){if(e.texts)return Object(a.toArray)(e.texts).find((function(e){return e&&!0===e.primary}))},e.prototype.applyTextToData=function(t,n){var i=this,o=function(o){e.regexText.lastIndex=0;var l=e.regexText.exec(o);if(!l)return"continue";var u=l[1],p=t.shapes[u],h=l[2],d=p.texts[h];if(d){var f=s.textFormatter.plainText(d.content);d.handlebars={},(f.match(/{{(.*?)}}/g)||[]).forEach((function(e){var n=e.replace(/[{{}}]/g,""),r=t.getShapeDataItems(u),o=Object(a.values)(r).find((function(e){return e.label===n}))||{},s=i.getStringValue(o);n&&!Object(a.isNil)(s)?d.handlebars[n]=s:n&&(d.handlebars[n]=n)})),d.handlebars=JSON.stringify(d.handlebars)}var g=p.texts[h].editableDataItem?p.texts[h].editableDataItem:h;if(!p.texts[h].editable)return"continue";if(!p.data)return"continue";var m=p.data[g];if(!m){var v=t.getShapeDataItems(u),b=Object(a.values)(v).find((function(e){return e.primaryTextBound}));if(b&&(m=p.data[b.id]),!m)return"continue"}return"childShapeData"===m.type?"continue":m.type===r.c.STRING_HTML?(m.value=c.html.html(n.$set[o]),"continue"):void(m.value=s.textFormatter.plainText(n.$set[o]))},s=this;for(var l in n.$set)o(l)},e.prototype.getStringValue=function(e){var t=null;if(e.type===r.c.BINARY)t=e.value?"True":"False";else if(e.type===r.c.OPTION_LIST)t=e.value;else if(e.type===r.c.STRING||e.type===r.c.NUMBER||e.type===r.c.FORMULA)t=e.value;else if("users"===e.type)t=((e.value||{}).people||[]).map((function(e){return e.fullName||e.email})).join(", ");else if("tags"===e.type)t=(e.value||[]).map((function(e){return e.name})).join(", ");else if("date"===e.type&&e.value){var n=new Date(e.value);t=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear()}return t},e.regexData=/shapes\.([^\.]+)\.data\.([^\.]+)/g,e.regexText=/shapes\.([^\.]+)\.texts.([^\.]+)\.content/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.bc({token:e,factory:e.\u0275fac}),e}()},"6WTZ":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Un})),n.d(t,"VERSION",(function(){return i})),n.d(t,"restArguments",(function(){return S})),n.d(t,"isObject",(function(){return O})),n.d(t,"isNull",(function(){return E})),n.d(t,"isUndefined",(function(){return _})),n.d(t,"isBoolean",(function(){return I})),n.d(t,"isElement",(function(){return P})),n.d(t,"isString",(function(){return A})),n.d(t,"isNumber",(function(){return M})),n.d(t,"isDate",(function(){return D})),n.d(t,"isRegExp",(function(){return j})),n.d(t,"isError",(function(){return N})),n.d(t,"isSymbol",(function(){return R})),n.d(t,"isArrayBuffer",(function(){return L})),n.d(t,"isDataView",(function(){return Y})),n.d(t,"isArray",(function(){return q})),n.d(t,"isFunction",(function(){return V})),n.d(t,"isArguments",(function(){return K})),n.d(t,"isFinite",(function(){return Z})),n.d(t,"isNaN",(function(){return $})),n.d(t,"isTypedArray",(function(){return ie})),n.d(t,"isEmpty",(function(){return ce})),n.d(t,"isMatch",(function(){return le})),n.d(t,"isEqual",(function(){return fe})),n.d(t,"isMap",(function(){return ke})),n.d(t,"isWeakMap",(function(){return Se})),n.d(t,"isSet",(function(){return Oe})),n.d(t,"isWeakSet",(function(){return Ee})),n.d(t,"keys",(function(){return se})),n.d(t,"allKeys",(function(){return ge})),n.d(t,"values",(function(){return _e})),n.d(t,"pairs",(function(){return Ie})),n.d(t,"invert",(function(){return Pe})),n.d(t,"functions",(function(){return Te})),n.d(t,"methods",(function(){return Te})),n.d(t,"extend",(function(){return Me})),n.d(t,"extendOwn",(function(){return De})),n.d(t,"assign",(function(){return De})),n.d(t,"defaults",(function(){return je})),n.d(t,"create",(function(){return Re})),n.d(t,"clone",(function(){return Le})),n.d(t,"tap",(function(){return Fe})),n.d(t,"get",(function(){return Ue})),n.d(t,"has",(function(){return Ge})),n.d(t,"mapObject",(function(){return $e})),n.d(t,"identity",(function(){return He})),n.d(t,"constant",(function(){return Q})),n.d(t,"noop",(function(){return Qe})),n.d(t,"toPath",(function(){return Be})),n.d(t,"property",(function(){return qe})),n.d(t,"propertyOf",(function(){return Je})),n.d(t,"matcher",(function(){return Ye})),n.d(t,"matches",(function(){return Ye})),n.d(t,"times",(function(){return et})),n.d(t,"random",(function(){return tt})),n.d(t,"now",(function(){return nt})),n.d(t,"escape",(function(){return at})),n.d(t,"unescape",(function(){return ot})),n.d(t,"templateSettings",(function(){return st})),n.d(t,"template",(function(){return dt})),n.d(t,"result",(function(){return ft})),n.d(t,"uniqueId",(function(){return mt})),n.d(t,"chain",(function(){return vt})),n.d(t,"iteratee",(function(){return Ke})),n.d(t,"partial",(function(){return xt})),n.d(t,"bind",(function(){return Ct})),n.d(t,"bindAll",(function(){return St})),n.d(t,"memoize",(function(){return Ot})),n.d(t,"delay",(function(){return Et})),n.d(t,"defer",(function(){return _t})),n.d(t,"throttle",(function(){return It})),n.d(t,"debounce",(function(){return Pt})),n.d(t,"wrap",(function(){return Tt})),n.d(t,"negate",(function(){return At})),n.d(t,"compose",(function(){return Mt})),n.d(t,"after",(function(){return Dt})),n.d(t,"before",(function(){return jt})),n.d(t,"once",(function(){return Nt})),n.d(t,"findKey",(function(){return Rt})),n.d(t,"findIndex",(function(){return Ft})),n.d(t,"findLastIndex",(function(){return Bt})),n.d(t,"sortedIndex",(function(){return Vt})),n.d(t,"indexOf",(function(){return Ut})),n.d(t,"lastIndexOf",(function(){return Gt})),n.d(t,"find",(function(){return Ht})),n.d(t,"detect",(function(){return Ht})),n.d(t,"findWhere",(function(){return Yt})),n.d(t,"each",(function(){return qt})),n.d(t,"forEach",(function(){return qt})),n.d(t,"map",(function(){return Wt})),n.d(t,"collect",(function(){return Wt})),n.d(t,"reduce",(function(){return Kt})),n.d(t,"foldl",(function(){return Kt})),n.d(t,"inject",(function(){return Kt})),n.d(t,"reduceRight",(function(){return Zt})),n.d(t,"foldr",(function(){return Zt})),n.d(t,"filter",(function(){return $t})),n.d(t,"select",(function(){return $t})),n.d(t,"reject",(function(){return Qt})),n.d(t,"every",(function(){return Jt})),n.d(t,"all",(function(){return Jt})),n.d(t,"some",(function(){return en})),n.d(t,"any",(function(){return en})),n.d(t,"contains",(function(){return tn})),n.d(t,"includes",(function(){return tn})),n.d(t,"include",(function(){return tn})),n.d(t,"invoke",(function(){return nn})),n.d(t,"pluck",(function(){return rn})),n.d(t,"where",(function(){return an})),n.d(t,"max",(function(){return on})),n.d(t,"min",(function(){return sn})),n.d(t,"shuffle",(function(){return ln})),n.d(t,"sample",(function(){return cn})),n.d(t,"sortBy",(function(){return un})),n.d(t,"groupBy",(function(){return hn})),n.d(t,"indexBy",(function(){return dn})),n.d(t,"countBy",(function(){return fn})),n.d(t,"partition",(function(){return gn})),n.d(t,"toArray",(function(){return vn})),n.d(t,"size",(function(){return bn})),n.d(t,"pick",(function(){return xn})),n.d(t,"omit",(function(){return Cn})),n.d(t,"first",(function(){return kn})),n.d(t,"head",(function(){return kn})),n.d(t,"take",(function(){return kn})),n.d(t,"initial",(function(){return wn})),n.d(t,"last",(function(){return On})),n.d(t,"rest",(function(){return Sn})),n.d(t,"tail",(function(){return Sn})),n.d(t,"drop",(function(){return Sn})),n.d(t,"compact",(function(){return En})),n.d(t,"flatten",(function(){return _n})),n.d(t,"without",(function(){return Pn})),n.d(t,"uniq",(function(){return Tn})),n.d(t,"unique",(function(){return Tn})),n.d(t,"union",(function(){return An})),n.d(t,"intersection",(function(){return Mn})),n.d(t,"difference",(function(){return In})),n.d(t,"unzip",(function(){return Dn})),n.d(t,"transpose",(function(){return Dn})),n.d(t,"zip",(function(){return jn})),n.d(t,"object",(function(){return Nn})),n.d(t,"range",(function(){return Rn})),n.d(t,"chunk",(function(){return Ln})),n.d(t,"mixin",(function(){return Bn}));var r={};n.r(r),n.d(r,"VERSION",(function(){return i})),n.d(r,"restArguments",(function(){return S})),n.d(r,"isObject",(function(){return O})),n.d(r,"isNull",(function(){return E})),n.d(r,"isUndefined",(function(){return _})),n.d(r,"isBoolean",(function(){return I})),n.d(r,"isElement",(function(){return P})),n.d(r,"isString",(function(){return A})),n.d(r,"isNumber",(function(){return M})),n.d(r,"isDate",(function(){return D})),n.d(r,"isRegExp",(function(){return j})),n.d(r,"isError",(function(){return N})),n.d(r,"isSymbol",(function(){return R})),n.d(r,"isArrayBuffer",(function(){return L})),n.d(r,"isDataView",(function(){return Y})),n.d(r,"isArray",(function(){return q})),n.d(r,"isFunction",(function(){return V})),n.d(r,"isArguments",(function(){return K})),n.d(r,"isFinite",(function(){return Z})),n.d(r,"isNaN",(function(){return $})),n.d(r,"isTypedArray",(function(){return ie})),n.d(r,"isEmpty",(function(){return ce})),n.d(r,"isMatch",(function(){return le})),n.d(r,"isEqual",(function(){return fe})),n.d(r,"isMap",(function(){return ke})),n.d(r,"isWeakMap",(function(){return Se})),n.d(r,"isSet",(function(){return Oe})),n.d(r,"isWeakSet",(function(){return Ee})),n.d(r,"keys",(function(){return se})),n.d(r,"allKeys",(function(){return ge})),n.d(r,"values",(function(){return _e})),n.d(r,"pairs",(function(){return Ie})),n.d(r,"invert",(function(){return Pe})),n.d(r,"functions",(function(){return Te})),n.d(r,"methods",(function(){return Te})),n.d(r,"extend",(function(){return Me})),n.d(r,"extendOwn",(function(){return De})),n.d(r,"assign",(function(){return De})),n.d(r,"defaults",(function(){return je})),n.d(r,"create",(function(){return Re})),n.d(r,"clone",(function(){return Le})),n.d(r,"tap",(function(){return Fe})),n.d(r,"get",(function(){return Ue})),n.d(r,"has",(function(){return Ge})),n.d(r,"mapObject",(function(){return $e})),n.d(r,"identity",(function(){return He})),n.d(r,"constant",(function(){return Q})),n.d(r,"noop",(function(){return Qe})),n.d(r,"toPath",(function(){return Be})),n.d(r,"property",(function(){return qe})),n.d(r,"propertyOf",(function(){return Je})),n.d(r,"matcher",(function(){return Ye})),n.d(r,"matches",(function(){return Ye})),n.d(r,"times",(function(){return et})),n.d(r,"random",(function(){return tt})),n.d(r,"now",(function(){return nt})),n.d(r,"escape",(function(){return at})),n.d(r,"unescape",(function(){return ot})),n.d(r,"templateSettings",(function(){return st})),n.d(r,"template",(function(){return dt})),n.d(r,"result",(function(){return ft})),n.d(r,"uniqueId",(function(){return mt})),n.d(r,"chain",(function(){return vt})),n.d(r,"iteratee",(function(){return Ke})),n.d(r,"partial",(function(){return xt})),n.d(r,"bind",(function(){return Ct})),n.d(r,"bindAll",(function(){return St})),n.d(r,"memoize",(function(){return Ot})),n.d(r,"delay",(function(){return Et})),n.d(r,"defer",(function(){return _t})),n.d(r,"throttle",(function(){return It})),n.d(r,"debounce",(function(){return Pt})),n.d(r,"wrap",(function(){return Tt})),n.d(r,"negate",(function(){return At})),n.d(r,"compose",(function(){return Mt})),n.d(r,"after",(function(){return Dt})),n.d(r,"before",(function(){return jt})),n.d(r,"once",(function(){return Nt})),n.d(r,"findKey",(function(){return Rt})),n.d(r,"findIndex",(function(){return Ft})),n.d(r,"findLastIndex",(function(){return Bt})),n.d(r,"sortedIndex",(function(){return Vt})),n.d(r,"indexOf",(function(){return Ut})),n.d(r,"lastIndexOf",(function(){return Gt})),n.d(r,"find",(function(){return Ht})),n.d(r,"detect",(function(){return Ht})),n.d(r,"findWhere",(function(){return Yt})),n.d(r,"each",(function(){return qt})),n.d(r,"forEach",(function(){return qt})),n.d(r,"map",(function(){return Wt})),n.d(r,"collect",(function(){return Wt})),n.d(r,"reduce",(function(){return Kt})),n.d(r,"foldl",(function(){return Kt})),n.d(r,"inject",(function(){return Kt})),n.d(r,"reduceRight",(function(){return Zt})),n.d(r,"foldr",(function(){return Zt})),n.d(r,"filter",(function(){return $t})),n.d(r,"select",(function(){return $t})),n.d(r,"reject",(function(){return Qt})),n.d(r,"every",(function(){return Jt})),n.d(r,"all",(function(){return Jt})),n.d(r,"some",(function(){return en})),n.d(r,"any",(function(){return en})),n.d(r,"contains",(function(){return tn})),n.d(r,"includes",(function(){return tn})),n.d(r,"include",(function(){return tn})),n.d(r,"invoke",(function(){return nn})),n.d(r,"pluck",(function(){return rn})),n.d(r,"where",(function(){return an})),n.d(r,"max",(function(){return on})),n.d(r,"min",(function(){return sn})),n.d(r,"shuffle",(function(){return ln})),n.d(r,"sample",(function(){return cn})),n.d(r,"sortBy",(function(){return un})),n.d(r,"groupBy",(function(){return hn})),n.d(r,"indexBy",(function(){return dn})),n.d(r,"countBy",(function(){return fn})),n.d(r,"partition",(function(){return gn})),n.d(r,"toArray",(function(){return vn})),n.d(r,"size",(function(){return bn})),n.d(r,"pick",(function(){return xn})),n.d(r,"omit",(function(){return Cn})),n.d(r,"first",(function(){return kn})),n.d(r,"head",(function(){return kn})),n.d(r,"take",(function(){return kn})),n.d(r,"initial",(function(){return wn})),n.d(r,"last",(function(){return On})),n.d(r,"rest",(function(){return Sn})),n.d(r,"tail",(function(){return Sn})),n.d(r,"drop",(function(){return Sn})),n.d(r,"compact",(function(){return En})),n.d(r,"flatten",(function(){return _n})),n.d(r,"without",(function(){return Pn})),n.d(r,"uniq",(function(){return Tn})),n.d(r,"unique",(function(){return Tn})),n.d(r,"union",(function(){return An})),n.d(r,"intersection",(function(){return Mn})),n.d(r,"difference",(function(){return In})),n.d(r,"unzip",(function(){return Dn})),n.d(r,"transpose",(function(){return Dn})),n.d(r,"zip",(function(){return jn})),n.d(r,"object",(function(){return Nn})),n.d(r,"range",(function(){return Rn})),n.d(r,"chunk",(function(){return Ln})),n.d(r,"mixin",(function(){return Bn})),n.d(r,"default",(function(){return Vn}));var i="1.13.1",a="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},o=Array.prototype,s=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,l=o.push,u=o.slice,p=s.toString,h=s.hasOwnProperty,d="undefined"!=typeof ArrayBuffer,f="undefined"!=typeof DataView,g=Array.isArray,m=Object.keys,v=Object.create,b=d&&ArrayBuffer.isView,y=isNaN,x=isFinite,C=!{toString:null}.propertyIsEnumerable("toString"),w=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],k=Math.pow(2,53)-1;function S(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var a=Array(t+1);for(i=0;i<t;i++)a[i]=arguments[i];return a[t]=r,e.apply(this,a)}}function O(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function E(e){return null===e}function _(e){return void 0===e}function I(e){return!0===e||!1===e||"[object Boolean]"===p.call(e)}function P(e){return!(!e||1!==e.nodeType)}function T(e){var t="[object "+e+"]";return function(e){return p.call(e)===t}}var A=T("String"),M=T("Number"),D=T("Date"),j=T("RegExp"),N=T("Error"),R=T("Symbol"),L=T("ArrayBuffer"),F=T("Function"),B=a.document&&a.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof B&&(F=function(e){return"function"==typeof e||!1});var V=F,z=T("Object"),U=f&&z(new DataView(new ArrayBuffer(8))),G="undefined"!=typeof Map&&z(new Map),H=T("DataView");var Y=U?function(e){return null!=e&&V(e.getInt8)&&L(e.buffer)}:H,q=g||T("Array");function W(e,t){return null!=e&&h.call(e,t)}var X=T("Arguments");!function(){X(arguments)||(X=function(e){return W(e,"callee")})}();var K=X;function Z(e){return!R(e)&&x(e)&&!isNaN(parseFloat(e))}function $(e){return M(e)&&y(e)}function Q(e){return function(){return e}}function J(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=k}}function ee(e){return function(t){return null==t?void 0:t[e]}}var te=ee("byteLength"),ne=J(te),re=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var ie=d?function(e){return b?b(e)&&!Y(e):ne(e)&&re.test(p.call(e))}:Q(!1),ae=ee("length");function oe(e,t){t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=w.length,r=e.constructor,i=V(r)&&r.prototype||s,a="constructor";for(W(e,a)&&!t.contains(a)&&t.push(a);n--;)(a=w[n])in e&&e[a]!==i[a]&&!t.contains(a)&&t.push(a)}function se(e){if(!O(e))return[];if(m)return m(e);var t=[];for(var n in e)W(e,n)&&t.push(n);return C&&oe(e,t),t}function ce(e){if(null==e)return!0;var t=ae(e);return"number"==typeof t&&(q(e)||A(e)||K(e))?0===t:0===ae(se(e))}function le(e,t){var n=se(t),r=n.length;if(null==e)return!r;for(var i=Object(e),a=0;a<r;a++){var o=n[a];if(t[o]!==i[o]||!(o in i))return!1}return!0}function ue(e){return e instanceof ue?e:this instanceof ue?void(this._wrapped=e):new ue(e)}function pe(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,te(e))}ue.VERSION=i,ue.prototype.value=function(){return this._wrapped},ue.prototype.valueOf=ue.prototype.toJSON=ue.prototype.value,ue.prototype.toString=function(){return String(this._wrapped)};var he="[object DataView]";function de(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&function e(t,n,r,i){t instanceof ue&&(t=t._wrapped);n instanceof ue&&(n=n._wrapped);var a=p.call(t);if(a!==p.call(n))return!1;if(U&&"[object Object]"==a&&Y(t)){if(!Y(n))return!1;a=he}switch(a){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return c.valueOf.call(t)===c.valueOf.call(n);case"[object ArrayBuffer]":case he:return e(pe(t),pe(n),r,i)}var o="[object Array]"===a;if(!o&&ie(t)){if(te(t)!==te(n))return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof t||"object"!=typeof n)return!1;var s=t.constructor,l=n.constructor;if(s!==l&&!(V(s)&&s instanceof s&&V(l)&&l instanceof l)&&"constructor"in t&&"constructor"in n)return!1}i=i||[];var u=(r=r||[]).length;for(;u--;)if(r[u]===t)return i[u]===n;if(r.push(t),i.push(n),o){if((u=t.length)!==n.length)return!1;for(;u--;)if(!de(t[u],n[u],r,i))return!1}else{var h,d=se(t);if(u=d.length,se(n).length!==u)return!1;for(;u--;)if(!W(n,h=d[u])||!de(t[h],n[h],r,i))return!1}return r.pop(),i.pop(),!0}(e,t,n,r)}function fe(e,t){return de(e,t)}function ge(e){if(!O(e))return[];var t=[];for(var n in e)t.push(n);return C&&oe(e,t),t}function me(e){var t=ae(e);return function(n){if(null==n)return!1;var r=ge(n);if(ae(r))return!1;for(var i=0;i<t;i++)if(!V(n[e[i]]))return!1;return e!==Ce||!V(n[ve])}}var ve="forEach",be=["clear","delete"],ye=["get","has","set"],xe=be.concat(ve,ye),Ce=be.concat(ye),we=["add"].concat(be,ve,"has"),ke=G?me(xe):T("Map"),Se=G?me(Ce):T("WeakMap"),Oe=G?me(we):T("Set"),Ee=T("WeakSet");function _e(e){for(var t=se(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function Ie(e){for(var t=se(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}function Pe(e){for(var t={},n=se(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function Te(e){var t=[];for(var n in e)V(e[n])&&t.push(n);return t.sort()}function Ae(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var a=arguments[i],o=e(a),s=o.length,c=0;c<s;c++){var l=o[c];t&&void 0!==n[l]||(n[l]=a[l])}return n}}var Me=Ae(ge),De=Ae(se),je=Ae(ge,!0);function Ne(e){if(!O(e))return{};if(v)return v(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function Re(e,t){var n=Ne(e);return t&&De(n,t),n}function Le(e){return O(e)?q(e)?e.slice():Me({},e):e}function Fe(e,t){return t(e),e}function Be(e){return q(e)?e:[e]}function Ve(e){return ue.toPath(e)}function ze(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function Ue(e,t,n){var r=ze(e,Ve(t));return _(r)?n:r}function Ge(e,t){for(var n=(t=Ve(t)).length,r=0;r<n;r++){var i=t[r];if(!W(e,i))return!1;e=e[i]}return!!n}function He(e){return e}function Ye(e){return e=De({},e),function(t){return le(t,e)}}function qe(e){return e=Ve(e),function(t){return ze(t,e)}}function We(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return function(){return e.apply(t,arguments)}}function Xe(e,t,n){return null==e?He:V(e)?We(e,t,n):O(e)&&!q(e)?Ye(e):qe(e)}function Ke(e,t){return Xe(e,t,1/0)}function Ze(e,t,n){return ue.iteratee!==Ke?ue.iteratee(e,t):Xe(e,t,n)}function $e(e,t,n){t=Ze(t,n);for(var r=se(e),i=r.length,a={},o=0;o<i;o++){var s=r[o];a[s]=t(e[s],s,e)}return a}function Qe(){}function Je(e){return null==e?Qe:function(t){return Ue(e,t)}}function et(e,t,n){var r=Array(Math.max(0,e));t=We(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}function tt(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}ue.toPath=Be,ue.iteratee=Ke;var nt=Date.now||function(){return(new Date).getTime()};function rt(e){var t=function(t){return e[t]},n="(?:"+se(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}}var it={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},at=rt(it),ot=rt(Pe(it)),st=ue.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ct=/(.)^/,lt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ut=/\\|'|\r|\n|\u2028|\u2029/g;function pt(e){return"\\"+lt[e]}var ht=/^\s*(\w|\$)+\s*$/;function dt(e,t,n){!t&&n&&(t=n),t=je({},t,ue.templateSettings);var r=RegExp([(t.escape||ct).source,(t.interpolate||ct).source,(t.evaluate||ct).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(r,(function(t,n,r,o,s){return a+=e.slice(i,s).replace(ut,pt),i=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t})),a+="';\n";var o,s=t.variable;if(s){if(!ht.test(s))throw new Error("variable is not a bare identifier: "+s)}else a="with(obj||{}){\n"+a+"}\n",s="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{o=new Function(s,"_",a)}catch(l){throw l.source=a,l}var c=function(e){return o.call(this,e,ue)};return c.source="function("+s+"){\n"+a+"}",c}function ft(e,t,n){var r=(t=Ve(t)).length;if(!r)return V(n)?n.call(e):n;for(var i=0;i<r;i++){var a=null==e?void 0:e[t[i]];void 0===a&&(a=n,i=r),e=V(a)?a.call(e):a}return e}var gt=0;function mt(e){var t=++gt+"";return e?e+t:t}function vt(e){var t=ue(e);return t._chain=!0,t}function bt(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var a=Ne(e.prototype),o=e.apply(a,i);return O(o)?o:a}var yt=S((function(e,t){var n=yt.placeholder;return function r(){for(var i=0,a=t.length,o=Array(a),s=0;s<a;s++)o[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)o.push(arguments[i++]);return bt(e,r,this,this,o)}}));yt.placeholder=ue;var xt=yt,Ct=S((function(e,t,n){if(!V(e))throw new TypeError("Bind must be called on a function");var r=S((function(i){return bt(e,r,t,this,n.concat(i))}));return r})),wt=J(ae);function kt(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var i=r.length,a=0,o=ae(e);a<o;a++){var s=e[a];if(wt(s)&&(q(s)||K(s)))if(t>1)kt(s,t-1,n,r),i=r.length;else for(var c=0,l=s.length;c<l;)r[i++]=s[c++];else n||(r[i++]=s)}return r}var St=S((function(e,t){var n=(t=kt(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=Ct(e[r],e)}return e}));function Ot(e,t){var n=function n(r){var i=n.cache,a=""+(t?t.apply(this,arguments):r);return W(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return n.cache={},n}var Et=S((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),_t=xt(Et,ue,1);function It(e,t,n){var r,i,a,o,s=0;n||(n={});var c=function(){s=!1===n.leading?0:nt(),r=null,o=e.apply(i,a),r||(i=a=null)},l=function(){var l=nt();s||!1!==n.leading||(s=l);var u=t-(l-s);return i=this,a=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=l,o=e.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(c,u)),o};return l.cancel=function(){clearTimeout(r),s=0,r=i=a=null},l}function Pt(e,t,n){var r,i,a,o,s,c=function c(){var l=nt()-i;t>l?r=setTimeout(c,t-l):(r=null,n||(o=e.apply(s,a)),r||(a=s=null))},l=S((function(l){return s=this,a=l,i=nt(),r||(r=setTimeout(c,t),n&&(o=e.apply(s,a))),o}));return l.cancel=function(){clearTimeout(r),r=a=s=null},l}function Tt(e,t){return xt(t,e)}function At(e){return function(){return!e.apply(this,arguments)}}function Mt(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function Dt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function jt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var Nt=xt(jt,2);function Rt(e,t,n){t=Ze(t,n);for(var r,i=se(e),a=0,o=i.length;a<o;a++)if(t(e[r=i[a]],r,e))return r}function Lt(e){return function(t,n,r){n=Ze(n,r);for(var i=ae(t),a=e>0?0:i-1;a>=0&&a<i;a+=e)if(n(t[a],a,t))return a;return-1}}var Ft=Lt(1),Bt=Lt(-1);function Vt(e,t,n,r){for(var i=(n=Ze(n,r,1))(t),a=0,o=ae(e);a<o;){var s=Math.floor((a+o)/2);n(e[s])<i?a=s+1:o=s}return a}function zt(e,t,n){return function(r,i,a){var o=0,s=ae(r);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return r[a=n(r,i)]===i?a:-1;if(i!=i)return(a=t(u.call(r,o,s),$))>=0?a+o:-1;for(a=e>0?o:s-1;a>=0&&a<s;a+=e)if(r[a]===i)return a;return-1}}var Ut=zt(1,Ft,Vt),Gt=zt(-1,Bt);function Ht(e,t,n){var r=(wt(e)?Ft:Rt)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function Yt(e,t){return Ht(e,Ye(t))}function qt(e,t,n){var r,i;if(t=We(t,n),wt(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var a=se(e);for(r=0,i=a.length;r<i;r++)t(e[a[r]],a[r],e)}return e}function Wt(e,t,n){t=Ze(t,n);for(var r=!wt(e)&&se(e),i=(r||e).length,a=Array(i),o=0;o<i;o++){var s=r?r[o]:o;a[o]=t(e[s],s,e)}return a}function Xt(e){var t=function(t,n,r,i){var a=!wt(t)&&se(t),o=(a||t).length,s=e>0?0:o-1;for(i||(r=t[a?a[s]:s],s+=e);s>=0&&s<o;s+=e){var c=a?a[s]:s;r=n(r,t[c],c,t)}return r};return function(e,n,r,i){var a=arguments.length>=3;return t(e,We(n,i,4),r,a)}}var Kt=Xt(1),Zt=Xt(-1);function $t(e,t,n){var r=[];return t=Ze(t,n),qt(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function Qt(e,t,n){return $t(e,At(Ze(t)),n)}function Jt(e,t,n){t=Ze(t,n);for(var r=!wt(e)&&se(e),i=(r||e).length,a=0;a<i;a++){var o=r?r[a]:a;if(!t(e[o],o,e))return!1}return!0}function en(e,t,n){t=Ze(t,n);for(var r=!wt(e)&&se(e),i=(r||e).length,a=0;a<i;a++){var o=r?r[a]:a;if(t(e[o],o,e))return!0}return!1}function tn(e,t,n,r){return wt(e)||(e=_e(e)),("number"!=typeof n||r)&&(n=0),Ut(e,t,n)>=0}var nn=S((function(e,t,n){var r,i;return V(t)?i=t:(t=Ve(t),r=t.slice(0,-1),t=t[t.length-1]),Wt(e,(function(e){var a=i;if(!a){if(r&&r.length&&(e=ze(e,r)),null==e)return;a=e[t]}return null==a?a:a.apply(e,n)}))}));function rn(e,t){return Wt(e,qe(t))}function an(e,t){return $t(e,Ye(t))}function on(e,t,n){var r,i,a=-1/0,o=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,c=(e=wt(e)?e:_e(e)).length;s<c;s++)null!=(r=e[s])&&r>a&&(a=r);else t=Ze(t,n),qt(e,(function(e,n,r){((i=t(e,n,r))>o||i===-1/0&&a===-1/0)&&(a=e,o=i)}));return a}function sn(e,t,n){var r,i,a=1/0,o=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,c=(e=wt(e)?e:_e(e)).length;s<c;s++)null!=(r=e[s])&&r<a&&(a=r);else t=Ze(t,n),qt(e,(function(e,n,r){((i=t(e,n,r))<o||i===1/0&&a===1/0)&&(a=e,o=i)}));return a}function cn(e,t,n){if(null==t||n)return wt(e)||(e=_e(e)),e[tt(e.length-1)];var r=wt(e)?Le(e):_e(e),i=ae(r);t=Math.max(Math.min(t,i),0);for(var a=i-1,o=0;o<t;o++){var s=tt(o,a),c=r[o];r[o]=r[s],r[s]=c}return r.slice(0,t)}function ln(e){return cn(e,1/0)}function un(e,t,n){var r=0;return t=Ze(t,n),rn(Wt(e,(function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")}function pn(e,t){return function(n,r,i){var a=t?[[],[]]:{};return r=Ze(r,i),qt(n,(function(t,i){var o=r(t,i,n);e(a,t,o)})),a}}var hn=pn((function(e,t,n){W(e,n)?e[n].push(t):e[n]=[t]})),dn=pn((function(e,t,n){e[n]=t})),fn=pn((function(e,t,n){W(e,n)?e[n]++:e[n]=1})),gn=pn((function(e,t,n){e[n?0:1].push(t)}),!0),mn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function vn(e){return e?q(e)?u.call(e):A(e)?e.match(mn):wt(e)?Wt(e,He):_e(e):[]}function bn(e){return null==e?0:wt(e)?e.length:se(e).length}function yn(e,t,n){return t in n}var xn=S((function(e,t){var n={},r=t[0];if(null==e)return n;V(r)?(t.length>1&&(r=We(r,t[1])),t=ge(e)):(r=yn,t=kt(t,!1,!1),e=Object(e));for(var i=0,a=t.length;i<a;i++){var o=t[i],s=e[o];r(s,o,e)&&(n[o]=s)}return n})),Cn=S((function(e,t){var n,r=t[0];return V(r)?(r=At(r),t.length>1&&(n=t[1])):(t=Wt(kt(t,!1,!1),String),r=function(e,n){return!tn(t,n)}),xn(e,r,n)}));function wn(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function kn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:wn(e,e.length-t)}function Sn(e,t,n){return u.call(e,null==t||n?1:t)}function On(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:Sn(e,Math.max(0,e.length-t))}function En(e){return $t(e,Boolean)}function _n(e,t){return kt(e,t,!1)}var In=S((function(e,t){return t=kt(t,!0,!0),$t(e,(function(e){return!tn(t,e)}))})),Pn=S((function(e,t){return In(e,t)}));function Tn(e,t,n,r){I(t)||(r=n,n=t,t=!1),null!=n&&(n=Ze(n,r));for(var i=[],a=[],o=0,s=ae(e);o<s;o++){var c=e[o],l=n?n(c,o,e):c;t&&!n?(o&&a===l||i.push(c),a=l):n?tn(a,l)||(a.push(l),i.push(c)):tn(i,c)||i.push(c)}return i}var An=S((function(e){return Tn(kt(e,!0,!0))}));function Mn(e){for(var t=[],n=arguments.length,r=0,i=ae(e);r<i;r++){var a=e[r];if(!tn(t,a)){var o;for(o=1;o<n&&tn(arguments[o],a);o++);o===n&&t.push(a)}}return t}function Dn(e){for(var t=e&&on(e,ae).length||0,n=Array(t),r=0;r<t;r++)n[r]=rn(e,r);return n}var jn=S(Dn);function Nn(e,t){for(var n={},r=0,i=ae(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function Rn(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),a=0;a<r;a++,e+=n)i[a]=e;return i}function Ln(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(u.call(e,r,r+=t));return n}function Fn(e,t){return e._chain?ue(t).chain():t}function Bn(e){return qt(Te(e),(function(t){var n=ue[t]=e[t];ue.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),Fn(this,n.apply(ue,e))}})),ue}qt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=o[e];ue.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Fn(this,n)}})),qt(["concat","join","slice"],(function(e){var t=o[e];ue.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Fn(this,e)}}));var Vn=ue,zn=Bn(r);zn._=zn;var Un=zn},"6YKU":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n("D57K"),i=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r.name="FormulaError",r}return Object(r.e)(t,e),t}(Error),a="CYCLIC_REFERENCE"},"7+LA":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("gZOS"),i=n("5xGT"),a=n("ROBh"),o=n("6Oco"),s=n("P4Xx"),c=n("TLy2"),l=n("8j5Y"),u=n("YtkY"),p=n("QoSw"),h=n("oyCe"),d=n("Xpu5"),f=n("diDk"),g=n("+1jB"),m=n("EM62"),v=function(){function e(e,t,n,r){this.ll=e,this.ell=t,this.mcu=n,this.commandService=r}return e.prototype.syncDiagramToEData=function(e,t){var n=this;void 0===t&&(t=!1),(e instanceof h.a?Object(a.a)(e):this.ll.forDiagram(e,!1).getDiagramOnce()).pipe(Object(c.a)((function(e){return e.eData&&0!==e.eData.length?n.getAllChangeModels(e.eData).pipe(Object(l.a)((function(r){var i={};r.forEach((function(e){i[e.id]=e})),Object.values(e.shapes).filter((function(e){return!!e.eData})).forEach((function(r){var a=Object.keys(r.eData)[0],o=Object.values(r.eData)[0];if(i[a]){var s=i[a];n.mcu.addShapeToEntity(s,{entityId:o,shapeId:r.id,shapeDefId:r.defId,diagramId:e.id,isDelete:t})}})),r.forEach((function(e){var r=e.__sakota__.getChanges();r&&(!t&&r.$set&&Object.keys(r.$set).length>0||t&&r.$unset&&Object.keys(r.$unset).length>0)&&n.commandService.dispatch(d.a.applyModifierEData,e.id,{modifier:r})}))}))):o.a}))).subscribe()},e.prototype.getAllChangeModels=function(e){var t=this,n=e.map((function(e){return t.ell.getEData(e).pipe(Object(c.a)((function(e){return e.getEDataModelOnce().pipe(Object(u.a)((function(e){return r.Sakota.create(e)})))})))}));return Object(s.a)(n)},e.\u0275fac=function(t){return new(t||e)(m.pc(p.a),m.pc(f.a),m.pc(g.a),m.pc(i.B))},e.\u0275prov=m.bc({token:e,factory:e.\u0275fac}),e}()},"7B5I":function(e,t,n){var r=n("oFOz");t.CELL=function(){throw new Error("CELL is not implemented")},t.ERROR={},t.ERROR.TYPE=function(e){switch(e){case r.nil:return 1;case r.div0:return 2;case r.value:return 3;case r.ref:return 4;case r.name:return 5;case r.num:return 6;case r.na:return 7;case r.data:return 8}return r.na},t.INFO=function(){throw new Error("INFO is not implemented")},t.ISBLANK=function(e){return null===e},t.ISBINARY=function(e){return/^[01]{1,10}$/.test(e)},t.ISERR=function(e){return[r.value,r.ref,r.div0,r.num,r.name,r.nil].indexOf(e)>=0||"number"==typeof e&&(isNaN(e)||!isFinite(e))},t.ISERROR=function(e){return t.ISERR(e)||e===r.na},t.ISEVEN=function(e){return!(1&Math.floor(Math.abs(e)))},t.ISFORMULA=function(){throw new Error("ISFORMULA is not implemented")},t.ISLOGICAL=function(e){return!0===e||!1===e},t.ISNA=function(e){return e===r.na},t.ISNONTEXT=function(e){return"string"!=typeof e},t.ISNUMBER=function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},t.ISODD=function(e){return!!(1&Math.floor(Math.abs(e)))},t.ISREF=function(){throw new Error("ISREF is not implemented")},t.ISTEXT=function(e){return"string"==typeof e},t.N=function(e){return this.ISNUMBER(e)?e:e instanceof Date?e.getTime():!0===e?1:!1===e?0:this.ISERROR(e)?e:0},t.NA=function(){return r.na},t.SHEET=function(){throw new Error("SHEET is not implemented")},t.SHEETS=function(){throw new Error("SHEETS is not implemented")},t.TYPE=function(e){return this.ISNUMBER(e)?1:this.ISTEXT(e)?2:this.ISLOGICAL(e)?4:this.ISERROR(e)?16:Array.isArray(e)?64:void 0}},"7N9q":function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n("D57K"),i=n("U8K0"),a=n("Lmsv"),o=n("5xGT"),s=n("C05f"),c=n("TLy2"),l=n("YtkY"),u=n("J+dc"),p=n("4y1S"),h=n("EM62"),d=n("s2Ay"),f=n("2kYt"),g=n("jHi0"),m=n("K0+f"),v=n("1ahL"),b=n("Lzmu"),y=["window"],x=["windowInner"],C=function(){return{event:"notification.panel.markAllRead.click"}};function w(e,t){if(1&e){var n=h.mc();h.lc(0,"button",12),h.tc("click",(function(){return h.Pc(n),h.xc(3).markAllAsRead()})),h.lc(1,"span",13),h.ed(2,"TOOLTIPS.NOTIFICATION.MARK_ALL_AS_READ"),h.kc(),h.wc(),h.lc(3,"svg",16),h.gc(4,"use",17),h.kc(),h.kc()}2&e&&h.Cc("trackAction",h.Gc(1,C))}var k=function(){return{event:"notification.panel.settings.click"}};function S(e,t){if(1&e){var n=h.mc();h.lc(0,"div",7),h.lc(1,"div",8),h.ed(2),h.yc(3,"async"),h.kc(),h.lc(4,"div",9),h.cd(5,w,5,2,"button",10),h.yc(6,"async"),h.kc(),h.lc(7,"div",11),h.lc(8,"button",12),h.tc("click",(function(){return h.Pc(n),h.xc(2).selectedTab.next("notifications-settings")})),h.lc(9,"span",13),h.ed(10,"TOOLTIPS.NOTIFICATION.NOTIFICATION_SETTINGS"),h.kc(),h.wc(),h.lc(11,"svg",14),h.gc(12,"use",15),h.kc(),h.kc(),h.kc(),h.kc()}if(2&e){var r=h.xc(2);h.Sb(2),h.fd(h.zc(3,3,r.numberOfUnreadGlobalNotificationLable)),h.Sb(3),h.Cc("ngIf",h.zc(6,5,r.hasUnreadGlobalNotifications)),h.Sb(3),h.Cc("trackAction",h.Gc(7,k))}}var O=function(){return{event:"notification.panel.settings.back.click"}};function E(e,t){if(1&e){var n=h.mc();h.lc(0,"div",7),h.lc(1,"button",18),h.tc("click",(function(){return h.Pc(n),h.xc(2).selectedTab.next("notifications")})),h.wc(),h.lc(2,"svg",19),h.gc(3,"use",20),h.kc(),h.kc(),h.vc(),h.lc(4,"div",21),h.ed(5,"GLOBAL_NOTIFICATION.NOTIFICATION_SETTINGS"),h.kc(),h.kc()}2&e&&(h.Sb(1),h.Cc("trackAction",h.Gc(1,O)))}function _(e,t){1&e&&(h.lc(0,"div",25),h.gc(1,"global-notification-notifications"),h.kc())}function I(e,t){1&e&&(h.lc(0,"div",25),h.gc(1,"global-notification-settings"),h.kc())}function P(e,t){if(1&e&&(h.lc(0,"div",22),h.lc(1,"div",23),h.cd(2,_,2,0,"div",24),h.cd(3,I,2,0,"div",24),h.kc(),h.kc()),2&e){var n=t.ngIf;h.Sb(2),h.Cc("ngIf","notifications"===n),h.Sb(1),h.Cc("ngIf","notifications-settings"===n)}}function T(e,t){if(1&e&&(h.lc(0,"div",3,4),h.yc(2,"async"),h.cd(3,S,13,8,"div",5),h.cd(4,E,6,2,"div",5),h.cd(5,P,4,2,"div",6),h.yc(6,"async"),h.kc()),2&e){var n=t.ngIf,r=h.xc();h.Xb("demo-user",h.zc(2,5,r.isDemoUser)),h.Sb(3),h.Cc("ngIf","notifications"===n),h.Sb(1),h.Cc("ngIf","notifications-settings"===n),h.Sb(1),h.Cc("ngIf",h.zc(6,7,r.selectedTab))}}var A=function(e){function t(t,n,r,i,a,o){var c=e.call(this)||this;return c.modalController=t,c.stateService=n,c.globalNotificationService=r,c.commandService=i,c.userLocator=a,c.translateService=o,c.subs=[],c.stateService.set("ModalBlur",!1),c.selectedTab=new s.a("notifications"),c.isDemoUser=new s.a(!1),c}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"hasUnreadGlobalNotifications",{get:function(){return this.globalNotificationService.hasUnreadGlobalNotifications()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numberOfUnreadGlobalNotificationLable",{get:function(){var e=this;return this.globalNotificationService.getNoOfUnreadGlobalNotification().pipe(Object(c.a)((function(t){return e.translateService.get("TOOLTIPS.NOTIFICATION.NEW_NOTIFICATIONS",{noOfNewNotifications:t})})))},enumerable:!1,configurable:!0}),t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.ngOnInit=function(){var e=this;if(o.Kb.track("notification.panel.load"),this.container&&this.containerInner){var t=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(t)}this.subs.push(this.userLocator.getUserData().pipe(Object(l.a)((function(e){return!!e&&e.status===p.A.DEMO}))).subscribe((function(t){return e.isDemoUser.next(t)})))},t.prototype.closeWindow=function(){var e=this;if(this.container&&this.containerInner){var t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)}},t.prototype.markAllAsRead=function(){var e=this;this.globalNotificationService.getUnreadNotificationIds().pipe(Object(u.a)(1),Object(c.a)((function(t){return e.commandService.dispatch(i.a.markGlobalNotificationRead,{notificationIds:t})}))).subscribe()},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(h.fc(o.gb),h.fc(o.Ib),h.fc(a.a),h.fc(o.B),h.fc(p.x),h.fc(d.e))},t.\u0275cmp=h.Zb({type:t,selectors:[["global-notification"]],viewQuery:function(e,t){var n;(1&e&&(h.jd(y,!0),h.jd(x,!0)),2&e)&&(h.Lc(n=h.uc())&&(t.container=n.first),h.Lc(n=h.uc())&&(t.containerInner=n.first))},features:[h.Pb],decls:5,vars:7,consts:[[1,"fx-cover","modal-window-container","global-notification-container",3,"click"],["window",""],["class","modal-window-inner",3,"demo-user",4,"ngIf"],[1,"modal-window-inner"],["windowInner",""],["class","modal-window-heading",4,"ngIf"],["class","modal-window-content",4,"ngIf"],[1,"modal-window-heading"],[1,"global-notification-heading"],[1,"nu-btn-small","nu-btn-icon","lib-browser-close-btn","global-notification-button-container"],["class","nu-btn-small nu-btn-icon lib-browser-close-btn","tooltip","","placement","bottom",3,"trackAction","click",4,"ngIf"],[1,"global-notification-button-container"],["tooltip","","placement","bottom",1,"nu-btn-small","nu-btn-icon","lib-browser-close-btn",3,"trackAction","click"],["translate","",1,"tooltip-content"],[1,"nu-icon","nu-icon-med","nu-ic-settings"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-settings"],[1,"nu-icon","nu-icon-med","nu-ic-notification-tick-double"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notification-tick-double"],[1,"nu-btn-small","nu-btn-icon","lib-browser-close-btn","global-notification-notifications-button",3,"trackAction","click"],[1,"nu-icon","nu-icon-med","nu-ic-arrow-left"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-arrow-left"],["translate","",1,"global-notification-heading-settings"],[1,"modal-window-content"],[1,"global-notification-tabs-content"],["class","global-notification-tab-item",4,"ngIf"],[1,"global-notification-tab-item"]],template:function(e,t){1&e&&(h.lc(0,"div",0,1),h.tc("click",(function(e){return t.closeOnOverlayClick(e)})),h.yc(2,"async"),h.cd(3,T,7,9,"div",2),h.yc(4,"async"),h.kc()),2&e&&(h.Xb("demo-user",h.zc(2,3,t.isDemoUser)),h.Sb(3),h.Cc("ngIf",h.zc(4,5,t.selectedTab)))},directives:[f.t,g.a,m.a,d.a,v.a,b.a],pipes:[f.b],styles:['.modal-window-inner.demo-user[_ngcontent-%COMP%]{top:0;height:100%}.modal-window-inner[_ngcontent-%COMP%]{width:264px;height:100%;padding:0;background:#fff;box-shadow:0 4px 16px rgba(0,0,0,.05),0 2px 6px rgba(0,0,0,.05),0 1px 2px rgba(0,0,0,.05);box-sizing:border-box;border-radius:4px;top:0;display:flex;flex-direction:column}.global-notification-tabs-content[_ngcontent-%COMP%]{height:calc(100% - 53px)}.global-notification-tab-item[_ngcontent-%COMP%], .modal-window-content[_ngcontent-%COMP%]{height:100%}.modal-window-heading[_ngcontent-%COMP%]{padding-top:17px;padding-bottom:18px;height:52px;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;border-bottom:1px solid #e0e0e0}.modal-window-heading[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:unset;top:0;right:0}.global-notification-heading[_ngcontent-%COMP%]{font-family:lt_regular,Open Sans,sans-serif;padding-left:16px;width:70%}.global-notification-heading[_ngcontent-%COMP%], .global-notification-heading-settings[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:14px;line-height:17px;color:#04263d}.global-notification-heading-settings[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}.global-notification-container.demo-user[_ngcontent-%COMP%]:after, .global-notification-container.demo-user[_ngcontent-%COMP%]:before{content:"";display:block;width:0;height:0;position:absolute;border-style:solid}.global-notification-container.demo-user[_ngcontent-%COMP%]:before{top:70px;right:53px;border-color:transparent transparent #e0e0e0;border-width:5px}.global-notification-container.demo-user[_ngcontent-%COMP%]:after{top:72px;right:53px;border-color:transparent transparent #fff;border-width:5px}.global-notification-container[_ngcontent-%COMP%]{background-color:unset;display:flex;justify-content:flex-start;left:50px;z-index:10}.global-notification-container[_ngcontent-%COMP%]:after, .global-notification-container[_ngcontent-%COMP%]:before{content:"";display:block;width:0;height:0;position:absolute;border-style:solid}.global-notification-container[_ngcontent-%COMP%]:before{top:40px;right:53px;border-color:transparent transparent #e0e0e0;border-width:0}.global-notification-container[_ngcontent-%COMP%]:after{top:42px;right:53px;border-color:transparent transparent #fff;border-width:0}.global-notification-button-container[_ngcontent-%COMP%]{width:15%}'],changeDetection:0}),t}(o.nb)},"8PfW":function(e,t,n){var r;(function(){function i(e){"use strict";var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xab\xab\xab` and `\xbb\xbb\xbb` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r].defaultValue);return n}var a={},o={},s={},c=i(!0),l="vanilla",u={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:i(!0),allOn:function(){"use strict";var e=i(!0),t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}()};function p(e,t){"use strict";var n=t?"Error in "+t+" extension->":"Error in unnamed extension",r={valid:!0,error:""};a.helper.isArray(e)||(e=[e]);for(var i=0;i<e.length;++i){var o=n+" sub-extension "+i+": ",s=e[i];if("object"!=typeof s)return r.valid=!1,r.error=o+"must be an object, but "+typeof s+" given",r;if(!a.helper.isString(s.type))return r.valid=!1,r.error=o+'property "type" must be a string, but '+typeof s.type+" given",r;var c=s.type=s.type.toLowerCase();if("language"===c&&(c=s.type="lang"),"html"===c&&(c=s.type="output"),"lang"!==c&&"output"!==c&&"listener"!==c)return r.valid=!1,r.error=o+"type "+c+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',r;if("listener"===c){if(a.helper.isUndefined(s.listeners))return r.valid=!1,r.error=o+'. Extensions of type "listener" must have a property called "listeners"',r}else if(a.helper.isUndefined(s.filter)&&a.helper.isUndefined(s.regex))return r.valid=!1,r.error=o+c+' extensions must define either a "regex" property or a "filter" method',r;if(s.listeners){if("object"!=typeof s.listeners)return r.valid=!1,r.error=o+'"listeners" property must be an object but '+typeof s.listeners+" given",r;for(var l in s.listeners)if(s.listeners.hasOwnProperty(l)&&"function"!=typeof s.listeners[l])return r.valid=!1,r.error=o+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+l+" must be a function but "+typeof s.listeners[l]+" given",r}if(s.filter){if("function"!=typeof s.filter)return r.valid=!1,r.error=o+'"filter" must be a function, but '+typeof s.filter+" given",r}else if(s.regex){if(a.helper.isString(s.regex)&&(s.regex=new RegExp(s.regex,"g")),!(s.regex instanceof RegExp))return r.valid=!1,r.error=o+'"regex" property must either be a string or a RegExp object, but '+typeof s.regex+" given",r;if(a.helper.isUndefined(s.replace))return r.valid=!1,r.error=o+'"regex" extensions must implement a replace string or function',r}}return r}function h(e,t){"use strict";return"\xa8E"+t.charCodeAt(0)+"E"}a.helper={},a.extensions={},a.setOption=function(e,t){"use strict";return c[e]=t,this},a.getOption=function(e){"use strict";return c[e]},a.getOptions=function(){"use strict";return c},a.resetOptions=function(){"use strict";c=i(!0)},a.setFlavor=function(e){"use strict";if(!u.hasOwnProperty(e))throw Error(e+" flavor was not found");a.resetOptions();var t=u[e];for(var n in l=e,t)t.hasOwnProperty(n)&&(c[n]=t[n])},a.getFlavor=function(){"use strict";return l},a.getFlavorOptions=function(e){"use strict";if(u.hasOwnProperty(e))return u[e]},a.getDefaultOptions=function(e){"use strict";return i(e)},a.subParser=function(e,t){"use strict";if(a.helper.isString(e)){if(void 0===t){if(o.hasOwnProperty(e))return o[e];throw Error("SubParser named "+e+" not registered!")}o[e]=t}},a.extension=function(e,t){"use strict";if(!a.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=a.helper.stdExtName(e),a.helper.isUndefined(t)){if(!s.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return s[e]}"function"==typeof t&&(t=t()),a.helper.isArray(t)||(t=[t]);var n=p(t,e);if(!n.valid)throw Error(n.error);s[e]=t},a.getAllExtensions=function(){"use strict";return s},a.removeExtension=function(e){"use strict";delete s[e]},a.resetExtensions=function(){"use strict";s={}},a.validateExtension=function(e){"use strict";var t=p(e,null);return!!t.valid||(console.warn(t.error),!1)},a.hasOwnProperty("helper")||(a.helper={}),a.helper.isString=function(e){"use strict";return"string"==typeof e||e instanceof String},a.helper.isFunction=function(e){"use strict";return e&&"[object Function]"==={}.toString.call(e)},a.helper.isArray=function(e){"use strict";return Array.isArray(e)},a.helper.isUndefined=function(e){"use strict";return void 0===e},a.helper.forEach=function(e,t){"use strict";if(a.helper.isUndefined(e))throw new Error("obj param is required");if(a.helper.isUndefined(t))throw new Error("callback param is required");if(!a.helper.isFunction(t))throw new Error("callback param must be a function/closure");if("function"==typeof e.forEach)e.forEach(t);else if(a.helper.isArray(e))for(var n=0;n<e.length;n++)t(e[n],n,e);else{if("object"!=typeof e)throw new Error("obj does not seem to be an array or an iterable object");for(var r in e)e.hasOwnProperty(r)&&t(e[r],r,e)}},a.helper.stdExtName=function(e){"use strict";return e.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},a.helper.escapeCharactersCallback=h,a.helper.escapeCharacters=function(e,t,n){"use strict";var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return e=e.replace(i,h)},a.helper.unescapeHTMLEntities=function(e){"use strict";return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var d=function(e,t,n,r){"use strict";var i,a,o,s,c,l=r||"",u=l.indexOf("g")>-1,p=new RegExp(t+"|"+n,"g"+l.replace(/g/g,"")),h=new RegExp(t,l.replace(/g/g,"")),d=[];do{for(i=0;o=p.exec(e);)if(h.test(o[0]))i++||(s=(a=p.lastIndex)-o[0].length);else if(i&&!--i){c=o.index+o[0].length;var f={left:{start:s,end:a},match:{start:a,end:o.index},right:{start:o.index,end:c},wholeMatch:{start:s,end:c}};if(d.push(f),!u)return d}}while(i&&(p.lastIndex=a));return d};a.helper.matchRecursiveRegExp=function(e,t,n,r){"use strict";for(var i=d(e,t,n,r),a=[],o=0;o<i.length;++o)a.push([e.slice(i[o].wholeMatch.start,i[o].wholeMatch.end),e.slice(i[o].match.start,i[o].match.end),e.slice(i[o].left.start,i[o].left.end),e.slice(i[o].right.start,i[o].right.end)]);return a},a.helper.replaceRecursiveRegExp=function(e,t,n,r,i){"use strict";if(!a.helper.isFunction(t)){var o=t;t=function(){return o}}var s=d(e,n,r,i),c=e,l=s.length;if(l>0){var u=[];0!==s[0].wholeMatch.start&&u.push(e.slice(0,s[0].wholeMatch.start));for(var p=0;p<l;++p)u.push(t(e.slice(s[p].wholeMatch.start,s[p].wholeMatch.end),e.slice(s[p].match.start,s[p].match.end),e.slice(s[p].left.start,s[p].left.end),e.slice(s[p].right.start,s[p].right.end))),p<l-1&&u.push(e.slice(s[p].wholeMatch.end,s[p+1].wholeMatch.start));s[l-1].wholeMatch.end<e.length&&u.push(e.slice(s[l-1].wholeMatch.end)),c=u.join("")}return c},a.helper.regexIndexOf=function(e,t,n){"use strict";if(!a.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(t instanceof RegExp==!1)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var r=e.substring(n||0).search(t);return r>=0?r+(n||0):r},a.helper.splitAtIndex=function(e,t){"use strict";if(!a.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[e.substring(0,t),e.substring(t)]},a.helper.encodeEmailAddress=function(e){"use strict";var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=e.replace(/./g,(function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else{var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e}))},a.helper.padEnd=function(e,t,n){"use strict";return t>>=0,n=String(n||" "),e.length>t?String(e):((t-=e.length)>n.length&&(n+=n.repeat(t/n.length)),String(e)+n.slice(0,t))},"undefined"==typeof console&&(console={warn:function(e){"use strict";alert(e)},log:function(e){"use strict";alert(e)},error:function(e){"use strict";throw e}}),a.helper.regexes={asteriskDashAndColon:/([*_:~])/g},a.helper.emojis={"+1":"\ud83d\udc4d","-1":"\ud83d\udc4e",100:"\ud83d\udcaf",1234:"\ud83d\udd22","1st_place_medal":"\ud83e\udd47","2nd_place_medal":"\ud83e\udd48","3rd_place_medal":"\ud83e\udd49","8ball":"\ud83c\udfb1",a:"\ud83c\udd70\ufe0f",ab:"\ud83c\udd8e",abc:"\ud83d\udd24",abcd:"\ud83d\udd21",accept:"\ud83c\ude51",aerial_tramway:"\ud83d\udea1",airplane:"\u2708\ufe0f",alarm_clock:"\u23f0",alembic:"\u2697\ufe0f",alien:"\ud83d\udc7d",ambulance:"\ud83d\ude91",amphora:"\ud83c\udffa",anchor:"\u2693\ufe0f",angel:"\ud83d\udc7c",anger:"\ud83d\udca2",angry:"\ud83d\ude20",anguished:"\ud83d\ude27",ant:"\ud83d\udc1c",apple:"\ud83c\udf4e",aquarius:"\u2652\ufe0f",aries:"\u2648\ufe0f",arrow_backward:"\u25c0\ufe0f",arrow_double_down:"\u23ec",arrow_double_up:"\u23eb",arrow_down:"\u2b07\ufe0f",arrow_down_small:"\ud83d\udd3d",arrow_forward:"\u25b6\ufe0f",arrow_heading_down:"\u2935\ufe0f",arrow_heading_up:"\u2934\ufe0f",arrow_left:"\u2b05\ufe0f",arrow_lower_left:"\u2199\ufe0f",arrow_lower_right:"\u2198\ufe0f",arrow_right:"\u27a1\ufe0f",arrow_right_hook:"\u21aa\ufe0f",arrow_up:"\u2b06\ufe0f",arrow_up_down:"\u2195\ufe0f",arrow_up_small:"\ud83d\udd3c",arrow_upper_left:"\u2196\ufe0f",arrow_upper_right:"\u2197\ufe0f",arrows_clockwise:"\ud83d\udd03",arrows_counterclockwise:"\ud83d\udd04",art:"\ud83c\udfa8",articulated_lorry:"\ud83d\ude9b",artificial_satellite:"\ud83d\udef0",astonished:"\ud83d\ude32",athletic_shoe:"\ud83d\udc5f",atm:"\ud83c\udfe7",atom_symbol:"\u269b\ufe0f",avocado:"\ud83e\udd51",b:"\ud83c\udd71\ufe0f",baby:"\ud83d\udc76",baby_bottle:"\ud83c\udf7c",baby_chick:"\ud83d\udc24",baby_symbol:"\ud83d\udebc",back:"\ud83d\udd19",bacon:"\ud83e\udd53",badminton:"\ud83c\udff8",baggage_claim:"\ud83d\udec4",baguette_bread:"\ud83e\udd56",balance_scale:"\u2696\ufe0f",balloon:"\ud83c\udf88",ballot_box:"\ud83d\uddf3",ballot_box_with_check:"\u2611\ufe0f",bamboo:"\ud83c\udf8d",banana:"\ud83c\udf4c",bangbang:"\u203c\ufe0f",bank:"\ud83c\udfe6",bar_chart:"\ud83d\udcca",barber:"\ud83d\udc88",baseball:"\u26be\ufe0f",basketball:"\ud83c\udfc0",basketball_man:"\u26f9\ufe0f",basketball_woman:"\u26f9\ufe0f&zwj;\u2640\ufe0f",bat:"\ud83e\udd87",bath:"\ud83d\udec0",bathtub:"\ud83d\udec1",battery:"\ud83d\udd0b",beach_umbrella:"\ud83c\udfd6",bear:"\ud83d\udc3b",bed:"\ud83d\udecf",bee:"\ud83d\udc1d",beer:"\ud83c\udf7a",beers:"\ud83c\udf7b",beetle:"\ud83d\udc1e",beginner:"\ud83d\udd30",bell:"\ud83d\udd14",bellhop_bell:"\ud83d\udece",bento:"\ud83c\udf71",biking_man:"\ud83d\udeb4",bike:"\ud83d\udeb2",biking_woman:"\ud83d\udeb4&zwj;\u2640\ufe0f",bikini:"\ud83d\udc59",biohazard:"\u2623\ufe0f",bird:"\ud83d\udc26",birthday:"\ud83c\udf82",black_circle:"\u26ab\ufe0f",black_flag:"\ud83c\udff4",black_heart:"\ud83d\udda4",black_joker:"\ud83c\udccf",black_large_square:"\u2b1b\ufe0f",black_medium_small_square:"\u25fe\ufe0f",black_medium_square:"\u25fc\ufe0f",black_nib:"\u2712\ufe0f",black_small_square:"\u25aa\ufe0f",black_square_button:"\ud83d\udd32",blonde_man:"\ud83d\udc71",blonde_woman:"\ud83d\udc71&zwj;\u2640\ufe0f",blossom:"\ud83c\udf3c",blowfish:"\ud83d\udc21",blue_book:"\ud83d\udcd8",blue_car:"\ud83d\ude99",blue_heart:"\ud83d\udc99",blush:"\ud83d\ude0a",boar:"\ud83d\udc17",boat:"\u26f5\ufe0f",bomb:"\ud83d\udca3",book:"\ud83d\udcd6",bookmark:"\ud83d\udd16",bookmark_tabs:"\ud83d\udcd1",books:"\ud83d\udcda",boom:"\ud83d\udca5",boot:"\ud83d\udc62",bouquet:"\ud83d\udc90",bowing_man:"\ud83d\ude47",bow_and_arrow:"\ud83c\udff9",bowing_woman:"\ud83d\ude47&zwj;\u2640\ufe0f",bowling:"\ud83c\udfb3",boxing_glove:"\ud83e\udd4a",boy:"\ud83d\udc66",bread:"\ud83c\udf5e",bride_with_veil:"\ud83d\udc70",bridge_at_night:"\ud83c\udf09",briefcase:"\ud83d\udcbc",broken_heart:"\ud83d\udc94",bug:"\ud83d\udc1b",building_construction:"\ud83c\udfd7",bulb:"\ud83d\udca1",bullettrain_front:"\ud83d\ude85",bullettrain_side:"\ud83d\ude84",burrito:"\ud83c\udf2f",bus:"\ud83d\ude8c",business_suit_levitating:"\ud83d\udd74",busstop:"\ud83d\ude8f",bust_in_silhouette:"\ud83d\udc64",busts_in_silhouette:"\ud83d\udc65",butterfly:"\ud83e\udd8b",cactus:"\ud83c\udf35",cake:"\ud83c\udf70",calendar:"\ud83d\udcc6",call_me_hand:"\ud83e\udd19",calling:"\ud83d\udcf2",camel:"\ud83d\udc2b",camera:"\ud83d\udcf7",camera_flash:"\ud83d\udcf8",camping:"\ud83c\udfd5",cancer:"\u264b\ufe0f",candle:"\ud83d\udd6f",candy:"\ud83c\udf6c",canoe:"\ud83d\udef6",capital_abcd:"\ud83d\udd20",capricorn:"\u2651\ufe0f",car:"\ud83d\ude97",card_file_box:"\ud83d\uddc3",card_index:"\ud83d\udcc7",card_index_dividers:"\ud83d\uddc2",carousel_horse:"\ud83c\udfa0",carrot:"\ud83e\udd55",cat:"\ud83d\udc31",cat2:"\ud83d\udc08",cd:"\ud83d\udcbf",chains:"\u26d3",champagne:"\ud83c\udf7e",chart:"\ud83d\udcb9",chart_with_downwards_trend:"\ud83d\udcc9",chart_with_upwards_trend:"\ud83d\udcc8",checkered_flag:"\ud83c\udfc1",cheese:"\ud83e\uddc0",cherries:"\ud83c\udf52",cherry_blossom:"\ud83c\udf38",chestnut:"\ud83c\udf30",chicken:"\ud83d\udc14",children_crossing:"\ud83d\udeb8",chipmunk:"\ud83d\udc3f",chocolate_bar:"\ud83c\udf6b",christmas_tree:"\ud83c\udf84",church:"\u26ea\ufe0f",cinema:"\ud83c\udfa6",circus_tent:"\ud83c\udfaa",city_sunrise:"\ud83c\udf07",city_sunset:"\ud83c\udf06",cityscape:"\ud83c\udfd9",cl:"\ud83c\udd91",clamp:"\ud83d\udddc",clap:"\ud83d\udc4f",clapper:"\ud83c\udfac",classical_building:"\ud83c\udfdb",clinking_glasses:"\ud83e\udd42",clipboard:"\ud83d\udccb",clock1:"\ud83d\udd50",clock10:"\ud83d\udd59",clock1030:"\ud83d\udd65",clock11:"\ud83d\udd5a",clock1130:"\ud83d\udd66",clock12:"\ud83d\udd5b",clock1230:"\ud83d\udd67",clock130:"\ud83d\udd5c",clock2:"\ud83d\udd51",clock230:"\ud83d\udd5d",clock3:"\ud83d\udd52",clock330:"\ud83d\udd5e",clock4:"\ud83d\udd53",clock430:"\ud83d\udd5f",clock5:"\ud83d\udd54",clock530:"\ud83d\udd60",clock6:"\ud83d\udd55",clock630:"\ud83d\udd61",clock7:"\ud83d\udd56",clock730:"\ud83d\udd62",clock8:"\ud83d\udd57",clock830:"\ud83d\udd63",clock9:"\ud83d\udd58",clock930:"\ud83d\udd64",closed_book:"\ud83d\udcd5",closed_lock_with_key:"\ud83d\udd10",closed_umbrella:"\ud83c\udf02",cloud:"\u2601\ufe0f",cloud_with_lightning:"\ud83c\udf29",cloud_with_lightning_and_rain:"\u26c8",cloud_with_rain:"\ud83c\udf27",cloud_with_snow:"\ud83c\udf28",clown_face:"\ud83e\udd21",clubs:"\u2663\ufe0f",cocktail:"\ud83c\udf78",coffee:"\u2615\ufe0f",coffin:"\u26b0\ufe0f",cold_sweat:"\ud83d\ude30",comet:"\u2604\ufe0f",computer:"\ud83d\udcbb",computer_mouse:"\ud83d\uddb1",confetti_ball:"\ud83c\udf8a",confounded:"\ud83d\ude16",confused:"\ud83d\ude15",congratulations:"\u3297\ufe0f",construction:"\ud83d\udea7",construction_worker_man:"\ud83d\udc77",construction_worker_woman:"\ud83d\udc77&zwj;\u2640\ufe0f",control_knobs:"\ud83c\udf9b",convenience_store:"\ud83c\udfea",cookie:"\ud83c\udf6a",cool:"\ud83c\udd92",policeman:"\ud83d\udc6e",copyright:"\xa9\ufe0f",corn:"\ud83c\udf3d",couch_and_lamp:"\ud83d\udecb",couple:"\ud83d\udc6b",couple_with_heart_woman_man:"\ud83d\udc91",couple_with_heart_man_man:"\ud83d\udc68&zwj;\u2764\ufe0f&zwj;\ud83d\udc68",couple_with_heart_woman_woman:"\ud83d\udc69&zwj;\u2764\ufe0f&zwj;\ud83d\udc69",couplekiss_man_man:"\ud83d\udc68&zwj;\u2764\ufe0f&zwj;\ud83d\udc8b&zwj;\ud83d\udc68",couplekiss_man_woman:"\ud83d\udc8f",couplekiss_woman_woman:"\ud83d\udc69&zwj;\u2764\ufe0f&zwj;\ud83d\udc8b&zwj;\ud83d\udc69",cow:"\ud83d\udc2e",cow2:"\ud83d\udc04",cowboy_hat_face:"\ud83e\udd20",crab:"\ud83e\udd80",crayon:"\ud83d\udd8d",credit_card:"\ud83d\udcb3",crescent_moon:"\ud83c\udf19",cricket:"\ud83c\udfcf",crocodile:"\ud83d\udc0a",croissant:"\ud83e\udd50",crossed_fingers:"\ud83e\udd1e",crossed_flags:"\ud83c\udf8c",crossed_swords:"\u2694\ufe0f",crown:"\ud83d\udc51",cry:"\ud83d\ude22",crying_cat_face:"\ud83d\ude3f",crystal_ball:"\ud83d\udd2e",cucumber:"\ud83e\udd52",cupid:"\ud83d\udc98",curly_loop:"\u27b0",currency_exchange:"\ud83d\udcb1",curry:"\ud83c\udf5b",custard:"\ud83c\udf6e",customs:"\ud83d\udec3",cyclone:"\ud83c\udf00",dagger:"\ud83d\udde1",dancer:"\ud83d\udc83",dancing_women:"\ud83d\udc6f",dancing_men:"\ud83d\udc6f&zwj;\u2642\ufe0f",dango:"\ud83c\udf61",dark_sunglasses:"\ud83d\udd76",dart:"\ud83c\udfaf",dash:"\ud83d\udca8",date:"\ud83d\udcc5",deciduous_tree:"\ud83c\udf33",deer:"\ud83e\udd8c",department_store:"\ud83c\udfec",derelict_house:"\ud83c\udfda",desert:"\ud83c\udfdc",desert_island:"\ud83c\udfdd",desktop_computer:"\ud83d\udda5",male_detective:"\ud83d\udd75\ufe0f",diamond_shape_with_a_dot_inside:"\ud83d\udca0",diamonds:"\u2666\ufe0f",disappointed:"\ud83d\ude1e",disappointed_relieved:"\ud83d\ude25",dizzy:"\ud83d\udcab",dizzy_face:"\ud83d\ude35",do_not_litter:"\ud83d\udeaf",dog:"\ud83d\udc36",dog2:"\ud83d\udc15",dollar:"\ud83d\udcb5",dolls:"\ud83c\udf8e",dolphin:"\ud83d\udc2c",door:"\ud83d\udeaa",doughnut:"\ud83c\udf69",dove:"\ud83d\udd4a",dragon:"\ud83d\udc09",dragon_face:"\ud83d\udc32",dress:"\ud83d\udc57",dromedary_camel:"\ud83d\udc2a",drooling_face:"\ud83e\udd24",droplet:"\ud83d\udca7",drum:"\ud83e\udd41",duck:"\ud83e\udd86",dvd:"\ud83d\udcc0","e-mail":"\ud83d\udce7",eagle:"\ud83e\udd85",ear:"\ud83d\udc42",ear_of_rice:"\ud83c\udf3e",earth_africa:"\ud83c\udf0d",earth_americas:"\ud83c\udf0e",earth_asia:"\ud83c\udf0f",egg:"\ud83e\udd5a",eggplant:"\ud83c\udf46",eight_pointed_black_star:"\u2734\ufe0f",eight_spoked_asterisk:"\u2733\ufe0f",electric_plug:"\ud83d\udd0c",elephant:"\ud83d\udc18",email:"\u2709\ufe0f",end:"\ud83d\udd1a",envelope_with_arrow:"\ud83d\udce9",euro:"\ud83d\udcb6",european_castle:"\ud83c\udff0",european_post_office:"\ud83c\udfe4",evergreen_tree:"\ud83c\udf32",exclamation:"\u2757\ufe0f",expressionless:"\ud83d\ude11",eye:"\ud83d\udc41",eye_speech_bubble:"\ud83d\udc41&zwj;\ud83d\udde8",eyeglasses:"\ud83d\udc53",eyes:"\ud83d\udc40",face_with_head_bandage:"\ud83e\udd15",face_with_thermometer:"\ud83e\udd12",fist_oncoming:"\ud83d\udc4a",factory:"\ud83c\udfed",fallen_leaf:"\ud83c\udf42",family_man_woman_boy:"\ud83d\udc6a",family_man_boy:"\ud83d\udc68&zwj;\ud83d\udc66",family_man_boy_boy:"\ud83d\udc68&zwj;\ud83d\udc66&zwj;\ud83d\udc66",family_man_girl:"\ud83d\udc68&zwj;\ud83d\udc67",family_man_girl_boy:"\ud83d\udc68&zwj;\ud83d\udc67&zwj;\ud83d\udc66",family_man_girl_girl:"\ud83d\udc68&zwj;\ud83d\udc67&zwj;\ud83d\udc67",family_man_man_boy:"\ud83d\udc68&zwj;\ud83d\udc68&zwj;\ud83d\udc66",family_man_man_boy_boy:"\ud83d\udc68&zwj;\ud83d\udc68&zwj;\ud83d\udc66&zwj;\ud83d\udc66",family_man_man_girl:"\ud83d\udc68&zwj;\ud83d\udc68&zwj;\ud83d\udc67",family_man_man_girl_boy:"\ud83d\udc68&zwj;\ud83d\udc68&zwj;\ud83d\udc67&zwj;\ud83d\udc66",family_man_man_girl_girl:"\ud83d\udc68&zwj;\ud83d\udc68&zwj;\ud83d\udc67&zwj;\ud83d\udc67",family_man_woman_boy_boy:"\ud83d\udc68&zwj;\ud83d\udc69&zwj;\ud83d\udc66&zwj;\ud83d\udc66",family_man_woman_girl:"\ud83d\udc68&zwj;\ud83d\udc69&zwj;\ud83d\udc67",family_man_woman_girl_boy:"\ud83d\udc68&zwj;\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc66",family_man_woman_girl_girl:"\ud83d\udc68&zwj;\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc67",family_woman_boy:"\ud83d\udc69&zwj;\ud83d\udc66",family_woman_boy_boy:"\ud83d\udc69&zwj;\ud83d\udc66&zwj;\ud83d\udc66",family_woman_girl:"\ud83d\udc69&zwj;\ud83d\udc67",family_woman_girl_boy:"\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc66",family_woman_girl_girl:"\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc67",family_woman_woman_boy:"\ud83d\udc69&zwj;\ud83d\udc69&zwj;\ud83d\udc66",family_woman_woman_boy_boy:"\ud83d\udc69&zwj;\ud83d\udc69&zwj;\ud83d\udc66&zwj;\ud83d\udc66",family_woman_woman_girl:"\ud83d\udc69&zwj;\ud83d\udc69&zwj;\ud83d\udc67",family_woman_woman_girl_boy:"\ud83d\udc69&zwj;\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc66",family_woman_woman_girl_girl:"\ud83d\udc69&zwj;\ud83d\udc69&zwj;\ud83d\udc67&zwj;\ud83d\udc67",fast_forward:"\u23e9",fax:"\ud83d\udce0",fearful:"\ud83d\ude28",feet:"\ud83d\udc3e",female_detective:"\ud83d\udd75\ufe0f&zwj;\u2640\ufe0f",ferris_wheel:"\ud83c\udfa1",ferry:"\u26f4",field_hockey:"\ud83c\udfd1",file_cabinet:"\ud83d\uddc4",file_folder:"\ud83d\udcc1",film_projector:"\ud83d\udcfd",film_strip:"\ud83c\udf9e",fire:"\ud83d\udd25",fire_engine:"\ud83d\ude92",fireworks:"\ud83c\udf86",first_quarter_moon:"\ud83c\udf13",first_quarter_moon_with_face:"\ud83c\udf1b",fish:"\ud83d\udc1f",fish_cake:"\ud83c\udf65",fishing_pole_and_fish:"\ud83c\udfa3",fist_raised:"\u270a",fist_left:"\ud83e\udd1b",fist_right:"\ud83e\udd1c",flags:"\ud83c\udf8f",flashlight:"\ud83d\udd26",fleur_de_lis:"\u269c\ufe0f",flight_arrival:"\ud83d\udeec",flight_departure:"\ud83d\udeeb",floppy_disk:"\ud83d\udcbe",flower_playing_cards:"\ud83c\udfb4",flushed:"\ud83d\ude33",fog:"\ud83c\udf2b",foggy:"\ud83c\udf01",football:"\ud83c\udfc8",footprints:"\ud83d\udc63",fork_and_knife:"\ud83c\udf74",fountain:"\u26f2\ufe0f",fountain_pen:"\ud83d\udd8b",four_leaf_clover:"\ud83c\udf40",fox_face:"\ud83e\udd8a",framed_picture:"\ud83d\uddbc",free:"\ud83c\udd93",fried_egg:"\ud83c\udf73",fried_shrimp:"\ud83c\udf64",fries:"\ud83c\udf5f",frog:"\ud83d\udc38",frowning:"\ud83d\ude26",frowning_face:"\u2639\ufe0f",frowning_man:"\ud83d\ude4d&zwj;\u2642\ufe0f",frowning_woman:"\ud83d\ude4d",middle_finger:"\ud83d\udd95",fuelpump:"\u26fd\ufe0f",full_moon:"\ud83c\udf15",full_moon_with_face:"\ud83c\udf1d",funeral_urn:"\u26b1\ufe0f",game_die:"\ud83c\udfb2",gear:"\u2699\ufe0f",gem:"\ud83d\udc8e",gemini:"\u264a\ufe0f",ghost:"\ud83d\udc7b",gift:"\ud83c\udf81",gift_heart:"\ud83d\udc9d",girl:"\ud83d\udc67",globe_with_meridians:"\ud83c\udf10",goal_net:"\ud83e\udd45",goat:"\ud83d\udc10",golf:"\u26f3\ufe0f",golfing_man:"\ud83c\udfcc\ufe0f",golfing_woman:"\ud83c\udfcc\ufe0f&zwj;\u2640\ufe0f",gorilla:"\ud83e\udd8d",grapes:"\ud83c\udf47",green_apple:"\ud83c\udf4f",green_book:"\ud83d\udcd7",green_heart:"\ud83d\udc9a",green_salad:"\ud83e\udd57",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\ud83d\ude2c",grin:"\ud83d\ude01",grinning:"\ud83d\ude00",guardsman:"\ud83d\udc82",guardswoman:"\ud83d\udc82&zwj;\u2640\ufe0f",guitar:"\ud83c\udfb8",gun:"\ud83d\udd2b",haircut_woman:"\ud83d\udc87",haircut_man:"\ud83d\udc87&zwj;\u2642\ufe0f",hamburger:"\ud83c\udf54",hammer:"\ud83d\udd28",hammer_and_pick:"\u2692",hammer_and_wrench:"\ud83d\udee0",hamster:"\ud83d\udc39",hand:"\u270b",handbag:"\ud83d\udc5c",handshake:"\ud83e\udd1d",hankey:"\ud83d\udca9",hatched_chick:"\ud83d\udc25",hatching_chick:"\ud83d\udc23",headphones:"\ud83c\udfa7",hear_no_evil:"\ud83d\ude49",heart:"\u2764\ufe0f",heart_decoration:"\ud83d\udc9f",heart_eyes:"\ud83d\ude0d",heart_eyes_cat:"\ud83d\ude3b",heartbeat:"\ud83d\udc93",heartpulse:"\ud83d\udc97",hearts:"\u2665\ufe0f",heavy_check_mark:"\u2714\ufe0f",heavy_division_sign:"\u2797",heavy_dollar_sign:"\ud83d\udcb2",heavy_heart_exclamation:"\u2763\ufe0f",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\ufe0f",heavy_plus_sign:"\u2795",helicopter:"\ud83d\ude81",herb:"\ud83c\udf3f",hibiscus:"\ud83c\udf3a",high_brightness:"\ud83d\udd06",high_heel:"\ud83d\udc60",hocho:"\ud83d\udd2a",hole:"\ud83d\udd73",honey_pot:"\ud83c\udf6f",horse:"\ud83d\udc34",horse_racing:"\ud83c\udfc7",hospital:"\ud83c\udfe5",hot_pepper:"\ud83c\udf36",hotdog:"\ud83c\udf2d",hotel:"\ud83c\udfe8",hotsprings:"\u2668\ufe0f",hourglass:"\u231b\ufe0f",hourglass_flowing_sand:"\u23f3",house:"\ud83c\udfe0",house_with_garden:"\ud83c\udfe1",houses:"\ud83c\udfd8",hugs:"\ud83e\udd17",hushed:"\ud83d\ude2f",ice_cream:"\ud83c\udf68",ice_hockey:"\ud83c\udfd2",ice_skate:"\u26f8",icecream:"\ud83c\udf66",id:"\ud83c\udd94",ideograph_advantage:"\ud83c\ude50",imp:"\ud83d\udc7f",inbox_tray:"\ud83d\udce5",incoming_envelope:"\ud83d\udce8",tipping_hand_woman:"\ud83d\udc81",information_source:"\u2139\ufe0f",innocent:"\ud83d\ude07",interrobang:"\u2049\ufe0f",iphone:"\ud83d\udcf1",izakaya_lantern:"\ud83c\udfee",jack_o_lantern:"\ud83c\udf83",japan:"\ud83d\uddfe",japanese_castle:"\ud83c\udfef",japanese_goblin:"\ud83d\udc7a",japanese_ogre:"\ud83d\udc79",jeans:"\ud83d\udc56",joy:"\ud83d\ude02",joy_cat:"\ud83d\ude39",joystick:"\ud83d\udd79",kaaba:"\ud83d\udd4b",key:"\ud83d\udd11",keyboard:"\u2328\ufe0f",keycap_ten:"\ud83d\udd1f",kick_scooter:"\ud83d\udef4",kimono:"\ud83d\udc58",kiss:"\ud83d\udc8b",kissing:"\ud83d\ude17",kissing_cat:"\ud83d\ude3d",kissing_closed_eyes:"\ud83d\ude1a",kissing_heart:"\ud83d\ude18",kissing_smiling_eyes:"\ud83d\ude19",kiwi_fruit:"\ud83e\udd5d",koala:"\ud83d\udc28",koko:"\ud83c\ude01",label:"\ud83c\udff7",large_blue_circle:"\ud83d\udd35",large_blue_diamond:"\ud83d\udd37",large_orange_diamond:"\ud83d\udd36",last_quarter_moon:"\ud83c\udf17",last_quarter_moon_with_face:"\ud83c\udf1c",latin_cross:"\u271d\ufe0f",laughing:"\ud83d\ude06",leaves:"\ud83c\udf43",ledger:"\ud83d\udcd2",left_luggage:"\ud83d\udec5",left_right_arrow:"\u2194\ufe0f",leftwards_arrow_with_hook:"\u21a9\ufe0f",lemon:"\ud83c\udf4b",leo:"\u264c\ufe0f",leopard:"\ud83d\udc06",level_slider:"\ud83c\udf9a",libra:"\u264e\ufe0f",light_rail:"\ud83d\ude88",link:"\ud83d\udd17",lion:"\ud83e\udd81",lips:"\ud83d\udc44",lipstick:"\ud83d\udc84",lizard:"\ud83e\udd8e",lock:"\ud83d\udd12",lock_with_ink_pen:"\ud83d\udd0f",lollipop:"\ud83c\udf6d",loop:"\u27bf",loud_sound:"\ud83d\udd0a",loudspeaker:"\ud83d\udce2",love_hotel:"\ud83c\udfe9",love_letter:"\ud83d\udc8c",low_brightness:"\ud83d\udd05",lying_face:"\ud83e\udd25",m:"\u24c2\ufe0f",mag:"\ud83d\udd0d",mag_right:"\ud83d\udd0e",mahjong:"\ud83c\udc04\ufe0f",mailbox:"\ud83d\udceb",mailbox_closed:"\ud83d\udcea",mailbox_with_mail:"\ud83d\udcec",mailbox_with_no_mail:"\ud83d\udced",man:"\ud83d\udc68",man_artist:"\ud83d\udc68&zwj;\ud83c\udfa8",man_astronaut:"\ud83d\udc68&zwj;\ud83d\ude80",man_cartwheeling:"\ud83e\udd38&zwj;\u2642\ufe0f",man_cook:"\ud83d\udc68&zwj;\ud83c\udf73",man_dancing:"\ud83d\udd7a",man_facepalming:"\ud83e\udd26&zwj;\u2642\ufe0f",man_factory_worker:"\ud83d\udc68&zwj;\ud83c\udfed",man_farmer:"\ud83d\udc68&zwj;\ud83c\udf3e",man_firefighter:"\ud83d\udc68&zwj;\ud83d\ude92",man_health_worker:"\ud83d\udc68&zwj;\u2695\ufe0f",man_in_tuxedo:"\ud83e\udd35",man_judge:"\ud83d\udc68&zwj;\u2696\ufe0f",man_juggling:"\ud83e\udd39&zwj;\u2642\ufe0f",man_mechanic:"\ud83d\udc68&zwj;\ud83d\udd27",man_office_worker:"\ud83d\udc68&zwj;\ud83d\udcbc",man_pilot:"\ud83d\udc68&zwj;\u2708\ufe0f",man_playing_handball:"\ud83e\udd3e&zwj;\u2642\ufe0f",man_playing_water_polo:"\ud83e\udd3d&zwj;\u2642\ufe0f",man_scientist:"\ud83d\udc68&zwj;\ud83d\udd2c",man_shrugging:"\ud83e\udd37&zwj;\u2642\ufe0f",man_singer:"\ud83d\udc68&zwj;\ud83c\udfa4",man_student:"\ud83d\udc68&zwj;\ud83c\udf93",man_teacher:"\ud83d\udc68&zwj;\ud83c\udfeb",man_technologist:"\ud83d\udc68&zwj;\ud83d\udcbb",man_with_gua_pi_mao:"\ud83d\udc72",man_with_turban:"\ud83d\udc73",tangerine:"\ud83c\udf4a",mans_shoe:"\ud83d\udc5e",mantelpiece_clock:"\ud83d\udd70",maple_leaf:"\ud83c\udf41",martial_arts_uniform:"\ud83e\udd4b",mask:"\ud83d\ude37",massage_woman:"\ud83d\udc86",massage_man:"\ud83d\udc86&zwj;\u2642\ufe0f",meat_on_bone:"\ud83c\udf56",medal_military:"\ud83c\udf96",medal_sports:"\ud83c\udfc5",mega:"\ud83d\udce3",melon:"\ud83c\udf48",memo:"\ud83d\udcdd",men_wrestling:"\ud83e\udd3c&zwj;\u2642\ufe0f",menorah:"\ud83d\udd4e",mens:"\ud83d\udeb9",metal:"\ud83e\udd18",metro:"\ud83d\ude87",microphone:"\ud83c\udfa4",microscope:"\ud83d\udd2c",milk_glass:"\ud83e\udd5b",milky_way:"\ud83c\udf0c",minibus:"\ud83d\ude90",minidisc:"\ud83d\udcbd",mobile_phone_off:"\ud83d\udcf4",money_mouth_face:"\ud83e\udd11",money_with_wings:"\ud83d\udcb8",moneybag:"\ud83d\udcb0",monkey:"\ud83d\udc12",monkey_face:"\ud83d\udc35",monorail:"\ud83d\ude9d",moon:"\ud83c\udf14",mortar_board:"\ud83c\udf93",mosque:"\ud83d\udd4c",motor_boat:"\ud83d\udee5",motor_scooter:"\ud83d\udef5",motorcycle:"\ud83c\udfcd",motorway:"\ud83d\udee3",mount_fuji:"\ud83d\uddfb",mountain:"\u26f0",mountain_biking_man:"\ud83d\udeb5",mountain_biking_woman:"\ud83d\udeb5&zwj;\u2640\ufe0f",mountain_cableway:"\ud83d\udea0",mountain_railway:"\ud83d\ude9e",mountain_snow:"\ud83c\udfd4",mouse:"\ud83d\udc2d",mouse2:"\ud83d\udc01",movie_camera:"\ud83c\udfa5",moyai:"\ud83d\uddff",mrs_claus:"\ud83e\udd36",muscle:"\ud83d\udcaa",mushroom:"\ud83c\udf44",musical_keyboard:"\ud83c\udfb9",musical_note:"\ud83c\udfb5",musical_score:"\ud83c\udfbc",mute:"\ud83d\udd07",nail_care:"\ud83d\udc85",name_badge:"\ud83d\udcdb",national_park:"\ud83c\udfde",nauseated_face:"\ud83e\udd22",necktie:"\ud83d\udc54",negative_squared_cross_mark:"\u274e",nerd_face:"\ud83e\udd13",neutral_face:"\ud83d\ude10",new:"\ud83c\udd95",new_moon:"\ud83c\udf11",new_moon_with_face:"\ud83c\udf1a",newspaper:"\ud83d\udcf0",newspaper_roll:"\ud83d\uddde",next_track_button:"\u23ed",ng:"\ud83c\udd96",no_good_man:"\ud83d\ude45&zwj;\u2642\ufe0f",no_good_woman:"\ud83d\ude45",night_with_stars:"\ud83c\udf03",no_bell:"\ud83d\udd15",no_bicycles:"\ud83d\udeb3",no_entry:"\u26d4\ufe0f",no_entry_sign:"\ud83d\udeab",no_mobile_phones:"\ud83d\udcf5",no_mouth:"\ud83d\ude36",no_pedestrians:"\ud83d\udeb7",no_smoking:"\ud83d\udead","non-potable_water":"\ud83d\udeb1",nose:"\ud83d\udc43",notebook:"\ud83d\udcd3",notebook_with_decorative_cover:"\ud83d\udcd4",notes:"\ud83c\udfb6",nut_and_bolt:"\ud83d\udd29",o:"\u2b55\ufe0f",o2:"\ud83c\udd7e\ufe0f",ocean:"\ud83c\udf0a",octopus:"\ud83d\udc19",oden:"\ud83c\udf62",office:"\ud83c\udfe2",oil_drum:"\ud83d\udee2",ok:"\ud83c\udd97",ok_hand:"\ud83d\udc4c",ok_man:"\ud83d\ude46&zwj;\u2642\ufe0f",ok_woman:"\ud83d\ude46",old_key:"\ud83d\udddd",older_man:"\ud83d\udc74",older_woman:"\ud83d\udc75",om:"\ud83d\udd49",on:"\ud83d\udd1b",oncoming_automobile:"\ud83d\ude98",oncoming_bus:"\ud83d\ude8d",oncoming_police_car:"\ud83d\ude94",oncoming_taxi:"\ud83d\ude96",open_file_folder:"\ud83d\udcc2",open_hands:"\ud83d\udc50",open_mouth:"\ud83d\ude2e",open_umbrella:"\u2602\ufe0f",ophiuchus:"\u26ce",orange_book:"\ud83d\udcd9",orthodox_cross:"\u2626\ufe0f",outbox_tray:"\ud83d\udce4",owl:"\ud83e\udd89",ox:"\ud83d\udc02",package:"\ud83d\udce6",page_facing_up:"\ud83d\udcc4",page_with_curl:"\ud83d\udcc3",pager:"\ud83d\udcdf",paintbrush:"\ud83d\udd8c",palm_tree:"\ud83c\udf34",pancakes:"\ud83e\udd5e",panda_face:"\ud83d\udc3c",paperclip:"\ud83d\udcce",paperclips:"\ud83d\udd87",parasol_on_ground:"\u26f1",parking:"\ud83c\udd7f\ufe0f",part_alternation_mark:"\u303d\ufe0f",partly_sunny:"\u26c5\ufe0f",passenger_ship:"\ud83d\udef3",passport_control:"\ud83d\udec2",pause_button:"\u23f8",peace_symbol:"\u262e\ufe0f",peach:"\ud83c\udf51",peanuts:"\ud83e\udd5c",pear:"\ud83c\udf50",pen:"\ud83d\udd8a",pencil2:"\u270f\ufe0f",penguin:"\ud83d\udc27",pensive:"\ud83d\ude14",performing_arts:"\ud83c\udfad",persevere:"\ud83d\ude23",person_fencing:"\ud83e\udd3a",pouting_woman:"\ud83d\ude4e",phone:"\u260e\ufe0f",pick:"\u26cf",pig:"\ud83d\udc37",pig2:"\ud83d\udc16",pig_nose:"\ud83d\udc3d",pill:"\ud83d\udc8a",pineapple:"\ud83c\udf4d",ping_pong:"\ud83c\udfd3",pisces:"\u2653\ufe0f",pizza:"\ud83c\udf55",place_of_worship:"\ud83d\uded0",plate_with_cutlery:"\ud83c\udf7d",play_or_pause_button:"\u23ef",point_down:"\ud83d\udc47",point_left:"\ud83d\udc48",point_right:"\ud83d\udc49",point_up:"\u261d\ufe0f",point_up_2:"\ud83d\udc46",police_car:"\ud83d\ude93",policewoman:"\ud83d\udc6e&zwj;\u2640\ufe0f",poodle:"\ud83d\udc29",popcorn:"\ud83c\udf7f",post_office:"\ud83c\udfe3",postal_horn:"\ud83d\udcef",postbox:"\ud83d\udcee",potable_water:"\ud83d\udeb0",potato:"\ud83e\udd54",pouch:"\ud83d\udc5d",poultry_leg:"\ud83c\udf57",pound:"\ud83d\udcb7",rage:"\ud83d\ude21",pouting_cat:"\ud83d\ude3e",pouting_man:"\ud83d\ude4e&zwj;\u2642\ufe0f",pray:"\ud83d\ude4f",prayer_beads:"\ud83d\udcff",pregnant_woman:"\ud83e\udd30",previous_track_button:"\u23ee",prince:"\ud83e\udd34",princess:"\ud83d\udc78",printer:"\ud83d\udda8",purple_heart:"\ud83d\udc9c",purse:"\ud83d\udc5b",pushpin:"\ud83d\udccc",put_litter_in_its_place:"\ud83d\udeae",question:"\u2753",rabbit:"\ud83d\udc30",rabbit2:"\ud83d\udc07",racehorse:"\ud83d\udc0e",racing_car:"\ud83c\udfce",radio:"\ud83d\udcfb",radio_button:"\ud83d\udd18",radioactive:"\u2622\ufe0f",railway_car:"\ud83d\ude83",railway_track:"\ud83d\udee4",rainbow:"\ud83c\udf08",rainbow_flag:"\ud83c\udff3\ufe0f&zwj;\ud83c\udf08",raised_back_of_hand:"\ud83e\udd1a",raised_hand_with_fingers_splayed:"\ud83d\udd90",raised_hands:"\ud83d\ude4c",raising_hand_woman:"\ud83d\ude4b",raising_hand_man:"\ud83d\ude4b&zwj;\u2642\ufe0f",ram:"\ud83d\udc0f",ramen:"\ud83c\udf5c",rat:"\ud83d\udc00",record_button:"\u23fa",recycle:"\u267b\ufe0f",red_circle:"\ud83d\udd34",registered:"\xae\ufe0f",relaxed:"\u263a\ufe0f",relieved:"\ud83d\ude0c",reminder_ribbon:"\ud83c\udf97",repeat:"\ud83d\udd01",repeat_one:"\ud83d\udd02",rescue_worker_helmet:"\u26d1",restroom:"\ud83d\udebb",revolving_hearts:"\ud83d\udc9e",rewind:"\u23ea",rhinoceros:"\ud83e\udd8f",ribbon:"\ud83c\udf80",rice:"\ud83c\udf5a",rice_ball:"\ud83c\udf59",rice_cracker:"\ud83c\udf58",rice_scene:"\ud83c\udf91",right_anger_bubble:"\ud83d\uddef",ring:"\ud83d\udc8d",robot:"\ud83e\udd16",rocket:"\ud83d\ude80",rofl:"\ud83e\udd23",roll_eyes:"\ud83d\ude44",roller_coaster:"\ud83c\udfa2",rooster:"\ud83d\udc13",rose:"\ud83c\udf39",rosette:"\ud83c\udff5",rotating_light:"\ud83d\udea8",round_pushpin:"\ud83d\udccd",rowing_man:"\ud83d\udea3",rowing_woman:"\ud83d\udea3&zwj;\u2640\ufe0f",rugby_football:"\ud83c\udfc9",running_man:"\ud83c\udfc3",running_shirt_with_sash:"\ud83c\udfbd",running_woman:"\ud83c\udfc3&zwj;\u2640\ufe0f",sa:"\ud83c\ude02\ufe0f",sagittarius:"\u2650\ufe0f",sake:"\ud83c\udf76",sandal:"\ud83d\udc61",santa:"\ud83c\udf85",satellite:"\ud83d\udce1",saxophone:"\ud83c\udfb7",school:"\ud83c\udfeb",school_satchel:"\ud83c\udf92",scissors:"\u2702\ufe0f",scorpion:"\ud83e\udd82",scorpius:"\u264f\ufe0f",scream:"\ud83d\ude31",scream_cat:"\ud83d\ude40",scroll:"\ud83d\udcdc",seat:"\ud83d\udcba",secret:"\u3299\ufe0f",see_no_evil:"\ud83d\ude48",seedling:"\ud83c\udf31",selfie:"\ud83e\udd33",shallow_pan_of_food:"\ud83e\udd58",shamrock:"\u2618\ufe0f",shark:"\ud83e\udd88",shaved_ice:"\ud83c\udf67",sheep:"\ud83d\udc11",shell:"\ud83d\udc1a",shield:"\ud83d\udee1",shinto_shrine:"\u26e9",ship:"\ud83d\udea2",shirt:"\ud83d\udc55",shopping:"\ud83d\udecd",shopping_cart:"\ud83d\uded2",shower:"\ud83d\udebf",shrimp:"\ud83e\udd90",signal_strength:"\ud83d\udcf6",six_pointed_star:"\ud83d\udd2f",ski:"\ud83c\udfbf",skier:"\u26f7",skull:"\ud83d\udc80",skull_and_crossbones:"\u2620\ufe0f",sleeping:"\ud83d\ude34",sleeping_bed:"\ud83d\udecc",sleepy:"\ud83d\ude2a",slightly_frowning_face:"\ud83d\ude41",slightly_smiling_face:"\ud83d\ude42",slot_machine:"\ud83c\udfb0",small_airplane:"\ud83d\udee9",small_blue_diamond:"\ud83d\udd39",small_orange_diamond:"\ud83d\udd38",small_red_triangle:"\ud83d\udd3a",small_red_triangle_down:"\ud83d\udd3b",smile:"\ud83d\ude04",smile_cat:"\ud83d\ude38",smiley:"\ud83d\ude03",smiley_cat:"\ud83d\ude3a",smiling_imp:"\ud83d\ude08",smirk:"\ud83d\ude0f",smirk_cat:"\ud83d\ude3c",smoking:"\ud83d\udeac",snail:"\ud83d\udc0c",snake:"\ud83d\udc0d",sneezing_face:"\ud83e\udd27",snowboarder:"\ud83c\udfc2",snowflake:"\u2744\ufe0f",snowman:"\u26c4\ufe0f",snowman_with_snow:"\u2603\ufe0f",sob:"\ud83d\ude2d",soccer:"\u26bd\ufe0f",soon:"\ud83d\udd1c",sos:"\ud83c\udd98",sound:"\ud83d\udd09",space_invader:"\ud83d\udc7e",spades:"\u2660\ufe0f",spaghetti:"\ud83c\udf5d",sparkle:"\u2747\ufe0f",sparkler:"\ud83c\udf87",sparkles:"\u2728",sparkling_heart:"\ud83d\udc96",speak_no_evil:"\ud83d\ude4a",speaker:"\ud83d\udd08",speaking_head:"\ud83d\udde3",speech_balloon:"\ud83d\udcac",speedboat:"\ud83d\udea4",spider:"\ud83d\udd77",spider_web:"\ud83d\udd78",spiral_calendar:"\ud83d\uddd3",spiral_notepad:"\ud83d\uddd2",spoon:"\ud83e\udd44",squid:"\ud83e\udd91",stadium:"\ud83c\udfdf",star:"\u2b50\ufe0f",star2:"\ud83c\udf1f",star_and_crescent:"\u262a\ufe0f",star_of_david:"\u2721\ufe0f",stars:"\ud83c\udf20",station:"\ud83d\ude89",statue_of_liberty:"\ud83d\uddfd",steam_locomotive:"\ud83d\ude82",stew:"\ud83c\udf72",stop_button:"\u23f9",stop_sign:"\ud83d\uded1",stopwatch:"\u23f1",straight_ruler:"\ud83d\udccf",strawberry:"\ud83c\udf53",stuck_out_tongue:"\ud83d\ude1b",stuck_out_tongue_closed_eyes:"\ud83d\ude1d",stuck_out_tongue_winking_eye:"\ud83d\ude1c",studio_microphone:"\ud83c\udf99",stuffed_flatbread:"\ud83e\udd59",sun_behind_large_cloud:"\ud83c\udf25",sun_behind_rain_cloud:"\ud83c\udf26",sun_behind_small_cloud:"\ud83c\udf24",sun_with_face:"\ud83c\udf1e",sunflower:"\ud83c\udf3b",sunglasses:"\ud83d\ude0e",sunny:"\u2600\ufe0f",sunrise:"\ud83c\udf05",sunrise_over_mountains:"\ud83c\udf04",surfing_man:"\ud83c\udfc4",surfing_woman:"\ud83c\udfc4&zwj;\u2640\ufe0f",sushi:"\ud83c\udf63",suspension_railway:"\ud83d\ude9f",sweat:"\ud83d\ude13",sweat_drops:"\ud83d\udca6",sweat_smile:"\ud83d\ude05",sweet_potato:"\ud83c\udf60",swimming_man:"\ud83c\udfca",swimming_woman:"\ud83c\udfca&zwj;\u2640\ufe0f",symbols:"\ud83d\udd23",synagogue:"\ud83d\udd4d",syringe:"\ud83d\udc89",taco:"\ud83c\udf2e",tada:"\ud83c\udf89",tanabata_tree:"\ud83c\udf8b",taurus:"\u2649\ufe0f",taxi:"\ud83d\ude95",tea:"\ud83c\udf75",telephone_receiver:"\ud83d\udcde",telescope:"\ud83d\udd2d",tennis:"\ud83c\udfbe",tent:"\u26fa\ufe0f",thermometer:"\ud83c\udf21",thinking:"\ud83e\udd14",thought_balloon:"\ud83d\udcad",ticket:"\ud83c\udfab",tickets:"\ud83c\udf9f",tiger:"\ud83d\udc2f",tiger2:"\ud83d\udc05",timer_clock:"\u23f2",tipping_hand_man:"\ud83d\udc81&zwj;\u2642\ufe0f",tired_face:"\ud83d\ude2b",tm:"\u2122\ufe0f",toilet:"\ud83d\udebd",tokyo_tower:"\ud83d\uddfc",tomato:"\ud83c\udf45",tongue:"\ud83d\udc45",top:"\ud83d\udd1d",tophat:"\ud83c\udfa9",tornado:"\ud83c\udf2a",trackball:"\ud83d\uddb2",tractor:"\ud83d\ude9c",traffic_light:"\ud83d\udea5",train:"\ud83d\ude8b",train2:"\ud83d\ude86",tram:"\ud83d\ude8a",triangular_flag_on_post:"\ud83d\udea9",triangular_ruler:"\ud83d\udcd0",trident:"\ud83d\udd31",triumph:"\ud83d\ude24",trolleybus:"\ud83d\ude8e",trophy:"\ud83c\udfc6",tropical_drink:"\ud83c\udf79",tropical_fish:"\ud83d\udc20",truck:"\ud83d\ude9a",trumpet:"\ud83c\udfba",tulip:"\ud83c\udf37",tumbler_glass:"\ud83e\udd43",turkey:"\ud83e\udd83",turtle:"\ud83d\udc22",tv:"\ud83d\udcfa",twisted_rightwards_arrows:"\ud83d\udd00",two_hearts:"\ud83d\udc95",two_men_holding_hands:"\ud83d\udc6c",two_women_holding_hands:"\ud83d\udc6d",u5272:"\ud83c\ude39",u5408:"\ud83c\ude34",u55b6:"\ud83c\ude3a",u6307:"\ud83c\ude2f\ufe0f",u6708:"\ud83c\ude37\ufe0f",u6709:"\ud83c\ude36",u6e80:"\ud83c\ude35",u7121:"\ud83c\ude1a\ufe0f",u7533:"\ud83c\ude38",u7981:"\ud83c\ude32",u7a7a:"\ud83c\ude33",umbrella:"\u2614\ufe0f",unamused:"\ud83d\ude12",underage:"\ud83d\udd1e",unicorn:"\ud83e\udd84",unlock:"\ud83d\udd13",up:"\ud83c\udd99",upside_down_face:"\ud83d\ude43",v:"\u270c\ufe0f",vertical_traffic_light:"\ud83d\udea6",vhs:"\ud83d\udcfc",vibration_mode:"\ud83d\udcf3",video_camera:"\ud83d\udcf9",video_game:"\ud83c\udfae",violin:"\ud83c\udfbb",virgo:"\u264d\ufe0f",volcano:"\ud83c\udf0b",volleyball:"\ud83c\udfd0",vs:"\ud83c\udd9a",vulcan_salute:"\ud83d\udd96",walking_man:"\ud83d\udeb6",walking_woman:"\ud83d\udeb6&zwj;\u2640\ufe0f",waning_crescent_moon:"\ud83c\udf18",waning_gibbous_moon:"\ud83c\udf16",warning:"\u26a0\ufe0f",wastebasket:"\ud83d\uddd1",watch:"\u231a\ufe0f",water_buffalo:"\ud83d\udc03",watermelon:"\ud83c\udf49",wave:"\ud83d\udc4b",wavy_dash:"\u3030\ufe0f",waxing_crescent_moon:"\ud83c\udf12",wc:"\ud83d\udebe",weary:"\ud83d\ude29",wedding:"\ud83d\udc92",weight_lifting_man:"\ud83c\udfcb\ufe0f",weight_lifting_woman:"\ud83c\udfcb\ufe0f&zwj;\u2640\ufe0f",whale:"\ud83d\udc33",whale2:"\ud83d\udc0b",wheel_of_dharma:"\u2638\ufe0f",wheelchair:"\u267f\ufe0f",white_check_mark:"\u2705",white_circle:"\u26aa\ufe0f",white_flag:"\ud83c\udff3\ufe0f",white_flower:"\ud83d\udcae",white_large_square:"\u2b1c\ufe0f",white_medium_small_square:"\u25fd\ufe0f",white_medium_square:"\u25fb\ufe0f",white_small_square:"\u25ab\ufe0f",white_square_button:"\ud83d\udd33",wilted_flower:"\ud83e\udd40",wind_chime:"\ud83c\udf90",wind_face:"\ud83c\udf2c",wine_glass:"\ud83c\udf77",wink:"\ud83d\ude09",wolf:"\ud83d\udc3a",woman:"\ud83d\udc69",woman_artist:"\ud83d\udc69&zwj;\ud83c\udfa8",woman_astronaut:"\ud83d\udc69&zwj;\ud83d\ude80",woman_cartwheeling:"\ud83e\udd38&zwj;\u2640\ufe0f",woman_cook:"\ud83d\udc69&zwj;\ud83c\udf73",woman_facepalming:"\ud83e\udd26&zwj;\u2640\ufe0f",woman_factory_worker:"\ud83d\udc69&zwj;\ud83c\udfed",woman_farmer:"\ud83d\udc69&zwj;\ud83c\udf3e",woman_firefighter:"\ud83d\udc69&zwj;\ud83d\ude92",woman_health_worker:"\ud83d\udc69&zwj;\u2695\ufe0f",woman_judge:"\ud83d\udc69&zwj;\u2696\ufe0f",woman_juggling:"\ud83e\udd39&zwj;\u2640\ufe0f",woman_mechanic:"\ud83d\udc69&zwj;\ud83d\udd27",woman_office_worker:"\ud83d\udc69&zwj;\ud83d\udcbc",woman_pilot:"\ud83d\udc69&zwj;\u2708\ufe0f",woman_playing_handball:"\ud83e\udd3e&zwj;\u2640\ufe0f",woman_playing_water_polo:"\ud83e\udd3d&zwj;\u2640\ufe0f",woman_scientist:"\ud83d\udc69&zwj;\ud83d\udd2c",woman_shrugging:"\ud83e\udd37&zwj;\u2640\ufe0f",woman_singer:"\ud83d\udc69&zwj;\ud83c\udfa4",woman_student:"\ud83d\udc69&zwj;\ud83c\udf93",woman_teacher:"\ud83d\udc69&zwj;\ud83c\udfeb",woman_technologist:"\ud83d\udc69&zwj;\ud83d\udcbb",woman_with_turban:"\ud83d\udc73&zwj;\u2640\ufe0f",womans_clothes:"\ud83d\udc5a",womans_hat:"\ud83d\udc52",women_wrestling:"\ud83e\udd3c&zwj;\u2640\ufe0f",womens:"\ud83d\udeba",world_map:"\ud83d\uddfa",worried:"\ud83d\ude1f",wrench:"\ud83d\udd27",writing_hand:"\u270d\ufe0f",x:"\u274c",yellow_heart:"\ud83d\udc9b",yen:"\ud83d\udcb4",yin_yang:"\u262f\ufe0f",yum:"\ud83d\ude0b",zap:"\u26a1\ufe0f",zipper_mouth_face:"\ud83e\udd10",zzz:"\ud83d\udca4",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},a.Converter=function(e){"use strict";var t={},n=[],r=[],i={},o=l,h={parsed:{},raw:"",format:""};function d(e,t){if(t=t||null,a.helper.isString(e)){if(t=e=a.helper.stdExtName(e),a.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,t){"function"==typeof e&&(e=e(new a.Converter));a.helper.isArray(e)||(e=[e]);var i=p(e,t);if(!i.valid)throw Error(i.error);for(var o=0;o<e.length;++o)switch(e[o].type){case"lang":n.push(e[o]);break;case"output":r.push(e[o]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(a.extensions[e],e);if(a.helper.isUndefined(s[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=s[e]}"function"==typeof e&&(e=e()),a.helper.isArray(e)||(e=[e]);var i=p(e,t);if(!i.valid)throw Error(i.error);for(var o=0;o<e.length;++o){switch(e[o].type){case"lang":n.push(e[o]);break;case"output":r.push(e[o])}if(e[o].hasOwnProperty("listeners"))for(var c in e[o].listeners)e[o].listeners.hasOwnProperty(c)&&f(c,e[o].listeners[c])}}function f(e,t){if(!a.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof e+" given");if("function"!=typeof t)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof t+" given");i.hasOwnProperty(e)||(i[e]=[]),i[e].push(t)}!function(){for(var n in e=e||{},c)c.hasOwnProperty(n)&&(t[n]=c[n]);if("object"!=typeof e)throw Error("Converter expects the passed parameter to be an object, but "+typeof e+" was passed instead.");for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.extensions&&a.helper.forEach(t.extensions,d)}(),this._dispatch=function(e,t,n,r){if(i.hasOwnProperty(e))for(var a=0;a<i[e].length;++a){var o=i[e][a](e,t,this,n,r);o&&void 0!==o&&(t=o)}return t},this.listen=function(e,t){return f(e,t),this},this.makeHtml=function(e){if(!e)return e;var i={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:n,outputModifiers:r,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return e=(e=(e=(e=(e=e.replace(/\xa8/g,"\xa8T")).replace(/\$/g,"\xa8D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),t.smartIndentationFix&&(e=function(e){var t=e.match(/^\s*/)[0].length,n=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(n,"")}(e)),e="\n\n"+e+"\n\n",e=(e=a.subParser("detab")(e,t,i)).replace(/^[ \t]+$/gm,""),a.helper.forEach(n,(function(n){e=a.subParser("runExtension")(n,e,t,i)})),e=a.subParser("metadata")(e,t,i),e=a.subParser("hashPreCodeTags")(e,t,i),e=a.subParser("githubCodeBlocks")(e,t,i),e=a.subParser("hashHTMLBlocks")(e,t,i),e=a.subParser("hashCodeTags")(e,t,i),e=a.subParser("stripLinkDefinitions")(e,t,i),e=a.subParser("blockGamut")(e,t,i),e=a.subParser("unhashHTMLSpans")(e,t,i),e=(e=(e=a.subParser("unescapeSpecialChars")(e,t,i)).replace(/\xa8D/g,"$$")).replace(/\xa8T/g,"\xa8"),e=a.subParser("completeHTMLDocument")(e,t,i),a.helper.forEach(r,(function(n){e=a.subParser("runExtension")(n,e,t,i)})),h=i.metadata,e},this.makeMarkdown=this.makeMd=function(e,t){if(e=(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">\xa8NBSP;<"),!t){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");t=window.document}var n=t.createElement("div");n.innerHTML=e;var r={preList:function(e){for(var t=e.querySelectorAll("pre"),n=[],r=0;r<t.length;++r)if(1===t[r].childElementCount&&"code"===t[r].firstChild.tagName.toLowerCase()){var i=t[r].firstChild.innerHTML.trim(),o=t[r].firstChild.getAttribute("data-language")||"";if(""===o)for(var s=t[r].firstChild.className.split(" "),c=0;c<s.length;++c){var l=s[c].match(/^language-(.+)$/);if(null!==l){o=l[1];break}}i=a.helper.unescapeHTMLEntities(i),n.push(i),t[r].outerHTML='<precode language="'+o+'" precodenum="'+r.toString()+'"></precode>'}else n.push(t[r].innerHTML),t[r].innerHTML="",t[r].setAttribute("prenum",r.toString());return n}(n)};!function e(t){for(var n=0;n<t.childNodes.length;++n){var r=t.childNodes[n];3===r.nodeType?/\S/.test(r.nodeValue)||/^[ ]+$/.test(r.nodeValue)?(r.nodeValue=r.nodeValue.split("\n").join(" "),r.nodeValue=r.nodeValue.replace(/(\s)+/g,"$1")):(t.removeChild(r),--n):1===r.nodeType&&e(r)}}(n);for(var i=n.childNodes,o="",s=0;s<i.length;s++)o+=a.subParser("makeMarkdown.node")(i[s],r);return o},this.setOption=function(e,n){t[e]=n},this.getOption=function(e){return t[e]},this.getOptions=function(){return t},this.addExtension=function(e,t){d(e,t=t||null)},this.useExtension=function(e){d(e)},this.setFlavor=function(e){if(!u.hasOwnProperty(e))throw Error(e+" flavor was not found");var n=u[e];for(var r in o=e,n)n.hasOwnProperty(r)&&(t[r]=n[r])},this.getFlavor=function(){return o},this.removeExtension=function(e){a.helper.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t){for(var i=e[t],o=0;o<n.length;++o)n[o]===i&&n.splice(o,1);for(var s=0;s<r.length;++s)r[s]===i&&r.splice(s,1)}},this.getAllExtensions=function(){return{language:n,output:r}},this.getMetadata=function(e){return e?h.raw:h.parsed},this.getMetadataFormat=function(){return h.format},this._setMetadataPair=function(e,t){h.parsed[e]=t},this._setMetadataFormat=function(e){h.format=e},this._setMetadataRaw=function(e){h.raw=e}},a.subParser("anchors",(function(e,t,n){"use strict";var r=function(e,r,i,o,s,c,l){if(a.helper.isUndefined(l)&&(l=""),i=i.toLowerCase(),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)o="";else if(!o){if(i||(i=r.toLowerCase().replace(/ ?\n/g," ")),o="#"+i,a.helper.isUndefined(n.gUrls[i]))return e;o=n.gUrls[i],a.helper.isUndefined(n.gTitles[i])||(l=n.gTitles[i])}var u='<a href="'+(o=o.replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback))+'"';return""!==l&&null!==l&&(u+=' title="'+(l=(l=l.replace(/"/g,"&quot;")).replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback))+'"'),t.openLinksInNewWindow&&!/^#/.test(o)&&(u+=' rel="noopener noreferrer" target="\xa8E95Eblank"'),u+=">"+r+"</a>"};return e=(e=(e=(e=(e=n.converter._dispatch("anchors.before",e,t,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,r)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,r)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,r)).replace(/\[([^\[\]]+)]()()()()()/g,r),t.ghMentions&&(e=e.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,(function(e,n,r,i,o){if("\\"===r)return n+i;if(!a.helper.isString(t.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var s=t.ghMentionsLink.replace(/\{u}/g,o),c="";return t.openLinksInNewWindow&&(c=' rel="noopener noreferrer" target="\xa8E95Eblank"'),n+'<a href="'+s+'"'+c+">"+i+"</a>"}))),e=n.converter._dispatch("anchors.after",e,t,n)}));var f=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,g=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,m=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,v=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,b=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,y=function(e){"use strict";return function(t,n,r,i,o,s,c){var l=r=r.replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback),u="",p="",h=n||"",d=c||"";return/^www\./i.test(r)&&(r=r.replace(/^www\./i,"http://www.")),e.excludeTrailingPunctuationFromURLs&&s&&(u=s),e.openLinksInNewWindow&&(p=' rel="noopener noreferrer" target="\xa8E95Eblank"'),h+'<a href="'+r+'"'+p+">"+l+"</a>"+u+d}},x=function(e,t){"use strict";return function(n,r,i){var o="mailto:";return r=r||"",i=a.subParser("unescapeSpecialChars")(i,e,t),e.encodeEmails?(o=a.helper.encodeEmailAddress(o+i),i=a.helper.encodeEmailAddress(i)):o+=i,r+'<a href="'+o+'">'+i+"</a>"}};a.subParser("autoLinks",(function(e,t,n){"use strict";return e=(e=(e=n.converter._dispatch("autoLinks.before",e,t,n)).replace(m,y(t))).replace(b,x(t,n)),e=n.converter._dispatch("autoLinks.after",e,t,n)})),a.subParser("simplifiedAutoLinks",(function(e,t,n){"use strict";return t.simplifiedAutoLink?(e=n.converter._dispatch("simplifiedAutoLinks.before",e,t,n),e=(e=t.excludeTrailingPunctuationFromURLs?e.replace(g,y(t)):e.replace(f,y(t))).replace(v,x(t,n)),e=n.converter._dispatch("simplifiedAutoLinks.after",e,t,n)):e})),a.subParser("blockGamut",(function(e,t,n){"use strict";return e=n.converter._dispatch("blockGamut.before",e,t,n),e=a.subParser("blockQuotes")(e,t,n),e=a.subParser("headers")(e,t,n),e=a.subParser("horizontalRule")(e,t,n),e=a.subParser("lists")(e,t,n),e=a.subParser("codeBlocks")(e,t,n),e=a.subParser("tables")(e,t,n),e=a.subParser("hashHTMLBlocks")(e,t,n),e=a.subParser("paragraphs")(e,t,n),e=n.converter._dispatch("blockGamut.after",e,t,n)})),a.subParser("blockQuotes",(function(e,t,n){"use strict";e=n.converter._dispatch("blockQuotes.before",e,t,n),e+="\n\n";var r=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return t.splitAdjacentBlockquotes&&(r=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),e=e.replace(r,(function(e){return e=(e=(e=e.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/\xa80/g,"")).replace(/^[ \t]+$/gm,""),e=a.subParser("githubCodeBlocks")(e,t,n),e=(e=(e=a.subParser("blockGamut")(e,t,n)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var n=t;return n=(n=n.replace(/^  /gm,"\xa80")).replace(/\xa80/g,"")})),a.subParser("hashBlock")("<blockquote>\n"+e+"\n</blockquote>",t,n)})),e=n.converter._dispatch("blockQuotes.after",e,t,n)})),a.subParser("codeBlocks",(function(e,t,n){"use strict";e=n.converter._dispatch("codeBlocks.before",e,t,n);return e=(e=(e+="\xa80").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=\xa80))/g,(function(e,r,i){var o=r,s=i,c="\n";return o=a.subParser("outdent")(o,t,n),o=a.subParser("encodeCode")(o,t,n),o=(o=(o=a.subParser("detab")(o,t,n)).replace(/^\n+/g,"")).replace(/\n+$/g,""),t.omitExtraWLInCodeBlocks&&(c=""),o="<pre><code>"+o+c+"</code></pre>",a.subParser("hashBlock")(o,t,n)+s}))).replace(/\xa80/,""),e=n.converter._dispatch("codeBlocks.after",e,t,n)})),a.subParser("codeSpans",(function(e,t,n){"use strict";return void 0===(e=n.converter._dispatch("codeSpans.before",e,t,n))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(e,r,i,o){var s=o;return s=(s=s.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),s=r+"<code>"+(s=a.subParser("encodeCode")(s,t,n))+"</code>",s=a.subParser("hashHTMLSpans")(s,t,n)})),e=n.converter._dispatch("codeSpans.after",e,t,n)})),a.subParser("completeHTMLDocument",(function(e,t,n){"use strict";if(!t.completeHTMLDocument)return e;e=n.converter._dispatch("completeHTMLDocument.before",e,t,n);var r="html",i="<!DOCTYPE HTML>\n",a="",o='<meta charset="utf-8">\n',s="",c="";for(var l in void 0!==n.metadata.parsed.doctype&&(i="<!DOCTYPE "+n.metadata.parsed.doctype+">\n","html"!==(r=n.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==r||(o='<meta charset="utf-8">')),n.metadata.parsed)if(n.metadata.parsed.hasOwnProperty(l))switch(l.toLowerCase()){case"doctype":break;case"title":a="<title>"+n.metadata.parsed.title+"</title>\n";break;case"charset":o="html"===r||"html5"===r?'<meta charset="'+n.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+n.metadata.parsed.charset+'">\n';break;case"language":case"lang":s=' lang="'+n.metadata.parsed[l]+'"',c+='<meta name="'+l+'" content="'+n.metadata.parsed[l]+'">\n';break;default:c+='<meta name="'+l+'" content="'+n.metadata.parsed[l]+'">\n'}return e=i+"<html"+s+">\n<head>\n"+a+o+c+"</head>\n<body>\n"+e.trim()+"\n</body>\n</html>",e=n.converter._dispatch("completeHTMLDocument.after",e,t,n)})),a.subParser("detab",(function(e,t,n){"use strict";return e=(e=(e=(e=(e=(e=n.converter._dispatch("detab.before",e,t,n)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"\xa8A\xa8B")).replace(/\xa8B(.+?)\xa8A/g,(function(e,t){for(var n=t,r=4-n.length%4,i=0;i<r;i++)n+=" ";return n}))).replace(/\xa8A/g,"    ")).replace(/\xa8B/g,""),e=n.converter._dispatch("detab.after",e,t,n)})),a.subParser("ellipsis",(function(e,t,n){"use strict";return t.ellipsis?(e=(e=n.converter._dispatch("ellipsis.before",e,t,n)).replace(/\.\.\./g,"\u2026"),e=n.converter._dispatch("ellipsis.after",e,t,n)):e})),a.subParser("emoji",(function(e,t,n){"use strict";if(!t.emoji)return e;return e=(e=n.converter._dispatch("emoji.before",e,t,n)).replace(/:([\S]+?):/g,(function(e,t){return a.helper.emojis.hasOwnProperty(t)?a.helper.emojis[t]:e})),e=n.converter._dispatch("emoji.after",e,t,n)})),a.subParser("encodeAmpsAndAngles",(function(e,t,n){"use strict";return e=(e=(e=(e=(e=n.converter._dispatch("encodeAmpsAndAngles.before",e,t,n)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e=n.converter._dispatch("encodeAmpsAndAngles.after",e,t,n)})),a.subParser("encodeBackslashEscapes",(function(e,t,n){"use strict";return e=(e=(e=n.converter._dispatch("encodeBackslashEscapes.before",e,t,n)).replace(/\\(\\)/g,a.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,a.helper.escapeCharactersCallback),e=n.converter._dispatch("encodeBackslashEscapes.after",e,t,n)})),a.subParser("encodeCode",(function(e,t,n){"use strict";return e=(e=n.converter._dispatch("encodeCode.before",e,t,n)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,a.helper.escapeCharactersCallback),e=n.converter._dispatch("encodeCode.after",e,t,n)})),a.subParser("escapeSpecialCharsWithinTagAttributes",(function(e,t,n){"use strict";return e=(e=(e=n.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",e,t,n)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,(function(e){return e.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,a.helper.escapeCharactersCallback)}))).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,(function(e){return e.replace(/([\\`*_~=|])/g,a.helper.escapeCharactersCallback)})),e=n.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",e,t,n)})),a.subParser("githubCodeBlocks",(function(e,t,n){"use strict";return t.ghCodeBlocks?(e=n.converter._dispatch("githubCodeBlocks.before",e,t,n),e=(e=(e+="\xa80").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,(function(e,r,i,o){var s=t.omitExtraWLInCodeBlocks?"":"\n";return o=a.subParser("encodeCode")(o,t,n),o="<pre><code"+(i?' class="'+i+" language-"+i+'"':"")+">"+(o=(o=(o=a.subParser("detab")(o,t,n)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+s+"</code></pre>",o=a.subParser("hashBlock")(o,t,n),"\n\n\xa8G"+(n.ghCodeBlocks.push({text:e,codeblock:o})-1)+"G\n\n"}))).replace(/\xa80/,""),n.converter._dispatch("githubCodeBlocks.after",e,t,n)):e})),a.subParser("hashBlock",(function(e,t,n){"use strict";return e=(e=n.converter._dispatch("hashBlock.before",e,t,n)).replace(/(^\n+|\n+$)/g,""),e="\n\n\xa8K"+(n.gHtmlBlocks.push(e)-1)+"K\n\n",e=n.converter._dispatch("hashBlock.after",e,t,n)})),a.subParser("hashCodeTags",(function(e,t,n){"use strict";e=n.converter._dispatch("hashCodeTags.before",e,t,n);return e=a.helper.replaceRecursiveRegExp(e,(function(e,r,i,o){var s=i+a.subParser("encodeCode")(r,t,n)+o;return"\xa8C"+(n.gHtmlSpans.push(s)-1)+"C"}),"<code\\b[^>]*>","</code>","gim"),e=n.converter._dispatch("hashCodeTags.after",e,t,n)})),a.subParser("hashElement",(function(e,t,n){"use strict";return function(e,t){var r=t;return r=(r=(r=r.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),r="\n\n\xa8K"+(n.gHtmlBlocks.push(r)-1)+"K\n\n"}})),a.subParser("hashHTMLBlocks",(function(e,t,n){"use strict";e=n.converter._dispatch("hashHTMLBlocks.before",e,t,n);var r=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],i=function(e,t,r,i){var a=e;return-1!==r.search(/\bmarkdown\b/)&&(a=r+n.converter.makeHtml(t)+i),"\n\n\xa8K"+(n.gHtmlBlocks.push(a)-1)+"K\n\n"};t.backslashEscapesHTMLTags&&(e=e.replace(/\\<(\/?[^>]+?)>/g,(function(e,t){return"&lt;"+t+"&gt;"})));for(var o=0;o<r.length;++o)for(var s,c=new RegExp("^ {0,3}(<"+r[o]+"\\b[^>]*>)","im"),l="<"+r[o]+"\\b[^>]*>",u="</"+r[o]+">";-1!==(s=a.helper.regexIndexOf(e,c));){var p=a.helper.splitAtIndex(e,s),h=a.helper.replaceRecursiveRegExp(p[1],i,l,u,"im");if(h===p[1])break;e=p[0].concat(h)}return e=e.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,a.subParser("hashElement")(e,t,n)),e=(e=a.helper.replaceRecursiveRegExp(e,(function(e){return"\n\n\xa8K"+(n.gHtmlBlocks.push(e)-1)+"K\n\n"}),"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,a.subParser("hashElement")(e,t,n)),e=n.converter._dispatch("hashHTMLBlocks.after",e,t,n)})),a.subParser("hashHTMLSpans",(function(e,t,n){"use strict";function r(e){return"\xa8C"+(n.gHtmlSpans.push(e)-1)+"C"}return e=(e=(e=(e=(e=n.converter._dispatch("hashHTMLSpans.before",e,t,n)).replace(/<[^>]+?\/>/gi,(function(e){return r(e)}))).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,(function(e){return r(e)}))).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,(function(e){return r(e)}))).replace(/<[^>]+?>/gi,(function(e){return r(e)})),e=n.converter._dispatch("hashHTMLSpans.after",e,t,n)})),a.subParser("unhashHTMLSpans",(function(e,t,n){"use strict";e=n.converter._dispatch("unhashHTMLSpans.before",e,t,n);for(var r=0;r<n.gHtmlSpans.length;++r){for(var i=n.gHtmlSpans[r],a=0;/\xa8C(\d+)C/.test(i);){var o=RegExp.$1;if(i=i.replace("\xa8C"+o+"C",n.gHtmlSpans[o]),10===a){console.error("maximum nesting of 10 spans reached!!!");break}++a}e=e.replace("\xa8C"+r+"C",i)}return e=n.converter._dispatch("unhashHTMLSpans.after",e,t,n)})),a.subParser("hashPreCodeTags",(function(e,t,n){"use strict";e=n.converter._dispatch("hashPreCodeTags.before",e,t,n);return e=a.helper.replaceRecursiveRegExp(e,(function(e,r,i,o){var s=i+a.subParser("encodeCode")(r,t,n)+o;return"\n\n\xa8G"+(n.ghCodeBlocks.push({text:e,codeblock:s})-1)+"G\n\n"}),"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),e=n.converter._dispatch("hashPreCodeTags.after",e,t,n)})),a.subParser("headers",(function(e,t,n){"use strict";e=n.converter._dispatch("headers.before",e,t,n);var r=isNaN(parseInt(t.headerLevelStart))?1:parseInt(t.headerLevelStart),i=t.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,o=t.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;e=(e=e.replace(i,(function(e,i){var o=a.subParser("spanGamut")(i,t,n),s=t.noHeaderId?"":' id="'+c(i)+'"',l="<h"+r+s+">"+o+"</h"+r+">";return a.subParser("hashBlock")(l,t,n)}))).replace(o,(function(e,i){var o=a.subParser("spanGamut")(i,t,n),s=t.noHeaderId?"":' id="'+c(i)+'"',l=r+1,u="<h"+l+s+">"+o+"</h"+l+">";return a.subParser("hashBlock")(u,t,n)}));var s=t.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;function c(e){var r,i;if(t.customizedHeaderId){var o=e.match(/\{([^{]+?)}\s*$/);o&&o[1]&&(e=o[1])}return r=e,i=a.helper.isString(t.prefixHeaderId)?t.prefixHeaderId:!0===t.prefixHeaderId?"section-":"",t.rawPrefixHeaderId||(r=i+r),r=t.ghCompatibleHeaderId?r.replace(/ /g,"-").replace(/&amp;/g,"").replace(/\xa8T/g,"").replace(/\xa8D/g,"").replace(/[&+$,\/:;=?@"#{}|^\xa8~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():t.rawHeaderId?r.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/\xa8T/g,"\xa8").replace(/\xa8D/g,"$").replace(/["']/g,"-").toLowerCase():r.replace(/[^\w]/g,"").toLowerCase(),t.rawPrefixHeaderId&&(r=i+r),n.hashLinkCounts[r]?r=r+"-"+n.hashLinkCounts[r]++:n.hashLinkCounts[r]=1,r}return e=e.replace(s,(function(e,i,o){var s=o;t.customizedHeaderId&&(s=o.replace(/\s?\{([^{]+?)}\s*$/,""));var l=a.subParser("spanGamut")(s,t,n),u=t.noHeaderId?"":' id="'+c(o)+'"',p=r-1+i.length,h="<h"+p+u+">"+l+"</h"+p+">";return a.subParser("hashBlock")(h,t,n)})),e=n.converter._dispatch("headers.after",e,t,n)})),a.subParser("horizontalRule",(function(e,t,n){"use strict";e=n.converter._dispatch("horizontalRule.before",e,t,n);var r=a.subParser("hashBlock")("<hr />",t,n);return e=(e=(e=e.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,r)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,r)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,r),e=n.converter._dispatch("horizontalRule.after",e,t,n)})),a.subParser("images",(function(e,t,n){"use strict";function r(e,t,r,i,o,s,c,l){var u=n.gUrls,p=n.gTitles,h=n.gDimensions;if(r=r.toLowerCase(),l||(l=""),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)i="";else if(""===i||null===i){if(""!==r&&null!==r||(r=t.toLowerCase().replace(/ ?\n/g," ")),i="#"+r,a.helper.isUndefined(u[r]))return e;i=u[r],a.helper.isUndefined(p[r])||(l=p[r]),a.helper.isUndefined(h[r])||(o=h[r].width,s=h[r].height)}t=t.replace(/"/g,"&quot;").replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback);var d='<img src="'+(i=i.replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback))+'" alt="'+t+'"';return l&&a.helper.isString(l)&&(d+=' title="'+(l=l.replace(/"/g,"&quot;").replace(a.helper.regexes.asteriskDashAndColon,a.helper.escapeCharactersCallback))+'"'),o&&s&&(d+=' width="'+(o="*"===o?"auto":o)+'"',d+=' height="'+(s="*"===s?"auto":s)+'"'),d+=" />"}return e=(e=(e=(e=(e=(e=n.converter._dispatch("images.before",e,t,n)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,r)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,(function(e,t,n,i,a,o,s,c){return r(e,t,n,i=i.replace(/\s/g,""),a,o,s,c)}))).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,r)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,r)).replace(/!\[([^\[\]]+)]()()()()()/g,r),e=n.converter._dispatch("images.after",e,t,n)})),a.subParser("italicsAndBold",(function(e,t,n){"use strict";function r(e,t,n){return t+e+n}return e=n.converter._dispatch("italicsAndBold.before",e,t,n),e=t.literalMidWordUnderscores?(e=(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return r(t,"<strong><em>","</em></strong>")}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return r(t,"<strong>","</strong>")}))).replace(/\b_(\S[\s\S]*?)_\b/g,(function(e,t){return r(t,"<em>","</em>")})):(e=(e=e.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong><em>","</em></strong>"):e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong>","</strong>"):e}))).replace(/_([^\s_][\s\S]*?)_/g,(function(e,t){return/\S$/.test(t)?r(t,"<em>","</em>"):e})),e=t.literalMidWordAsterisks?(e=(e=e.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,(function(e,t,n){return r(n,t+"<strong><em>","</em></strong>")}))).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,(function(e,t,n){return r(n,t+"<strong>","</strong>")}))).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,(function(e,t,n){return r(n,t+"<em>","</em>")})):(e=(e=e.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong><em>","</em></strong>"):e}))).replace(/\*\*(\S[\s\S]*?)\*\*/g,(function(e,t){return/\S$/.test(t)?r(t,"<strong>","</strong>"):e}))).replace(/\*([^\s*][\s\S]*?)\*/g,(function(e,t){return/\S$/.test(t)?r(t,"<em>","</em>"):e})),e=n.converter._dispatch("italicsAndBold.after",e,t,n)})),a.subParser("lists",(function(e,t,n){"use strict";function r(e,r){n.gListLevel++,e=e.replace(/\n{2,}$/,"\n"),e+="\xa80";var i=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(\xa80| {0,3}([*+-]|\d+[.])[ \t]+))/gm,o=/\n[ \t]*\n(?!\xa80)/.test(e);return t.disableForced4SpacesIndentedSublists&&(i=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(\xa80|\2([*+-]|\d+[.])[ \t]+))/gm),e=(e=e.replace(i,(function(e,r,i,s,c,l,u){u=u&&""!==u.trim();var p=a.subParser("outdent")(c,t,n),h="";return l&&t.tasklists&&(h=' class="task-list-item" style="list-style-type: none;"',p=p.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return u&&(e+=" checked"),e+=">"}))),p=p.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,(function(e){return"\xa8A"+e})),r||p.search(/\n{2,}/)>-1?(p=a.subParser("githubCodeBlocks")(p,t,n),p=a.subParser("blockGamut")(p,t,n)):(p=(p=a.subParser("lists")(p,t,n)).replace(/\n$/,""),p=(p=a.subParser("hashHTMLBlocks")(p,t,n)).replace(/\n\n+/g,"\n\n"),p=o?a.subParser("paragraphs")(p,t,n):a.subParser("spanGamut")(p,t,n)),p="<li"+h+">"+(p=p.replace("\xa8A",""))+"</li>\n"}))).replace(/\xa80/g,""),n.gListLevel--,r&&(e=e.replace(/\s+$/,"")),e}function i(e,t){if("ol"===t){var n=e.match(/^ *(\d+)\./);if(n&&"1"!==n[1])return' start="'+n[1]+'"'}return""}function o(e,n,a){var o=t.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,s=t.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,c="ul"===n?o:s,l="";if(-1!==e.search(c))!function t(u){var p=u.search(c),h=i(e,n);-1!==p?(l+="\n\n<"+n+h+">\n"+r(u.slice(0,p),!!a)+"</"+n+">\n",c="ul"===(n="ul"===n?"ol":"ul")?o:s,t(u.slice(p))):l+="\n\n<"+n+h+">\n"+r(u,!!a)+"</"+n+">\n"}(e);else{var u=i(e,n);l="\n\n<"+n+u+">\n"+r(e,!!a)+"</"+n+">\n"}return l}return e=n.converter._dispatch("lists.before",e,t,n),e+="\xa80",e=(e=n.gListLevel?e.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(\xa80|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,n){return o(t,n.search(/[*+-]/g)>-1?"ul":"ol",!0)})):e.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(\xa80|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,n,r){return o(n,r.search(/[*+-]/g)>-1?"ul":"ol",!1)}))).replace(/\xa80/,""),e=n.converter._dispatch("lists.after",e,t,n)})),a.subParser("metadata",(function(e,t,n){"use strict";if(!t.metadata)return e;function r(e){n.metadata.raw=e,(e=(e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,(function(e,t,r){return n.metadata.parsed[t]=r,""}))}return e=(e=(e=(e=n.converter._dispatch("metadata.before",e,t,n)).replace(/^\s*\xab\xab\xab+(\S*?)\n([\s\S]+?)\n\xbb\xbb\xbb+\n/,(function(e,t,n){return r(n),"\xa8M"}))).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,(function(e,t,i){return t&&(n.metadata.format=t),r(i),"\xa8M"}))).replace(/\xa8M/g,""),e=n.converter._dispatch("metadata.after",e,t,n)})),a.subParser("outdent",(function(e,t,n){"use strict";return e=(e=(e=n.converter._dispatch("outdent.before",e,t,n)).replace(/^(\t|[ ]{1,4})/gm,"\xa80")).replace(/\xa80/g,""),e=n.converter._dispatch("outdent.after",e,t,n)})),a.subParser("paragraphs",(function(e,t,n){"use strict";for(var r=(e=(e=(e=n.converter._dispatch("paragraphs.before",e,t,n)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),i=[],o=r.length,s=0;s<o;s++){var c=r[s];c.search(/\xa8(K|G)(\d+)\1/g)>=0?i.push(c):c.search(/\S/)>=0&&(c=(c=a.subParser("spanGamut")(c,t,n)).replace(/^([ \t]*)/g,"<p>"),c+="</p>",i.push(c))}for(o=i.length,s=0;s<o;s++){for(var l="",u=i[s],p=!1;/\xa8(K|G)(\d+)\1/.test(u);){var h=RegExp.$1,d=RegExp.$2;l=(l="K"===h?n.gHtmlBlocks[d]:p?a.subParser("encodeCode")(n.ghCodeBlocks[d].text,t,n):n.ghCodeBlocks[d].codeblock).replace(/\$/g,"$$$$"),u=u.replace(/(\n\n)?\xa8(K|G)\d+\2(\n\n)?/,l),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(u)&&(p=!0)}i[s]=u}return e=(e=(e=i.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),n.converter._dispatch("paragraphs.after",e,t,n)})),a.subParser("runExtension",(function(e,t,n,r){"use strict";if(e.filter)t=e.filter(t,r.converter,n);else if(e.regex){var i=e.regex;i instanceof RegExp||(i=new RegExp(i,"g")),t=t.replace(i,e.replace)}return t})),a.subParser("spanGamut",(function(e,t,n){"use strict";return e=n.converter._dispatch("spanGamut.before",e,t,n),e=a.subParser("codeSpans")(e,t,n),e=a.subParser("escapeSpecialCharsWithinTagAttributes")(e,t,n),e=a.subParser("encodeBackslashEscapes")(e,t,n),e=a.subParser("images")(e,t,n),e=a.subParser("anchors")(e,t,n),e=a.subParser("autoLinks")(e,t,n),e=a.subParser("simplifiedAutoLinks")(e,t,n),e=a.subParser("emoji")(e,t,n),e=a.subParser("underline")(e,t,n),e=a.subParser("italicsAndBold")(e,t,n),e=a.subParser("strikethrough")(e,t,n),e=a.subParser("ellipsis")(e,t,n),e=a.subParser("hashHTMLSpans")(e,t,n),e=a.subParser("encodeAmpsAndAngles")(e,t,n),t.simpleLineBreaks?/\n\n\xa8K/.test(e)||(e=e.replace(/\n+/g,"<br />\n")):e=e.replace(/  +\n/g,"<br />\n"),e=n.converter._dispatch("spanGamut.after",e,t,n)})),a.subParser("strikethrough",(function(e,t,n){"use strict";return t.strikethrough&&(e=(e=n.converter._dispatch("strikethrough.before",e,t,n)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,(function(e,r){return function(e){return t.simplifiedAutoLink&&(e=a.subParser("simplifiedAutoLinks")(e,t,n)),"<del>"+e+"</del>"}(r)})),e=n.converter._dispatch("strikethrough.after",e,t,n)),e})),a.subParser("stripLinkDefinitions",(function(e,t,n){"use strict";var r=function(r,i,o,s,c,l,u){return i=i.toLowerCase(),e.toLowerCase().split(i).length-1<2?r:(o.match(/^data:.+?\/.+?;base64,/)?n.gUrls[i]=o.replace(/\s/g,""):n.gUrls[i]=a.subParser("encodeAmpsAndAngles")(o,t,n),l?l+u:(u&&(n.gTitles[i]=u.replace(/"|'/g,"&quot;")),t.parseImgDimensions&&s&&c&&(n.gDimensions[i]={width:s,height:c}),""))};return e=(e=(e=(e+="\xa80").replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=\xa80)|(?=\n\[))/gm,r)).replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=\xa80))/gm,r)).replace(/\xa80/,"")})),a.subParser("tables",(function(e,t,n){"use strict";if(!t.tables)return e;function r(e,r){return"<td"+r+">"+a.subParser("spanGamut")(e,t,n)+"</td>\n"}function i(e){var i,o=e.split("\n");for(i=0;i<o.length;++i)/^ {0,3}\|/.test(o[i])&&(o[i]=o[i].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(o[i])&&(o[i]=o[i].replace(/\|[ \t]*$/,"")),o[i]=a.subParser("codeSpans")(o[i],t,n);var s,c,l,u,p=o[0].split("|").map((function(e){return e.trim()})),h=o[1].split("|").map((function(e){return e.trim()})),d=[],f=[],g=[],m=[];for(o.shift(),o.shift(),i=0;i<o.length;++i)""!==o[i].trim()&&d.push(o[i].split("|").map((function(e){return e.trim()})));if(p.length<h.length)return e;for(i=0;i<h.length;++i)g.push((s=h[i],/^:[ \t]*--*$/.test(s)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(s)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(s)?' style="text-align:center;"':""));for(i=0;i<p.length;++i)a.helper.isUndefined(g[i])&&(g[i]=""),f.push((c=p[i],l=g[i],u=void 0,u="",c=c.trim(),(t.tablesHeaderId||t.tableHeaderId)&&(u=' id="'+c.replace(/ /g,"_").toLowerCase()+'"'),"<th"+u+l+">"+(c=a.subParser("spanGamut")(c,t,n))+"</th>\n"));for(i=0;i<d.length;++i){for(var v=[],b=0;b<f.length;++b)a.helper.isUndefined(d[i][b]),v.push(r(d[i][b],g[b]));m.push(v)}return function(e,t){for(var n="<table>\n<thead>\n<tr>\n",r=e.length,i=0;i<r;++i)n+=e[i];for(n+="</tr>\n</thead>\n<tbody>\n",i=0;i<t.length;++i){n+="<tr>\n";for(var a=0;a<r;++a)n+=t[i][a];n+="</tr>\n"}return n+"</tbody>\n</table>\n"}(f,m)}return e=(e=(e=(e=n.converter._dispatch("tables.before",e,t,n)).replace(/\\(\|)/g,a.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|\xa80)/gm,i)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|\xa80)/gm,i),e=n.converter._dispatch("tables.after",e,t,n)})),a.subParser("underline",(function(e,t,n){"use strict";return t.underline?(e=n.converter._dispatch("underline.before",e,t,n),e=(e=t.literalMidWordUnderscores?(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return"<u>"+t+"</u>"}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return"<u>"+t+"</u>"})):(e=e.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/(_)/g,a.helper.escapeCharactersCallback),e=n.converter._dispatch("underline.after",e,t,n)):e})),a.subParser("unescapeSpecialChars",(function(e,t,n){"use strict";return e=(e=n.converter._dispatch("unescapeSpecialChars.before",e,t,n)).replace(/\xa8E(\d+)E/g,(function(e,t){var n=parseInt(t);return String.fromCharCode(n)})),e=n.converter._dispatch("unescapeSpecialChars.after",e,t,n)})),a.subParser("makeMarkdown.blockquote",(function(e,t){"use strict";var n="";if(e.hasChildNodes())for(var r=e.childNodes,i=r.length,o=0;o<i;++o){var s=a.subParser("makeMarkdown.node")(r[o],t);""!==s&&(n+=s)}return n="> "+(n=n.trim()).split("\n").join("\n> ")})),a.subParser("makeMarkdown.codeBlock",(function(e,t){"use strict";var n=e.getAttribute("language"),r=e.getAttribute("precodenum");return"```"+n+"\n"+t.preList[r]+"\n```"})),a.subParser("makeMarkdown.codeSpan",(function(e){"use strict";return"`"+e.innerHTML+"`"})),a.subParser("makeMarkdown.emphasis",(function(e,t){"use strict";var n="";if(e.hasChildNodes()){n+="*";for(var r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);n+="*"}return n})),a.subParser("makeMarkdown.header",(function(e,t,n){"use strict";var r=new Array(n+1).join("#"),i="";if(e.hasChildNodes()){i=r+" ";for(var o=e.childNodes,s=o.length,c=0;c<s;++c)i+=a.subParser("makeMarkdown.node")(o[c],t)}return i})),a.subParser("makeMarkdown.hr",(function(){"use strict";return"---"})),a.subParser("makeMarkdown.image",(function(e){"use strict";var t="";return e.hasAttribute("src")&&(t+="!["+e.getAttribute("alt")+"](",t+="<"+e.getAttribute("src")+">",e.hasAttribute("width")&&e.hasAttribute("height")&&(t+=" ="+e.getAttribute("width")+"x"+e.getAttribute("height")),e.hasAttribute("title")&&(t+=' "'+e.getAttribute("title")+'"'),t+=")"),t})),a.subParser("makeMarkdown.links",(function(e,t){"use strict";var n="";if(e.hasChildNodes()&&e.hasAttribute("href")){var r=e.childNodes,i=r.length;n="[";for(var o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);n+="](",n+="<"+e.getAttribute("href")+">",e.hasAttribute("title")&&(n+=' "'+e.getAttribute("title")+'"'),n+=")"}return n})),a.subParser("makeMarkdown.list",(function(e,t,n){"use strict";var r="";if(!e.hasChildNodes())return"";for(var i=e.childNodes,o=i.length,s=e.getAttribute("start")||1,c=0;c<o;++c)if(void 0!==i[c].tagName&&"li"===i[c].tagName.toLowerCase()){r+=("ol"===n?s.toString()+". ":"- ")+a.subParser("makeMarkdown.listItem")(i[c],t),++s}return(r+="\n\x3c!-- --\x3e\n").trim()})),a.subParser("makeMarkdown.listItem",(function(e,t){"use strict";for(var n="",r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);return/\n$/.test(n)?n=n.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):n+="\n",n})),a.subParser("makeMarkdown.node",(function(e,t,n){"use strict";n=n||!1;var r="";if(3===e.nodeType)return a.subParser("makeMarkdown.txt")(e,t);if(8===e.nodeType)return"\x3c!--"+e.data+"--\x3e\n\n";if(1!==e.nodeType)return"";switch(e.tagName.toLowerCase()){case"h1":n||(r=a.subParser("makeMarkdown.header")(e,t,1)+"\n\n");break;case"h2":n||(r=a.subParser("makeMarkdown.header")(e,t,2)+"\n\n");break;case"h3":n||(r=a.subParser("makeMarkdown.header")(e,t,3)+"\n\n");break;case"h4":n||(r=a.subParser("makeMarkdown.header")(e,t,4)+"\n\n");break;case"h5":n||(r=a.subParser("makeMarkdown.header")(e,t,5)+"\n\n");break;case"h6":n||(r=a.subParser("makeMarkdown.header")(e,t,6)+"\n\n");break;case"p":n||(r=a.subParser("makeMarkdown.paragraph")(e,t)+"\n\n");break;case"blockquote":n||(r=a.subParser("makeMarkdown.blockquote")(e,t)+"\n\n");break;case"hr":n||(r=a.subParser("makeMarkdown.hr")(e,t)+"\n\n");break;case"ol":n||(r=a.subParser("makeMarkdown.list")(e,t,"ol")+"\n\n");break;case"ul":n||(r=a.subParser("makeMarkdown.list")(e,t,"ul")+"\n\n");break;case"precode":n||(r=a.subParser("makeMarkdown.codeBlock")(e,t)+"\n\n");break;case"pre":n||(r=a.subParser("makeMarkdown.pre")(e,t)+"\n\n");break;case"table":n||(r=a.subParser("makeMarkdown.table")(e,t)+"\n\n");break;case"code":r=a.subParser("makeMarkdown.codeSpan")(e,t);break;case"em":case"i":r=a.subParser("makeMarkdown.emphasis")(e,t);break;case"strong":case"b":r=a.subParser("makeMarkdown.strong")(e,t);break;case"del":r=a.subParser("makeMarkdown.strikethrough")(e,t);break;case"a":r=a.subParser("makeMarkdown.links")(e,t);break;case"img":r=a.subParser("makeMarkdown.image")(e,t);break;default:r=e.outerHTML+"\n\n"}return r})),a.subParser("makeMarkdown.paragraph",(function(e,t){"use strict";var n="";if(e.hasChildNodes())for(var r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);return n=n.trim()})),a.subParser("makeMarkdown.pre",(function(e,t){"use strict";var n=e.getAttribute("prenum");return"<pre>"+t.preList[n]+"</pre>"})),a.subParser("makeMarkdown.strikethrough",(function(e,t){"use strict";var n="";if(e.hasChildNodes()){n+="~~";for(var r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);n+="~~"}return n})),a.subParser("makeMarkdown.strong",(function(e,t){"use strict";var n="";if(e.hasChildNodes()){n+="**";for(var r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t);n+="**"}return n})),a.subParser("makeMarkdown.table",(function(e,t){"use strict";var n,r,i="",o=[[],[]],s=e.querySelectorAll("thead>tr>th"),c=e.querySelectorAll("tbody>tr");for(n=0;n<s.length;++n){var l=a.subParser("makeMarkdown.tableCell")(s[n],t),u="---";if(s[n].hasAttribute("style"))switch(s[n].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":u=":---";break;case"text-align:right;":u="---:";break;case"text-align:center;":u=":---:"}o[0][n]=l.trim(),o[1][n]=u}for(n=0;n<c.length;++n){var p=o.push([])-1,h=c[n].getElementsByTagName("td");for(r=0;r<s.length;++r){var d=" ";void 0!==h[r]&&(d=a.subParser("makeMarkdown.tableCell")(h[r],t)),o[p].push(d)}}var f=3;for(n=0;n<o.length;++n)for(r=0;r<o[n].length;++r){var g=o[n][r].length;g>f&&(f=g)}for(n=0;n<o.length;++n){for(r=0;r<o[n].length;++r)1===n?":"===o[n][r].slice(-1)?o[n][r]=a.helper.padEnd(o[n][r].slice(-1),f-1,"-")+":":o[n][r]=a.helper.padEnd(o[n][r],f,"-"):o[n][r]=a.helper.padEnd(o[n][r],f);i+="| "+o[n].join(" | ")+" |\n"}return i.trim()})),a.subParser("makeMarkdown.tableCell",(function(e,t){"use strict";var n="";if(!e.hasChildNodes())return"";for(var r=e.childNodes,i=r.length,o=0;o<i;++o)n+=a.subParser("makeMarkdown.node")(r[o],t,!0);return n.trim()})),a.subParser("makeMarkdown.txt",(function(e){"use strict";var t=e.nodeValue;return t=(t=t.replace(/ +/g," ")).replace(/\xa8NBSP;/g," "),t=(t=(t=(t=(t=(t=(t=(t=(t=a.helper.unescapeHTMLEntities(t)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")}));void 0===(r=(function(){"use strict";return a}).call(t,n,t,e))||(e.exports=r)}).call(this)},"8wi9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("9WnA"),o=(r=a)&&r.__esModule?r:{default:r};var s=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conditions=(0,o.default)(t),this.event=(0,o.default)(n),this.priority=(0,o.default)(r),this.name=(0,o.default)(i),this.result=null}return i(e,[{key:"setResult",value:function(e){this.result=e}},{key:"toJSON",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return e?JSON.stringify(t):t}}]),e}();t.default=s},"90bW":function(e,t,n){var r=n("oFOz"),i=n("sfKy"),a=n("7B5I");t.AND=function(){for(var e=i.flatten(arguments),t=r.value,n=0;n<e.length;n++){if(e[n]instanceof Error)return e[n];void 0!==e[n]&&null!==e[n]&&"string"!=typeof e[n]&&(t===r.value&&(t=!0),e[n]||(t=!1))}return t},t.CHOOSE=function(){if(arguments.length<2)return r.na;var e=arguments[0];return e<1||e>254||arguments.length<e+1?r.value:arguments[e]},t.FALSE=function(){return!1},t.IF=function(e,t,n){return e instanceof Error?e:(null==(t=!(arguments.length>=2)||t)&&(t=0),null==(n=3===arguments.length&&n)&&(n=0),e?t:n)},t.IFS=function(){for(var e=0;e<arguments.length/2;e++)if(arguments[2*e])return arguments[2*e+1];return r.na},t.IFERROR=function(e,t){return a.ISERROR(e)?t:e},t.IFNA=function(e,t){return e===r.na?t:e},t.NOT=function(e){return"string"==typeof e?r.value:e instanceof Error?e:!e},t.OR=function(){for(var e=i.flatten(arguments),t=r.value,n=0;n<e.length;n++){if(e[n]instanceof Error)return e[n];void 0!==e[n]&&null!==e[n]&&"string"!=typeof e[n]&&(t===r.value&&(t=!1),e[n]&&(t=!0))}return t},t.TRUE=function(){return!0},t.XOR=function(){for(var e=i.flatten(arguments),t=r.value,n=0;n<e.length;n++){if(e[n]instanceof Error)return e[n];void 0!==e[n]&&null!==e[n]&&"string"!=typeof e[n]&&(t===r.value&&(t=0),e[n]&&t++)}return t===r.value?t:!!(1&Math.floor(Math.abs(t)))},t.SWITCH=function(){var e;if(arguments.length>0){var t=arguments[0],n=arguments.length-1,i=Math.floor(n/2),a=!1,o=n%2!=0,s=n%2==0?null:arguments[arguments.length-1];if(i)for(var c=0;c<i;c++)if(t===arguments[2*c+1]){e=arguments[2*c+2],a=!0;break}a||(e=o?s:r.na)}else e=r.value;return e}},"9WnA":function(e,t,n){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(s){t=function(){}}try{n=Set}catch(s){n=function(){}}try{r=Promise}catch(s){r=function(){}}function i(a,s,c,l,u){"object"==typeof s&&(c=s.depth,l=s.prototype,u=s.includeNonEnumerable,s=s.circular);var p=[],h=[],d="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===c&&(c=1/0),function a(c,f){if(null===c)return null;if(0===f)return c;var g,m;if("object"!=typeof c)return c;if(e(c,t))g=new t;else if(e(c,n))g=new n;else if(e(c,r))g=new r((function(e,t){c.then((function(t){e(a(t,f-1))}),(function(e){t(a(e,f-1))}))}));else if(i.__isArray(c))g=[];else if(i.__isRegExp(c))g=new RegExp(c.source,o(c)),c.lastIndex&&(g.lastIndex=c.lastIndex);else if(i.__isDate(c))g=new Date(c.getTime());else{if(d&&Buffer.isBuffer(c))return g=Buffer.allocUnsafe?Buffer.allocUnsafe(c.length):new Buffer(c.length),c.copy(g),g;e(c,Error)?g=Object.create(c):void 0===l?(m=Object.getPrototypeOf(c),g=Object.create(m)):(g=Object.create(l),m=l)}if(s){var v=p.indexOf(c);if(-1!=v)return h[v];p.push(c),h.push(g)}for(var b in e(c,t)&&c.forEach((function(e,t){var n=a(t,f-1),r=a(e,f-1);g.set(n,r)})),e(c,n)&&c.forEach((function(e){var t=a(e,f-1);g.add(t)})),c){var y;m&&(y=Object.getOwnPropertyDescriptor(m,b)),y&&null==y.set||(g[b]=a(c[b],f-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(c);for(b=0;b<x.length;b++){var C=x[b];(!(k=Object.getOwnPropertyDescriptor(c,C))||k.enumerable||u)&&(g[C]=a(c[C],f-1),k.enumerable||Object.defineProperty(g,C,{enumerable:!1}))}}if(u){var w=Object.getOwnPropertyNames(c);for(b=0;b<w.length;b++){var k,S=w[b];(k=Object.getOwnPropertyDescriptor(c,S))&&k.enumerable||(g[S]=a(c[S],f-1),Object.defineProperty(g,S,{enumerable:!1}))}}return g}(a,c)}function a(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=a,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===a(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===a(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===a(e)},i.__getRegExpFlags=o,i}();e.exports&&(e.exports=r)},"9pEM":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("D57K"),i=n("nIj0"),a=n("NNJu"),o=n("Zuf/"),s=n("C05f"),c=n("EM62"),l=n("29Wa"),u=n("Cd2c"),p=n("2kYt"),h=n("s2Ay");function d(e,t){if(1&e&&(c.lc(0,"div",14),c.ed(1),c.kc()),2&e){var n=c.xc();c.Sb(1),c.gd(" ",n.selectedRule.errors.invalidRule.error.message," ")}}function f(e,t){if(1&e){var n=c.mc();c.lc(0,"tr"),c.lc(1,"td",15),c.ed(2),c.kc(),c.lc(3,"td"),c.lc(4,"button",16),c.tc("click",(function(){c.Pc(n);var e=t.index;return c.xc().startEditing(e)})),c.ed(5),c.yc(6,"translate"),c.kc(),c.kc(),c.lc(7,"td"),c.lc(8,"button",17),c.tc("click",(function(){c.Pc(n);var e=t.index;return c.xc().removeRule(e)})),c.ed(9),c.yc(10,"translate"),c.kc(),c.kc(),c.kc()}if(2&e){var r=t.$implicit;c.Sb(2),c.fd(r.name),c.Sb(3),c.fd(c.zc(6,3,"SHAPE_DATA.TABS.RULES.ACTION_UPDATE")),c.Sb(4),c.fd(c.zc(10,5,"SHAPE_DATA.TABS.RULES.ACTION_REMOVE"))}}var g=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.componentFactoryResolver=t,i.injector=n,i.fb=r,i.rulesObs=new s.a([]),i.editing=new s.a(!1),i.editingIndex=-1,i}return Object(r.e)(t,e),t.prototype.startAdding=function(){this.selectedRule.reset(),this.editing.next(!0)},t.prototype.startEditing=function(e){var t=this.rulesObs.value[e];this.selectedRule.patchValue({name:t.name,conditions:JSON.stringify(t.conditions),event:JSON.stringify(t.event)}),this.editingIndex=e,this.editing.next(!0)},t.prototype.removeRule=function(e){var t=this.rulesObs.value;t.splice(e,1),this.rulesObs.next(t),this.onChange(t)},t.prototype.handleSaveClick=function(){if(!this.selectedRule.invalid){var e=this.selectedRule.value,t=JSON.parse(e.conditions),n=JSON.parse(e.event),i={name:e.name,conditions:t,event:n};this.editingIndex>-1?this.updateRule(this.editingIndex,i):this.addNewRule(Object(r.a)(Object(r.a)({},i),{priority:1})),this.editingIndex=-1,this.editing.next(!1),this.onChange(this.rulesObs.value)}},t.prototype.cancelEditing=function(){this.editing.next(!1),this.editingIndex=-1},t.prototype.updateRule=function(e,t){var n=this.rulesObs.value;n.splice(e,1,Object.assign({},n[e],t)),this.rulesObs.next(n)},t.prototype.addNewRule=function(e){this.rulesObs.next(this.rulesObs.value.concat([e]))},t.prototype.onTabUpdate=function(){this.rules&&this.rulesObs.next(this.rules?this.rules.slice():[])},t.prototype.ngOnInit=function(){this.selectedRule=this.fb.group({name:this.fb.control("",i.G.required),conditions:this.fb.control("",i.G.required),event:this.fb.control("",i.G.required)},{validators:function(e){var t=Object(r.a)({},e.value);if(!t.conditions||"null"===t.conditions)return{invalidRule:{error:"Conditions should be defined"}};if(!t.event||"null"===t.event)return{invalidRule:{error:"Event should be defined"}};try{t.conditions=JSON.parse(t.conditions),t.event=JSON.parse(t.event),new o.Rule(t)}catch(n){return{invalidRule:{error:n}}}return null},updateOn:"submit"}),this.rules&&this.rules.length>0&&this.rulesObs.next(this.rules.slice())},t.\u0275fac=function(e){return new(e||t)(c.fc(c.m),c.fc(c.C),c.fc(i.g))},t.\u0275cmp=c.Zb({type:t,selectors:[["rules-renderer"]],inputs:{rules:"rules",onChange:"onChange"},features:[c.Pb],decls:34,vars:26,consts:[[1,"rules-container"],[1,"nu2-btn-primary","nu2-btn-small",3,"hidden","click"],[1,"add-rule",3,"hidden"],[1,"form-data-source",3,"formGroup","ngSubmit"],["appearance","standard",1,"example-full-width"],["formControlName","name","matInput",""],["formControlName","conditions","matInput",""],["formControlName","event","matInput",""],["class","cross-validation-error-message alert alert-danger",4,"ngIf"],["type","submit",1,"nu2-btn-primary","nu2-btn-small"],["type","button",1,"nu2-btn-secondary","nu2-btn-small",3,"click"],[1,"rule-list"],[2,"width","100%","margin","10px"],[4,"ngFor","ngForOf"],[1,"cross-validation-error-message","alert","alert-danger"],[2,"width","60%"],[1,"nu2-btn-primary","nu2-btn-small",3,"click"],[1,"nu2-btn-warning","nu2-btn-small",3,"click"]],template:function(e,t){1&e&&(c.lc(0,"div",0),c.lc(1,"button",1),c.tc("click",(function(){return t.startAdding()})),c.yc(2,"async"),c.ed(3,"Add Rule"),c.kc(),c.lc(4,"div",2),c.yc(5,"async"),c.lc(6,"form",3),c.tc("ngSubmit",(function(){return t.handleSaveClick()})),c.lc(7,"mat-form-field",4),c.lc(8,"mat-label"),c.ed(9),c.yc(10,"translate"),c.kc(),c.gc(11,"input",5),c.kc(),c.lc(12,"mat-form-field",4),c.lc(13,"mat-label"),c.ed(14),c.yc(15,"translate"),c.kc(),c.gc(16,"textarea",6),c.kc(),c.lc(17,"mat-form-field",4),c.lc(18,"mat-label"),c.ed(19),c.yc(20,"translate"),c.kc(),c.gc(21,"textarea",7),c.kc(),c.cd(22,d,2,1,"div",8),c.lc(23,"button",9),c.ed(24),c.yc(25,"translate"),c.kc(),c.lc(26,"button",10),c.tc("click",(function(){return t.cancelEditing()})),c.ed(27),c.yc(28,"translate"),c.kc(),c.kc(),c.kc(),c.lc(29,"div",11),c.lc(30,"table",12),c.lc(31,"tbody"),c.cd(32,f,11,7,"tr",13),c.yc(33,"async"),c.kc(),c.kc(),c.kc(),c.kc()),2&e&&(c.Sb(1),c.Cc("hidden",c.zc(2,10,t.editing)),c.Sb(3),c.Cc("hidden",!c.zc(5,12,t.editing)),c.Sb(2),c.Cc("formGroup",t.selectedRule),c.Sb(3),c.fd(c.zc(10,14,"SHAPE_DATA.TABS.RULES.LABELS.NAME")),c.Sb(5),c.fd(c.zc(15,16,"SHAPE_DATA.TABS.RULES.LABELS.CONDITIONS")),c.Sb(5),c.fd(c.zc(20,18,"SHAPE_DATA.TABS.RULES.LABELS.EVENT")),c.Sb(3),c.Cc("ngIf",(null==t.selectedRule.errors?null:t.selectedRule.errors.invalidRule)&&(t.selectedRule.touched||t.selectedRule.dirty)),c.Sb(2),c.fd(c.zc(25,20,"SHAPE_DATA.TABS.RULES.ACTION_SAVE")),c.Sb(3),c.fd(c.zc(28,22,"SHAPE_DATA.TABS.RULES.ACTION_CANCEL")),c.Sb(5),c.Cc("ngForOf",c.zc(33,24,t.rulesObs)))},directives:[i.I,i.t,i.k,l.c,l.g,i.d,u.b,i.s,i.j,p.t,p.s],pipes:[p.b,h.d],styles:["[_nghost-%COMP%]  .ql-editor{min-height:500px}"],changeDetection:0}),t}(a.k)},AM7v:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("D57K"),i=n("5xGT"),a=n("g6G6"),o=n("KTx3"),s=n("xVbo"),c=n("8j5Y"),l=n("YtkY"),u=n("Wg7D"),p=n("Wpmq"),h=n("LLEj"),d=n("c7W3"),f=n("EM62"),g=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.commandService=t,i.vToDcoordinate=n,i.state=r,i.svgPathId="freehand-svg-path",i.pointsBufferLength=4,i.svgPoints=[],i.svgPointsTemporary=[],i.svgPointsBuffer=[],i.isDrawing=!1,i.throttleTime=5,i.isStraightLine=!1,i}return Object(r.e)(t,e),t.getAveragePoint=function(e,t,n){for(var r=t.length,i=0,a=0,o=0,s=e;s<r;s++){o++;var c=t[s];i+=c.x,a+=c.y}return{x:i/o,y:a/o}},Object.defineProperty(t.prototype,"defaultCursor",{get:function(){return{cursor:this.state.get("MouseControlState"),tail:null,type:"svg",viewingArea:"canvas"}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t,n,r){var i=this;this.resetValues();var o=e.prototype.initialize.call(this,t,n,r),l=this.getFreeHandMouseEvents().pipe(Object(s.a)((function(e){return i.isDrawing&&i.isStopDraw(e)})),Object(c.a)((function(){i.updateDiagramShape(!1),i.resetValues()})));return Object(a.a)(o,l,this.startFreeHand())},t.prototype.resetValues=function(){this.isDrawing=!1,this.isStraightLine=!1,this.throttleTime=5,this.shiftAngle=void 0,this.svgPoints=[],this.svgPointsBuffer=[],this.svgPointsTemporary=[];var e=document.getElementById(this.svgPathId);e&&e.setAttributeNS(null,"d",""),this.state.set("CurrentFreeHandShape",!1)},t.prototype.isStopDraw=function(e){var t=this.getViewportBounds(),n=t.left,r=t.top,i=n+t.width,a=r+t.height;return!!(e.type.includes("up")||e.clientX<=n||e.clientX>=i||e.clientY<=r||e.clientY>=a)},t.prototype.getAllSVGPoint=function(){return Object(r.j)(this.svgPoints,this.svgPointsTemporary)},t.prototype.getFreeHandMouseEvents=function(){var e=this,t=document.getElementById("free-hand-container");return Object(a.a)(Object(o.a)(t,"mousedown",{capture:!0}),Object(o.a)(t,"mousemove",{capture:!0}),Object(o.a)(t,"pressmove",{capture:!0}),Object(o.a)(t,"pressup",{capture:!0}),Object(o.a)(t,"mouseup",{capture:!0})).pipe(Object(l.a)((function(e){return e})),Object(c.a)((function(t){"mousedown"!==t.type||e.isDrawing||(e.isDrawing=!0,e.startPosition={x:t.clientX,y:t.clientY},e.addPointToPath(t,!1)),!e.isStraightLine&&t.shiftKey?e.throttleTime=1e3:t.shiftKey||(e.throttleTime=5,e.shiftAngle=void 0),e.isStraightLine=t.shiftKey})))},t.prototype.startFreeHand=function(){var e=this;return this.getFreeHandMouseEvents().pipe(Object(s.a)((function(t){return e.isDrawing&&!e.isStopDraw(t)})),Object(u.a)(this.throttleTime),Object(l.a)((function(t){return e.addPointToPath(t,!0)})))},t.prototype.addPointToPath=function(e,n){var r=document.getElementById("freehand-svg"),i=document.getElementById(this.svgPathId),a=r.createSVGPoint(),o=this.getMousePoint(e);a.x=o.x,a.y=o.y;var s=a.matrixTransform(r.getScreenCTM().inverse());this.svgPointsBuffer.push(s),this.svgPointsBuffer.length>this.pointsBufferLength&&this.svgPointsBuffer.shift(),0===this.svgPoints.length&&this.svgPoints.push(s);var c=t.getAveragePoint(0,this.svgPointsBuffer,this.pointsBufferLength);if(c){var l=r.createSVGPoint();l.x=c.x,l.y=c.y,this.svgPoints.push(l),this.svgPointsTemporary=[];for(var u=1;u<this.svgPointsBuffer.length;u+=1){var p=t.getAveragePoint(u,this.svgPointsBuffer,this.pointsBufferLength),h=r.createSVGPoint();h.x=p.x,h.y=p.y,this.svgPointsTemporary.push(h)}}i.setAttributeNS(null,"d",this.convertPointsToSvg(this.svgPoints)),this.updateDiagramShape(n)},t.prototype.getMousePoint=function(e){var t=e.clientX,n=e.clientY,r=this.getViewportBounds();this.isStopDraw(e)&&!e.type.includes("up")&&(t=t<=r.left+10?r.left:r.left+r.width,n=n<=r.top+10?r.top:r.top+r.height);var i={x:t,y:n};if(!this.isStraightLine)return i;var a=t-this.startPosition.x,o=n-this.startPosition.y;if(this.shiftAngle||t===this.startPosition.x||(this.shiftAngle=Math.atan(o/a)*(180/Math.PI)),Math.abs(this.shiftAngle)<30)i.y=this.startPosition.y;else if(Math.abs(this.shiftAngle)<60){var s=Math.sign(this.shiftAngle),c=Math.PI/180*45;i.y=this.startPosition.y+s*a*Math.tan(c)}else i.x=this.startPosition.x;return i},t.prototype.convertPointsToSvg=function(e,t){t=t||[0,0];for(var n="",r=0;r<e.length;r++){var i=0===r?"M":"L";e[r].x+=t[0],e[r].y+=t[1],n+=i+e[r].x+" "+e[r].y+" "}return n},t.prototype.getViewportBounds=function(){return document.querySelector(".diagram-viewport").getBoundingClientRect()},t.prototype.updateDiagramShape=function(e){var t=this,n=[],i=[];this.getAllSVGPoint().forEach((function(e){var r=e.x,a=e.y;n.push(t.vToDcoordinate.x(r)),i.push(t.vToDcoordinate.y(a))}));var a=Math.abs(Math.max.apply(Math,Object(r.j)(n))-Math.min.apply(Math,Object(r.j)(n))),o=Math.abs(Math.max.apply(Math,Object(r.j)(i))-Math.min.apply(Math,Object(r.j)(i))),s=Math.min.apply(Math,Object(r.j)(n)),c=Math.min.apply(Math,Object(r.j)(i)),l=this.translate(-s,-c),u=e?"preview":"dispatch";this.commandService[u](d.a.addFreehandShape,{svg:l,shapeStart:{x:s,y:c},bounds:{width:a,height:o},shapeId:this.state.get("CurrentFreeHandShape")})},t.prototype.translate=function(e,t){var n=this,r=document.getElementById("free-hand-container").innerHTML,i=this.getAllSVGPoint().map((function(e){return{x:n.vToDcoordinate.x(e.x),y:n.vToDcoordinate.y(e.y)}})),a=this.convertPointsToSvg(i,[e,t]),o=r.indexOf(" d")+3,s=o+r.slice(o).indexOf(">")-1;return r.slice(0,o+1)+a+r.slice(s)},t.\u0275fac=function(e){return new(e||t)(f.pc(i.B),f.pc(p.a),f.pc(i.Ib))},t.\u0275prov=f.bc({token:t,factory:t.\u0275fac}),t}(h.a)},AaYA:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("19Zn"),i=n("ZTXN"),a=n("C05f"),o=n("6Oco"),s=n("EM62"),c=n("s2Ay"),l=n("2kYt"),u=["container"];function p(e,t){if(1&e){var n=s.mc();s.lc(0,"div",6),s.lc(1,"div",7),s.lc(2,"div",8),s.lc(3,"div",9),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-top-left")})),s.kc(),s.lc(4,"div",10),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-top-center")})),s.kc(),s.lc(5,"div",11),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-top-right")})),s.kc(),s.kc(),s.kc(),s.lc(6,"div",12),s.lc(7,"div",8),s.lc(8,"div",9),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-left-top")})),s.kc(),s.lc(9,"div",10),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-left-center")})),s.kc(),s.lc(10,"div",11),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-left-bottom")})),s.kc(),s.kc(),s.lc(11,"div",13),s.lc(12,"div",14),s.lc(13,"div",9),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("in-top-left")})),s.kc(),s.lc(14,"div",10),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("in-center-left")})),s.kc(),s.lc(15,"div",11),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("in-bottom-left")})),s.kc(),s.kc(),s.lc(16,"div",15),s.lc(17,"div",9),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("in-top-center")})),s.kc(),s.lc(18,"div",10),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("in-center-center")})),s.kc(),s.lc(19,"div",11),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("in-bottom-center")})),s.kc(),s.kc(),s.lc(20,"div",16),s.lc(21,"div",9),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("in-top-right")})),s.kc(),s.lc(22,"div",10),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("in-center-right")})),s.kc(),s.lc(23,"div",11),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("in-bottom-right")})),s.kc(),s.kc(),s.kc(),s.lc(24,"div",17),s.lc(25,"div",9),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-right-top")})),s.kc(),s.lc(26,"div",10),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-right-center")})),s.kc(),s.lc(27,"div",11),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-right-bottom")})),s.kc(),s.kc(),s.kc(),s.lc(28,"div",18),s.lc(29,"div",8),s.lc(30,"div",9),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-bottom-left")})),s.kc(),s.lc(31,"div",10),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-bottom-center")})),s.kc(),s.lc(32,"div",11),s.tc("click",(function(){return s.Pc(n),s.xc().handleClick("ex-bottom-right")})),s.kc(),s.kc(),s.kc(),s.kc()}if(2&e){var r=t.ngIf;s.Sb(3),s.Xb("selected","ex-top-left"===r),s.Sb(1),s.Xb("selected","ex-top-center"===r),s.Sb(1),s.Xb("selected","ex-top-right"===r),s.Sb(3),s.Xb("selected","ex-left-top"===r),s.Sb(1),s.Xb("selected","ex-left-center"===r),s.Sb(1),s.Xb("selected","ex-left-bottom"===r),s.Sb(3),s.Xb("selected","in-top-left"===r),s.Sb(1),s.Xb("selected","in-center-left"===r),s.Sb(1),s.Xb("selected","in-bottom-left"===r),s.Sb(2),s.Xb("selected","in-top-center"===r),s.Sb(1),s.Xb("selected","in-center-center"===r),s.Sb(1),s.Xb("selected","in-bottom-center"===r),s.Sb(2),s.Xb("selected","in-top-right"===r),s.Sb(1),s.Xb("selected","in-center-right"===r),s.Sb(1),s.Xb("selected","in-bottom-right"===r),s.Sb(2),s.Xb("selected","ex-right-top"===r),s.Sb(1),s.Xb("selected","ex-right-center"===r),s.Sb(1),s.Xb("selected","ex-right-bottom"===r),s.Sb(3),s.Xb("selected","ex-bottom-left"===r),s.Sb(1),s.Xb("selected","ex-bottom-center"===r),s.Sb(1),s.Xb("selected","ex-bottom-right"===r)}}var h=function(){function e(){this._change=new i.a,this.selectedElement=new a.a("none")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerElement",{get:function(){return this.container?this.container.nativeElement:void 0},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this.selectedElement.next(r.G.getTextPositionString(e)),this._data=e,e.transform&&this.setRotation(e.transform)},e.prototype.setProperties=function(e){},e.prototype.apply=function(){},e.prototype.applyAnimated=function(){return Object(o.b)()},e.prototype.handleClick=function(e){this._change.next(this.getDataPositionData(e))},e.prototype.setRotation=function(e){var t=e.angle;this.containerElement&&(e.scaleX>0&&e.scaleY<0&&0===t&&(t=180),t>=0&&t<45?this.containerElement.style.transform="rotate(0)":t>=45&&t<90||t>=90&&t<135?this.containerElement.style.transform="rotate(90deg)":t>=135&&t<=180?this.containerElement.style.transform="rotate(180deg)":t<=0&&t>-45?this.containerElement.style.transform="rotate(0)":t<=-45&&t>-90||t<=-90&&t>-135?this.containerElement.style.transform="rotate(-90deg)":t<=-135&&t>=-180&&(this.containerElement.style.transform="rotate(-180deg)"))},e.prototype.getDataPositionData=function(e){return"ex-top-left"===e?{xType:"fixed-start",x:0,yType:"fixed-start",y:-1,alignX:-1,alignY:1,wordWrap:!1}:"ex-top-center"===e?{xType:"relative",x:.5,yType:"fixed-start",y:-1,alignX:0,alignY:1,wordWrap:!1}:"ex-top-right"===e?{xType:"fixed-end",x:0,yType:"fixed-start",y:-1,alignX:1,alignY:1,wordWrap:!1}:"in-top-left"===e?{xType:"fixed-start",x:1,yType:"fixed-start",y:1,alignX:-1,alignY:-1,wordWrap:!0}:"in-top-center"===e?{xType:"relative",x:.5,yType:"fixed-start",y:1,alignX:0,alignY:-1,wordWrap:!0}:"in-top-right"===e?{xType:"fixed-end",x:1,yType:"fixed-start",y:1,alignX:1,alignY:-1,wordWrap:!0}:"in-center-left"===e?{xType:"fixed-start",x:1,yType:"relative",y:.5,alignX:-1,alignY:0,wordWrap:!0}:"in-center-center"===e?{xType:"relative",x:.5,yType:"relative",y:.5,alignX:0,alignY:0,wordWrap:!0}:"in-center-right"===e?{xType:"fixed-end",x:1,yType:"relative",y:.5,alignX:1,alignY:0,wordWrap:!0}:"in-bottom-left"===e?{xType:"fixed-start",x:1,yType:"fixed-end",y:1,alignX:-1,alignY:1,wordWrap:!0}:"in-bottom-center"===e?{xType:"relative",x:.5,yType:"fixed-end",y:1,alignX:0,alignY:1,wordWrap:!0}:"in-bottom-right"===e?{xType:"fixed-end",x:1,yType:"fixed-end",y:1,alignX:1,alignY:1,wordWrap:!0}:"ex-bottom-left"===e?{xType:"fixed-start",x:0,yType:"fixed-end",y:-1,alignX:-1,alignY:-1,wordWrap:!1}:"ex-bottom-center"===e?{xType:"relative",x:.5,yType:"fixed-end",y:-1,alignX:0,alignY:-1,wordWrap:!1}:"ex-bottom-right"===e?{xType:"fixed-end",x:0,yType:"fixed-end",y:-1,alignX:1,alignY:-1,wordWrap:!1}:"ex-left-top"===e?{xType:"fixed-start",x:-1,yType:"fixed-start",y:0,alignX:1,alignY:-1,wordWrap:!1}:"ex-right-top"===e?{xType:"fixed-end",x:-1,yType:"fixed-start",y:0,alignX:-1,alignY:-1,wordWrap:!1}:"ex-left-center"===e?{xType:"fixed-start",x:-1,yType:"relative",y:.5,alignX:1,alignY:0,wordWrap:!1}:"ex-right-center"===e?{xType:"fixed-end",x:-1,yType:"relative",y:.5,alignX:-1,alignY:0,wordWrap:!1}:"ex-left-bottom"===e?{xType:"fixed-start",x:-1,yType:"fixed-end",y:0,alignX:1,alignY:1,wordWrap:!1}:"ex-right-bottom"===e?{xType:"fixed-end",x:-1,yType:"fixed-end",y:0,alignX:-1,alignY:1,wordWrap:!1}:void 0},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Zb({type:e,selectors:[["text-position-control"]],viewQuery:function(e,t){var n;(1&e&&s.jd(u,!0),2&e)&&(s.Lc(n=s.uc())&&(t.container=n.first))},decls:8,vars:3,consts:[[1,"txt-position-lbl","fx-margin-bottom-5"],["translate",""],[1,"text-position-control-container"],["container",""],["src","./assets/images/text-position-control.svg",1,"text-position-control-grid"],["class","text-position-control",4,"ngIf"],[1,"text-position-control"],[1,"row-1"],[1,"column-1"],[1,"tile1",3,"click"],[1,"tile2",3,"click"],[1,"tile3",3,"click"],[1,"row-2"],[1,"column-2"],[1,"column-2-1"],[1,"column-2-2"],[1,"column-2-3"],[1,"column-3"],[1,"row-3"]],template:function(e,t){1&e&&(s.lc(0,"div",0),s.lc(1,"label",1),s.ed(2,"LABELS.TEXT_POSITION"),s.kc(),s.kc(),s.lc(3,"div",2,3),s.gc(5,"img",4),s.cd(6,p,33,42,"div",5),s.yc(7,"async"),s.kc()),2&e&&(s.Sb(6),s.Cc("ngIf",s.zc(7,1,t.selectedElement)))},directives:[c.a,l.t],pipes:[l.b],styles:[".text-position-control-container[_ngcontent-%COMP%]{width:100px;height:100px;position:relative}.text-position-control[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;z-index:1;left:0;top:0}.text-position-control[_ngcontent-%COMP%]   [class*=tile][_ngcontent-%COMP%]{width:15.5px;height:15.5px;cursor:pointer}.text-position-control[_ngcontent-%COMP%]   [class*=tile].selected[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   [class*=tile][_ngcontent-%COMP%]:hover{background-color:#c0d9bf}.text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]{padding-left:18px;padding-right:18px}.text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}.text-position-control[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-3[_ngcontent-%COMP%]   .tile3[_ngcontent-%COMP%]{margin-right:0}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]{display:flex}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-1[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-1[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-3[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-3[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%]{margin-bottom:8px}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]{padding:3px 6px}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-2[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-3[_ngcontent-%COMP%]{display:inline-block;margin-right:5px}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .column-2-3[_ngcontent-%COMP%]{margin-right:0}.text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .tile1[_ngcontent-%COMP%], .text-position-control[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .column-2[_ngcontent-%COMP%]   .tile2[_ngcontent-%COMP%]{margin-bottom:5px}"],changeDetection:0}),e}()},"Aq/p":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeEvents=t.ShapeCommands=void 0,function(e){e.shapeTouchSubscribe="shape:touch:subscribe",e.shapeSelectSubscribe="shape:select:subscribe"}(t.ShapeCommands||(t.ShapeCommands={})),function(e){e.shapeTouch="shape:touch",e.shapeSelect="shape:select"}(t.ShapeEvents||(t.ShapeEvents={}))},"Ax/4":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("5xGT"),a=n("6Oco"),o=n("X0jn"),s=n("nsO7"),c=n("aYRE"),l=n("nWGD"),u=n("J+dc"),p=n("8j5Y"),h=n("EM62"),d=function(){function e(e,t,n,r){this.state=e,this.commandService=t,this.taskManager=n,this.taskLocator=r}return Object.defineProperty(e.prototype,"name",{get:function(){return"TaskBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["data","texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){this.changeModel=e;var n=e.__sakota__.getChanges();return Object(s.isEmpty)(n)||"Execute"!==t||(this.processTitleChanges(e,n,!0),this.processDataItemRemove(e,n),this.processDataChanges(e,n,!0),this.processDataChanges(e,n,!1),this.processLabelChanges(e,n,!0),this.processShapeAdded(e,n)),a.a},e.prototype.setRoleBoundsTaskId=function(e,t){var n=Object(s.filter)(e,(function(e){return e.roleBound&&e.systemType!==o.v.Role&&e.label===t.label}));if(n.length>0)n.forEach((function(e){return e.taskId=t.taskId}));else{var r=Object(s.filter)(e,(function(e){return e.roleBound&&e.systemType===o.v.Role&&e.id!==t.id})),i=void 0;if(r.length>0){var a=Object(s.map)(r,(function(e){return e.label}));i=Object(s.filter)(e,(function(e){return e.roleBound&&e.systemType!==o.v.Role&&-1===a.indexOf(e.label)}))}else i=Object(s.filter)(e,(function(e){return e.roleBound&&e.systemType!==o.v.Role}));i&&i.length>0&&i.forEach((function(e){e.roleId=t.id}))}},e.prototype.processTitleChanges=function(t,n,r){var i=this,a=r?n.$set:n.$unset,c=function(n){e.regexText.lastIndex=0;var r=e.regexText.exec(n);if(!r)return"continue";var a=r[1],c=r[2],l=t.shapes[a];if(!l)return"continue";var u=l.texts[c];if(!u||!u.primary||!u.plainText.length)return"continue";if(l.tasks&&l.tasks.length>0)return l.tasks.forEach((function(e){return i.taskManager.updateTaskTitle(e,u.plainText)})),"continue";if(l.dataSetId){var p=t.dataDefs[l.dataSetId];if(!p)return"continue";Object(s.filter)(p,(function(e){return e.systemType===o.v.Role})).forEach((function(e){e.taskId&&i.taskManager.updateTaskTitle(e.taskId,u.plainText)}))}};for(var l in a)c(l)},e.prototype.processDataItemRemove=function(t,n){var r;if(n.$unset)for(var i in n.$unset){e.regexDataItem.lastIndex=0;var a=e.regexDataItem.exec(i);if(a){var o=a[1],s=a[2],c=t.shapes[o];if(c){var l=c.dataSetId,u=null===(r=t.__sakota__.getTarget())||void 0===r?void 0:r.dataDefs[l];if(u){var p=u[s];if(p&&p.roleBound){var h=p.taskId;if(h)this.removeTask(h,c);else if(p.roleId){var d=u[p.roleId];d&&d.taskId&&this.taskManager.updateTask(d.taskId,void 0,p.systemType)}}}}}}},e.prototype.processLabelChanges=function(t,n,r){var i=r?n.$set:n.$unset,a=function(n){e.regexDataDefLabel.lastIndex=0;var r=e.regexDataDefLabel.exec(n);if(!r)return"continue";var i=r[1],a=r[2],c=t.dataDefs[i];if(!c)return"continue";var l=c[a];if(!l)return"continue";if(!l.roleBound)return"continue";var u=Object(s.filter)(c,(function(e){return e.systemType===o.v.Role&&e.id!==a&&e.label===l.label}));u&&u.length>0?l.roleId=u[0].id:delete l.roleId};for(var c in i)a(c)},e.prototype.processShapeAdded=function(t,n){var r=this,a=n.$set,c=function(n){var c=e.regexShapeAdded.exec(n);if(!c)return"continue";var l=a[n];if(!l.data)return"continue";var u=c[1],p=t.shapes[u];if(l.eData)return"continue";var h=t.getDataDef(u);p.tasks=[],Object.keys(p.data).forEach((function(e){var n=h[e];if(n&&n.roleBound){var a=n,c=p.data[a.id].value;if(a.systemType===o.v.Role&&r.hasRoleUsers(c)){var l=i.sb.taskId();r.addTask(l,a.id,t,p,Object(s.map)(c.people,(function(e){return{userId:e.id}})),h),l&&(a.taskId=l,r.setRoleBoundsTaskId(h,a))}}}))};for(var l in a)c(l)},e.prototype.processDataChanges=function(t,n,r){var i=r?n.$set:n.$unset,a=function(i){e.regexDataItemVal.lastIndex=0;var a=e.regexDataItemVal.exec(i);if(!a)return"continue";var l=a[1],u=a[2],p=t.shapes[l];if(p.isConnector())return"continue";var h=t.getDataDef(l),d=h[u];if(d&&d.roleBound){var f=t.getDataItem(l,u);if(f.systemType===o.v.Role)c.doTaskChanges(t,p,h,f,n,r);else if(f.roleId&&h[f.roleId]&&c.hasRoleUsers(p.data[f.roleId].value))c.doTaskChanges(t,p,h,f,n,r);else{var g=c.getRoleFields(h,p),m=void 0;if(g&&g.length)if(1===g.length)m=g[0].id;else{var v=Object(s.find)(g,(function(e){return e.label===f.label}));if(v)m=v.id;else{var b=Object(s.filter)(h,(function(e){return e.roleBound&&e.systemType===f.systemType}));b&&1===b.length&&(m=g[0].id)}}m&&(d.roleId=m,c.doTaskChanges(t,p,h,f,n,r))}}},c=this;for(var l in i)a(l)},e.prototype.getRoleFields=function(e,t){for(var n=Object(s.filter)(e,(function(e){return e.systemType===o.v.Role})),r=[],i=0;i<n.length;i++){var a=t.data[n[i].id];this.hasRoleUsers(a.value)&&r.push(n[i])}return r},e.prototype.doTaskChanges=function(e,t,n,r,a,c){var l=this,h=t.data[r.id].value;if(r.taskId)if(c&&this.hasRoleUsers(h))this.taskLocator.getTask(r.taskId).pipe(Object(u.a)(1),Object(p.a)((function(i){i?l.taskManager.updateTask(r.taskId,h,r.systemType):(l.addTask(r.taskId,r.id,e,t,Object(s.map)(h.people,(function(e){return{userId:e.id}})),n),r.taskId=r.taskId,l.setRoleBoundsTaskId(n,r))}))).subscribe();else{var d=r.taskId;this.removeTask(d,t),delete r.taskId}else if(r.roleId){var f=n[r.roleId];f&&f.taskId?this.taskManager.updateTask(f.taskId,h,r.systemType):delete r.roleId}else if(r.systemType===o.v.Role&&this.hasRoleUsers(h)&&c){d=i.sb.taskId();this.addTask(d,r.id,e,t,Object(s.map)(h.people,(function(e){return{userId:e.id}})),n),d&&(r.taskId=d,this.setRoleBoundsTaskId(n,r))}},e.prototype.addTask=function(e,t,n,i,a,o){var s=this.taskManager.addTask(e,t,n,i,a,o);return i.tasks||(i.tasks=[]),i.tasks=Object(r.j)(i.tasks,[e]),s.id},e.prototype.removeTask=function(e,t){t.tasks&&(t.tasks=Object(s.without)(t.tasks,e),0===t.tasks.length&&delete t.tasks),this.taskManager.removeTask(e)},e.prototype.hasRoleUsers=function(e){return!!(e&&e.people&&e.people.length>0)},e.regexDataItemVal=/shapes\.([^\.]+)\.data\.([^\.]+)\.value/g,e.regexDataDefLabel=/dataDefs\.([^\.]+)\.([^\.]+)\.label/g,e.regexDataItem=/shapes\.([^\.]+)\.data\.([^\.]+)$/g,e.regexShapeAdded=/shapes\.([^\.]+)$/,e.regexText=/shapes\.([^\.]+)\.texts.([^\.]+)\.content/g,e.\u0275fac=function(t){return new(t||e)(h.pc(i.Ib),h.pc(i.B),h.pc(c.a),h.pc(l.a))},e.\u0275prov=h.bc({token:e,factory:e.\u0275fac}),e}()},B1sc:function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("VrFO")),a=r(n("Y9Ll")),o=n("xEF+"),s=n("g5wR").states,c=function(){function e(t,n,r){(0,i.default)(this,e),this._grammar=t,this._state="expectOperand",this._tree=null,this._exprStr=n||"",this._relative=!1,this._stopMap=r||{}}return(0,a.default)(e,[{key:"addToken",value:function(e){if("complete"===this._state)throw new Error("Cannot add a new token to a completed Parser");var t=s[this._state],n=this._exprStr;if(this._exprStr+=e.raw,t.subHandler){this._subParser||this._startSubExpression(n);var r=this._subParser.addToken(e);if(r){if(this._endSubExpression(),this._parentStop)return r;this._state=r}}else{if(!t.tokenTypes[e.type]){if(this._stopMap[e.type])return this._stopMap[e.type];throw new Error("Token ".concat(e.raw," (").concat(e.type,") unexpected in expression: ").concat(this._exprStr))}var i=t.tokenTypes[e.type],a=o[e.type];i.handler&&(a=i.handler),a&&a.call(this,e),i.toState&&(this._state=i.toState)}return!1}},{key:"addTokens",value:function(e){e.forEach(this.addToken,this)}},{key:"complete",value:function(){if(this._cursor&&!s[this._state].completable)throw new Error("Unexpected end of expression: ".concat(this._exprStr));return this._subParser&&this._endSubExpression(),this._state="complete",this._cursor?this._tree:null}},{key:"isRelative",value:function(){return this._relative}},{key:"_endSubExpression",value:function(){s[this._state].subHandler.call(this,this._subParser.complete()),this._subParser=null}},{key:"_placeAtCursor",value:function(e){this._cursor?(this._cursor.right=e,this._setParent(e,this._cursor)):this._tree=e,this._cursor=e}},{key:"_placeBeforeCursor",value:function(e){this._cursor=this._cursor._parent,this._placeAtCursor(e)}},{key:"_setParent",value:function(e,t){Object.defineProperty(e,"_parent",{value:t,writable:!0})}},{key:"_startSubExpression",value:function(t){var n=s[this._state].endStates;n||(this._parentStop=!0,n=this._stopMap),this._subParser=new e(this._grammar,t,n)}}]),e}();e.exports=c},B82N:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("0jHB"),i=n("XWWj"),a=n("J+dc"),o=n("xVbo"),s=n("TLy2"),c=n("YtkY"),l=(n("yZNT"),n("C05f")),u=n("GoAz"),p=n("nsO7"),h=n("EM62"),d=function(){function e(e){this.definitionLocator=e,this.allDefs=new l.a(null),this.type="shape",this.loadAllDefs()}return e.prototype.search=function(e,t){return this.allDefs.pipe(Object(a.a)(1),Object(o.a)((function(e){return!!e})),Object(s.a)((function(n){return Object(u.a)(Object(i.goAsync)(e,n,t))})),Object(c.a)((function(e){var t=[];return e.forEach((function(e){t.push({id:e.obj.defId,version:e.obj.version,type:"shape",score:e.score})})),t})))},e.prototype.loadAllDefs=function(){var e=this;this.definitionLocator.getDefs().pipe(Object(a.a)(1),Object(c.a)((function(e){return e.defs.filter((function(e){return("connector"!==e.type||"edata"!==e.type)&&(!e.hasOwnProperty("isSearchable")||e.isSearchable)})).map((function(e){var t=Object(p.clone)(e);return t.tags="string"==typeof e.tags?e.tags:(e.tags||[]).join(" "),t.description=e.description||"",t}))}))).subscribe((function(t){e.allDefs.next(t)}))},e.\u0275fac=function(t){return new(t||e)(h.pc(r.a))},e.\u0275prov=h.bc({token:e,factory:e.\u0275fac}),e}()},"BL7/":function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n("Jzy8"),i=n("W9bu"),a=n("X0jn"),o=(n("NNJu"),n("5xGT")),s=n("C05f"),c=n("g6G6"),l=n("6Oco"),u=n("KTx3"),p=n("TLy2"),h=n("8j5Y"),d=n("xVbo"),f=n("c7W3"),g=n("r3/A"),m=n("EM62"),v=n("2kYt"),b=n("Wrqg"),y=n("s2Ay"),x=["textInput"],C=["container"];function w(e,t){if(1&e){var n=m.mc();m.lc(0,"div",13),m.lc(1,"a",14),m.tc("blur",(function(){return m.Pc(n),m.xc(2).focusTextEditor()}))("click",(function(e){return m.Pc(n),m.xc(2).navigate(e)})),m.ed(2),m.kc(),m.kc()}if(2&e){var r=t.ngIf;m.Sb(1),m.Dc("href",r,m.Sc),m.Sb(1),m.fd(r)}}function k(e,t){if(1&e){var n=m.mc();m.lc(0,"div",6),m.cd(1,w,3,2,"div",7),m.yc(2,"async"),m.lc(3,"button",8),m.tc("click",(function(){return m.Pc(n),m.xc().onEditBtnClick()})),m.wc(),m.lc(4,"svg",9),m.gc(5,"use",10),m.kc(),m.kc(),m.vc(),m.lc(6,"button",11),m.tc("click",(function(){return m.Pc(n),m.xc().removeLink()})),m.wc(),m.lc(7,"svg",9),m.gc(8,"use",12),m.kc(),m.kc(),m.kc()}if(2&e){var r=m.xc();m.Sb(1),m.Cc("ngIf",m.zc(2,1,r.hyperlinkValue))}}function S(e,t){if(1&e){var n=m.mc();m.lc(0,"div"),m.lc(1,"text-input",15,16),m.tc("updateText",(function(){return m.Pc(n),m.xc().handleInputChange()}))("keydown",(function(e){return m.Pc(n),m.xc().handleKeydown(e)}))("blur",(function(){return m.Pc(n),m.xc().focusTextEditor()})),m.yc(3,"translate"),m.yc(4,"async"),m.kc(),m.kc()}if(2&e){var r=m.xc();m.Sb(1),m.Dc("placeholder",m.zc(3,2,"LABELS.ADD_LINK_AND_ENTER")),m.Cc("value",m.zc(4,4,r.hyperlinkValue))}}function O(e,t){1&e&&(m.lc(0,"div",17),m.ed(1,"LABELS.PRESS_ESCAPE_TO_CANCEL"),m.kc())}var E=function(){function e(e,t,n){this.linkService=e,this.commandService=t,this.state=n,this.toolbarGap=2,this.subs=[],this.editorState=new s.a("view"),this.hyperlinkValue=new s.a("")}return Object.defineProperty(e.prototype,"containerElement",{get:function(){return this.container.nativeElement},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.containerElement.style.display="none",this.subs.push(this.state.changes("HyperlinkEditState").pipe(Object(p.a)((function(t){return t.open?(e.editorState.next(t.state||"view"),e.hyperlinkValue.next(t.link),e.containerElement.style.display="block",e.textInput&&e.textInput.focus(),e.position(),Object(c.a)(e.onEscape().pipe(Object(h.a)((function(){return e.closeEditor()}))),e.listenToViewportChanges().pipe(Object(h.a)((function(){return e.position()}))))):(e.containerElement.style.display="none",Object(l.b)())}))).subscribe())},e.prototype.onEditBtnClick=function(){o.Kb.track("hyperlinkEditor.edit.click"),this.editorState.next("edit")},e.prototype.ngOnDestroy=function(){for(;this.subs.length;)this.subs.pop().unsubscribe()},e.prototype.handleKeydown=function(e){e.keyCode===a.j.Enter?(e.preventDefault(),this.applyLink()):e.keyCode===a.j.Escape&&this.closeEditor()},e.prototype.handleInputChange=function(){this.containerElement.classList.contains("invalid-url")&&this.containerElement.classList.remove("invalid-url")},e.prototype.focusTextEditor=function(){this.commandService.dispatch(f.a.applyTextEditorStyles,{styles:{},takeFocus:!0})},e.prototype.navigate=function(e){e.preventDefault(),this.linkService.navigate(r.K.fromUrl(this.hyperlinkValue.value))},e.prototype.position=function(){var e=this.state.get("TextEditorState"),t=this.containerElement.getBoundingClientRect();if(e.selection){var n=e.selection.width||1,r=this.state.get("DiagramZoomLevel"),i=this.state.get("DiagramPan"),a=r/e.zoom,o=i.x-e.pan.x*a,s=i.y-e.pan.y*a,c=e.editorBounds.x*a+o+(e.selection.x+n/2)*r-t.width/2,l=e.editorBounds.y*a+s+(e.selection.y+e.selection.height+this.toolbarGap)*a;this.containerElement.style.top=l+"px",this.containerElement.style.left=c+"px"}},e.prototype.onEscape=function(){return Object(u.a)(window,"keydown").pipe(Object(d.a)((function(e){return e.keyCode===a.j.Escape})))},e.prototype.closeEditor=function(){this.hyperlinkValue.next(""),this.commandService.dispatch(f.a.openHyperlinkEditor,{open:!1}),this.focusTextEditor()},e.prototype.removeLink=function(){o.Kb.track("hyperlinkEditor.unlink.click"),this.commandService.dispatch(f.a.applyTextEditorStyles,{styles:{link:void 0,color:a.b.color,underline:!1}}),this.closeEditor()},e.prototype.applyLink=function(){if(this.textInput&&this.textInput.value){var e=encodeURI(this.textInput.value);if(g(e)||(e="https://"+e),!g(e))return void this.containerElement.classList.add("invalid-url");this.commandService.dispatch(f.a.applyTextEditorStyles,{styles:{link:e,color:"rgb(94, 156, 211)",underline:!0}})}this.closeEditor()},e.prototype.listenToViewportChanges=function(){return Object(c.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel"))},e.\u0275fac=function(t){return new(t||e)(m.fc(i.a),m.fc(o.B),m.fc(o.Ib))},e.\u0275cmp=m.Zb({type:e,selectors:[["hyperlink-editor"]],viewQuery:function(e,t){var n;(1&e&&(m.jd(x,!0),m.jd(C,!0)),2&e)&&(m.Lc(n=m.uc())&&(t.textInput=n.first),m.Lc(n=m.uc())&&(t.container=n.first))},decls:6,vars:3,consts:[["data-keep-text-open","true",1,"hyperlink-editor-container"],["container",""],[1,"hyperlink-editor-inner-container"],["class","fx-height-inherit fx-center-vertical",4,"ngIf"],[4,"ngIf"],["class","hyperlink-escape-lable","translate","",4,"ngIf"],[1,"fx-height-inherit","fx-center-vertical"],["class","fx-flex-expand fx-ellipsis",4,"ngIf"],[1,"hyperlink-edit-btn","nu-btn-small","nu-btn-icon","lib-browser-close-btn","fx-no-padding",3,"click"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-edit"],[1,"hyperlink-remove-btn","nu-btn-small","nu-btn-icon","lib-browser-close-btn",3,"click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-trash-thin"],[1,"fx-flex-expand","fx-ellipsis"],["target","_blank",1,"hyperlink-label","fx-ellipsis","primary",3,"href","blur","click"],["autoFocus","true","emitForInputChange","true",1,"hyperlink-input",3,"placeholder","value","updateText","keydown","blur"],["textInput",""],["translate","",1,"hyperlink-escape-lable"]],template:function(e,t){1&e&&(m.lc(0,"div",0,1),m.lc(2,"div",2),m.cd(3,k,9,3,"div",3),m.cd(4,S,5,6,"div",4),m.kc(),m.cd(5,O,2,0,"div",5),m.kc()),2&e&&(m.Sb(3),m.Cc("ngIf","view"===t.editorState.value),m.Sb(1),m.Cc("ngIf","edit"===t.editorState.value),m.Sb(1),m.Cc("ngIf","edit"===t.editorState.value))},directives:[v.t,b.a,y.a],pipes:[v.b,y.d],styles:[".hyperlink-editor-inner-container[_ngcontent-%COMP%]{position:relative;width:320px;height:50px;margin:8px;background:#fff;border:1px solid #dcdcdc;box-sizing:border-box;border-radius:3px;z-index:2}.hyperlink-editor-container[_ngcontent-%COMP%]{position:absolute}.hyperlink-label[_ngcontent-%COMP%]{padding:15px 45px 15px 15px}.hyperlink-input[_ngcontent-%COMP%]{float:left;width:302px;margin:8px}.hyperlink-input[_ngcontent-%COMP%]  input{margin:0!important}.hyperlink-editor-container.invalid-url[_ngcontent-%COMP%]   .hyperlink-input[_ngcontent-%COMP%]  input{border:1px solid #ffbaba}.hyperlink-remove-btn[_ngcontent-%COMP%]{padding-left:0}.hyperlink-escape-lable[_ngcontent-%COMP%]{text-align:center;font-size:12px;line-height:15px}"],changeDetection:0}),e}()},BQCR:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("5xGT"),i=n("SBw3"),a=n("ROBh"),o=n("QoSw"),s=n("YtkY"),c=n("EM62"),l=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return t.data.forEach((function(e){e.itemIcon=e.buttonIcon})),Object(a.a)({value:t.data,validation:n.data.validation})},e.prototype.isEnabled=function(e){var t=this.state.get("EditingText");return t.textId?this.ll.forCurrent(!0).getShapeOnce(t.shapeId).pipe(Object(s.a)((function(e){var n=e.texts[t.textId];return!(!n||!n.isAlignable())}))):Object(a.a)(!1)},e.prototype.getApplyData=function(e,t){return Object(a.a)({styles:{align:t.value},takeFocus:t.takeFocus})},e.\u0275fac=function(t){return new(t||e)(c.pc(o.a),c.pc(r.Ib),c.pc(i.a))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},BQpn:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("D57K"),i=n("nsO7"),a=n("ROBh"),o=n("P4Xx"),s=n("fB16"),c=n("5xGT"),l=n("EM62"),u=n("SBw3"),p=n("QoSw"),h=n("TLy2"),d=n("xVbo"),f=n("J+dc"),g=n("YtkY"),m=function(e){function t(t,n,r,i,a){var o=e.call(this,n,r,a)||this;return o.state=t,o.ll=i,o}return Object(r.e)(t,e),t.prototype.getContextMenuItemsId=function(e){var t=this;return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(h.a)((function(n){if("canvasRightClick"===e.type)return Object(a.a)(n.getContextMenuItems());var r=e.relatedShape.name;return t.state.changes("Selected").pipe(Object(d.a)((function(e){return e.length>1||e[0]===r})),Object(f.a)(1),Object(h.a)((function(e){return t.getShapeMenuItems(e)})))})))},t.prototype.getShapeMenuItems=function(e){var t,n=this;return 1===e.length?t=this.getMenuItemsForSingleShape(e[0]):e.length>1&&(t=this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(h.a)((function(t){return t.sameType(e)?n.getMenuItemsForMultiShapeSameType(e):n.getMenuItemsForMultiShape(e)})))),t.pipe(Object(h.a)((function(e){var t;return t=e.map((function(e){return n.isFeatureEnabled(e)})),o.a.apply(void 0,Object(r.j)(t)).pipe(Object(g.a)((function(t){return e.filter((function(e,n){return t[n]}))})))})))},t.prototype.isFeatureEnabled=function(e){var t=this.featureList.getFeature(e);if(t.transformer){var n=this.injector.get(t.transformer);if(n.isEnabled)return n.isEnabled(t.id)}return Object(a.a)(!0)},t.prototype.getMenuItemsForSingleShape=function(e){return this.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(g.a)((function(e){return e.getContextMenuItems()})))},t.prototype.getMenuItemsForMultiShapeSameType=function(e){var t=this;return o.a.apply(void 0,Object(r.j)(e.map((function(e){return t.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(g.a)((function(e){return e.getContextMenuForSameType()})))})))).pipe(Object(g.a)((function(e){return e.reduce((function(e,t){return Object(i.intersection)(e,t)}))})))},t.prototype.getMenuItemsForMultiShape=function(e){var t=this;return o.a.apply(void 0,Object(r.j)(e.map((function(e){return t.ll.forCurrent(!1).getShapeOnce(e).pipe(Object(g.a)((function(e){return e.getContextMenuForMultipleTypes()})))})))).pipe(Object(g.a)((function(e){return e.reduce((function(e,t){return Object(i.intersection)(e,t)}))})))},t.\u0275fac=function(e){return new(e||t)(l.pc(c.Ib),l.pc(l.C),l.pc(c.B),l.pc(p.a),l.pc(u.a))},t.\u0275prov=l.bc({token:t,factory:t.\u0275fac}),t}(s.a)},C3qL:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("ROBh"),a=n("nsO7"),o=n("5xGT"),s=n("EM62"),c=function(){function e(e){this.state=e,this.fillColorLabel="Fill Color ",this.lineColorLabel="Line Color "}return e.prototype.getFeatureData=function(e,t){var n=this.getDataKeys(t),a=[];return n.forEach((function(e){var n=t[e];n.locked||a.push(Object(r.a)(Object(r.a)({},n),{id:e}))})),a.sort((function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:0})),Object(i.a)(this.setLabels(a))},e.prototype.getApplyData=function(e,t){var n={},r=Object(a.cloneDeep)(t.item),o=r.id;return delete r.id,r.style.fillColor&&(r.style.fillColor=t.change.value),r.style.lineColor&&(r.style.lineColor=t.change.value),n[o]=r,Object(i.a)({styleDefinition:n})},e.prototype.getDataKeys=function(e){var t=Object.keys(e),n=this.state.get("InnerShapeSelection"),r=Object(a.flatten)(Object.keys(n).map((function(e){return n[e]})));if(r.length>0){if((t=Object(a.intersection)(t,r)).length!==r.length&&t.push("commonStyles"),t.length>1){var i=t.every((function(t,n,r){return 0===n||e[t].style.fillColor===e[r[n-1]].style.fillColor})),o=t.every((function(t,n,r){return 0===n||e[t].style.lineColor===e[r[n-1]].style.lineColor}));i&&o?t=[t[0]]:i?(e[t[0]].label="diffLine",t=[t[0]]):o?(e[t[0]].label="diffFill",t=[t[0]]):(e[t[0]].label="diffBoth",t=[t[0]])}}else{if(Object.keys(e).find((function(e){return e.includes("commonStyles")})))return Object.keys(e).filter((function(e){return e.includes("commonStyles")}));t=Object.keys(e)}return t},e.prototype.setLabels=function(e){var t=this,n=1,i=1,a=[];return e.forEach((function(o){if(o.label)if(o.label.includes("diff")){var s=o.label.includes("diffLine")||o.label.includes("diffBoth"),c=o.label.includes("diffFill")||o.label.includes("diffBoth");a.push(Object(r.a)(Object(r.a)({},o),{id:o.id+(c?"difffill":"fill"),style:{fillColor:o.style.fillColor},label:t.fillColorLabel}),Object(r.a)(Object(r.a)({},o),{id:o.id+(s?"diffline":"line"),style:{lineColor:o.style.lineColor},label:t.lineColorLabel})),e=e.filter((function(e){return e!==o}))}else o.label.startsWith(t.fillColorLabel+n)&&(n+=1),o.label.startsWith(t.lineColorLabel+i)&&(i+=1);else if(o.style.fillColor&&o.style.lineColor){var l=1===e.length&&0===a.length;a.push(Object(r.a)(Object(r.a)({},o),{id:o.id+"fill",style:{fillColor:o.style.fillColor},label:t.fillColorLabel+(l?"":n)}),Object(r.a)(Object(r.a)({},o),{id:o.id+"line",style:{lineColor:o.style.lineColor},label:t.lineColorLabel+(l?"":i)})),n+=1,i+=1,e=e.filter((function(e){return e!==o}))}else o.style.fillColor?(o.label=t.fillColorLabel+n,n+=1):o.style.lineColor&&(o.label=t.lineColorLabel+i,i+=1)})),e.push.apply(e,Object(r.j)(a)),e},e.\u0275fac=function(t){return new(t||e)(s.pc(o.Ib))},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},CdCz:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("5vYS"),a=n("5xGT"),o=n("19Zn"),s=n("nsO7"),c=n("6Oco"),l=n("EM62"),u=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"ConnectorLookupValueBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){if(t!==a.A.EXECUTE)return c.a;var n=e.__sakota__.getChanges();if(!Object(s.isEmpty)(n)){var r=e.__sakota__.getTarget(),l=Object(o.K)(n);if(l.shapes)for(var u in l.shapes){if(!e.shapes[u]&&r.shapes[u]instanceof i.a)(h=r.shapes[u]).defId===o.r.defId&&this.removeLookupValue(h,e);else if(e.shapes[u]instanceof i.a){var p=l.shapes[u];if(p.$set){var h=e.shapes[u];if(p.$set.defId){var d=h.__sakota__.getTarget(),f=h.defId,g=d.defId;f===o.r.defId?this.addLookupValue(h,e):g===o.r.defId&&this.removeLookupValue(d,e)}else if(p.$set.handshake&&h.defId===o.r.defId){d=h.__sakota__.getTarget();this.addLookupValue(h,e),this.removeLookupValue(d,e)}}}}}return c.a},e.prototype.addLookupValue=function(e,t){var n=e.getFromEndpoint(t).shape,i=e.getToEndpoint(t).shape,a=n.data.hasOwnProperty(e.handshake[0])?n:i,o=(a===n?i:n).entityId,s=a.data[e.handshake[0]].value;-1===s.indexOf(o)&&(t.shapes[a.id].data[e.handshake[0]].value=Object(r.j)(s,[o]))},e.prototype.removeLookupValue=function(e,t){var n=e.getFromEndpoint(t).shape,r=e.getToEndpoint(t).shape,i=n.data.hasOwnProperty(e.handshake[0])?n:r;if(t.shapes[i.id]){var a=(i===n?r:n).entityId,o=i.data[e.handshake[0]].value,s=o.indexOf(a);if(s>-1){var c=o.slice();c.splice(s,1),t.shapes[i.id].data[e.handshake[0]].value=c}}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.bc({token:e,factory:e.\u0275fac}),e}()},CrNP:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("D57K"),i=n("5xGT"),a=n("X0jn"),o=n("nsO7"),s=n("C05f"),c=n("ROBh"),l=n("HM3f"),u=n("xVbo"),p=n("YtkY"),h=n("Ohay"),d=n("TLy2"),f=n("8j5Y"),g=n("QoSw"),m=n("diDk"),v=n("c7W3"),b=n("iim9"),y=n("EM62"),x=function(){function e(e,t,n,r){this.state=e,this.dll=t,this.command=n,this.ell=r,this.defaultRecentShapeList=[{defId:"creately.basic.rectangle",weight:1},{defId:"creately.basic.ellipse",weight:1},{defId:"creately.basic.square",weight:1},{defId:"creately.basic.circle",weight:1},{defId:"creately.basic.table",weight:1},{defId:"creately.basic.frame_paper",weight:1},{defId:"creately.arrows.toleftarrow",weight:1},{defId:"creately.arrows.uparrow",weight:1},{defId:"creately.arrows.downarrow",weight:1},{defId:"creately.arrows.torightarrow",weight:1}],this.defaultRecentStickerList=[{weight:1,defId:"creately.material-icons.sentiment_satisfied_twotone_2"},{weight:1,defId:"creately.material-icons.favorite_twotone_2"},{weight:1,defId:"creately.material-icons.thumb_up_twotone_2"},{weight:1,defId:"creately.material-icons.thumb_down_twotone_2"},{weight:1,defId:"creately.material-icons.star_twotone_2"}],this.recentListLimit=10,this.subs=[],this.recentShapeListFromDiagram=[],this.recentShapeStream=new s.a([]),this.init()}return e.prototype.getShapes=function(){return this.recentShapeStream},e.prototype.getStickers=function(){return Object(c.a)(this.defaultRecentStickerList)},e.prototype.getDatabaseShapes=function(){var e=this;return this.state.changes("CurrentLibraries").pipe(Object(u.a)((function(e){return!!e})),Object(p.a)((function(e){return e.filter((function(e){return e.id.includes("custom-database-")}))})),Object(h.a)((function(t,n){return e.compareLibs(t,n)})),Object(d.a)((function(t){var n=[];return t.forEach((function(t){var i=t.id;if(i.includes(b.b)){var a=i.split(b.b)[1];n.push(e.ell.getEData(a).pipe(Object(d.a)((function(e){return e.getEDataModel()})),Object(h.a)((function(t,n){return e.comparedEntityIds(t.getActiveCustomEntityDefIds(),n.getActiveCustomEntityDefIds())})),Object(p.a)((function(t){return t.getActiveCustomEntityDefs().map((function(t){var n,i,o=t.defaultShape||{defId:"creately.basic.rectangle",version:3};return{id:t.id,name:t.name,data:e.getShapeDataItems(t.dataItems),defId:o.defId,drawCode:o.drawCode,version:o.version,entityDefId:t.id,style:null===(i=null==o?void 0:o.style)||void 0===i?void 0:i.shape,typeStyle:Object(r.a)(Object(r.a)({},o.style),{defaultShapeContext:o.defaultShapeContext}),textStyle:o.texts,shapeContext:o.defaultShapeContext,eData:(n={},n[a]=null,n)}}))}))))}})),Object(l.b)(n,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return[].concat.apply([],Object(r.j)(e))}))})))},e.prototype.init=function(){var e=this,t=this.state.get("CurrentUser");this.subs.push(this.dll.forCurrentObserver(!1).pipe(Object(p.a)((function(e){return e.getDiagramOnce()})),Object(d.a)((function(n){return n.pipe(Object(p.a)((function(e){return e.getRecentShapes(t)})),Object(p.a)((function(t){return e.prepareRecentShapeList(t)})),Object(f.a)((function(t){e.recentShapeListFromDiagram=t,e.recentShapeStream.next(t)})))}))).subscribe(),this.state.changes("LastAddedShape").pipe(Object(u.a)((function(t){return!e.isDefIdASticker(t)})),Object(f.a)((function(t){return e.addShapeToRecent(t)}))).subscribe())},e.prototype.isDefIdASticker=function(e){return!(!e||!e.startsWith("creately.icons")&&!e.startsWith("creately.material-icons"))},e.prototype.addShapeToRecent=function(e){if(e){var t=!1,n=Object(o.findIndex)(this.recentShapeListFromDiagram,(function(t){return t.defId===e}));if(-1===n){t=!0;var r=this.findLeastPriorityShape(this.recentShapeListFromDiagram);n=r?Object(o.findIndex)(this.recentShapeListFromDiagram,(function(e){return e.defId===r.defId})):this.recentShapeListFromDiagram.length,this.recentShapeListFromDiagram[n]={defId:e,weight:2}}else this.lastAddedShape!==e&&(this.recentShapeListFromDiagram[n].weight+=1),this.recentShapeListFromDiagram[n].added=Date.now();t&&(this.recentShapeStream.next(this.recentShapeListFromDiagram),this.updateRecentShapesToDiagram(this.recentShapeListFromDiagram.filter((function(e){return e.added})))),this.lastAddedShape=e}},e.prototype.findLeastPriorityShape=function(e){var t=this;return e.map((function(e){return e.weight=t.getPseudoWeight(e),e})).sort((function(e,t){return e.weight-t.weight})).pop()},e.prototype.getPseudoWeight=function(e){var t=e.weight,n=Date.now()-e.added||0;return n<500?t+=30:n<5e3?t+=10:n<5e4&&(t+=2),t},e.prototype.updateRecentShapesToDiagram=function(e){e.length&&this.command.dispatch(v.a.updateRecentShapes,{shapes:e})},e.prototype.prepareRecentShapeList=function(e){if(e.length){var t=e;return e.length<this.recentListLimit&&(t=e.concat(this.defaultRecentShapeList),t=Object(o.uniqBy)(t,"defId")),t.slice(0,this.recentListLimit)}return this.defaultRecentShapeList},e.prototype.comparedEntityIds=function(e,t){return!e&&!t||!(!e||!t||e.length!==t.length)&&(e.every((function(e){return t.includes(e)}))&&t.every((function(t){return e.includes(t)})))},e.prototype.compareLibs=function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!==t.length)return!1;var n=t.map((function(e){return e.id}));if(e.every((function(e){return n.includes(e.id)}))){var r=e.map((function(e){return e.id}));return n.every((function(e){return r.includes(e)}))}return!1},e.prototype.getShapeDataItems=function(e){var t=Object.assign({},e);for(var n in t){var i=t[n];i.type===a.c.LOOKUP&&(t[n]=Object(r.a)(Object(r.a)({},i),{value:[]}))}return t},e.\u0275fac=function(t){return new(t||e)(y.pc(i.Ib),y.pc(g.a),y.pc(i.B),y.pc(m.a))},e.\u0275prov=y.bc({token:e,factory:e.\u0275fac}),e}()},Cupj:function(e,t,n){},Di8k:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("YtkY"),l=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this;return this.locator.getDiagramOnce().pipe(Object(c.a)((function(n){var i,a,o=t.state.get("Selected"),s=!1;try{for(var c=Object(r.k)(o),l=c.next();!l.done;l=c.next()){var u=l.value;if(!n.shapes[u].showBumps){s=!1;break}s=!0}}catch(p){i={error:p}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return"showConnectorBumps"===e?!s:"hideConnectorBumps"===e&&s})))},e.prototype.getFeatureData=function(e,t){void 0===t&&(t={});var n=void 0===t.selection||t.selection;return"showConnectorBumps"===e?Object(o.a)({showLineBumps:!0,selection:n}):Object(o.a)({showLineBumps:!1,selection:n})},e.prototype.getApplyData=function(e,t){return Object(o.a)(t)},e.\u0275fac=function(t){return new(t||e)(l.pc(s.a),l.pc(a.Ib),l.pc(i.a))},e.\u0275prov=l.bc({token:e,factory:e.\u0275fac}),e}()},Dnwm:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("X0jn"),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;if(n!==i.r.Connector)throw new Error("ConnectorDisplayView cannot be created with "+n+" shape type.");return r}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"isShapeView",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnectorView",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getCursor=function(e){return{cursor:"default",tail:null,type:"css",viewingArea:"app"}},t}(n("deqJ").a),o=n("5xGT"),s=n("19Zn"),c=function(e){function t(t){return e.call(this,t)||this}return Object(r.e)(t,e),t.prototype.update=function(t,n,r){if(e.prototype.update.call(this,t,n),r){var i=void 0;i=void 0!==t.width?new o.vb(0,0,t.width,t.height):this.getTextBounds(t.value),this.position(r,i),this.updateHitArea(t,i)}this.updateViewCache(t,n)},t.prototype.position=function(e,t){this.x=e.x-t.width/2,this.y=e.y-t.height/2},t}(n("wOpJ").a),l=n("h1tj"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textMaskPadding=3,t.minLineThickness=10,t}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeView",{get:function(){return this.shape},set:function(e){this.shape=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitArea",{get:function(){if(this._hitArea)return this._hitArea.graphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedShape",{get:function(){return this.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this.shape.graphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskPadding",{get:function(){return 250},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){this.container=new a(this.id,this.model.type),this.shape=new l.Shape,this.container.convertToCursorDrawable(this.shape),this.shape.name=this.id,this._textMask=new l.Shape,this.shape.mask=this._textMask,this.container.addChild(this.shape)},t.prototype.beginDraw=function(){this.beginDrawHitArea(),this.updateTextsMask(),e.prototype.beginDraw.call(this)},t.prototype.beginDrawHitArea=function(){if(this.model.style.lineThickness>=this.minLineThickness)return this._hitArea=void 0,void(this.shape.hitArea=void 0);this._hitArea||(this._hitArea=new l.Shape,this.shape.hitArea=this._hitArea),this.hitArea.clear(),this.hitArea.setStrokeStyle(this.minLineThickness,"round").beginStroke("#F00")},t.prototype.endDraw=function(){e.prototype.endDraw.call(this),this.hitArea&&this.hitArea.endStroke()},t.prototype.addText=function(e){var t=new c(e);this.container.addChild(t),this._texts.push(t)},t.prototype.removeText=function(t){e.prototype.removeText.call(this,t),this.renderedShape.removeChild(t)},t.prototype.updateTextsMask=function(){var e=this;if(this._texts){this._textMask.graphics.clear(),this._textMask.graphics.beginFill("#F00"),this._texts.forEach((function(t){var n=e.model.texts[t.name],r=new o.vb(0,0,n.width,n.height);if(0!==r.width&&0!==r.height&&n.plainText){var i=s.G.getRectangleOnConnector(e.model,n,new o.vb(r.x,r.y,r.width,r.height)).pad(e.textMaskPadding);e.drawRect(e._textMask.graphics,i.x,i.y,i.width,i.height)}}));var t=this.model.bounds.pad(this.maskPadding);this.drawRect(this._textMask.graphics,t.x+t.width,t.y,-t.width,t.height),this._textMask.graphics.endFill()}},t.prototype.drawRect=function(e,t,n,r,i){e.moveTo(t,n),e.lineTo(t+r,n),e.lineTo(t+r,n+i),e.lineTo(t,n+i),e.lineTo(t,n)},t}(s.e)},Ei0d:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("YSjj"),i=n("nsO7"),a=n("1OKj"),o=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new a.Jexl,this._instance.addFunctions(Object(i.pickBy)(r,(function(e){return"function"==typeof e}))),this._instance.addTransform("DATE",(function(e){return e?new Date(e):null})),this._instance.addTransform("DATE_ARRAY",(function(e){if(!Array.isArray(e))throw new Error("Input is not an array");return e.map((function(e){return e?new Date(e):null}))})),this._instance.addTransform("BOOL_ARRAY",(function(e){if(!Array.isArray(e))throw new Error("Input is not an array");return e.map((function(e){return Boolean(e)}))})),this._instance.addTransform("TAGS",(function(e,t){return Array.isArray(e)?e.map((function(e){return e[t]})):[]})),this._instance.addFunction("CONTAINS",(function(e,t){return e.includes(t)}))),this._instance},enumerable:!1,configurable:!0}),e.evaluate=function(e,t){return this.instance.evalSync(e,t)},e._instance=null,e}()},EmgI:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("D57K"),i=n("5xGT"),a=n("X0jn"),o=n("nsO7"),s=n("ROBh"),c=n("P4Xx"),l=n("YtkY"),u=n("J+dc"),p=n("TLy2"),h=n("0jHB"),d=n("ZtqW"),f=n("QoSw"),g=n("nKku"),m=n("EM62"),v=n("s2Ay"),b=function(){function e(e,t,n,r){var i;this.ll=e,this.state=t,this.defLocator=n,this.translate=r,this.translations=((i={})[a.v.DueDate]="SHAPE_DATA.DATA_ITEMS.DUE_DATE.LABEL",i[a.v.EstimateHrs]="SHAPE_DATA.DATA_ITEMS.ESTIMATE.LABEL",i[a.v.EstimatePts]="SHAPE_DATA.DATA_ITEMS.ESTIMATE_PTS.LABEL",i[a.v.Location]="SHAPE_DATA.DATA_ITEMS.LOCATION.LABEL",i[a.v.Priority]="SHAPE_DATA.DATA_ITEMS.PRIORITY.LABEL",i[a.v.StartDate]="SHAPE_DATA.DATA_ITEMS.START_DATE.LABEL",i[a.v.Status]="SHAPE_DATA.DATA_ITEMS.STATUS.LABEL",i[a.v.Role]="SHAPE_DATA.DATA_ITEMS.ROLE.LABEL",i[a.v.XAxis]="SHAPE_DATA.DATA_ITEMS.X_AXIS.LABEL",i[a.v.YAxis]="SHAPE_DATA.DATA_ITEMS.Y_AXIS.LABEL",i)}return e.prototype.exportCSV=function(){return this.getCsvData(this.state.get("Selected")).pipe(Object(l.a)((function(e){return{name:e.name,data:e.csvData.map((function(e){return e.join(",")})).join("\n")}})))},e.prototype.getCsvData=function(e){var t=this;return void 0===e&&(e=[]),this.ll.forCurrentObserver(!1).pipe(Object(u.a)(1),Object(p.a)((function(e){return e.getDiagramOnce()})),Object(p.a)((function(n){var u,p,h=Object.values(n.shapes).filter((function(e){return e instanceof d.a})),f=[],m="_|_";e.length>0&&(h=h.filter((function(t){return e.includes(t.id)})));try{for(var v=Object(r.k)(h),b=v.next();!b.done;b=v.next()){var y=b.value,x=y.getDataItems(n),C=Object.values(x),w=C.filter((function(e){return!!e.type}));C.length>w.length&&i.db.warning("shape contains invalid data.",{diagramId:n.id,shapeId:y.id,data:C,invalid:C.filter((function(e){return!e.type}))});var k=(w=w.filter((function(e){return e.type!==a.c.VIEW&&!1!==e.isPublic}))).reduce((function(e,n){var r,i=g.a.getFormatter(n.type);if(n.label)if(void 0!==n.systemType){var a=t.translate.instant(t.translations[n.systemType]);r=n.label+" - "+a}else r=n.label+m+n.type;else r=n.id;return e[r]=g.a.getEscaped(i(n)),e}),{});k.text=y.primaryTextModel?g.a.getEscaped(y.primaryTextModel.plainText):"",k.typeId=y.defId,f.push(k)}}catch(O){u={error:O}}finally{try{b&&!b.done&&(p=v.return)&&p.call(v)}finally{if(u)throw u.error}}if(0===f.length)return Object(s.a)({name:n.name,csvData:[["text","type","typeId"]]});var S=Object(o.uniq)(f.map((function(e){return e.typeId})));return Object(c.a)(S.map((function(e){return t.defLocator.getDefinition(e)}))).pipe(Object(l.a)((function(e){var t={};e.forEach((function(e){t[e.defId]=e.name})),f.forEach((function(e){e.type=t[e.typeId]}));var r=f.map((function(e){return Object.keys(e)})).reduce((function(e,t){return e.concat(t)}),[]),i=Object(o.difference)(Object(o.uniq)(r),["text","type","typeId"]),a=(i=["text","type","typeId"].concat(i)).map((function(e){return e.includes(m)?e.split(m)[0]:e})),s=f.map((function(e){return i.map((function(t){return e.hasOwnProperty(t)?e[t]:""}))}));return{name:n.name,csvData:[a].concat(s)}})))})))},e.\u0275fac=function(t){return new(t||e)(m.pc(f.a),m.pc(i.Ib),m.pc(h.a),m.pc(v.e))},e.\u0275prov=m.bc({token:e,factory:e.\u0275fac}),e}()},EnCR:function(e,t,n){(function(){"use strict";var r=this._;r||(r=n("6WTZ"));var i={create:function(e,t){var n;if(t?(n=t).eClass=t.eClass||e:e instanceof o?(n={}).eClass=e:n=e,!n.eClass||n.eClass.get("abstract"))throw new Error("Cannot create EObject from undefined or abstract EClass");return new o(n)}};e.exports&&(t=e.exports=i),t.Ecore=i;var a={on:function(e,t,n){var r,i;if(!t)return this;for(e=e.split(/\s+/),r=this._callbacks||(this._callbacks={});i=e.shift();)(r[i]||(r[i]=[])).push(t,n);return this},off:function(e,t,n){var i,a,o,s;if(!(a=this._callbacks))return this;if(!(e||t||n))return delete this._callbacks,this;for(e=e?e.split(/\s+/):r.keys(a);i=e.shift();)if((o=a[i])&&(t||n))for(s=o.length-2;s>=0;s-=2)t&&o[s]!==t||n&&o[s+1]!==n||o.splice(s,2);else delete a[i];return this},trigger:function(e){var t,n,r,i,a,o,s,c;if(!(n=this._callbacks))return this;for(c=[],e=e.split(/\s+/),i=1,a=arguments.length;i<a;i++)c[i-1]=arguments[i];for(;t=e.shift();){if((s=n.all)&&(s=s.slice()),(r=n[t])&&(r=r.slice()),r)for(i=0,a=r.length;i<a;i+=2)r[i].apply(r[i+1]||this,c);if(s)for(o=[t].concat(c),i=0,a=s.length;i<a;i+=2)s[i].apply(s[i+1]||this,o)}return this}},o=function(e){return e||(e={}),this.eClass=e.eClass,this.values={},e._&&(this._=e._),s(this),u(this,e),p(this),this};function s(e){var t=e.eClass;if(t){var n=t.get("eAllStructuralFeatures");r.each(n,(function(t){c(e,t)}))}}function c(e,t){if(e&&t){var n=t.get("name"),r=t.values.defaultValue,a=t.get("upperBound"),o=!0===t.values.derived,s=(t.values.containment,e.values[n]);null==s&&(o?e.values[n]=t.values._:1!==a&&a?s instanceof i.EList?s._setFeature(t):t.isTypeOf("EAttribute")?e.values[n]=[]:e.values[n]=new i.EList(e,t):e.values[n]=null==r?null:0===r?0:!1!==r&&r)}}function l(e,t){return r.find(e.get("eAllStructuralFeatures"),(function(e){return e.values.name===t}))}function u(e,t){if(e.eClass){var n=function(e,t){return"function"==typeof t||t instanceof o?t:i.create(e,t)};r.each(t,(function(t,a){var o=l(this.eClass,a);o&&void 0!==t&&(1===o.get("upperBound")?function(t,r,i,a){i?e.set(t,n(a,r)):e.set(t,r)}(a,t,o.eClass===i.EReference,o.get("eType")):function(t,i,a,o){var s=r.isArray(i)?i:[i];r.each(s,(function(r){a?e.get(t).add(n(o,r)):e.get(t).push(r)}))}(a,t,o.eClass===$,o.get("eType")))}),e)}}function p(e){if(e&&e.eClass){var t=function e(t){var n=t.get("eOperations").array(),i=t.get("eAllSuperTypes");return r.flatten(r.union(n||[],r.map(i||[],(function(t){return e(t)}))))}(e.eClass);t&&r.each(t,(function(t){e[t.get("name")]=t._}))}}i.EObjectPrototype={setEClass:function(e){return this.eClass=e,s(this),u(this,this.values),p(this),this},create:function(e){if("EClass"===this.eClass.get("name"))return i.create(this,e)},has:function(e){return this.values.hasOwnProperty(e)||l(this.eClass,e)},isSet:function(e){if(!this.has(e))return!1;if(!this.eClass)return!1;var t=this.get(e);return t instanceof h?t.size()>0:null!=t},set:function(e,t){var n,i,a,o;if(null===e)return this;e.eClass&&(e=e.get("name")),r.isObject(e)||(i=e,(e={})[i]=t);var s=this.eResource();for(n in e)if(void 0!==(a=e[n])&&this.has(n)){this.isSet(n)&&this.unset(n);var c=l(this.eClass,n),u=c.get("containment");"containment"===n&&"string"==typeof a&&"EReference"===this.eClass.values.name&&(a="true"===a.toLowerCase()),this.values[n]=a,u&&(a.eContainingFeature=c,a.eContainer=this),o="change:"+n,this.trigger("change "+o,n),s&&s.trigger("change",this)}return this},unset:function(e,t){var n,i,a;if(null===e)return this;e.eClass&&(e=e.get("name")),r.isObject(e)||(i=e,(e={})[i]=void 0);var o=this.eResource();for(n in e)if(this.has(n)&&this.isSet(n)){var s=l(this.eClass,n),c=!0===Boolean(s.get("containment")),u=this.values[n];c&&(u.eContainingFeature=void 0,u.eContainer=void 0),this.values[n]=void 0,a="unset:"+n,this.trigger("unset "+a,n),o&&o.trigger("change",this)}return this},get:function(e){if(!e)return null;var t=e.eClass?e.get("name"):e;!r.has(this.values,t)&&this.has(t)&&c(this,l(this.eClass,t));var n=this.values[t];return"function"==typeof n?n.apply(this):n},isTypeOf:function(e){if(!e||!this.eClass)return!1;var t=e.eClass?e.get("name"):e;return this.eClass.get("name")===t},isKindOf:function(e){if(!e||!this.eClass)return!1;if(this.isTypeOf(e))return!0;var t=e.eClass?e.get("name"):e,n=this.eClass.get("eAllSuperTypes");return r.any(n,(function(e){return e.get("name")===t}))},eResource:function(){return this.isKindOf("Resource")?this:this.eContainer?this.eContainer.isKindOf("Resource")?this.eContainer:this.eContainer.eResource():null},eContents:function(){if(!this.eClass)return[];if(r.isUndefined(this.__updateContents)){this.__updateContents=!0;var e=this.eResource();if(e){var t=this;e.on("add remove",(function(){t.__updateContents=!0}))}}if(this.__updateContents){var n=this.eClass.get("eAllStructuralFeatures"),i=r.filter(n,(function(e){return e.isTypeOf("EReference")&&e.get("containment")&&this.isSet(e.get("name"))}),this),a=null;this.__eContents=r.flatten(r.map(i,(function(e){return(a=this.get(e.get("name")))?a.array?a.array():a:[]}),this)),this.__updateContents=!1}return this.__eContents},eURI:function(){var e=this.eResource();return(e?e.get("uri"):"")+"#"+this.fragment()},fragment:function(){var e,t,n,r=this.eContainer,i=this.eClass.get("eIDAttribute");return r?i?this.get(i.get("name")):this._id?this._id:this.isKindOf("EModelElement")?r?r.isKindOf("Resource")?(t=r.get("contents")).size()>1?"/"+t.indexOf(this):"/":r.fragment()+"/"+this.get("name"):"/":(r.isKindOf("Resource")?n=(t=r.get("contents")).size()>1?"/"+t.indexOf(this):"/":(e=this.eContainingFeature)&&(n=r.fragment()+"/@"+e.get("name"),1!==e.get("upperBound")&&(n+="."+r.get(e.get("name")).indexOf(this))),n):null}},r.extend(o.prototype,i.EObjectPrototype,a);var h=i.EList=function(e,t){return this._internal=[],this._owner=e,this._size=0,this._setFeature(t),this};h.prototype={_setFeature:function(e){e&&(this._feature=e,this._isContainment=this._feature.get("containment"),r.each(this._internal,(function(e){this._isContainment&&(e.eContainer=this._owner,e.eContainingFeature=this._feature)}),this))},add:function(e){if(!e||!e instanceof o)return this;this._isContainment&&(e.eContainingFeature=this._feature,e.eContainer=this._owner),this._size++,this._internal.push(e);var t=this._owner.eResource(),n="add";return this._feature&&(n+=":"+this._feature.get("name")),this._owner.trigger(n,e),t&&t.trigger("add",this),this},addAll:function(){return r.each(r.flatten(arguments||[]),(function(e){this.add(e)}),this),this},remove:function(e){var t="remove",n=this._owner.eResource();return this._internal=r.without(this._internal,e),this._size=this._size-1,this._feature&&(t+=":"+this._feature.get("name")),this._owner.trigger(t,e),n&&n.trigger("remove",this),this},clear:function(){for(var e=this.array(),t=0;t<e.length;t++)this.remove(e[t]);return this},size:function(){return this._size},at:function(e){if(this._size<e)throw new Error("Index Out Of Range");return this._internal[e]},array:function(){return this._internal},first:function(){return r.first(this._internal)},last:function(){return r.last(this._internal)},rest:function(e){return r.rest(this._internal,e)},each:function(e,t){return r.each(this._internal,e,t)},filter:function(e,t){return r.filter(this._internal,e,t)},find:function(e,t){return r.find(this._internal,e,t)},map:function(e,t){return r.map(this._internal,e,t)},reject:function(e,t){return r.reject(this._internal,e,t)},contains:function(e){return r.contains(this._internal,e)},indexOf:function(e){return r.indexOf(this._internal,e)}};var d=new o,f=new o,g=new o,m=new o,v=new o,b=new o,y=new o,x=new o,C=new o,w=new o,k=new o,S=new o,O=new o,E=new o,_=new o,I=new o,P=new o;d.eClass=d,d.values={name:"EClass",abstract:!1,interface:!1,eStructuralFeatures:new i.EList(d),eOperations:new i.EList(d),eSuperTypes:new i.EList(d),eAllSuperTypes:function(){if(!this._eAllSuperTypes){var e=function(e){var t=e.get("eSuperTypes").array(),n=r.flatten(r.map(t,(function(e){return e.get("eAllSuperTypes")})));return r.union(n,t)};this.on("add:eSuperTypes remove:eSuperTypes",(function(){this._eAllSuperTypes=e(this)}),this),this._eAllSuperTypes=e(this)}return this._eAllSuperTypes},eAllSubTypes:function(){var e,t,n;return e=(n=this.eResource().get("resourceSet"))?n.elements("EClass"):i.EPackage.Registry.elements("EClass"),t=r.filter(e,(function(e){return r.contains(e.get("eAllSuperTypes"),this)}),this),r.isArray(t)?t:[]},eReferences:function(){var e;return e=this.get("eStructuralFeatures").filter((function(e){return e.isTypeOf("EReference")})),e},eAttributes:function(){var e;return e=this.get("eStructuralFeatures").filter((function(e){return e.isTypeOf("EAttribute")})),e},eIDAttribute:function(){var e,t;return e=this.get("eAllAttributes"),t=r.filter(e,(function(e){return!0===e.get("iD")})),r.isArray(t)?t[0]:null},eAllStructuralFeatures:function(){var e,t,n,i;return i=(e=this).get("eAllSuperTypes"),n=e.values.eStructuralFeatures.array(),t=r.flatten(r.map(i||[],(function(e){return e.values.eStructuralFeatures.array()}))),r.union(t||[],n||[])},eAllAttributes:function(){var e=this.get("eAllStructuralFeatures"),t=r.filter(e||[],(function(e){return e.eClass===i.EAttribute}));return t},eAllContainments:function(){var e=this.get("eAllStructuralFeatures"),t=r.filter(e,(function(e){return e.eClass===i.EReference&&e.get("containment")}));return t},eAllReferences:function(){var e=this.get("eAllStructuralFeatures"),t=r.filter(e,(function(e){return e.eClass===i.EReference&&!e.get("containment")}));return t}},O.values={name:"abstract",lowerBound:0,upperBound:1,defaultValueLiteral:"false",defaultValue:!1,eType:m},E.values={name:"interface",lowerBound:0,upperBound:1,defaultValueLiteral:"false",defaultValue:!1,eType:m},_.values={name:"eStructuralFeatures",lowerBound:0,upperBound:-1,containment:!0},P.values={name:"eSuperTypes",lowerBound:0,upperBound:-1,containment:!1},I.values={name:"eOperations",lowerBound:0,upperBound:-1,containment:!0},d.get("eStructuralFeatures").add(O).add(E).add(P).add(_).add(I);var T=new o;T.values={name:"eAllStructuralFeatures",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllStructuralFeatures};var A=new o;A.values={name:"eAllSuperTypes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllSuperTypes};var M=new o;M.values={name:"eAllSubTypes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllSubTypes};var D=new o;D.values={name:"eAllAttributes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllAttributes};var j=new o;j.values={name:"eAllContainments",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllContainments};var N=new o;N.values={name:"eAllReferences",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllReferences};var R=new o;R.values={name:"eReferences",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eReferences};var L=new o;L.values={name:"eAttributes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAttributes};var F=new o;F.values={name:"eIDAttribute",lowerBound:0,upperBound:1,derived:!0,containment:!1,_:d.values.eIDAttribute},d.get("eStructuralFeatures").add(T).add(A).add(M).add(D).add(N).add(j).add(L).add(R).add(F),d.getEStructuralFeature=function(e){var t;return t=e.eClass?e.get("name"):e,r.find(this.get("eAllStructuralFeatures"),(function(e){return e.get("name")===t}))};var B=new o;B.values={name:"getEStructuralFeature",lowerBound:0,upperBound:1,eParameters:new i.EList(this)},B._=d.getEStructuralFeature,d.get("eOperations").add(B),d.values.eStructuralFeatures._setFeature(_),d.values.eSuperTypes._setFeature(P),d.values.eOperations._setFeature(I);var V=d.create(),z=d.create(),U=d.create(),G=d.create(),H=d.create(),Y=d.create(),q=d.create(),W=d.create(),X=d.create(),K=d.create(),Z=d.create(),$=d.create(),Q=d.create(),J=d.create(),ee=d.create(),te=d.create(),ne=d.create();O.eClass=Z,E.eClass=Z,_.eClass=$,_.values.eType=K,P.eClass=$,P.values.eType=d,I.eClass=$,I.values.eType=Q,T.eClass=$,T.values.eType=K,A.eClass=$,A.values.eType=d,M.eClass=$,M.values.eType=d,D.eClass=$,D.values.eType=Z,N.eClass=$,N.values.eType=$,j.eClass=$,j.values.eType=$,L.eClass=$,L.values.eType=Z,R.eClass=$,R.values.eType=$,F.eClass=$,F.values.eType=Z,B.eClass=Q,B.values.eType=K,z.get("eSuperTypes").add(V),U.get("eSuperTypes").add(z),G.get("eSuperTypes").add(z),H.get("eSuperTypes").add(G),Y.get("eSuperTypes").add(G),d.get("eSuperTypes").add(Y),q.get("eSuperTypes").add(Y),W.get("eSuperTypes").add(q),ee.get("eSuperTypes").add(G),X.get("eSuperTypes").add(G),K.get("eSuperTypes").add(X),Z.get("eSuperTypes").add(K),$.get("eSuperTypes").add(K),Q.get("eSuperTypes").add(X),J.get("eSuperTypes").add(X),ne.get("eSuperTypes").add(G),te.get("eSuperTypes").add(V);var re=new o,ie=new o,ae=new o,oe=new o,se=new o,ce=new o,le=new o;re.eClass=$,re.values={name:"eType",lowerBound:0,upperBound:1,containment:!1,eType:Y},ie.eClass=Z,ie.values={name:"ordered",lowerBound:0,upperBound:1,defaultValueLiteral:"true",defaultValue:!0,eType:m},ae.eClass=Z,ae.values={name:"unique",lowerBound:0,upperBound:1,defaultValueLiteral:"true",defaultValue:!0,eType:m},oe.eClass=Z,oe.values={name:"lowerBound",lowerBound:0,upperBound:1,defaultValueLiteral:"0",defaultValue:0,eType:g},se.eClass=Z,se.values={name:"upperBound",lowerBound:0,upperBound:1,defaultValueLiteral:"1",defaultValue:1,eType:g},ce.eClass=Z,ce.values={name:"many",lowerBound:0,upperBound:1,eType:m,derived:!0,_:function(){return 1!==this.get("upperBound")}},le.eClass=Z,le.values={name:"required",lowerBound:0,upperBound:1,eType:m,derived:!0,_:function(){return 1===this.get("lowerBound")}},X.get("eStructuralFeatures").add(re).add(ie).add(ae).add(oe).add(se).add(ce).add(le);var ue=new o;ue.eClass=$,ue.values={name:"eAnnotations",eType:U,lowerBound:0,upperBound:-1,containment:!0},z.get("eStructuralFeatures").add(ue);var pe=new o;pe.eClass=Z,pe.values={name:"name",lowerBound:0,upperBound:1,eType:f},G.get("eStructuralFeatures").add(pe);var he=Z.create({name:"changeable",eType:m}),de=Z.create({name:"volatile",eType:m}),fe=Z.create({name:"transient",eType:m}),ge=Z.create({name:"defaultValueLiteral",eType:f}),me=Z.create({name:"defaultValue",eType:S,derived:!0}),ve=Z.create({name:"unsettable",eType:m}),be=Z.create({name:"derived",eType:m});K.get("eStructuralFeatures").add(he).add(de).add(fe).add(ge).add(me).add(ve).add(be),me.set({derived:!0});var ye=Z.create({name:"containment",eType:m}),xe=Z.create({name:"container",eType:m}),Ce=Z.create({name:"resolveProxies",eType:m}),we=$.create({name:"eOpposite",eType:$});$.get("eStructuralFeatures").add(ye).add(xe).add(Ce).add(we);var ke=Z.create({name:"iD",eType:m});Z.get("eStructuralFeatures").add(ke),V.set({name:"EObject"}),z.set({name:"EModelElement",abstract:!0}),U.set({name:"EAnnotation"}),G.set({name:"ENamedElement",abstract:!0}),H.set({name:"EPackage"}),Y.set({name:"EClassifier",abstract:!0}),q.set({name:"EDataType"}),W.set({name:"EEnum"}),X.set({name:"ETypedElement",abstract:!0}),K.set({name:"EStructuralFeature",abstract:!0}),Z.set({name:"EAttribute"}),$.set({name:"EReference"}),Q.set({name:"EOperation"}),J.set({name:"EParameter"}),ee.set({name:"EEnumLiteral"}),ne.set({name:"ETypeParameter"}),te.set({name:"EGenericType"});var Se=$.create({name:"eParameters",eType:J,containment:!0,lowerBound:0,upperBound:-1});Q.get("eStructuralFeatures").add(Se);var Oe=$.create({name:"eLiterals",eType:ee,containment:!0,lowerBound:0,upperBound:-1});W.get("eStructuralFeatures").add(Oe),ee.get("eStructuralFeatures").add(Z.create({name:"literal",eType:f})).add(Z.create({name:"value",eType:g}));var Ee=d.create({name:"EStringToStringMapEntry"}),_e=Z.create({name:"key",lowerBound:0,upperBound:1,eType:f}),Ie=Z.create({name:"value",lowerBound:0,upperBound:1,eType:f});Ee.get("eStructuralFeatures").add(_e).add(Ie);var Pe=Z.create({name:"source",upperBound:1,lowerBound:0,eType:f}),Te=$.create({name:"details",upperBound:-1,lowerBound:0,containment:!0,eType:Ee});U.get("eStructuralFeatures").add(Pe).add(Te);var Ae=$.create({name:"eTypeParameter",eType:ne,containment:!1,lowerBound:0,upperBound:1}),Me=$.create({name:"eUpperBound",containment:!0,eType:te}),De=$.create({name:"eLowerBound",containment:!0,eType:te}),je=$.create({name:"eTypeArguments",containment:!0,upperBound:-1,eType:te}),Ne=$.create({name:"eClassifier",eType:Y});te.get("eStructuralFeatures").add(Ae).add(Me).add(De).add(je).add(Ne);var Re=$.create({name:"eGenericType",upperBound:1,containment:!0,eType:te});X.get("eStructuralFeatures").add(Re);var Le=$.create({name:"eGenericSuperTypes",upperBound:-1,containment:!0,eType:te});d.get("eStructuralFeatures").add(Le);var Fe=$.create({name:"eGenericExceptions",upperBound:-1,containment:!0,eType:te});Q.get("eStructuralFeatures").add(Fe);var Be=$.create({name:"eBounds",containment:!0,upperBound:-1,eType:te}),Ve=$.create({name:"eGenericTypes",containment:!1,upperBound:-1,eType:te});ne.get("eStructuralFeatures").add(Be).add(Ve);var ze=$.create({name:"eTypeParameters",upperBound:-1,containment:!0,eType:ne});Y.get("eStructuralFeatures").add(ze);var Ue=$.create({name:"eTypeParameters",upperBound:-1,containment:!0,eType:ne});Q.get("eStructuralFeatures").add(Ue),f.eClass=q,f.set({name:"EString"}),g.eClass=q,g.set({name:"EInt"}),m.eClass=q,m.set({name:"EBoolean"}),b.eClass=q,b.set({name:"EDate"}),v.eClass=q,v.set({name:"EDouble"}),y.eClass=q,y.set({name:"EIntegerObject"}),x.eClass=q,x.set({name:"EFloatObject"}),C.eClass=q,C.set({name:"ELongObject"}),w.eClass=q,w.set({name:"EMap"}),k.eClass=q,k.set({name:"EDiagnosticChain"}),S.eClass=q,S.set({name:"JSObject"}),i.ELong=q.create({name:"ELong"}),i.EFloat=q.create({name:"EFloat"}),i.EShort=q.create({name:"EShort"}),i.EDoubleObject=q.create({name:"EDoubleObject"});var Ge=$.create({name:"eClassifiers",lowerBound:0,upperBound:-1,containment:!0,eType:Y}),He=$.create({name:"eSubPackages",lowerBound:0,upperBound:-1,containment:!0,eType:H});H.get("eStructuralFeatures").add(Z.create({name:"nsURI",eType:f})).add(Z.create({name:"nsPrefix",eType:f})).add(Ge).add(He),i.EcorePackage=H.create({name:"ecore",nsPrefix:"ecore",nsURI:"http://www.eclipse.org/emf/2002/Ecore"}),i.EcorePackage.get("eClassifiers").add(V).add(z).add(U).add(G).add(H).add(Y).add(d).add(q).add(X).add(K).add(Z).add($).add(Q).add(J).add(W).add(ee).add(ne).add(te).add(Ee).add(f).add(m).add(g).add(v).add(y).add(x).add(C).add(w).add(k).add(b).add(i.EShort).add(i.EFloat).add(i.ELong).add(i.EDoubleObject).add(S),i.EObject=V,i.EModelElement=z,i.EClass=d,i.EClassifier=Y,i.EAnnotation=U,i.EStringToStringMapEntry=Ee,i.EPackage=H,i.ETypedElement=X,i.ENamedElement=G,i.EStructuralFeature=K,i.EAttribute=Z,i.EReference=$,i.EEnum=W,i.EEnumLiteral=ee,i.EDataType=q,i.EOperation=Q,i.EParameter=J,i.ETypeParameter=ne,i.EGenericType=te,i.EString=f,i.EBoolean=m,i.EInt=g,i.EDouble=v,i.EIntegerObject=y,i.EFloatObject=x,i.ELongObject=C,i.EMap=w,i.EDiagnosticChain=k,i.EDate=b,i.JSObject=S,i.EPackage.Registry={_ePackages:{},getEPackage:function(e){return this._ePackages[e]},register:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if(!e.isSet("nsURI"))throw new Error("Cannot register EPackage without nsURI");e.get("eSubPackages").each((function(e){register(e)})),this._ePackages[e.get("nsURI")]=e})),ePackages:function(){return r.values(this._ePackages)},elements:function(e){var t=this.ePackages(),n=[t,r.map(t,(function(e){return function e(t){return r.map(t.eContents(),(function(t){return[t,e(t)]}))}(e)}))];return n=r.flatten(n),n=r.filter(n,(function(t){return!e||(e.eClass?t.eClass===e:t.eClass.get("name")===e)}))}},i.EPackage.Registry.register(i.EcorePackage),i.JSON={dataType:"json",contentType:"application/json",parse:function(e,t){r.isString(t)&&(t=JSON.parse(t));var n=[],a=e.get("resourceSet")||i.ResourceSet.create();function o(e,t){var s;if(e&&(t||e.eClass)){e.eClass&&(t=a.getEObject(e.eClass));try{s=i.create(t)}catch(c){throw new Error("Cannot parse or cannot find EClass for object"+JSON.stringify(e))}s&&(e._id&&(s._id=e._id),t===i.EAnnotation?function(e,t){if(e.source&&t.set("source",e.source),e.details)if(r.isArray(e.details));else{var n=t.get("details");r.each(e.details,(function(e,t){n.add(i.EStringToStringMapEntry.create({key:t,value:e}))}))}}(e,s):r.each(t.get("eAllStructuralFeatures"),function(e,t){return e&&t?function(i){if(i&&!i.get("derived")){var a=i.get("name"),s=e[a];if(void 0!==s)if(i.isTypeOf("EAttribute"))t.set(a,s);else if(i.get("containment")){var c=i.get("eType");1===i.get("upperBound")?t.set(a,o(s,c)):r.each(s||[],(function(e){t.get(a).add(o(e,c))}))}else n.push({parent:t,feature:i,value:s})}}:function(){}}(e,s)))}return s}r.isArray(t)?r.each(t,(function(t){e.add(o(t))})):e.add(o(t)),function(){var t=Ke(e);function i(e,n,r,i){var o=r.$ref,s=t[o];s||(s=a.getEObject(o)),s&&(i?e.get(n.get("name")).add(s):e.set(n.get("name"),s))}r.each(n,(function(e){var t=e.parent,n=e.feature,a=e.value;1===n.get("upperBound")?i(t,n,a,!1):r.each(r.isArray(a)?a:[a],(function(e){i(t,n,e,!0)}))}))}()},to:function(e){var t,n=e.get("contents").array(),a={};function o(e,t){var n=t.eResource(),r=e.eResource(),i=n!==r;if(n&&r){a[n.get("uri")]||(a[n.get("uri")]=Ke(n));var o=a[n.get("uri")];for(var s in o)if(o[s]===t)return i?n.get("uri")+"#"+s:s;return null}}function s(e,t,n){return!0===n?c(t):{$ref:o(e,t),eClass:t.eClass.eURI()}}function c(e){var t=e.eClass,n=e.values,a={eClass:t.eURI()};return e._id&&(a._id=e._id),t===i.EAnnotation?function(e,t){e.values.source&&(t.source=e.values.source),e.values.details&&e.values.details.size()>0&&(t.details={},e.values.details.each((function(e){var n=e.get("key"),r=e.get("value");n&&(t.details[n]=r)})))}(e,a):r.each(n,function(e,t){return e&&t?function(n,r){if("_"!==r[0]){var i=e.eClass.getEStructuralFeature(r),a=e.isSet(r);if(i&&a&&!i.get("derived")){var o=n,c=i.get("name"),l=1!==i.get("upperBound"),u=i.get("containment");i.isTypeOf("EAttribute")?t[c]=o:l?(t[c]=[],o.each((function(n){t[c].push(s(e,n,u))}))):t[c]=s(e,o,u)}}}:function(){}}(e,a)),a}if(a[e.get("uri")]=Ke(e),1===n.length){t=c(n[0])}else{t=[];for(var l=0;l<n.length;l++)t.push(c(n[l]))}return t}};var Ye=i.Resource=i.EClass.create({name:"Resource",eSuperTypes:[i.EObject],eStructuralFeatures:[{eClass:i.EAttribute,name:"uri",lowerBound:1,upperBound:1,eType:i.EString},{eClass:i.EReference,name:"contents",upperBound:-1,containment:!0,eType:i.EObject},{eClass:i.EReference,name:"resourceSet",upperBound:1,lowerBound:0,eType:i.ResourceSet}],eOperations:[{eClass:i.EOperation,name:"add",_:function(e){return e||e.eClass?(e.eContainer=this,this.get("contents").add(e),this):this}},{eClass:i.EOperation,name:"clear",_:function(){return this.get("contents").clear(),this}},{eClass:i.EOperation,name:"addAll",_:function(e){return r.isArray(e)&&r.each(e,(function(e){this.add(e)}),this),this}},{eClass:i.EOperation,name:"getEObject",eType:i.EObject,_:function(e){return e?this._index()[e]?this._index()[e]:void 0:null}},{eClass:i.EOperation,name:"each",_:function(e,t){return this.get("contents").each(e,t)}},{eClass:i.EOperation,name:"to",_:function(e,t){return e&&"function"==typeof e.to?e.to(this,t):i.JSON.to(this)}},{eClass:i.EOperation,name:"parse",_:function(e,t){return t&&"function"==typeof t.parse?t.parse(this,e):i.JSON.parse(this,e),this}},{eClass:i.EOperation,name:"save",_:function(e,t){t||(t={});var n,r=t.format?t.format:i.JSON;try{n=this.to(r)}catch(a){e(null,a)}e(n,null)}},{eClass:i.EOperation,name:"load",_:function(e,t,n){n||(n={});var r=n.format||i.JSON;this.get("resourceSet");try{this.parse(e,r)}catch(a){t(null,a)}this.trigger("change"),"function"==typeof t&&t(this,null)}},{eClass:i.EOperation,name:"remove",_:function(){var e=this.get("resourceSet");e&&e.get("resources").remove(this),this.clear()}},{eClass:i.EOperation,name:"_index",eType:S,_:function(){if(r.isUndefined(this.__updateIndex)){var e=this;e.__updateIndex=!0,e.on("add remove",(function(){e.__updateIndex=!0}))}return this.__updateIndex&&(this.__index=Ke(this),this.__updateIndex=!1),this.__index}}]}),qe=function(){this.uriMap={}};qe.prototype={map:function(e,t){this.uriMap[e]=t},normalize:function(e){var t=e.split("#")[0],n=this.uriMap[t];if(n)return n;var r,i,a=t.lastIndexOf("/")+1;return(r=t.slice(0,a))===t?e:(i=t.slice(a,t.length),this.normalize(r)+i)}};var We=i.ResourceSet=i.EClass.create({name:"ResourceSet",eSuperTypes:[i.EObject],eStructuralFeatures:[{eClass:i.EAttribute,name:"uri",upperBound:1,lowerBound:0,eType:i.EString},{eClass:i.EReference,name:"resources",upperBound:-1,containment:!0,eType:Ye}],eOperations:[{eClass:i.EOperation,eType:i.Resource,upperBound:1,name:"create",_:function(e){var t=r.isObject(e)?e:{uri:e};if(!t.uri)throw new Error("Cannot create Resource, missing URI parameter");var n=this.get("resources").find((function(e){return e.get("uri")===t.uri}));return n||((n=i.Resource.create(t)).set("resourceSet",this),this.get("resources").add(n),this.trigger("add",n),n)}},{eClass:i.EOperation,eType:i.EObject,upperBound:1,name:"getEObject",_:function(e){var t,n=e.split("#"),r=n[0],a=n[1];if(!a)return null;var o=i.EPackage.Registry.getEPackage(r);return o&&((t=o.eResource())||((t=this.create({uri:r})).add(o),this.get("resources").add(t),t.set("resourceSet",this))),t||(t=this.get("resources").find((function(e){return e.get("uri")===r})))?t.getEObject(a):null}},{eClass:i.EOperation,eType:i.EObject,upperBound:-1,name:"elements",_:function(e){var t=function(t){return!e||t.isKindOf(e)},n=this.get("resources").map((function(e){return r.filter(r.values(e._index()),t)}));return r.flatten(n)}},{eClass:i.EOperation,eType:i.JSObject,upperBound:1,name:"uriConverter",_:function(){return this._converter||(this._converter=new qe),this._converter}},{eClass:i.EOperation,eType:i.JSObject,upperBound:1,name:"toJSON",_:function(){var e={total:this.get("resources").size(),resources:[]};return this.get("resources").each((function(t){e.resources.push({uri:t.get("uri"),length:t.get("contents").size(),contents:t.get("contents").map((function(e){return{eURI:e.eURI(),eClass:e.eClass.eURI()}}))})})),e}},{eClass:i.EOperation,name:"parse",_:function(e){e&&e.resources&&r.each(e.resources,(function(e){e.uri&&resourceSet.create({uri:e.uri})}),this)}}]});Ye.getEStructuralFeature("resourceSet").set("eType",We);var Xe=i.EPackage.create({name:"resources",nsPrefix:"resources",nsURI:"http://www.eclipselabs.org/ecore/2012/resources",eClassifiers:[We,Ye]});function Ke(e){var t={},n=e.get("contents").array();if(n.length){var i,a,o=function e(n,i){var a=n.eContents();t[i]=n,r.each(a,(function(t){e(t,t.fragment())}))};if(1===n.length)(i=n[0])._id?o(i,i._id):(a=i.eClass.get("eIDAttribute")||null,o(i,a?i.get(a.get("name")):"/"));else for(var s=0;s<n.length;s++)(i=n[s])._id?o(i,i._id):(a=i.eClass.get("eIDAttribute")||null,o(i,a?i.get(a.get("name")):"/"+s))}return t}function Ze(e){return!e.get("abstract")}function $e(e,t){if(!e)return[];var n=e.eClass.get("eAllContainments");return r.flatten(r.map(n,(function(n){var i=function(e){if(!e||!e.eClass)return[];var t=e.get("eAllSubTypes");return r.filter(r.union([e],t),Ze)}(n.get("eType"));return t&&"function"==typeof t?t(e,n,i):i})))}function Qe(e,t){return e?$e(e.eContainer,t):[]}function Je(e,t,n){return r.map(n,(function(n){return{label:"New "+n.get("name"),owner:e,feature:t,type:n}}))}function et(e){return e.get("name")||""}function tt(e){var t=e.get("eType"),n=e.eClass===i.EOperation,r=t?t.get("name"):null;return e.get("name")+(n?"()":"")+(r?" : "+r:"")}i.Resource.create({uri:i.EcorePackage.get("nsURI")}).add(i.EcorePackage),i.Resource.create({uri:Xe.get("nsURI")}).add(Xe),i.EPackage.Registry.register(Xe),i.Edit={childTypes:$e,siblingTypes:Qe,childDescriptors:function(e){return $e(e,Je)},siblingDescriptors:function(e){return Qe(e,Je)},choiceOfValues:function(e,t){if(null==e||null==e.eResource()||null==e.eResource().get("resourceSet"))throw new Error("Bad argument");var n=t.get("eType"),i=e.eResource().get("resourceSet").elements();return r.filter(i,(function(e){return e.isKindOf(n)}))},_get:function(e,t){if(!t||!t.eClass)return null;var n=t.eClass.get("name");return this[n]?"function"==typeof this[n][e]?this[n][e](t):this[n][e]:t.eClass.get("name")},text:function(e){return this._get("text",e)},icon:function(e){return this._get("icon",e)},label:function(e){return this._get("label",e)},EClass:{text:et,label:et,icon:"icon-EClass"},EDataType:{text:et,label:et,icon:"icon-EDataType"},EEnum:{text:et,label:et,icon:"icon-EEnum"},EEnumLiteral:{text:function(e){return e.get("name")+" = "+e.get("value")},label:et,icon:"icon-EEnumLiteral"},EAttribute:{text:tt,label:et,icon:"icon-EAttribute"},EReference:{text:tt,label:et,icon:"icon-EReference"},EOperation:{text:tt,label:et,icon:"icon-EOperation"},EPackage:{text:et,label:et,icon:"icon-EPackage"},EAnnotation:{text:function(e){return e.get("source")},label:function(e){return e.get("source")},icon:"icon-EAnnotation"},EStringToStringMapEntry:{text:function(e){return e.get("key")+" -> "+e.get("value")},label:function(e){return e.get("key")},icon:"icon-EStringToStringMapEntry"},ResourceSet:{text:"resourceSet",label:"",icon:"icon-EObject"},Resource:{text:function(e){return e.get("uri")},label:function(e){return e.get("uri")},icon:"icon-EObject"}}}).call(this)},FeJI:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("XVEb"),a=n("0KrK"),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},Fuvo:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("D57K"),i=function(e){function t(n,r){void 0===r&&(r=[]);var i=e.call(this)||this;return Object.setPrototypeOf(i,t.prototype),i.message=n,i.name="CSVImportValidationError",i.errors=r,i}return Object(r.e)(t,e),t}(Error)},Fvkh:function(e,t,n){"use strict";t.__esModule=!0;var r=n("XVEb"),i=void 0;try{}catch(s){}function a(e,t,n){if(r.isArray(e)){for(var i=[],a=0,o=e.length;a<o;a++)i.push(t.wrap(e[a],n));return i}return"boolean"==typeof e||"number"==typeof e?e+"":e}function o(e){this.srcFile=e,this.source=[]}i||((i=function(e,t,n,r){this.src="",r&&this.add(r)}).prototype={add:function(e){r.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){r.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),o.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each((function(t){e.add(["  ",t,"\n"])})),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new i(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof i?e:(e=a(e,this,t),new i(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,n=[];Object.keys(e).forEach((function(r){var i=a(e[r],t);"undefined"!==i&&n.push([t.quotedString(r),":",i])}));var r=this.generateList(n);return r.prepend("{"),r.add("}"),r},generateList:function(e){for(var t=this.empty(),n=0,r=e.length;n<r;n++)n&&t.add(","),t.add(a(e[n],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=o,e.exports=t.default},"G3/p":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n("D57K"),i=n("qlkn"),a=n("Wwqo"),o=n("5xGT"),s=n("X0jn"),c=n("19Zn"),l=n("nsO7"),u=n("47ST"),p=n("i9xl"),h=n("qZtG"),d=n("HsO4"),f=n("TLy2"),g=n("TaSY"),m=n("8j5Y"),v=n("7SLS"),b=n("nKku"),y=n("Xpu5"),x=n("B5wR"),C=n("/jjY"),w=n("Fuvo"),k=n("EM62"),S=function(){function e(e,t){this.commandSvc=e,this.cyclrSvc=t,this.batchSize=1e3}return e.prototype.importData=function(e,t){var n=this,i=t.eDefId,a=t.ignoreMappingErrors;if(!e.customEntityDefs.hasOwnProperty(i)){var s="Custom entity definition not found. defId: '"+i+"'";return Object(u.a)(new w.a(s))}var c=e.customEntityDefs[i];return Object(d.a)(this.getEntities(c,t)).pipe(Object(f.a)((function(t){var i=t.entities,s=t.errors;if(!a&&s.length>0)return o.db.warning("aborting the import. validation errors: ",s),Object(u.a)(new w.a("mappings error",s));if(0===i.length)return o.db.warning("aborting the import. no data to import"),Object(u.a)(new w.a("no data to import",s));o.db.info("Importing entities...");var d=Object(l.chunk)(i,n.batchSize).map((function(t){return Object(p.a)((function(){return n.commandSvc.dispatch(y.a.importEntities,e.id,{entities:t,entityDef:c})}))}));return h.a.apply(void 0,Object(r.j)(d)).pipe(Object(g.a)(),Object(m.a)((function(){return o.db.info("Finished importing entities")})),Object(v.a)({entities:i,errors:s}))})))},e.prototype.getRows=function(e,t,n,i){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(r){return[2,this.cyclrSvc.fetchPost({dataSource:a.a.GoogleSheets,method:"listRows",params:{startRow:e,endRow:t,spreadsheetId:n,sheetName:i}})]}))}))},e.prototype.getEntities=function(e,t){return Object(r.c)(this,void 0,void 0,(function(){var n,i,l,u,p,h,d,f,g,m,v,y,w,k,S,O,E,_,I,P,T,A,M,D,j,N,R,L;return Object(r.f)(this,(function(F){switch(F.label){case 0:n=t.mappings,i=t.eDefId,l=t.ignoreMappingErrors,u={},p="A".charCodeAt(0);try{for(h=Object(r.k)(n),d=h.next();!d.done;d=h.next()){if(f=d.value,g=f.columnIndex,j=f.dataItemId,(m=g.charCodeAt(0)-p)<0||m>25)throw new Error("invalid column. column index: "+g);if(!e.dataItems[j])throw new Error("Data item with id '"+j+"' not found");v=e.dataItems[j],y=v.type,w=v.options,u[j]={columnIndex:g,parse:b.a.getParser(e.dataItems[j].type),validator:c.i.instance.create(Object(r.a)(Object(r.a)({},e.dataItems[j]),{validationRules:{},typeParams:y===s.c.OPTION_LIST?{options:w}:{}}))}}}catch(B){R={error:B}}finally{try{d&&!d.done&&(L=h.return)&&L.call(h)}finally{if(R)throw R.error}}k=[],S=[],O=2,E=[],_=[],F.label=1;case 1:return[4,this.getRows(O,O+999,t.spreadsheetId,t.sheet.title)];case 2:_=F.sent(),E=E.concat(_),O+=1e3,F.label=3;case 3:if(1e3===_.length)return[3,1];F.label=4;case 4:for(I=0;I<E.length;I++){for(A in P=E[I],(T=new C.a(o.sb.entityId(),i)).defId=x.a.customEdataDefId,T.data={},T.shapes={},T.dataSource={domain:a.a.GoogleSheets,data:{dataSourceId:P[t.rowIdentifierField],rowNumber:P.RowNumber}},e.dataItems)T.data[A]=e.dataItems[A].default;for(j in M=null,D=!0,u)if(u[j].parse?T.data[j]=u[j].parse(P[u[j].columnIndex]):T.data[j]=P[u[j].columnIndex],N=u[j].validator,M=N.validate(T.data[j])){if(S.push({rowIndex:I,columnIndex:u[j].columnIndex,parsedValue:T.data[j],value:P[u[j].columnIndex],error:M}),!l)return[2,{entities:k,errors:S}];delete T.data[j]}else D=!1;D||k.push(T)}return[2,{entities:k,errors:S}]}}))}))},e.\u0275fac=function(t){return new(t||e)(k.pc(o.B),k.pc(i.a))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}()},GR9c:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e,t,n){return(s=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&a(i,n.prototype),i}).apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,i(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,e)})(e)}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.r(t),n.d(t,"JSONPath",(function(){return v}));var d=Object.prototype.hasOwnProperty;function f(e,t){return(e=e.slice()).push(t),e}function g(e,t){return(t=t.slice()).unshift(e),t}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=o(),function(){var e,r=i(t);if(n){var a=i(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return l(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,t.value=e,t.name="NewError",t}return s}(c(Error));function v(e,t,n,i,a){if(!(this instanceof v))try{return new v(e,t,n,i,a)}catch(l){if(!l.avoidNew)throw l;return l.value}"string"==typeof e&&(a=i,i=n,n=t,t=e,e=null);var o=e&&"object"===r(e);if(e=e||{},this.json=e.json||n,this.path=e.path||t,this.resultType=e.resultType||"value",this.flatten=e.flatten||!1,this.wrap=!d.call(e,"wrap")||e.wrap,this.sandbox=e.sandbox||{},this.preventEval=e.preventEval||!1,this.parent=e.parent||null,this.parentProperty=e.parentProperty||null,this.callback=e.callback||i||null,this.otherTypeCallback=e.otherTypeCallback||a||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==e.autostart){var s={path:o?e.path:t};o?"json"in e&&(s.json=e.json):s.json=n;var c=this.evaluate(s);if(!c||"object"!==r(c))throw new m(c);return c}}v.prototype.evaluate=function(e,t,n,i){var a=this,o=this.parent,s=this.parentProperty,c=this.flatten,l=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=i||this.otherTypeCallback,t=t||this.json,(e=e||this.path)&&"object"===r(e)&&!Array.isArray(e)){if(!e.path&&""!==e.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!d.call(e,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');t=e.json,c=d.call(e,"flatten")?e.flatten:c,this.currResultType=d.call(e,"resultType")?e.resultType:this.currResultType,this.currSandbox=d.call(e,"sandbox")?e.sandbox:this.currSandbox,l=d.call(e,"wrap")?e.wrap:l,this.currPreventEval=d.call(e,"preventEval")?e.preventEval:this.currPreventEval,n=d.call(e,"callback")?e.callback:n,this.currOtherTypeCallback=d.call(e,"otherTypeCallback")?e.otherTypeCallback:this.currOtherTypeCallback,o=d.call(e,"parent")?e.parent:o,s=d.call(e,"parentProperty")?e.parentProperty:s,e=e.path}if(o=o||null,s=s||null,Array.isArray(e)&&(e=v.toPathString(e)),(e||""===e)&&t){var u=v.toPathArray(e);"$"===u[0]&&u.length>1&&u.shift(),this._hasParentSelector=null;var p=this._trace(u,t,["$"],o,s,n).filter((function(e){return e&&!e.isParentSelector}));return p.length?l||1!==p.length||p[0].hasArrExpr?p.reduce((function(e,t){var n=a._getPreferredOutput(t);return c&&Array.isArray(n)?e=e.concat(n):e.push(n),e}),[]):this._getPreferredOutput(p[0]):l?[]:void 0}},v.prototype._getPreferredOutput=function(e){var t=this.currResultType;switch(t){case"all":var n=Array.isArray(e.path)?e.path:v.toPathArray(e.path);return e.pointer=v.toPointer(n),e.path="string"==typeof e.path?e.path:v.toPathString(e.path),e;case"value":case"parent":case"parentProperty":return e[t];case"path":return v.toPathString(e[t]);case"pointer":return v.toPointer(e.path);default:throw new TypeError("Unknown result type")}},v.prototype._handleCallback=function(e,t,n){if(t){var r=this._getPreferredOutput(e);e.path="string"==typeof e.path?e.path:v.toPathString(e.path),t(r,n,e)}},v.prototype._trace=function(e,t,n,i,a,o,s,c){var l,u=this;if(!e.length)return l={path:n,value:t,parent:i,parentProperty:a,hasArrExpr:s},this._handleCallback(l,o,"value"),l;var h=e[0],m=e.slice(1),v=[];function b(e){Array.isArray(e)?e.forEach((function(e){v.push(e)})):v.push(e)}if(("string"!=typeof h||c)&&t&&d.call(t,h))b(this._trace(m,t[h],f(n,h),t,h,o,s));else if("*"===h)this._walk(h,m,t,n,i,a,o,(function(e,t,n,r,i,a,o,s){b(u._trace(g(e,n),r,i,a,o,s,!0,!0))}));else if(".."===h)b(this._trace(m,t,n,i,a,o,s)),this._walk(h,m,t,n,i,a,o,(function(e,t,n,i,a,o,s,c){"object"===r(i[e])&&b(u._trace(g(t,n),i[e],f(a,e),i,e,c,!0))}));else{if("^"===h)return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:m,isParentSelector:!0};if("~"===h)return l={path:f(n,h),value:a,parent:i,parentProperty:null},this._handleCallback(l,o,"property"),l;if("$"===h)b(this._trace(m,t,n,null,null,o,s));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(h))b(this._slice(h,m,t,n,i,a,o));else if(0===h.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(h,m,t,n,i,a,o,(function(e,t,n,r,i,a,o,s){u._eval(t.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),r[e],e,i,a,o)&&b(u._trace(g(e,n),r,i,a,o,s,!0))}))}else if("("===h[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");b(this._trace(g(this._eval(h,t,n[n.length-1],n.slice(0,-1),i,a),m),t,n,i,a,o,s))}else if("@"===h[0]){var y=!1,x=h.slice(1,-2);switch(x){case"scalar":t&&["object","function"].includes(r(t))||(y=!0);break;case"boolean":case"string":case"undefined":case"function":r(t)===x&&(y=!0);break;case"integer":!Number.isFinite(t)||t%1||(y=!0);break;case"number":Number.isFinite(t)&&(y=!0);break;case"nonFinite":"number"!=typeof t||Number.isFinite(t)||(y=!0);break;case"object":t&&r(t)===x&&(y=!0);break;case"array":Array.isArray(t)&&(y=!0);break;case"other":y=this.currOtherTypeCallback(t,n,i,a);break;case"null":null===t&&(y=!0);break;default:throw new TypeError("Unknown value type "+x)}if(y)return l={path:n,value:t,parent:i,parentProperty:a},this._handleCallback(l,o,"value"),l}else if("`"===h[0]&&t&&d.call(t,h.slice(1))){var C=h.slice(1);b(this._trace(m,t[C],f(n,C),t,C,o,s,!0))}else if(h.includes(",")){var w,k=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(h.split(","));try{for(k.s();!(w=k.n()).done;){var S=w.value;b(this._trace(g(S,m),t,n,i,a,o,!0))}}catch(T){k.e(T)}finally{k.f()}}else!c&&t&&d.call(t,h)&&b(this._trace(m,t[h],f(n,h),t,h,o,s,!0))}if(this._hasParentSelector)for(var O=0;O<v.length;O++){var E=v[O];if(E&&E.isParentSelector){var _=this._trace(E.expr,t,E.path,i,a,o,s);if(Array.isArray(_)){v[O]=_[0];for(var I=_.length,P=1;P<I;P++)O++,v.splice(O,0,_[P])}else v[O]=_}}return v},v.prototype._walk=function(e,t,n,i,a,o,s,c){if(Array.isArray(n))for(var l=n.length,u=0;u<l;u++)c(u,e,t,n,i,a,o,s);else n&&"object"===r(n)&&Object.keys(n).forEach((function(r){c(r,e,t,n,i,a,o,s)}))},v.prototype._slice=function(e,t,n,r,i,a,o){if(Array.isArray(n)){var s=n.length,c=e.split(":"),l=c[2]&&Number.parseInt(c[2])||1,u=c[0]&&Number.parseInt(c[0])||0,p=c[1]&&Number.parseInt(c[1])||s;u=u<0?Math.max(0,u+s):Math.min(s,u),p=p<0?Math.max(0,p+s):Math.min(s,p);for(var h=[],d=u;d<p;d+=l){this._trace(g(d,t),n,r,i,a,o,!0).forEach((function(e){h.push(e)}))}return h}},v.prototype._eval=function(e,t,n,r,i,a){e.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=a,e=e.replace(/@parentProperty/g,"_$_parentProperty")),e.includes("@parent")&&(this.currSandbox._$_parent=i,e=e.replace(/@parent/g,"_$_parent")),e.includes("@property")&&(this.currSandbox._$_property=n,e=e.replace(/@property/g,"_$_property")),e.includes("@path")&&(this.currSandbox._$_path=v.toPathString(r.concat([n])),e=e.replace(/@path/g,"_$_path")),e.includes("@root")&&(this.currSandbox._$_root=this.json,e=e.replace(/@root/g,"_$_root")),/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/.test(e)&&(this.currSandbox._$_v=t,e=e.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return this.vm.runInNewContext(e,this.currSandbox)}catch(o){throw console.log(o),new Error("jsonPath: "+o.message+": "+e)}},v.cache={},v.toPathString=function(e){for(var t=e,n=t.length,r="$",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[i])||(r+=/^[\*0-9]+$/.test(t[i])?"["+t[i]+"]":"['"+t[i]+"']");return r},v.toPointer=function(e){for(var t=e,n=t.length,r="",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(t[i])||(r+="/"+t[i].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return r},v.toPathArray=function(e){var t=v.cache;if(t[e])return t[e].concat();var n=[],r=e.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,(function(e,t){return"[#"+(n.push(t)-1)+"]"})).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,(function(e,t){return"['"+t.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"})).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,(function(e,t){return";"+t.split("").join(";")+";"})).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map((function(e){var t=e.match(/#([0-9]+)/);return t&&t[1]?n[t[1]]:e}));return t[e]=r,t[e].concat()};v.prototype.vm={runInNewContext:function(e,t){var n=Object.keys(t),r=[];!function(e,t,n){for(var r=e.length,i=0;i<r;i++)n(e[i])&&t.push(e.splice(i--,1)[0])}(n,r,(function(e){return"function"==typeof t[e]}));var i=n.map((function(e,n){return t[e]}));e=r.reduce((function(e,n){var r=t[n].toString();return/function/.test(r)||(r="function "+r),"var "+n+"="+r+";"+e}),"")+e,/(["'])use strict\1/.test(e)||n.includes("arguments")||(e="var arguments = undefined;"+e);var a=(e=e.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),o=a>-1?e.slice(0,a+1)+" return "+e.slice(a+1):" return "+e;return s(Function,u(n).concat([o])).apply(void 0,u(i))}}},Gf1k:function(e,t,n){var r;r=function(e){e.version="1.0.2";var t=Math;function n(e,t){for(var n=0,r=0;n<e.length;++n)r=t*r+e[n];return r}function r(e,t,n,r,i){if(0===t)return n;if(1===t)return r;for(var a=2/e,o=r,s=1;s<t;++s)o=r*s*a+i*n,n=r,r=o;return o}function i(e,t,n,i,a){return function(n,o){if(i){if(0===n)return 1==i?-1/0:1/0;if(n<0)return NaN}return 0===o?e(n):1===o?t(n):o<0?NaN:r(n,o|=0,e(n),t(n),a)}}var a,o,s,c,l,u,p,h,d,f,g,m,v,b=function(){var e=.636619772,i=[57568490574,-13362590354,651619640.7,-11214424.18,77392.33017,-184.9052456].reverse(),a=[57568490411,1029532985,9494680.718,59272.64853,267.8532712,1].reverse(),o=[1,-.001098628627,2734510407e-14,-2073370639e-15,2.093887211e-7].reverse(),s=[-.01562499995,.0001430488765,-6911147651e-15,7.621095161e-7,-9.34935152e-8].reverse();function c(r){var c=0,l=0,u=0,p=r*r;if(r<8)c=(l=n(i,p))/(u=n(a,p));else{var h=r-.785398164;l=n(o,p=64/p),u=n(s,p),c=t.sqrt(e/r)*(t.cos(h)*l-t.sin(h)*u*8/r)}return c}var l=[72362614232,-7895059235,242396853.1,-2972611.439,15704.4826,-30.16036606].reverse(),u=[144725228442,2300535178,18583304.74,99447.43394,376.9991397,1].reverse(),p=[1,.00183105,-3516396496e-14,2457520174e-15,-2.40337019e-7].reverse(),h=[.04687499995,-.0002002690873,8449199096e-15,-8.8228987e-7,1.05787412e-7].reverse();function d(r){var i=0,a=0,o=0,s=r*r,c=t.abs(r)-2.356194491;return Math.abs(r)<8?i=(a=r*n(l,s))/(o=n(u,s)):(a=n(p,s=64/s),o=n(h,s),i=t.sqrt(e/t.abs(r))*(t.cos(c)*a-t.sin(c)*o*8/t.abs(r)),r<0&&(i=-i)),i}return function e(n,i){if(i=Math.round(i),!isFinite(n))return isNaN(n)?n:0;if(i<0)return(i%2?-1:1)*e(n,-i);if(n<0)return(i%2?-1:1)*e(-n,i);if(0===i)return c(n);if(1===i)return d(n);if(0===n)return 0;var a=0;if(n>i)a=r(n,i,c(n),d(n),-1);else{for(var o=!1,s=0,l=0,u=1,p=0,h=2/n,f=2*t.floor((i+t.floor(t.sqrt(40*i)))/2);f>0;f--)p=f*h*u-s,s=u,u=p,t.abs(u)>1e10&&(u*=1e-10,s*=1e-10,a*=1e-10,l*=1e-10),o&&(l+=u),o=!o,f==i&&(a=s);a/=l=2*l-u}return a}}(),y=(a=.636619772,o=[-2957821389,7062834065,-512359803.6,10879881.29,-86327.92757,228.4622733].reverse(),s=[40076544269,745249964.8,7189466.438,47447.2647,226.1030244,1].reverse(),c=[1,-.001098628627,2734510407e-14,-2073370639e-15,2.093887211e-7].reverse(),l=[-.01562499995,.0001430488765,-6911147651e-15,7.621095161e-7,-9.34945152e-8].reverse(),u=[-4900604943e3,127527439e4,-51534381390,734926455.1,-4237922.726,8511.937935].reverse(),p=[249958057e5,424441966400,3733650367,22459040.02,102042.605,354.9632885,1].reverse(),h=[1,.00183105,-3516396496e-14,2457520174e-15,-2.40337019e-7].reverse(),d=[.04687499995,-.0002002690873,8449199096e-15,-8.8228987e-7,1.05787412e-7].reverse(),i((function(e){var r=0,i=0,u=0,p=e*e,h=e-.785398164;return e<8?r=(i=n(o,p))/(u=n(s,p))+a*b(e,0)*t.log(e):(i=n(c,p=64/p),u=n(l,p),r=t.sqrt(a/e)*(t.sin(h)*i+t.cos(h)*u*8/e)),r}),(function(e){var r=0,i=0,o=0,s=e*e,c=e-2.356194491;return e<8?r=(i=e*n(u,s))/(o=n(p,s))+a*(b(e,1)*t.log(e)-1/e):(i=n(h,s=64/s),o=n(d,s),r=t.sqrt(a/e)*(t.sin(c)*i+t.cos(c)*o*8/e)),r}),0,1,-1)),x=(f=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),g=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse(),m=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),v=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse(),function e(r,i){if(0===(i=Math.round(i)))return function(e){return e<=3.75?n(f,e*e/14.0625):t.exp(t.abs(e))/t.sqrt(t.abs(e))*n(g,3.75/t.abs(e))}(r);if(1===i)return function(e){return e<3.75?e*n(m,e*e/14.0625):(e<0?-1:1)*t.exp(t.abs(e))/t.sqrt(t.abs(e))*n(v,3.75/t.abs(e))}(r);if(i<0)return NaN;if(0===t.abs(r))return 0;if(r==1/0)return 1/0;var a,o=0,s=2/t.abs(r),c=0,l=1,u=0;for(a=2*t.round((i+t.round(t.sqrt(40*i)))/2);a>0;a--)u=a*s*l+c,c=l,l=u,t.abs(l)>1e10&&(l*=1e-10,c*=1e-10,o*=1e-10),a==i&&(o=c);return o*=e(r,0)/l,r<0&&i%2?-o:o}),C=function(){var e=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),r=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse(),a=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),o=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();return i((function(i){return i<=2?-t.log(i/2)*x(i,0)+n(e,i*i/4):t.exp(-i)/t.sqrt(i)*n(r,2/i)}),(function(e){return e<=2?t.log(e/2)*x(e,1)+1/e*n(a,e*e/4):t.exp(-e)/t.sqrt(e)*n(o,2/e)}),0,2,1)}();e.besselj=b,e.bessely=y,e.besseli=x,e.besselk=C},"undefined"==typeof DO_NOT_EXPORT_BESSEL?r(t):r({})},Gjo4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("XLk1"),a=n("NNJu"),o=n("EM62"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return c(e||t)},t.\u0275cmp=o.Zb({type:t,selectors:[["toolbar-dropdown-input"]],features:[o.Rb([{provide:a.i,useExisting:Object(o.lb)((function(){return t}))}]),o.Pb],decls:3,vars:1,consts:[[1,"toolbar-dd-input-container"],[1,"toolbar-dd-input-button",3,"value","focusout","input"],["inputElement",""]],template:function(e,t){1&e&&(o.lc(0,"a",0),o.lc(1,"input",1,2),o.tc("focusout",(function(e){return t.handleChange(e.target.value,!0)}))("input",(function(e){return t.handleChange(e.target.value,!1)})),o.kc(),o.kc()),2&e&&(o.Sb(1),o.Cc("value",t.inputValue))},styles:[".toolbar-dd-input-container[_ngcontent-%COMP%]{display:flex;height:45px;align-items:center;margin-left:10px}.toolbar-dd-input-button[_ngcontent-%COMP%]{font-size:18px;padding:0 8px 5px 0;background:url(/assets/images/decoratives/dropdown-arrow.svg) no-repeat 100%;background-size:8px;width:40px}"],changeDetection:0}),t}(i.a),c=o.nc(s)},GmLw:function(e,t,n){"use strict";var r=n("dEMF"),i=n("1TxV"),a=n("Rl48");function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|d(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(u(t),e=s(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|d(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){var a,o=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var u=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===c)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(n+c>s&&(n=s-c),a=n;a>=0;a--){for(var p=!0,h=0;h<c;h++)if(l(e,a+h)!==l(t,h)){p=!1;break}if(p)return a}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function x(e,t,n,r){return G(z(t,e.length-n),e,n,r)}function C(e,t,n,r){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return C(e,t,n,r)}function k(e,t,n,r){return G(U(t),e,n,r)}function S(e,t,n,r){return G(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,c,l=e[i],u=null,p=l>239?4:l>223?3:l>191?2:1;if(i+p<=n)switch(p){case 1:l<128&&(u=l);break;case 2:128==(192&(a=e[i+1]))&&(c=(31&l)<<6|63&a)>127&&(u=c);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(c=(15&l)<<12|(63&a)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,p=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=p}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=_));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return p(null,e)},c.allocUnsafeSlow=function(e){return p(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,i),u=e.slice(t,n),p=0;p<s;++p)if(l[p]!==u[p]){a=l[p],o=u[p];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return C(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=V(e[a]);return i}function A(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function R(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,a){return a||R(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,a){return a||R(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=c.isBuffer(e)?e:z(new c(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function U(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}},I2sK:function(e,t,n){var r=n("K1iM"),i=n("VtSi");e.exports=function(){function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){return i(t[o][1][e]||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var a=!1,o=0;o<r.length;o++)i(r[o]);return i}return e}()({1:[function(e,t,n){var r=e("./utils"),i=function(){"use strict";var e=r.stringToArray,t=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],i=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],a=["Thousand","Million","Billion","Trillion"];function o(e,r){return function e(r,o,s){var c="";if(r<=19)c=(o?" and ":"")+(s?n[r]:t[r]);else if(r<100){var l=Math.floor(r/10),u=r%10;c=(o?" and ":"")+i[l-2],u>0?c+="-"+e(u,!1,s):s&&(c=c.substring(0,c.length-1)+"ieth")}else if(r<1e3){var p=Math.floor(r/100),h=r%100;c=(o?", ":"")+t[p]+" Hundred",h>0?c+=e(h,!0,s):s&&(c+="th")}else{var d=Math.floor(Math.log10(r)/3);d>a.length&&(d=a.length);var f=Math.pow(10,3*d),g=Math.floor(r/f),m=r-g*f;c=(o?", ":"")+e(g,!1,!1)+" "+a[d-1],m>0?c+=e(m,!0,s):s&&(c+="th")}return c}(e,!1,r)}var s={};function c(e){var t=e.split(/,\s|\sand\s|[\s\\-]/).map((function(e){return s[e]})),n=[0];return t.forEach((function(e){if(e<100){var t=n.pop();t>=1e3&&(n.push(t),t=0),n.push(t+e)}else n.push(n.pop()*e)})),n.reduce((function(e,t){return e+t}),0)}t.forEach((function(e,t){s[e.toLowerCase()]=t})),n.forEach((function(e,t){s[e.toLowerCase()]=t})),i.forEach((function(e,t){var n=e.toLowerCase();s[n]=10*(t+2),s[n.substring(0,e.length-1)+"ieth"]=s[n]})),s.hundredth=100,a.forEach((function(e,t){var n=e.toLowerCase(),r=Math.pow(10,3*(t+1));s[n]=r,s[n+"th"]=r}));var l=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],u={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function p(e){for(var t=0;t<l.length;t++){var n=l[t];if(e>=n[0])return n[1]+p(e-n[0])}return""}function h(e){for(var t=0,n=1,r=e.length-1;r>=0;r--){var i=e[r],a=u[i];a<n?t-=a:(n=a,t+=a)}return t}function d(e,t){for(var n=[],r=t.charCodeAt(0);e>0;)n.unshift(String.fromCharCode((e-1)%26+r)),e=Math.floor((e-1)/26);return n.join("")}function f(e,t){for(var n=t.charCodeAt(0),r=0,i=0;i<e.length;i++)r+=(e.charCodeAt(e.length-i-1)-n+1)*Math.pow(26,i);return r}function g(e,t){if(void 0!==e)return b(e=Math.floor(e),x(t))}var m={DECIMAL:"decimal",LETTERS:"letters",ROMAN:"roman",WORDS:"words",SEQUENCE:"sequence"},v={UPPER:"upper",LOWER:"lower",TITLE:"title"};function b(t,n){var r,i=t<0;switch(t=Math.abs(t),n.primary){case m.LETTERS:r=d(t,n.case===v.UPPER?"A":"a");break;case m.ROMAN:r=p(t),n.case===v.UPPER&&(r=r.toUpperCase());break;case m.WORDS:r=o(t,n.ordinal),n.case===v.UPPER?r=r.toUpperCase():n.case===v.LOWER&&(r=r.toLowerCase());break;case m.DECIMAL:r=""+t;var a=n.mandatoryDigits-r.length;if(a>0){var s=new Array(a+1).join("0");r=s+r}if(48!==n.zeroCode&&(r=e(r).map((function(e){return String.fromCodePoint(e.codePointAt(0)+n.zeroCode-48)})).join("")),n.regular)for(var c=Math.floor((r.length-1)/n.groupingSeparators.position);c>0;c--){var l=r.length-c*n.groupingSeparators.position;r=r.substr(0,l)+n.groupingSeparators.character+r.substr(l)}else n.groupingSeparators.reverse().forEach((function(e){var t=r.length-e.position;r=r.substr(0,t)+e.character+r.substr(t)}));if(n.ordinal){var u={1:"st",2:"nd",3:"rd"}[r[r.length-1]];(!u||r.length>1&&"1"===r[r.length-2])&&(u="th"),r+=u}break;case m.SEQUENCE:throw{code:"D3130",value:n.token}}return i&&(r="-"+r),r}var y=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function x(t){var n,r={type:"integer",primary:m.DECIMAL,case:v.LOWER,ordinal:!1},i=t.lastIndexOf(";");switch(-1===i?n=t:(n=t.substring(0,i),"o"===t.substring(i+1)[0]&&(r.ordinal=!0)),n){case"A":r.case=v.UPPER;case"a":r.primary=m.LETTERS;break;case"I":r.case=v.UPPER;case"i":r.primary=m.ROMAN;break;case"W":r.case=v.UPPER,r.primary=m.WORDS;break;case"Ww":r.case=v.TITLE,r.primary=m.WORDS;break;case"w":r.primary=m.WORDS;break;default:var a=null,o=0,s=0,c=[],l=0;if(e(n).map((function(e){return e.codePointAt(0)})).reverse().forEach((function(e){for(var t=!1,n=0;n<y.length;n++){var r=y[n];if(e>=r&&e<=r+9){if(t=!0,o++,l++,null===a)a=r;else if(r!==a)throw{code:"D3131"};break}}t||(35===e?(l++,s++):c.push({position:l,character:String.fromCodePoint(e)}))})),o>0){r.primary=m.DECIMAL,r.zeroCode=a,r.mandatoryDigits=o,r.optionalDigits=s;var u=function(e){if(0===e.length)return 0;for(var t=e[0].character,n=1;n<e.length;n++)if(e[n].character!==t)return 0;for(var r=e.map((function(e){return e.position})),i=function e(t,n){return 0===n?t:e(n,t%n)},a=r.reduce(i),o=1;o<=r.length;o++)if(-1===r.indexOf(o*a))return 0;return a}(c);u>0?(r.regular=!0,r.groupingSeparators={position:u,character:c[0].character}):(r.regular=!1,r.groupingSeparators=c)}else r.primary=m.SEQUENCE,r.token=n}return r}var C={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function w(e){for(var t=[],n={type:"datetime",parts:t},r=function(n,r){if(r>n){var i=e.substring(n,r);i=i.split("]]").join("]"),t.push({type:"literal",value:i})}},i=0,a=0;a<e.length;){if("["===e.charAt(a)){if("["===e.charAt(a+1)){r(i,a),t.push({type:"literal",value:"["}),i=a+=2;continue}if(r(i,a),i=a,-1===(a=e.indexOf("]",i)))throw{code:"D3135"};var o,s=e.substring(i+1,a),c={type:"marker",component:(s=s.split(/\s+/).join("")).charAt(0)},l=s.lastIndexOf(",");if(-1!==l){var u=s.substring(l+1),p=u.indexOf("-"),h=void 0,d=void 0,f=function(e){return void 0===e||"*"===e?void 0:parseInt(e)};-1===p?h=u:(h=u.substring(0,p),d=u.substring(p+1));var g={min:f(h),max:f(d)};c.width=g,o=s.substring(1,l)}else o=s.substring(1);if(1===o.length)c.presentation1=o;else if(o.length>1){var m=o.charAt(o.length-1);-1!=="atco".indexOf(m)?(c.presentation2=m,"o"===m&&(c.ordinal=!0),c.presentation1=o.substring(0,o.length-1)):c.presentation1=o}else c.presentation1=C[c.component];if(void 0===c.presentation1)throw{code:"D3132",value:c.component};if("n"===c.presentation1[0])c.names=v.LOWER;else if("N"===c.presentation1[0])"n"===c.presentation1[1]?c.names=v.TITLE:c.names=v.UPPER;else if(-1!=="YMDdFWwXxHhmsf".indexOf(c.component)){var b=c.presentation1;if(c.presentation2&&(b+=";"+c.presentation2),c.integerFormat=x(b),c.width&&void 0!==c.width.min&&c.integerFormat.mandatoryDigits<c.width.min&&(c.integerFormat.mandatoryDigits=c.width.min),-1!=="YMD".indexOf(c.component))if(c.n=-1,c.width&&void 0!==c.width.max)c.n=c.width.max,c.integerFormat.mandatoryDigits=c.n;else{var y=c.integerFormat.mandatoryDigits+c.integerFormat.optionalDigits;y>=2&&(c.n=y)}}"Z"!==c.component&&"z"!==c.component||(c.integerFormat=x(c.presentation1)),t.push(c),i=a+1}a++}return r(i,a),n}var k=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],S=["January","February","March","April","May","June","July","August","September","October","November","December"],O=864e5,E=function(e){var t=Date.UTC(e.year,e.month),n=new Date(t).getUTCDay();return 0===n&&(n=7),n>4?t+(8-n)*O:t-(n-1)*O},_=function e(t,n){return{year:t,month:n,nextMonth:function(){return 11===n?e(t+1,0):e(t,n+1)},previousMonth:function(){return 0===n?e(t-1,11):e(t,n-1)},nextYear:function(){return e(t+1,n)},previousYear:function(){return e(t-1,n)}}},I=function(e,t){return(t-e)/(7*O)+1},P=function(e,t){var n;switch(t){case"Y":n=e.getUTCFullYear();break;case"M":n=e.getUTCMonth()+1;break;case"D":n=e.getUTCDate();break;case"d":n=(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())-Date.UTC(e.getUTCFullYear(),0))/O+1;break;case"F":0===(n=e.getUTCDay())&&(n=7);break;case"W":var r=_(e.getUTCFullYear(),0),i=E(r),a=Date.UTC(r.year,e.getUTCMonth(),e.getUTCDate()),o=I(i,a);if(o>52)a>=E(r.nextYear())&&(o=1);else if(o<1){var s=E(r.previousYear());o=I(s,a)}n=Math.floor(o);break;case"w":var c=_(e.getUTCFullYear(),e.getUTCMonth()),l=E(c),u=Date.UTC(c.year,c.month,e.getUTCDate()),p=I(l,u);if(p>4)u>=E(c.nextMonth())&&(p=1);else if(p<1){var h=E(c.previousMonth());p=I(h,u)}n=Math.floor(p);break;case"X":var d=_(e.getUTCFullYear(),0),f=E(d),g=E(d.nextYear()),m=e.getTime();n=m<f?d.year-1:m>=g?d.year+1:d.year;break;case"x":var v=_(e.getUTCFullYear(),e.getUTCMonth()),b=E(v),y=v.nextMonth(),x=E(y),C=e.getTime();n=C<b?v.previousMonth().month+1:C>=x?y.month+1:v.month+1;break;case"H":n=e.getUTCHours();break;case"h":n=e.getUTCHours(),0==(n%=12)&&(n=12);break;case"P":n=e.getUTCHours()>=12?"pm":"am";break;case"m":n=e.getUTCMinutes();break;case"s":n=e.getUTCSeconds();break;case"f":n=e.getUTCMilliseconds();break;case"Z":case"z":break;case"C":case"E":n="ISO"}return n},T=null;function A(e,t,n){var r=0,i=0;if(void 0!==n){var a=parseInt(n);r=Math.floor(a/100),i=a%100}var o,s=function(e,t){var n=P(e,t.component);if(-1!=="YMDdFWwXxHhms".indexOf(t.component))if("Y"===t.component&&-1!==t.n&&(n%=Math.pow(10,t.n)),t.names){if("M"===t.component||"x"===t.component)n=S[n-1];else{if("F"!==t.component)throw{code:"D3133",value:t.component};n=k[n]}t.names===v.UPPER?n=n.toUpperCase():t.names===v.LOWER&&(n=n.toLowerCase()),t.width&&n.length>t.width.max&&(n=n.substring(0,t.width.max))}else n=b(n,t.integerFormat);else if("f"===t.component)n=b(n,t.integerFormat);else if("Z"===t.component||"z"===t.component){var a=100*r+i;if(t.integerFormat.regular)n=b(a,t.integerFormat);else{var o=t.integerFormat.mandatoryDigits;if(1===o||2===o)n=b(r,t.integerFormat),0!==i&&(n+=":"+g(i,"00"));else{if(3!==o&&4!==o)throw{code:"D3134",value:o};n=b(a,t.integerFormat)}}a>=0&&(n="+"+n),"z"===t.component&&(n="GMT"+n),0===a&&"t"===t.presentation2&&(n="Z")}return n};void 0===t?(null===T&&(T=w("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),o=T):o=w(t);var c=new Date(e+60*(60*r+i)*1e3),l="";return o.parts.forEach((function(e){"literal"===e.type?l+=e.value:l+=s(c,e)})),l}function M(e){var t={};if("datetime"===e.type)t.type="datetime",t.parts=e.parts.map((function(e){var t={};if("literal"===e.type)t.regex=e.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if("Z"===e.component||"z"===e.component){var n;Array.isArray(e.integerFormat.groupingSeparators)||(n=e.integerFormat.groupingSeparators),t.regex="","z"===e.component&&(t.regex="GMT"),t.regex+="[-+][0-9]+",n&&(t.regex+=n.character+"[0-9]+"),t.parse=function(t){"z"===e.component&&(t=t.substring(3));var r=0,i=0;return n?(r=Number.parseInt(t.substring(0,t.indexOf(n.character))),i=Number.parseInt(t.substring(t.indexOf(n.character)+1))):t.length-1<=2?r=Number.parseInt(t):(r=Number.parseInt(t.substring(0,3)),i=Number.parseInt(t.substring(3))),60*r+i}}else if(e.integerFormat)e.integerFormat.n=e.n,t=M(e.integerFormat);else{t.regex="[a-zA-Z]+";var r={};if("M"===e.component||"x"===e.component)S.forEach((function(t,n){e.width&&e.width.max?r[t.substring(0,e.width.max)]=n+1:r[t]=n+1}));else if("F"===e.component)k.forEach((function(t,n){n>0&&(e.width&&e.width.max?r[t.substring(0,e.width.max)]=n:r[t]=n)}));else{if("P"!==e.component)throw{code:"D3133",value:e.component};r={am:0,AM:0,pm:1,PM:1}}t.parse=function(e){return r[e]}}return t.component=e.component,t}));else{t.type="integer";var n,r=e.case===v.UPPER;switch(n=e.n&&e.n>0?0===e.optionalDigits?"{".concat(e.n,"}"):"{".concat(e.n-e.optionalDigits,",").concat(e.n,"}"):"+",e.primary){case m.LETTERS:t.regex=r?"[A-Z]+":"[a-z]+",t.parse=function(e){return f(e,r?"A":"a")};break;case m.ROMAN:t.regex=r?"[MDCLXVI]+":"[mdclxvi]+",t.parse=function(e){return h(r?e:e.toUpperCase())};break;case m.WORDS:t.regex="(?:"+Object.keys(s).concat("and","[\\-, ]").join("|")+")+",t.parse=function(e){return c(e.toLowerCase())};break;case m.DECIMAL:t.regex="[0-9]".concat(n),e.ordinal&&(t.regex+="(?:th|st|nd|rd)"),t.parse=function(t){var n=t;return e.ordinal&&(n=t.substring(0,t.length-2)),e.regular?n=n.split(",").join(""):e.groupingSeparators.forEach((function(e){n=n.split(e.character).join("")})),48!==e.zeroCode&&(n=n.split("").map((function(t){return String.fromCodePoint(t.codePointAt(0)-e.zeroCode+48)})).join("")),parseInt(n)};break;case m.SEQUENCE:throw{code:"D3130",value:e.token}}}return t}function D(e,t){if(void 0!==e)return M(x(t)).parse(e)}function j(e,t){var n=M(w(t)),r="^"+n.parts.map((function(e){return"("+e.regex+")"})).join("")+"$",i=new RegExp(r,"i").exec(e);if(null!==i){for(var a=161,o=130,s=84,c=72,l=23,u=47,p={},h=1;h<i.length;h++){var d=n.parts[h-1];d.parse&&(p[d.component]=d.parse(i[h]))}if(0===Object.getOwnPropertyNames(p).length)return;var f=0,g=function(e){f<<=1,f+=e?1:0},m=function(e){return!(~e&f||!(e&f))};"YXMxWwdD".split("").forEach((function(e){return g(p[e])}));var v=!m(a)&&m(o),b=m(s),y=!b&&m(c);f=0,"PHhmsf".split("").forEach((function(e){return g(p[e])}));var x=!m(l)&&m(u),C=(v?"YD":b?"XxwF":y?"XWF":"YMD")+(x?"Phmsf":"Hmsf"),k=this.environment.timestamp,S=!1,O=!1;if(C.split("").forEach((function(e){if(void 0===p[e])S?(p[e]=-1!=="MDd".indexOf(e)?1:0,O=!0):p[e]=P(k,e);else if(S=!0,O)throw{code:"D3136"}})),p.M>0?p.M-=1:p.M=0,v){var E=Date.UTC(p.Y,0),_=1e3*(p.d-1)*60*60*24,I=new Date(E+_);p.M=I.getUTCMonth(),p.D=I.getUTCDate()}if(b)throw{code:"D3136"};if(y)throw{code:"D3136"};x&&(p.H=12===p.h?0:p.h,1===p.P&&(p.H+=12));var T=Date.UTC(p.Y,p.M,p.D,p.H,p.m,p.s,p.f);return(p.Z||p.z)&&(T-=60*(p.Z||p.z)*1e3),T}}var N=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");function R(e,t){if(void 0!==e){if(void 0===t){if(!N.test(e))throw{stack:(new Error).stack,code:"D3110",value:e};return Date.parse(e)}return j.call(this,e,t)}}function L(e,t,n){if(void 0!==e)return A.call(this,e,t,n)}return{formatInteger:g,parseInteger:D,fromMillis:L,toMillis:R}}();t.exports=i},{"./utils":6}],2:[function(e,t,n){(function(n){(function(){var r=e("./utils"),a=function(){"use strict";var e=i.mark(V),t=i.mark(z),a=i.mark(U),o=i.mark(G),s=i.mark(Z),c=i.mark(pe),l=i.mark(he),u=i.mark(de),p=i.mark(ge),h=i.mark(ke),d=i.mark(_e),f=i.mark(Te),g=r.isNumeric,m=r.isArrayOfStrings,v=r.isArrayOfNumbers,b=r.createSequence,y=r.isSequence,x=r.isFunction,C=r.isLambda,w=r.isIterable,k=r.getFunctionArity,S=r.isDeepEqual,O=r.stringToArray;function E(e){if(void 0!==e){var t=0;return e.forEach((function(e){t+=e})),t}}function _(e){return void 0===e?0:e.length}function I(e){if(void 0!==e&&0!==e.length)return Math.max.apply(Math,e)}function P(e){if(void 0!==e&&0!==e.length)return Math.min.apply(Math,e)}function T(e){if(void 0!==e&&0!==e.length){var t=0;return e.forEach((function(e){t+=e})),t/e.length}}function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0!==e){var n;if("string"==typeof e)n=e;else if(x(e))n="";else{if("number"==typeof e&&!isFinite(e))throw{code:"D3001",value:e,stack:(new Error).stack};var r=t?2:0;Array.isArray(e)&&e.outerWrapper&&(e=e[0]),n=JSON.stringify(e,(function(e,t){return null!=t&&t.toPrecision&&g(t)?Number(t.toPrecision(15)):t&&x(t)?"":t}),r)}return n}}function M(e,t,n){if(void 0!==e){var r=O(e),i=r.length;if(i+t<0&&(t=0),void 0!==n){if(n<=0)return"";var a=t>=0?t+n:i+t+n;return r.slice(t,a).join("")}return r.slice(t).join("")}}function D(e,t){if(void 0!==e){var n=e.indexOf(t);return n>-1?e.substr(0,n):e}}function j(e,t){if(void 0!==e){var n=e.indexOf(t);return n>-1?e.substr(n+t.length):e}}function N(e){if(void 0!==e)return e.toLowerCase()}function R(e){if(void 0!==e)return e.toUpperCase()}function L(e){if(void 0!==e)return O(e).length}function F(e){if(void 0!==e){var t=e.replace(/[ \t\n\r]+/gm," ");return" "===t.charAt(0)&&(t=t.substring(1))," "===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}}function B(e,t,n){if(void 0!==e){var r;void 0!==n&&0!==n.length||(n=" ");var i=Math.abs(t)-L(e);if(i>0){var a=new Array(i+1).join(n);n.length>1&&(a=M(a,0,i)),r=t>0?e+a:a+e}else r=e;return r}}function V(t,n){var r;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.apply(this,[n]),!w(r)){e.next=4;break}return e.delegateYield(r,"t0",3);case 3:r=e.t0;case 4:if(!r||"number"==typeof r.start||"number"===r.end||Array.isArray(r.groups)||x(r.next)){e.next=6;break}throw{code:"T1010",stack:(new Error).stack};case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}function z(e,n){var r,a;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:if("string"!=typeof n){t.next=6;break}r=-1!==e.indexOf(n),t.next=9;break;case 6:return t.delegateYield(V(n,e),"t0",7);case 7:a=t.t0,r=void 0!==a;case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)}function U(e,t,n){var r,o,s;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:if(!(n<0)){i.next=4;break}throw{stack:(new Error).stack,value:n,code:"D3040",index:3};case 4:if(r=b(),!(void 0===n||n>0)){i.next=17;break}return o=0,i.delegateYield(V(t,e),"t0",8);case 8:if(void 0===(s=i.t0)){i.next=17;break}case 10:if(void 0===s||!(void 0===n||o<n)){i.next=17;break}return r.push({match:s.match,index:s.start,groups:s.groups}),i.delegateYield(V(s.next),"t1",13);case 13:s=i.t1,o++,i.next=10;break;case 17:return i.abrupt("return",r);case 18:case"end":return i.stop()}}),a)}function G(e,t,n,r){var a,s,c,l,u,p,h,d;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:if(a=this,""!==t){i.next=5;break}throw{code:"D3010",stack:(new Error).stack,value:t,index:2};case 5:if(!(r<0)){i.next=7;break}throw{code:"D3011",stack:(new Error).stack,value:r,index:4};case 7:if(s="string"==typeof n?function(e){for(var t="",r=0,i=n.indexOf("$",r);-1!==i&&r<n.length;){t+=n.substring(r,i),r=i+1;var a=n.charAt(r);if("$"===a)t+="$",r++;else if("0"===a)t+=e.match,r++;else{var o;if(o=0===e.groups.length?1:Math.floor(Math.log(e.groups.length)*Math.LOG10E)+1,i=parseInt(n.substring(r,r+o),10),o>1&&i>e.groups.length&&(i=parseInt(n.substring(r,r+o-1),10)),isNaN(i))t+="$";else{if(e.groups.length>0){var s=e.groups[i-1];void 0!==s&&(t+=s)}r+=i.toString().length}}i=n.indexOf("$",r)}return t+=n.substring(r)}:n,c="",l=0,!(void 0===r||r>0)){i.next=44;break}if(u=0,"string"!=typeof t){i.next=18;break}for(p=e.indexOf(t,l);-1!==p&&(void 0===r||u<r);)c+=e.substring(l,p),c+=n,l=p+t.length,u++,p=e.indexOf(t,l);c+=e.substring(l),i.next=42;break;case 18:return i.delegateYield(V(t,e),"t0",19);case 19:if(void 0===(h=i.t0)){i.next=41;break}case 21:if(void 0===h||!(void 0===r||u<r)){i.next=38;break}if(c+=e.substring(l,h.start),d=s.apply(a,[h]),!w(d)){i.next=27;break}return i.delegateYield(d,"t1",26);case 26:d=i.t1;case 27:if("string"!=typeof d){i.next=31;break}c+=d,i.next=32;break;case 31:throw{code:"D3012",stack:(new Error).stack,value:d};case 32:return l=h.start+h.match.length,u++,i.delegateYield(V(h.next),"t2",35);case 35:h=i.t2,i.next=21;break;case 38:c+=e.substring(l),i.next=42;break;case 41:c=e;case 42:i.next=45;break;case 44:c=e;case 45:return i.abrupt("return",c);case 46:case"end":return i.stop()}}),o,this)}function H(e){if(void 0!==e)return("undefined"!=typeof window?window.btoa:function(e){return new n.Buffer.from(e,"binary").toString("base64")})(e)}function Y(e){if(void 0!==e)return("undefined"!=typeof window?window.atob:function(e){return new n.Buffer.from(e,"base64").toString("binary")})(e)}function q(e){if(void 0!==e){var t;try{t=encodeURIComponent(e)}catch(n){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"encodeUrlComponent"}}return t}}function W(e){if(void 0!==e){var t;try{t=encodeURI(e)}catch(n){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"encodeUrl"}}return t}}function X(e){if(void 0!==e){var t;try{t=decodeURIComponent(e)}catch(n){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"decodeUrlComponent"}}return t}}function K(e){if(void 0!==e){var t;try{t=decodeURI(e)}catch(n){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"decodeUrl"}}return t}}function Z(e,t,n){var r,a,o,c;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:if(!(n<0)){i.next=4;break}throw{code:"D3020",stack:(new Error).stack,value:n,index:3};case 4:if(r=[],!(void 0===n||n>0)){i.next=27;break}if("string"!=typeof t){i.next=10;break}r=e.split(t,n),i.next=27;break;case 10:return a=0,i.delegateYield(V(t,e),"t0",12);case 12:if(void 0===(o=i.t0)){i.next=26;break}c=0;case 15:if(void 0===o||!(void 0===n||a<n)){i.next=23;break}return r.push(e.substring(c,o.start)),c=o.end,i.delegateYield(V(o.next),"t1",19);case 19:o=i.t1,a++,i.next=15;break;case 23:(void 0===n||a<n)&&r.push(e.substring(c)),i.next=27;break;case 26:r.push(e);case 27:return i.abrupt("return",r);case 28:case"end":return i.stop()}}),s)}function $(e,t){if(void 0!==e)return void 0===t&&(t=""),e.join(t)}function Q(e,t,n){if(void 0!==e){var r={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"\u2030","zero-digit":"0",digit:"#","pattern-separator":";"};void 0!==n&&Object.keys(n).forEach((function(e){r[e]=n[e]}));for(var i=[],a=r["zero-digit"].charCodeAt(0),o=a;o<a+10;o++)i.push(String.fromCharCode(o));var s=i.concat([r["decimal-separator"],r["exponent-separator"],r["grouping-separator"],r.digit,r["pattern-separator"]]),c=t.split(r["pattern-separator"]);if(c.length>2)throw{code:"D3080",stack:(new Error).stack};var l=function(e){var t,n,i,a,o=function(){for(var t,n=0;n<e.length;n++)if(t=e.charAt(n),-1!==s.indexOf(t)&&t!==r["exponent-separator"])return e.substring(0,n)}(),c=function(){for(var t,n=e.length-1;n>=0;n--)if(t=e.charAt(n),-1!==s.indexOf(t)&&t!==r["exponent-separator"])return e.substring(n+1)}(),l=e.substring(o.length,e.length-c.length),u=e.indexOf(r["exponent-separator"],o.length);-1===u||u>e.length-c.length?(t=l,n=void 0):(t=l.substring(0,u),n=l.substring(u+1));var p=t.indexOf(r["decimal-separator"]);return-1===p?(i=t,a=c):(i=t.substring(0,p),a=t.substring(p+1)),{prefix:o,suffix:c,activePart:l,mantissaPart:t,exponentPart:n,integerPart:i,fractionalPart:a,subpicture:e}},u=function(e){var t,n,a=e.subpicture,o=a.indexOf(r["decimal-separator"]);o!==a.lastIndexOf(r["decimal-separator"])&&(t="D3081"),a.indexOf(r.percent)!==a.lastIndexOf(r.percent)&&(t="D3082"),a.indexOf(r["per-mille"])!==a.lastIndexOf(r["per-mille"])&&(t="D3083"),-1!==a.indexOf(r.percent)&&-1!==a.indexOf(r["per-mille"])&&(t="D3084");var c=!1;for(n=0;n<e.mantissaPart.length;n++){var l=e.mantissaPart.charAt(n);if(-1!==i.indexOf(l)||l===r.digit){c=!0;break}}c||(t="D3085"),-1!==e.activePart.split("").map((function(e){return-1===s.indexOf(e)?"p":"a"})).join("").indexOf("p")&&(t="D3086"),-1!==o?a.charAt(o-1)!==r["grouping-separator"]&&a.charAt(o+1)!==r["grouping-separator"]||(t="D3087"):e.integerPart.charAt(e.integerPart.length-1)===r["grouping-separator"]&&(t="D3088"),-1!==a.indexOf(r["grouping-separator"]+r["grouping-separator"])&&(t="D3089");var u=e.integerPart.indexOf(r.digit);-1!==u&&e.integerPart.substring(0,u).split("").filter((function(e){return i.indexOf(e)>-1})).length>0&&(t="D3090"),-1!==(u=e.fractionalPart.lastIndexOf(r.digit))&&e.fractionalPart.substring(u).split("").filter((function(e){return i.indexOf(e)>-1})).length>0&&(t="D3091");var p="string"==typeof e.exponentPart;if(p&&e.exponentPart.length>0&&(-1!==a.indexOf(r.percent)||-1!==a.indexOf(r["per-mille"]))&&(t="D3092"),p&&(0===e.exponentPart.length||e.exponentPart.split("").filter((function(e){return-1===i.indexOf(e)})).length>0)&&(t="D3093"),t)throw{code:t,stack:(new Error).stack}},p=function(e){var t=function(t,n){for(var a=[],o=t.indexOf(r["grouping-separator"]);-1!==o;){var s=(n?t.substring(0,o):t.substring(o)).split("").filter((function(e){return-1!==i.indexOf(e)||e===r.digit})).length;a.push(s),o=e.integerPart.indexOf(r["grouping-separator"],o+1)}return a},n=t(e.integerPart),a=function(e){if(0===e.length)return 0;for(var t=function e(t,n){return 0===n?t:e(n,t%n)},n=e.reduce(t),r=1;r<=e.length;r++)if(-1===e.indexOf(r*n))return 0;return n}(n),o=t(e.fractionalPart,!0),s=e.integerPart.split("").filter((function(e){return-1!==i.indexOf(e)})).length,c=s,l=e.fractionalPart.split(""),u=l.filter((function(e){return-1!==i.indexOf(e)})).length,p=l.filter((function(e){return-1!==i.indexOf(e)||e===r.digit})).length,h="string"==typeof e.exponentPart;0===s&&0===p&&(h?(u=1,p=1):s=1),h&&0===s&&-1!==e.integerPart.indexOf(r.digit)&&(s=1),0===s&&0===u&&(u=1);var d=0;return h&&(d=e.exponentPart.split("").filter((function(e){return-1!==i.indexOf(e)})).length),{integerPartGroupingPositions:n,regularGrouping:a,minimumIntegerPartSize:s,scalingFactor:c,prefix:e.prefix,fractionalPartGroupingPositions:o,minimumFactionalPartSize:u,maximumFactionalPartSize:p,minimumExponentSize:d,suffix:e.suffix,picture:e.subpicture}},h=c.map(l);h.forEach(u);var d,f,g,m,v=h.map(p),b=r["minus-sign"],y=r["zero-digit"],x=r["decimal-separator"],C=r["grouping-separator"];if(1===v.length&&(v.push(JSON.parse(JSON.stringify(v[0]))),v[1].prefix=b+v[1].prefix),f=-1!==(d=e>=0?v[0]:v[1]).picture.indexOf(r.percent)?100*e:-1!==d.picture.indexOf(r["per-mille"])?1e3*e:e,0===d.minimumExponentSize)g=f;else{var w=Math.pow(10,d.scalingFactor),k=Math.pow(10,d.scalingFactor-1);for(g=f,m=0;g<k;)g*=10,m-=1;for(;g>w;)g/=10,m+=1}var S=function(e,t){var n=Math.abs(e).toFixed(t);return"0"!==y&&(n=n.split("").map((function(e){return e>="0"&&e<="9"?i[e.charCodeAt(0)-48]:e})).join("")),n},O=S(ie(g,d.maximumFactionalPartSize),d.maximumFactionalPartSize),E=O.indexOf(".");for(-1===E?O+=x:O=O.replace(".",x);O.charAt(0)===y;)O=O.substring(1);for(;O.charAt(O.length-1)===y;)O=O.substring(0,O.length-1);E=O.indexOf(x);var _=d.minimumIntegerPartSize-E,I=d.minimumFactionalPartSize-(O.length-E-1);if(O=(_>0?new Array(_+1).join(y):"")+O,O+=I>0?new Array(I+1).join(y):"",E=O.indexOf(x),d.regularGrouping>0)for(var P=Math.floor((E-1)/d.regularGrouping),T=1;T<=P;T++)O=[O.slice(0,E-T*d.regularGrouping),C,O.slice(E-T*d.regularGrouping)].join("");else d.integerPartGroupingPositions.forEach((function(e){O=[O.slice(0,E-e),C,O.slice(E-e)].join(""),E++}));if(E=O.indexOf(x),d.fractionalPartGroupingPositions.forEach((function(e){O=[O.slice(0,e+E+1),C,O.slice(e+E+1)].join("")})),E=O.indexOf(x),-1!==d.picture.indexOf(x)&&E!==O.length-1||(O=O.substring(0,O.length-1)),void 0!==m){var A=S(m,0);(_=d.minimumExponentSize-A.length)>0&&(A=new Array(_+1).join(y)+A),O=O+r["exponent-separator"]+(m<0?b:"")+A}return O=d.prefix+O+d.suffix}}function J(e,t){if(void 0!==e){if(e=ie(e),(t=void 0===t?10:ie(t))<2||t>36)throw{code:"D3100",stack:(new Error).stack,value:t};return e.toString(t)}}function ee(e){var t;if(void 0!==e){if("number"==typeof e)t=e;else if("string"==typeof e&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(e)&&!isNaN(parseFloat(e))&&isFinite(e))t=parseFloat(e);else if(!0===e)t=1;else{if(!1!==e)throw{code:"D3030",value:e,stack:(new Error).stack,index:1};t=0}return t}}function te(e){if(void 0!==e)return Math.abs(e)}function ne(e){if(void 0!==e)return Math.floor(e)}function re(e){if(void 0!==e)return Math.ceil(e)}function ie(e,t){var n;if(void 0!==e){if(t){var r=e.toString().split("e");e=+(r[0]+"e"+(r[1]?+r[1]+t:t))}var i=(n=Math.round(e))-e;return.5===Math.abs(i)&&1===Math.abs(n%2)&&(n-=1),t&&(r=n.toString().split("e"),n=+(r[0]+"e"+(r[1]?+r[1]-t:-t))),Object.is(n,-0)&&(n=0),n}}function ae(e){if(void 0!==e){if(e<0)throw{stack:(new Error).stack,code:"D3060",index:1,value:e};return Math.sqrt(e)}}function oe(e,t){var n;if(void 0!==e){if(n=Math.pow(e,t),!isFinite(n))throw{stack:(new Error).stack,code:"D3061",index:1,value:e,exp:t};return n}}function se(){return Math.random()}function ce(e){if(void 0!==e){var t=!1;return Array.isArray(e)?1===e.length?t=ce(e[0]):e.length>1&&(t=e.filter((function(e){return ce(e)})).length>0):"string"==typeof e?e.length>0&&(t=!0):g(e)?0!==e&&(t=!0):null!==e&&"object"==typeof e?Object.keys(e).length>0&&(t=!0):"boolean"==typeof e&&!0===e&&(t=!0),t}}function le(e){if(void 0!==e)return!ce(e)}function ue(e,t,n,r){var i=[t],a=k(e);return a>=2&&i.push(n),a>=3&&i.push(r),i}function pe(e,t){var n,r,a,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:n=b(),r=0;case 4:if(!(r<e.length)){i.next=12;break}return a=ue(t,e[r],r,e),i.delegateYield(t.apply(this,a),"t0",7);case 7:void 0!==(o=i.t0)&&n.push(o);case 9:r++,i.next=4;break;case 12:return i.abrupt("return",n);case 13:case"end":return i.stop()}}),c,this)}function he(e,t){var n,r,a,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:n=b(),r=0;case 4:if(!(r<e.length)){i.next=13;break}return a=e[r],o=ue(t,a,r,e),i.delegateYield(t.apply(this,o),"t0",8);case 8:ce(i.t0)&&n.push(a);case 10:r++,i.next=4;break;case 13:return i.abrupt("return",n);case 14:case"end":return i.stop()}}),l,this)}function de(e,t){var n,r,a,o,s,c,l;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:n=!1,a=0;case 4:if(!(a<e.length)){i.next=22;break}if(o=e[a],s=!0,void 0===t){i.next=12;break}return c=ue(t,o,a,e),i.delegateYield(t.apply(this,c),"t0",10);case 10:l=i.t0,s=ce(l);case 12:if(!s){i.next=19;break}if(n){i.next=18;break}r=o,n=!0,i.next=19;break;case 18:throw{stack:(new Error).stack,code:"D3138",index:a};case 19:a++,i.next=4;break;case 22:if(n){i.next=24;break}throw{stack:(new Error).stack,code:"D3139"};case 24:return i.abrupt("return",r);case 25:case"end":return i.stop()}}),u,this)}function fe(){for(var e=[],t=Array.prototype.slice.call(arguments),n=Math.min.apply(Math,t.map((function(e){return Array.isArray(e)?e.length:0}))),r=0;r<n;r++){var i=t.map((function(e){return e[r]}));e.push(i)}return e}function ge(e,t,n){var r,a,o,s;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:if(!((a=k(t))<2)){i.next=5;break}throw{stack:(new Error).stack,code:"D3050",index:1};case 5:void 0===n&&e.length>0?(r=e[0],o=1):(r=n,o=0);case 6:if(!(o<e.length)){i.next=15;break}return s=[r,e[o]],a>=3&&s.push(o),a>=4&&s.push(e),i.delegateYield(t.apply(this,s),"t0",11);case 11:r=i.t0,o++,i.next=6;break;case 15:return i.abrupt("return",r);case 16:case"end":return i.stop()}}),p,this)}function me(e){var t=b();if(Array.isArray(e)){var n={};e.forEach((function(e){me(e).forEach((function(e){n[e]=!0}))})),t=me(n)}else null===e||"object"!=typeof e||C(e)||Object.keys(e).forEach((function(e){return t.push(e)}));return t}function ve(e,t){var n;if(Array.isArray(e)){n=b();for(var r=0;r<e.length;r++){var i=ve(e[r],t);void 0!==i&&(Array.isArray(i)?i.forEach((function(e){return n.push(e)})):n.push(i))}}else null!==e&&"object"==typeof e&&(n=e[t]);return n}function be(e,t){return void 0===e?t:void 0===t?e:(Array.isArray(e)||(e=b(e)),Array.isArray(t)||(t=[t]),e.concat(t))}function ye(e){return void 0!==e}function xe(e){var t=b();if(Array.isArray(e))e.forEach((function(e){t=be(t,xe(e))}));else if(null===e||"object"!=typeof e||C(e))t=e;else for(var n in e){var r={};r[n]=e[n],t.push(r)}return t}function Ce(e){if(void 0!==e){var t={};return e.forEach((function(e){for(var n in e)t[n]=e[n]})),t}}function we(e){if(void 0!==e){if(e.length<=1)return e;for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[t-r-1]=e[r];return n}}function ke(e,t){var n,r,a,o;return i.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n=b(),s.t0=i.keys(e);case 2:if((s.t1=s.t0()).done){s.next=10;break}return r=s.t1.value,a=ue(t,e[r],r,e),s.delegateYield(t.apply(this,a),"t2",6);case 6:void 0!==(o=s.t2)&&n.push(o),s.next=2;break;case 10:return s.abrupt("return",n);case 11:case"end":return s.stop()}}),h,this)}function Se(e){throw{code:"D3137",stack:(new Error).stack,message:e||"$error() function evaluated"}}function Oe(e,t){if(!e)throw{code:"D3141",stack:(new Error).stack,message:t||"$assert() statement failed"}}function Ee(e){if(void 0!==e)return null===e?"null":g(e)?"number":"string"==typeof e?"string":"boolean"==typeof e?"boolean":Array.isArray(e)?"array":x(e)?"function":"object"}function _e(e,t){var n,r,a,o;return i.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(void 0!==e){s.next=2;break}return s.abrupt("return",void 0);case 2:if(!(e.length<=1)){s.next=4;break}return s.abrupt("return",e);case 4:if(void 0!==t){s.next=10;break}if(v(e)||m(e)){s.next=7;break}throw{stack:(new Error).stack,code:"D3070",index:1};case 7:n=i.mark((function e(t,n){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t>n);case 1:case"end":return e.stop()}}),e)})),s.next=11;break;case 10:n=t;case 11:return r=i.mark((function e(t,r){var a,o;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.mark((function e(t,r,a){return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==r.length){i.next=4;break}Array.prototype.push.apply(t,a),i.next=16;break;case 4:if(0!==a.length){i.next=8;break}Array.prototype.push.apply(t,r),i.next=16;break;case 8:return i.delegateYield(n(r[0],a[0]),"t0",9);case 9:if(!i.t0){i.next=14;break}return t.push(a[0]),i.delegateYield(e(t,r,a.slice(1)),"t1",12);case 12:i.next=16;break;case 14:return t.push(r[0]),i.delegateYield(e(t,r.slice(1),a),"t2",16);case 16:case"end":return i.stop()}}),e)})),o=[],e.delegateYield(a(o,t,r),"t0",3);case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})),a=i.mark((function e(t){var n,a,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(Array.isArray(t)&&!(t.length<=1)){i.next=4;break}return i.abrupt("return",t);case 4:return n=Math.floor(t.length/2),a=t.slice(0,n),o=t.slice(n),i.delegateYield(e(a),"t0",8);case 8:return a=i.t0,i.delegateYield(e(o),"t1",10);case 10:return o=i.t1,i.delegateYield(r(a,o),"t2",12);case 12:return i.abrupt("return",i.t2);case 13:case"end":return i.stop()}}),e)})),s.delegateYield(a(e),"t0",14);case 14:return o=s.t0,s.abrupt("return",o);case 16:case"end":return s.stop()}}),d)}function Ie(e){if(void 0!==e){if(e.length<=1)return e;for(var t=new Array(e.length),n=0;n<e.length;n++){var r=Math.floor(Math.random()*(n+1));n!==r&&(t[n]=t[r]),t[r]=e[n]}return t}}function Pe(e){if(void 0!==e){if(!Array.isArray(e)||e.length<=1)return e;for(var t=y(e)?b():[],n=0;n<e.length;n++){for(var r=e[n],i=!1,a=0;a<t.length;a++)if(S(r,t[a])){i=!0;break}i||t.push(r)}return t}}function Te(e,t){var n,r,a,o;return i.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n={},s.t0=i.keys(e);case 2:if((s.t1=s.t0()).done){s.next=11;break}return r=s.t1.value,a=e[r],o=ue(t,a,r,e),s.delegateYield(t.apply(this,o),"t2",7);case 7:ce(s.t2)&&(n[r]=a),s.next=2;break;case 11:return 0===Object.keys(n).length&&(n=void 0),s.abrupt("return",n);case 13:case"end":return s.stop()}}),f,this)}return{sum:E,count:_,max:I,min:P,average:T,string:A,substring:M,substringBefore:D,substringAfter:j,lowercase:N,uppercase:R,length:L,trim:F,pad:B,match:U,contains:z,replace:G,split:Z,join:$,formatNumber:Q,formatBase:J,number:ee,floor:ne,ceil:re,round:ie,abs:te,sqrt:ae,power:oe,random:se,boolean:ce,not:le,map:pe,zip:fe,filter:he,single:de,foldLeft:ge,sift:Te,keys:me,lookup:ve,append:be,exists:ye,spread:xe,merge:Ce,reverse:we,each:ke,error:Se,assert:Oe,type:Ee,sort:_e,shuffle:Ie,distinct:Pe,base64encode:H,base64decode:Y,encodeUrlComponent:q,encodeUrl:W,decodeUrlComponent:X,decodeUrl:K}}();t.exports=a}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":6}],3:[function(e,t,n){var r=e("./datetime"),a=e("./functions"),o=e("./utils"),s=e("./parser"),c=e("./signature"),l=function(){"use strict";var e=i.mark(B),t=i.mark(V),n=i.mark(U),l=i.mark(G),u=i.mark(H),p=i.mark(Y),h=i.mark(q),d=i.mark(W),f=i.mark(ie),g=i.mark(se),m=i.mark(ue),v=i.mark(pe),b=i.mark(he),y=i.mark(ge),x=i.mark(be),C=i.mark(ye),w=i.mark(xe),k=i.mark(Ce),S=i.mark(ke),O=i.mark(Oe),E=i.mark(Ie),_=i.mark(Ae),I=o.isNumeric,P=o.isArrayOfStrings,T=o.isArrayOfNumbers,A=o.createSequence,M=o.isSequence,D=o.isFunction,j=o.isLambda,N=o.isIterable,R=o.getFunctionArity,L=o.isDeepEqual,F=De(null);function B(t,n,r){var a,o,s,c;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=r.lookup("__evaluate_entry"))&&o(t,n,r),e.t0=t.type,e.next="path"===e.t0?5:"binary"===e.t0?8:"unary"===e.t0?11:"name"===e.t0?14:"string"===e.t0||"number"===e.t0||"value"===e.t0?16:"wildcard"===e.t0?18:"descendant"===e.t0?20:"parent"===e.t0?22:"condition"===e.t0?24:"block"===e.t0?27:"bind"===e.t0?30:"regex"===e.t0?33:"function"===e.t0?35:"variable"===e.t0?38:"lambda"===e.t0?40:"partial"===e.t0?42:"apply"===e.t0?45:"transform"===e.t0?48:50;break;case 5:return e.delegateYield(V(t,n,r),"t1",6);case 6:return a=e.t1,e.abrupt("break",50);case 8:return e.delegateYield(q(t,n,r),"t2",9);case 9:return a=e.t2,e.abrupt("break",50);case 11:return e.delegateYield(W(t,n,r),"t3",12);case 12:return a=e.t3,e.abrupt("break",50);case 14:return a=X(t,n,r),e.abrupt("break",50);case 16:return a=K(t,n,r),e.abrupt("break",50);case 18:return a=Z(t,n,r),e.abrupt("break",50);case 20:return a=Q(t,n,r),e.abrupt("break",50);case 22:return a=r.lookup(t.slot.label),e.abrupt("break",50);case 24:return e.delegateYield(pe(t,n,r),"t4",25);case 25:return a=e.t4,e.abrupt("break",50);case 27:return e.delegateYield(he(t,n,r),"t5",28);case 28:return a=e.t5,e.abrupt("break",50);case 30:return e.delegateYield(ue(t,n,r),"t6",31);case 31:return a=e.t6,e.abrupt("break",50);case 33:return a=de(t,n,r),e.abrupt("break",50);case 35:return e.delegateYield(ye(t,n,r),"t7",36);case 36:return a=e.t7,e.abrupt("break",50);case 38:return a=fe(t,n,r),e.abrupt("break",50);case 40:return a=we(t,n,r),e.abrupt("break",50);case 42:return e.delegateYield(ke(t,n,r),"t8",43);case 43:return a=e.t8,e.abrupt("break",50);case 45:return e.delegateYield(be(t,n,r),"t9",46);case 46:return a=e.t9,e.abrupt("break",50);case 48:return a=me(t,n,r),e.abrupt("break",50);case 50:if(!r.async||null!=a&&"function"==typeof a.then||(a=Promise.resolve(a)),!r.async||"function"!=typeof a.then||!t.nextFunction||"function"!=typeof a[t.nextFunction]){e.next=54;break}e.next=57;break;case 54:return e.next=56,a;case 56:a=e.sent;case 57:if(!Object.prototype.hasOwnProperty.call(t,"predicate")){e.next=65;break}s=0;case 59:if(!(s<t.predicate.length)){e.next=65;break}return e.delegateYield(Y(t.predicate[s].expr,a,r),"t10",61);case 61:a=e.t10;case 62:s++,e.next=59;break;case 65:if("path"===t.type||!Object.prototype.hasOwnProperty.call(t,"group")){e.next=68;break}return e.delegateYield(se(t.group,a,r),"t11",67);case 67:a=e.t11;case 68:return(c=r.lookup("__evaluate_exit"))&&c(t,n,r,a),a&&M(a)&&!a.tupleStream&&(t.keepArray&&(a.keepSingleton=!0),0===a.length?a=void 0:1===a.length&&(a=a.keepSingleton?a:a[0])),e.abrupt("return",a);case 72:case"end":return e.stop()}}),e)}function V(e,n,r){var a,o,s,c,l,u;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Array.isArray(n)&&"variable"!==e.steps[0].type?n:A(n),s=!1,c=void 0,l=0;case 4:if(!(l<e.steps.length)){t.next=25;break}if((u=e.steps[l]).tuple&&(s=!0),0!==l||!u.consarray){t.next=12;break}return t.delegateYield(B(u,a,r),"t0",9);case 9:o=t.t0,t.next=19;break;case 12:if(!s){t.next=17;break}return t.delegateYield(H(u,a,c,r),"t1",14);case 14:c=t.t1,t.next=19;break;case 17:return t.delegateYield(U(u,a,r,l===e.steps.length-1),"t2",18);case 18:o=t.t2;case 19:if(s||void 0!==o&&0!==o.length){t.next=21;break}return t.abrupt("break",25);case 21:void 0===u.focus&&(a=o);case 22:l++,t.next=4;break;case 25:if(s)if(e.tuple)o=c;else for(o=A(),l=0;l<c.length;l++)o.push(c[l]["@"]);if(e.keepSingletonArray&&(Array.isArray(o)&&o.cons&&!o.sequence&&(o=A(o)),o.keepSingleton=!0),!e.hasOwnProperty("group")){t.next=30;break}return t.delegateYield(se(e.group,s?c:o,r),"t3",29);case 29:o=t.t3;case 30:return t.abrupt("return",o);case 31:case"end":return t.stop()}}),t)}function z(e,t){var n=De(e);for(var r in t)n.bind(r,t[r]);return n}function U(e,t,r,a){var o,s,c,l,u;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("sort"!==e.type){n.next=7;break}return n.delegateYield(ge(e,t,r),"t0",2);case 2:if(o=n.t0,!e.stages){n.next=6;break}return n.delegateYield(G(e.stages,o,r),"t1",5);case 5:o=n.t1;case 6:return n.abrupt("return",o);case 7:o=A(),s=0;case 9:if(!(s<t.length)){n.next=24;break}return n.delegateYield(B(e,t[s],r),"t2",11);case 11:if(c=n.t2,!e.stages){n.next=20;break}l=0;case 14:if(!(l<e.stages.length)){n.next=20;break}return n.delegateYield(Y(e.stages[l].expr,c,r),"t3",16);case 16:c=n.t3;case 17:l++,n.next=14;break;case 20:void 0!==c&&o.push(c);case 21:s++,n.next=9;break;case 24:return u=A(),a&&1===o.length&&Array.isArray(o[0])&&!M(o[0])?u=o[0]:o.forEach((function(e){!Array.isArray(e)||e.cons?u.push(e):e.forEach((function(e){return u.push(e)}))})),n.abrupt("return",u);case 27:case"end":return n.stop()}}),n)}function G(e,t,n){var r,a,o,s;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=t,a=0;case 2:if(!(a<e.length)){i.next=15;break}o=e[a],i.t0=o.type,i.next="filter"===i.t0?7:"index"===i.t0?10:12;break;case 7:return i.delegateYield(Y(o.expr,r,n),"t1",8);case 8:return r=i.t1,i.abrupt("break",12);case 10:for(s=0;s<r.length;s++)r[s][o.value]=s;return i.abrupt("break",12);case 12:a++,i.next=2;break;case 15:return i.abrupt("return",r);case 16:case"end":return i.stop()}}),l)}function H(e,t,n,r){var a,o,s,c,l,p,h,d;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("sort"!==e.type){i.next=15;break}if(!n){i.next=6;break}return i.delegateYield(ge(e,n,r),"t0",3);case 3:a=i.t0,i.next=11;break;case 6:return i.delegateYield(ge(e,t,r),"t1",7);case 7:for(o=i.t1,(a=A()).tupleStream=!0,s=0;s<o.length;s++)(c={"@":o[s]})[e.index]=s,a.push(c);case 11:if(!e.stages){i.next=14;break}return i.delegateYield(G(e.stages,a,r),"t2",13);case 13:a=i.t2;case 14:return i.abrupt("return",a);case 15:(a=A()).tupleStream=!0,l=r,void 0===n&&(n=t.map((function(e){return{"@":e}}))),p=0;case 20:if(!(p<n.length)){i.next=28;break}return l=z(r,n[p]),i.delegateYield(B(e,n[p]["@"],l),"t3",23);case 23:if(void 0!==(h=i.t3))for(Array.isArray(h)||(h=[h]),d=0;d<h.length;d++)c={},Object.assign(c,n[p]),h.tupleStream?Object.assign(c,h[d]):(e.focus?(c[e.focus]=h[d],c["@"]=n[p]["@"]):c["@"]=h[d],e.index&&(c[e.index]=d),e.ancestor&&(c[e.ancestor.label]=n[p]["@"])),a.push(c);case 25:p++,i.next=20;break;case 28:if(!e.stages){i.next=31;break}return i.delegateYield(G(e.stages,a,r),"t4",30);case 30:a=i.t4;case 31:return i.abrupt("return",a);case 32:case"end":return i.stop()}}),u)}function Y(e,t,n){var r,o,s,c,l,u;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=A(),t&&t.tupleStream&&(r.tupleStream=!0),Array.isArray(t)||(t=A(t)),"number"!==e.type){i.next=10;break}(o=Math.floor(e.value))<0&&(o=t.length+o),void 0!==(s=t[o])&&(Array.isArray(s)?r=s:r.push(s)),i.next=23;break;case 10:o=0;case 11:if(!(o<t.length)){i.next=23;break}return s=t[o],c=s,l=n,t.tupleStream&&(c=s["@"],l=z(n,s)),i.delegateYield(B(e,c,l),"t0",17);case 17:u=i.t0,I(u)&&(u=[u]),T(u)?u.forEach((function(e){var n=Math.floor(e);n<0&&(n=t.length+n),n===o&&r.push(s)})):a.boolean(u)&&r.push(s);case 20:o++,i.next=11;break;case 23:return i.abrupt("return",r);case 24:case"end":return i.stop()}}),p)}function q(e,t,n){var r,a,o,s,c;return i.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.delegateYield(B(e.lhs,t,n),"t0",1);case 1:if(a=l.t0,o=e.value,s=i.mark((function r(){return i.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(B(e.rhs,t,n),"t0",1);case 1:return r.abrupt("return",r.t0);case 2:case"end":return r.stop()}}),r)})),"and"!==o&&"or"!==o){l.next=15;break}return l.prev=5,l.delegateYield(ie(a,s,o),"t1",7);case 7:return l.abrupt("return",l.t1);case 10:throw l.prev=10,l.t2=l.catch(5),l.t2.position=e.position,l.t2.token=o,l.t2;case 15:return l.delegateYield(s(),"t3",16);case 16:c=l.t3,l.prev=17,l.t4=o,l.next="+"===l.t4||"-"===l.t4||"*"===l.t4||"/"===l.t4||"%"===l.t4?21:"="===l.t4||"!="===l.t4?23:"<"===l.t4||"<="===l.t4||">"===l.t4||">="===l.t4?25:"&"===l.t4?27:".."===l.t4?29:"in"===l.t4?31:33;break;case 21:return r=ee(a,c,o),l.abrupt("break",33);case 23:return r=te(a,c,o),l.abrupt("break",33);case 25:return r=ne(a,c,o),l.abrupt("break",33);case 27:return r=oe(a,c),l.abrupt("break",33);case 29:return r=le(a,c),l.abrupt("break",33);case 31:return r=re(a,c),l.abrupt("break",33);case 33:l.next=40;break;case 35:throw l.prev=35,l.t5=l.catch(17),l.t5.position=e.position,l.t5.token=o,l.t5;case 40:return l.abrupt("return",r);case 41:case"end":return l.stop()}}),h,null,[[5,10],[17,35]])}function W(e,t,n){var r,o,s,c;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.t0=e.value,i.next="-"===i.t0?3:"["===i.t0?15:"{"===i.t0?27:30;break;case 3:return i.delegateYield(B(e.expression,t,n),"t1",4);case 4:if(void 0!==(r=i.t1)){i.next=9;break}r=void 0,i.next=14;break;case 9:if(!I(r)){i.next=13;break}r=-r,i.next=14;break;case 13:throw{code:"D1002",stack:(new Error).stack,position:e.position,token:e.value,value:r};case 14:return i.abrupt("break",30);case 15:r=[],o=0;case 17:if(!(o<e.expressions.length)){i.next=25;break}return s=e.expressions[o],i.delegateYield(B(s,t,n),"t2",20);case 20:void 0!==(c=i.t2)&&("["===s.value?r.push(c):r=a.append(r,c));case 22:o++,i.next=17;break;case 25:return e.consarray&&Object.defineProperty(r,"cons",{enumerable:!1,configurable:!1,value:!0}),i.abrupt("break",30);case 27:return i.delegateYield(se(e,t,n),"t3",28);case 28:return r=i.t3,i.abrupt("break",30);case 30:return i.abrupt("return",r);case 31:case"end":return i.stop()}}),d)}function X(e,t,n){return a.lookup(t,e.value)}function K(e){return e.value}function Z(e,t){var n=A();return Array.isArray(t)&&t.outerWrapper&&t.length>0&&(t=t[0]),null!==t&&"object"==typeof t&&Object.keys(t).forEach((function(e){var r=t[e];Array.isArray(r)?(r=$(r),n=a.append(n,r)):n.push(r)})),n}function $(e,t){return void 0===t&&(t=[]),Array.isArray(e)?e.forEach((function(e){$(e,t)})):t.push(e),t}function Q(e,t){var n,r=A();return void 0!==t&&(J(t,r),n=1===r.length?r[0]:r),n}function J(e,t){Array.isArray(e)||t.push(e),Array.isArray(e)?e.forEach((function(e){J(e,t)})):null!==e&&"object"==typeof e&&Object.keys(e).forEach((function(n){J(e[n],t)}))}function ee(e,t,n){var r;if(void 0!==e&&!I(e))throw{code:"T2001",stack:(new Error).stack,value:e};if(void 0!==t&&!I(t))throw{code:"T2002",stack:(new Error).stack,value:t};if(void 0===e||void 0===t)return r;switch(n){case"+":r=e+t;break;case"-":r=e-t;break;case"*":r=e*t;break;case"/":r=e/t;break;case"%":r=e%t}return r}function te(e,t,n){var r;if(void 0===e||void 0===t)return!1;switch(n){case"=":r=L(e,t);break;case"!=":r=!L(e,t)}return r}function ne(e,t,n){var r,i=typeof e,a=typeof t;if("undefined"!==i&&"string"!==i&&"number"!==i||"undefined"!==a&&"string"!==a&&"number"!==a)throw{code:"T2010",stack:(new Error).stack,value:"string"!==i&&"number"!==i?e:t};if("undefined"!==i&&"undefined"!==a){if(i!==a)throw{code:"T2009",stack:(new Error).stack,value:e,value2:t};switch(n){case"<":r=e<t;break;case"<=":r=e<=t;break;case">":r=e>t;break;case">=":r=e>=t}return r}}function re(e,t){var n=!1;if(void 0===e||void 0===t)return!1;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++)if(t[r]===e){n=!0;break}return n}function ie(e,t,n){var r,a;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=ae(e),i.t0=n,i.next="and"===i.t0?4:"or"===i.t0?12:20;break;case 4:if(i.t1=a,!i.t1){i.next=10;break}return i.t2=ae,i.delegateYield(t(),"t3",8);case 8:i.t4=i.t3,i.t1=(0,i.t2)(i.t4);case 10:return r=i.t1,i.abrupt("break",20);case 12:if(i.t5=a,i.t5){i.next=18;break}return i.t6=ae,i.delegateYield(t(),"t7",16);case 16:i.t8=i.t7,i.t5=(0,i.t6)(i.t8);case 18:return r=i.t5,i.abrupt("break",20);case 20:return i.abrupt("return",r);case 21:case"end":return i.stop()}}),f)}function ae(e){var t=a.boolean(e);return void 0!==t&&t}function oe(e,t){var n="",r="";return void 0!==e&&(n=a.string(e)),void 0!==t&&(r=a.string(t)),n.concat(r)}function se(e,t,n){var r,o,s,c,l,u,p,h,d,f,m,v,b;return i.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:r={},o={},s=!(!t||!t.tupleStream),Array.isArray(t)||(t=A(t)),0===t.length&&t.push(void 0),c=0;case 6:if(!(c<t.length)){g.next=31;break}l=t[c],u=s?z(n,l):n,p=0;case 10:if(!(p<e.lhs.length)){g.next=28;break}return h=e.lhs[p],g.delegateYield(B(h[0],s?l["@"]:l,u),"t0",13);case 13:if("string"==typeof(d=g.t0)||void 0===d){g.next=16;break}throw{code:"T1003",stack:(new Error).stack,position:e.position,value:d};case 16:if(void 0===d){g.next=25;break}if(f={data:l,exprIndex:p},!o.hasOwnProperty(d)){g.next=24;break}if(o[d].exprIndex===p){g.next=21;break}throw{code:"D1009",stack:(new Error).stack,position:e.position,value:d};case 21:o[d].data=a.append(o[d].data,l),g.next=25;break;case 24:o[d]=f;case 25:p++,g.next=10;break;case 28:c++,g.next=6;break;case 31:g.t1=i.keys(o);case 32:if((g.t2=g.t1()).done){g.next=43;break}return d=g.t2.value,f=o[d],m=f.data,u=n,s&&(v=ce(f.data),m=v["@"],delete v["@"],u=z(n,v)),g.delegateYield(B(e.lhs[f.exprIndex][1],m,u),"t3",39);case 39:void 0!==(b=g.t3)&&(r[d]=b),g.next=32;break;case 43:return g.abrupt("return",r);case 44:case"end":return g.stop()}}),g)}function ce(e){if(!Array.isArray(e))return e;var t={};Object.assign(t,e[0]);for(var n=1;n<e.length;n++)for(var r in e[n])t[r]=a.append(t[r],e[n][r]);return t}function le(e,t){var n;if(void 0!==e&&!Number.isInteger(e))throw{code:"T2003",stack:(new Error).stack,value:e};if(void 0!==t&&!Number.isInteger(t))throw{code:"T2004",stack:(new Error).stack,value:t};if(void 0===e||void 0===t)return n;if(e>t)return n;var r=t-e+1;if(r>1e7)throw{code:"D2014",stack:(new Error).stack,value:r};n=new Array(r);for(var i=e,a=0;i<=t;i++,a++)n[a]=i;return n.sequence=!0,n}function ue(e,t,n){var r;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.delegateYield(B(e.rhs,t,n),"t0",1);case 1:return r=i.t0,n.bind(e.lhs.value,r),i.abrupt("return",r);case 4:case"end":return i.stop()}}),m)}function pe(e,t,n){var r,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.delegateYield(B(e.condition,t,n),"t0",1);case 1:if(o=i.t0,!a.boolean(o)){i.next=7;break}return i.delegateYield(B(e.then,t,n),"t1",4);case 4:r=i.t1,i.next=10;break;case 7:if(void 0===e.else){i.next=10;break}return i.delegateYield(B(e.else,t,n),"t2",9);case 9:r=i.t2;case 10:return i.abrupt("return",r);case 11:case"end":return i.stop()}}),v)}function he(e,t,n){var r,a,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=De(n),o=0;case 2:if(!(o<e.expressions.length)){i.next=8;break}return i.delegateYield(B(e.expressions[o],t,a),"t0",4);case 4:r=i.t0;case 5:o++,i.next=2;break;case 8:return i.abrupt("return",r);case 9:case"end":return i.stop()}}),b)}function de(e){var t=new Re.RegexEngine(e.value);return function n(r,i){var a;t.lastIndex=i||0;var o=t.exec(r);if(null!==o){if(a={match:o[0],start:o.index,end:o.index+o[0].length,groups:[]},o.length>1)for(var s=1;s<o.length;s++)a.groups.push(o[s]);a.next=function(){if(!(t.lastIndex>=r.length)){var i=n(r,t.lastIndex);if(i&&""===i.match)throw{code:"D1004",stack:(new Error).stack,position:e.position,value:e.value.source};return i}}}return a}}function fe(e,t,n){return""===e.value?t&&t.outerWrapper?t[0]:t:n.lookup(e.value)}function ge(e,t,n){var r,o,s,c,l;return i.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return o=t,s=!!t.tupleStream,c=i.mark((function t(r,a){var o,c,l,u,p,h,d,f,g;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=0,c=0;case 2:if(!(0===o&&c<e.terms.length)){t.next=35;break}return l=e.terms[c],u=r,p=n,s&&(u=r["@"],p=z(n,r)),t.delegateYield(B(l.expression,u,p),"t0",8);case 8:return h=t.t0,u=a,p=n,s&&(u=a["@"],p=z(n,a)),t.delegateYield(B(l.expression,u,p),"t1",13);case 13:if(d=t.t1,g=typeof d,"undefined"!=(f=typeof h)){t.next=19;break}return o="undefined"===g?0:1,t.abrupt("continue",32);case 19:if("undefined"!==g){t.next=22;break}return o=-1,t.abrupt("continue",32);case 22:if(!("string"!==f&&"number"!==f||"string"!==g&&"number"!==g)){t.next=24;break}throw{code:"T2008",stack:(new Error).stack,position:e.position,value:"string"!==f&&"number"!==f?h:d};case 24:if(f===g){t.next=26;break}throw{code:"T2007",stack:(new Error).stack,position:e.position,value:h,value2:d};case 26:if(h!==d){t.next=30;break}return t.abrupt("continue",32);case 30:o=h<d?-1:1;case 31:!0===l.descending&&(o=-o);case 32:c++,t.next=2;break;case 35:return t.abrupt("return",1===o);case 36:case"end":return t.stop()}}),t)})),l={environment:n,input:t},u.delegateYield(a.sort.apply(l,[o,c]),"t0",5);case 5:return r=u.t0,u.abrupt("return",r);case 7:case"end":return u.stop()}}),y)}function me(e,t,n){return Te(i.mark((function t(r){var a,o,s,c,l,u,p,h,d,f,g;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==r){t.next=2;break}return t.abrupt("return",void 0);case 2:if(a=n.lookup("clone"),D(a)){t.next=5;break}throw{code:"T2013",stack:(new Error).stack,position:e.position};case 5:return t.delegateYield(xe(a,[r],null,n),"t0",6);case 6:return o=t.t0,t.delegateYield(B(e.pattern,o,n),"t1",8);case 8:if(void 0===(s=t.t1)){t.next=33;break}Array.isArray(s)||(s=[s]),c=0;case 12:if(!(c<s.length)){t.next=33;break}return l=s[c],t.delegateYield(B(e.update,l,n),"t2",15);case 15:if(u=t.t2,"undefined"==(p=typeof u)){t.next=21;break}if("object"===p&&null!==u&&!Array.isArray(u)){t.next=20;break}throw{code:"T2011",stack:(new Error).stack,position:e.update.position,value:u};case 20:for(h in u)l[h]=u[h];case 21:if(void 0===e.delete){t.next=30;break}return t.delegateYield(B(e.delete,l,n),"t3",23);case 23:if(void 0===(d=t.t3)){t.next=30;break}if(f=d,Array.isArray(d)||(d=[d]),P(d)){t.next=29;break}throw{code:"T2012",stack:(new Error).stack,position:e.delete.position,value:f};case 29:for(g=0;g<d.length;g++)"object"==typeof l&&null!==l&&delete l[d[g]];case 30:c++,t.next=12;break;case 33:return t.abrupt("return",o);case 34:case"end":return t.stop()}}),t)})),"<(oa):o>")}var ve=s("function($f, $g) { function($x){ $g($f($x)) } }");function be(e,t,n){var r,a,o,s;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.delegateYield(B(e.lhs,t,n),"t0",1);case 1:if(a=i.t0,"function"!==e.rhs.type){i.next=7;break}return i.delegateYield(ye(e.rhs,t,n,{context:a}),"t1",4);case 4:r=i.t1,i.next=20;break;case 7:return i.delegateYield(B(e.rhs,t,n),"t2",8);case 8:if(o=i.t2,D(o)){i.next=11;break}throw{code:"T2006",stack:(new Error).stack,position:e.position,value:o};case 11:if(!D(a)){i.next=18;break}return i.delegateYield(B(ve,null,n),"t3",13);case 13:return s=i.t3,i.delegateYield(xe(s,[a,o],null,n),"t4",15);case 15:r=i.t4,i.next=20;break;case 18:return i.delegateYield(xe(o,[a],null,n),"t5",19);case 19:r=i.t5;case 20:return i.abrupt("return",r);case 21:case"end":return i.stop()}}),x)}function ye(e,t,n,r){var a,o,s,c,l,u;return i.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.delegateYield(B(e.procedure,t,n),"t0",1);case 1:if(void 0!==(o=p.t0)||"path"!==e.procedure.type||!n.lookup(e.procedure.steps[0].value)){p.next=4;break}throw{code:"T1005",stack:(new Error).stack,position:e.position,token:e.procedure.steps[0].value};case 4:s=[],void 0!==r&&s.push(r.context),c=i.mark((function r(){var a,o;return i.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(B(e.arguments[l],t,n),"t0",1);case 1:a=r.t0,D(a)?((o=i.mark((function e(){var t,r,o,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,r=new Array(t),o=0;o<t;o++)r[o]=s[o];return e.delegateYield(xe(a,r,null,n),"t0",2);case 2:return e.abrupt("return",e.t0);case 3:case"end":return e.stop()}}),e)}))).arity=R(a),s.push(o)):s.push(a);case 3:case"end":return r.stop()}}),r)})),l=0;case 8:if(!(l<e.arguments.length)){p.next=13;break}return p.delegateYield(c(),"t1",10);case 10:l++,p.next=8;break;case 13:return u="path"===e.procedure.type?e.procedure.steps[0].value:e.procedure.value,p.prev=14,"object"==typeof o&&(o.token=u,o.position=e.position),p.delegateYield(xe(o,s,t,n),"t2",17);case 17:a=p.t2,p.next=25;break;case 20:throw p.prev=20,p.t3=p.catch(14),p.t3.position||(p.t3.position=e.position),p.t3.token||(p.t3.token=u),p.t3;case 25:return p.abrupt("return",a);case 26:case"end":return p.stop()}}),C,null,[[14,20]])}function xe(e,t,n,r){var a,o,s,c;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.delegateYield(Ce(e,t,n,r),"t0",1);case 1:a=i.t0;case 2:if(!j(a)||!0!==a.thunk){i.next=21;break}return i.delegateYield(B(a.body.procedure,a.input,a.environment),"t1",4);case 4:o=i.t1,"variable"===a.body.procedure.type&&(o.token=a.body.procedure.value),o.position=a.body.procedure.position,s=[],c=0;case 9:if(!(c<a.body.arguments.length)){i.next=17;break}return i.t2=s,i.delegateYield(B(a.body.arguments[c],a.input,a.environment),"t3",12);case 12:i.t4=i.t3,i.t2.push.call(i.t2,i.t4);case 14:c++,i.next=9;break;case 17:return i.delegateYield(Ce(o,s,n,r),"t5",18);case 18:a=i.t5,i.next=2;break;case 21:return i.abrupt("return",a);case 22:case"end":return i.stop()}}),w)}function Ce(e,t,n,r){var a,o,s;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,o=t,e&&(o=Se(e.signature,t,n)),!j(e)){i.next=8;break}return i.delegateYield(Oe(e,o),"t0",5);case 5:a=i.t0,i.next=24;break;case 8:if(!e||!0!==e._jsonata_function){i.next=16;break}if(s={environment:r,input:n},a=e.implementation.apply(s,o),!N(a)){i.next=14;break}return i.delegateYield(a,"t1",13);case 13:a=i.t1;case 14:i.next=24;break;case 16:if("function"!=typeof e){i.next=23;break}if(a=e.apply(n,o),!N(a)){i.next=21;break}return i.delegateYield(a,"t2",20);case 20:a=i.t2;case 21:i.next=24;break;case 23:throw{code:"T1006",stack:(new Error).stack};case 24:i.next=30;break;case 26:throw i.prev=26,i.t3=i.catch(0),e&&(void 0===i.t3.token&&void 0!==e.token&&(i.t3.token=e.token),i.t3.position=e.position),i.t3;case 30:return i.abrupt("return",a);case 31:case"end":return i.stop()}}),k,null,[[0,26]])}function we(e,t,n){var r={_jsonata_lambda:!0,input:t,environment:n,arguments:e.arguments,signature:e.signature,body:e.body};return!0===e.thunk&&(r.thunk=!0),r.apply=i.mark((function e(n,a){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(xe(r,a,t,n.environment),"t0",1);case 1:return e.abrupt("return",e.t0);case 2:case"end":return e.stop()}}),e)})),r}function ke(e,t,n){var r,a,o,s,c;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=[],o=0;case 2:if(!(o<e.arguments.length)){i.next=15;break}if("operator"!==(s=e.arguments[o]).type||"?"!==s.value){i.next=8;break}a.push(s),i.next=12;break;case 8:return i.t0=a,i.delegateYield(B(s,t,n),"t1",10);case 10:i.t2=i.t1,i.t0.push.call(i.t0,i.t2);case 12:o++,i.next=2;break;case 15:return i.delegateYield(B(e.procedure,t,n),"t3",16);case 16:if(void 0!==(c=i.t3)||"path"!==e.procedure.type||!n.lookup(e.procedure.steps[0].value)){i.next=19;break}throw{code:"T1007",stack:(new Error).stack,position:e.position,token:e.procedure.steps[0].value};case 19:if(!j(c)){i.next=23;break}r=Ee(c,a),i.next=32;break;case 23:if(!c||!0!==c._jsonata_function){i.next=27;break}r=_e(c.implementation,a),i.next=32;break;case 27:if("function"!=typeof c){i.next=31;break}r=_e(c,a),i.next=32;break;case 31:throw{code:"T1008",stack:(new Error).stack,position:e.position,token:"path"===e.procedure.type?e.procedure.steps[0].value:e.procedure.value};case 32:return i.abrupt("return",r);case 33:case"end":return i.stop()}}),S)}function Se(e,t,n){return void 0===e?t:e.validate(t,n)}function Oe(e,t){var n,r;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=De(e.environment),e.arguments.forEach((function(e,n){r.bind(e.value,t[n])})),"function"!=typeof e.body){i.next=7;break}return i.delegateYield(Ie(e.body,r),"t0",4);case 4:n=i.t0,i.next=9;break;case 7:return i.delegateYield(B(e.body,e.input,r),"t1",8);case 8:n=i.t1;case 9:return i.abrupt("return",n);case 10:case"end":return i.stop()}}),O)}function Ee(e,t){var n=De(e.environment),r=[];return e.arguments.forEach((function(e,i){var a=t[i];a&&"operator"===a.type&&"?"===a.value?r.push(e):n.bind(e.value,a)})),{_jsonata_lambda:!0,input:e.input,environment:n,arguments:r,body:e.body}}function _e(e,t){var n=Pe(e),r="function("+(n=n.map((function(e){return"$"+e.trim()}))).join(", ")+"){ _ }",i=s(r);return i.body=e,Ee(i,t)}function Ie(e,t){var n,r,a,o;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=Pe(e),r=n.map((function(e){return t.lookup(e.trim())})),a={environment:t},o=e.apply(a,r),!N(o)){i.next=7;break}return i.delegateYield(o,"t0",6);case 6:o=i.t0;case 7:return i.abrupt("return",o);case 8:case"end":return i.stop()}}),E)}function Pe(e){var t=e.toString();return/\(([^)]*)\)/.exec(t)[1].split(",")}function Te(e,t){var n={_jsonata_function:!0,implementation:e};return void 0!==t&&(n.signature=c(t)),n}function Ae(e,t){var n,r,a;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==e){i.next=2;break}return i.abrupt("return",void 0);case 2:n=this.input,void 0!==t&&(n=t,Array.isArray(n)&&!M(n)&&((n=A(n)).outerWrapper=!0)),i.prev=4,r=s(e,!1),i.next=12;break;case 8:throw i.prev=8,i.t0=i.catch(4),Ne(i.t0),{stack:(new Error).stack,code:"D3120",value:i.t0.message,error:i.t0};case 12:return i.prev=12,i.delegateYield(B(r,n,this.environment),"t1",14);case 14:a=i.t1,i.next=21;break;case 17:throw i.prev=17,i.t2=i.catch(12),Ne(i.t2),{stack:(new Error).stack,code:"D3121",value:i.t2.message,error:i.t2};case 21:return i.abrupt("return",a);case 22:case"end":return i.stop()}}),_,this,[[4,8],[12,17]])}function Me(e){if(void 0!==e)return JSON.parse(a.string(e))}function De(e){var t={};return{bind:function(e,n){t[e]=n},lookup:function(n){var r;return t.hasOwnProperty(n)?r=t[n]:e&&(r=e.lookup(n)),r},timestamp:e?e.timestamp:null,async:!!e&&e.async,global:e?e.global:{ancestry:[null]}}}F.bind("sum",Te(a.sum,"<a<n>:n>")),F.bind("count",Te(a.count,"<a:n>")),F.bind("max",Te(a.max,"<a<n>:n>")),F.bind("min",Te(a.min,"<a<n>:n>")),F.bind("average",Te(a.average,"<a<n>:n>")),F.bind("string",Te(a.string,"<x-b?:s>")),F.bind("substring",Te(a.substring,"<s-nn?:s>")),F.bind("substringBefore",Te(a.substringBefore,"<s-s:s>")),F.bind("substringAfter",Te(a.substringAfter,"<s-s:s>")),F.bind("lowercase",Te(a.lowercase,"<s-:s>")),F.bind("uppercase",Te(a.uppercase,"<s-:s>")),F.bind("length",Te(a.length,"<s-:n>")),F.bind("trim",Te(a.trim,"<s-:s>")),F.bind("pad",Te(a.pad,"<s-ns?:s>")),F.bind("match",Te(a.match,"<s-f<s:o>n?:a<o>>")),F.bind("contains",Te(a.contains,"<s-(sf):b>")),F.bind("replace",Te(a.replace,"<s-(sf)(sf)n?:s>")),F.bind("split",Te(a.split,"<s-(sf)n?:a<s>>")),F.bind("join",Te(a.join,"<a<s>s?:s>")),F.bind("formatNumber",Te(a.formatNumber,"<n-so?:s>")),F.bind("formatBase",Te(a.formatBase,"<n-n?:s>")),F.bind("formatInteger",Te(r.formatInteger,"<n-s:s>")),F.bind("parseInteger",Te(r.parseInteger,"<s-s:n>")),F.bind("number",Te(a.number,"<(nsb)-:n>")),F.bind("floor",Te(a.floor,"<n-:n>")),F.bind("ceil",Te(a.ceil,"<n-:n>")),F.bind("round",Te(a.round,"<n-n?:n>")),F.bind("abs",Te(a.abs,"<n-:n>")),F.bind("sqrt",Te(a.sqrt,"<n-:n>")),F.bind("power",Te(a.power,"<n-n:n>")),F.bind("random",Te(a.random,"<:n>")),F.bind("boolean",Te(a.boolean,"<x-:b>")),F.bind("not",Te(a.not,"<x-:b>")),F.bind("map",Te(a.map,"<af>")),F.bind("zip",Te(a.zip,"<a+>")),F.bind("filter",Te(a.filter,"<af>")),F.bind("single",Te(a.single,"<af?>")),F.bind("reduce",Te(a.foldLeft,"<afj?:j>")),F.bind("sift",Te(a.sift,"<o-f?:o>")),F.bind("keys",Te(a.keys,"<x-:a<s>>")),F.bind("lookup",Te(a.lookup,"<x-s:x>")),F.bind("append",Te(a.append,"<xx:a>")),F.bind("exists",Te(a.exists,"<x:b>")),F.bind("spread",Te(a.spread,"<x-:a<o>>")),F.bind("merge",Te(a.merge,"<a<o>:o>")),F.bind("reverse",Te(a.reverse,"<a:a>")),F.bind("each",Te(a.each,"<o-f:a>")),F.bind("error",Te(a.error,"<s?:x>")),F.bind("assert",Te(a.assert,"<bs?:x>")),F.bind("type",Te(a.type,"<x:s>")),F.bind("sort",Te(a.sort,"<af?:a>")),F.bind("shuffle",Te(a.shuffle,"<a:a>")),F.bind("distinct",Te(a.distinct,"<x:x>")),F.bind("base64encode",Te(a.base64encode,"<s-:s>")),F.bind("base64decode",Te(a.base64decode,"<s-:s>")),F.bind("encodeUrlComponent",Te(a.encodeUrlComponent,"<s-:s>")),F.bind("encodeUrl",Te(a.encodeUrl,"<s-:s>")),F.bind("decodeUrlComponent",Te(a.decodeUrlComponent,"<s-:s>")),F.bind("decodeUrl",Te(a.decodeUrl,"<s-:s>")),F.bind("eval",Te(Ae,"<sx?:x>")),F.bind("toMillis",Te(r.toMillis,"<s-s?:n>")),F.bind("fromMillis",Te(r.fromMillis,"<n-s?s?:s>")),F.bind("clone",Te(Me,"<(oa)-:o>"));var je={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function Ne(e){var t=je[e.code];if(void 0!==t){var n=t.replace(/\{\{\{([^}]+)}}}/g,(function(){return e[arguments[1]]}));n=n.replace(/\{\{([^}]+)}}/g,(function(){return JSON.stringify(e[arguments[1]])})),e.message=n}}function Re(e,t){var n,i;try{n=s(e,t&&t.recover),i=n.errors,delete n.errors}catch(c){throw Ne(c),c}var a=De(F),o=new Date;return a.bind("now",Te((function(e,t){return r.fromMillis(o.getTime(),e,t)}),"<s?s?:s>")),a.bind("millis",Te((function(){return o.getTime()}),"<:n>")),t&&t.RegexEngine?Re.RegexEngine=t.RegexEngine:Re.RegexEngine=RegExp,{evaluate:function(e,t,r){if(void 0!==i){var s={code:"S0500",position:0};throw Ne(s),s}var c,l,u;if(void 0!==t)for(var p in c=De(a),t)c.bind(p,t[p]);else c=a;if(c.bind("$",e),o=new Date,c.timestamp=o,Array.isArray(e)&&!M(e)&&((e=A(e)).outerWrapper=!0),"function"==typeof r){c.async=!0;var h=function(e){Ne(e),r(e,null)},d=function e(t){(l=u.next(t)).done?r(null,l.value):l.value.then(e).catch(h)};u=B(n,e,c),(l=u.next()).value.then(d).catch(h)}else try{for(u=B(n,e,c),l=u.next();!l.done;)l=u.next(l.value);return l.value}catch(s){throw Ne(s),s}},assign:function(e,t){a.bind(e,t)},registerFunction:function(e,t,n){var r=Te(t,n);a.bind(e,r)},ast:function(){return n},errors:function(){return i}}}return Re.parser=s,Re}();t.exports=l},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(e,t,n){var r=e("./signature"),i=function(){"use strict";var e={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},t={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},n=function(n){var r=0,i=n.length,a=function(e,t){return{type:e,value:t,position:r}},o=function(){for(var e,t,a=r,o=0;r<i;){var s=n.charAt(r);if("/"===s&&"\\"!==n.charAt(r-1)&&0===o){if(""===(e=n.substring(a,r)))throw{code:"S0301",stack:(new Error).stack,position:r};for(r++,s=n.charAt(r),a=r;"i"===s||"m"===s;)r++,s=n.charAt(r);return t=n.substring(a,r)+"g",new RegExp(e,t)}"("!==s&&"["!==s&&"{"!==s||"\\"===n.charAt(r-1)||o++,")"!==s&&"]"!==s&&"}"!==s||"\\"===n.charAt(r-1)||o--,r++}throw{code:"S0302",stack:(new Error).stack,position:r}};return function s(c){if(r>=i)return null;for(var l=n.charAt(r);r<i&&" \t\n\r\v".indexOf(l)>-1;)r++,l=n.charAt(r);if("/"===l&&"*"===n.charAt(r+1)){var u=r;for(r+=2,l=n.charAt(r);"*"!==l||"/"!==n.charAt(r+1);)if(l=n.charAt(++r),r>=i)throw{code:"S0106",stack:(new Error).stack,position:u};return r+=2,l=n.charAt(r),s(c)}if(!0!==c&&"/"===l)return r++,a("regex",o());if("."===l&&"."===n.charAt(r+1))return r+=2,a("operator","..");if(":"===l&&"="===n.charAt(r+1))return r+=2,a("operator",":=");if("!"===l&&"="===n.charAt(r+1))return r+=2,a("operator","!=");if(">"===l&&"="===n.charAt(r+1))return r+=2,a("operator",">=");if("<"===l&&"="===n.charAt(r+1))return r+=2,a("operator","<=");if("*"===l&&"*"===n.charAt(r+1))return r+=2,a("operator","**");if("~"===l&&">"===n.charAt(r+1))return r+=2,a("operator","~>");if(Object.prototype.hasOwnProperty.call(e,l))return r++,a("operator",l);if('"'===l||"'"===l){var p=l;r++;for(var h="";r<i;){if("\\"===(l=n.charAt(r)))if(r++,l=n.charAt(r),Object.prototype.hasOwnProperty.call(t,l))h+=t[l];else{if("u"!==l)throw{code:"S0103",stack:(new Error).stack,position:r,token:l};var d=n.substr(r+1,4);if(!/^[0-9a-fA-F]+$/.test(d))throw{code:"S0104",stack:(new Error).stack,position:r};var f=parseInt(d,16);h+=String.fromCharCode(f),r+=4}else{if(l===p)return r++,a("string",h);h+=l}r++}throw{code:"S0101",stack:(new Error).stack,position:r}}var g,m=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/.exec(n.substring(r));if(null!==m){var v=parseFloat(m[0]);if(!isNaN(v)&&isFinite(v))return r+=m[0].length,a("number",v);throw{code:"S0102",stack:(new Error).stack,position:r,token:m[0]}}if("`"===l){r++;var b=n.indexOf("`",r);if(-1!==b)return g=n.substring(r,b),r=b+1,a("name",g);throw r=i,{code:"S0105",stack:(new Error).stack,position:r}}for(var y,x=r;;)if(y=n.charAt(x),x===i||" \t\n\r\v".indexOf(y)>-1||Object.prototype.hasOwnProperty.call(e,y)){if("$"===n.charAt(r))return g=n.substring(r+1,x),r=x,a("variable",g);switch(g=n.substring(r,x),r=x,g){case"or":case"in":case"and":return a("operator",g);case"true":return a("value",!0);case"false":return a("value",!1);case"null":return a("value",null);default:return r===i&&""===g?null:a("name",g)}}else x++}};return function(t,i){var a,o,s={},c=[],l=function(){var e=[];"(end)"!==a.id&&e.push({type:a.type,value:a.value,position:a.position});for(var t=o();null!==t;)e.push(t),t=o();return e},u={nud:function(){var e={code:"S0211",token:this.value,position:this.position};if(i)return e.remaining=l(),e.type="error",c.push(e),e;throw e.stack=(new Error).stack,e}},p=function(e,t){var n=s[e];return t=t||0,n?t>=n.lbp&&(n.lbp=t):((n=Object.create(u)).id=n.value=e,n.lbp=t,s[e]=n),n},h=function(e){if(i){e.remaining=l(),c.push(e);var t=s["(error)"];return(a=Object.create(t)).error=e,a.type="(error)",a}throw e.stack=(new Error).stack,e},d=function(e,n){if(e&&a.id!==e){var r={code:"(end)"===a.id?"S0203":"S0202",position:a.position,token:a.value,value:e};return h(r)}var i=o(n);if(null===i)return(a=s["(end)"]).position=t.length,a;var c,l=i.value,u=i.type;switch(u){case"name":case"variable":c=s["(name)"];break;case"operator":if(!(c=s[l]))return h({code:"S0204",stack:(new Error).stack,position:i.position,token:l});break;case"string":case"number":case"value":c=s["(literal)"];break;case"regex":u="regex",c=s["(regex)"];break;default:return h({code:"S0205",stack:(new Error).stack,position:i.position,token:l})}return(a=Object.create(c)).value=l,a.type=u,a.position=i.position,a},f=function(e){var t,n=a;for(d(null,!0),t=n.nud();e<a.lbp;)n=a,d(),t=n.led(t);return t},g=function(e){p(e,0).nud=function(){return this}},m=function(t,n,r){var i=n||e[t],a=p(t,i);return a.led=r||function(e){return this.lhs=e,this.rhs=f(i),this.type="binary",this},a},v=function(e,t,n){var r=p(e,t);return r.led=n,r},b=function(e,t){var n=p(e);return n.nud=t||function(){return this.expression=f(70),this.type="unary",this},n};g("(end)"),g("(name)"),g("(literal)"),g("(regex)"),p(":"),p(";"),p(","),p(")"),p("]"),p("}"),p(".."),m("."),m("+"),m("-"),m("*"),m("/"),m("%"),m("="),m("<"),m(">"),m("!="),m("<="),m(">="),m("&"),m("and"),m("or"),m("in"),g("and"),g("or"),g("in"),b("-"),m("~>"),v("(error)",10,(function(e){return this.lhs=e,this.error=a.error,this.remaining=l(),this.type="error",this})),b("*",(function(){return this.type="wildcard",this})),b("**",(function(){return this.type="descendant",this})),b("%",(function(){return this.type="parent",this})),m("(",e["("],(function(e){if(this.procedure=e,this.type="function",this.arguments=[],")"!==a.id)for(;"operator"===a.type&&"?"===a.id?(this.type="partial",this.arguments.push(a),d("?")):this.arguments.push(f(0)),","===a.id;)d(",");if(d(")",!0),"name"===e.type&&("function"===e.value||"\u03bb"===e.value)){if(this.arguments.forEach((function(e,t){if("variable"!==e.type)return h({code:"S0208",stack:(new Error).stack,position:e.position,token:e.value,value:t+1})})),this.type="lambda","<"===a.id){for(var t=a.position,n=1,i="<";n>0&&"{"!==a.id&&"(end)"!==a.id;){var o=d();">"===o.id?n--:"<"===o.id&&n++,i+=o.value}d(">");try{this.signature=r(i)}catch(P){return P.position=t+P.offset,h(P)}}d("{"),this.body=f(0),d("}")}return this})),b("(",(function(){for(var e=[];")"!==a.id&&(e.push(f(0)),";"===a.id);)d(";");return d(")",!0),this.type="block",this.expressions=e,this})),b("[",(function(){var e=[];if("]"!==a.id)for(;;){var t=f(0);if(".."===a.id){var n={type:"binary",value:"..",position:a.position,lhs:t};d(".."),n.rhs=f(0),t=n}if(e.push(t),","!==a.id)break;d(",")}return d("]",!0),this.expressions=e,this.type="unary",this})),m("[",e["["],(function(t){if("]"===a.id){for(var n=t;n&&"binary"===n.type&&"["===n.value;)n=n.lhs;return n.keepArray=!0,d("]"),t}return this.lhs=t,this.rhs=f(e["]"]),this.type="binary",d("]",!0),this})),m("^",e["^"],(function(e){d("(");for(var t=[];;){var n={descending:!1};if("<"===a.id?d("<"):">"===a.id&&(n.descending=!0,d(">")),n.expression=f(0),t.push(n),","!==a.id)break;d(",")}return d(")"),this.lhs=e,this.rhs=t,this.type="binary",this}));var y=function(e){var t=[];if("}"!==a.id)for(;;){var n=f(0);d(":");var r=f(0);if(t.push([n,r]),","!==a.id)break;d(",")}return d("}",!0),void 0===e?(this.lhs=t,this.type="unary"):(this.lhs=e,this.rhs=t,this.type="binary"),this};b("{",y),m("{",e["{"],y),v(":=",e[":="],(function(t){return"variable"!==t.type?h({code:"S0212",stack:(new Error).stack,position:t.position,token:t.value}):(this.lhs=t,this.rhs=f(e[":="]-1),this.type="binary",this)})),m("@",e["@"],(function(t){return this.lhs=t,this.rhs=f(e["@"]),"variable"!==this.rhs.type?h({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)})),m("#",e["#"],(function(t){return this.lhs=t,this.rhs=f(e["#"]),"variable"!==this.rhs.type?h({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)})),m("?",e["?"],(function(e){return this.type="condition",this.condition=e,this.then=f(0),":"===a.id&&(d(":"),this.else=f(0)),this})),b("|",(function(){return this.type="transform",this.pattern=f(0),d("|"),this.update=f(0),","===a.id&&(d(","),this.delete=f(0)),d("|"),this}));var x=function e(t){var n;if("function"!==t.type||t.predicate)if("condition"===t.type)t.then=e(t.then),void 0!==t.else&&(t.else=e(t.else)),n=t;else if("block"===t.type){var r=t.expressions.length;r>0&&(t.expressions[r-1]=e(t.expressions[r-1])),n=t}else n=t;else{var i={type:"lambda",thunk:!0,arguments:[],position:t.position};i.body=t,n=i}return n},C=0,w=0,k=[],S=function e(t,n){switch(t.type){case"name":case"wildcard":n.level--,0===n.level&&(void 0===t.ancestor||(k[n.index].slot.label=t.ancestor.label),t.ancestor=n,t.tuple=!0);break;case"parent":n.level++;break;case"block":t.expressions.length>0&&(t.tuple=!0,n=e(t.expressions[t.expressions.length-1],n));break;case"path":t.tuple=!0;var r=t.steps.length-1;for(n=e(t.steps[r--],n);n.level>0&&r>=0;)n=e(t.steps[r--],n);break;default:throw{code:"S0217",token:t.type,position:t.position}}return n},O=function(e,t){if(void 0!==t.seekingParent||"parent"===t.type){var n=void 0!==t.seekingParent?t.seekingParent:[];"parent"===t.type&&n.push(t.slot),void 0===e.seekingParent?e.seekingParent=n:Array.prototype.push.apply(e.seekingParent,n)}},E=function(e){var t=e.steps.length-1,n=e.steps[t],r=void 0!==n.seekingParent?n.seekingParent:[];"parent"===n.type&&r.push(n.slot);for(var i=0;i<r.length;i++){var a=r[i];for(t=e.steps.length-2;a.level>0;){if(t<0){void 0===e.seekingParent?e.seekingParent=[a]:e.seekingParent.push(a);break}for(var o=e.steps[t--];t>=0&&o.focus&&e.steps[t].focus;)o=e.steps[t--];a=S(o,a)}}},_=function e(t){var n;switch(t.type){case"binary":switch(t.value){case".":var r=e(t.lhs);n="path"===r.type?r:{type:"path",steps:[r]},"parent"===r.type&&(n.seekingParent=[r.slot]);var a=e(t.rhs);"function"===a.type&&"path"===a.procedure.type&&1===a.procedure.steps.length&&"name"===a.procedure.steps[0].type&&"function"===n.steps[n.steps.length-1].type&&(n.steps[n.steps.length-1].nextFunction=a.procedure.steps[0].value),"path"===a.type?Array.prototype.push.apply(n.steps,a.steps):(void 0!==a.predicate&&(a.stages=a.predicate,delete a.predicate),n.steps.push(a)),n.steps.filter((function(e){if("number"===e.type||"value"===e.type)throw{code:"S0213",stack:(new Error).stack,position:e.position,value:e.value};return"string"===e.type})).forEach((function(e){e.type="name"})),n.steps.filter((function(e){return!0===e.keepArray})).length>0&&(n.keepSingletonArray=!0);var o=n.steps[0];"unary"===o.type&&"["===o.value&&(o.consarray=!0);var s=n.steps[n.steps.length-1];"unary"===s.type&&"["===s.value&&(s.consarray=!0),E(n);break;case"[":var l=n=e(t.lhs),u="predicate";if("path"===n.type&&(l=n.steps[n.steps.length-1],u="stages"),void 0!==l.group)throw{code:"S0209",stack:(new Error).stack,position:t.position};void 0===l[u]&&(l[u]=[]);var p=e(t.rhs);void 0!==p.seekingParent&&(p.seekingParent.forEach((function(e){1===e.level?S(l,e):e.level--})),O(l,p)),l[u].push({type:"filter",expr:p,position:t.position});break;case"{":if(void 0!==(n=e(t.lhs)).group)throw{code:"S0210",stack:(new Error).stack,position:t.position};n.group={lhs:t.rhs.map((function(t){return[e(t[0]),e(t[1])]})),position:t.position};break;case"^":"path"!==(n=e(t.lhs)).type&&(n={type:"path",steps:[n]});var h={type:"sort",position:t.position};h.terms=t.rhs.map((function(t){var n=e(t.expression);return O(h,n),{descending:t.descending,expression:n}})),n.steps.push(h),E(n);break;case":=":(n={type:"bind",value:t.value,position:t.position}).lhs=e(t.lhs),n.rhs=e(t.rhs),O(n,n.rhs);break;case"@":if(n=e(t.lhs),l=n,"path"===n.type&&(l=n.steps[n.steps.length-1]),void 0!==l.stages||void 0!==l.predicate)throw{code:"S0215",stack:(new Error).stack,position:t.position};if("sort"===l.type)throw{code:"S0216",stack:(new Error).stack,position:t.position};t.keepArray&&(l.keepArray=!0),l.focus=t.rhs.value,l.tuple=!0;break;case"#":n=e(t.lhs),l=n,"path"===n.type?l=n.steps[n.steps.length-1]:(n={type:"path",steps:[n]},void 0!==l.predicate&&(l.stages=l.predicate,delete l.predicate)),void 0===l.stages?l.index=t.rhs.value:l.stages.push({type:"index",value:t.rhs.value,position:t.position}),l.tuple=!0;break;case"~>":(n={type:"apply",value:t.value,position:t.position}).lhs=e(t.lhs),n.rhs=e(t.rhs);break;default:(n={type:t.type,value:t.value,position:t.position}).lhs=e(t.lhs),n.rhs=e(t.rhs),O(n,n.lhs),O(n,n.rhs)}break;case"unary":n={type:t.type,value:t.value,position:t.position},"["===t.value?n.expressions=t.expressions.map((function(t){var r=e(t);return O(n,r),r})):"{"===t.value?n.lhs=t.lhs.map((function(t){var r=e(t[0]);O(n,r);var i=e(t[1]);return O(n,i),[r,i]})):(n.expression=e(t.expression),"-"===t.value&&"number"===n.expression.type?(n=n.expression).value=-n.value:O(n,n.expression));break;case"function":case"partial":(n={type:t.type,name:t.name,value:t.value,position:t.position}).arguments=t.arguments.map((function(t){var r=e(t);return O(n,r),r})),n.procedure=e(t.procedure);break;case"lambda":n={type:t.type,arguments:t.arguments,signature:t.signature,position:t.position};var d=e(t.body);n.body=x(d);break;case"condition":(n={type:t.type,position:t.position}).condition=e(t.condition),O(n,n.condition),n.then=e(t.then),O(n,n.then),void 0!==t.else&&(n.else=e(t.else),O(n,n.else));break;case"transform":(n={type:t.type,position:t.position}).pattern=e(t.pattern),n.update=e(t.update),void 0!==t.delete&&(n.delete=e(t.delete));break;case"block":(n={type:t.type,position:t.position}).expressions=t.expressions.map((function(t){var r=e(t);return O(n,r),(r.consarray||"path"===r.type&&r.steps[0].consarray)&&(n.consarray=!0),r}));break;case"name":n={type:"path",steps:[t]},t.keepArray&&(n.keepSingletonArray=!0);break;case"parent":n={type:"parent",slot:{label:"!"+C++,level:1,index:w++}},k.push(n);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":n=t;break;case"operator":if("and"===t.value||"or"===t.value||"in"===t.value)t.type="name",n=e(t);else{if("?"!==t.value)throw{code:"S0201",stack:(new Error).stack,position:t.position,token:t.value};n=t}break;case"error":n=t,t.lhs&&(n=e(t.lhs));break;default:var f="S0206";"(end)"===t.id&&(f="S0207");var g={code:f,position:t.position,token:t.value};if(i)return c.push(g),{type:"error",error:g};throw g.stack=(new Error).stack,g}return t.keepArray&&(n.keepArray=!0),n};o=n(t),d();var I=f(0);if("(end)"!==a.id){var P={code:"S0201",position:a.position,token:a.value};h(P)}if("parent"===(I=_(I)).type||void 0!==I.seekingParent)throw{code:"S0217",token:I.type,position:I.position};return c.length>0&&(I.errors=c),I}}();t.exports=i},{"./signature":5}],5:[function(e,t,n){var r=e("./utils"),i=function(){"use strict";var e={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};function t(t){for(var n=1,i=[],a={},o=a;n<t.length;){var s=t.charAt(n);if(":"===s)break;var c=function(){i.push(a),o=a,a={}},l=function(e,t,n,r){for(var i=1,a=t;a<e.length;)if(a++,(s=e.charAt(a))===r){if(0==--i)break}else s===n&&i++;return a};switch(s){case"s":case"n":case"b":case"l":case"o":a.regex="["+s+"m]",a.type=s,c();break;case"a":a.regex="[asnblfom]",a.type=s,a.array=!0,c();break;case"f":a.regex="f",a.type=s,c();break;case"j":a.regex="[asnblom]",a.type=s,c();break;case"x":a.regex="[asnblfom]",a.type=s,c();break;case"-":o.context=!0,o.contextRegex=new RegExp(o.regex),o.regex+="?";break;case"?":case"+":o.regex+=s;break;case"(":var u=l(t,n,"(",")"),p=t.substring(n+1,u);if(-1!==p.indexOf("<"))throw{code:"S0402",stack:(new Error).stack,value:p,offset:n};a.regex="["+p+"m]",a.type="("+p+")",n=u,c();break;case"<":if("a"!==o.type&&"f"!==o.type)throw{code:"S0401",stack:(new Error).stack,value:o.type,offset:n};var h=l(t,n,"<",">");o.subtype=t.substring(n+1,h),n=h}n++}var d="^"+i.map((function(e){return"("+e.regex+")"})).join("")+"$",f=new RegExp(d),g=function(e){var t;if(r.isFunction(e))t="f";else switch(typeof e){case"string":t="s";break;case"number":t="n";break;case"boolean":t="b";break;case"object":t=null===e?"l":Array.isArray(e)?"a":"o";break;case"undefined":default:t="m"}return t},m=function(e,t){for(var n="^",r=0,a=0;a<i.length;a++){n+=i[a].regex;var o=t.match(n);if(null===o)throw{code:"T0410",stack:(new Error).stack,value:e[r],index:r+1};r=o[0].length}throw{code:"T0410",stack:(new Error).stack,value:e[r],index:r+1}};return{definition:t,validate:function(t,n){var r="";t.forEach((function(e){r+=g(e)}));var a=f.exec(r);if(a){var o=[],s=0;return i.forEach((function(r,i){var c=t[s],l=a[i+1];if(""===l)if(r.context&&r.contextRegex){var u=g(n);if(!r.contextRegex.test(u))throw{code:"T0411",stack:(new Error).stack,value:n,index:s+1};o.push(n)}else o.push(c),s++;else l.split("").forEach((function(n){if("a"===r.type){if("m"===n)c=void 0;else{c=t[s];var i=!0;if(void 0!==r.subtype)if("a"!==n&&l!==r.subtype)i=!1;else if("a"===n&&c.length>0){var a=g(c[0]);i=a===r.subtype.charAt(0)&&0===c.filter((function(e){return g(e)!==a})).length}if(!i)throw{code:"T0412",stack:(new Error).stack,value:c,index:s+1,type:e[r.subtype]};"a"!==n&&(c=[c])}o.push(c),s++}else o.push(c),s++}))})),o}m(t,r)}}}return t}();t.exports=i},{"./utils":6}],6:[function(e,t,n){var i=function(){"use strict";function e(e){var t=!1;if("number"==typeof e&&(t=!isNaN(e))&&!isFinite(e))throw{code:"D1001",value:e,stack:(new Error).stack};return t}function t(e){var t=!1;return Array.isArray(e)&&(t=0===e.filter((function(e){return"string"!=typeof e})).length),t}function n(t){var n=!1;return Array.isArray(t)&&(n=0===t.filter((function(t){return!e(t)})).length),n}function i(){var e=[];return e.sequence=!0,1===arguments.length&&e.push(arguments[0]),e}function a(e){return!0===e.sequence&&Array.isArray(e)}function o(e){return e&&(!0===e._jsonata_function||!0===e._jsonata_lambda)||"function"==typeof e}function s(e){return"number"==typeof e.arity?e.arity:"function"==typeof e.implementation?e.implementation.length:"number"==typeof e.length?e.length:e.arguments.length}function c(e){return e&&!0===e._jsonata_lambda}var l=("function"==typeof Symbol?Symbol:{}).iterator||"@@iterator";function u(e){return"object"==typeof e&&null!==e&&l in e&&"next"in e&&"function"==typeof e.next}function p(e,t){if(e===t)return!0;if("object"==typeof e&&"object"==typeof t&&null!==e&&null!==t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!p(e[n],t[n]))return!1;return!0}var r=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);if(r.length!==i.length)return!1;for(r=r.sort(),i=i.sort(),n=0;n<r.length;n++)if(r[n]!==i[n])return!1;for(n=0;n<r.length;n++){var a=r[n];if(!p(e[a],t[a]))return!1}return!0}return!1}function h(e){var t,n=[],i=r(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(a)}}catch(o){i.e(o)}finally{i.f()}return n}return{isNumeric:e,isArrayOfStrings:t,isArrayOfNumbers:n,createSequence:i,isSequence:a,isFunction:o,isLambda:c,isIterable:u,getFunctionArity:s,isDeepEqual:p,stringToArray:h}}();t.exports=i},{}]},{},[3])(3)},IGGJ:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},IGWl:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("ZTXN"),i=n("C05f"),a=n("6Oco"),o=(n("Cupj"),n("EM62")),s=n("jHi0"),c=n("2kYt"),l=function(){function e(){this._change=new r.a,this.iconSource=new i.a(""),this.activeClass=new i.a(!1)}return Object.defineProperty(e.prototype,"tooltipValue",{get:function(){return this._props?this._props.tooltip:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._data=e},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){this._props.icon&&this.iconSource.next("./assets/icons/symbol-defs.svg#"+this._props.icon),this._data&&(this._data.value?this.activeClass.next(!0):this.activeClass.next(!1))},e.prototype.applyAnimated=function(){return this.apply(),Object(a.b)()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Zb({type:e,selectors:[["icon-button"]],decls:8,vars:9,consts:[["tooltip","","placement","top",1,"icon-button-container",3,"deactivated"],[1,"nu-btn-med","nu-btn-icon",3,"click"],[1,"nu-icon","nu-ic-text"],[1,"tooltip-content"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.lc(1,"button",1),o.tc("click",(function(){return t._change.next(t._data)})),o.yc(2,"async"),o.wc(),o.lc(3,"svg",2),o.gc(4,"use"),o.yc(5,"async"),o.kc(),o.kc(),o.vc(),o.lc(6,"span",3),o.ed(7),o.kc(),o.kc()),2&e&&(o.Cc("deactivated",!t.tooltipValue),o.Sb(1),o.Xb("active",o.zc(2,5,t.activeClass)),o.Sb(3),o.Tb("href",o.zc(5,7,t.iconSource),null,"xlink"),o.Sb(3),o.fd(t.tooltipValue))},directives:[s.a],pipes:[c.b],encapsulation:2,changeDetection:0}),e}()},INYq:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var a=i(n("T9/7")),o=r(n("VTm5")),s=r(n("0KrK")),c=i(n("XVEb")),l=i(n("mG+b")),u=r(n("lCA4"));function p(){var e=new a.HandlebarsEnvironment;return c.extend(e,a),e.SafeString=o.default,e.Exception=s.default,e.Utils=c,e.escapeExpression=c.escapeExpression,e.VM=l,e.template=function(t){return l.template(t,e)},e}var h=p();h.create=p,u.default(h),h.default=h,t.default=h,e.exports=t.default},It4u:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});t.UndefinedFactError=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return s.code="UNDEFINED_FACT",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}()},J8oI:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("SBw3"),i=n("ROBh"),a=n("EM62"),o=function(){function e(e){this.featureList=e}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return Object(i.a)({value:t.value,validation:n.data.validation})},e.prototype.getApplyData=function(e,t){return Object(i.a)({styles:{color:t.value},takeFocus:t.takeFocus})},e.\u0275fac=function(t){return new(t||e)(a.pc(r.a))},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},JPqQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("D57K"),i=n("5xGT"),a=n("xVbo"),o=n("Ohay"),s=n("TLy2"),c=n("8j5Y"),l=n("nsO7"),u=n("Jzy8"),p=n("c7W3"),h=n("QoSw"),d=n("ZTXN"),f=n("g6G6"),g=n("X0jn"),m=n("gCml"),v=n("EM62"),b=function(){function e(e,t,n){this.state=e,this.dll=t,this.commandService=n,this.matchedItems={},this.ruleMap={},this.subs=[],this.filterActions=new d.a}return e.prototype.initialize=function(){var e=this.listenToDiagramChange().subscribe();this.subs.push(e)},e.prototype.addRule=function(e){var t={};t[e.id]=e,this.commandService.dispatch(p.a.updateDisplayRules,{addUpdate:t})},e.prototype.deleteRule=function(e){this.commandService.dispatch(p.a.updateDisplayRules,{remove:[e.id]})},e.prototype.evalRules=function(e,t,n){var r=this;if(this.ruleMap[e]&&this.ruleMap[e].length>0){var i=this.ruleMap[e];i.sort((function(e,t){return e.priorityScore-t.priorityScore})),i.forEach((function(i){i.isActive&&r.runRuleForShape(e,t,i,n)}))}},e.prototype.applyRulesForDiagram=function(e,t){var n=this,r=Object.keys(this.ruleMap);t.map((function(t){return e.shapes[t]})).forEach((function(e){n.resetShape(e.id),Object.keys(e.data).map((function(t){r.includes(t)&&n.evalRules(t,e,e.data[t].value)}))}))},e.prototype.listenToDiagramChange=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(a.a)((function(e){return Boolean(e)})),Object(o.a)(),Object(s.a)((function(t){return e.onDiagramChange(t)})))},e.prototype.listenToRuleChanges=function(e){var t=this;return e.getDiagramRuleChanges().pipe(Object(s.a)((function(){return e.getDiagramOnce()})),Object(c.a)((function(e){t.ruleMap={},t.buildRuleMap(Object.values(e.rules)),t.applyRulesForDiagram(e,Object.keys(e.shapes))})))},e.prototype.listenToShapeAddAndSwitch=function(e){var t=this;return e.getDiagramChanges().pipe(Object(c.a)((function(e){if("init"!==e.source&&e.split&&e.split.shapes){var n=Object.keys(e.split.shapes).filter((function(t){return i.hb.hasChanges(e.split.shapes[t],"defId")}));n.length>0&&t.applyRulesForDiagram(e.model,n)}})))},e.prototype.onDiagramChange=function(e){var t=this;return this.dll.forCurrentObserver(!1).pipe(Object(s.a)((function(e){return e.getDiagramOnce().pipe(Object(s.a)((function(n){return t.ruleMap={},t.matchedItems={},t.buildRuleMap(Object.values(n.rules)),Object(f.a)(t.state.changes("DiagramLoadComplete").pipe(Object(a.a)((function(e){return e})),Object(c.a)((function(){t.applyRulesForDiagram(n,Object.keys(n.shapes))}))),t.listenToRuleChanges(e),t.listenToShapeAddAndSwitch(e))})))})))},e.prototype.runRuleForShape=function(e,t,n,r){this.isShapeMatching(e,n,t)?(this.matchedItems[t.id]=n.id,this.doActionForShape(n,t)):this.matchedItems[t.id]&&this.resetShape(t.id)},e.prototype.isShapeMatching=function(e,t,n){if(n.data[e]){var r=n.data[e].value;switch(t.comparison){case u.I.Equals:if(r){if(Object(l.isString)(r))return Object(l.isEqual)(r.toLowerCase(),t.value.toLowerCase());if(NaN!==r&&NaN!==Number(t.value))return Object(l.isEqual)(Number(r),Number(t.value))}break;case u.I.Contains:if(Object(l.isString)(r)&&r.toLowerCase().indexOf(t.value.toLowerCase())>-1)return!0;if(Array.isArray(r))return r.some((function(e){return Object(l.isString)(e)&&e===t.value||Object.values(e).includes(t.value)}));if(r.people&&Array.isArray(r.people))return r.people.some((function(e){return e.email===t.value}));break;case u.I.GreaterThan:if(!Object(l.isString)(r)&&NaN!==Number(r)&&NaN!==Number(t.value))return Number(r)>Number(t.value);break;case u.I.LesserThan:if(!Object(l.isString)(r)&&NaN!==Number(r)&&NaN!==Number(t.value))return Number(r)<Number(t.value);break;case u.I.IsTrue:return!0===r;case u.I.IsFalse:return!1===r}return!1}},e.prototype.doActionForShape=function(e,t){var n,r,i;switch(e.action){case u.H.Style:var a={shapeId:t.id,style:{fillStyle:g.h.Solid,fillColor:(null===(n=e.actionData)||void 0===n?void 0:n.fillColor)||t.style.fillColor,lineColor:(null===(r=e.actionData)||void 0===r?void 0:r.lineColor)||t.style.lineColor,lineThickness:Number(null===(i=e.actionData)||void 0===i?void 0:i.lineThickness)||t.style.lineThickness}};this.filterActions.next(a)}},e.prototype.resetShape=function(e){var t={shapeId:e};this.filterActions.next(t),delete this.matchedItems[e]},e.prototype.buildRuleMap=function(e){var t=this;e&&e.length>0&&e.forEach((function(e){e.targets.map((function(e){return e.dataItemId})).forEach((function(n){t.ruleMap[n]=t.ruleMap[n]?Object(r.j)(t.ruleMap[n],[e]):[e]}))}))},e.prototype.buildRuleMapOnDataDefChange=function(e){var t,n,i=this;this.ruleMap={};var a=e.dataDefs,o=e.rules,s={};for(var c in a)Object(r.a)(s,a[c]);for(var l=Object.values(s),u={},p=0;p<l.length;p++){var h=l[p],d=h.label&&h.label.length>0?h.label:h.id;if(null===(t=h.visibility)||void 0===t?void 0:t.some((function(e){return"editor"===e.type}))){h.systemType&&-1===d.indexOf(h.systemType.toString())&&(d+=" ("+h.systemType+")");var f=d+"."+h.type;u[f]||(u[f]={id:d,label:d,diList:[],type:h.type}),h.type&&m.a.supportedDITypes.includes(h.type)&&(null===(n=u[f])||void 0===n||n.diList.push({id:h.id}))}}var g=Object.values(o);g.forEach((function(e){var t,n=e.targets[0];if(n){e.targets=[];var r=s[n.dataItemId],a=r.label+"."+r.type;null===(t=u[a])||void 0===t||t.diList.forEach((function(t){e.targets.push({dataItemId:t.id})}))}i.addRule(e)})),this.buildRuleMap(g)},e.\u0275fac=function(t){return new(t||e)(v.pc(i.Ib),v.pc(h.a),v.pc(i.B))},e.\u0275prov=v.bc({token:e,factory:e.\u0275fac}),e}()},Jk8n:function(e,t,n){"use strict";t.__esModule=!0;var r=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,r,i,a,o){var s=a.length-1;switch(i){case 1:return a[s-1];case 2:this.$=r.prepareProgram(a[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=a[s];break;case 9:this.$={type:"CommentStatement",value:r.stripComment(a[s]),strip:r.stripFlags(a[s],a[s]),loc:r.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:a[s],value:a[s],loc:r.locInfo(this._$)};break;case 11:this.$=r.prepareRawBlock(a[s-2],a[s-1],a[s],this._$);break;case 12:this.$={path:a[s-3],params:a[s-2],hash:a[s-1]};break;case 13:this.$=r.prepareBlock(a[s-3],a[s-2],a[s-1],a[s],!1,this._$);break;case 14:this.$=r.prepareBlock(a[s-3],a[s-2],a[s-1],a[s],!0,this._$);break;case 15:this.$={open:a[s-5],path:a[s-4],params:a[s-3],hash:a[s-2],blockParams:a[s-1],strip:r.stripFlags(a[s-5],a[s])};break;case 16:case 17:this.$={path:a[s-4],params:a[s-3],hash:a[s-2],blockParams:a[s-1],strip:r.stripFlags(a[s-5],a[s])};break;case 18:this.$={strip:r.stripFlags(a[s-1],a[s-1]),program:a[s]};break;case 19:var c=r.prepareBlock(a[s-2],a[s-1],a[s],a[s],!1,this._$),l=r.prepareProgram([c],a[s-1].loc);l.chained=!0,this.$={strip:a[s-2].strip,program:l,chain:!0};break;case 20:this.$=a[s];break;case 21:this.$={path:a[s-1],strip:r.stripFlags(a[s-2],a[s])};break;case 22:case 23:this.$=r.prepareMustache(a[s-3],a[s-2],a[s-1],a[s-4],r.stripFlags(a[s-4],a[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:a[s-3],params:a[s-2],hash:a[s-1],indent:"",strip:r.stripFlags(a[s-4],a[s]),loc:r.locInfo(this._$)};break;case 25:this.$=r.preparePartialBlock(a[s-2],a[s-1],a[s],this._$);break;case 26:this.$={path:a[s-3],params:a[s-2],hash:a[s-1],strip:r.stripFlags(a[s-4],a[s])};break;case 27:case 28:this.$=a[s];break;case 29:this.$={type:"SubExpression",path:a[s-3],params:a[s-2],hash:a[s-1],loc:r.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:a[s],loc:r.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:r.id(a[s-2]),value:a[s],loc:r.locInfo(this._$)};break;case 32:this.$=r.id(a[s-1]);break;case 33:case 34:this.$=a[s];break;case 35:this.$={type:"StringLiteral",value:a[s],original:a[s],loc:r.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(a[s]),original:Number(a[s]),loc:r.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===a[s],original:"true"===a[s],loc:r.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:r.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:r.locInfo(this._$)};break;case 40:case 41:this.$=a[s];break;case 42:this.$=r.preparePath(!0,a[s],this._$);break;case 43:this.$=r.preparePath(!1,a[s],this._$);break;case 44:a[s-2].push({part:r.id(a[s]),original:a[s],separator:a[s-1]}),this.$=a[s-2];break;case 45:this.$=[{part:r.id(a[s]),original:a[s]}];break;case 46:this.$=[];break;case 47:a[s-1].push(a[s]);break;case 48:this.$=[];break;case 49:a[s-1].push(a[s]);break;case 50:this.$=[];break;case 51:a[s-1].push(a[s]);break;case 58:this.$=[];break;case 59:a[s-1].push(a[s]);break;case 64:this.$=[];break;case 65:a[s-1].push(a[s]);break;case 70:this.$=[];break;case 71:a[s-1].push(a[s]);break;case 78:this.$=[];break;case 79:a[s-1].push(a[s]);break;case 82:this.$=[];break;case 83:a[s-1].push(a[s]);break;case 86:this.$=[];break;case 87:a[s-1].push(a[s]);break;case 90:this.$=[];break;case 91:a[s-1].push(a[s]);break;case 94:this.$=[];break;case 95:a[s-1].push(a[s]);break;case 98:this.$=[a[s]];break;case 99:a[s-1].push(a[s]);break;case 100:this.$=[a[s]];break;case 101:a[s-1].push(a[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],a=this.table,o="",s=0,c=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;i.push(u);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,d,f,g,m,v,b,y,x,C,w={};;){if(f=n[n.length-1],this.defaultActions[f]?g=this.defaultActions[f]:(null==h&&(C=void 0,"number"!=typeof(C=t.lexer.lex()||1)&&(C=t.symbols_[C]||C),h=C),g=a[f]&&a[f][h]),void 0===g||!g.length||!g[0]){var k="";if(!l){for(v in x=[],a[f])this.terminals_[v]&&v>2&&x.push("'"+this.terminals_[v]+"'");k=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:u,expected:x})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+h);switch(g[0]){case 1:n.push(h),r.push(this.lexer.yytext),i.push(this.lexer.yylloc),n.push(g[1]),h=null,d?(h=d,d=null):(c=this.lexer.yyleng,o=this.lexer.yytext,s=this.lexer.yylineno,u=this.lexer.yylloc,l>0&&l--);break;case 2:if(b=this.productions_[g[1]][1],w.$=r[r.length-b],w._$={first_line:i[i.length-(b||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(b||1)].first_column,last_column:i[i.length-1].last_column},p&&(w._$.range=[i[i.length-(b||1)].range[0],i[i.length-1].range[1]]),void 0!==(m=this.performAction.call(w,o,c,s,this.yy,g[1],r,i)))return m;b&&(n=n.slice(0,-1*b*2),r=r.slice(0,-1*b),i=i.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),r.push(w.$),i.push(w._$),y=a[n[n.length-2]][n[n.length-1]],n.push(y);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),o=0;o<a.length&&(!(n=this._input.match(this.rules[a[o]]))||t&&!(n[0].length>t[0].length)||(t=n,r=o,this.options.flex));o++);return t?((i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,r){function i(e,n){return t.yytext=t.yytext.substring(e,t.yyleng-n+e)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return e}();function n(){this.yy={}}return e.lexer=t,n.prototype=e,e.Parser=n,new n}();t.default=r,e.exports=t.default},K07p:function(e,t,n){var r=n("1NHC"),i=n("eQvJ"),a=n("ipv5"),o=n("Pj1F");function s(e,t){if(t)for(var n in t)e[n]=t[n];return e}t.BETADIST=i.BETA.DIST,t.BETAINV=i.BETA.INV,t.BINOMDIST=i.BINOM.DIST,t.CEILING=t.ISOCEILING=s(r.CEILING.MATH,r.CEILING),t.CEILINGMATH=r.CEILING.MATH,t.CEILINGPRECISE=r.CEILING.PRECISE,t.CHIDIST=i.CHISQ.DIST,t.CHIDISTRT=i.CHISQ.DIST.RT,t.CHIINV=i.CHISQ.INV,t.CHIINVRT=i.CHISQ.INV.RT,t.CHITEST=i.CHISQ.TEST,t.CONFIDENCE=s(i.CONFIDENCE.NORM,i.CONFIDENCE),t.COVAR=i.COVARIANCE.P,t.COVARIANCEP=i.COVARIANCE.P,t.COVARIANCES=i.COVARIANCE.S,t.CRITBINOM=i.BINOM.INV,t.EXPONDIST=i.EXPON.DIST,t.ERFCPRECISE=a.ERFC.PRECISE,t.ERFPRECISE=a.ERF.PRECISE,t.FDIST=i.F.DIST,t.FDISTRT=i.F.DIST.RT,t.FINVRT=i.F.INV.RT,t.FINV=i.F.INV,t.FLOOR=s(r.FLOOR.MATH,r.FLOOR),t.FLOORMATH=r.FLOOR.MATH,t.FLOORPRECISE=r.FLOOR.PRECISE,t.FTEST=i.F.TEST,t.GAMMADIST=i.GAMMA.DIST,t.GAMMAINV=i.GAMMA.INV,t.GAMMALNPRECISE=i.GAMMALN.PRECISE,t.HYPGEOMDIST=i.HYPGEOM.DIST,t.LOGINV=i.LOGNORM.INV,t.LOGNORMINV=i.LOGNORM.INV,t.LOGNORMDIST=i.LOGNORM.DIST,t.MODE=s(i.MODE.SNGL,i.MODE),t.MODEMULT=i.MODE.MULT,t.MODESNGL=i.MODE.SNGL,t.NEGBINOMDIST=i.NEGBINOM.DIST,t.NETWORKDAYSINTL=o.NETWORKDAYS.INTL,t.NORMDIST=i.NORM.DIST,t.NORMINV=i.NORM.INV,t.NORMSDIST=i.NORM.S.DIST,t.NORMSINV=i.NORM.S.INV,t.PERCENTILE=s(i.PERCENTILE.EXC,i.PERCENTILE),t.PERCENTILEEXC=i.PERCENTILE.EXC,t.PERCENTILEINC=i.PERCENTILE.INC,t.PERCENTRANK=s(i.PERCENTRANK.INC,i.PERCENTRANK),t.PERCENTRANKEXC=i.PERCENTRANK.EXC,t.PERCENTRANKINC=i.PERCENTRANK.INC,t.POISSON=s(i.POISSON.DIST,i.POISSON),t.POISSONDIST=i.POISSON.DIST,t.QUARTILE=s(i.QUARTILE.INC,i.QUARTILE),t.QUARTILEEXC=i.QUARTILE.EXC,t.QUARTILEINC=i.QUARTILE.INC,t.RANK=s(i.RANK.EQ,i.RANK),t.RANKAVG=i.RANK.AVG,t.RANKEQ=i.RANK.EQ,t.SKEWP=i.SKEW.P,t.STDEV=s(i.STDEV.S,i.STDEV),t.STDEVP=i.STDEV.P,t.STDEVS=i.STDEV.S,t.TDIST=i.T.DIST,t.TDISTRT=i.T.DIST.RT,t.TINV=i.T.INV,t.TTEST=i.T.TEST,t.VAR=s(i.VAR.S,i.VAR),t.VARP=i.VAR.P,t.VARS=i.VAR.S,t.WEIBULL=s(i.WEIBULL.DIST,i.WEIBULL),t.WEIBULLDIST=i.WEIBULL.DIST,t.WORKDAYINTL=o.WORKDAY.INTL,t.ZTEST=i.Z.TEST},K5wl:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("D57K"),i=n("gZOS"),a=n("5xGT"),o=n("X0jn"),s=n("nsO7"),c=n("19Zn"),l=n("jW3f"),u=n("2DR2"),p=n("QoSw"),h=n("PC6z"),d=n("x77O"),f=n("+1jB"),g=n("EM62"),m=function(){function e(e,t,n,r){this.modelChangeUtils=e,this.state=t,this.ll=n,this.commandService=r}return e.prototype.syncEdataChanges=function(e,t){var n=this;t.forEach((function(t){e.filter((function(e){return t.eData.find((function(t){return t===e.id}))})).forEach((function(e){var r=e.__sakota__.getChanges(),i=Object(h.b)(r);i.edata&&n.edataModelDataDefChanged(t,e,i.edata),i.entities&&Object.keys(i.entities).forEach((function(r){var a=e.entities[r];if(a){var o=Object.keys(a.shapes&&a.shapes[t.id]||{}),s=i.entities[r];if(o.length>0){if(s.$set){var c=[];if(s.$set.data)c=Object.keys(s.$set.data);else if(Object.keys(s.$set).filter((function(e){return/data/.test(e)})).length)c=Object.keys(s.$set).filter((function(e){return/data/.test(e)}));else if(Object.keys(s.$set).some((function(e){return/shapes./.test(e)}))){var l=Object.keys(s.$set).filter((function(e){return/shapes./.test(e)})),u=l.map((function(e){if(3===e.split(".").length)return e.substr(e.lastIndexOf(".")+1)}));return u[0]||(u=Object.keys(s.$set[l[0]])),void n.copyAllEntityValuesToShapes(t,u,a,e)}var p=[];c.forEach((function(t){var r;if(s.$set.data&&void 0!==s.$set.data[t]&&null!==s.$set.data[t]){r=t;var i=n.getEntityDataDef(e,a.id,r);p.push({path:r,value:s.$set.data[t],def:i})}else if(void 0!==s.$set[t]&&null!==s.$set[t]){r=t.replace("data.","");i=n.getEntityDataDef(e,a.id,r);p.push({path:r,value:s.$set[t],def:i})}}));var h=a.getDef?a.getDef():void 0;h&&n.modelChangeUtils.syncEDataChanges(t,{shapeIds:o,set:p,entityDef:h})}if(s.$unset){c=[];if(s.$unset.data)c=Object.keys(s.$unset.data);else if(Object.keys(s.$unset).filter((function(e){return/data/.test(e)})).length)c=Object.keys(s.$unset).filter((function(e){return/data/.test(e)}));else if(Object.keys(s.$unset).filter((function(e){return/shapes./.test(e)})).length)return;var d=c.map((function(e){return{path:e.replace("data.",""),value:void 0}}));n.modelChangeUtils.syncEDataChanges(t,{shapeIds:o,set:d,entityDef:a.getDef()})}}s.$unset&&!0!==s.$unset&&n.removeInvalidLookupConnectors(t,a,s)}}))}))}))},e.prototype.buildEDataChanges=function(e,t,n){var a,s,c,u,p,h;void 0===n&&(n=!1);var f=e.__sakota__.getChanges();if(f.$set){var g=n?/customEntityDefs\.([^\.]+)$/:/customEntityDefs\.([^\.]+)\.dataItems$/,m=Object.keys(f.$set).filter((function(e){return g.test(e)})),v={};t.forEach((function(e){v[e.id]=i.Sakota.create(e)})),v[e.id]=e;var b=function(t){var r=t.split(".")[1],i=n?f.$set[t].dataItems:f.$set[t];Object.values(i).filter((function(e){return e.type===o.c.LOOKUP})).filter((function(t){return t.options.eDataId!==e.id})).forEach((function(t){var n=t.options,i=n.eDataId,a=n.eDefId,o=n.isMirrorField;if(!(void 0!==o&&o)){var s={entityDefId:a,lookupField:t,lookupOptions:{eDataModel:e,eDefId:r}},c=new l.a(null);c.changeModel=v[i],c.data=s,c.resourceId=i,c.prepareData()}}))};try{for(var y=Object(r.k)(m),x=y.next();!x.done;x=y.next()){b(x.value)}}catch(A){a={error:A}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}var C={},w={},k=!1,S=function(t){var r=n?f.$set[t].dataItems:f.$set[t],i=t.split(".")[1],a=n?{}:e.__sakota__.getTarget().customEntityDefs[i].dataItems;Object.keys(r).forEach((function(e){var t=r[e];t.type===o.c.FORMULA&&(a[e]&&t.options.parsedExpression===a[e].options.parsedExpression||(k=!0,w[e]=r[e]))}))};try{for(var O=Object(r.k)(m),E=O.next();!E.done;E=O.next()){S(E.value)}}catch(M){c={error:M}}finally{try{E&&!E.done&&(u=O.return)&&u.call(O)}finally{if(c)throw c.error}}var _=function(t){var r=n?f.$set[t].dataItems:f.$set[t],i=t.split(".")[1];e.getEntitiesByDefId(i).forEach((function(e){for(var t in r)void 0===e.data[t]&&(e.data[t]=r[t].default);k&&(C[e.id]=w)}))};try{for(var I=Object(r.k)(m),P=I.next();!P.done;P=I.next()){_(P.value)}}catch(D){p={error:D}}finally{try{P&&!P.done&&(h=I.return)&&h.call(I)}finally{if(p)throw p.error}}var T=Object.values(v);return k&&d.a.updateFormulaFields(C,e,T),d.a.buildEDataChanges(T),T}},e.prototype.copyAllEntityValuesToShapes=function(e,t,n,r){var i=[];for(var a in n.data){var o=this.getEntityDataDef(r,n.id,a);i.push({path:a,value:n.data[a],def:o})}this.modelChangeUtils.syncEDataChanges(e,{shapeIds:t,set:i,entityDef:n.getDef()})},e.prototype.getEntityDataDef=function(e,t,n){if(e){var r=e.getDataItemLevel(n,t),i=Object(s.cloneDeep)(r[1]);return i&&(i.level=r[0]),i}},e.prototype.edataModelDataDefChanged=function(e,t,n){for(var r in n.$set){if(l=/customEntityDefs\.([^\.]+)$/.exec(r)){var i=l[1],a=n.$set[r].dataItems;for(var o in e.dataDefs[i]={},a)o!==u.a&&(e.dataDefs[i][o]=a[o])}}for(var r in n.$unset){if(l=/customEntityDefs\.([^\.]+)\.dataItems\.([^\.]+)$/.exec(r)){i=l[1],o=l[2];delete e.dataDefs[i][o]}}for(var r in n.$unset){(l=/dataDefs\.([^\.]+)\.([^\.]+)$/.exec(r))?(delete e.dataDefs[l[1]][l[2]],0===Object.keys(e.dataDefs[l[1]]).length&&delete e.dataDefs[l[1]]):/dataDefs\.([^\.]+)$/.test(r)&&delete e.dataDefs[r.split(".")[1]]}for(var r in n.$set){if(l=/dataDefs\.([^\.]+)\.([^\.]+)/.exec(r))3===r.split(".").length?e.dataDefs[l[1]][l[2]]=n.$set[r]:Object.assign(e.dataDefs[l[1]][l[2]],t.dataDefs[l[1]][l[2]]);else if(/dataDefs\.([^\.]+)$/.test(r)){var s=r.split(".")[1];e.dataDefs[s]=n.$set[r]}}for(var r in n.$set){if(l=/customEntityDefs\.([^\.]+)\.editable$/.exec(r)){var c=n.$set[r];for(var o in e.dataDefs[l[1]])e.dataDefs[l[1]][o].optional=!0,e.dataDefs[l[1]][o].removeable=c,e.dataDefs[l[1]][o].labelEditable=c}}for(var r in n.$set){var l;if(l=/customEntityDefs\.([^\.]+)\.dataItems\.([^\.]+)\.label$/.exec(r)){c=n.$set[r];e.dataDefs[l[1]][l[2]].optional=!0,e.dataDefs[l[1]][l[2]].label=c}}},e.prototype.removeInvalidLookupConnectors=function(e,t,n){var r=Object.keys(n.$unset).filter((function(e){return/links/.test(e)}));if(r.length>0){var i=t.__sakota__.getTarget();r.forEach((function(t){var n=i.links[t.split(".").pop()];if(n&&n.type===o.f.LOOKUP&&n.connectors&&n.connectors[e.id]){var r=Object.keys(n.connectors[e.id])[0];if(r){var a=n.handshake,s=n.shapeId,l=n.entityId,u=n.eDataId,p=e.getMatchingLookupConnectors(a,s,l,u);if(0===p.length){var h=e.shapes[r];h&&h.defId===c.r.defId&&p.push(h)}p.forEach((function(t){delete e.shapes[t.id]}))}}}))}},e.\u0275fac=function(t){return new(t||e)(g.pc(f.a),g.pc(a.Ib),g.pc(p.a),g.pc(a.B))},e.\u0275prov=g.bc({token:e,factory:e.\u0275fac}),e}()},KFbB:function(e,t,n){var r=n("oFOz"),i=n("eQvJ"),a=n("1NHC"),o=n("sfKy"),s=n("39iF");function c(e){var t=[];return o.arrayEach(e,(function(e){e&&t.push(e)})),t}function l(e,t){for(var n={},r=1;r<e[0].length;++r)n[r]=!0;var i=t[0].length;for(r=1;r<t.length;++r)t[r].length>i&&(i=t[r].length);for(var a=1;a<e.length;++a)for(var o=1;o<e[a].length;++o){for(var c=!1,l=!1,u=0;u<t.length;++u){var p=t[u];if(!(p.length<i)){var h=p[0];if(e[a][0]===h){l=!0;for(var d=1;d<p.length;++d){if(!c)if(void 0===p[d]||"*"===p[d])c=!0;else{var f=s.parse(p[d]+""),g=[s.createToken(e[a][o],s.TOKEN_TYPE_LITERAL)].concat(f);c=s.compute(g)}}}}}l&&(n[o]=n[o]&&c)}for(var m=[],v=0;v<e[0].length;++v)n[v]&&m.push(v-1);return m}t.FINDFIELD=function(e,t){var n=null;return o.arrayEach(e,(function(e,r){if(e[0]===t)return n=r,!1})),null==n?r.value:n},t.DAVERAGE=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var a=l(e,i),s=[];if("string"==typeof n){var c=t.FINDFIELD(e,n);s=o.rest(e[c])}else s=o.rest(e[n]);var u=0;return o.arrayEach(a,(function(e){u+=s[e]})),0===a.length?r.div0:u/a.length},t.DCOUNT=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),c=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);c=o.rest(e[u])}else c=o.rest(e[n]);var p=[];return o.arrayEach(s,(function(e){p.push(c[e])})),i.COUNT(p)},t.DCOUNTA=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),c=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);c=o.rest(e[u])}else c=o.rest(e[n]);var p=[];return o.arrayEach(s,(function(e){p.push(c[e])})),i.COUNTA(p)},t.DGET=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var a=l(e,i),s=[];if("string"==typeof n){var c=t.FINDFIELD(e,n);s=o.rest(e[c])}else s=o.rest(e[n]);return 0===a.length?r.value:a.length>1?r.num:s[a[0]]},t.DMAX=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var a=l(e,i),s=[];if("string"==typeof n){var c=t.FINDFIELD(e,n);s=o.rest(e[c])}else s=o.rest(e[n]);var u=s[a[0]];return o.arrayEach(a,(function(e){u<s[e]&&(u=s[e])})),u},t.DMIN=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var a=l(e,i),s=[];if("string"==typeof n){var c=t.FINDFIELD(e,n);s=o.rest(e[c])}else s=o.rest(e[n]);var u=s[a[0]];return o.arrayEach(a,(function(e){u>s[e]&&(u=s[e])})),u},t.DPRODUCT=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var a=l(e,i),s=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);s=o.rest(e[u])}else s=o.rest(e[n]);var p=[];o.arrayEach(a,(function(e){p.push(s[e])})),p=c(p);var h=1;return o.arrayEach(p,(function(e){h*=e})),h},t.DSTDEV=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),u=[];if("string"==typeof n){var p=t.FINDFIELD(e,n);u=o.rest(e[p])}else u=o.rest(e[n]);var h=[];return o.arrayEach(s,(function(e){h.push(u[e])})),h=c(h),i.STDEV.S(h)},t.DSTDEVP=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),u=[];if("string"==typeof n){var p=t.FINDFIELD(e,n);u=o.rest(e[p])}else u=o.rest(e[n]);var h=[];return o.arrayEach(s,(function(e){h.push(u[e])})),h=c(h),i.STDEV.P(h)},t.DSUM=function(e,n,i){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,i),c=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);c=o.rest(e[u])}else c=o.rest(e[n]);var p=[];return o.arrayEach(s,(function(e){p.push(c[e])})),a.SUM(p)},t.DVAR=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),c=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);c=o.rest(e[u])}else c=o.rest(e[n]);var p=[];return o.arrayEach(s,(function(e){p.push(c[e])})),i.VAR.S(p)},t.DVARP=function(e,n,a){if(isNaN(n)&&"string"!=typeof n)return r.value;var s=l(e,a),c=[];if("string"==typeof n){var u=t.FINDFIELD(e,n);c=o.rest(e[u])}else c=o.rest(e[n]);var p=[];return o.arrayEach(s,(function(e){p.push(c[e])})),i.VAR.P(p)}},KOB3:function(e,t,n){var r,i,a;i=[],void 0===(a="function"==typeof(r=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,r=n&&/blob:/i.test((t.location||{}).protocol),i={},a=0,o={parse:function(n,r){var s=(r=r||{}).dynamicTyping||!1;if(C(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!C(r.transform)&&r.transform,r.worker&&o.WORKERS_SUPPORTED){var c=function(){if(!o.WORKERS_SUPPORTED)return!1;var n,r,s=(n=t.URL||t.webkitURL||null,r=e.toString(),o.BLOB_URL||(o.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),c=new t.Worker(s);return c.onmessage=m,c.id=a++,i[c.id]=c}();return c.userStep=r.step,c.userChunk=r.chunk,c.userComplete=r.complete,c.userError=r.error,r.step=C(r.step),r.chunk=C(r.chunk),r.complete=C(r.complete),r.error=C(r.error),delete r.worker,void c.postMessage({input:n,config:r,workerId:c.id})}var d=null;return o.NODE_STREAM_INPUT,"string"==typeof n?d=r.download?new l(r):new p(r):!0===n.readable&&C(n.read)&&C(n.on)?d=new h(r):(t.File&&n instanceof File||n instanceof Object)&&(d=new u(r)),d.stream(n)},unparse:function(e,t){var n=!1,r=!0,i=",",a="\r\n",s='"',c=s+s,l=!1,u=null,p=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(i=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(l=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(c=t.escapeChar+s),"boolean"==typeof t.escapeFormulae&&(p=t.escapeFormulae)}}();var h=new RegExp(f(s),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return d(null,e,l);if("object"==typeof e[0])return d(u||Object.keys(e[0]),e,l)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),d(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function d(e,t,n){var o="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var s=Array.isArray(e)&&0<e.length,c=!Array.isArray(t[0]);if(s&&r){for(var l=0;l<e.length;l++)0<l&&(o+=i),o+=g(e[l],l);0<t.length&&(o+=a)}for(var u=0;u<t.length;u++){var p=s?e.length:t[u].length,h=!1,d=s?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!s&&(h="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&s){for(var f=[],m=0;m<p;m++){var v=c?e[m]:m;f.push(t[u][v])}h=""===f.join("").trim()}if(!h){for(var b=0;b<p;b++){0<b&&!d&&(o+=i);var y=s&&c?e[b]:b;o+=g(t[u][y],b)}u<t.length-1&&(!n||0<p&&!d)&&(o+=a)}}return o}function g(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===p&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var r=e.toString().replace(h,c);return"boolean"==typeof n&&n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(r,o.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?s+r+s:r}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!n&&!!t.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=g,o.ParserHandle=d,o.NetworkStreamer=l,o.FileStreamer=u,o.StringStreamer=p,o.ReadableStreamStreamer=h,t.jQuery){var s=t.jQuery;s.fn.parse=function(e){var n=e.config||{},r=[];return this.each((function(e){if("INPUT"!==s(this).prop("tagName").toUpperCase()||"file"!==s(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:s.extend({},n)})})),i(),this;function i(){if(0!==r.length){var t,n,i,c,l=r[0];if(C(e.before)){var u=e.before(l.file,l.inputElem);if("object"==typeof u){if("abort"===u.action)return t="AbortError",n=l.file,i=l.inputElem,c=u.reason,void(C(e.error)&&e.error({name:t},n,i,c));if("skip"===u.action)return void a();"object"==typeof u.config&&(l.instanceConfig=s.extend(l.instanceConfig,u.config))}else if("skip"===u)return void a()}var p=l.instanceConfig.complete;l.instanceConfig.complete=function(e){C(p)&&p(e,l.file,l.inputElem),a()},o.parse(l.file,l.instanceConfig)}else C(e.complete)&&e.complete()}function a(){r.splice(0,1),i()}}}function c(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var t=y(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new d(t),(this._handle.streamer=this)._config=t}).call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&C(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var s=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var c=s.meta.cursor;this._finished||(this._partialLine=a.substring(c-this._baseIndex),this._baseIndex=c),s&&s.data&&(this._rowCount+=s.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:s,workerId:o.WORKER_ID,finished:l});else if(C(this._config.chunk)&&!n){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!l||!C(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(e){C(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function l(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),c.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=x(this._chunkLoaded,this),t.onerror=x(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function u(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),c.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=x(this._chunkLoaded,this),t.onerror=x(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,i)}var a=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function p(e){var t;c.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function h(e){c.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=x((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=x((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=x((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=x((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function d(e){var t,n,r,i=Math.pow(2,53),a=-i,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,l=this,u=0,p=0,h=!1,d=!1,m=[],v={data:[],errors:[],meta:{}};if(C(e.step)){var b=e.step;e.step=function(t){if(v=t,k())w();else{if(w(),0===v.data.length)return;u+=t.data.length,e.preview&&u>e.preview?n.abort():(v.data=v.data[0],b(v,l))}}}function x(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function w(){if(v&&r&&(O("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines)for(var t=0;t<v.data.length;t++)x(v.data[t])&&v.data.splice(t--,1);return k()&&function(){if(v)if(Array.isArray(v.data[0])){for(var t=0;k()&&t<v.data.length;t++)v.data[t].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(t,n){C(e.transformHeader)&&(t=e.transformHeader(t,n)),m.push(t)}}(),function(){if(!v||!e.header&&!e.dynamicTyping&&!e.transform)return v;function t(t,n){var r,i=e.header?{}:[];for(r=0;r<t.length;r++){var a=r,o=t[r];e.header&&(a=r>=m.length?"__parsed_extra":m[r]),e.transform&&(o=e.transform(o,a)),o=S(a,o),"__parsed_extra"===a?(i[a]=i[a]||[],i[a].push(o)):i[a]=o}return e.header&&(r>m.length?O("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+r,p+n):r<m.length&&O("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+r,p+n)),i}var n=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(t),n=v.data.length):v.data=t(v.data,0),e.header&&v.meta&&(v.meta.fields=m),p+=n,v}()}function k(){return e.header&&0===m.length}function S(t,n){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(s.test(e)){var t=parseFloat(e);if(a<t&&t<i)return!0}return!1}(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n;var r}function O(e,t,n,r){var i={type:e,code:t,message:n};void 0!==r&&(i.row=r),v.errors.push(i)}this.parse=function(i,a,s){var c=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(f(t)+"([^]*?)"+f(t),"gm"),r=(e=e.replace(n,"")).split("\r"),i=e.split("\n"),a=1<i.length&&i[0].length<r[0].length;if(1===r.length||a)return"\n";for(var o=0,s=0;s<r.length;s++)"\n"===r[s][0]&&o++;return o>=r.length/2?"\r\n":"\r"}(i,c)),r=!1,e.delimiter)C(e.delimiter)&&(e.delimiter=e.delimiter(i),v.meta.delimiter=e.delimiter);else{var l=function(t,n,r,i,a){var s,c,l,u;a=a||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var p=0;p<a.length;p++){var h=a[p],d=0,f=0,m=0;l=void 0;for(var v=new g({comments:i,delimiter:h,newline:n,preview:10}).parse(t),b=0;b<v.data.length;b++)if(r&&x(v.data[b]))m++;else{var y=v.data[b].length;f+=y,void 0!==l?0<y&&(d+=Math.abs(y-l),l=y):l=y}0<v.data.length&&(f/=v.data.length-m),(void 0===c||d<=c)&&(void 0===u||u<f)&&1.99<f&&(c=d,s=h,u=f)}return{successful:!!(e.delimiter=s),bestDelimiter:s}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);l.successful?e.delimiter=l.bestDelimiter:(r=!0,e.delimiter=o.DefaultDelimiter),v.meta.delimiter=e.delimiter}var u=y(e);return e.preview&&e.header&&u.preview++,t=i,n=new g(u),v=n.parse(t,a,s),w(),h?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,n.abort(),t=C(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(h=!1,l.streamer.parseChunk(t,!0)):setTimeout(l.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,n.abort(),v.meta.aborted=!0,C(e.complete)&&e.complete(v),t=""}}function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(e){var t,n=(e=e||{}).delimiter,r=e.newline,i=e.comments,a=e.step,s=e.preview,c=e.fastMode,l=t=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(l=e.escapeChar),("string"!=typeof n||-1<o.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<o.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var u=0,p=!1;this.parse=function(e,o,h){if("string"!=typeof e)throw new Error("Input must be a string");var d=e.length,g=n.length,m=r.length,v=i.length,b=C(a),y=[],x=[],w=[],k=u=0;if(!e)return R();if(c||!1!==c&&-1===e.indexOf(t)){for(var S=e.split(r),O=0;O<S.length;O++){if(w=S[O],u+=w.length,O!==S.length-1)u+=r.length;else if(h)return R();if(!i||w.substring(0,v)!==i){if(b){if(y=[],M(w.split(n)),L(),p)return R()}else M(w.split(n));if(s&&s<=O)return y=y.slice(0,s),R(!0)}}return R()}for(var E=e.indexOf(n,u),_=e.indexOf(r,u),I=new RegExp(f(l)+f(t),"g"),P=e.indexOf(t,u);;)if(e[u]!==t)if(i&&0===w.length&&e.substring(u,u+v)===i){if(-1===_)return R();u=_+m,_=e.indexOf(r,u),E=e.indexOf(n,u)}else if(-1!==E&&(E<_||-1===_))w.push(e.substring(u,E)),u=E+g,E=e.indexOf(n,u);else{if(-1===_)break;if(w.push(e.substring(u,_)),N(_+m),b&&(L(),p))return R();if(s&&y.length>=s)return R(!0)}else for(P=u,u++;;){if(-1===(P=e.indexOf(t,P+1)))return h||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:u}),j();if(P===d-1)return j(e.substring(u,P).replace(I,t));if(t!==l||e[P+1]!==l){if(t===l||0===P||e[P-1]!==l){-1!==E&&E<P+1&&(E=e.indexOf(n,P+1)),-1!==_&&_<P+1&&(_=e.indexOf(r,P+1));var T=D(-1===_?E:Math.min(E,_));if(e[P+1+T]===n){w.push(e.substring(u,P).replace(I,t)),e[u=P+1+T+g]!==t&&(P=e.indexOf(t,u)),E=e.indexOf(n,u),_=e.indexOf(r,u);break}var A=D(_);if(e.substring(P+1+A,P+1+A+m)===r){if(w.push(e.substring(u,P).replace(I,t)),N(P+1+A+m),E=e.indexOf(n,u),P=e.indexOf(t,u),b&&(L(),p))return R();if(s&&y.length>=s)return R(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:u}),P++}}else P++}return j();function M(e){y.push(e),k=u}function D(t){var n=0;if(-1!==t){var r=e.substring(P+1,t);r&&""===r.trim()&&(n=r.length)}return n}function j(t){return h||(void 0===t&&(t=e.substring(u)),w.push(t),u=d,M(w),b&&L()),R()}function N(t){u=t,M(w),w=[],_=e.indexOf(r,u)}function R(e){return{data:y,errors:x,meta:{delimiter:n,linebreak:r,aborted:p,truncated:!!e,cursor:k+(o||0)}}}function L(){a(R()),y=[],x=[]}},this.abort=function(){p=!0},this.getCharIndex=function(){return u}}function m(e){var t=e.data,n=i[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){r=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(C(n.userStep)){for(var o=0;o<t.results.data.length&&(n.userStep({data:t.results.data[o],errors:t.results.errors,meta:t.results.meta},a),!r);o++);delete t.results}else C(n.userChunk)&&(n.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!r&&v(t.workerId,t.results)}function v(e,t){var n=i[e];C(n.userComplete)&&n.userComplete(t),n.terminate(),delete i[e]}function b(){throw new Error("Not implemented.")}function y(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=y(e[n]);return t}function x(e,t){return function(){e.apply(t,arguments)}}function C(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var n=e.data;if(void 0===o.WORKER_ID&&n&&(o.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:o.WORKER_ID,results:o.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=o.parse(n.input,n.config);r&&t.postMessage({workerId:o.WORKER_ID,results:r,finished:!0})}}),(l.prototype=Object.create(c.prototype)).constructor=l,(u.prototype=Object.create(c.prototype)).constructor=u,(p.prototype=Object.create(p.prototype)).constructor=p,(h.prototype=Object.create(c.prototype)).constructor=h,o})?r.apply(t,i):r)||(e.exports=a)},Kz6v:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("6Oco"),i=n("5xGT"),a=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"TextParserBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(n.$set&&t===i.A.EXECUTE)return this.applyTextToData(e,n),Object(r.b)()},e.prototype.getTextWithRowId=function(e){for(var t,n=[],r=0,i=!0,a=0;a<e.length;a++){var o=e[a];i?(n[r]={rowId:t&&t===o.rowId?"__N":o.rowId||"__N",text:o.text},o.text.endsWith("\n")?(t=n[r].rowId,r++):i=!1):(n[r].text+=o.text,o.text.endsWith("\n")&&(t=n[r].rowId,i=!0,r++))}return n},e.prototype.applyTextToData=function(t,n){var r=function(r){e.regexText.lastIndex=0;var a=e.regexText.exec(r);if(!a)return"continue";var o=a[1],s=a[2],c=t.shapes[o];c.data||(c.data={});var l=c.getTextParser(s);if(!l)return{value:void 0};var u=i.getTextWithRowId(n.$set[r]).map((function(e){return"creately.uml.class"===c.defId?{rowId:e.rowId,parseResult:l.parse(e.text)}:l.parse(e.text)}));c.updateDataItem&&c.updateDataItem(c,s,u)},i=this;for(var a in n.$set){var o=r(a);if("object"==typeof o)return o.value}},e.regexText=/shapes\.([^\.]+)\.texts.([^\.]+)\.content/g,e}()},L8TE:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("V4YE"),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function s(e,t,n){void 0===t&&(t=e.length);var r=e[t-1],i=e[t-2];return r?"ContentStatement"===r.type?(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:n}function c(e,t,n){void 0===t&&(t=-1);var r=e[t+1],i=e[t+2];return r?"ContentStatement"===r.type?(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:n}function l(e,t,n){var r=e[null==t?0:t+1];if(r&&"ContentStatement"===r.type&&(n||!r.rightStripped)){var i=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==i}}function u(e,t,n){var r=e[null==t?e.length-1:t-1];if(r&&"ContentStatement"===r.type&&(n||!r.leftStripped)){var i=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==i,r.leftStripped}}o.prototype=new a.default,o.prototype.Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var r=e.body,i=0,a=r.length;i<a;i++){var o=r[i],p=this.accept(o);if(p){var h=s(r,i,n),d=c(r,i,n),f=p.openStandalone&&h,g=p.closeStandalone&&d,m=p.inlineStandalone&&h&&d;p.close&&l(r,i,!0),p.open&&u(r,i,!0),t&&m&&(l(r,i),u(r,i)&&"PartialStatement"===o.type&&(o.indent=/([ \t]+$)/.exec(r[i-1].original)[1])),t&&f&&(l((o.program||o.inverse).body),u(r,i)),t&&g&&(l(r,i),u((o.inverse||o.program).body))}}return e},o.prototype.BlockStatement=o.prototype.DecoratorBlock=o.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,r=n,i=n;if(n&&n.chained)for(r=n.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var a={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:c(t.body),closeStandalone:s((r||t).body)};if(e.openStrip.close&&l(t.body,null,!0),n){var o=e.inverseStrip;o.open&&u(t.body,null,!0),o.close&&l(r.body,null,!0),e.closeStrip.open&&u(i.body,null,!0),!this.options.ignoreStandalone&&s(t.body)&&c(r.body)&&(u(t.body),l(r.body))}else e.closeStrip.open&&u(t.body,null,!0);return a},o.prototype.Decorator=o.prototype.MustacheStatement=function(e){return e.strip},o.prototype.PartialStatement=o.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=o,e.exports=t.default},"LA+B":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("NNJu"),a=n("EM62"),o=n("jHi0"),s=n("2kYt"),c=n("g5Ym");function l(e,t){if(1&e&&a.gc(0,"static-image",3),2&e){var n=a.xc();a.Cc("enableHover",!0)("type",n.item.itemIcon.type)("value",n.item.itemIcon.value)("width",n.item.itemIcon.width||20)("height",n.item.itemIcon.height||20)}}var u=function(e){function t(t){return e.call(this,t)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return new(e||t)(a.fc(a.r))},t.\u0275cmp=a.Zb({type:t,selectors:[["toolbar-grid-dropdown-item"]],features:[a.Rb([{provide:i.j,useExisting:Object(a.lb)((function(){return t}))}]),a.Pb],decls:4,vars:3,consts:[["tooltip","","placement","top",3,"deactivated"],[1,"tooltip-content"],[3,"enableHover","type","value","width","height",4,"ngIf"],[3,"enableHover","type","value","width","height"]],template:function(e,t){1&e&&(a.lc(0,"a",0),a.lc(1,"span",1),a.ed(2),a.kc(),a.cd(3,l,1,5,"static-image",2),a.kc()),2&e&&(a.Cc("deactivated",!t.item.tooltip),a.Sb(2),a.fd(t.item.tooltip),a.Sb(1),a.Cc("ngIf",t.item.itemIcon))},directives:[o.a,s.t,c.a],encapsulation:2,changeDetection:0}),t}(i.j)},LC7v:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("hSRu"),a=n("EM62"),o=n("2kYt"),s=n("pYIu"),c=n("XwbL"),l=n("uXwy");function u(e,t){if(1&e&&(a.lc(0,"label"),a.ed(1),a.kc()),2&e){var n=a.xc();a.Sb(1),a.gd(" ",null==n.props?null:n.props.label," ")}}function p(e,t){if(1&e&&a.gc(0,"sidebar-list-dropdown-item",5),2&e){var n=t.$implicit;a.Cc("item",n)}}var h=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return f(e||t)},t.\u0275cmp=a.Zb({type:t,selectors:[["sidebar-list-dropdown"]],features:[a.Pb],decls:8,vars:14,consts:[[4,"ngIf"],[1,"dropdown-item",3,"settings","direction","autoPosition"],["dd",""],["ddbutton","",3,"items"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){if(1&e&&(a.lc(0,"div"),a.cd(1,u,2,1,"label",0),a.lc(2,"abs-dropdown",1,2),a.gc(4,"sidebar-dropdown-button",3),a.yc(5,"async"),a.cd(6,p,1,1,"sidebar-list-dropdown-item",4),a.yc(7,"async"),a.kc(),a.kc()),2&e){var n,r;a.Ub(t.dropdownType),a.Sb(1),a.Cc("ngIf",null==t.props?null:t.props.label),a.Sb(1),a.Dc("direction",null==t.props?null:t.props.dropdownDirection),a.Cc("settings",a.Gc(13,h))("autoPosition",!1),a.Sb(2),a.Cc("items",null==(n=a.zc(5,9,t._data))?null:n.value),a.Sb(2),a.Cc("ngForOf",null==(r=a.zc(7,11,t._data))?null:r.value)}},directives:[o.t,s.a,c.a,o.s,l.a],pipes:[o.b],styles:["sidebar-list-dropdown-item[_ngcontent-%COMP%]{display:block}sidebar-list-dropdown-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"],changeDetection:0}),t}(i.a),f=a.nc(d)},LDpk:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("0KrK"),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new a.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},LLEj:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("D57K"),i=n("Wpmq"),a=n("8j5Y"),o=n("cJ9h"),s=n("kuMc"),c=n("xVbo"),l=n("YtkY"),u=n("TLy2"),p=n("0Woy"),h=function(e){function t(t,n,r,i){void 0===r&&(r=!0),void 0===i&&(i=!0);var a=e.call(this,t,n,r,i)||this;return a.offsetX=n.nativeEvent.offsetX,a.offsetY=n.nativeEvent.offsetY,a.clientX=n.nativeEvent.clientX,a.clientY=n.nativeEvent.clientY,a}return Object(r.e)(t,e),t}(n("MvFr").a),d=function(e){function t(t,n,r,i){void 0===r&&(r=!0),void 0===i&&(i=!0);var a=e.call(this,t,n,r,i)||this;return a.setRelatedShape(n),a}return Object(r.e)(t,e),t}(h),f=n("ljsB"),g=n("5xGT"),m=n("g6G6"),v=n("ROBh"),b=n("KTx3"),y=n("qZtG"),x=n("pgG0"),C=n("/xGf"),w=n("EM62"),k=function(){function e(e,t,n){this.commandService=e,this.vToDcoordinate=t,this.state=n,this.subs=[]}return e.prototype.initialize=function(t,n,r){var i=this;this.diagramCanvas=t,this.interactionCanvas=n,this.gridCanvas=r;var o=this.getStageWheelOnNoKeysDown().pipe(Object(a.a)((function(t){i.updatePan(-t.pixelX*e.panSensitivity,-t.pixelY*e.panSensitivity)}))),s=this.getStageWheelOnCtrlKeyDown().pipe(Object(a.a)((function(t){return i.updateZoom(1-t.pixelY*e.zoomSensitivity*(1/4),t.offsetX,t.offsetY)}))),c=this.getAllCanvasMouseCapture().pipe(Object(a.a)((function(){return i.interactionCanvas.canvas.focus()})));return Object(m.a)(o,s,c)},e.prototype.destroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe();this.diagramCanvas=void 0,this.interactionCanvas=void 0,this.gridCanvas=void 0},e.prototype.getCursor=function(){return Object(v.a)(this.defaultCursor)},e.prototype.getShapeTouch=function(){var e=this;return this.getShapes().pipe(Object(o.a)((function(t){return Object(b.a)(t,"mousedown").pipe(Object(s.a)(Object(b.a)(e.diagramCanvas,"childRemoved").pipe(Object(c.a)((function(e){return e.child===t})))))})),Object(l.a)((function(e){return e})))},e.prototype.getShapes=function(){var e=this.state.get("ShapeViews");return Object(y.a)(Object(x.a)(0,e.length).pipe(Object(l.a)((function(t){return e[t]}))),Object(b.a)(this.diagramCanvas,"childAdded").pipe(Object(l.a)((function(e){return e.child}))))},e.prototype.getShapeRightClick=function(){return this.getShapeTouch().pipe(Object(c.a)((function(e){return 2===e.nativeEvent.button})),Object(l.a)((function(e){return new d("shapeRightClick",e)})))},e.prototype.getAllCanvas=function(){return Object(v.a)(this.diagramCanvas,this.interactionCanvas,this.gridCanvas)},e.prototype.getAllCanvasMouseCapture=function(){return this.getAllCanvas().pipe(Object(o.a)((function(e){return Object(m.a)(Object(b.a)(e,"mousedown",{capture:!0}),Object(b.a)(e,"pressmove",{capture:!0}),Object(b.a)(e,"pressup",{capture:!0}))})),Object(l.a)((function(e){return e})))},e.prototype.getStageDrag=function(e){return Object(b.a)(e,"stagemousedown").pipe(Object(u.a)((function(){return Object(b.a)(e,"stagemousemove").pipe(Object(p.a)(),Object(a.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];if(n&&(void 0===i.nativeEvent.movementX||void 0===i.nativeEvent.movementY)){var a=i.localX-n.localX,o=i.localY-n.localY;i.nativeEvent.movementX=a,i.nativeEvent.movementY=o}})),Object(s.a)(Object(b.a)(e,"stagemouseup")))})),Object(l.a)((function(e){var t=Object(r.h)(e,2);t[0];return t[1]})),Object(c.a)((function(e){return!!e})))},e.prototype.getStageMouseDown=function(e){return Object(b.a)(e,"mousedown").pipe(Object(l.a)((function(e){return e})))},e.prototype.getStagePressUp=function(e){return Object(b.a)(e,"pressup").pipe(Object(l.a)((function(e){return e})))},e.prototype.getStageWheel=function(){return Object(m.a)(Object(b.a)(this.interactionCanvas.canvas,"gesturestart"),Object(b.a)(this.interactionCanvas.canvas,"gesturechange"),Object(b.a)(this.interactionCanvas.canvas,"gestureend"),Object(b.a)(this.interactionCanvas.canvas,"wheel")).pipe(Object(l.a)((function(e){if("gesturestart"===e.type||"gesturechange"===e.type||"gestureend"===e.type){var t=e.scale>1?-1*e.scale:e.scale+1.5;e.pixelY=t,e.offsetX=e.clientX,e.offsetY=e.clientY,e.gesture=!0}else{var n=C(e);e.pixelX=n.pixelX,e.pixelY=n.pixelY,e.gesture=!1}return e})),Object(a.a)((function(e){return e.preventDefault()})))},e.prototype.getStageWheelOnCtrlKeyDown=function(){return this.getStageWheel().pipe(Object(c.a)((function(e){return e.ctrlKey||e.metaKey||e.gesture})),Object(l.a)((function(e){return e})))},e.prototype.getStageWheelOnNoKeysDown=function(){return this.getStageWheel().pipe(Object(c.a)((function(e){return!e.metaKey&&!e.ctrlKey&&!e.gesture})),Object(l.a)((function(e){return e})))},e.prototype.getStageRightClick=function(e){return this.getStageMouseDown(e).pipe(Object(c.a)((function(e){return 2===e.nativeEvent.button})),Object(l.a)((function(e){return new h("canvasRightClick",e)})))},e.prototype.getInteractionRightClick=function(e){return this.getStageMouseDown(e).pipe(Object(c.a)((function(e){return 2===e.nativeEvent.button})),Object(l.a)((function(e){return new d("shapeRightClick",e)})))},e.prototype.updatePan=function(e,t){this.commandService.dispatch(f.a.panDiagram,{dx:e,dy:t,animate:!1})},e.prototype.updateZoom=function(e,t,n){this.commandService.dispatch(f.a.zoomDiagram,{delta:e,toX:t,toY:n,animate:!1})},e.prototype.getObjectsUnderPoint=function(e){return Object(r.j)(this.interactionCanvas.getObjectsUnderPoint(e.x,e.y,0),this.diagramCanvas.getObjectsUnderPoint(this.vToDcoordinate.x(e.x),this.vToDcoordinate.y(e.y),0)).filter((function(e){return!!e.getCursor}))},e.prototype.getCursorByContext=function(e,t){var n=e.find((function(e){var n=e.getCursor(t);return n&&(!!n.cursor||!!n.tail)}));return n?n.getCursor(t):this.defaultCursor},e.prototype.pointerMove=function(){return Object(b.a)(this.interactionCanvas,"stagemousemove").pipe(Object(l.a)((function(e){return{x:e.stageX,y:e.stageY}})))},e.zoomSensitivity=.02,e.panSensitivity=2,e.\u0275fac=function(t){return new(t||e)(w.pc(g.B),w.pc(i.a),w.pc(g.Ib))},e.\u0275prov=w.bc({token:e,factory:e.\u0275fac}),e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.e)(t,e)}(g.Ib)},"Lk+x":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("uWBd"),a=n("5vYS"),o=n("5xGT"),s=n("W0Mc"),c=n("nsO7"),l=n("6Oco"),u=n("ZtqW"),p=n("X0jn"),h=n("EM62"),d=function(){function e(e,t,n){this.state=e,this.pathingSvc=t,this.reconnectSvc=n}return Object.defineProperty(e.prototype,"name",{get:function(){return"ConnectorReconnectBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts","scaleX","scaleY","x","y","angle","gluepoints"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(n.$set)return this.shapeChange(e,n,t),Object(l.b)()},e.prototype.reconnect=function(e,t,n,r){var i=this;u.a.getConnectedConnectors(e,t.id).forEach((function(t){var a=t.connector.path;if(n===o.A.EXECUTE){var s=i.state.get("PreviewChanges");s&&s.$set&&s.$set["shapes."+t.connector.id+".path"]&&(a=s.$set["shapes."+t.connector.id+".path"])}var c=[a[t.connector.getFromEndpoint(e).id],a[t.connector.getToEndpoint(e).id]];i.reconnectShape(t.connector.id,c,e,n,r).forEach((function(e){return i.replaceOrPush(c,e)})),i.editConnectorPoint(e,t.connector.id,c),i.updateConnectorBumps(e,t.connector.id,n),i.updateConnectorBumpsForAboveConnectors(e,t.connector,n)}))},e.prototype.editConnectorPoint=function(e,t,n){var r=e.shapes[t],i=this.pathingSvc.repath(r.id,e,n,!1),o=a.a.createPathFromPoints(i);Object(c.isEqual)(r.path,o)||(r.path=o)},e.prototype.updateConnectorBumps=function(e,t,n){if(n===o.A.EXECUTE){var r=e.shapes[t];if(r.showBumps){var i=this.pathingSvc.setBumps(r.id,e,null,null),s=a.a.createPathFromPoints(i);Object(c.isEqual)(r.path,s)||(r.path=s)}}},e.prototype.shapeChange=function(t,n,r){var i=new Set;for(var a in n.$set){e.regexShape.lastIndex=0;var o=e.regexShape.exec(a);if(o){var s=o[1],c=t.shapes[s];if(!c.isConnector()){if(!i.has(s)){var l=this.getChangedConnectorId(n);this.reconnect(t,c,r,l)}i.add(s)}}}},e.prototype.getChangedConnectorId=function(t){for(var n in t.$set){e.regexConnectorPath.lastIndex=0;var r=e.regexConnectorPath.exec(n);if(r)return r[1]}return null},e.prototype.updateConnectorBumpsForAboveConnectors=function(e,t,n){var i,a;if(n===o.A.EXECUTE){var s=Object.keys(e.shapes).map((function(t){return e.shapes[t]})).filter((function(e){return e.type===p.r.Connector&&t.zIndex<e.zIndex}));try{for(var c=Object(r.k)(s),l=c.next();!l.done;l=c.next()){var u=l.value;this.updateConnectorBumps(e,u.id,n)}}catch(h){i={error:h}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}},e.prototype.reconnectShape=function(e,t,n,r,i){var a=this,s=this.getEndpoints(e,t,n),c=this.state.get("CustomGluePoint");return r===o.A.EXECUTE&&c&&c.shapeId&&s.forEach((function(t){(1===s.length||i&&e===i&&t.shapeId===c.shapeId)&&(t.shapeId=c.shapeId,t.gluepointId=c.gluepoint.id,t.gluepointLocked=!0,a.state.set("CustomGluePoint",{}))})),this.reconnectSvc.reconnect(e,n,s)},e.prototype.getEndpoints=function(e,t,n){var r=n.shapes[e].getPoints(),i=[r[0].id,Object(c.last)(r).id];return t.filter((function(e){return i.indexOf(e.id)>=0}))},e.prototype.replaceOrPush=function(e,t){var n=e.findIndex((function(e){return e.id===t.id}));-1!==n?e.splice(n,1,t):e.push(t)},e.regexShape=/shapes\.([^\.]+)(?!\.text)(?!\.defaultTextFormat)(?!\.style)\./g,e.regexConnectorPath=/shapes\.([^\.]+)(\.path)/g,e.\u0275fac=function(t){return new(t||e)(h.pc(o.Ib),h.pc(i.a),h.pc(s.a))},e.\u0275prov=h.bc({token:e,factory:e.\u0275fac}),e}()},Lmsv:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("5xGT"),i=n("4y1S"),a=n("HM3f"),o=n("ROBh"),s=n("YtkY"),c=n("TLy2"),l=n("J+dc"),u=n("8j5Y"),p=n("xVbo"),h=n("Ohay"),d=n("QoSw"),f=n("Bbfy"),g=n("EM62"),m=n("s2Ay"),v=function(){function e(e,t,n,r,i){this.stateService=e,this.userLocator=t,this.translate=n,this.notifierController=r,this.dll=i,this.GLOBAL_NOTIFICATIONS="GlobalNotifications",this.timeToShowPushNotifcation=1e4,this.stateService.set(this.GLOBAL_NOTIFICATIONS,[])}return e.prototype.setGlobalNotifications=function(e){var t=this.stateService.get(this.GLOBAL_NOTIFICATIONS)||[];e&&e.length>0&&(e.forEach((function(e){t.find((function(t){return t._id===e._id}))||t.push(e)})),this.stateService.set(this.GLOBAL_NOTIFICATIONS,t))},e.prototype.addNewGlobalNotification=function(e){var t=this.stateService.get(this.GLOBAL_NOTIFICATIONS);t||(t=[]),t.unshift(e),this.stateService.set(this.GLOBAL_NOTIFICATIONS,t),this.pushNotification(e)},e.prototype.getGlobalNotificationRawData=function(){return this.stateService.changes(this.GLOBAL_NOTIFICATIONS).pipe(Object(s.a)((function(e){return e||[]})))},e.prototype.getGlobalNotifications=function(){var e=this;return this.getGlobalNotificationRawData().pipe(Object(c.a)((function(t){var n=t.map((function(t){return e.enrichNotification(t)}));return Object(a.b)(n)})))},e.prototype.getUnreadNotificationIds=function(){return this.getGlobalNotificationRawData().pipe(Object(s.a)((function(e){return e&&e.length>0?e.filter((function(e){return!e.seen})).map((function(e){return e._id})):[]})))},e.prototype.getNoOfGlobalNotifications=function(){var e;return(null===(e=this.stateService.get(this.GLOBAL_NOTIFICATIONS))||void 0===e?void 0:e.length)||0},e.prototype.getNoOfUnreadGlobalNotification=function(){return this.getUnreadNotificationIds().pipe(Object(s.a)((function(e){return e?e.length:0})))},e.prototype.hasUnreadGlobalNotifications=function(){return this.getNoOfUnreadGlobalNotification().pipe(Object(s.a)((function(e){return e>0})))},e.prototype.markGlobalNotificationRead=function(e,t){var n=this;return this.getGlobalNotificationRawData().pipe(Object(l.a)(1),Object(u.a)((function(r){r&&r.length>0&&e&&e.length>0&&(r.forEach((function(n){e.includes(n._id)&&(n.seen=t)})),n.setGlobalNotifications(r))})))},e.prototype.formatTime=function(e){return""+r.J.formatDistance(e.serverTime,(new Date).getTime())},e.prototype.isAffectedUser=function(e){var t,n=this;return!!(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.affectedUsers)&&!!e.data.affectedUsers.find((function(e){return e.id===n.stateService.get("CurrentUser")}))},e.prototype.pushNotification=function(e){var t=this;this.shouldPush(e).pipe(Object(p.a)((function(e){return e})),Object(c.a)((function(){return t.enrichNotification(e)})),Object(l.a)(1),Object(u.a)((function(e){return t.showPushNotification(e)}))).subscribe()},e.prototype.showPushNotification=function(e){var t=e.actorInfo,n={inputs:{heading:(null==t?void 0:t.fullName)||(null==t?void 0:t.email),description:e.translatedContentHTML,user:t,autoDismiss:!0,dismissAfter:this.timeToShowPushNotifcation}};this.notifierController.show(f.b.PUSH_NOTIFICATION,r.i,r.jb.Push,n)},e.prototype.shouldPush=function(e){if("any"===e.push)return Object(o.a)(!0);if("resourceOpen"===e.push){if("DIAGRAM"===e.resourceType)return Object(o.a)(this.stateService.get("CurrentDiagram")===e.resourceId);if("PROJECT"===e.resourceType)return this.dll.forCurrentObserver(!1).pipe(Object(c.a)((function(e){return e.getDiagramOnce()})),Object(l.a)(1),Object(s.a)((function(t){return t.project===e.resourceId})))}return Object(o.a)(!1)},e.prototype.enrichNotification=function(e){var t=this;return this.userLocator.getUserInfo(e.actor).pipe(Object(p.a)((function(e){return!!e})),Object(h.a)((function(e,t){return e.fullName===t.fullName})),Object(s.a)((function(t){var n=e;return n.actorInfo=t,n})),Object(c.a)((function(e){return t.enrichAffectedUsers(e)})),Object(c.a)((function(e){return t.getContentHTMLFromTemplate(e).pipe(Object(s.a)((function(t){return e.translatedContentHTML=t,e})))})),Object(s.a)((function(e){return e.isAffectedUser=t.isAffectedUser(e),e.actionSVG=t.actionSvgPath(e),e.formatedTime=t.formatTime(e),e})))},e.prototype.enrichAffectedUsers=function(e){var t,n,r=this;if((null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.affectedUsers)&&(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.affectedUsers.length)>0){var i=e.data.affectedUsers.map((function(e){return r.getUserInfo(e)}));return Object(a.b)(i).pipe(Object(s.a)((function(t){return e.data.affectedUsers=t,e})))}return Object(o.a)(e)},e.prototype.getUserInfo=function(e){return this.userLocator.getUserInfo(e.id).pipe(Object(s.a)((function(t){return e.fullName=(null==t?void 0:t.fullName)||(null==t?void 0:t.email),e})))},e.prototype.getContentHTMLFromTemplate=function(e){var t=this,n="GLOBAL_NOTIFICATION."+(this.isAffectedUser(e)?"AFFECTED_USER.":"OTHERS.")+this.formatToContantString(e.key);return this.affectedUsers(e).pipe(Object(c.a)((function(r){return t.translate.get(n,{resourceId:e.resourceId,resourceName:e.resourceName,actorName:e.actorInfo.fullName,affectedUsers:r,data:e.data})})))},e.prototype.actionSvgPath=function(e){var t=e.key.toLowerCase().split(".");return t.shift(),"./assets/icons/symbol-defs.svg#nu-ic-notification-"+(t.join("-")+(this.isAffectedUser(e)?"-you":""))},e.prototype.affectedUsers=function(e){var t,n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.affectedUsers;if(n&&n.length>0){var r=this.isAffectedUser(e),i=n[0].fullName;if(1===n.length)return r?this.translate.get("GLOBAL_NOTIFICATION.YOU"):i?Object(o.a)(i):this.translate.get("A_USER");var a=r?"GLOBAL_NOTIFICATION.YOU_AND_NO_OF_OTHERS":i?"GLOBAL_NOTIFICATION.USER_NAME_AND_NO_OF_OTHERS":"FEW_USERS";return this.translate.get(a,{userName:i,noOfOthers:n.length-1})}return Object(o.a)(null)},e.prototype.formatToContantString=function(e){return e.toUpperCase().replace(/\./g,"_")},e.\u0275fac=function(t){return new(t||e)(g.pc(r.Ib),g.pc(i.x),g.pc(m.e),g.pc(r.kb),g.pc(d.a))},e.\u0275prov=g.bc({token:e,factory:e.\u0275fac}),e}()},Lzmu:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("5xGT"),i=n("EM62"),a=n("ZFuN"),o=n("K0+f"),s=function(){return{event:"notification.panel.settings.toggle.click"}},c=function(){function e(){}return e.prototype.ngOnInit=function(){r.Kb.track("notification.panel.settings.load")},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Zb({type:e,selectors:[["global-notification-settings"]],decls:28,vars:2,consts:[[1,"globle-notification-setting-container","fx-margin-bottom-30"],[1,"globle-notification-setting-toggle-row"],[1,"globle-notification-setting-toggle-header"],[1,"globle-notification-setting-toggle"],[3,"trackAction"],[1,"globle-notification-setting-sub-text"],[1,"globle-notification-setting-sub-text-dash"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.lc(1,"div",1),i.lc(2,"div",2),i.ed(3,"Recieve Fewer notifications."),i.kc(),i.lc(4,"div",3),i.gc(5,"toggle-button",4),i.kc(),i.kc(),i.lc(6,"div",5),i.ed(7,"You will not be notified of the following activities:"),i.kc(),i.lc(8,"div",5),i.lc(9,"div",6),i.ed(10," - "),i.kc(),i.ed(11," A workspace or folder you are collaborating on is deleted by the owner."),i.kc(),i.lc(12,"div",5),i.lc(13,"div",6),i.ed(14," - "),i.kc(),i.ed(15," A workspace you are collaborating on is moved by an editor or the owner."),i.kc(),i.lc(16,"div",5),i.lc(17,"div",6),i.ed(18," - "),i.kc(),i.ed(19," A workspace or folder you are collaborating on is renamed by an editor or the owner."),i.kc(),i.lc(20,"div",5),i.lc(21,"div",6),i.ed(22," - "),i.kc(),i.ed(23," A workspace or folder you are collaborating on is shared with other users by an editor or the owner."),i.kc(),i.lc(24,"div",5),i.lc(25,"div",6),i.ed(26," - "),i.kc(),i.ed(27," A collaborator edited the description or tags on a workspace you\u2019re working on."),i.kc(),i.kc()),2&e&&(i.Sb(5),i.Cc("trackAction",i.Gc(1,s)))},directives:[a.a,o.a],styles:[".globle-notification-setting-container[_ngcontent-%COMP%]{margin-top:18px;margin-left:18px;margin-right:12px}.globle-notification-setting-toggle-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;align-content:center}.globle-notification-setting-toggle-header[_ngcontent-%COMP%]{font-weight:700;color:#04263d}.globle-notification-setting-sub-text[_ngcontent-%COMP%], .globle-notification-setting-toggle-header[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-style:normal;font-size:14px;line-height:17px}.globle-notification-setting-sub-text[_ngcontent-%COMP%]{font-weight:400;color:#7e7e7e;padding-top:12px;padding-bottom:12px;display:flex}.globle-notification-setting-sub-text-dash[_ngcontent-%COMP%]{padding-right:10px}"],changeDetection:0}),e}()},ML8A:function(e,t,n){"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){if("function"!=typeof e)return e;return function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=t(n),e.apply(this,arguments)}}},Mb5J:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("NNJu"),a=n("EM62"),o=n("2kYt"),s=n("g5Ym");function c(e,t){1&e&&(a.wc(),a.lc(0,"svg",5),a.gc(1,"use",6),a.kc())}function l(e,t){if(1&e&&a.gc(0,"static-image",7),2&e){var n=a.xc();a.Cc("enableHover",!0)("type",n.item.itemIcon.type)("value",n.item.itemIcon.value)("width",70)("height",20)}}function u(e,t){if(1&e&&(a.lc(0,"span",9),a.ed(1),a.kc()),2&e){var n=a.xc(2);a.Sb(1),a.fd(n.item.subLabel)}}function p(e,t){if(1&e&&(a.lc(0,"a",8),a.ed(1),a.cd(2,u,2,1,"span",4),a.kc()),2&e){var n=a.xc();a.Sb(1),a.gd(" ",n.item.label," "),a.Sb(1),a.Cc("ngIf",n.item.subLabel)}}function h(e,t){if(1&e&&(a.lc(0,"span",9),a.ed(1),a.kc()),2&e){var n=a.xc();a.Sb(1),a.fd(n.item.subLabel)}}var d=function(e){function t(t){return e.call(this,t)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return new(e||t)(a.fc(a.r))},t.\u0275cmp=a.Zb({type:t,selectors:[["toolbar-list-dropdown-item"]],features:[a.Rb([{provide:i.j,useExisting:Object(a.lb)((function(){return t}))}]),a.Pb],decls:5,vars:8,consts:[["tabindex","-1",1,"toolbar-dd-item-container","abs-dropdown-item","fx-center-all"],["class","nu-icon dropdown-item-select-tick",4,"ngIf"],[3,"enableHover","type","value","width","height",4,"ngIf"],["class","toolbar-dd-item-label",4,"ngIf"],["class","toolbar-dd-item-sublabel",4,"ngIf"],[1,"nu-icon","dropdown-item-select-tick"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-tick-thin"],[3,"enableHover","type","value","width","height"],[1,"toolbar-dd-item-label"],[1,"toolbar-dd-item-sublabel"]],template:function(e,t){1&e&&(a.lc(0,"li",0),a.cd(1,c,2,0,"svg",1),a.cd(2,l,1,5,"static-image",2),a.cd(3,p,3,2,"a",3),a.cd(4,h,2,1,"span",4),a.kc()),2&e&&(a.Xb("selected",t.selected)("has-icons",t.item.itemIcon&&t.item.label),a.Sb(1),a.Cc("ngIf",!(t.item.itemIcon&&t.item.label)),a.Sb(1),a.Cc("ngIf",t.item.itemIcon),a.Sb(1),a.Cc("ngIf",t.item.label),a.Sb(1),a.Cc("ngIf",t.item.subLabel))},directives:[o.t,s.a],styles:[".toolbar-dd-item-container.has-icons[_ngcontent-%COMP%]  .static-image-container{height:30px;margin-right:5px}.toolbar-dd-item-label[_ngcontent-%COMP%]{flex:1;line-height:normal}.toolbar-dd-item-sublabel[_ngcontent-%COMP%]{color:rgba(61,66,66,.6);float:right;padding-left:15px}"],changeDetection:0}),t}(i.j)},MtdZ:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Compiler=c,t.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var r=n.parse(e,t),a=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(a,t)},t.compile=function(e,t,n){void 0===t&&(t={});if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new i.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(t=a.extend({},t))||(t.data=!0);t.compat&&(t.useDepths=!0);var r=void 0;function o(){var r=n.parse(e,t),i=(new n.Compiler).compile(r,t),a=(new n.JavaScriptCompiler).compile(i,t,void 0,!0);return n.template(a)}function s(e,t){return r||(r=o()),r.call(this,e,t)}return s._setup=function(e){return r||(r=o()),r._setup(e)},s._child=function(e,t,n,i){return r||(r=o()),r._child(e,t,n,i)},s};var i=r(n("0KrK")),a=n("XVEb"),o=r(n("QSAZ")),s=[].slice;function c(){}function l(e,t){if(e===t)return!0;if(a.isArray(e)&&a.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1;return!0}}function u(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}c.prototype={compiler:c,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||!l(r.args,i.args))return!1}t=this.children.length;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=a.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){if(!this[e.type])throw new i.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,r=0;r<n;r++)this.accept(t[r]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){u(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var r=this.classifySexpr(e);"helper"===r?this.helperSexpr(e,t,n):"simple"===r?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),r=e.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,r.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var n=e.params;if(n.length>1)throw new i.default("Unsupported number of partial arguments: "+n.length,e);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var r=e.name.original,a="SubExpression"===e.name.type;a&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var o=e.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",a,r,o),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){u(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var r=e.path,i=r.parts[0],a=null!=t||null!=n;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),r.strict=!0,this.accept(r),this.opcode("invokeAmbiguous",i,a)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),a=e.path,s=a.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",r.length,s);else{if(this.options.knownHelpersOnly)throw new i.default("You specified knownHelpersOnly, but used the unknown helper "+s,e);a.strict=!0,a.falsy=!0,this.accept(a),this.opcode("invokeHelper",r.length,a.original,o.default.helpers.simpleId(a))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=o.default.helpers.scopedId(e),r=!e.depth&&!n&&this.blockParamIndex(t);r?this.opcode("lookupBlockParam",r,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,r=t.length;for(this.opcode("pushHash");n<r;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:s.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=o.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),r=!n&&o.default.helpers.helperExpression(e),i=!n&&(r||t);if(i&&!r){var a=e.path.parts[0],s=this.options;s.knownHelpers[a]?r=!0:s.knownHelpersOnly&&(i=!1)}return r?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||o.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var r=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,r)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,r){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",r),i},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var r=this.options.blockParams[t],i=r&&a.indexOf(r,e);if(r&&i>=0)return[t,i]}}}},MvFr:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("deqJ"),a=n("h1tj"),o=function(e){function t(t,n,r,i){void 0===r&&(r=!0),void 0===i&&(i=!0);var a=e.call(this,t,r,i)||this;return a.relatedMouseEvent=n,a.relatedShape=n.target,a}return Object(r.e)(t,e),t.prototype.setRelatedShape=function(e){if(e.target instanceof i.a)this.relatedShape=e.target;else if(e.currentTarget instanceof i.a)this.relatedShape=e.currentTarget;else for(var t=e.target;t&&t.parent;){if(t.parent instanceof i.a){this.relatedShape=t.parent;break}t=t.parent}},t}(a.Event)},Neki:function(e,t,n){"use strict";n.r(t),n.d(t,"RouteMatcher",(function(){return hf})),n.d(t,"baseRoutes",(function(){return df})),n.d(t,"BaseModule",(function(){return ff})),n.d(t,"playerFactory",(function(){return gf}));var r=n("D57K"),i=n("2kYt"),a=n("nIj0"),o=n("ulve"),s=n("S17y"),c=n("mFH5"),l=n("gcUQ"),u=n("3Uyd"),p=n("29Wa"),h=n("R7+U"),d=n("TMvu"),f=n("bFHC"),g=n("Cd2c"),m=n("sEIs"),v=n("/YfA"),b=n("kjSZ"),y=n("s2Ay"),x=n("C5+t"),C=n("5xGT"),w=n("NNJu"),k=n("EM62"),S=function(){function e(){}return e.\u0275mod=k.dc({type:e}),e.\u0275inj=k.cc({factory:function(t){return new(t||e)},imports:[[i.c,w.n]]}),e}(),O=n("+COk"),E=n("TLy2"),_=n("8j5Y"),I=n("C05f"),P=n("KTx3"),T=n("D1Hy"),A=n("Rk7q"),M=n("24h1"),D=n("jHi0"),j=n("crdX"),N=n("HY3P"),R=["helpButton"];function L(e,t){if(1&e){var n=k.mc();k.lc(0,"div",16),k.lc(1,"media-card",17),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc(3).trackVideoOpen(e)})),k.kc(),k.kc()}if(2&e){var r=t.$implicit;k.Sb(1),k.Cc("card",r)}}function F(e,t){if(1&e){var n=k.mc();k.lc(0,"media-card",17),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc(3).trackVideoOpen(e)})),k.kc()}if(2&e){var r=t.$implicit;k.Cc("card",r)}}function B(e,t){if(1&e&&(k.lc(0,"div",12),k.lc(1,"perfect-scrollbar"),k.cd(2,L,2,1,"div",13),k.lc(3,"div",14),k.cd(4,F,1,1,"media-card",15),k.kc(),k.kc(),k.kc()),2&e){var n=k.xc(2);k.Sb(2),k.Cc("ngForOf",n.largeVideos),k.Sb(2),k.Cc("ngForOf",n.smallVideos)}}function V(e,t){if(1&e&&(k.lc(0,"div",9),k.lc(1,"div",10),k.Ac(2),k.kc(),k.cd(3,B,5,2,"div",11),k.yc(4,"async"),k.lc(5,"div",10),k.Ac(6,1),k.kc(),k.kc()),2&e){var n=k.xc();k.Sb(3),k.Cc("ngIf",k.zc(4,1,n.showVideos))}}var z=[[["","search",""]],[["","helpbuttons",""]]],U=["[search]","[helpbuttons]"],G=function(){function e(e,t,n,r){this.elRef=e,this.change=t,this.state=n,this.translate=r,this.showing=new I.a(!1),this.showVideos=new I.a(!0)}return Object.defineProperty(e.prototype,"largeVideos",{get:function(){return A.a.filter((function(e){return"large"===e.size}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"smallVideos",{get:function(){return A.a.filter((function(e){return"small"===e.size}))},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;Object(P.a)(this.helpButtonElem.nativeElement,"click").pipe(Object(E.a)((function(){return e.showing.value?e.closeWidget():e.showWidget()}))).subscribe()},e.prototype.closeWidget=function(){var e=this;return this.hideAnimation(this.elRef.nativeElement.firstElementChild.children[0]).start().pipe(Object(_.a)({complete:function(){return e.showing.next(!1)}}))},e.prototype.closeOpenIconClick=function(){this.showing.value?T.a.track("helpWidget.icon.click",{value1:"close"}):T.a.track("helpWidget.icon.click",{value1:"open"})},e.prototype.trackVideoOpen=function(e){T.a.track("n.helpWidget.videos.videoTile.click",{value1Type:"mediaTitle",value1:e.name})},e.prototype.showWidget=function(){return this.state.set("FloatingMedia",{open:!1}),this.showing.next(!0),this.change.detectChanges(),this.showAnimation(this.elRef.nativeElement.firstElementChild.children[0]).start()},e.prototype.showAnimation=function(e){var t=new O.a({from:{transform:"translateY(30px)",opacity:"0"},to:{transform:"translateY(0)",opacity:"1"},transitionProperty:"transform, opacity",duration:100,easing:"linear"});return t.element=e,t},e.prototype.hideAnimation=function(e){var t=new O.a({from:{transform:"translateY(0)",opacity:"1"},to:{transform:"translateY(30px)",opacity:"0"},transitionProperty:"transform, opacity",duration:100,easing:"linear"});return t.element=e,t},e.\u0275fac=function(t){return new(t||e)(k.fc(k.r),k.fc(k.j),k.fc(M.a),k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["help-widget"]],viewQuery:function(e,t){var n;(1&e&&k.jd(R,!0),2&e)&&(k.Lc(n=k.uc())&&(t.helpButtonElem=n.first))},inputs:{heading:"heading"},ngContentSelectors:U,decls:14,vars:14,consts:[[1,"help-widget-container","fx-pointer-events-auto"],["class","help-widget-cards-container",4,"ngIf"],["tooltip","","placement","top",1,"help-widget-button","fx-button","fx-round","nu2-btn-primary",3,"click"],["helpButton",""],[1,"nu-icon","nu-icon-help","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-help"],[1,"nu-icon","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"tooltip-content"],[1,"help-widget-cards-container"],[1,"help-widget-cards"],["class","help-videos",4,"ngIf"],[1,"help-videos"],["class","large-video-cards",4,"ngFor","ngForOf"],[1,"small-video-cards"],[3,"card","click",4,"ngFor","ngForOf"],[1,"large-video-cards"],[3,"card","click"]],template:function(e,t){1&e&&(k.Bc(z),k.lc(0,"div",0),k.cd(1,V,7,3,"div",1),k.yc(2,"async"),k.lc(3,"button",2,3),k.tc("click",(function(){return t.closeOpenIconClick()})),k.wc(),k.lc(5,"svg",4),k.yc(6,"async"),k.gc(7,"use",5),k.kc(),k.lc(8,"svg",6),k.yc(9,"async"),k.gc(10,"use",7),k.kc(),k.vc(),k.lc(11,"div",8),k.ed(12),k.yc(13,"async"),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(1),k.Cc("ngIf",k.zc(2,6,t.showing)),k.Sb(4),k.Xb("show",!k.zc(6,8,t.showing)),k.Sb(3),k.Xb("show",k.zc(9,10,t.showing)),k.Sb(4),k.gd(" ",k.zc(13,12,t.translate.get("TOOLTIPS.HELP"))," "))},directives:[i.t,D.a,j.b,i.s,N.a],pipes:[i.b],styles:[".help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card{border:1px solid #d3d3e7;border-radius:4px;box-shadow:0 2px 2px #c3c3de;padding:20px;margin-bottom:20px}.help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card h2{font-size:16px}.help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card-btn{font-size:14px;height:40px}.help-widget-cards-container[_ngcontent-%COMP%]  .help-widget-card-text{line-height:20px}.help-widget-button[_ngcontent-%COMP%]{box-shadow:0 12px 32px rgba(0,0,0,.05),0 8px 10px rgba(0,0,0,.05),0 2px 2px rgba(0,0,0,.05);height:48px;width:48px}.help-widget-button[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{height:0;width:0;transition:transform .3s linear;transform:scale(0)}.help-widget-button[_ngcontent-%COMP%]   .nu-icon.show[_ngcontent-%COMP%], .help-widget-button[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px;transform:scale(2)}.help-widget-button[_ngcontent-%COMP%]   .nu-icon-help.show[_ngcontent-%COMP%], .help-widget-button[_ngcontent-%COMP%]   .nu-icon-help[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1);stroke-width:1.5}.help-widget-container[_ngcontent-%COMP%]{z-index:2;display:flex;align-items:flex-end;flex-direction:column;position:relative}.help-widget-cards-container[_ngcontent-%COMP%]{transition-property:transform,opacity;width:290px;background:#fff;box-shadow:0 8px 24px rgba(0,0,0,.05),0 4px 8px rgba(0,0,0,.05),0 2px 2px rgba(0,0,0,.05);border-radius:8px;overflow:auto;padding:16px;opacity:0;transform:translateY(30px);position:absolute;bottom:55px}.help-widget-header[_ngcontent-%COMP%]{color:#fff}.help-widget-header-msg[_ngcontent-%COMP%]{font-size:18px;color:#04263d;padding-top:4%}.help-videos[_ngcontent-%COMP%]{flex:1;flex-direction:column}.help-videos[_ngcontent-%COMP%], .help-videos[_ngcontent-%COMP%]  perfect-scrollbar{max-height:45vh}.large-video-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column}.large-video-cards[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.small-video-cards[_ngcontent-%COMP%]{display:inline-flex;flex-wrap:wrap;gap:15px;margin-top:15px}.small-video-cards[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}"],changeDetection:0}),e}(),H=n("lNpM"),Y=function(){function e(e){this.translate=e,this.openChatWidget=new k.t,this.contactUsUrl=H.a.get("ZENDESK_CONTACT_US_URL")}return e.prototype.openChat=function(){T.a.track("helpwidget.buttons.contact.click"),this.openChatWidget.next(!0)},e.\u0275fac=function(t){return new(t||e)(k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["help-card-contact-us"]],outputs:{openChatWidget:"openChatWidget"},decls:11,vars:9,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"contact-us-container","fx-margin-bottom-20","fx-margin-top-20"],[1,"help-widget-card-text","grey"],[1,"help-widget-card-btn","nu-btn-med","fx-button","primary","fx-span-width","fx-no-margin",3,"click"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.lc(1,"h2",1),k.ed(2),k.yc(3,"async"),k.kc(),k.lc(4,"div",2),k.lc(5,"p",3),k.ed(6),k.yc(7,"async"),k.kc(),k.kc(),k.lc(8,"button",4),k.tc("click",(function(){return t.openChat()})),k.ed(9),k.yc(10,"async"),k.kc(),k.kc()),2&e&&(k.Sb(2),k.fd(k.zc(3,3,t.translate.get("HELP.START_CONVERSATION"))),k.Sb(4),k.gd(" ",k.zc(7,5,t.translate.get("HELP.WE_GET_BACK"))," "),k.Sb(3),k.fd(k.zc(10,7,t.translate.get("HELP.NEW_CONVERSATION"))))},pipes:[i.b],encapsulation:2,changeDetection:0}),e}(),q=["*"],W=function(){function e(e){this.translate=e}return e.\u0275fac=function(t){return new(t||e)(k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["help-card-faq"]],ngContentSelectors:q,decls:10,vars:6,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"links-container","fx-margin-bottom-20","fx-margin-top-20"],["href","https://support.creately.com/hc/en-us/sections/360000105656-FAQ","target","_blank"],[1,"help-widget-card-btn","nu-btn-med","fx-button","primary","fx-span-width","fx-no-margin"]],template:function(e,t){1&e&&(k.Bc(),k.lc(0,"div",0),k.lc(1,"h2",1),k.ed(2),k.yc(3,"async"),k.kc(),k.lc(4,"div",2),k.Ac(5),k.kc(),k.lc(6,"a",3),k.lc(7,"button",4),k.ed(8),k.yc(9,"async"),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(2),k.fd(k.zc(3,2,t.translate.get("HELP.HAVE_QUESTION"))),k.Sb(6),k.fd(k.zc(9,4,t.translate.get("HELP.SEE_FAQ"))))},pipes:[i.b],styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:30px;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:20px}"],changeDetection:0}),e}(),X=["*"],K=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Zb({type:e,selectors:[["help-card-feature-request"]],ngContentSelectors:X,decls:8,vars:0,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"links-container","fx-margin-bottom-20","fx-margin-top-20"],["href","https://support.creately.com/hc/en-us/community/topics/360000014675-Feature-Requests-Creately-Next-","target","_blank"],[1,"help-widget-card-btn","nu-btn-med","fx-button","primary","fx-span-width","fx-no-margin"]],template:function(e,t){1&e&&(k.Bc(),k.lc(0,"div",0),k.lc(1,"h2",1),k.ed(2,"Need a feature?"),k.kc(),k.lc(3,"div",2),k.Ac(4),k.kc(),k.lc(5,"a",3),k.lc(6,"button",4),k.ed(7,"Request a Feature"),k.kc(),k.kc(),k.kc())},styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:30px;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:20px}"],changeDetection:0}),e}(),Z=n("g6G6"),$=["welcomeMsgcontainer"],Q=["welcomeMsgPanel"],J=function(){function e(){this.closeMessage=new k.t,this.animSub=[]}return e.prototype.ngOnInit=function(){var e=Object(Z.a)(this.fadeContainer("0","1").start(),this.slidePanel("translate3d(100%, 0, 0)","translate3d(0, 0, 0)").start()).subscribe();this.animSub.push(e)},e.prototype.closeWelcomeMsg=function(){var e=this,t=Object(Z.a)(this.fadeContainer("1","0").start(),this.slidePanel("translate3d(0, 0, 0)","translate3d(100%, 0, 0)").start()).subscribe({complete:function(){return e.closeMessage.next(!0)}});this.animSub.push(t)},e.prototype.ngOnDestroy=function(){for(;this.animSub.length>0;)this.animSub.pop().unsubscribe()},e.prototype.fadeContainer=function(e,t){var n=new O.a({from:{opacity:e},to:{opacity:t},transitionProperty:"opacity",duration:200,easing:"ease-in-out"});return n.element=this.container.nativeElement,n},e.prototype.slidePanel=function(e,t){var n=new O.a({from:{transform:e},to:{transform:t},transitionProperty:"transform",duration:200,easing:"ease-out"});return n.element=this.panel.nativeElement,n},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Zb({type:e,selectors:[["welcome-message"]],viewQuery:function(e,t){var n;(1&e&&(k.jd($,!0),k.jd(Q,!0)),2&e)&&(k.Lc(n=k.uc())&&(t.container=n.first),k.Lc(n=k.uc())&&(t.panel=n.first))},outputs:{closeMessage:"closeMessage"},decls:25,vars:0,consts:[[1,"welcome-container","modal-window-container","fx-cover"],["welcomeMsgcontainer",""],[1,"welcome-inner","modal-window-right"],["welcomeMsgPanel",""],[1,"modal-window-close"],[1,"fx-button","fx-icon",3,"click"],[1,"nu-icon","nu-ic-close","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"welcome-message"],[1,"fx-margin-bottom-20","fx-center","white"],[1,"welcome-paras","fx-margin-bottom-20"],["href","https://support.creately.com/hc/en-us/sections/360000105656-FAQ","target","_blank",1,"white"],["href","https://creately1538999318.zendesk.com/hc/en-us/requests/new?app=proton&product=creately_next","target","_blank",1,"white"],[1,"welcome-image","fx-margin-bottom-20"]],template:function(e,t){1&e&&(k.lc(0,"div",0,1),k.lc(2,"div",2,3),k.lc(4,"div",4),k.lc(5,"button",5),k.tc("click",(function(){return t.closeWelcomeMsg()})),k.wc(),k.lc(6,"svg",6),k.gc(7,"use",7),k.kc(),k.kc(),k.kc(),k.vc(),k.lc(8,"div",8),k.lc(9,"h1",9),k.ed(10,"Thanks for Trying the Beta!"),k.kc(),k.lc(11,"div",10),k.lc(12,"p"),k.ed(13," We are very excited to let you in on our brand new, next generation Creately app. We built everything from scratch to bring you the best experience in diagramming. "),k.kc(),k.lc(14,"p"),k.ed(15," While you might find the new app much better in many ways, it is important to note that this is still in it\u2019s infant stage. We are working hard to bring you more features and diagram types, and we will keep updating as we have more. "),k.kc(),k.lc(16,"p"),k.ed(17," If you have questions check out the "),k.lc(18,"a",11),k.ed(19,"FAQ"),k.kc(),k.ed(20," or "),k.lc(21,"a",12),k.ed(22,"talk to us"),k.kc(),k.ed(23,". "),k.kc(),k.kc(),k.gc(24,"div",13),k.kc(),k.kc(),k.kc())},styles:[".welcome-container[_ngcontent-%COMP%]{top:0;right:0}.welcome-container[_ngcontent-%COMP%]   .fx-button.fx-icon[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#fff}.welcome-inner[_ngcontent-%COMP%]{width:650px;background-color:#f6aa00}.welcome-inner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px}.welcome-message[_ngcontent-%COMP%]{color:#fff;line-height:25px;padding:0 50px;display:flex;flex-direction:column;align-items:center;justify-content:center;height:calc(100% - 48px)}.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px}.welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#fff}.welcome-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.welcome-image[_ngcontent-%COMP%]{max-height:370px;min-height:200px;background:url(/d/welcome-artwork.df09f261cd38e49449a3.svg) 50% no-repeat;background-size:contain;flex:1;width:100%}"],changeDetection:0}),e}();function ee(e,t){if(1&e){var n=k.mc();k.wc(),k.vc(),k.lc(0,"div",5),k.lc(1,"h3",6),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc().openFeatureLink(e.title,e.link)})),k.ed(2),k.kc(),k.lc(3,"label",7),k.ed(4),k.kc(),k.lc(5,"p"),k.ed(6),k.kc(),k.lc(7,"a",8),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc().openFeatureLink(e.id,e.link)})),k.ed(8),k.yc(9,"async"),k.kc(),k.kc()}if(2&e){var r=t.$implicit,i=k.xc();k.Sb(2),k.fd(r.title),k.Sb(2),k.fd(r.date),k.Sb(2),k.fd(r.previewText),k.Sb(2),k.fd(k.zc(9,4,i.translate.get("HELP.LEARN_MORE")))}}var te=function(){function e(e){this.translate=e,this.data=[]}return Object.defineProperty(e.prototype,"translatedData",{get:function(){var e=this;return this.data.map((function(t){return t.title=e.translate.instant(t.title),t.date=e.translate.instant(t.date),t.previewText=e.translate.instant(t.previewText),t}))},enumerable:!1,configurable:!0}),e.prototype.openFeatureLink=function(e,t){window.open(t,"_blank"),T.a.track("helpwidget.feature.article.click",{value1Type:"articleName",value1:e})},e.\u0275fac=function(t){return new(t||e)(k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["feature-update-card"]],inputs:{data:"data"},decls:7,vars:4,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10","fx-center-vertical"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-present"],["class","feature-update-item-container",4,"ngFor","ngForOf"],[1,"feature-update-item-container"],[1,"nu-text-primary","nu-text-bold",3,"click"],[1,"nu-text-small","grey"],[1,"primary",3,"click"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.lc(1,"h2",1),k.wc(),k.lc(2,"svg",2),k.gc(3,"use",3),k.kc(),k.ed(4),k.yc(5,"async"),k.kc(),k.cd(6,ee,10,6,"div",4),k.kc()),2&e&&(k.Sb(4),k.gd(" ",k.zc(5,2,t.translate.get("HELP.WHATS_NEW"))," "),k.Sb(2),k.Cc("ngForOf",t.translatedData))},directives:[i.s],pipes:[i.b],styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:30px;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:20px}.feature-update-item-container[_ngcontent-%COMP%]{line-height:20px;margin-bottom:20px}.feature-update-item-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{cursor:pointer}.feature-update-item-container[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"],changeDetection:0}),e}();function ne(e,t){if(1&e){var n=k.mc();k.lc(0,"button",3),k.tc("click",(function(){return k.Pc(n),k.xc().emitButtonClicked("contact")})),k.lc(1,"span",4),k.wc(),k.lc(2,"svg",5),k.gc(3,"use",7),k.kc(),k.kc(),k.ed(4),k.yc(5,"async"),k.kc()}if(2&e){var r=k.xc();k.Sb(4),k.gd(" ",k.zc(5,1,r.translate.get("HELP.SUPPORT"))," ")}}var re=function(){function e(e){this.translate=e,this.buttonClicked=new k.t,this.showSupportButton=!1}return e.prototype.emitButtonClicked=function(e){this.buttonClicked.next(e)},e.\u0275fac=function(t){return new(t||e)(k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["help-buttons-card"]],inputs:{showSupportButton:"showSupportButton"},outputs:{buttonClicked:"buttonClicked"},decls:9,vars:4,consts:[[1,"help-buttons-container"],[1,"help-buttons-bottom"],["class","help-button-med nu-btn-small nu-text-xsmall",3,"click",4,"ngIf"],[1,"help-button-med","nu-btn-small","nu-text-xsmall",3,"click"],[1,"help-button-icon"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-help-center"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-comment"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.lc(1,"div",1),k.cd(2,ne,6,3,"button",2),k.lc(3,"button",3),k.tc("click",(function(){return t.emitButtonClicked("search")})),k.lc(4,"span",4),k.wc(),k.lc(5,"svg",5),k.gc(6,"use",6),k.kc(),k.kc(),k.ed(7),k.yc(8,"async"),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(2),k.Cc("ngIf",t.showSupportButton),k.Sb(5),k.gd(" ",k.zc(8,2,t.translate.get("HELP.HELP_CENTER"))," "))},directives:[i.t],pipes:[i.b],styles:[".links-container[_ngcontent-%COMP%]  a{margin-bottom:30px;display:block}.links-container[_ngcontent-%COMP%]  a:last-of-type{margin-bottom:20px}.help-buttons-container[_ngcontent-%COMP%]{justify-content:space-between;margin-top:15px}.help-button-contact[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:12px 24px;width:312px;height:44px;margin:0;background:rgba(81,192,170,.2)}.help-buttons-top[_ngcontent-%COMP%]{padding-bottom:24px}.help-buttons-bottom[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:flex-start}.help-button-med[_ngcontent-%COMP%]{background:#fff;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:8px 0;width:258px;height:40px;color:rgba(61,66,66,.6)}.help-button-med[_ngcontent-%COMP%]:hover{background:rgba(81,192,170,.2);color:#29947f}.help-button-med[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#51c0aa}.help-button-icon[_ngcontent-%COMP%]{padding-right:8px}"],changeDetection:0}),e}(),ie=function(){function e(e){this.translate=e,this.buttonClicked=new k.t}return Object.defineProperty(e.prototype,"iconURL",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this.icon},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translatedLabel",{get:function(){return this.translate.instant(this.label)},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["help-link-button"]],inputs:{label:"label",value:"value",icon:"icon"},outputs:{buttonClicked:"buttonClicked"},decls:7,vars:2,consts:[[1,"help-link-button-container","help-widget-card","white",3,"click"],[1,"nu-icon","nu-icon-med"],[1,"help-link-button-arrow","nu-icon","grey","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-collapse-thin"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.tc("click",(function(){return t.buttonClicked.next(!0)})),k.wc(),k.lc(1,"svg",1),k.gc(2,"use"),k.kc(),k.vc(),k.lc(3,"a"),k.ed(4),k.kc(),k.wc(),k.lc(5,"svg",2),k.gc(6,"use",3),k.kc(),k.kc()),2&e&&(k.Sb(2),k.Tb("href",t.iconURL,null,"xlink"),k.Sb(2),k.fd(t.translatedLabel))},styles:[".help-link-button-container[_ngcontent-%COMP%]{padding-right:50px;cursor:pointer;display:flex;align-items:center;position:relative}.help-link-button-container[_ngcontent-%COMP%]:hover, .help-link-button-container[_ngcontent-%COMP%]:hover   .nu-icon[_ngcontent-%COMP%]{color:#61a15e}.help-link-button-container[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:10px}.help-link-button-arrow[_ngcontent-%COMP%]{position:absolute;right:10px}"],changeDetection:0}),e}(),ae=n("Wrqg"),oe=function(){return["Enter"]},se=function(){function e(e){this.translate=e,this.submitSearchText=new k.t,this.changeHelpSearch=new k.t}return e.prototype.submitHelpSearch=function(e){T.a.track("helpWidget.search.term.submit",{value1:e}),this.submitSearchText.next(e)},e.prototype.updateHelpSearch=function(e){this.changeHelpSearch.next(e)},e.\u0275fac=function(t){return new(t||e)(k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["help-article-search"]],outputs:{submitSearchText:"submitSearchText",changeHelpSearch:"changeHelpSearch"},decls:4,vars:4,consts:[[1,"help-search-container"],["icon","search-large","placeholder","Search help documents",1,"help-search",3,"showClearButton","submitOnCode","emitForInputChange","updateText","submit"],["textInput",""]],template:function(e,t){1&e&&(k.lc(0,"div"),k.lc(1,"div",0),k.lc(2,"text-input",1,2),k.tc("updateText",(function(e){return t.updateHelpSearch(e)}))("submit",(function(e){return t.submitHelpSearch(e)})),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(2),k.Cc("showClearButton",!0)("submitOnCode",k.Gc(3,oe))("emitForInputChange",!0))},directives:[ae.a],styles:[".help-search-header-msg[_ngcontent-%COMP%]{font-size:18px;color:#04263d;padding-top:10%}.help-search-container[_ngcontent-%COMP%]{flex-grow:1}.help-search[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 0}.help-search[_ngcontent-%COMP%]  input{height:44px!important}.help-search[_ngcontent-%COMP%]  .text-input-icon{top:12px!important}.help-search[_ngcontent-%COMP%]  .text-input-clear-btn{top:18px!important}"],changeDetection:0}),e}();function ce(e,t){if(1&e&&(k.lc(0,"div",4),k.lc(1,"div",5),k.ed(2),k.yc(3,"async"),k.kc(),k.lc(4,"span",6),k.ed(5),k.yc(6,"async"),k.kc(),k.kc()),2&e){var n=k.xc();k.Sb(2),k.hd("",k.zc(3,3,n.translate.get("HELP.HELP_RESULT_DEFAULT_ERROR_MAIN"))," \u201c",n.helpSearchText,"\u201d"),k.Sb(3),k.fd(k.zc(6,5,n.translate.get("HELP.HELP_RESULT_DEFAULT_ERROR_SUB")))}}function le(e,t){if(1&e){var n=k.mc();k.lc(0,"li"),k.lc(1,"a",7),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc().onArticleClick(e.title)})),k.lc(2,"span",8),k.wc(),k.lc(3,"svg",9),k.gc(4,"use",10),k.kc(),k.kc(),k.ed(5),k.kc(),k.vc(),k.gc(6,"hr",11),k.kc()}if(2&e){var r=t.$implicit;k.Sb(1),k.Dc("href",r.url,k.Sc),k.Sb(4),k.gd(" ",r.title," ")}}var ue=function(){function e(e){this.translate=e,this.searchResult=[]}return e.prototype.onArticleClick=function(e){T.a.track("helpWidget.feature.article.click",{value1:e})},e.\u0275fac=function(t){return new(t||e)(k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["help-search-result"]],inputs:{searchResult:"searchResult",helpSearchText:"helpSearchText",isDefaultSearchResult:"isDefaultSearchResult"},decls:4,vars:2,consts:[[1,"help-search-result-main"],["class","help-search-result-default-msg",4,"ngIf"],[1,"help-search-result-list"],[4,"ngFor","ngForOf"],[1,"help-search-result-default-msg"],[1,"help-search-result-default-msg-main"],[1,"help-search-result-default-msg-sub"],["target","_blank",1,"help-serach-result-link",3,"href","click"],[1,"help-search-resul-icon"],[1,"nu-icon","nu-icon-small"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notepad"],[1,"help-search-result-line"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.cd(1,ce,7,7,"div",1),k.lc(2,"ul",2),k.cd(3,le,7,2,"li",3),k.kc(),k.kc()),2&e&&(k.Sb(1),k.Cc("ngIf",t.isDefaultSearchResult),k.Sb(2),k.Cc("ngForOf",t.searchResult))},directives:[i.t,i.s],pipes:[i.b],styles:[".help-search-result-main[_ngcontent-%COMP%]{padding-top:16px}.help-search-result-list[_ngcontent-%COMP%]{list-style-type:none}.help-search-result-line[_ngcontent-%COMP%]{left:0;right:0;border:1px solid rgba(202,204,206,.5);margin:5px 0}.help-serach-result-link[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px;color:rgba(20,40,46,.8);padding:5px 0 5px 3px;border-radius:2px;font-weight:700}.help-serach-result-link[_ngcontent-%COMP%]:hover{background:rgba(81,192,170,.2)}.help-serach-result-link[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#51c0aa}.help-search-resul-icon[_ngcontent-%COMP%]{padding-right:8px}.help-search-result-default-msg[_ngcontent-%COMP%]{text-align:center;padding-bottom:24px}.help-search-result-default-msg-main[_ngcontent-%COMP%]{font-size:16px;padding-bottom:3px}.help-search-result-default-msg-sub[_ngcontent-%COMP%]{font-size:13px;color:rgba(98,104,106,.5)}.help-search-result-line-default[_ngcontent-%COMP%]{left:0;right:0;border:1px solid rgba(202,204,206,.5)}"],changeDetection:0}),e}(),pe=n("X0jn"),he=n("Jzy8"),de=n("19Zn"),fe=n("4y1S"),ge=n("Nh1y"),me=n.n(ge),ve=n("PRnZ"),be=n("sRHE"),ye=n("8K1b"),xe=n("AqVP"),Ce=n("zygG"),we=n("9fIP"),ke=n("MMYH"),Se=n("GoAz"),Oe=n("ROBh"),Ee=n("VvXq"),_e=n("ZTXN"),Ie=n("i9xl"),Pe=n("IdLP"),Te=n("YtkY"),Ae=n("Lrfq"),Me=n("i7Dj"),De=n("A2S1"),je=n("xVbo"),Ne=n("kuMc"),Re=n("e4iD"),Le=["container"],Fe=new k.B("LottieOptions");var Be=function(){function e(t,n){var r,i;Object(we.a)(this,e),this.ngZone=t,this.options=n,this.player$=(r=this.options.player,i=r(),i instanceof Promise?Object(Se.a)(i).pipe(Object(Te.a)((function(e){return e.default||e})),Object(Ae.a)(1),Object(Me.a)()):Object(Oe.a)(i)).pipe(Object(De.b)(Ee.a))}return Object(ke.a)(e,[{key:"loadAnimation",value:function(e){var t=this;return this.player$.pipe(Object(Te.a)((function(n){return t.createAnimationItem(n,e)})))}},{key:"resolveOptions",value:function(e,t){return Object.assign({container:t,renderer:"svg",loop:!0,autoplay:!0},e)}},{key:"createAnimationItem",value:function(e,t){return this.ngZone.runOutsideAngular((function(){return e.loadAnimation(t)}))}}]),e}();Be.\u0275fac=function(e){return new(e||Be)(k.pc(k.M),k.pc(Fe))},Be.\u0275prov=k.bc({token:Be,factory:Be.\u0275fac}),Be.ctorParameters=function(){return[{type:k.M},{type:void 0,decorators:[{type:k.y,args:[Fe]}]}]};var Ve=function(){function e(t,n,r){Object(we.a)(this,e),this.ngZone=t,this.platformId=n,this.animationLoader=r,this.options=null,this.containerClass=null,this.styles=null,this.animationCreated=this.getAnimationItem(),this.complete=this.awaitAnimationItemAndStartListening("complete"),this.loopComplete=this.awaitAnimationItemAndStartListening("loopComplete"),this.enterFrame=this.awaitAnimationItemAndStartListening("enterFrame"),this.segmentStart=this.awaitAnimationItemAndStartListening("segmentStart"),this.configReady=this.awaitAnimationItemAndStartListening("config_ready"),this.dataReady=this.awaitAnimationItemAndStartListening("data_ready"),this.domLoaded=this.awaitAnimationItemAndStartListening("DOMLoaded"),this.destroy=this.awaitAnimationItemAndStartListening("destroy"),this.error=this.awaitAnimationItemAndStartListening("error"),this.destroy$=new _e.a,this.loadAnimation$=new _e.a,this.animationItem$=new I.a(null),this.setupLoadAnimationListener()}return Object(ke.a)(e,[{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroyAnimation()}},{key:"loadAnimation",value:function(e,t){this.loadAnimation$.next([e,t])}},{key:"getAnimationItem",value:function(){var e=this;return Object(Ie.a)((function(){return e.animationItem$})).pipe(Object(je.a)((function(e){return null!==e})))}},{key:"awaitAnimationItemAndStartListening",value:function(e){var t=this;return this.getAnimationItem().pipe(Object(E.a)((function(n){return new Pe.a((function(r){n.addEventListener(e,(function(e){t.ngZone.runOutsideAngular((function(){r.next(e)}))}))}))})))}},{key:"setupLoadAnimationListener",value:function(){var e=this;this.loadAnimation$.pipe(Object(je.a)((function(t){var n=Object(Ce.a)(t,1)[0];return Object(i.I)(e.platformId)&&void 0!==n.options})),Object(E.a)((function(t){var n=Object(Ce.a)(t,2),r=n[0],i=n[1];return e.destroyAnimation(),e.animationLoader.loadAnimation(e.animationLoader.resolveOptions(r.options.currentValue,i))})),Object(Ne.a)(this.destroy$)).subscribe((function(t){e.animationItem$.next(t)}))}},{key:"destroyAnimation",value:function(){var e=this.animationItem$.getValue();null!==e&&(e.destroy(),this.animationItem$.next(null))}}]),e}();Ve.\u0275fac=function(e){return new(e||Ve)(k.fc(k.M),k.fc(k.P),k.fc(Be))},Ve.\u0275dir=k.ac({type:Ve,selectors:[["","lottie",""]],inputs:{options:"options",containerClass:"containerClass",styles:"styles"},outputs:{animationCreated:"animationCreated",complete:"complete",loopComplete:"loopComplete",enterFrame:"enterFrame",segmentStart:"segmentStart",configReady:"configReady",dataReady:"dataReady",domLoaded:"domLoaded",destroy:"destroy",error:"error"}}),Ve.ctorParameters=function(){return[{type:k.M},{type:String,decorators:[{type:k.y,args:[k.P]}]},{type:Be}]},Ve.propDecorators={options:[{type:k.D}],containerClass:[{type:k.D}],styles:[{type:k.D}],animationCreated:[{type:k.O}],complete:[{type:k.O}],loopComplete:[{type:k.O}],enterFrame:[{type:k.O}],segmentStart:[{type:k.O}],configReady:[{type:k.O}],dataReady:[{type:k.O}],domLoaded:[{type:k.O}],destroy:[{type:k.O}],error:[{type:k.O}]};var ze=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(e,r,i,a){var o;return Object(we.a)(this,n),(o=t.call(this,e,r,a)).host=i,o}return Object(ke.a)(n,[{key:"ngOnChanges",value:function(e){Object(ve.a)(Object(be.a)(n.prototype),"loadAnimation",this).call(this,e,this.host.nativeElement)}}]),n}(Ve);ze.\u0275fac=function(e){return new(e||ze)(k.fc(k.M),k.fc(k.P),k.fc(k.r,2),k.fc(Be))},ze.\u0275dir=k.ac({type:ze,selectors:[["","lottie",""]],features:[k.Pb,k.Qb]}),ze.ctorParameters=function(){return[{type:k.M},{type:String,decorators:[{type:k.y,args:[k.P]}]},{type:k.r,decorators:[{type:k.Z}]},{type:Be}]};var Ue=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(e,r,i){var a;return Object(we.a)(this,n),(a=t.call(this,e,r,i)).width=null,a.height=null,a.container=null,a}return Object(ke.a)(n,[{key:"ngOnChanges",value:function(e){Object(ve.a)(Object(be.a)(n.prototype),"loadAnimation",this).call(this,e,this.container.nativeElement)}}]),n}(Ve);Ue.\u0275fac=function(e){return new(e||Ue)(k.fc(k.M),k.fc(k.P),k.fc(Be))},Ue.\u0275cmp=k.Zb({type:Ue,selectors:[["ng-lottie"]],viewQuery:function(e,t){var n;(1&e&&k.Wc(Le,!0),2&e)&&(k.Lc(n=k.uc())&&(t.container=n.first))},inputs:{width:"width",height:"height"},features:[k.Pb,k.Qb],decls:2,vars:6,consts:[[3,"ngStyle","ngClass"],["container",""]],template:function(e,t){1&e&&k.gc(0,"div",0,1),2&e&&(k.Zc("width",t.width||"100%")("height",t.height||"100%"),k.Cc("ngStyle",t.styles)("ngClass",t.containerClass))},directives:[i.w,i.q],encapsulation:2,changeDetection:0}),Ue.ctorParameters=function(){return[{type:k.M},{type:String,decorators:[{type:k.y,args:[k.P]}]},{type:Be}]},Ue.propDecorators={width:[{type:k.D}],height:[{type:k.D}],container:[{type:k.gb,args:["container",{static:!0}]}]};var Ge=function(){function e(){Object(we.a)(this,e)}return Object(ke.a)(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[Be,{provide:Fe,useValue:t}]}}}]),e}();Ge.\u0275mod=k.dc({type:Ge}),Ge.\u0275inj=k.cc({factory:function(e){return new(e||Ge)},imports:[[i.c]]});var He=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(){var e;return Object(we.a)(this,n),(e=t.apply(this,arguments)).cache=new Map,e}return Object(ke.a)(n,[{key:"loadAnimation",value:function(e){var t=this;return this.player$.pipe(Object(Te.a)((function(n){var r=t.createAnimationItem(n,t.transformOptions(e));return t.awaitConfigAndCache(e,r),r})))}},{key:"awaitConfigAndCache",value:function(e,t){var n=this;if(this.isAnimationConfigWithPath(e)){if(this.cache.has(e.path))return;t.addEventListener("config_ready",(function(){n.cache.set(e.path,t.animationData)}))}}},{key:"transformOptions",value:function(e){return this.isAnimationConfigWithPath(e)&&this.cache.has(e.path)?Object.assign(Object.assign({},e),{path:void 0,animationData:this.cache.get(e.path)}):e}},{key:"isAnimationConfigWithPath",value:function(e){return"string"==typeof e.path}}]),n}(Be);He.\u0275fac=function(e){return Ye(e||He)},He.\u0275prov=k.bc({token:He,factory:He.\u0275fac});var Ye=k.nc(He),qe=function(){function e(){Object(we.a)(this,e)}return Object(ke.a)(e,null,[{key:"forRoot",value:function(){return{ngModule:e,providers:[{provide:Be,useClass:He}]}}}]),e}();qe.\u0275mod=k.dc({type:qe}),qe.\u0275inj=k.cc({factory:function(e){return new(e||qe)}});var We=function(){function e(t){Object(we.a)(this,e),this.transferState=t}return Object(ke.a)(e,[{key:"get",value:function(e){var t=function(e){var t=e.split(".json"),n=Object(Ce.a)(t,1)[0];return"animation-".concat(n)}(e),n=Object(Re.e)(t);return this.transferState.get(n,null)}}]),e}();We.\u0275fac=function(e){return new(e||We)(k.pc(Re.d))},We.\u0275prov=k.bc({factory:function(){return new We(k.pc(Re.d))},token:We,providedIn:"root"}),We.ctorParameters=function(){return[{type:Re.d}]};var Xe=n("A7ZO"),Ke=n("54H5"),Ze=n("XRvk"),$e=n("XfZi"),Qe=n("lP4r"),Je=n("Ax/4"),et=n("6T0K"),tt=n("Kz6v"),nt=n("CSUU"),rt=n("kUiX"),it=n("c7W3"),at=n("7SLS"),ot=n("4e/d"),st=n("Bbfy"),ct=function(){function e(e,t,n){this.commandService=e,this.notifierController=t,this.translate=n,this.maxFileSize=5e6,this.notificationMessages=new st.a(this.translate)}return e.getAllowedTypes=function(){return["image/png","image/jpeg","image/jpg","image/gif","image/bmp","image/x-icon","image/svg+xml"]},e.prototype.detect=function(t){if(t){var n=e.getAllowedTypes();for(var r in n)if(t.type===n[r])return this.validate(t)}return Object(Oe.a)(!1)},e.prototype.trigger=function(e,t){if(e){var n=[],r=t?t.position:null;return n.push(e),t&&t.upload?this.commandService.dispatch(it.a.importImageAndUpload,void 0,{files:n,position:r}).pipe(Object(at.a)(!0),Object(ot.a)((function(){return Object(Oe.a)(!1)}))):this.commandService.dispatch(it.a.importImage,void 0,{files:n,position:r}).pipe(Object(at.a)(!0),Object(ot.a)((function(){return Object(Oe.a)(!1)})))}return Object(Oe.a)(!1)},e.prototype.validate=function(e){if(e){if(e.size<=this.maxFileSize)return Object(Oe.a)(!0);var t=this.notificationMessages.getNotificationMessage(st.b.IMAGE_IMPORT_SIZE_EXCEEDED);this.notifierController.show(st.b.IMAGE_IMPORT_SIZE_EXCEEDED,t.component,t.type,t.options,t.collapsed)}return Object(Oe.a)(!1)},e.\u0275fac=function(t){return new(t||e)(k.pc(C.B),k.pc(C.kb),k.pc(y.e))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),lt=n("mQR/"),ut=n("1PcF"),pt=n("BpNY"),ht=n("uWBd"),dt=n("W0Mc"),ft=n("9KTM"),gt=n("2zxM"),mt=n("13fK"),vt=n("zFpY"),bt=n("SBjo"),yt=n("C3qL"),xt=n("aSB4"),Ct=n("euU2"),wt=n("QWbt"),kt=n("ZyLw"),St=n("u7ZA"),Ot=n("Di8k"),Et=n("OOUj"),_t=n("BQpn"),It=n("oK6n"),Pt=n("aSzn"),Tt=n("AM7v"),At=n("CrNP"),Mt=n("xcrX"),Dt=n("nzws"),jt=n("B82N"),Nt=(n("kWt5"),function(){function e(){}return e.prototype.shapeTransform=function(e,t){var n=e.minBounds;if(e.isContainer&&!n&&(n={width:20,height:20}),!n||!n.width&&!n.height)return t;var r=e.isFlippable("H"),i=e.isFlippable("V");return t.scaleX=this.limitScale(r,e.defaultBounds.width,n.width,e.scaleX,t.scaleX),t.scaleY=this.limitScale(i,e.defaultBounds.height,n.height,e.scaleY,t.scaleY),t},e.prototype.limitScale=function(e,t,n,r,i){if(n>0){var a=n/t,o=!e||i.value>-a;r>0&&i.value<a&&o&&(1!==i.high&&i.value+i.high>a?(i.value=i.value+i.high,i.low=i.value-a):(i.value=a,i.low=0)),r<0&&i.value<a&&o&&(i.value=-a),1!==i.low&&i.value-i.low<a&&(i.low=0)}return i},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}()),Rt=n("qT6J"),Lt=n("LZHD"),Ft=n("umwn"),Bt=n("bL7E"),Vt=n("ZhQg"),zt=n("/nnd"),Ut=n("jw4I"),Gt=n("6qzS"),Ht=n("ZC55"),Yt=n("AaYA"),qt=n("ZZOX"),Wt=n("qonV"),Xt=n("mWib"),Kt=n("wkcE"),Zt=n("7zx0"),$t=n("BwBJ"),Qt=n("J+dc"),Jt=n("Ohay"),en=n("vz8n"),tn=n("nsO7"),nn=function(){function e(e,t,n,r,i){var a=this;this.state=e,this.pluginReg=t,this.user=n,this.collabLocator=r,this.realtimeService=i,this.startConnectionDelay=5e3,this.userStatus={},this.handleIncomingMessages=function(e){if(e&&"object"==typeof e){var t=e,n=t.event,r=t.data,i=a.currentConference.value&&a.currentConference.value.room?a.currentConference.value.room:void 0;n===en.ConferenceEvents.conferenceConnectionSuccess?a.onConferenceConnected():n===en.ConferenceEvents.conferenceDisconected?a.onConferenceDisconnected(i,r):n===en.ConferenceEvents.conferenceError?a.onConferenceError(i,r):n===en.ConferenceEvents.conferenceUserListChanged?a.onUserListChange(r):C.db.error("Unhandled Conference Event",n)}},this.currentConference=new I.a(void 0),this.userCount=new I.a(1),this.listenToConnectionStart()}return Object.defineProperty(e.prototype,"manifestUrl",{get:function(){return this.axionManifestUrl||(this.axionManifestUrl=C.m.get("PLUGIN_AXION_MANIFEST")),this.axionManifestUrl},enumerable:!1,configurable:!0}),e.prototype.startConference=function(){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(e){switch(e.label){case 0:return[4,this.pluginReg.load(this.manifestUrl)];case 1:return e.sent(),0===this.userCount.value&&this.userCount.next(1),this.messageSub=this.pluginReg.recieveMessages(this.axionManifestUrl).subscribe(this.handleIncomingMessages),this.pluginReg.sendMessage(en.ConferenceCommands.conferenceStart,{room:this.state.get("CurrentDiagram")},this.axionManifestUrl),this.currentConference.next({room:this.state.get("CurrentDiagram"),status:"connecting"}),[2]}}))}))},e.prototype.stopConference=function(e){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(t){return this.messageSub.unsubscribe(),this.messageSub=void 0,this.pluginReg.sendMessage(en.ConferenceCommands.conferenceStop,{room:this.currentConference.value.room},this.axionManifestUrl),e?this.currentConference.next(void 0):this.currentConference.next({room:this.currentConference.value.room,status:"disconnected"}),this.updateUserCount(),this.pluginReg.unload(this.axionManifestUrl),[2]}))}))},e.prototype.listenToConnectionStart=function(){var e=this;this.state.changes("RealtimeConnectionStatus").pipe(Object(je.a)((function(e){return e===Zt.a.ONLINE})),Object($t.a)(this.startConnectionDelay),Object(Qt.a)(1)).subscribe((function(t){e.start()}))},e.prototype.start=function(){this.listenToConferenceChanges(),this.listenToRealtimeChannel(),this.listenToCollabChanges(),this.listenToDocumentChanges()},e.prototype.switch=function(){this.currentConference.value&&("joined"===this.currentConference.value.status&&this.stopConference(!0),this.currentConference.next(void 0)),this.annouceJoin()},e.prototype.annouceJoin=function(){C.db.debug("Conference Service - announcing join."),this.realtimeService.set(e.KEY_CONFERENCE_STATUS,e.CONFERENCE_ANNOUNCE)},e.prototype.listenToDocumentChanges=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(je.a)((function(e){return Boolean(e)})),Object(Jt.a)(),Object(_.a)((function(t){return e.switch()}))).subscribe()},e.prototype.listenToConferenceChanges=function(){var t=this;return this.currentConference.pipe(Object(je.a)((function(e){return!!e})),Object(Jt.a)(),Object(_.a)((function(n){t.realtimeService.set(e.KEY_CONFERENCE_STATUS,n.status)}))).subscribe()},e.prototype.listenToRealtimeChannel=function(){var t=this;return this.realtimeService.get(e.KEY_CONFERENCE_STATUS).pipe(Object(Jt.a)(),Object(_.a)((function(n){n.value===e.CONFERENCE_ANNOUNCE?t.currentConference.value&&"joined"===t.currentConference.value.status&&t.realtimeService.set(e.KEY_CONFERENCE_STATUS,"joined"):t.updateConferenceStatus(n.userId,n.value)}))).subscribe()},e.prototype.listenToCollabChanges=function(){var t=this;return this.collabLocator.getCollabs().pipe(Object(Jt.a)((function(e,t){return Object(tn.filter)(e,(function(e){return e.online})).length===Object(tn.filter)(t,(function(e){return e.online})).length}))).subscribe((function(n){t.removeDisconnectedPeers(n),t.currentConference.value&&"joined"===t.currentConference.value.status&&t.realtimeService.set(e.KEY_CONFERENCE_STATUS,"joined")}))},e.prototype.removeDisconnectedPeers=function(e){var t=this,n=Object(tn.map)(Object(tn.filter)(e,(function(e){return!e.online})),"id"),r=!1;Object(tn.each)(n,(function(e){t.userStatus[e]&&(t.userStatus[e]="disconected",r=!0)})),r&&this.currentConference.value&&"joined"!==this.currentConference.value.status&&!Object(tn.find)(this.userStatus,(function(e){return"joined"===e}))&&this.currentConference.next(void 0),this.updateUserCount()},e.prototype.updateConferenceStatus=function(e,t){t&&(this.userStatus[e]=t),"joined"===t?this.currentConference.value&&"disconnected"!==this.currentConference.value.status||this.currentConference.next({room:this.state.get("CurrentDiagram"),status:"active"}):"disconnected"!==t&&"error"!==t||!this.currentConference.value||"active"!==this.currentConference.value.status||Object(tn.find)(this.userStatus,(function(e){return"joined"===e}))||this.currentConference.next(void 0),this.updateUserCount()},e.prototype.updateUserCount=function(){if(!this.currentConference.value||"joined"!==this.currentConference.value.status){var e=Object(tn.filter)(this.userStatus,(function(e){return"joined"===e}));this.userCount.next(e.length),this.applyConferenceLimit()}},e.prototype.applyConferenceLimit=function(){this.currentConference.value&&"active"===this.currentConference.value.status&&this.userCount.value>e.MAX_CALLERS&&this.currentConference.next({room:this.state.get("CurrentDiagram"),status:"full"})},e.prototype.onConferenceConnected=function(){var e=this;this.user.getUserData().pipe(Object(je.a)((function(e){return!!e})),Object(Qt.a)(1)).subscribe((function(t){e.pluginReg.sendMessage(en.ConferenceCommands.conferenceStart,{room:e.state.get("CurrentDiagram"),name:t.fullName},e.axionManifestUrl),e.currentConference.next({room:e.state.get("CurrentDiagram"),status:"joined"})}))},e.prototype.onConferenceDisconnected=function(e,t){e&&e===t.room&&this.currentConference.next({room:e,status:"disconnected"})},e.prototype.onConferenceError=function(e,t){e&&e===t.room&&this.currentConference.next({room:e,status:"error"})},e.prototype.onUserListChange=function(e){e&&e.activeCount&&(this.userCount.next(e.activeCount),this.applyConferenceLimit())},e.KEY_CONFERENCE_STATUS="KEY_CONFERENCE_STATUS",e.CONFERENCE_ANNOUNCE="CONFERENCE_ANNOUNCE",e.MAX_CALLERS=4,e.\u0275fac=function(t){return new(t||e)(k.pc(C.Ib),k.pc(Wt.a),k.pc(fe.x),k.pc(Kt.a),k.pc(Zt.b))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),rn=["container"],an=["bottomPanelContainer"],on=function(){function e(e,t,n,r){this.pluginReg=e,this.state=t,this.conference=n,this.browserWindow=r,this.videoTileSizeSmallWidth=170,this.videoTileSizeSmallHeight=100,this.videoTileSizeLargeHeight=200,this.resizeThrottle=1e3,this.subs=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this.manifest._url},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this,t=this.pluginReg.burrowMainIframe(this.manifest._url);this.container.nativeElement.appendChild(t);var n=Object(Z.a)(this.listenToViewportChanges(),this.conference.userCount.asObservable()).pipe(Object(_.a)((function(){e.updateVideoStripWidth()}))).subscribe();this.subs.push(n)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.updateVideoStripWidth=function(){var e=this.conference.userCount.value,t=this.bottomPanelContainer.nativeElement.offsetWidth,n=this.container.nativeElement.getElementsByTagName("iframe"),r=e*this.videoTileSizeSmallWidth;n[0].style.width=r>t?t+"px":r+"px"},e.prototype.updateVideoStripHeight=function(){},e.prototype.listenToViewportChanges=function(){return Object(Z.a)(this.state.changes("LeftSidebarState").pipe(Object(je.a)((function(e){return"opened"===e||"closed"===e}))),this.state.changes("RightSidebarPanel"),Object(P.a)(this.browserWindow,"resize").pipe(Object(Xt.a)(this.resizeThrottle)))},e.\u0275fac=function(t){return new(t||e)(k.fc(Wt.a),k.fc(C.Ib),k.fc(nn),k.fc("BrowserWindow"))},e.\u0275cmp=k.Zb({type:e,selectors:[["bottom-panel"]],viewQuery:function(e,t){var n;(1&e&&(k.Wc(rn,!0),k.jd(an,!0)),2&e)&&(k.Lc(n=k.uc())&&(t.container=n.first),k.Lc(n=k.uc())&&(t.bottomPanelContainer=n.first))},inputs:{manifest:"manifest"},decls:4,vars:0,consts:[[1,"bottom-panel-container","fx-pointer-events-auto"],["bottomPanelContainer",""],[1,"plugin-iframe-container"],["container",""]],template:function(e,t){1&e&&(k.lc(0,"div",0,1),k.gc(2,"div",2,3),k.kc())},styles:[".bottom-panel-container[_ngcontent-%COMP%]{height:90px;width:100%}.plugin-iframe-container[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e}(),sn=n("QoSw"),cn=n("HM3f"),ln=n("oyCe"),un=n("bV32");function pn(e,t){1&e&&(k.wc(),k.vc(),k.gc(0,"div",9))}var hn=function(e){return{"sp-action-btn-active":e}},dn=function(e){return{"sp-action-icon-active":e}};function fn(e,t){if(1&e){var n=k.mc();k.lc(0,"button",3),k.tc("click",(function(){return k.Pc(n),k.xc().openCommentsPanel()})),k.yc(1,"async"),k.wc(),k.lc(2,"svg",4),k.yc(3,"async"),k.gc(4,"use",5),k.kc(),k.cd(5,pn,1,0,"div",6),k.yc(6,"async"),k.vc(),k.lc(7,"div",7),k.lc(8,"span",8),k.ed(9,"TOOLTIPS.COMMENTS"),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Cc("ngClass",k.Hc(9,hn,"comments"===k.zc(1,3,r.toggledButton))),k.Sb(2),k.Cc("ngClass",k.Hc(11,dn,"comments"===k.zc(3,5,r.toggledButton))),k.Sb(3),k.Cc("ngIf",k.zc(6,7,r.IsNewCommentsAvailable))}}function gn(e,t){if(1&e){var n=k.mc();k.lc(0,"button",3),k.tc("click",(function(){return k.Pc(n),k.xc().openShapePropertiesPanel()})),k.yc(1,"async"),k.wc(),k.lc(2,"svg",4),k.yc(3,"async"),k.gc(4,"use",10),k.kc(),k.vc(),k.lc(5,"div",7),k.lc(6,"span",8),k.ed(7,"TOOLTIPS.SHAPE_PROPERTIES"),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Cc("ngClass",k.Hc(6,hn,"prop"===k.zc(1,2,r.toggledButton))),k.Sb(2),k.Cc("ngClass",k.Hc(8,dn,"prop"===k.zc(3,4,r.toggledButton)))}}function mn(e,t){if(1&e){var n=k.mc();k.lc(0,"button",11),k.tc("click",(function(){return k.Pc(n),k.xc().openShapeDataPanel()})),k.yc(1,"async"),k.wc(),k.lc(2,"svg",4),k.yc(3,"async"),k.gc(4,"use",12),k.kc(),k.vc(),k.lc(5,"div",7),k.lc(6,"span",8),k.ed(7,"TOOLTIPS.SHAPE_DATA"),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Cc("ngClass",k.Hc(6,hn,"data"===k.zc(1,2,r.toggledButton))),k.Sb(2),k.Cc("ngClass",k.Hc(8,dn,"data"===k.zc(3,4,r.toggledButton)))}}var vn=function(e,t){return{"sp-action-container-opened":e,"sp-action-container-closed":t}},bn=function(){function e(e,t,n){this.state=e,this.ll=t,this.ul=n,this.isDemoMode=!1,this.subs=[],this.isSelected=new I.a(!1),this.shouldShowDataOption=new I.a(!1),this.shouldShowPropOption=new I.a(!1),this.shouldShowCommentOption=new I.a(!0),this.toggledButton=new I.a(""),this.handleDemoUser()}return Object.defineProperty(e.prototype,"IsNewCommentsAvailable",{get:function(){return this.state.changes("NewCommentsIndicator")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subs.push(this.listenToShapeSelection().subscribe()),this.subs.push(this.listentToButtonToggle().subscribe()),this.subs.push(this.listenToRightPanelChanges().subscribe()),this.subs.push(this.keepOneSidebarOpenOnTiptapStateChange().subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.openShapePropertiesPanel=function(){"prop"===this.toggledButton.value?this.removeToggle():this.toggledButton.next("prop")},e.prototype.openShapeDataPanel=function(){"data"===this.toggledButton.value?this.removeToggle():this.toggledButton.next("data")},e.prototype.openCommentsPanel=function(){"comments"===this.toggledButton.value?this.removeToggle():this.toggledButton.next("comments")},e.prototype.handleDemoUser=function(){var e=this;this.ul.getUserDataAfterUserSubscriptionStarted().pipe(Object(je.a)((function(e){return!!e})),Object(Qt.a)(1),Object(je.a)((function(e){return e.status===fe.A.DEMO})),Object(_.a)((function(){return e.isDemoMode=!0}))).subscribe()},e.prototype.removeToggle=function(){this.toggledButton.next(""),this.closeRightSidebar()},e.prototype.listenToShapeSelection=function(){var e=this;return this.state.changes("Selected").pipe(Object(Te.a)((function(t){return t&&0!==t.length?e.toggledButton.value||(e.closeRightSidebar(),e.isSelected.next(!0)):(e.shouldShowPropOption.next(!1),e.shouldShowDataOption.next(!1),"comments"!==e.toggledButton.value&&e.removeToggle()),t})),Object(E.a)((function(t){return e.isShapeArrayContainsConnector(t).pipe(Object(_.a)((function(n){e.shouldShowPropOption.next(!0),n||t.length>1?e.shouldShowDataOption.next(!1):e.shouldShowDataOption.next(!0)})))})))},e.prototype.keepOneSidebarOpenOnTiptapStateChange=function(){var e=this;return this.state.changes("TiptapDocument").pipe(Object(_.a)((function(t){"task-panel"===t.parentName?e.removeToggle():e.state.set("CurrentSidebarTask","")})))},e.prototype.closeRightSidebar=function(){this.state.get("OpenRightSidebar")!==w.r.None&&this.state.set("OpenRightSidebar",w.r.None)},e.prototype.isShapeArrayContainsConnector=function(e){var t=this,n=e.map((function(e){return t.locator.getShapeModel(e)}));return cn.b.apply(void 0,Object(r.j)(n)).pipe(Object(Xt.a)(100),Object(Te.a)((function(e){return!(ln.a.sameType(e)&&!e[0].isConnector())})))},e.prototype.listentToButtonToggle=function(){var e=this;return this.toggledButton.pipe(Object(_.a)((function(t){"prop"===t?e.state.set("OpenRightSidebar","shapePanel"):"data"===t?e.state.set("OpenRightSidebar","shapeData"):"comments"===t&&e.state.set("OpenRightSidebar","diagramcomments")})))},e.prototype.listenToRightPanelChanges=function(){var e=this;return this.state.changes("OpenRightSidebar").pipe(Object(_.a)((function(t){"diagraminfo"===t?e.shouldShowCommentOption.next(!1):(Object($t.a)(1e3),e.shouldShowCommentOption.next(!0))})))},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(sn.a),k.fc(fe.x))},e.\u0275cmp=k.Zb({type:e,selectors:[["shape-properties-action"]],decls:9,vars:19,consts:[[1,"sp-action-container",3,"ngClass"],["class","nu-btn-small sp-action-btn fx-center-all fx-button fx-pointer-events-auto","tooltip","","placement","bottom",3,"ngClass","click",4,"ngIf"],["tooltip-tour-step","shape-data","class","nu-btn-small sp-action-btn fx-center-all fx-button fx-pointer-events-auto","tooltip","","placement","bottom",3,"ngClass","click",4,"ngIf"],["tooltip","","placement","bottom",1,"nu-btn-small","sp-action-btn","fx-center-all","fx-button","fx-pointer-events-auto",3,"ngClass","click"],[1,"nu-icon","sp-action-icon",3,"ngClass"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-comment"],["class","sp-new-comment-indicator",4,"ngIf"],[1,"tooltip-content"],["translate","",1,"tooltip-content"],[1,"sp-new-comment-indicator"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-shape-properties"],["tooltip-tour-step","shape-data","tooltip","","placement","bottom",1,"nu-btn-small","sp-action-btn","fx-center-all","fx-button","fx-pointer-events-auto",3,"ngClass","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-shape-data"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.yc(1,"async"),k.yc(2,"async"),k.cd(3,fn,10,13,"button",1),k.yc(4,"async"),k.cd(5,gn,8,10,"button",1),k.yc(6,"async"),k.cd(7,mn,8,10,"button",2),k.yc(8,"async"),k.kc()),2&e&&(k.Xb("demo-mode",t.isDemoMode),k.Cc("ngClass",k.Ic(16,vn,""!==k.zc(1,6,t.toggledButton),""===k.zc(2,8,t.toggledButton))),k.Sb(3),k.Cc("ngIf",k.zc(4,10,t.shouldShowCommentOption)),k.Sb(2),k.Cc("ngIf",k.zc(6,12,t.shouldShowPropOption)),k.Sb(2),k.Cc("ngIf",k.zc(8,14,t.shouldShowDataOption)))},directives:[i.q,i.t,D.a,y.a,un.a],pipes:[i.b],styles:[".sp-action-container[_ngcontent-%COMP%]{position:fixed;right:10px;top:15px;display:flex;height:50px;background-color:#fff;border-radius:4px;padding-top:10px;cursor:pointer;z-index:3}.sp-action-container.demo-mode[_ngcontent-%COMP%]{margin-top:30px}.sp-action-container-closed[_ngcontent-%COMP%]{box-shadow:0 4px 16px rgba(0,0,0,.05),0 2px 6px rgba(0,0,0,.05),0 1px 2px rgba(0,0,0,.05)}.sp-action-container-opened[_ngcontent-%COMP%]{box-shadow:transparent;border:1px solid #caccce}.sp-action-btn[_ngcontent-%COMP%]{background:transparent}.sp-action-icon[_ngcontent-%COMP%]{padding-top:2px;padding-bottom:2px;margin-left:-2px;margin-right:-2px}.sp-action-icon[_ngcontent-%COMP%]:hover{color:#61a15e}.sp-action-btn-active[_ngcontent-%COMP%]{background-color:#dcf2ee}.sp-action-icon-active[_ngcontent-%COMP%]{color:#61a15e}.sp-new-comment-indicator[_ngcontent-%COMP%]{width:10px;height:10px;background-color:#f36c67;border-radius:100%;margin-left:-12px;margin-top:-12px}"]}),e}(),yn=n("5Jpj"),xn=n("I4UX"),Cn=n("yZNT"),wn=n("fNjA"),kn=n("yBHx"),Sn=n("Hd+h"),On=n("7n9Q"),En=n("pWGo"),_n=n("2aGL"),In=n("No4x"),Pn=n("emwj"),Tn=n("/YKq"),An=n("BL7/"),Mn=n("r3/A");function Dn(e,t){if(1&e){var n=k.mc();k.lc(0,"div",13),k.lc(1,"a",14),k.tc("blur",(function(){return k.Pc(n),k.xc(2).closeEditor()}))("click",(function(e){return k.Pc(n),k.xc(2).navigate(e)})),k.ed(2),k.kc(),k.kc()}if(2&e){var r=t.ngIf;k.Sb(1),k.Dc("href",r,k.Sc),k.Sb(1),k.fd(r)}}function jn(e,t){if(1&e){var n=k.mc();k.lc(0,"div",6),k.cd(1,Dn,3,2,"div",7),k.yc(2,"async"),k.lc(3,"button",8),k.tc("click",(function(){return k.Pc(n),k.xc().onEditBtnClick()})),k.wc(),k.lc(4,"svg",9),k.gc(5,"use",10),k.kc(),k.kc(),k.vc(),k.lc(6,"button",11),k.tc("click",(function(){return k.Pc(n),k.xc().removeLink()})),k.wc(),k.lc(7,"svg",9),k.gc(8,"use",12),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Sb(1),k.Cc("ngIf",k.zc(2,1,r.hyperlinkValue))}}function Nn(e,t){if(1&e){var n=k.mc();k.lc(0,"div"),k.lc(1,"text-input",15,16),k.tc("updateText",(function(){return k.Pc(n),k.xc().handleInputChange()}))("keydown",(function(e){return k.Pc(n),k.xc().handleKeydown(e)}))("blur",(function(){return k.Pc(n),k.xc().closeEditor()})),k.yc(3,"translate"),k.yc(4,"async"),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Sb(1),k.Dc("placeholder",k.zc(3,2,"LABELS.ADD_LINK_AND_ENTER")),k.Cc("value",k.zc(4,4,r.hyperlinkValue))}}function Rn(e,t){1&e&&(k.lc(0,"div",17),k.ed(1,"LABELS.PRESS_ESCAPE_TO_CANCEL"),k.kc())}var Ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.prototype.ngAfterViewInit=function(){var e=this;this.containerElement.style.display="none",this.subs.push(this.onEscape().pipe(Object(_.a)((function(){return e.closeEditor()}))).subscribe())},t.prototype.ngOnDestroy=function(){for(;this.subs.length;)this.subs.pop().unsubscribe()},t.prototype.open=function(){this.openEditor()},t.prototype.closeEditor=function(){this.hyperlinkValue.next(""),this.containerElement.style.display="none"},t.prototype.openEditor=function(){var e=this.editor.getAttributes("link").href;e?this.editorState.next("view"):this.editorState.next("edit"),this.hyperlinkValue.next(e),this.containerElement.style.display="block",this.textInput&&this.textInput.focus(),this.position()},t.prototype.applyLink=function(){if(this.textInput&&this.textInput.value){var e=encodeURI(this.textInput.value);if(Mn(e)||(e="https://"+e),!Mn(e))return void this.containerElement.classList.add("invalid-url");var t=e;if(null===t)return;if(""===t)return void this.editor.chain().focus().extendMarkRange("link").unsetLink().run();this.editor.chain().focus().extendMarkRange("link").setLink({href:t}).run()}this.closeEditor()},t.prototype.position=function(){if(this.editor&&this.containerElement){var e=this.editor,t=e.state,n=e.view,r=this.containerElement,i=this.editor.view.dom;r.style.display="block";var a=t.selection.$anchor,o=t.selection.$head,s=n.coordsAtPos(a.pos),c=n.coordsAtPos(o.pos),l=Math.min(s.left,c.left),u=Math.max(s.right,c.right),p=Math.min(s.top,c.top),h=i.getBoundingClientRect(),d=r.getBoundingClientRect(),f=l+(u-l)/2-d.width/2-h.x,g=p-d.height-h.y+90;r.style.transform="translate3d("+Math.min(Math.max(f,0),h.width-d.width)+"px, "+g+"px, 0px)"}},t.prototype.removeLink=function(){this.editor.chain().focus().extendMarkRange("link").unsetLink().run(),this.closeEditor()},t.\u0275fac=function(e){return Fn(e||t)},t.\u0275cmp=k.Zb({type:t,selectors:[["tiptap-hyperlink-editor"]],inputs:{editor:"editor"},features:[k.Pb],decls:6,vars:3,consts:[["data-keep-text-open","true",1,"hyperlink-editor-container"],["container",""],[1,"hyperlink-editor-inner-container"],["class","fx-height-inherit fx-center-vertical",4,"ngIf"],[4,"ngIf"],["class","hyperlink-escape-lable","translate","",4,"ngIf"],[1,"fx-height-inherit","fx-center-vertical"],["class","fx-flex-expand fx-ellipsis",4,"ngIf"],[1,"hyperlink-edit-btn","nu-btn-small","nu-btn-icon","lib-browser-close-btn","fx-no-padding",3,"click"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-edit"],[1,"hyperlink-remove-btn","nu-btn-small","nu-btn-icon","lib-browser-close-btn",3,"click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-trash-thin"],[1,"fx-flex-expand","fx-ellipsis"],["target","_blank",1,"hyperlink-label","fx-ellipsis","primary",3,"href","blur","click"],["autoFocus","true","emitForInputChange","true",1,"hyperlink-input",3,"placeholder","value","updateText","keydown","blur"],["textInput",""],["translate","",1,"hyperlink-escape-lable"]],template:function(e,t){1&e&&(k.lc(0,"div",0,1),k.lc(2,"div",2),k.cd(3,jn,9,3,"div",3),k.cd(4,Nn,5,6,"div",4),k.kc(),k.cd(5,Rn,2,0,"div",5),k.kc()),2&e&&(k.Sb(3),k.Cc("ngIf","view"===t.editorState.value),k.Sb(1),k.Cc("ngIf","edit"===t.editorState.value),k.Sb(1),k.Cc("ngIf","edit"===t.editorState.value))},directives:[i.t,ae.a,y.a],pipes:[i.b,y.d],styles:[".hyperlink-editor-inner-container[_ngcontent-%COMP%]{position:relative;width:320px;height:50px;margin:8px;background:#fff;border:1px solid #dcdcdc;box-sizing:border-box;border-radius:3px;z-index:2}.hyperlink-editor-container[_ngcontent-%COMP%]{position:absolute;z-index:2}.hyperlink-label[_ngcontent-%COMP%]{padding:15px 45px 15px 15px}.hyperlink-input[_ngcontent-%COMP%]{float:left;width:302px;margin:8px}.hyperlink-input[_ngcontent-%COMP%]  input{margin:0!important}.hyperlink-editor-container.invalid-url[_ngcontent-%COMP%]   .hyperlink-input[_ngcontent-%COMP%]  input{border:1px solid #ffbaba}.hyperlink-remove-btn[_ngcontent-%COMP%]{padding-left:0}.hyperlink-escape-lable[_ngcontent-%COMP%]{text-align:center;font-size:12px;line-height:15px}"],changeDetection:0}),t}(An.a),Fn=k.nc(Ln),Bn=n("vdZD"),Vn=n("X5Q9"),zn=n("0fSw"),Un=function(){function e(){}return e.getSidePosition=function(t){return e.sidePositions[t]},e.sidePositions={topleft:{x:0,y:0},topcenter:{x:.5,y:0},topright:{x:1,y:0},bottomleft:{x:0,y:1},bottomcenter:{x:.5,y:1},bottomright:{x:1,y:1},leftcenter:{x:0,y:.5},rightcenter:{x:1,y:.5},center:{x:.5,y:.5}},e}(),Gn=["secondaryItemContainer"],Hn=["itemContainer"];function Yn(e,t){}function qn(e,t){}var Wn=function(e){function t(t,n,r,i){var a=e.call(this,t,n)||this;return a.componentFactoryResolver=t,a.injector=n,a.elementRef=r,a.manager=i,a.secondaryLevelVisibility=new I.a(!1),a.showing=!1,a.element=r.nativeElement,a.element.style.position="absolute",a.items={},a.changeSubs={},a._change=new _e.a,a.resetOperations(),a.hideToolbar(),a}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemIds",{get:function(){return Object.keys(this.items)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowing",{get:function(){return this.isShowing},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.manager.register(this)},t.prototype.show=function(){var e=this;return this.showing?this.apply():this.apply().pipe(Object(Te.a)((function(){return e.showToolbar()})))},t.prototype.hide=function(){return this.showing&&this.hideToolbar(),Object(Oe.a)({})},t.prototype.addItem=function(e,t,n,r,i,a){void 0===a&&(a="primary");var o=this.makeComponent(t);r&&o.instance.setProperties(r),o.instance.id=e,o.instance.setData(n),o.instance.apply(),void 0===i&&(i=Object.keys(this.items).length+Object.keys(this.operations.add).length),this.operations.add[i]={itemRef:o,level:a}},t.prototype.addListItem=function(e,t,n,r,i,a){var o=this.makeComponent(t);r&&o.instance.setProperties(r),o.instance.id=e,o.instance.setData(n),o.instance.select(i),o.instance.apply(),void 0===a&&(a=Object.keys(this.items).length+Object.keys(this.operations.add).length),this.operations.add[a]={itemRef:o}},t.prototype.removeItem=function(e){this.items[e]&&this.operations.remove.push(e)},t.prototype.updateItem=function(e,t,n){var r=this.items[e];r&&(n&&r.instance.setProperties(n),r.instance.setData(t),this.operations.update.push(e))},t.prototype.updateListItem=function(e,t,n,r){var i=this.items[e];if(i){var a=i.instance;n&&i.instance.setProperties(n),a.setData(t),a.select(r),this.operations.update.push(e)}},t.prototype.position=function(e,t){void 0===t&&(t="center"),this.operations.position={point:e,side:t}},t.prototype.getItem=function(e){if(this.items){var t=this.items[e];if(t)return t.instance}},t.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.changeSubs).forEach((function(t){e.changeSubs[t].unsubscribe()})),this._change.complete(),this.changeSubs=null,this.items=null,this.operations=null},t.prototype.isFocused=function(){return this.element.contains(document.activeElement)},t.prototype.showToolbar=function(){this.items&&this.itemIds.length&&(this.element.style.display="inline-block",this.showing=!0)},t.prototype.hideToolbar=function(){this.element.style.display="none",this.showing=!1},t.prototype.apply=function(){var e=this,t=this.getPendingOperations();return t.length>0?Z.a.apply(void 0,Object(r.j)(t)).pipe(Object(_.a)({complete:function(){e.updateToolbarPosition(),e.resetOperations(),e.handleSecondaryLevelVisibility()}})):(this.updateToolbarPosition(),this.resetOperations(),Object(Oe.a)({}))},t.prototype.handleSecondaryLevelVisibility=function(){this.secondaryItemContainer.length>0?this.secondaryLevelVisibility.next(!0):this.secondaryLevelVisibility.next(!1)},t.prototype.insertToolbarItem=function(e,t,n){return this.items[e.instance.id]||(this.items[e.instance.id]=e,this.subscribeToItemChange(e.instance),"secondary"===n?this.insert(this.secondaryItemContainer,e):this.insert(this.itemContainer,e,t),e.changeDetectorRef.detectChanges()),Object(Oe.a)({})},t.prototype.removeToolbarItem=function(e){var t=this.items[e];return t&&(this.unsubscribeFromItemChange(e),this.remove(this.itemContainer,t),this.remove(this.secondaryItemContainer,t),delete this.items[e]),Object(Oe.a)({})},t.prototype.updateToolbarItem=function(e){var t=this.items[e];return t&&t.instance.apply(),Object(Oe.a)({})},t.prototype.updateToolbarPosition=function(){if(this.operations.position&&this.operations.position.point){var e=this.operations.position,t=e.point,n=e.side,r=this.element.getBoundingClientRect(),i=Un.getSidePosition(n);this.element.style.left=t.x-r.width*i.x+"px",this.element.style.top=t.y-r.height*i.y+"px"}},t.prototype.resetOperations=function(){this.operations={add:{},remove:[],update:[]}},t.prototype.subscribeToItemChange=function(e){var t=this,n=e.change.subscribe((function(n){return t._change.next({id:e.id,data:n})}));this.changeSubs[e.id]=n},t.prototype.unsubscribeFromItemChange=function(e){this.changeSubs[e]&&(this.changeSubs[e].unsubscribe(),delete this.changeSubs[e])},t.prototype.getAddItemAnimation=function(e){var t=new w.e({});return t.element=e.location.nativeElement,t},t.prototype.getRemoveItemAnimation=function(e){var t=new w.e({});return t.element=e.location.nativeElement,t},t.prototype.getPendingOperations=function(){var e=this,t=[];if(this.operations.remove.length>0&&(t=t.concat(this.operations.remove.map((function(t){return e.removeToolbarItem(t)})))),Object.keys(this.operations.add).length>0)for(var n in this.operations.add)t.push(this.insertToolbarItem(this.operations.add[n].itemRef,Number(n),this.operations.add[n].level));return this.operations.update.length>0&&(t=t.concat(this.operations.update.map((function(t){return e.updateToolbarItem(t)})))),t},t.\u0275fac=function(e){return new(e||t)(k.fc(k.m),k.fc(k.C),k.fc(k.r),k.fc(zn.a))},t.\u0275cmp=k.Zb({type:t,selectors:[["floating-toolbar"]],viewQuery:function(e,t){var n;(1&e&&(k.jd(Gn,!0,k.hb),k.jd(Hn,!0,k.hb)),2&e)&&(k.Lc(n=k.uc())&&(t.secondaryItemContainer=n.first),k.Lc(n=k.uc())&&(t.itemContainer=n.first))},inputs:{id:"id"},outputs:{change:"change"},features:[k.Pb],decls:12,vars:4,consts:[["data-keep-text-open","true","tooltip-tour-step","floating-tools,plus-create",1,"ftb-container"],["class","ftb-container-inner"],["itemContainer",""],[1,"ftb-more-dd-btn"],[1,"nu-btn-small","nu-btn-icon"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],[1,"abs-dropdown-items-container"],["class","ftb-more-dd-placeholder"],["secondaryItemContainer",""]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.gc(1,"div"),k.cd(2,Yn,0,0,"ng-template",1,2,k.dd),k.lc(4,"div",3),k.yc(5,"async"),k.lc(6,"button",4),k.wc(),k.lc(7,"svg",5),k.gc(8,"use",6),k.kc(),k.kc(),k.vc(),k.lc(9,"div",7),k.cd(10,qn,0,0,"ng-template",8,9,k.dd),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(4),k.Xb("hidden",!k.zc(5,2,t.secondaryLevelVisibility)))},styles:[".abs-dropdown-container[_ngcontent-%COMP%]{background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}.abs-dropdown-items-container[_ngcontent-%COMP%]  .ps-content{padding:10px}.abs-dropdown-items-container[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:215px;border:1px solid #d8d8d8;border-radius:2px;background-color:#fff;overflow:hidden;box-shadow:0 2px 2px #c3c3de}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item{height:30px;line-height:30px;text-align:left}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item .nu-icon{margin:0 5px 0 -5px;float:left}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item .dropdown-item-select-tick{visibility:hidden}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item.selected .dropdown-item-select-tick{visibility:visible}.abs-dropdown-inner-wrapper[_ngcontent-%COMP%]{position:relative}.abs-dropdown-inner[_ngcontent-%COMP%]{position:absolute;z-index:10}.abs-dropdown-inner[_ngcontent-%COMP%]:not(.right){left:0}.abs-dropdown-inner.right[_ngcontent-%COMP%]{right:0}@-webkit-keyframes showingAnimationDown{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}@keyframes showingAnimationDown{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}@-webkit-keyframes showingAnimationUp{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}@keyframes showingAnimationUp{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}.ftb-container[_ngcontent-%COMP%]{height:45px;border:1px solid #d3d3e7;background-color:#fff;border-radius:4px;box-shadow:0 2px 2px #c3c3de;display:flex;align-items:center;padding-right:10px}.ftb-container[_ngcontent-%COMP%]  .ftb-item, .ftb-container[_ngcontent-%COMP%]  .icon-button-container{width:35px;margin-left:10px;text-align:center}.ftb-container[_ngcontent-%COMP%]  .ftb-item button, .ftb-container[_ngcontent-%COMP%]  .icon-button-container button{padding:0}.ftb-container[_ngcontent-%COMP%]  .icon-button-container{padding:4px 0}.ftb-container[_ngcontent-%COMP%]  .ftb-item.ftb-item-text{width:auto;height:45px;line-height:45px}.ftb-container[_ngcontent-%COMP%]  .ftb-item .nu-btn-icon{width:inherit;padding:0}.ftb-container[_ngcontent-%COMP%]  .ftb-item .ftb-item-dropdown-arrow{width:0;height:0;border-color:transparent #dcdcdc #dcdcdc transparent;border-style:solid;border-width:4px;position:absolute;bottom:10px;right:1px}.ftb-container[_ngcontent-%COMP%]  .ftb-item .abs-dropdown-inner.down{top:44px}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .nu-btn-icon[_ngcontent-%COMP%]{padding-right:0}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .abs-dropdown-items-container[_ngcontent-%COMP%]{position:absolute;z-index:10;top:44px;padding:10px;display:none}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .abs-dropdown-items-container[_ngcontent-%COMP%]  rich-button{margin-bottom:10px;display:block}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]   .abs-dropdown-items-container[_ngcontent-%COMP%]  rich-button:last-of-type{margin-bottom:0}.ftb-container[_ngcontent-%COMP%]   .ftb-more-dd-btn[_ngcontent-%COMP%]:hover   .abs-dropdown-items-container[_ngcontent-%COMP%]{-webkit-animation:showingAnimationDown .3s;animation:showingAnimationDown .3s;display:block}.ftb-container[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]{z-index:2}"],changeDetection:0}),t}(w.k),Xn=n("IGWl"),Kn=n("myrl"),Zn=n("y0dT"),$n=function(){function e(e){this.state=e,this.isEditor=this.state.changes("InterfaceControlState").pipe(Object(Te.a)((function(e){return"edit"===e})))}return e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib))},e.\u0275cmp=k.Zb({type:e,selectors:[["temp-fake-features-panel"]],decls:38,vars:4,consts:[["placement","left","tooltip",""],["disabled","",1,"nu-btn-med","nu-btn-icon","fake-sidebar-button"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notes"],[1,"coming-soon-tooltip-container","tooltip-content"],[1,"coming-soon-header"],["translate","",1,"tooltip-header"],["translate","",1,"coming-soon-header-ribbon"],["translate","",1,"coming-soon-feature-text"],["placement","left","tooltip","",1,"fake-hidable-btn"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-theme"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-layout"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.lc(1,"button",1),k.wc(),k.lc(2,"svg",2),k.gc(3,"use",3),k.kc(),k.kc(),k.vc(),k.lc(4,"div",4),k.lc(5,"div",5),k.lc(6,"span",6),k.ed(7,"FAKE_TOOLTIPS.NOTES"),k.kc(),k.lc(8,"div",7),k.ed(9,"LABELS.COMING_SOON"),k.kc(),k.kc(),k.lc(10,"div",8),k.ed(11,"FAKE_TOOLTIPS.NOTES_DESC"),k.kc(),k.kc(),k.kc(),k.lc(12,"div"),k.yc(13,"async"),k.lc(14,"div",9),k.lc(15,"button",1),k.wc(),k.lc(16,"svg",2),k.gc(17,"use",10),k.kc(),k.kc(),k.vc(),k.lc(18,"div",4),k.lc(19,"div",5),k.lc(20,"span",6),k.ed(21,"FAKE_TOOLTIPS.THEME"),k.kc(),k.lc(22,"div",7),k.ed(23,"LABELS.COMING_SOON"),k.kc(),k.kc(),k.lc(24,"div",8),k.ed(25,"FAKE_TOOLTIPS.THEME_DESC"),k.kc(),k.kc(),k.kc(),k.lc(26,"div",9),k.lc(27,"button",1),k.wc(),k.lc(28,"svg",2),k.gc(29,"use",11),k.kc(),k.kc(),k.vc(),k.lc(30,"div",4),k.lc(31,"div",5),k.lc(32,"span",6),k.ed(33,"FAKE_TOOLTIPS.LAYOUT"),k.kc(),k.lc(34,"div",7),k.ed(35,"LABELS.COMING_SOON"),k.kc(),k.kc(),k.lc(36,"div",8),k.ed(37,"FAKE_TOOLTIPS.LAYOUT_DESC"),k.kc(),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(12),k.Xb("hide-fake-btns",!k.zc(13,2,t.isEditor)))},directives:[D.a,y.a],pipes:[i.b],styles:[".fake-sidebar-button[_ngcontent-%COMP%]{display:block;margin-right:5px}.fake-hidable-btn[_ngcontent-%COMP%], .fake-sidebar-button[_ngcontent-%COMP%]{height:33px;margin-bottom:15px;transition-property:transform,height,margin-bottom;transition-duration:.3s;transition-timing-function:ease-in-out}.fake-hidable-btn[_ngcontent-%COMP%]{transform:scale(1)}.hide-fake-btns[_ngcontent-%COMP%]   .fake-hidable-btn[_ngcontent-%COMP%]{transform:scale(0);height:0;margin-bottom:0}"],changeDetection:0}),e}(),Qn=n("U8K0"),Jn=n("Lmsv"),er=function(){function e(){this.name="PluginAuthResponsibility"}return e.prototype.checkState=function(e){return Object(Oe.a)(fe.b.AUTHENTICATED)},e.prototype.nextResponsibility=function(e){return[]},e.prototype.result=function(e){return{type:"complete"}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),tr=n("hX56"),nr=function(){function e(e){this.data=e,this.name="PluginDocumentResponsibility"}return e.prototype.checkState=function(e){if(!e.states.diagramRequired)return Object(Oe.a)(!0);var t=this.data.getModelStore(ln.a);return Object(Se.a)(t.removeChanges({modelId:e.input.resourceId})).pipe(Object(at.a)(!1))},e.prototype.nextResponsibility=function(e){return e.states.diagramRequired?["PluginAuthResponsibility"]:[]},e.prototype.result=function(e){return e.states.diagramRequired?{type:"command",action:"LoadDocument",wait:!e.states.PluginDocumentResponsibility,commandParams:{rid:e.input.resourceId,data:{}}}:{type:"complete"}},e.\u0275fac=function(t){return new(t||e)(k.pc(tr.b))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),rr=n("iPbu"),ir=n("SBw3");function ar(e,t){if(1&e&&(k.lc(0,"div",4),k.lc(1,"span",5),k.ed(2),k.kc(),k.lc(3,"span",6),k.ed(4),k.kc(),k.kc()),2&e){var n=t.$implicit;k.Sb(2),k.fd(n.label),k.Sb(2),k.fd(n.shortcutText)}}function or(e,t){1&e&&(k.lc(0,"div",4),k.lc(1,"span",7),k.ed(2,"BASE_FEATURE.CANCEL_ACTION"),k.kc(),k.lc(3,"span",6),k.ed(4,"Esc"),k.kc(),k.kc())}var sr=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Zb({type:e,selectors:[["shortcut-window-section"]],inputs:{sectionList:"sectionList"},decls:5,vars:3,consts:[["translate","",1,"sw-col-heading"],[1,"sw-col-inner"],["class","sw-col-item",4,"ngFor","ngForOf"],["class","sw-col-item",4,"ngIf"],[1,"sw-col-item"],[1,"sw-col-item-label"],[1,"sw-col-item-value"],["translate","",1,"sw-col-item-label"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.ed(1),k.kc(),k.lc(2,"div",1),k.cd(3,ar,5,2,"div",2),k.cd(4,or,5,0,"div",3),k.kc()),2&e&&(k.Sb(1),k.fd(t.sectionList.title),k.Sb(2),k.Cc("ngForOf",t.sectionList.items),k.Sb(1),k.Cc("ngIf","BASE_FEATURE.EDITING"==t.sectionList.title))},directives:[y.a,i.s,i.t],styles:[".sw-inner[_ngcontent-%COMP%]{z-index:10;white-space:nowrap;background-color:#7e7e7e;border-radius:4px;padding:50px;color:#fff}.sw-inner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin-bottom:35px}.sw-col-heading[_ngcontent-%COMP%]{color:#aaa;text-transform:capitalize;margin-bottom:25px}.sw-col[_ngcontent-%COMP%]{display:inline-block;margin-right:75px}.sw-col[_ngcontent-%COMP%]:last-of-type{margin-right:0}.sw-col-inner[_ngcontent-%COMP%]{display:table}.sw-col-item[_ngcontent-%COMP%]{display:table-row;height:30px}.sw-col-item-label[_ngcontent-%COMP%], .sw-col-item-value[_ngcontent-%COMP%]{display:table-cell}.sw-col-item-value[_ngcontent-%COMP%]{padding-left:25px}.sw-close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:5px}"],changeDetection:0}),e}(),cr=function(){function e(e,t,n){this.featureList=e,this.translate=t,this.commandService=n,this.shortcutSections={"BASE_FEATURE.EDITING":["cutShapes","copyShapes","pasteShapes","selectAll","remove","duplicateShapes","duplicateShapesAndMove","bringToFront","sendToBack","sendBackward","bringForward","openHyperlinkEditor","drawLine","addText","changeSnapState"],"BASE_FEATURE.CANVAS":["zoomIn","zoomOut","actualSize","zoomFit","undo","redo","switchToPanMouseControlState","addComment","freeHandPen","freeHandHighlighter"],"BASE_FEATURE.SELECTION":["keyboardSelectionMove","keyboardSelectionScale","aspectRatioDragScale"]}}return e.prototype.getSection=function(e){var t=this.getCustomItems();return t.push.apply(t,Object(r.j)(this.featureList.features)),{title:e,items:this.shortcutSections[e].map((function(e){return t.find((function(t){return t.id===e}))})).filter((function(e){return void 0!==e}))}},e.prototype.openShortcutWindow=function(){this.commandService.dispatch(ur.showShortcutWindow,{show:!0})},e.prototype.closeShortcutWindow=function(){this.commandService.dispatch(ur.showShortcutWindow,{show:!1})},e.prototype.getCustomItems=function(){return[{id:"aspectRatioDragScale",label:this.translate.instant("BASE_FEATURE.SCALE"),shortcutText:"Shift + Resize"},{id:"duplicateShapesAndMove",label:this.translate.instant("BASE_FEATURE.DUPLICATE"),shortcutText:"Alt + Drag"}]},e.\u0275fac=function(t){return new(t||e)(k.fc(ir.a),k.fc(y.e),k.fc(C.B))},e.\u0275cmp=k.Zb({type:e,selectors:[["shortcut-window"]],decls:9,vars:3,consts:[[1,"sw-inner","fx-center-without-flex",3,"mouseover","mouseout"],["translate",""],[1,"sw-col"],[3,"sectionList"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.tc("mouseover",(function(){return t.openShortcutWindow()}))("mouseout",(function(){return t.closeShortcutWindow()})),k.lc(1,"h1",1),k.ed(2,"BASE_FEATURE.SHORTCUTS"),k.kc(),k.lc(3,"div",2),k.gc(4,"shortcut-window-section",3),k.kc(),k.lc(5,"div",2),k.gc(6,"shortcut-window-section",3),k.kc(),k.lc(7,"div",2),k.gc(8,"shortcut-window-section",3),k.kc(),k.kc()),2&e&&(k.Sb(4),k.Cc("sectionList",t.getSection("BASE_FEATURE.EDITING")),k.Sb(2),k.Cc("sectionList",t.getSection("BASE_FEATURE.CANVAS")),k.Sb(2),k.Cc("sectionList",t.getSection("BASE_FEATURE.SELECTION")))},directives:[y.a,sr],styles:[".sw-inner[_ngcontent-%COMP%]{z-index:10;white-space:nowrap;background-color:#7e7e7e;border-radius:4px;padding:50px;color:#fff}.sw-inner[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;margin-bottom:35px}.sw-col-heading[_ngcontent-%COMP%]{color:#aaa;text-transform:capitalize;margin-bottom:25px}.sw-col[_ngcontent-%COMP%]{display:inline-block;margin-right:75px}.sw-col[_ngcontent-%COMP%]:last-of-type{margin-right:0}.sw-col-inner[_ngcontent-%COMP%]{display:table}.sw-col-item[_ngcontent-%COMP%]{display:table-row;height:30px}.sw-col-item-label[_ngcontent-%COMP%], .sw-col-item-value[_ngcontent-%COMP%]{display:table-cell}.sw-col-item-value[_ngcontent-%COMP%]{padding-left:25px}.sw-close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:5px}"],changeDetection:0}),e}(),lr=function(e){function t(t){var n=e.call(this)||this;return n.modalCtrl=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return this.data.show?this.modalCtrl.show(cr,void 0,!1):this.modalCtrl.hide(),!0},t.\u0275fac=function(e){return new(e||t)(k.pc(C.gb))},t.\u0275prov=k.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(C.v)(),Object(r.g)("design:paramtypes",[C.gb])],t)}(C.b);Object.defineProperty(lr,"name",{value:"ShowShortcutWindow"});var ur=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.register=function(e){e.map(t.showShortcutWindow).add(lr)},t.showShortcutWindow=new t("ShowShortcutWindow"),t}(C.y),pr=n("vg1f"),hr=function(){function e(e,t,n){this.loader=e,this.commandService=t,this.state=n,this.intervalDuration=6e4,this.isJobRunning=!1,this.listenToConnectionChanges()}return Object.defineProperty(e.prototype,"isOffline",{get:function(){return!window.navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.start=function(){var e=this;if(!this.isJobRunning&&!this.isOffline){this.isJobRunning=!0;var t=function(){setTimeout((function(){return Object(r.c)(e,void 0,void 0,(function(){return Object(r.f)(this,(function(e){switch(e.label){case 0:return[4,this.syncResource()];case 1:return e.sent()&&!this.isOffline?t():this.isJobRunning=!1,[2]}}))}))}),e.intervalDuration)};t()}},e.prototype.listenToConnectionChanges=function(){var e=this;this.state.changes(x.c).pipe(Object(je.a)((function(e){return e===x.c.ONLINE})),Object(_.a)((function(){return e.start()}))).subscribe()},e.prototype.syncResource=function(){var e=this;return this.loader.getPendingUploadResources().pipe(Object(Qt.a)(1),Object(Te.a)((function(t){if(t.length>0){for(var n=0;n<t.length&&!t[n].id.startsWith(C.m.get("CUSTOM_IMAGE_BASE_URL"));)e.loader.setResourceStatus(t[n].id,pe.q.Uploaded),n++;var r=t[n];return r&&r.id.startsWith(C.m.get("CUSTOM_IMAGE_BASE_URL"))&&(r.status?e.uploadResource(r):e.fetchResource(r.id).then((function(t){200===t.status?e.loader.setResourceStatus(r.id,pe.q.Uploaded):e.uploadResource(r)}))),!0}return!1}))).toPromise()},e.prototype.fetchResource=function(e){return fetch(e,{method:"HEAD"})},e.prototype.uploadResource=function(e){var t=this.getInputForUpload(e);return this.commandService.dispatch(it.a.uploadImage,t)},e.prototype.getInputForUpload=function(e){var t=e.id.split("/").pop(),n=e.data.match(/[^:]\w+\/[\w-+\d.]+(?=;|,)/)[0];return{hash:t,data:e.data,name:"resource",type:n,extension:void 0}},e.\u0275fac=function(t){return new(t||e)(k.pc(C.yb),k.pc(C.B),k.pc(C.Ib))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),dr=n("3vL/"),fr=n("ioBB"),gr=n("tqrN"),mr=n("pi4j"),vr=n("Lk+x"),br=n("STWM"),yr=n("3AeD"),xr=n("iRGy"),Cr=n("+ETr"),wr=n("xpZS"),kr=n("8a+/"),Sr=n("1U5y"),Or=n("wf7V"),Er=n("izw+"),_r=n("k0Sg"),Ir=n("zsv6"),Pr=n("cOhl"),Tr=n("/6pf"),Ar=n("dFmy"),Mr=n("pt/I"),Dr=function(){function e(e){this.state=e}return e.prototype.point=function(t){var n=this.state.get("SnapData");return void 0!==n.tx&&Math.abs(t.x.value-n.tx)<e.delta&&(t.x.value=n.tx),void 0!==n.ty&&Math.abs(t.y.value-n.ty)<e.delta&&(t.y.value=n.ty),t},e.delta=5,e.\u0275fac=function(t){return new(t||e)(k.pc(C.Ib))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),jr=function(){function e(e){this.state=e}return e.prototype.point=function(t){var n=this.state.get("SnapData");return void 0!==n.left&&Math.abs(t.x.value-n.left)<e.delta&&(t.x.value=n.left),void 0!==n.right&&Math.abs(t.x.value-n.right)<e.delta&&(t.x.value=n.right),void 0!==n.top&&Math.abs(t.y.value-n.top)<e.delta&&(t.y.value=n.top),void 0!==n.bottom&&Math.abs(t.y.value-n.bottom)<e.delta&&(t.y.value=n.bottom),t},e.delta=5,e.\u0275fac=function(t){return new(t||e)(k.pc(C.Ib))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),Nr=n("fRR/"),Rr=n("RMc3"),Lr=n("/g0E"),Fr=n("x77O"),Br=n("+1jB"),Vr=n("K5wl"),zr=n("TQyE"),Ur=n("jQTg"),Gr=n("Yr08"),Hr=n("u1Zh"),Yr=n("r0H0"),qr=n("F1CX"),Wr=n("kMe2"),Xr=n("Q9lH"),Kr=n("JfMT"),Zr=n("m4FO"),$r=n("Xh2D"),Qr=n("XLk1"),Jr=n("QCJn"),ei=n("LC7v"),ti=n("tG6W"),ni=n("Gjo4"),ri=n("LA+B"),ii=n("s9Xn"),ai=n("sKtG"),oi=n("Mb5J"),si=n("PGgW"),ci=n("eIBf"),li=n("vRBZ"),ui=n("yhNa"),pi=n("iesc"),hi=n("6Oco"),di=n("wqq/"),fi=n("TaSY"),gi=n("ljsB"),mi=n("xnGY"),vi=n("qMyy"),bi=n("3QsU"),yi=n("yn08"),xi=n("QWoK"),Ci=n("g3yf"),wi=n("uG58"),ki=n("4Kso"),Si=n("UFl8"),Oi=n("3p4X"),Ei=n("3mST"),_i=n("w1VY"),Ii=n("Qki8"),Pi=["ripple"],Ti=function(e,t,n){return{left:e,top:t,visibility:n}},Ai=function(){function e(e,t){this.toursvc=e,this.state=t,this.radius=16,this.subs=[]}return e.prototype.ngOnInit=function(){this.setRipplePosition(),this.rippleHidden=this.anchor.rippleHidden,this.subs.push(this.listenToCurrentStepChanges().subscribe())},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.handleRippleClick=function(){C.Kb.track("onboarding.tooltip.click",{value1:this.anchor.stepId}),this.toursvc.showTooltip(this.anchor.stepId)},e.prototype.updateRipple=function(){var e,t=this.anchor.element.getBoundingClientRect(),n=this.toursvc.tooltipData.value[this.anchor.stepId];this.previousBoundingBox?Object(tn.isEqual)(this.previousBoundingBox,t)||(this.previousBoundingBox=t,this.setRipplePosition(),n.canvasElement):this.previousBoundingBox=t;var r=this.toursvc.tooltipData.value[this.anchor.stepId].preventOverlapping||[],i=document.getElementsByTagName("header-layout")[0],a=document.getElementsByClassName("sidebar")[0],o=document.getElementsByClassName("left-sidebar-container")[0],s=document.getElementsByTagName("diagram-toolbar")[0],c=document.getElementsByTagName("floating-panel-container")[0],l=document.getElementsByClassName("modal-window-inner")[0],u=null===(e=document.getElementsByTagName("shortcut-window")[0])||void 0===e?void 0:e.children[0],p=document.querySelector(" div.left-sidebar-user > abs-dropdown > div > div.abs-dropdown-inner-wrapper > div > ul"),h=document.getElementsByClassName("help-widget-cards-container")[0],d=document.getElementsByClassName("floating-card")[0],f=document.getElementsByClassName("sp-action-container")[0];this.isOverlappingElement(i)&&r.includes(Ii.a.HEADER)||this.isOverlappingElement(o)&&r.includes(Ii.a.LEFTSIDEBAR)||this.isOverlappingElement(a)&&r.includes(Ii.a.RIGHTSIDEBAR)||this.isOverlappingElement(l)&&r.includes(Ii.a.MODALWINDOW)||this.isOverlappingElement(s)&&r.includes(Ii.a.DIAGRAMTOOLBAR)||this.isOverlappingElement(c)&&r.includes(Ii.a.FLOATINGPANEL)||this.isOverlappingElement(p)&&r.includes(Ii.a.USERMENU)||this.isOverlappingElement(f)&&r.includes(Ii.a.SHAPEPROPACTIONS)||this.isOverlappingElement(u)||this.isOverlappingElement(h)||this.isOverlappingElement(d)?this.rippleHidden=!0:this.rippleHidden=!1},e.prototype.listenToCurrentStepChanges=function(){var e=this;return this.toursvc.currentStep.pipe(Object(E.a)((function(){return e.toursvc.currentStepVisible})),Object(_.a)((function(t){e.setRipplePosition(),e.toursvc.currentStep.value&&(e.rippleHidden=!t)})))},e.prototype.setRipplePosition=function(){var e,t,n,r,i=null===(e=this.toursvc)||void 0===e?void 0:e.tooltipData.value[this.anchor.stepId];if(void 0!==i&&0!==i.level)if("floating-tools"!==i.stepId&&"plus-create"!==i.stepId){var a=this.anchor.element.getBoundingClientRect();a.right+280>=window.innerWidth?this.left=a.left:this.left=a.right-this.radius,this.top=a.top,(null===(t=i.positionOverride)||void 0===t?void 0:t.left)&&(this.left+=i.positionOverride.left),(null===(n=i.positionOverride)||void 0===n?void 0:n.top)&&(this.top+=i.positionOverride.top),i.stepId===(null===(r=this.toursvc.currentStep.value)||void 0===r?void 0:r.stepId)&&i.tooltipPositionOverride&&(this.left+=i.tooltipPositionOverride.left||0,this.top+=i.tooltipPositionOverride.top||0)}else this.setFloatingToolbarRipple()},e.prototype.setFloatingToolbarRipple=function(){var e,t=document.querySelector("#contextual-toolbar");this.top=t.getBoundingClientRect().top,this.left=t.getBoundingClientRect().right-this.radius;var n=" none"!==t.getAttribute("style").split(";")[1].split(":")[1],r=""!==this.state.get("CurrentSidebarTask"),i=(null===(e=this.toursvc.currentStep.value)||void 0===e?void 0:e.stepId)===this.anchor.stepId;if(n){if(r)return void(this.rippleHidden=!0);if(this.toursvc.currentStep.value&&!i)return void(this.rippleHidden=!0);this.rippleHidden=!1}else this.rippleHidden=!0},e.prototype.isOverlappingElement=function(e){var t,n,r=null===(n=null===(t=this.rippleElement)||void 0===t?void 0:t.nativeElement)||void 0===n?void 0:n.getBoundingClientRect();if(e&&r){var i=e.getBoundingClientRect();return r.x>=i.left-40&&r.x<=i.right+40&&r.y>=i.top-40&&r.y<=i.bottom+40}},e.\u0275fac=function(t){return new(t||e)(k.fc(xi.a),k.fc(C.Ib))},e.\u0275cmp=k.Zb({type:e,selectors:[["tooltip-tour-ripple"]],viewQuery:function(e,t){var n;(1&e&&k.jd(Pi,!0),2&e)&&(k.Lc(n=k.uc())&&(t.rippleElement=n.first))},inputs:{anchor:"anchor",timer:"timer"},decls:3,vars:5,consts:[[1,"lds-ripple",3,"ngStyle","click"],["ripple",""]],template:function(e,t){1&e&&(k.lc(0,"div",0,1),k.tc("click",(function(){return t.handleRippleClick()})),k.gc(2,"div"),k.kc()),2&e&&k.Cc("ngStyle",k.Jc(1,Ti,t.left+"px",t.top+"px",t.rippleHidden?"hidden":"visible"))},directives:[i.w],styles:['.lds-ripple[_ngcontent-%COMP%]{display:inline-block;position:absolute;cursor:pointer;width:32px;height:32px;transition:all}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border-radius:50%;margin:0 5px;position:relative;background-color:rgba(42,82,94,.5);transform:translateY(8px);-webkit-animation:fadeIn 3s;animation:fadeIn 3s}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background-color:inherit;border-radius:50%;z-index:-1;-webkit-animation:ripple 2s cubic-bezier(0,.2,.8,1) infinite;animation:ripple 2s cubic-bezier(0,.2,.8,1) infinite}@-webkit-keyframes ripple{0%{opacity:1;transform:scale(0)}to{opacity:0;transform:scale(3)}}@keyframes ripple{0%{opacity:1;transform:scale(0)}to{opacity:0;transform:scale(3)}}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}']}),e}(),Mi=function(e,t){return{"tooltip-arrow-left":e,"tooltip-arrow-right":t}};function Di(e,t){if(1&e&&k.gc(0,"div",18),2&e){var n=k.xc();k.Cc("ngClass",k.Ic(1,Mi,"left"==n.placement,"right"==n.placement))}}var ji=function(e,t){return{width:e,height:t}};function Ni(e,t){if(1&e&&(k.wc(),k.vc(),k.lc(0,"div",19),k.gc(1,"video",20),k.kc()),2&e){var n=k.xc();k.Sb(1),k.Cc("src",n.animationBase+n.step.animationURL,k.Sc)("loop",!n.step.playOnce)("ngStyle",k.Ic(3,ji,n.isRootLevel?"560px":"280px",n.isRootLevel?"318.5":"161px"))}}function Ri(e,t){if(1&e&&(k.gc(0,"div",21),k.yc(1,"translate")),2&e){var n=k.xc();k.Cc("innerHTML",k.zc(1,1,n.step.tooltip),k.Qc)}}var Li=function(e){return{visibility:e}};function Fi(e,t){if(1&e){var n=k.mc();k.lc(0,"button",22),k.tc("click",(function(){return k.Pc(n),k.xc().handleShowPrev()})),k.lc(1,"span",23),k.ed(2,"TOOLTIP_TOUR.BUTTONS.PREVIOUS"),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Cc("disabled",!r.hasPrev&&!r.hasInnerSteps),k.Sb(1),k.Cc("ngStyle",k.Hc(2,Li,r.isHidden?"hidden":r.hasPrev?"visible":"hidden"))}}function Bi(e,t){if(1&e){var n=k.mc();k.lc(0,"button",24),k.tc("click",(function(){return k.Pc(n),k.xc().handleSkip()})),k.lc(1,"span",25),k.ed(2,"TOOLTIP_TOUR.BUTTONS.SKIP"),k.kc(),k.kc()}}var Vi=function(e){return{"tooltip-tour-viewed":e}};function zi(e,t){if(1&e&&k.gc(0,"div",28),2&e){var n=t.$implicit,r=k.xc(2);k.Cc("ngClass",k.Hc(1,Vi,r.step.stepId===n.stepId||r.isStepViewed(n.stepId)))}}function Ui(e,t){if(1&e&&(k.lc(0,"div",26),k.cd(1,zi,1,3,"div",27),k.kc()),2&e){var n=k.xc();k.Sb(1),k.Cc("ngForOf",n.currentTourSteps)}}function Gi(e,t){if(1&e){var n=k.mc();k.lc(0,"button",29),k.tc("click",(function(){return k.Pc(n),k.xc().handleShowNext()})),k.lc(1,"span",25),k.ed(2,"TOOLTIP_TOUR.BUTTONS.NEXT"),k.kc(),k.kc()}}function Hi(e,t){1&e&&(k.lc(0,"span",25),k.ed(1,"TOOLTIP_TOUR.BUTTONS.FINISH"),k.kc())}function Yi(e,t){1&e&&(k.lc(0,"span",25),k.ed(1,"TOOLTIP_TOUR.BUTTONS.OK"),k.kc())}function qi(e,t){if(1&e){var n=k.mc();k.lc(0,"button",29),k.tc("click",(function(){return k.Pc(n),k.xc().handleFinish()})),k.cd(1,Hi,2,0,"span",30),k.cd(2,Yi,2,0,"span",30),k.kc()}if(2&e){var r=k.xc();k.Sb(1),k.Cc("ngIf",r.currentTourSteps.length>1),k.Sb(1),k.Cc("ngIf",1===r.currentTourSteps.length)}}function Wi(e,t){if(1&e){var n=k.mc();k.lc(0,"button",31),k.tc("click",(function(){return k.Pc(n),k.xc().handleShowNext()})),k.lc(1,"span",25),k.ed(2,"TOOLTIP_TOUR.BUTTONS.LEARN_MORE"),k.kc(),k.kc()}}function Xi(e,t){if(1&e){var n=k.mc();k.lc(0,"button",31),k.tc("click",(function(){return k.Pc(n),k.xc().handleShowNext()})),k.lc(1,"span",25),k.ed(2,"TOOLTIP_TOUR.BUTTONS.SHOW_ME"),k.kc(),k.kc()}}var Ki=function(e,t,n){return{left:e,top:t,visibility:n}},Zi=function(e,t,n){return{top:e,width:t,height:n}},$i=function(e){return{"level-zero-text":e}},Qi=function(){function e(e,t,n){this.state=e,this.tourSvc=t,this.translate=n,this.currentTourSteps=[],this.bodyDisplacement=0,this.width=280,this.height=0,this.placement=w.u.left,this.isHidden=!0,this.isRootLevel=!1,this.subs=[],this.animationBase=C.m.get("TOOLTIP_STATIC_BASE_URL")}return e.prototype.ngOnInit=function(){this.subs.push()},e.prototype.ngOnChanges=function(e){this.hasNext=!!this.step.nextStepId&&!this.step.learnMoreStep&&this.nextStepPrequisitesAvailable(),this.hasPrev=!!this.step.prevStepId,this.hasInnerSteps=!!this.step.learnMoreStep&&this.nextStepPrequisitesAvailable(this.step.learnMoreStep),this.hasLinkedArticle=!!this.step.learnMoreArticle,this.showFinish=!this.nextStepPrequisitesAvailable()&&!this.nextStepPrequisitesAvailable(this.step.learnMoreStep)||!this.step.nextStepId&&!this.step.learnMoreStep,this.currentTourSteps=this.tourSvc.currentTourSteps.value,this.isHidden=!this.tourSvc.currentStepVisible.value,this.isRootLevel=0===this.step.level,this.calculatePosition()},e.prototype.closeTooltip=function(e){this.isRootLevel&&this.tourSvc.userClosedRootTour.next(!0),this.tourSvc.currentStep.next(null),this.tourSvc.markStepAsViewed(this.step.stepId),e||this.sendTrackerEventsOnClick("close"),this.unsub()},e.prototype.handleShowPrev=function(){0!==this.step.level&&(this.isHidden=!0),this.tourSvc.currentStepVisible.next(!1),this.tourSvc.markStepAsViewed(this.step.stepId),this.tourSvc.showTooltip(this.step.prevStepId),this.sendTrackerEventsOnClick("previous")},e.prototype.handleShowNext=function(){0!==this.step.level&&(this.isHidden=!0),this.tourSvc.currentStepVisible.next(!1),this.tourSvc.markStepAsViewed(this.step.stepId),this.tourSvc.showTooltip(this.step.nextStepId||this.step.learnMoreStep),this.isRootLevel?this.sendTrackerEventsOnClick("next"):this.sendTrackerEventsOnClick(this.step.learnMoreStep?"learn more":"next")},e.prototype.handleSkip=function(){this.step.nextStepId?this.tourSvc.showTooltip(this.step.nextStepId):this.closeTooltip(),this.sendTrackerEventsOnClick("skip")},e.prototype.handleFinish=function(){this.state.set(yi.e,yi.e.noAutomation),this.closeTooltip(!0),this.sendTrackerEventsOnClick("complete",!0)},e.prototype.isStepViewed=function(e){var t=Object.keys(this.tourSvc.tooltipData.value),n=t.indexOf(this.step.stepId),r=t.indexOf(e);return this.tourSvc.tooltipData.value[e].viewed&&n>r},e.prototype.estimateContainerHeight=function(){var e=160;return this.isRootLevel&&(e=500),this.step.animationURL&&(e+=161),this.step.tooltip&&(e+=100),e},e.prototype.calculatePosition=function(){var e,t,n,r,i;"floating-tools"!==this.step.stepId&&"plus-create"!==this.step.stepId||(i=document.querySelector("#contextual-toolbar").getBoundingClientRect(),this.step.anchor.top=i.top,this.step.anchor.right=i.right,this.step.anchor.left=i.left,this.step.anchor.bottom=i.bottom);this.step.useOwnOverrides||(this.step.positionOverride=this.tourSvc.tooltipData.value[this.step.anchor.stepId].positionOverride,this.step.bodyDisplacementOverride=this.tourSvc.tooltipData.value[this.step.anchor.stepId].bodyDisplacementOverride),i||(i=this.step.anchor.element.getBoundingClientRect()),i.right+this.width>window.innerWidth?(this.left=i.left-this.width,this.placement=w.u.right):(this.left=i.right,this.placement=w.u.left);var a=this.estimateContainerHeight(),o=i.top+a>window.innerHeight-8;this.top=i.top,o?(this.bodyDisplacement=-(a+i.top+20-window.innerHeight),this.step.stepId.match("data")&&(this.bodyDisplacement-=40)):this.bodyDisplacement=-Math.min(20,i.top),this.step.bodyDisplacementOverride&&(this.bodyDisplacement+=this.step.bodyDisplacementOverride),(null===(e=this.step.positionOverride)||void 0===e?void 0:e.top)&&(this.top=this.top+this.step.positionOverride.top),(null===(t=this.step.positionOverride)||void 0===t?void 0:t.left)&&(this.left=this.left+this.step.positionOverride.left),(null===(n=this.step.tooltipPositionOverride)||void 0===n?void 0:n.top)&&(this.top=this.top+this.step.tooltipPositionOverride.top),(null===(r=this.step.tooltipPositionOverride)||void 0===r?void 0:r.left)&&(this.left=this.left+this.step.tooltipPositionOverride.left),0===this.step.level&&(this.width=560,this.height=500,this.left=(window.innerWidth-this.width)/2,this.top=(window.innerHeight-this.height)/2,this.bodyDisplacement=0)},e.prototype.unsub=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},e.prototype.sendTrackerEventsOnClick=function(e,t){1===this.step.level?C.Kb.track("onboarding.tooltip.intro.click",{value1:e,value2:this.translate.instant(this.step.title)}):0!==this.step.level?C.Kb.track("onboarding.tooltip.next.click",{value1:e,value2:this.translate.instant(this.step.title)}):t?C.Kb.track("tour.button."+e):C.Kb.track("tour.button."+e,{value1:this.translate.instant(this.step.title)})},e.prototype.nextStepPrequisitesAvailable=function(e){var t=this.tourSvc.tooltipData.value[e||this.step.nextStepId];return!!t&&this.tourSvc.areRequiredFeaturesAvailable(t)},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(xi.a),k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["tooltip-tour-step"]],inputs:{step:"step"},features:[k.Qb],decls:22,vars:29,consts:[[1,"tooltip-tour-step-container",3,"ngStyle"],["class","tooltip-arrow",3,"ngClass",4,"ngIf"],[1,"tooltip-tour-body",3,"ngStyle"],[1,"tooltip-close-btn-container"],[1,"nu-btn-small","nu-btn-icon",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-tooltip-close"],["class","tooltip-animation-container",4,"ngIf"],[3,"innerHTML"],[1,"tooltip-card-text",3,"ngClass","innerHTML"],["class","tooltip-tip",3,"innerHTML",4,"ngIf"],[1,"tooltip-footer"],[1,"tooltip-footer-inner"],["class","tooltip-btn-previous",3,"disabled","click",4,"ngIf"],[3,"click",4,"ngIf"],["class","tooltip-tour-steps",4,"ngIf"],["class","tooltip-btn-next",3,"click",4,"ngIf"],["class","tooltip-btn-emphasized",3,"click",4,"ngIf"],[1,"tooltip-arrow",3,"ngClass"],[1,"tooltip-animation-container"],["autoplay","","poster","./assets/tooltip-tour/tooltip-loading.gif","preload","auto",1,"tooltip-animation",3,"src","loop","ngStyle"],[1,"tooltip-tip",3,"innerHTML"],[1,"tooltip-btn-previous",3,"disabled","click"],["translate","",3,"ngStyle"],[3,"click"],["translate",""],[1,"tooltip-tour-steps"],["class","tooltip-tour-dot",3,"ngClass",4,"ngFor","ngForOf"],[1,"tooltip-tour-dot",3,"ngClass"],[1,"tooltip-btn-next",3,"click"],["translate","",4,"ngIf"],[1,"tooltip-btn-emphasized",3,"click"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.cd(1,Di,1,4,"div",1),k.lc(2,"div",2),k.lc(3,"div",3),k.lc(4,"button",4),k.tc("click",(function(){return t.closeTooltip()})),k.wc(),k.lc(5,"svg",5),k.gc(6,"use",6),k.kc(),k.kc(),k.kc(),k.cd(7,Ni,2,6,"div",7),k.vc(),k.gc(8,"h1",8),k.yc(9,"translate"),k.gc(10,"div",9),k.yc(11,"translate"),k.cd(12,Ri,2,3,"div",10),k.lc(13,"div",11),k.lc(14,"div",12),k.cd(15,Fi,3,4,"button",13),k.cd(16,Bi,3,0,"button",14),k.cd(17,Ui,2,1,"div",15),k.cd(18,Gi,3,0,"button",16),k.cd(19,qi,3,2,"button",16),k.cd(20,Wi,3,0,"button",17),k.cd(21,Xi,3,0,"button",17),k.kc(),k.kc(),k.kc(),k.kc()),2&e&&(k.Cc("ngStyle",k.Jc(19,Ki,t.left+"px",t.top+"px",t.isHidden?"hidden":"visible")),k.Sb(1),k.Cc("ngIf",!t.isRootLevel),k.Sb(1),k.Cc("ngStyle",k.Jc(23,Zi,t.bodyDisplacement+"px",t.width+"px",t.height?t.height+"px":"auto")),k.Sb(5),k.Cc("ngIf",t.step.animationURL),k.Sb(1),k.Cc("innerHTML",k.zc(9,15,t.step.title),k.Qc),k.Sb(2),k.Cc("ngClass",k.Hc(27,$i,t.isRootLevel))("innerHTML",k.zc(11,17,t.step.description),k.Qc),k.Sb(2),k.Cc("ngIf",t.step.tooltip),k.Sb(3),k.Cc("ngIf",!t.hasInnerSteps),k.Sb(1),k.Cc("ngIf",t.hasInnerSteps),k.Sb(1),k.Cc("ngIf",t.currentTourSteps.length>1),k.Sb(1),k.Cc("ngIf",t.hasNext),k.Sb(1),k.Cc("ngIf",t.showFinish),k.Sb(1),k.Cc("ngIf",t.hasInnerSteps),k.Sb(1),k.Cc("ngIf",t.hasLinkedArticle))},directives:[i.w,i.t,i.q,y.a,i.s],pipes:[y.d],styles:[".tooltip-tour-step-container[_ngcontent-%COMP%]{position:absolute;padding:8px;-webkit-animation:fadeIn .5s;animation:fadeIn .5s}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{height:0;position:absolute;width:0;left:0;color:#fff;text-shadow:0 8px 24px rgba(0,0,0,.05),0 4px 8px rgba(0,0,0,.05),0 2px 2px rgba(0,0,0,.05);z-index:1001}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-arrow-left[_ngcontent-%COMP%]{width:0;height:0;border-top:8px solid transparent;border-bottom:8px solid transparent;border-right:8px solid #fff}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-arrow-right[_ngcontent-%COMP%]{width:0;height:0;left:288px;border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:8px solid #fff}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:40px 16px 16px;border-radius:8px;background-color:#fff;box-shadow:0 8px 24px rgba(0,0,0,.05),0 4px 8px rgba(0,0,0,.05),0 2px 2px rgba(0,0,0,.05);z-index:1000}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:700;font-size:16px;line-height:140%;text-align:center;letter-spacing:-.4px;margin:4px 0}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-card-text[_ngcontent-%COMP%]{text-align:center;color:#7e7e7e;line-height:140%}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-tip[_ngcontent-%COMP%]{text-align:center;line-height:140%;margin:8px;padding:14px;border-radius:4px;background-color:#f1f4fa;color:rgba(61,66,66,.6)}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-close-btn-container[_ngcontent-%COMP%]{position:absolute;top:9px;right:-9px;display:flex;flex-direction:row;justify-content:flex-end;height:32px;width:100%;z-index:1001}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-close-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-animation-container[_ngcontent-%COMP%]{position:relative;margin-top:-42px;z-index:1000}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-animation-container[_ngcontent-%COMP%]   .tooltip-animation[_ngcontent-%COMP%]{width:280px;padding:4px}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-end;width:100%;padding-top:24px;bottom:0;flex-grow:1}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-footer[_ngcontent-%COMP%]   .tooltip-footer-inner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;padding:0}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;background:none;display:flex;align-items:center;text-align:center;justify-content:center;font-family:Open Sans;font-style:normal;font-weight:400;font-size:12px;line-height:140%;padding:7px 12px;height:31px;gap:10px}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-footer[_ngcontent-%COMP%]   .tooltip-btn-previous[_ngcontent-%COMP%]{color:rgba(98,104,106,.6)}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-footer[_ngcontent-%COMP%]   .tooltip-btn-next[_ngcontent-%COMP%]{color:#29947f}.tooltip-tour-step-container[_ngcontent-%COMP%]   .tooltip-tour-body[_ngcontent-%COMP%]   .tooltip-footer[_ngcontent-%COMP%]   .tooltip-btn-emphasized[_ngcontent-%COMP%]{background:rgba(81,192,170,.2);border:1px solid #29947f;border-radius:4px}.tooltip-tour-steps[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2px}.tooltip-tour-steps[_ngcontent-%COMP%]   .tooltip-tour-dot[_ngcontent-%COMP%]{background-color:rgba(202,204,206,.5);border-radius:50%;width:5px;height:5px}.tooltip-tour-steps[_ngcontent-%COMP%]   .tooltip-tour-viewed[_ngcontent-%COMP%]{background-color:#29947f}.level-zero-text[_ngcontent-%COMP%]{padding-left:32px;padding-right:32px}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}"]}),e}();function Ji(e,t){if(1&e&&k.gc(0,"tooltip-tour-step",6),2&e){var n=k.xc();k.Cc("step",n.currentStep)}}function ea(e,t){if(1&e&&(k.lc(0,"div",null,8),k.gc(2,"tooltip-tour-ripple",9),k.kc()),2&e){var n=t.$implicit,r=k.xc(2);k.Sb(2),k.Cc("anchor",n)("timer",r.animTimer)}}function ta(e,t){if(1&e&&(k.lc(0,"div"),k.cd(1,ea,3,2,"div",7),k.yc(2,"async"),k.kc()),2&e){var n=k.xc();k.Sb(1),k.Cc("ngForOf",k.zc(2,1,n.ripples))}}var na=function(e){return{"backdrop-visible":e}},ra=function(){function e(e,t,n,r){this.tourSvc=e,this.states=t,this.dll=n,this.d2vCoords=r,this.subs=[],this.ripples=new I.a([]),this.forceHideRipples=new I.a(!1),this.animTimer=Object(Oi.a)(2500)}return e.prototype.ngOnInit=function(){this.subs.push(this.listenToAnchorElementChanges(),this.listenToTooltipLevelChanges(),this.listenToTooltipDataChanges(),this.listenToCurrentStepChanges(),this.listenToLSBExpansionChanges().subscribe(),this.listenToFloatingActionPanelChanges().subscribe(),this.listenToDiagramChanges().subscribe(),this.listenToShapeSelections().subscribe(),this.listenToTaskCountChanges().subscribe(),this.listenToCanvasChanges().subscribe(),this.listenToUserChanges().subscribe(),this.periodicallyUpdateRipples().subscribe())},e.prototype.ngOnDestroy=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},e.prototype.listenToAnchorElementChanges=function(){var e=this;return this.tourSvc.stepAnchorElementMap.pipe(Object(Te.a)((function(t){e.prepareRipples(t)}))).subscribe()},e.prototype.listenToTooltipLevelChanges=function(){var e=this;return this.tourSvc.currentTooltipLevel.pipe(Object(Te.a)((function(){e.prepareRipples(e.tourSvc.stepAnchorElementMap.value)}))).subscribe()},e.prototype.listenToTooltipDataChanges=function(){var e=this;return this.tourSvc.tooltipData.pipe(Object(Te.a)((function(){e.prepareRipples(e.tourSvc.stepAnchorElementMap.value)}))).subscribe()},e.prototype.listenToCurrentStepChanges=function(){var e=this;return this.tourSvc.currentStep.pipe(Object(_.a)((function(t){t?(e.currentStep=t,e.ripples.next([]),e.showSingleRipple(t.stepId)):(e.currentStep=null,e.prepareRipples(e.tourSvc.stepAnchorElementMap.value))}))).subscribe()},e.prototype.prepareRipples=function(e){var t=this;if(!this.currentStep){var n=[];this.ripples.next([]),e.forEach((function(e){var r=t.tourSvc.tooltipData.value[e.stepId];r.viewed=t.tourSvc.tooltipStatus[r.stepId]||r.viewed,r.level!==t.tourSvc.currentTooltipLevel.value||0===r.level||r.viewed||t.tourSvc.areRequiredFeaturesAvailable(r,!0)&&n.push(e)})),this.ripples.next(n)}},e.prototype.showSingleRipple=function(e){var t=this.tourSvc.tooltipData.value[e],n=this.tourSvc.getAnchor(t),r=this.tourSvc.tooltipData.value[e].level;t&&0!==r&&this.ripples.next([n])},e.prototype.hideTooltips=function(){this.tourSvc.currentStep.next(null)},e.prototype.listenToLSBExpansionChanges=function(){var e=this;return this.states.changes("SelectedLeftPanel").pipe(Object(_.a)((function(t){if("dashboard"===t||"folders"===t);else{if("none"!==t){var n=e.tourSvc.stepAnchorElementMap.value.get("left-sidebar");n.rippleHidden=!(!n||"none"===t),e.tourSvc.updateElement(new k.r(n.element),"fab")}e.forceHideRipples.next(!1)}})))},e.prototype.listenToFloatingActionPanelChanges=function(){var e=this;return this.states.changes("SelectedFloatingPanel").pipe(Object(_.a)((function(t){var n=e.tourSvc.stepAnchorElementMap.value.get("fab");"quick-toolbar"===t?n&&(n.rippleHidden=!1,e.tourSvc.updateElement(new k.r(n.element),"fab")):n&&(n.rippleHidden=!0,e.tourSvc.updateElement(new k.r(n.element),"fab")),e.prepareRipples(e.tourSvc.stepAnchorElementMap.value)})))},e.prototype.listenToShapeSelections=function(){var e=this;return this.states.changes("Selected").pipe(Object(_.a)((function(t){var n=e.tourSvc.stepAnchorElementMap.value.get("data");n&&t.length?(n.rippleHidden=!1,e.tourSvc.updateElement(new k.r(n.element),"data")):n&&(n.rippleHidden=!0,e.tourSvc.updateElement(new k.r(n.element),"data")),e.prepareRipples(e.tourSvc.stepAnchorElementMap.value)})))},e.prototype.listenToDiagramChanges=function(){var e=this;return this.states.changes("CurrentDiagram").pipe(Object(je.a)((function(e){return!Boolean(e)})),Object(Jt.a)(),Object(_.a)((function(){e.forceHideRipples.next(!0)})))},e.prototype.listenToTaskCountChanges=function(){var e=this,t=this.tourSvc.taskCount.value;return this.tourSvc.taskCount.pipe(Object(Ei.a)(2),Object(_.a)((function(n){var r=!0!==e.tourSvc.tooltipStatus["lsb-3.1"]&&null!==t;n&&r&&e.tourSvc.showTooltip("lsb-3",!0),t=n})))},e.prototype.listenToCanvasChanges=function(){return this.states.changes("DiagramPanNonAuto").pipe(Object(_.a)((function(){})))},e.prototype.listenToUserChanges=function(){var e=this;return this.states.changes("CurrentUser").pipe(Object(_.a)((function(t){""===t?e.forceHideRipples.next(!0):e.forceHideRipples.next(!1)})))},e.prototype.periodicallyUpdateRipples=function(){var e=this;return Object(Oi.a)(100).pipe(Object(_.a)((function(){e.rippleElements.forEach((function(e){e.updateRipple()})),e.prepareRipples(e.tourSvc.stepAnchorElementMap.value)})))},e.\u0275fac=function(t){return new(t||e)(k.fc(xi.a),k.fc(C.Ib),k.fc(sn.a),k.fc(_i.a))},e.\u0275cmp=k.Zb({type:e,selectors:[["tooltip-tour-overlay"]],viewQuery:function(e,t){var n;(1&e&&k.jd(Ai,!0),2&e)&&(k.Lc(n=k.uc())&&(t.rippleElements=n))},decls:7,vars:7,consts:[[1,"tooltip-tour-overlay"],["overlay",""],[3,"step",4,"ngIf"],["tooltip-tour-step","root,root-1,root-2,root-3,root-4"],[4,"ngIf"],[3,"ngClass"],[3,"step"],[4,"ngFor","ngForOf"],["ripple",""],[3,"anchor","timer"]],template:function(e,t){1&e&&(k.lc(0,"div",0,1),k.cd(2,Ji,1,1,"tooltip-tour-step",2),k.gc(3,"div",3),k.cd(4,ta,3,3,"div",4),k.yc(5,"async"),k.gc(6,"div",5),k.kc()),2&e&&(k.Sb(2),k.Cc("ngIf",t.currentStep),k.Sb(2),k.Cc("ngIf",!k.zc(5,3,t.forceHideRipples)),k.Sb(2),k.Cc("ngClass",k.Hc(5,na,t.currentStep)))},directives:[i.t,un.a,i.q,Qi,i.s,Ai],pipes:[i.b],styles:[".tooltip-tour-overlay[_ngcontent-%COMP%]{z-index:1002;position:absolute}.backdrop-visible[_ngcontent-%COMP%]{width:100vw;height:100vh;background:rgba(202,204,206,.35)}.tooltip-tour-overlay-canvas-anchor[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),e}(),ia=n("xejr"),aa=n("sXdR"),oa=n("lu3Q"),sa=n("qZtG"),ca=n("9WAt"),la=n("2m+3"),ua=n("h1tj"),pa=function(e){function t(t,n){var r=e.call(this,t)||this;return r.boundsLocator=n,r._zoom=1,r._panX=r.x,r._panY=r.y,ua.Touch.enable(r),r}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"zoom",{get:function(){return this._zoom},set:function(e){this._zoom=e,this.setCanvasScale()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panX",{get:function(){return this._panX},set:function(e){this._panX=e,this.setCanvasPan()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panY",{get:function(){return this._panY},set:function(e){this._panY=e,this.setCanvasPan()},enumerable:!1,configurable:!0}),t.prototype.getMouseX=function(){return this.mouseX/window.devicePixelRatio},t.prototype.getMouseY=function(){return this.mouseY/window.devicePixelRatio},t.prototype.setupStage=function(){var e=this;this.snapToPixelEnabled=!0,this.screenRatioChange=Object(P.a)(ua.Ticker,"tick").pipe(Object(je.a)((function(e){return!e.paused})),Object(Te.a)((function(){return window.devicePixelRatio})),Object(Jt.a)()),this.screenSizeChange=this.getScreenSizeChanges(),this.screenSizeChange.subscribe((function(){return e.updateCanvasSize()})),this.captureMouseEventOnRetinaScreen().subscribe((function(t){return e.updateStagePosition(t)}))},t.prototype.getScreenSizeChanges=function(){return Object(Z.a)(this.screenRatioChange,Object(P.a)(window,"resize"))},t.prototype.captureMouseEventOnRetinaScreen=function(){var e=this;return this.screenRatioChange.pipe(Object(je.a)((function(e){return 1!==e})),Object(E.a)((function(){return Object(Z.a)(Object(P.a)(e,"mousedown",{capture:!0}),Object(P.a)(e,"pressmove",{capture:!0}),Object(P.a)(e,"pressup",{capture:!0}),Object(P.a)(e,"stagemousedown"),Object(P.a)(e,"stagemousemove"),Object(P.a)(e,"stagemouseup")).pipe(Object(Ne.a)(e.screenRatioChange.pipe(Object(je.a)((function(e){return 1===e})))))})),Object(Te.a)((function(e){return e})))},t.prototype.updateStagePosition=function(e){e.stageX=e.stageX/window.devicePixelRatio,e.stageY=e.stageY/window.devicePixelRatio},t.prototype.updateCanvasSize=function(){var e=this.canvas,t=e.width!==e.offsetWidth*window.devicePixelRatio,n=e.height!==e.offsetHeight*window.devicePixelRatio;t&&(e.width=e.offsetWidth*window.devicePixelRatio),n&&(e.height=e.offsetHeight*window.devicePixelRatio),this.setCanvasScale(),this.setCanvasPan(),this.update()},t.prototype.setCanvasScale=function(){this.scaleX=window.devicePixelRatio*this._zoom,this.scaleY=window.devicePixelRatio*this._zoom},t.prototype.setCanvasPan=function(){this.x=this._panX*window.devicePixelRatio,this.y=this._panY*window.devicePixelRatio},t.prototype._getObjectsUnderPoint=function(e,t,n,r,i,a){if(this.boundsLocator){var o=this.globalToLocal(e,t),s=this.boundsLocator.searchShapes(o.x-10,o.x+10,o.y-10,o.y+10),c=this.children.filter((function(e){return s.find((function(t){return t.id===e.name}))}));return this._getObjectsUnderPointOriginal(e,t,n,r,i,a,c)}return this._getObjectsUnderPointOriginal(e,t,n,r,i,a,this.children)},t.prototype._getObjectsUnderPointOriginal=function(e,t,n,r,i,a,o){if(!(a=a||0)&&!this._testMask(this,e,t))return null;var s,c=ua.DisplayObject._hitTestContext;i=i||r&&this._hasMouseEventListener();for(var l=o.length-1;l>=0;l--){var u=o[l],p=u.hitArea;if(u.visible&&(p||u.isVisible())&&(!r||u.mouseEnabled)&&(p||this._testMask(u,e,t)))if(!p&&u instanceof ua.Container){var h=u._getObjectsUnderPoint(e,t,n,r,i,a+1,o);if(!n&&h)return r&&!this.mouseChildren?this:h}else{if(r&&!i&&!u._hasMouseEventListener())continue;var d=u.getConcatenatedDisplayProps(u._props);if(s=d.matrix,p&&(s.appendMatrix(p.getMatrix(p._props.matrix)),d.alpha=p.alpha),c.globalAlpha=d.alpha,c.setTransform(s.a,s.b,s.c,s.d,s.tx-e,s.ty-t),(p||u).draw(c),!this._testHit(c))continue;if(c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,2,2),!n)return r&&!this.mouseChildren?this:u;n.push(u)}}return null},t}(ua.Stage),ha=function(){function e(e,t){this.gridService=e,this.state=t,this.dotSize=3,this.maxDotSize=8,this.minDotSize=1.5,this.dotColor="#E8E8EB",this.backgroundColor="#FAFAFC",this.minZoomLevel=.2,this.dotsSpacing=20,this.buffer=100,this._changed=!1}return Object.defineProperty(e.prototype,"canvasId",{get:function(){return"grid-area-canvas"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChanges",{get:function(){return this._changed},enumerable:!1,configurable:!0}),e.prototype.updateCanvas=function(){this.canvas.update()},e.prototype.clearChanges=function(){this._changed=!1},e.prototype.ngAfterViewInit=function(){var e=this;this._canvas=new pa(this.canvasId),this._canvas.setupStage(),this._grid=new ua.Shape,this._canvas.addChild(this._grid),this.getAllChanges().subscribe((function(){var t=e.state.get("DiagramZoomLevel")||1,n=e.state.get("DiagramPan")||{x:0,y:0};e.drawGrid(t,n)}))},e.prototype.getAllChanges=function(){return Object(Z.a)(this.state.changes("DiagramViewPort"),this.state.changes("DiagramZoomLevel"),this.state.changes("DiagramPan"),this.gridService.showGrid)},e.prototype.getCanvasBounds=function(){var e=this.canvas.canvas.getBoundingClientRect();return C.vb.fromClientRect(e)},e.prototype.drawGrid=function(e,t){this._canvas.panX=t.x,this._canvas.panY=t.y,this._grid.graphics.clear(),this.drawBackground(t),this.gridService.showGrid.value&&this.drawDottedGrid(e,t),this._changed=!0},e.prototype.drawDottedGrid=function(e,t){var n,i,a,o;if(!(e<this.minZoomLevel)){var s=this.getCornerPoints(t),c=s.topLeft,l=s.bottomRight,u=this.getGridLines(c.x,l.x,e),p=this.getGridLines(c.y,l.y,e),h=c.y;try{for(var d=Object(r.k)(p),f=d.next();!f.done;f=d.next()){if((y=f.value)%this.dotsSpacing){h=y*e;break}}}catch(C){n={error:C}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var g=this.dotsSpacing*e,m=Math.max(this.minDotSize,Math.min(this.dotSize*e,this.maxDotSize));try{for(var v=Object(r.k)(u),b=v.next();!b.done;b=v.next()){var y;if((y=b.value)%this.dotsSpacing){var x=y*e;this.drawDottedLine({x:x,y:h},{x:x,y:l.y},g,m)}}}catch(w){a={error:w}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(a)throw a.error}}}},e.prototype.drawHorizontalGridLines=function(e,t){var n,i,a=this.getCornerPoints(t),o=a.topLeft,s=a.bottomRight,c=this.getGridLines(o.y,s.y,e);try{for(var l=Object(r.k)(c),u=l.next();!u.done;u=l.next()){var p=u.value,h=p*e;this.drawLine({x:o.x,y:h},{x:s.x,y:h},this.gridService.isOnGridMajor(p))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}},e.prototype.drawVerticalGridLines=function(e,t){var n,i,a=this.getCornerPoints(t),o=a.topLeft,s=a.bottomRight,c=this.getGridLines(o.x,s.x,e);try{for(var l=Object(r.k)(c),u=l.next();!u.done;u=l.next()){var p=u.value,h=p*e;this.drawLine({x:h,y:o.y},{x:h,y:s.y},this.gridService.isOnGridMajor(p))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}},e.prototype.drawLine=function(e,t,n){void 0===n&&(n=!1),this._grid.graphics.setStrokeStyle(n?1:.5),this._grid.graphics.beginStroke(n?"#E8E8E8":"#F0F0F0"),this._grid.graphics.moveTo(e.x,e.y),this._grid.graphics.lineTo(t.x,t.y),this._grid.graphics.endStroke()},e.prototype.drawDottedLine=function(e,t,n,r){this._grid.graphics.setStrokeStyle(r,"round"),this._grid.graphics.setStrokeDash([0,n]),this._grid.graphics.beginStroke(this.dotColor),this._grid.graphics.moveTo(e.x,e.y),this._grid.graphics.lineTo(t.x,t.y),this._grid.graphics.endStroke()},e.prototype.drawBackground=function(e){var t=this.getCornerPoints(e),n=t.topLeft,r=t.bottomRight;this._grid.graphics.beginFill(this.backgroundColor),this._grid.graphics.drawRect(n.x,n.y,r.x-n.x,r.y-n.y),this._grid.graphics.endFill()},e.prototype.getCornerPoints=function(e){var t=this.getCanvasBounds();return{topLeft:{x:t.x-e.x-this.buffer,y:t.y-e.y-this.buffer},bottomRight:{x:t.x-e.x+t.width+this.buffer,y:t.y-e.y+t.height+this.buffer}}},e.prototype.getGridLines=function(e,t,n){return this.gridService.getGridLines(e/n,t/n)},e.\u0275fac=function(t){return new(t||e)(k.fc("GridService"),k.fc(C.Ib))},e.\u0275cmp=k.Zb({type:e,selectors:[["grid-area"]],decls:1,vars:1,consts:[["tabindex","0",1,"fx-cover",3,"id"]],template:function(e,t){1&e&&k.gc(0,"canvas",0),2&e&&k.Dc("id",t.canvasId)},encapsulation:2,changeDetection:0}),e}(),da=n("+AVE"),fa=function(e){function t(t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0);var a=e.call(this,t,r,i)||this;return a.child=n,a}return Object(r.e)(t,e),t}(ua.Event),ga=n("Dnwm"),ma=function(e){function t(t){var n=e.call(this,t)||this;return n.model=t,n.horizontalTextPadding=10,n}return Object(r.e)(t,e),t.prototype.update=function(t,n,r,i){if(e.prototype.update.call(this,t,n),r){var a=i?i.scaleX:1;this.lineWidth=Math.abs(t.hitArea?t.hitArea.width:r.width*a)-2*pe.w,t.width>this.lineWidth&&(this.lineWidth=t.width);var o=void 0;o=void 0!==t.width?new C.vb(0,0,t.width,t.height):t.wordWrap?this.getTextBounds(t.value,t.hitArea?t.hitArea.width:r.width):this.getTextBounds(t.value),this.position(t.position,t.alignX,t.alignY,o,r,i),this.updateHitArea(t,o)}this.updateViewCache(t,n)},t.prototype.position=function(e,t,n,r,i,a){var o={width:this.lineWidth,height:r.height},s=de.G.getPointOnShape(e,i,a),c=de.G.getPointOnText(o,t,n,a);this.regX=c.x,this.regY=c.y,this.x=s.x,this.y=s.y,this.applyTransform(a)},t.prototype.applyTransform=function(e){e&&(this.rotation=de.G.getTextAngle(e),this.rotation=this.rotation+this.model.angle)},t}(n("wOpJ").a),va=n("cs9O"),ba=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedShape",{get:function(){return this.container},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.container=this.getContainer(this.id,this.model.type),this.imageElem=this.getImageElement(),this.imageElem.crossOrigin="anonymous",this.imageElem.onload=function(){return e.onImageLoad()},this.imageElem.onerror=function(t){return e.onImageLoadFailure(t)},this.imageElem.src=this._imageSource,this.image=this.getBitmap(this.imageElem),this.container.addChild(this.image)},t.prototype.render=function(t){e.prototype.render.call(this,t),this.scaleWidth(this.model.drawWidth/this.imageElem.width),this.scaleHeight(this.model.drawHeight/this.imageElem.height),this.image.setBounds(0,0,this.imageElem.width,this.imageElem.height)},t.prototype.onImageLoad=function(){this.render(),this.container&&this.container.stage?this.container.stage.update():C.db.warning("Image on loading failed due to unknown error. Either container or stage is null.")},t.prototype.onImageLoadFailure=function(e){C.db.error("Image loading failed for shape "+this.model.id)},t.prototype.addText=function(e){var t=new ma(e);this.container.addChild(t),this._texts.push(t)},t.prototype.removeText=function(t){e.prototype.removeText.call(this,t),this.renderedShape.removeChild(t)},t.prototype.move=function(e,t){this.image.x=e,this.image.y=t},t.prototype.scaleHeight=function(e){this.image.scaleY=e},t.prototype.scaleWidth=function(e){this.image.scaleX=e},t.prototype.rotate=function(e){this.image.rotation=e},t.prototype.getImageElement=function(){return new Image},t.prototype.getBitmap=function(e){return new ua.Bitmap(this.imageElem)},t.prototype.getContainer=function(e,t){return new va.a(e,t)},t}(de.p),ya=function(){function e(e){this.imageModel=e,this.fileAtInit=this.imageModel.file}return Object.defineProperty(e.prototype,"name",{get:function(){return this.imageModel.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"file",{get:function(){return this.fileAtInit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderedImage",{get:function(){return this.bitmap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageOutline",{get:function(){return this.bitmapMask},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){var e=this,t=this.getImageElement();t.crossOrigin="anonymous",t.onload=function(){return e.onImageReady()},t.onerror=function(){return e.onImageError()},t.src=this.getImageUrl(),this.bitmap=this.getBitmapShape(t),this.bitmap.name=this.imageModel.id,this.setImageStoke()},e.prototype.update=function(e,t,n,r){var i=this;this.deferredUpdate=function(){return i.update(e,t,n,r)},this.imageModel=e;var a=this.bitmap.getBounds();if(a&&(this.resizeChild(n,a,this.imageModel,this.bitmap,r),this.positionChild(n,a,this.imageModel,this.bitmap,r),0===this.bitmap.cacheID&&this.bitmap.cache(0,0,a.width,a.height),this.bitmap.updateCache(),this.imageModel.mask)){this.bitmapMask||(this.bitmapMask=new ua.Shape,"square"===this.imageModel.mask.type?this.bitmapMask.graphics.f("rgba(255, 0, 0, 0.5)").dr(0,0,100,100):"roundedsquare"===this.imageModel.mask.type?this.bitmapMask.graphics.f("rgba(255, 0, 0, 0.5)").drawRoundRect(0,0,100,100,5):this.bitmapMask.graphics.f("rgba(255, 0, 0, 1)").dc(50,50,50),this.bitmapMask.setBounds(0,0,100,100)),this.bitmap.mask=this.bitmapMask;var o=this.bitmapMask.getBounds();this.setImageStoke(),this.resizeChild(n,o,this.imageModel.mask,this.bitmapMask,r),this.positionChild(n,o,this.imageModel.mask,this.bitmapMask,r)}},e.prototype.destroy=function(){},e.prototype.setImageStoke=function(){this.imageModel.mask&&this.imageModel.mask.stroke&&(this.bitmapMask||(this.bitmapMask=new ua.Shape),this.bitmapMask.graphics.clear(),this.imageModel.mask.stroke.size>0&&this.bitmapMask.graphics.setStrokeStyle(this.imageModel.mask.stroke.size).s(this.imageModel.mask.stroke.color),"square"===this.imageModel.mask.type?this.bitmapMask.graphics.dr(0,0,100,100):"roundedsquare"===this.imageModel.mask.type?this.bitmapMask.graphics.drawRoundRect(0,0,100,100,5):this.bitmapMask.graphics.dc(50,50,50),this.bitmapMask.setBounds(0,0,100,100))},e.prototype.getImageUrl=function(){return this.imageModel.fileType&&"url"===this.imageModel.fileType?this.fileAtInit:this.imageModel.fileType&&"shapesassets"===this.imageModel.fileType?"./assets/images/shapes-assets/"+this.fileAtInit:C.m.get("CUSTOM_IMAGE_BASE_URL")+this.fileAtInit},e.prototype.onImageReady=function(){this.deferredUpdate&&(this.deferredUpdate(),this.deferredUpdate=null),this.bitmap.stage&&this.bitmap.stage.update()},e.prototype.onImageError=function(){},e.prototype.getImageElement=function(){return new Image},e.prototype.getBitmapShape=function(e){return new ua.Bitmap(e)},e.prototype.resizeChild=function(e,t,n,r,i){n.w&&n.h?(r.scaleX=this.getExpectedScaleX(e,t,n,i),r.scaleY=this.getExpectedScaleY(e,t,n,i)):n.w?(r.scaleX=this.getExpectedScaleX(e,t,n,i),r.scaleY=r.scaleX):n.h?(r.scaleY=this.getExpectedScaleY(e,t,n,i),r.scaleX=r.scaleY):(r.scaleX=1,r.scaleY=1)},e.prototype.getExpectedScaleX=function(e,t,n,r){return"fixed"===n.w.type?n.w.value/t.width:"relative"===n.w.type?e.width*r.scaleX*n.w.value/t.width:(C.db.error("ShapeImageView: invalid shape image (or mask) width type"),1)},e.prototype.getExpectedScaleY=function(e,t,n,r){return"fixed"===n.h.type?n.h.value/t.height:"relative"===n.h.type?e.height*r.scaleY*n.h.value/t.height:(C.db.error("ShapeImageView: invalid shape image (or mask) height type"),1)},e.prototype.positionChild=function(e,t,n,r,i){var a=C.ob.onRect({x:n.x||{type:"relative",value:0},y:n.y||{type:"relative",value:0}},e,i),o={x:0,y:0};"l"===n.alignX||("r"===n.alignX?o.x=t.width:o.x=t.width/2),"t"===n.alignY||("b"===n.alignY?o.y=t.height:o.y=t.height/2),r.regX=o.x,r.regY=o.y,r.x=a.x,r.y=a.y,r.rotation=i.angle},e}(),xa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedShape",{get:function(){return this.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"graphics",{get:function(){return this.shape.graphics},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadow",{get:function(){return this.shadowShape.graphics},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){this.container=new va.a(this.id,this.model.type),this.shape=new ua.Shape,this.container.convertToCursorDrawable(this.shape),this.shape.name=this.id,this.shadowShape=new ua.Shape,this.model.style.shadow?(this.shadowShape.shadow=new ua.Shadow(this.model.style.shadow.color,this.model.style.shadow.offsetX,this.model.style.shadow.offsetY,this.model.style.shadow.blur),this.container.addChild(this.shadowShape,this.shape)):this.container.addChild(this.shape)},t.prototype.render=function(t){if(e.prototype.render.call(this,t),this.model.transformSettings.scaleRender===pe.z.redraw)this.shape.setBounds(0,0,this.model.drawWidth,this.model.drawHeight),this.shadowShape.setBounds(0,0,this.model.drawWidth,this.model.drawHeight);else{var n=this.model.defaultBounds;this.shape.setBounds(n.x,n.y,n.width,n.height),this.shadowShape.setBounds(n.x,n.y,n.width,n.height)}},t.prototype.addText=function(e){if(!e.displayableTextId){var t=new ma(e);this.container.addChild(t),this._texts.push(t)}},t.prototype.removeText=function(t){e.prototype.removeText.call(this,t),this.renderedShape.removeChild(t)},t.prototype.addImage=function(e){var t=new ya(e);t.initialize(),this._images.push(t),this.container.addChild(t.renderedImage),t.imageOutline&&this.container.addChild(t.imageOutline)},t.prototype.move=function(e,t){this.shape.x=e,this.shape.y=t,this.shadowShape.x=e,this.shadowShape.y=t},t.prototype.scaleHeight=function(e){this.shape.scaleY=e,this.shadowShape.scaleY=e},t.prototype.scaleWidth=function(e){this.shape.scaleX=e,this.shadowShape.scaleX=e},t.prototype.rotate=function(e){this.shape.rotation=e,this.shadowShape.rotation=e},t}(de.y),Ca=n("W9bu"),wa=n("JPqQ"),ka=function(e){function t(t,n,r,i,a,o,s,c){var l=e.call(this,i)||this;return l.link=t,l.ll=n,l.commandService=r,l.state=i,l.logger=a,l.shapesBoundsLocator=o,l.drs=s,l.postMessage=c,l.renderedShapes=[],l._changed=!1,l.fitToScreenPadding=30,l.changes={},l.handleZIndexChange=Object(tn.debounce)(l.handleZIndexChange.bind(l),100),l.state.initialize("ShapeViews",l.renderedShapes),l}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"canvasId",{get:function(){return"diagram-draw-area"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasChanges",{get:function(){return this._changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locator",{get:function(){return this.ll.forCurrentObserver(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shapeViewType",{get:function(){return xa},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageViewType",{get:function(){return ba},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectorViewType",{get:function(){return ga.a},enumerable:!1,configurable:!0}),t.prototype.updateCanvas=function(){var t;for(var n in this.changes){var r=this.changes[n],i=r.shape,a=r.modifier;1===this.renderedShapes.length&&(null===(t=null==a?void 0:a.$set)||void 0===t?void 0:t.defId)&&this.setActiveShapes();try{e.prototype.render.call(this,i,a)}catch(o){console.log("Diagram view error: ",o)}this.changeTextVisibility(this.state.get("EditingText"))}this.changes={},this.canvas.update()},t.prototype.ngOnDestroy=function(){for(;this._subs.length>0;)this._subs.pop().unsubscribe()},t.prototype.clearChanges=function(){this._changed=!1},t.prototype.ngAfterViewInit=function(){var e=this;this._canvas=new pa(this.canvasId,this.shapesBoundsLocator),this._canvas.setupStage(),this._canvas.enableMouseOver(5),this._subs.push(this.loadFonts().pipe(Object(E.a)((function(){return e.commandService.dispatch(it.a.updateTextBounds),e.populateDiagram()}))).subscribe()),this._subs.push(this.onEditTextChanges().subscribe()),this.state.set("DiagramPan",new C.mb(this._canvas.panX,this._canvas.panY)),this.state.changes("DiagramPan").subscribe((function(t){return e.pan(t)})),this.state.set("DiagramZoomLevel",1),this.state.changes("DiagramZoomLevel").subscribe((function(t){return e.zoom(t)})),this._subs.push(this.fitToScreen()),this._subs.push(this.listenToFilterChange()),this.commandService.dispatch(it.a.migrateToNewRegionType),this.commandService.preview(it.a.diagramContainersReLayout),this.initSetActiveShapes(),this.postMessage.sendToParent("document:visible",{documentId:this.state.get("CurrentDiagram")})},t.prototype.initSetActiveShapes=function(){var e=this;this._subs.push(this.state.changes("DiagramLoadComplete").pipe(Object(je.a)((function(e){return!!e})),Object(E.a)((function(){return e.state.changes("ActiveShapes").pipe(Object(Jt.a)(tn.isEqual))}))).subscribe((function(t){e.setActiveShapes()})))},t.prototype.setActiveShapes=function(){var e=this;this.canvas.removeAllChildren(),this.renderedShapes.filter((function(t){return e.state.get("ActiveShapes").includes(t.name)})).forEach((function(t){return e.canvas.addChild(t)})),this._changed=!0},t.prototype.pan=function(e){this._canvas.panX=e.x,this._canvas.panY=e.y,this._changed=!0},t.prototype.zoom=function(e){this._canvas.zoom=e,this._changed=!0},t.prototype.fitToScreen=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(Jt.a)(tn.isEqual),Object(E.a)((function(){var t=e.state.get("FocusTarget")||{};return t.shapeId?(e.link.navigateToShape(t.shapeId),e.state.set("FocusTarget",{}),e.state.set("Selected",[t.shapeId]),Object(Oe.a)(null)):t.groupId?(e.link.navigateToGroup(t.groupId),e.state.set("FocusTarget",{}),Object(Oe.a)(null)):e.state.changes("DiagramViewPort").pipe(Object(je.a)((function(e){return!!e})),Object(Qt.a)(1),Object(E.a)((function(){return Object(Oe.a)(!0)})))}))).subscribe((function(t){t&&e.commandService.dispatch(gi.a.zoomAndPanDiagram)}))},t.prototype.loadDiagramFonts=function(){var e=this;return this.locator.pipe(Object(E.a)((function(e){return e.getCurrentShapes()})),Object(E.a)((function(t){var n,i,a,o,s=[],c=new de.F;try{for(var l=Object(r.k)(t),u=l.next();!u.done;u=l.next()){var p=u.value;if(p.hasAnyText)for(var h in p.texts){var d=p.texts[h],f=c.extractFonts(d.content);try{for(var g=(a=void 0,Object(r.k)(f)),m=g.next();!m.done;m=g.next()){var v=m.value;-1===s.indexOf(v)&&s.push(v)}}catch(b){a={error:b}}finally{try{m&&!m.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}}}}catch(y){n={error:y}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return e.loadFonts(s)})))},t.prototype.getZoomToViewPortLevel=function(e,t){var n=e.width-t.width,r=e.height-t.height,i=1;return n/t.width<r/t.height&&r>0?i=t.height/e.height:n>0&&(i=t.width/e.width),i},t.prototype.render=function(e,t){if(this.changes[e.id]){this.changes[e.id].modifier;this.changes[e.id]={shape:e,modifier:(n=t,n)}}else this.changes[e.id]={shape:e,modifier:t};var n;this._changed=!0},t.prototype.addShape=function(t){e.prototype.addShape.call(this,t),this.renderedShapes.push(t.renderedShape),this.handleZIndexChange(t.id),this.state.get("DiagramLoadComplete")&&this._canvas.dispatchEvent(new fa("newChildAdded",t.renderedShape)),this._canvas.dispatchEvent(new fa("childAdded",t.renderedShape))},t.prototype.removeShape=function(t){e.prototype.removeShape.call(this,t);var n=this.renderedShapes.findIndex((function(e){return e.name===t}));this._canvas.dispatchEvent(new fa("childRemoved",this.renderedShapes[n])),this.renderedShapes.splice(n,1);var r=this._canvas.getChildByName(t);r&&this._canvas.removeChild(r),this._changed=!0},t.prototype.handleZIndexChange=function(e,t){var n=this;void 0===t&&(t=100),this.renderedShapes&&this.renderedShapes.length>1&&this.locator.pipe(Object(E.a)((function(e){return e.getDiagramOnce()})),Object($t.a)(t)).subscribe((function(e){var t,i,a=[],o=e.getShapesOrderedByIndex();try{for(var s=Object(r.k)(o),c=s.next();!c.done;c=s.next()){var l=c.value,u=n.getShapeViews()[l.id];u&&a.push(u.renderedShape)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}n.renderedShapes=a,n.state.set("ShapeViews",n.renderedShapes),n.setActiveShapes()}))},t.prototype.onEditTextChanges=function(){var e=this;return this.state.changes("EditingText").pipe(Object(Te.a)((function(t){Object(tn.values)(e.getShapeViews()).forEach((function(e){e.allTextViews.forEach((function(e){return e.visible=!0}))})),e.changeTextVisibility(t),e._changed=!0})))},t.prototype.changeTextVisibility=function(e){if(e&&e.open&&e.shapeId&&e.textId){var t=(this.getShapeViews()||{})[e.shapeId];if(t){var n=e.textId;this.locator.pipe(Object(E.a)((function(t){return t.getShapeOnce(e.shapeId)})),Object(je.a)((function(e){return!!e})),Object(Te.a)((function(t){var r=t.texts[e.textId];r&&(n=r.displayableTextId?r.displayableTextId:n)}))).subscribe((function(){var e=t.getTextView(n);e&&(e.visible=!1)}))}}},t.prototype.loadFonts=function(e){var t=this;if(e||(e=Object.keys(pe.A)),e&&0===e.length)return hi.a;var n=Promise.all(e.map((function(e){return new da(e).load()}))).catch((function(e){t.logger.warning("Failed to load some fonts:",e.message)}));return Object(Se.a)(n)},t.prototype.listenToFilterChange=function(){var e=this;return this.drs.filterActions.pipe(Object(_.a)((function(t){var n=e.getShapeViews();n[t.shapeId]&&(n[t.shapeId].dynamicStyle=t.style,e._changed=!0)}))).subscribe()},t.\u0275fac=function(e){return new(e||t)(k.fc(Ca.a),k.fc(sn.a),k.fc(C.B),k.fc(C.Ib),k.fc(C.db),k.fc(kr.a),k.fc(wa.a),k.fc(C.pb))},t.\u0275cmp=k.Zb({type:t,selectors:[["diagram-view"]],features:[k.Pb],decls:1,vars:1,consts:[["tabindex","0",1,"fx-cover",3,"id"]],template:function(e,t){1&e&&k.gc(0,"canvas",0),2&e&&k.Dc("id",t.canvasId)},encapsulation:2,changeDetection:0}),t}(de.l),Sa=function(){function e(e,t,n){this.state=e,this.injector=t,this.commandService=n,this._changed=!1,this.handlerList=new Map,this.subs=[]}return Object.defineProperty(e.prototype,"canvasId",{get:function(){return"interaction-area-canvas"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChanges",{get:function(){return this._changed},enumerable:!1,configurable:!0}),e.prototype.updateCanvas=function(){this.canvas.update()},e.prototype.clearChanges=function(){this._changed=!1},e.prototype.ngAfterViewInit=function(){var e=this;this._canvas=new pa(this.canvasId),this._canvas.setupStage(),this._canvas.enableMouseOver(ua.Ticker.framerate),this.state.initialize("InteractionCanvas",this._canvas);var t=this.state.changes("IndicatorHandlerList").pipe(Object(E.a)((function(t){return e.state.changes("PanZoomState").pipe(Object(Te.a)((function(e){if("started"===e){var n=Array.from(t).filter((function(e){return!e.removeForPanZoom}));return new Set(Object(r.j)(n))}return t})))}))).subscribe((function(t){e.createIndocatorHandlers(t),Array.from(t).reverse().forEach((function(t,n){var r=e.handlerList.get(t).container;e.canvas.setChildIndex(r,n)}))}));this.subs.push(t)},e.prototype.ngOnDestroy=function(){for(this.state.remove("InteractionCanvas");this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.createIndocatorHandlers=function(e){var t,n,i,a;try{for(var o=Object(r.k)(e),s=o.next();!s.done;s=o.next()){var c=s.value;this.handlerList.has(c)||this.addHandler(c)}}catch(h){t={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}try{for(var l=Object(r.k)(this.handlerList),u=l.next();!u.done;u=l.next()){var p=Object(r.h)(u.value,2);c=p[0],p[1];e.has(c)||this.removeHandler(c)}}catch(d){i={error:d}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}},e.prototype.createHandler=function(e){return k.C.create(this.getProviders(e),this.injector).get(e)},e.prototype.addHandler=function(e){var t=this,n=this.createHandler(e);n.indicatorLayer=this._canvas,this.canvas.addChild(n.container),n.add().subscribe((function(e){return t.addIndicator(e,n.container)})),n.remove().subscribe((function(e){return t.removeIndicator(e,n.container)})),n.change().subscribe((function(){return t._changed=!0})),n.initialize(),this.handlerList.set(e,n)},e.prototype.removeHandler=function(e){var t=this.handlerList.get(e);this.canvas.removeChild(t.container),this._changed=!0,t.destroy(),this.handlerList.delete(e)},e.prototype.addIndicator=function(e,t){t.addChild(e),this._changed=!0},e.prototype.removeIndicator=function(e,t){t.removeChild(e),this._changed=!0},e.prototype.getProviders=function(e){return[{provide:e,useClass:e,deps:Reflect.getMetadata("design:paramtypes",e)||[]}]},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(k.C),k.fc(C.B))},e.\u0275cmp=k.Zb({type:e,selectors:[["interaction-area"]],decls:1,vars:2,consts:[["tabindex","0",1,"fx-cover",3,"id"]],template:function(e,t){1&e&&k.gc(0,"canvas",0),2&e&&(k.Dc("id",t.canvasId),k.Tb("data-testid",t.canvasId))},encapsulation:2,changeDetection:0}),e}(),Oa=n("LaGA"),Ea=function(){function e(){}return e.FRAME_RATE_COUNT=0,e}(),_a=n("0Woy"),Ia=function(){function e(e){this.state=e,this.svgNS="http://www.w3.org/2000/svg",this.containerId="free-hand-container",this.svgId="freehand-svg",this.svgPathId="freehand-svg-path",this.subs=[]}return Object.defineProperty(e.prototype,"isFreeHandMode",{get:function(){return this.state.changes("MouseControlState").pipe(Object(E.a)((function(e){return e===yi.b.Pen||e===yi.b.Highlighter?Object(Oe.a)(!0):Object(Oe.a)(!1)})))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.subs.push(this.showSvgContainer().subscribe(),this.updateSvgViewBox().subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getViewportBounds=function(){return document.querySelector(".diagram-viewport").getBoundingClientRect()},e.prototype.updateSvgViewBox=function(){var e=this;return this.state.changes("DiagramViewPort").pipe(Object(je.a)((function(t){var n=e.state.get("MouseControlState");return!!t&&(n===yi.b.Pen||n===yi.b.Highlighter)})),Object(_.a)((function(t){var n=(t=e.getViewportBounds()).width,r=t.height,i=t.x,a=t.y,o=document.getElementById(e.containerId),s="margin-left: "+i+"px; margin-top: "+a+"px; margin-right: "+t.right+"px;";o.setAttribute("style",s);var c=document.getElementById(e.svgId);c.setAttributeNS(null,"viewBox",i+" "+a+" "+n+" "+r),c.setAttributeNS(null,"width",n.toString()),c.setAttributeNS(null,"height",r.toString())})))},e.prototype.showSvgContainer=function(){var e=this;return this.state.changes("MouseControlState").pipe(Object(_a.a)(),Object(E.a)((function(t){var n=document.getElementById(e.containerId),r=[yi.b.Highlighter,yi.b.Pen],i=t[1],a=t[0];if(!r.includes(a)&&r.includes(i)){if(0===n.childNodes.length){var o=e.getViewportBounds(),s=o.width,c=o.height,l=o.x,u=o.y,p="margin-left: "+l+"px; margin-top: "+u+"px; margin-right: "+o.right+"px;";n.setAttribute("style",p);var h=document.createElementNS(e.svgNS,"svg");h.setAttributeNS(null,"id",e.svgId),h.setAttributeNS(null,"viewBox",l+" "+u+" "+s+" "+c),h.setAttributeNS(null,"width",s.toString()),h.setAttributeNS(null,"height",c.toString()),h.setAttributeNS(null,"fill","none");var d=document.createElementNS(e.svgNS,"path");d.setAttributeNS(null,"id",e.svgPathId),d.setAttributeNS(null,"stroke-linecap","round"),d.setAttributeNS(null,"stroke-width","0"),d.setAttributeNS(null,"stroke","#00FFFFFF"),h.appendChild(d),n.appendChild(h)}return Object(Oe.a)(!0)}return n.childNodes.forEach((function(e){return e.remove()})),Object(Oe.a)(!1)})))},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib))},e.\u0275cmp=k.Zb({type:e,selectors:[["free-hand-container"]],decls:2,vars:4,consts:[["id","free-hand-container",1,"fx-pointer-events-auto","fhSvgContainer"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.yc(1,"async"),k.kc()),2&e&&k.Xb("position",k.zc(1,2,t.isFreeHandMode))},pipes:[i.b],styles:[".fhSvgContainer[_ngcontent-%COMP%]{z-index:1;flex:1}.position[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),e}(),Pa=n("eRmX"),Ta=n("Wpmq"),Aa=["searchPanel"],Ma=function(e){function t(t,n,r,i,a,o,s){var c=e.call(this,t,n,r,i)||this;return c.componentFactoryResolver=t,c.injector=n,c.elementRef=r,c.manager=i,c.state=a,c.diagToViewPort=o,c.viewPortToDiagram=s,c.alignTop=!1,c.toolbarGap=20,c.toolbar1stItemPos=110,c.toolbarHeight=256,c._actionEmitter=new _e.a,c}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"actionEmitter",{get:function(){return this._actionEmitter},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.manager.register(this)},t.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.changeSubs).forEach((function(t){e.changeSubs[t].unsubscribe()})),this._change.complete(),this.changeSubs=null},t.prototype.ngAfterViewInit=function(){var e=this;this.changeSubs.pstState=this.state.changes("PlusCreateToolbarState").pipe(Object(_.a)((function(t){t.show?e.showToolbar():e.hideToolbar()}))).subscribe(),this.changeSubs.searchEmitter=this.searchPanel.actionEmitter.pipe(Object(_.a)((function(t){e._actionEmitter.next({defId:t.defId,connect:!0,version:t.version,def:t}),e.hideToolbar()}))).subscribe(),this.changeSubs.closedSub=this.searchPanel.isOpen.subscribe((function(t){t||e.hideToolbar()}))},t.prototype.preparePanel=function(e){this.shapeModel=e,this.searchPanel.resetPanel(this.shapeModel,!1)},t.prototype.showAndPosition=function(e,t){var n=this;return this.shapeModel=e,this.showing?this.applyActions(t):(this.showToolbar(),this.applyActions(t).pipe(Object(Te.a)((function(){return n.showToolbar()}))))},t.prototype.getRelativePosition=function(e){var t=Math.round(this.shapeModel.angle/90),n=["top","right","bottom","left"];if(0!==t){var r=n.indexOf(e)+t;return r>=n.length&&(r%=n.length),r<0&&(r=n.length+r),n[r]}return e},t.prototype.applyActions=function(e){return this.updatePosition(e),hi.a},t.prototype.updatePosition=function(e){this.alignTop="top"===e;var t=this.getRelativePosition(e),n=this.getToolbarPosition(t),r=this.getToolbarSide(t),i=this.element.getBoundingClientRect(),a=Un.getSidePosition(r);this.element.style.left=n.x-i.width*a.x+"px",this.element.style.top=this.getPositionBasedOnScreenBound(n.y+i.height*a.y,t)+"px"},t.prototype.getToolbarSide=function(e){switch(e){case"left":return"topright";case"right":return"topleft";case"top":return"bottomcenter";case"bottom":return"topcenter"}},t.prototype.getRelativeBoundingBoxForRotatedShape=function(e,t,n){var r=n>=0?n:180-Math.abs(n);90!==r&&180!==r||(r=0);var i=C.vb.from(e).transform(t),a=Math.abs(Math.sin(r)),o=Math.abs(Math.cos(r)),s=i.width*o+i.height*a,c=i.width*a+i.height*o,l=i.y+i.height/2-Math.abs(c/2),u=i.x+i.width/2-Math.abs(s/2);return new C.vb(u,l,s,c)},t.prototype.getToolbarPosition=function(e){var t=this.getRelativeBoundingBoxForRotatedShape(this.shapeModel.defaultBounds,this.shapeModel.transform,this.shapeModel.angle);switch(e){case"left":t.x+=this.toolbarGap/2,t.y-=this.relativeGapForFirstItem(t.height);break;case"right":t.x+=1.75*this.toolbarGap+t.width,t.y-=this.relativeGapForFirstItem(t.height);break;case"top":t.x+=t.width/2+.75*this.toolbarGap,t.y-=this.toolbarHeight-1.5*this.toolbarGap;break;case"bottom":t.x+=t.width/2+.75*this.toolbarGap,t.y+=t.height+.75*this.toolbarGap}return t},t.prototype.getPositionBasedOnScreenBound=function(e,t){var n=this.state.get("DiagramViewPort"),r=10,i=n.top+r,a=n.top+n.height-r,o=e+this.toolbarHeight+r,s=e;return i>e?(s=i+r,"top"===t&&(s+=50)):a<o&&(s=a-(this.toolbarHeight+20)),s},t.prototype.relativeGapForFirstItem=function(e){return this.toolbar1stItemPos-e/2},t.prototype.showToolbar=function(){this.element.style.display="block",this.element.style.visibility="visible",this.showing=!0,this.searchPanel.alignTop=this.alignTop,this.searchPanel.resetPanel(this.shapeModel)},t.prototype.hideToolbar=function(){this.element.style.display="block",this.element.style.visibility="hidden",this.showing=!1},t.\u0275fac=function(e){return new(e||t)(k.fc(k.m),k.fc(k.C),k.fc(k.r),k.fc(zn.a),k.fc(C.Ib),k.fc(_i.a),k.fc(Ta.a))},t.\u0275cmp=k.Zb({type:t,selectors:[["plus-create-toolbar"]],viewQuery:function(e,t){var n;(1&e&&k.jd(Aa,!0),2&e)&&(k.Lc(n=k.uc())&&(t.searchPanel=n.first))},inputs:{id:"id"},features:[k.Pb],decls:3,vars:2,consts:[["data-keep-text-open","true",1,"ftb-container"],["searchPanel",""]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.gc(1,"quick-shape-search",null,1),k.kc()),2&e&&k.Xb("top",t.alignTop)},styles:[".ftb-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-direction:column;align-content:flex-start;justify-content:flex-start;width:234px!important;max-width:234px!important;height:0;overflow:hidden}.ftb-container.top[_ngcontent-%COMP%]{flex-direction:column-reverse}.search-box[_ngcontent-%COMP%]{height:30px}[_nghost-%COMP%]{z-index:2}"],changeDetection:0}),t}(Wn),Da=n("3+4Q"),ja=n("nT0V"),Na=n("rwb9"),Ra=["commentThreadItem"];function La(e,t){if(1&e&&(k.gc(0,"comment-thread-item",5,6),k.yc(2,"async")),2&e){var n=t.$implicit,r=k.xc(2);k.Cc("comment",n.comment)("commenter",n.commenter)("showControls",!k.zc(2,3,r.readonly))}}function Fa(e,t){if(1&e&&(k.lc(0,"div",3),k.cd(1,La,3,5,"comment-thread-item",4),k.yc(2,"async"),k.kc()),2&e){var n=k.xc();k.Sb(1),k.Cc("ngForOf",k.zc(2,2,n.commentsWithCollabs))("ngForTrackBy",n.getCommentId)}}function Ba(e,t){if(1&e&&k.gc(0,"user-image",12),2&e){var n=t.ngIf;k.Cc("hasImage",n.hasImage)("imagePath",n.image)("userColor",n.displayColor)("userInitials",n.initial)("userRegistered",n.isRegistered)("userOnlineStatus",!0)}}var Va=function(){return["Enter"]};function za(e,t){if(1&e){var n=k.mc();k.lc(0,"div",7),k.lc(1,"div",8),k.cd(2,Ba,1,6,"user-image",9),k.yc(3,"async"),k.kc(),k.lc(4,"div",10),k.lc(5,"text-input",11),k.tc("submit",(function(e){return k.Pc(n),k.xc().submit.next(e)})),k.yc(6,"translate"),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Sb(2),k.Cc("ngIf",k.zc(3,7,r.userMdl)),k.Sb(3),k.Dc("placeholder",k.zc(6,9,"PLACEHOLDERS.COMMENT")),k.Cc("clearOnSubmit",!0)("submitOnCode",k.Gc(11,Va))("submitOnBlur",!1)("multiLined",!0)("autoFocus",!0)}}var Ua=function(){function e(e,t){this.collabLocator=e,this.state=t,this.readonly=new I.a(!1),this._comments=new I.a([]),this.submit=new _e.a,this.subs=[]}return Object.defineProperty(e.prototype,"comments",{get:function(){return this._comments.value},set:function(e){this._comments.next(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t=this.state.get("CurrentUser");this.commentsWithCollabs=this._comments.pipe(Object(_.a)((function(t){var n=t.filter((function(e){return!e.parentId&&!!e.resolved}));e.readonly.next(!!n.length)})),Object(E.a)((function(t){return Object(cn.b)(t.map((function(t){return e.collabLocator.getCollabs().pipe(Object(Te.a)((function(e){var n=e.find((function(e){return e.id===t.userId}));return{comment:t,commenter:n}})))})))})),Object(_.a)((function(){return setTimeout((function(){e.scrollToBottom()}),300)}))),this.userMdl=this.collabLocator.getCollabs().pipe(Object(Te.a)((function(e){return e.filter((function(e){return e.id===t}))[0]}))),this.subs.push(Object(P.a)(window,"keydown").pipe(Object(je.a)((function(e){return e.keyCode===pe.j.Escape})),Object(_.a)((function(){var t=e.state.get("CommentThreadData");if(!t||!t.parentSelector){var n=e.commentThreadItems&&e.commentThreadItems.filter((function(e){return e.isEditMode.value}));n&&!n.length&&(C.Kb.track("right.comment.cancel",{value1Type:"trigger",value1:"esc"}),e.state.set("CommentThreadData",{}))}}))).subscribe())},e.prototype.getCommentId=function(e,t){return t.id},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.scrollToBottom=function(){this.scrollRef&&this.scrollRef.directiveRef&&this.scrollRef.directiveRef.scrollToBottom()},e.\u0275fac=function(t){return new(t||e)(k.fc(Kt.a),k.fc(C.Ib))},e.\u0275cmp=k.Zb({type:e,selectors:[["comment-thread-container"]],viewQuery:function(e,t){var n;(1&e&&(k.Wc(j.b,!0),k.jd(Ra,!0)),2&e)&&(k.Lc(n=k.uc())&&(t.scrollRef=n.first),k.Lc(n=k.uc())&&(t.commentThreadItems=n))},inputs:{comments:"comments"},outputs:{submit:"submit"},decls:5,vars:4,consts:[[1,"comment-thread-container"],["class","comment-thread-items-area",4,"ngIf"],["class","comment-thread-input",4,"ngIf"],[1,"comment-thread-items-area"],[3,"comment","commenter","showControls",4,"ngFor","ngForOf","ngForTrackBy"],[3,"comment","commenter","showControls"],["commentThreadItem",""],[1,"comment-thread-input"],[1,"comment-thread-input-user"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus",4,"ngIf"],[1,"comment-thread-input-box"],[3,"placeholder","clearOnSubmit","submitOnCode","submitOnBlur","multiLined","autoFocus","submit"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.lc(1,"perfect-scrollbar"),k.cd(2,Fa,3,4,"div",1),k.kc(),k.cd(3,za,7,12,"div",2),k.yc(4,"async"),k.kc()),2&e&&(k.Sb(2),k.Cc("ngIf",t.comments.length>0),k.Sb(1),k.Cc("ngIf",!k.zc(4,2,t.readonly)))},directives:[j.b,i.t,i.s,ja.a,ae.a,Na.a],pipes:[i.b,y.d],styles:[".comment-thread-container[_ngcontent-%COMP%]{position:absolute;z-index:2;background:#fff;border:1px solid #d3d3e7;box-shadow:0 2px 2px #c3c3de;border-radius:4px;width:290px;transform:translate(30px,-50%)}.comment-thread-container[_ngcontent-%COMP%]   text-input[_ngcontent-%COMP%]  .text-input{margin-bottom:5px}.comment-thread-items-area[_ngcontent-%COMP%]{padding:5px;max-height:500px}.comment-thread-input[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px 10px;border-top:1px solid #d3d3e7}.comment-thread-input-box[_ngcontent-%COMP%]{flex:1;padding-left:5px}"],changeDetection:0}),e}();function Ga(e,t){if(1&e){var n=k.mc();k.lc(0,"div",1),k.yc(1,"async"),k.lc(2,"comment-thread-container",2),k.tc("submit",(function(e){return k.Pc(n),k.xc().addComment(e)})),k.yc(3,"async"),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Xc(k.zc(1,3,r.styleset)),k.Sb(2),k.Cc("comments",k.zc(3,5,r.comments))}}var Ha=function(){function e(e,t,n,r,i,a,o){this.ll=e,this.states=t,this.sanitizer=n,this.datastore=r,this.commandService=i,this.diagToViewport=a,this.elementRef=o,this.defaulParentSelector=".diagram-area-wrapper",this.subs=[],this.visibility=new I.a(!1),this.comments=new I.a([]),this.styleset=new I.a(this.sanitizer.bypassSecurityTrustStyle(""))}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.states.changes("CommentThreadData").pipe(Object(je.a)((function(e){return Boolean(e)})),Object(E.a)((function(t){return Object(Z.a)(e.updateVisibility(t),e.attachToParent(t),e.updatePosition(t),e.updateComments(t))}))).subscribe())},e.prototype.ngOnDestroy=function(){var e,t;try{for(var n=Object(r.k)(this.subs),i=n.next();!i.done;i=n.next()){i.value.unsubscribe(),this.subs=[]}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.addComment=function(e){var t=this.states.get("CommentThreadData");t.threadId||this.visibility.next(!1),e&&(C.Kb.track("comments.new_comment_added.onenter"),this.commandService.dispatch(vi.a.addComment,{comment:{id:C.sb.commentId(),comment:e,parentId:t.threadId,shapeId:t.shapeId,locOnDiagram:t.position}}))},e.prototype.attachToParent=function(e){var t=this.elementRef.nativeElement,n=document.querySelector(e.parentSelector||this.defaulParentSelector);return n&&n.appendChild(t),Object(hi.b)()},e.prototype.updateVisibility=function(e){return this.visibility.next(!!e.visible),Object(hi.b)()},e.prototype.updatePosition=function(e){var t=this;if(!e.visible)return Object(hi.b)();if(e.parentSelector)return Object(hi.b)();if(e.threadId){var n=Object(r.h)(e.comments,1)[0];return n.shapeId?this.locator.getShapeOnce(n.shapeId).pipe(Object(E.a)((function(e){return e?t.syncWithShapePosition(n.shapeId,n.locOnShape):t.syncWithDiagramPosition(n.locOnDiagram)}))):this.syncWithDiagramPosition(n.locOnDiagram)}return e.shapeId?this.locator.getShapeOnce(e.shapeId).pipe(Object(E.a)((function(n){if(n.isConnector())return t.syncWithDiagramPosition(e.position);var r=n.getPositionOnShape(e.position);return t.syncWithShapePosition(e.shapeId,r)}))):this.syncWithDiagramPosition(e.position)},e.prototype.updateComments=function(e){var t=this;if(e.comments&&e.comments[0]){var n=Object(r.h)(e.comments,1)[0];return Object(cn.b)(this.datastore.findOne(Da.a,{id:n.id}),this.datastore.find(Da.a,{parentId:n.id},{sort:{added:1}})).pipe(Object(_.a)((function(e){var n=Object(r.h)(e,2),i=n[0],a=n[1];t.comments.next(Object(r.j)([i],a))})))}return this.comments.next([]),Object(hi.b)()},e.prototype.syncWithDiagramPosition=function(e){var t=this;return this.updateOnViewportChange((function(){var n=t.diagToViewport.x(e.x),r=t.diagToViewport.y(e.y);return t.updatePositionStyles(n,r),Object(hi.b)()}))},e.prototype.syncWithShapePosition=function(e,t){var n=this;return this.updateOnViewportChange((function(){return n.locator.getShapeModel(e).pipe(Object(_.a)((function(e){var r=C.ob.onRect(t,e.defaultBounds,e.transform),i=n.diagToViewport.x(r.x),a=n.diagToViewport.y(r.y);n.updatePositionStyles(i,a)})))}))},e.prototype.updatePositionStyles=function(e,t){this.styleset.next(this.sanitizer.bypassSecurityTrustStyle("transform: translate("+e+"px, "+t+"px)"))},e.prototype.updateOnViewportChange=function(e){return Object(Z.a)(this.states.changes("DiagramPan"),this.states.changes("DiagramZoomLevel")).pipe(Object(E.a)((function(){return e()})))},e.\u0275fac=function(t){return new(t||e)(k.fc(sn.a),k.fc(C.Ib),k.fc(Re.b),k.fc(tr.b),k.fc(C.B),k.fc(_i.a),k.fc(k.r))},e.\u0275cmp=k.Zb({type:e,selectors:[["comment-thread-view"]],decls:2,vars:3,consts:[["class","comment-thread-view",3,"style",4,"ngIf"],[1,"comment-thread-view"],[3,"comments","submit"]],template:function(e,t){1&e&&(k.cd(0,Ga,4,7,"div",0),k.yc(1,"async")),2&e&&k.Cc("ngIf",k.zc(1,1,t.visibility))},directives:[i.t,Ua],pipes:[i.b],styles:[".comment-thread-view[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:1000}"],changeDetection:0}),e}(),Ya=function(){function e(e,t,n,r,i,a,o){this.state=e,this.injector=t,this.ll=n,this.loader=r,this.cursorGen=i,this.resources=a,this.elementRef=o,this.changeDebounceTime=3e4,this.panZoomDebounceTime=120,ua.Ticker.timingMode=ua.Ticker.RAF,this.subs=[],this.compSubs=[]}return e.prototype.ngAfterViewInit=function(){var e=this;this.interactionLayer.canvas.nextStage=this.diagramView.canvas,this.diagramView.canvas.nextStage=this.gridArea.canvas,this.state.initialize("DiagramPanNonAuto",{}),this.compSubs.push(this.getPanZoomState().subscribe((function(t){return e.state.set("PanZoomState",t)})),this.state.changes("CurrentDiagram").subscribe((function(){return e.initViewComponents()}))),ua.Ticker.addEventListener("tick",(function(t){return e.tick(t)})),this.initSvgGenerator()},e.prototype.ngOnDestroy=function(){for(this.state.remove("DiagramCanvas"),this.clearSubscriptions();this.compSubs.length>0;)this.compSubs.pop().unsubscribe()},e.prototype.getPanZoomState=function(){var e=Object(Z.a)(this.state.changes("DiagramPanNonAuto"),this.state.changes("DiagramZoomLevel")).pipe(Object(Ei.a)(1)),t="stopped";return Object(Z.a)(e.pipe(Object(Xt.a)(this.panZoomDebounceTime),Object(Te.a)((function(){return t="stopped"}))),e.pipe(Object(aa.lodashThrottle)(this.panZoomDebounceTime-20),Object(Te.a)((function(){return"started"!==t&&(t="started"),t})))).pipe(Object(Jt.a)())},e.prototype.initViewComponents=function(){var e=this;this.clearSubscriptions(),this.subs.push(this.createInteractionHandler().subscribe());var t=document.querySelector(".diagram-viewport");this.state.set("DiagramViewPort",new C.vb(t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)),this.subs.push(this.observeBounds(t,300).subscribe((function(t){return e.updateViewPort(t)}))),this.state.initialize("GridAreaCanvas",this.gridArea.canvas),this.state.initialize("DiagramCanvas",this.diagramView.canvas)},e.prototype.initSvgGenerator=function(){var e=this,t=this.ll.forCurrentObserver(!1),n=t.pipe(Object(E.a)((function(e){return e.getDiagramModel()})),Object(Xt.a)(this.changeDebounceTime),Object(E.a)((function(){var n=e.createDiagramSVGView(t),r=n.populateDiagram().pipe(Object(ca.a)()),i=Object(Ie.a)((function(){return n.toSvg().pipe(Object(Qt.a)(1))}));return Object(sa.a)(r,i)}))).subscribe((function(t){var n=C.m.get("DIAGRAM_SVG_BASE_URL")+e.state.get("CurrentDiagram");e.loader.store(n,t,pe.q.Uploaded)}));this.subs.push(n)},e.prototype.createDiagramSVGView=function(e){return new de.m(e,this.resources,this.state,!0)},e.prototype.clearSubscriptions=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.observeBounds=function(e,t){var n=this;return Pe.a.create((function(t){var i=n.createResizeObserver((function(n){var i,a;try{for(var o=Object(r.k)(n),s=o.next();!s.done;s=o.next()){var c=s.value;if(c.target===e){var l=C.vb.fromClientRect(c.target.getBoundingClientRect());t.next(l)}}}catch(u){i={error:u}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}));return i.observe(e),function(){i.disconnect()}})).pipe(Object(Xt.a)(t))},e.prototype.createResizeObserver=function(e){return new Oa.default(e)},e.prototype.createInteractionHandler=function(){var e,t=this;return this.state.changes("CurrentInteractionHandler").pipe(Object(Jt.a)((function(e,t){return e.type===t.type})),Object(E.a)((function(n){return e&&e.destroy(),e=n.injector.get(n.type),Object(Z.a)(e.initialize(t.diagramView.canvas,t.interactionLayer.canvas,t.gridArea.canvas),e.getCursor().pipe(Object(_.a)((function(e){return t.updateCursor(e)}))))})))},e.prototype.updateCursor=function(e){var t;return t="css"===e.type?e.cursor:"cur"===e.type?this.cursorGen.getCursorIcon(e):this.cursorGen.getCursorCSS(e),"app"===e.viewingArea?document.body.style.cursor=t:document.body.style.cursor="default",requestAnimationFrame((function(){})),this.elementRef.nativeElement.style.cursor=t},e.prototype.tick=function(e){e.paused||(this.updateCanvas(this.diagramView),this.updateCanvas(this.interactionLayer),this.updateCanvas(this.gridArea),C.P.get("DEBUG_FRAME_RATE")&&Ea.FRAME_RATE_COUNT++)},e.prototype.updateCanvas=function(e){e.hasChanges&&(e.updateCanvas(),e.clearChanges())},e.prototype.updateViewPort=function(e){var t=this.state.get("DiagramViewPort");t.width===e.width&&t.height===e.height&&t.x===e.x&&t.y===e.y||(t.width=e.width,t.height=e.height,t.x=e.x,t.y=e.y,this.state.set("DiagramViewPort",t))},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(k.C),k.fc(sn.a),k.fc(C.zb),k.fc(oa.a),k.fc(C.W),k.fc(k.r))},e.\u0275cmp=k.Zb({type:e,selectors:[["diagram-area"]],viewQuery:function(e,t){var n;(1&e&&(k.jd(ka,!0),k.jd(Sa,!0),k.jd(ha,!0),k.jd(Ia,!0)),2&e)&&(k.Lc(n=k.uc())&&(t.diagramView=n.first),k.Lc(n=k.uc())&&(t.interactionLayer=n.first),k.Lc(n=k.uc())&&(t.gridArea=n.first),k.Lc(n=k.uc())&&(t.freeHandContainer=n.first))},features:[k.Rb([C.zb])],decls:14,vars:0,consts:[[1,"diagram-area-wrapper","fx-cover"],["name","shape-text-editor"],["name","tiptap-docs"],["name","hyperlink-editor"],["name","shape-data-viewer"],["name","shapelink-editor"],["id","contextual-toolbar"],["id","shape-text-toolbar"],["id","plus-create-toolbar"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.gc(1,"grid-area"),k.gc(2,"diagram-view"),k.gc(3,"interaction-area"),k.gc(4,"free-hand-container"),k.gc(5,"router-outlet",1),k.gc(6,"router-outlet",2),k.gc(7,"router-outlet",3),k.gc(8,"router-outlet",4),k.gc(9,"router-outlet",5),k.gc(10,"floating-toolbar",6),k.gc(11,"floating-toolbar",7),k.gc(12,"plus-create-toolbar",8),k.gc(13,"comment-thread-view"),k.kc())},directives:[ha,ka,Sa,Ia,m.i,Wn,Ma,Ha],encapsulation:2,changeDetection:0}),e}(),qa=n("P1E4"),Wa=n("8lHc"),Xa=n("7ntQ"),Ka=n("iV8b"),Za=n("B/3P"),$a=n("fqe/"),Qa=n("K0+f"),Ja=n("VVrU"),eo=n("qeMm");function to(e,t){if(1&e&&k.gc(0,"collab-list-item",8),2&e){var n=t.$implicit;k.Cc("collab",n)}}var no=function(){return{event:"dialog.share.user.role.change"}},ro=function(e){function t(t,n,r,i,a,o,s,c){var l=e.call(this,a)||this;return l.ll=t,l.collabLocator=n,l.commandService=r,l.userLocator=i,l.modalController=a,l.planPermManager=o,l.translate=s,l.stateService=c,l.subs=[],l.openCollabSettings=new k.t,l.title=s.instant("SHARE.HEADING"),l.collabs=n.getCollabsSortedIgnoringOnline(),l.isVerifiedUser=new I.a(!1),l.isTeamUser=new I.a(!1),l.subs.push(l.checkUserEmailIsVerified().subscribe(),l.planPermManager.isTeamUser().subscribe((function(e){return l.isTeamUser.next(e)}))),l.teamName=s.instant("SHARE.ORGANIZATION"),l}return Object(r.e)(t,e),t.prototype.getPrivacyText=function(){var e=this,t=this.getTeamName().subscribe((function(t){e.teamName=""===t?e.translate.instant("SHARE.ORGANIZATION"):t}));return this.subs.push(t),this.getPrivacyLevel().pipe(Object(Te.a)((function(t){switch(t.level){case 0:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.SPECIFIC_USERS");case 1:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_AT")+e.teamName+" "+e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_AT_LINK");case 2:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_AT")+e.teamName;case 3:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.ANYONE_LINK");case 4:return e.translate.instant("SHARE.COLLAB_PRIVACY_LABELS.PUBLIC")}})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.getTeamName=function(){return this.userLocator.getUserData().pipe(Object(je.a)((function(e){return!!e})),Object(Qt.a)(1),Object(Te.a)((function(e){return e.team?e.team.organizationName:null})))},t.prototype.getPrivacyLevel=function(){return this.ll.forCurrentObserver(!1).pipe(Object(E.a)((function(e){return e.getDiagramModel().pipe(Object(Qt.a)(1),Object(Te.a)((function(e){return e.privacy})))})))},t.prototype.removeCollaborator=function(e){this.commandService.dispatch(vi.a.removeDiagramCollaborators,{diagramId:this.stateService.get("CurrentDiagram"),collabIds:[e]})},t.prototype.addCollaborators=function(e){var t=this;this.collabLocator.getCollabs().pipe(Object(Qt.a)(1),Object(Te.a)((function(n){e.forEach((function(t){var r=n.find((function(e){return e.email===t.email}));r&&(e=e.filter((function(e){return e.email!==r.email})))})),e.length>0&&t.dispatchAddCollabsCommand(e)}))).subscribe()},t.prototype.dispatchAddCollabsCommand=function(e){var t=this;this.commandService.dispatch(vi.a.addDiagramCollaborators,{diagramId:this.stateService.get("CurrentDiagram"),collabs:e}).subscribe({error:function(e){t.handleDiagramPermissionError(e)}})},t.prototype.handleDiagramPermissionError=function(e){if(1618===e.code)this.showShareUpgradeDialog();else{if(1620!==e.code)throw e;this.subs.push(this.showAddCollaboratorError().subscribe())}},t.prototype.showAddCollaboratorError=function(){var e=this;return this.collabLocator.getCollabs().pipe(Object(Qt.a)(1),Object(E.a)((function(t){var n=t.find((function(e){return e.role===he.g.OWNER}));return e.userLocator.getUserInfo(n.id).pipe(Object(_.a)((function(t){var n=Object(r.a)(Object(r.a)({},Za.a[pe.p.DIAGRAM_COLLABORATOR_ADD_EDITORS]),{descriptionParams:{ownerName:t.fullName},buttons:[{type:"ok",text:"BUTTONS.OK",clickHandler:e.hideModal.bind(e)}],hideCancelButton:!0});throw new fe.j("Adding diagram collaborator permission is denied for collaborator",n)})))})))},t.prototype.hideModal=function(){return this.modalController.hide()},t.prototype.changeCollabRole=function(e){this.commandService.dispatch(vi.a.changeDiagramCollaborators,{diagramId:this.stateService.get("CurrentDiagram"),collabs:[{id:e.userId,role:e.role}]})},t.prototype.showShareUpgradeDialog=function(){var e={id:pe.p.DIAGRAM_ADD_EDITORS,iframeType:fe.s.Share,buttons:[{type:"action",clickHandler:function(){},visibility:"hidden"}],descriptionParams:{errorMessage:this.isTeamUser.value?fe.r.limitedTeamSharing:fe.r.limitedToPubliclyViewableWorkspaces}};this.modalController.show(fe.t,{inputs:{dialogData:e}})},t.prototype.checkUserEmailIsVerified=function(){var e=this;return this.userLocator.getUserData().pipe(Object(je.a)((function(e){return!!e})),Object(_.a)((function(t){t.emailToConfirm?e.isVerifiedUser.next(!1):e.isVerifiedUser.next(!0)})))},t.\u0275fac=function(e){return new(e||t)(k.fc(sn.a),k.fc(Kt.a),k.fc(C.B),k.fc(fe.x),k.fc(C.gb),k.fc(fe.m),k.fc(y.e),k.fc(C.Ib))},t.\u0275cmp=k.Zb({type:t,selectors:[["diagram-share-window"]],inputs:{authDialog:"authDialog"},outputs:{openCollabSettings:"openCollabSettings"},features:[k.Pb],decls:14,vars:12,consts:[[1,"diagram-share-tab-container"],[1,"collaborator-setting"],["translate",""],["translate","",1,"primary",3,"trackAction","click"],[1,"collaborator-list-container"],[3,"collab",4,"ngFor","ngForOf"],[1,"collaborator-invite-form"],[3,"authDialog","verifiedUser"],[3,"collab"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.lc(1,"div",1),k.lc(2,"span",2),k.ed(3),k.yc(4,"async"),k.kc(),k.lc(5,"a",3),k.tc("click",(function(){return t.openCollabSettings.next(!0)})),k.ed(6,"SHARE.PRIVACY_CHANGE"),k.kc(),k.kc(),k.lc(7,"div",4),k.lc(8,"perfect-scrollbar"),k.cd(9,to,1,1,"collab-list-item",5),k.yc(10,"async"),k.kc(),k.kc(),k.lc(11,"div",6),k.gc(12,"collab-invite-form",7),k.yc(13,"async"),k.kc(),k.kc()),2&e&&(k.Sb(3),k.fd(k.zc(4,5,t.getPrivacyText())),k.Sb(2),k.Cc("trackAction",k.Gc(11,no)),k.Sb(4),k.Cc("ngForOf",k.zc(10,7,t.collabs)),k.Sb(3),k.Cc("authDialog",t.authDialog)("verifiedUser",k.zc(13,9,t.isVerifiedUser)))},directives:[y.a,Qa.a,j.b,i.s,Ja.a,eo.a],pipes:[i.b],styles:[".collab-list[_ngcontent-%COMP%]{color:#fff;margin:0 auto;max-height:calc(100% - 60px);width:100%}.diagram-share-tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.collaborator-list-container[_ngcontent-%COMP%]{flex:1;padding-top:20px;overflow:auto}.collaborator-setting[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:20px;border-radius:4px;display:flex;align-items:center}.collaborator-setting[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;padding-right:30px}"],changeDetection:0}),t}(he.f),io=n("Mo46");function ao(e,t){if(1&e){var n=k.mc();k.lc(0,"collab-privacy-item",1),k.tc("privacyChange",(function(e){return k.Pc(n),k.xc().privacyChange.next(e)}))("privacyRoleChanged",(function(e){return k.Pc(n),k.xc().selectedRole.next(e)})),k.yc(1,"async"),k.kc()}if(2&e){var r=t.$implicit,i=k.xc();k.Cc("name",i.collabPrivacyItem)("disabled",!1)("checked",r.level===i.currentPrivacy.level)("privacyInfo",r)("role",k.zc(1,5,i.selectedRole))}}var oo=function(e){function t(t,n,r,i){var a=e.call(this,t,i)||this;return a.userLocator=t,a.ll=n,a.collabLocator=r,a.translate=i,a}return Object(r.e)(t,e),t.prototype.getPrivacyDetails=function(e){var t=this,n=this.translate.instant("SHARE.ORGANIZATION");e.team&&(n=""===e.team.organizationName?this.translate.instant("SHARE.ORGANIZATION"):e.team.organizationName);var r={title:this.translate.instant("SHARE.PUBLIC"),description:this.translate.instant("SHARE.PUBLIC_DESC_VIEW"),level:fe.n.PUBLIC},i={title:this.translate.instant("SHARE.ANYONE_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")},level:fe.n.ANYONE_WITH_LINK},a={title:this.translate.instant("SHARE.ANYONE_AT")+" "+n,description:{edit:this.translate.instant("SHARE.ANYONE_AT")+" "+n+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_AT")+" "+n+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_VIEW")},level:fe.n.ANYONE_IN_TEAM},o={title:this.translate.instant("SHARE.ANYONE_AT")+" "+n+" "+this.translate.instant("SHARE.ANYONE_AT_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")},level:fe.n.ANYONE_IN_TEAM_WITH_LINK},s={title:this.translate.instant("SHARE.SPECIFIC_USERS"),description:this.translate.instant("SHARE.SPECIFIC_USERS_DESC"),level:fe.n.SPECIFIC};return this.collabLocator.getCollabs().pipe(Object(Qt.a)(1),Object(Te.a)((function(n){return t.isInTeam(e,n)?[r,i,a,o,s]:[r,i,s]})))},t.\u0275fac=function(e){return new(e||t)(k.fc(fe.x),k.fc(sn.a),k.fc(Kt.a),k.fc(y.e))},t.\u0275cmp=k.Zb({type:t,selectors:[["diagram-privacy-form"]],viewQuery:function(e,n){var r;(1&e&&k.jd(t,!0),2&e)&&(k.Lc(r=k.uc())&&(n.diagramPrivacyForm=r.first))},features:[k.Pb],decls:2,vars:3,consts:[[3,"name","disabled","checked","privacyInfo","role","privacyChange","privacyRoleChanged",4,"ngFor","ngForOf"],[3,"name","disabled","checked","privacyInfo","role","privacyChange","privacyRoleChanged"]],template:function(e,t){1&e&&(k.cd(0,ao,2,7,"collab-privacy-item",0),k.yc(1,"async")),2&e&&k.Cc("ngForOf",k.zc(1,1,t.privacyTypes))},directives:[i.s,io.a],pipes:[i.b],encapsulation:2,changeDetection:0}),t}(he.d),so=function(e){function t(t,n,r,i,a,o){var s=e.call(this)||this;return s.commandService=t,s.planPermManager=n,s.translate=r,s.stateService=i,s.modalController=a,s.dataStore=o,s.sub=[],s.privacy=s.getPrivacy(),s.isDemoUser=new I.a(!1),s.isTeamUser=new I.a(!1),s}return Object(r.e)(t,e),t.prototype.ngOnInit=function(){var e=this;this.subscriptions.push(this.planPermManager.isDemoUser().subscribe((function(t){return e.isDemoUser.next(t)})),this.planPermManager.isTeamUser().subscribe((function(t){return e.isTeamUser.next(t)})))},t.prototype.getPrivacy=function(){var e=this;return this.stateService.changes("CurrentDiagram").pipe(Object(je.a)((function(e){return e&&"start"!==e})),Object(E.a)((function(t){return e.dataStore.findOneRaw(ln.a,{id:t})})),Object(Te.a)((function(e){return e.privacy})))},t.prototype.changePrivacy=function(e){this.planPermManager.check([pe.p.DIAGRAM_CREATE_PUBLIC])||this.planPermManager.check([pe.p.DIAGRAM_CREATE])||this.planPermManager.check([pe.p.DIAGRAM_CREATE_PRIVATE])?this.commandService.dispatch(vi.a.changeDiagramPrivacy,{diagramId:this.stateService.get("CurrentDiagram"),privacy:e}):this.isDemoUser.value?this.authDialog():this.showShareUpgradeDialog()},t.prototype.showShareUpgradeDialog=function(){var e={id:pe.p.DIAGRAM_CREATE_PRIVATE_NONE,iframeType:fe.s.Share,buttons:[{type:"action",clickHandler:function(){},visibility:"hidden"}],descriptionParams:{errorMessage:this.isTeamUser.value?fe.r.limitedTeamSharing:fe.r.limitedToPubliclyViewableWorkspaces}};this.modalController.show(fe.t,{inputs:{dialogData:e}})},t.\u0275fac=function(e){return new(e||t)(k.fc(C.B),k.fc(fe.m),k.fc(y.e),k.fc(C.Ib),k.fc(C.gb),k.fc(tr.b))},t.\u0275cmp=k.Zb({type:t,selectors:[["diagram-collab-settings"]],inputs:{authDialog:"authDialog"},features:[k.Pb],decls:4,vars:3,consts:[[1,"collab-permission-container","fx-margin-bottom-30"],[3,"currentPrivacy"],["privacyForm",""]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.gc(1,"diagram-privacy-form",1,2),k.yc(3,"async"),k.kc()),2&e&&(k.Sb(1),k.Cc("currentPrivacy",k.zc(3,1,t.privacy)))},directives:[oo],pipes:[i.b],styles:[""],changeDetection:0}),t}(he.e),co=n("GIU+"),lo=n("xEGh");function uo(e,t){if(1&e){var n=k.mc();k.lc(0,"button",11),k.tc("click",(function(){return k.Pc(n),k.xc(3).showResetConfirmationDialog()})),k.ed(1,"Reset"),k.kc()}}var po=function(){return{event:"dialog.share.embed.link.copy"}};function ho(e,t){if(1&e){var n=k.mc();k.lc(0,"div",6),k.lc(1,"div",7),k.gc(2,"text-input",8),k.yc(3,"async"),k.kc(),k.lc(4,"button",9),k.tc("click",(function(){return k.Pc(n),k.xc(2).copyEmbedText()})),k.ed(5,"Copy"),k.kc(),k.cd(6,uo,2,0,"button",10),k.yc(7,"async"),k.kc()}if(2&e){var r=k.xc(2);k.Sb(2),k.Cc("value",k.zc(3,4,r.embedUrl))("readonly",!0),k.Sb(2),k.Cc("trackAction",k.Gc(8,po)),k.Sb(2),k.Cc("ngIf",k.zc(7,6,r.isShowResetButton))}}function fo(e,t){1&e&&k.gc(0,"loading-bubbles",12)}function go(e,t){if(1&e&&(k.lc(0,"div",2),k.lc(1,"p",3),k.ed(2,"Attach the workspace as an image."),k.kc(),k.cd(3,ho,8,9,"div",4),k.yc(4,"async"),k.cd(5,fo,1,0,"ng-template",null,5,k.dd),k.kc()),2&e){var n=k.Mc(6),r=k.xc();k.Sb(3),k.Cc("ngIf",k.zc(4,2,r.isLoaded))("ngIfElse",n)}}function mo(e,t){1&e&&k.gc(0,"loading-bubbles",12)}var vo=function(){function e(e,t,n,r,i,a){this.ll=e,this.commandService=t,this.dialogBoxController=n,this.state=r,this.notifierController=i,this.translate=a,this.embedUrl=new I.a(""),this.isLoaded=new I.a(!0),this.isEmbedUrlLoaded=new I.a(!1),this.isShowResetButton=new I.a(!0),this.startEmbedImageNotificationId="EMBED_IMAGE_TEXT_COPIED",this.subs=[],this.notificationMessages=new st.a(this.translate)}return e.prototype.ngOnInit=function(){this.generateEmbedImageUrl()},e.prototype.copyEmbedText=function(){var e=this;return co.writeText(this.embedUrl.value).then((function(){return e.showEmbedImageNotification()})).catch((function(){return e.copyTextViaFallback(e.embedUrl.value),e.showEmbedImageNotification(),Promise.resolve()}))},e.prototype.copyTextViaFallback=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},e.prototype.resetToken=function(){var e=this,t=this.state.get("CurrentDiagram");C.Kb.track("dialog.share.embed.reset"),this.isLoaded.next(!1);var n=this.dispatchResetEmbedImageToken(t).subscribe({next:function(t){var n='<img src="'+t.data.documentResetEmbed+'&type=svg">';e.embedUrl.next(n)},complete:function(){e.isLoaded.next(!0)}});this.subs.push(n)},e.prototype.dispatchFetchEmbedURL=function(e){return this.commandService.dispatch(vi.a.fetchEmbedImageUrl,{resourceId:e}).pipe(Object(fi.a)(),Object(Te.a)((function(e){return e&&e.resultData[0]?JSON.parse(e.resultData[0]):null})))},e.prototype.dispatchResetEmbedImageToken=function(e){return this.commandService.dispatch(vi.a.resetEmbedImageToken,{resourceId:e}).pipe(Object(fi.a)(),Object(Te.a)((function(e){return e&&e.resultData[0]?JSON.parse(e.resultData[0]):null})))},e.prototype.showResetConfirmationDialog=function(){var e=this,t={id:"share-diagram-embed-image-reset",heading:"DIALOG_BOX.RESET_EMBED_IMAGE.HEADING",description:"DIALOG_BOX.RESET_EMBED_IMAGE.DESCRIPTION",type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.RESET_EMBED_IMAGE",clickHandler:function(){return e.resetToken()}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){}}]};this.dialogBoxController.showDialog(t)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getPrivacyLevel=function(){return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(Qt.a)(1),Object(Te.a)((function(e){return e.privacy})))},e.prototype.generateEmbedImageUrl=function(){var e=this;this.isEmbedUrlLoaded.next(!1);var t=this.state.get("CurrentDiagram"),n=this.getPrivacyLevel().pipe(Object(E.a)((function(n){return 4===n.level?(e.embedUrl.next('<img src="'+C.m.get("EMBED_ENDPOINT_URL")+"/"+t+'?type=svg">'),e.setResetButtonVisiblity(!1),Object(Oe.a)()):(e.setResetButtonVisiblity(!0),e.dispatchFetchEmbedURL(t).pipe(Object(_.a)((function(t){var n='<img src="'+t.data.document.image.svg+'">';e.embedUrl.next(n)}))))}))).subscribe({complete:function(){e.isEmbedUrlLoaded.next(!0)}});this.subs.push(n)},e.prototype.showEmbedImageNotification=function(){var e=this.notificationMessages.getNotificationMessage(st.b.EMBED_IMAGE_TEXT_COPIED);this.notifierController.show(st.b.EMBED_IMAGE_TEXT_COPIED,e.component,e.type,e.options,e.collapsed)},e.prototype.setResetButtonVisiblity=function(e){this.isShowResetButton.value!==e&&this.isShowResetButton.next(e)},e.\u0275fac=function(t){return new(t||e)(k.fc(sn.a),k.fc(C.B),k.fc(C.M),k.fc(C.Ib),k.fc(C.kb),k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["embed-tab"]],inputs:{diagramID:"diagramID"},decls:4,vars:4,consts:[["class","embed-tab-container",4,"ngIf","ngIfElse"],["loadingContainer",""],[1,"embed-tab-container"],[1,"grey"],["class","embed-tab-copy",4,"ngIf","ngIfElse"],["loading",""],[1,"embed-tab-copy"],[1,"embed-tab-text"],[1,"hyperlink-input",3,"value","readonly"],[1,"nu-btn-med","primary",3,"trackAction","click"],["class","nu-btn-med primary",3,"click",4,"ngIf"],[1,"nu-btn-med","primary",3,"click"],["color","secondary",1,"fx-margin-top-10"]],template:function(e,t){if(1&e&&(k.cd(0,go,7,4,"div",0),k.yc(1,"async"),k.cd(2,mo,1,0,"ng-template",null,1,k.dd)),2&e){var n=k.Mc(3);k.Cc("ngIf",k.zc(1,2,t.isEmbedUrlLoaded))("ngIfElse",n)}},directives:[i.t,ae.a,Qa.a,lo.a],pipes:[i.b],styles:[".embed-tab-copy[_ngcontent-%COMP%]{display:flex;align-items:center}.embed-tab-copy[_ngcontent-%COMP%]   .nu-btn-med[_ngcontent-%COMP%]{height:32px}.embed-tab-text[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}),e}(),bo=n("x+xc"),yo=["window"],xo=["windowInner"],Co=["shareFrame"];function wo(e,t){if(1&e){var n=k.mc();k.lc(0,"div",19),k.lc(1,"diagram-share-window",20),k.tc("openCollabSettings",(function(){return k.Pc(n),k.xc(4).selectedTab.next("collab-settings")})),k.kc(),k.kc()}if(2&e){var r=k.xc(4);k.Sb(1),k.Cc("authDialog",r.authDialog)}}function ko(e,t){if(1&e&&(k.lc(0,"div",19),k.gc(1,"diagram-collab-settings",21),k.kc()),2&e){var n=k.xc(4);k.Sb(1),k.Cc("authDialog",n.authDialog)}}function So(e,t){1&e&&(k.lc(0,"div",19),k.gc(1,"embed-tab"),k.kc())}var Oo=function(){return{event:"dialog.share.tab.embed.click"}};function Eo(e,t){if(1&e){var n=k.mc();k.wc(),k.vc(),k.lc(0,"div",13),k.lc(1,"div",14),k.lc(2,"a",15),k.tc("click",(function(){return k.Pc(n),k.xc(3).selectedTab.next("collaborators")})),k.ed(3,"SHARE.TAB_COLLAB"),k.kc(),k.lc(4,"a",15),k.tc("click",(function(){return k.Pc(n),k.xc(3).selectedTab.next("collab-settings")})),k.ed(5,"SHARE.TAB_COLLAB_SETTINGS"),k.kc(),k.lc(6,"a",16),k.tc("click",(function(){return k.Pc(n),k.xc(3).selectedTab.next("embed")})),k.ed(7,"SHARE.TAB_EMBED"),k.kc(),k.kc(),k.lc(8,"div",17),k.cd(9,wo,2,1,"div",18),k.cd(10,ko,2,1,"div",18),k.cd(11,So,2,0,"div",18),k.kc(),k.kc()}if(2&e){var r=t.ngIf;k.Sb(2),k.Xb("active","collaborators"===r),k.Sb(2),k.Xb("active","collab-settings"===r),k.Sb(2),k.Xb("active","embed"===r),k.Cc("trackAction",k.Gc(10,Oo)),k.Sb(3),k.Cc("ngIf","collaborators"===r),k.Sb(1),k.Cc("ngIf","collab-settings"===r),k.Sb(1),k.Cc("ngIf","embed"===r)}}function _o(e,t){if(1&e){var n=k.mc();k.lc(0,"div",5,6),k.lc(2,"div",7),k.lc(3,"h1",8),k.ed(4,"SHARE.HEADING"),k.kc(),k.lc(5,"button",9),k.tc("click",(function(){return k.Pc(n),k.xc(2).closeWindow()})),k.wc(),k.lc(6,"svg",10),k.gc(7,"use",11),k.kc(),k.kc(),k.kc(),k.cd(8,Eo,12,11,"div",12),k.yc(9,"async"),k.kc()}if(2&e){var r=k.xc(2);k.Sb(8),k.Cc("ngIf",k.zc(9,1,r.selectedTab))}}function Io(e,t){if(1&e&&(k.lc(0,"div",22),k.gc(1,"iframe",23,24),k.yc(3,"safe"),k.kc()),2&e){var n=k.xc().ngIf,r=k.xc();k.Sb(1),k.Cc("src",k.zc(3,1,r.getSourceIframeUrl(n)),k.Rc)}}function Po(e,t){if(1&e){var n=k.mc();k.lc(0,"div",1,2),k.tc("click",(function(e){return k.Pc(n),k.xc().closeOnOverlayClick(e)})),k.cd(2,_o,10,3,"div",3),k.cd(3,Io,4,3,"div",4),k.kc()}if(2&e){var r=t.ngIf,i=k.xc();k.Xb("modal-window-container",!i.isExternalDocument(r))("modal-window-container-no-bg",i.isExternalDocument(r)),k.Sb(2),k.Cc("ngIf",!i.isExternalDocument(r)),k.Sb(1),k.Cc("ngIf",i.isExternalDocument(r))}}var To=function(e){function t(t,n,r,i,a,o){var s=e.call(this)||this;return s.modalController=t,s.ll=n,s.pm=r,s.auth=i,s.commandService=a,s.stateService=o,s.subs=[],s.selectedTab=new I.a("collaborators"),s.diagramModel=s.ll.forCurrent(!1).getDiagramOnce().pipe(Object(_.a)((function(e){s.isExternalDocument(e)&&s.stateService.set("ModalBlur",!1)}))),s.subs.push(s.listenToConnectionChanges().subscribe()),s}return Object(r.e)(t,e),t.prototype.isExternalDocument=function(e){return Boolean(e.source&&"creately"!==e.source.type)},t.prototype.getSourceIframeUrl=function(e){return C.m.sourceConfig[e.source.type].shareUrl},t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.ngOnInit=function(){var e=this;if(this.container&&this.containerInner){var t=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(t)}var n=this.pm.recv().subscribe((function(t){return e.handleIncomingMessages(t)}));this.subs.push(n)},t.prototype.closeWindow=function(){var e=this;if(this.container&&this.containerInner){var t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)}},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.listenToConnectionChanges=function(){var e=this;return this.stateService.changes(x.c).pipe(Object(_.a)((function(t){t!==x.c.ONLINE&&e.modalController.hide()})))},t.prototype.handleIncomingMessages=function(e){if(e&&"object"==typeof e){var t=e,n=t.source,r=t.event,i=t.data;"api/source/gdrive"===n&&("ready"===r&&this.handleShareFrameReady(i),"close"===r&&this.handleShareFrameClose(i))}},t.prototype.handleShareFrameReady=function(e){var t=this;this.diagramModel.subscribe((function(e){var n=e.source.fileId,r=t.auth.token,i=t.shareFrame.nativeElement;t.pm.sendToWindow("share",{fileId:n,token:r},i.contentWindow)}))},t.prototype.handleShareFrameClose=function(e){this.modalController.hide()},t.\u0275fac=function(e){return new(e||t)(k.fc(C.gb),k.fc(sn.a),k.fc(C.pb),k.fc($a.a),k.fc(C.B),k.fc(C.Ib))},t.\u0275cmp=k.Zb({type:t,selectors:[["share-window"]],viewQuery:function(e,t){var n;(1&e&&(k.jd(yo,!0),k.jd(xo,!0),k.jd(Co,!0)),2&e)&&(k.Lc(n=k.uc())&&(t.container=n.first),k.Lc(n=k.uc())&&(t.containerInner=n.first),k.Lc(n=k.uc())&&(t.shareFrame=n.first))},inputs:{authDialog:"authDialog"},features:[k.Pb],decls:2,vars:3,consts:[["class","fx-cover fx-center-all",3,"modal-window-container","modal-window-container-no-bg","click",4,"ngIf"],[1,"fx-cover","fx-center-all",3,"click"],["window",""],["class","modal-window-inner",4,"ngIf"],["class","fx-cover",4,"ngIf"],[1,"modal-window-inner"],["windowInner",""],[1,"modal-window-heading"],["translate",""],[1,"nu-btn-small","nu-btn-icon","lib-browser-close-btn",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],["class","modal-window-content",4,"ngIf"],[1,"modal-window-content"],[1,"share-tabs-header"],["translate","",3,"click"],["translate","",3,"trackAction","click"],[1,"share-tabs-content"],["class","share-tab-item",4,"ngIf"],[1,"share-tab-item"],[3,"authDialog","openCollabSettings"],[3,"authDialog"],[1,"fx-cover"],[1,"share-iframe",3,"src"],["shareFrame",""]],template:function(e,t){1&e&&(k.cd(0,Po,4,6,"div",0),k.yc(1,"async")),2&e&&k.Cc("ngIf",k.zc(1,1,t.diagramModel))},directives:[i.t,y.a,Qa.a,ro,so,vo],pipes:[i.b,bo.b],styles:[".share-tabs-header[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3e7;padding:10px 20px 7px;margin-bottom:20px}.share-tabs-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-bottom:5px;border-bottom:2px solid transparent;margin-right:30px}.share-tabs-header[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{border-bottom:2px solid #61a15e}.modal-window-inner[_ngcontent-%COMP%]{width:600px;height:475px;padding:0}.share-tabs-content[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;padding-bottom:20px;height:calc(100% - 54px)}.share-tab-item[_ngcontent-%COMP%]{height:100%}  .modal-window-content{height:calc(100% - 65px)}.modal-window-heading[_ngcontent-%COMP%]{padding-top:25px}.modal-window-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.share-iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;border:none}"],changeDetection:0}),t}(w.p),Ao=n("7+LA"),Mo=n("s1Pg"),Do=function(){return{event:"conversion.payment-failed.banner.click"}},jo=function(){function e(e,t){this.modalController=e,this.translate=t}return e.prototype.showBillingPage=function(){this.modalController.show(Mo.a,{inputs:{page:"billing"}})},e.\u0275fac=function(t){return new(t||e)(k.fc(C.gb),k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["payment-failed-message"]],decls:23,vars:17,consts:[[1,"payment-failed-container","fx-pointer-events-auto"],[1,"payment-failed-inner","fx-center-vertical"],[1,"payment-failed-icon"],[1,"nu-icon","nu-icon-small","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning"],[1,"payment-failed-text"],[1,"payment-failed-auth-link","white",3,"trackAction","click"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.lc(1,"div",1),k.lc(2,"div",2),k.wc(),k.lc(3,"svg",3),k.gc(4,"use",4),k.kc(),k.kc(),k.vc(),k.lc(5,"div",5),k.lc(6,"span"),k.ed(7),k.yc(8,"async"),k.kc(),k.lc(9,"span"),k.lc(10,"b"),k.ed(11),k.yc(12,"async"),k.kc(),k.kc(),k.lc(13,"span"),k.ed(14),k.yc(15,"async"),k.kc(),k.gc(16,"br"),k.lc(17,"span"),k.ed(18),k.yc(19,"async"),k.kc(),k.lc(20,"a",6),k.tc("click",(function(){return t.showBillingPage()})),k.ed(21),k.yc(22,"async"),k.kc(),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(7),k.gd(" ",k.zc(8,6,t.translate.get("PAYMENT_FAILED_MESSAGES.HEADER_MSG_PART1_SUB1"))," "),k.Sb(4),k.fd(k.zc(12,8,t.translate.get("PAYMENT_FAILED_MESSAGES.HEADER_MSG_PART1_SUB2"))),k.Sb(3),k.gd(" ",k.zc(15,10,t.translate.get("PAYMENT_FAILED_MESSAGES.HEADER_MSG_PART1_SUB3"))," "),k.Sb(4),k.gd(" ",k.zc(19,12,t.translate.get("PAYMENT_FAILED_MESSAGES.HEADER_MSG_PART2"))," "),k.Sb(2),k.Cc("trackAction",k.Gc(16,Do)),k.Sb(1),k.gd(" ",k.zc(22,14,t.translate.get("PAYMENT_FAILED_MESSAGES.BUTTONS"))," "))},directives:[Qa.a],pipes:[i.b],styles:[".payment-failed-container[_ngcontent-%COMP%]{color:#fae8e5;height:30px;position:relative;top:0;width:100%;z-index:1;background-color:#f05252;padding:20px}.payment-failed-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline}.payment-failed-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{font-weight:700;color:#fae8e5}.payment-failed-inner[_ngcontent-%COMP%]{height:100%}.payment-failed-icon[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px}.payment-failed-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:4px}"],changeDetection:0}),e}(),No=n("uDTp"),Ro=n("uIWG"),Lo=n("thzy"),Fo=n("YsaH");function Bo(e,t){1&e&&k.gc(0,"br")}function Vo(e,t){if(1&e&&(k.lc(0,"p"),k.lc(1,"span",12),k.ed(2),k.kc(),k.kc()),2&e){var n=k.xc(2).$implicit;k.Sb(2),k.fd(n.collab.email)}}function zo(e,t){if(1&e&&(k.lc(0,"p",13),k.ed(1),k.yc(2,"translate"),k.kc()),2&e){var n=k.xc(2).$implicit;k.Sb(1),k.fd(k.zc(2,1,n.collab.lastSeenMoment))}}var Uo=function(){return{event:"header.right.avatar.click"}};function Go(e,t){if(1&e&&(k.lc(0,"div",5),k.gc(1,"user-image",6),k.lc(2,"div",7),k.lc(3,"p",8),k.ed(4),k.kc(),k.lc(5,"p"),k.lc(6,"label",9),k.ed(7),k.kc(),k.kc(),k.cd(8,Bo,1,0,"br",10),k.cd(9,Vo,3,1,"p",10),k.cd(10,zo,3,3,"p",11),k.kc(),k.kc()),2&e){var n=k.xc().$implicit,r=k.xc();k.Xb("disable",!r.shouldShowToolTip),k.Sb(1),k.Cc("hasImage",n.collab.hasImage)("imagePath",n.collab.image)("userColor",n.collab.displayColor)("userInitials",n.collab.initial)("userRegistered",n.collab.isRegistered)("trackAction",k.Gc(14,Uo))("userOnlineStatus",n.collab.online),k.Sb(3),k.fd(n.collab.fullName),k.Sb(3),k.fd(n.collab.roleTitle),k.Sb(1),k.Cc("ngIf",r.userHasEditPermission),k.Sb(1),k.Cc("ngIf",r.userHasEditPermission),k.Sb(1),k.Cc("ngIf",r.userHasEditPermission)}}var Ho=function(e,t){return{active:e,inactive:t}};function Yo(e,t){if(1&e&&(k.lc(0,"div",14),k.lc(1,"div",15),k.lc(2,"span",16),k.ed(3),k.kc(),k.kc(),k.kc()),2&e){var n=k.xc().$implicit;k.Sb(2),k.Cc("ngClass",k.Ic(2,Ho,n.onlineStatus,!n.onlineStatus)),k.Sb(1),k.gd("+",n.remainingCount,"")}}var qo=function(e,t){return{"margin-left":e,"z-index":t}};function Wo(e,t){if(1&e&&(k.lc(0,"div",2),k.cd(1,Go,11,15,"div",3),k.cd(2,Yo,4,5,"div",4),k.kc()),2&e){var n=t.$implicit;k.Cc("ngStyle",k.Ic(4,qo,n.position+"px",n.index))("ngClass",k.Ic(7,Ho,n.collab&&n.collab.online,n.collab&&!n.collab.online)),k.Sb(1),k.Cc("ngIf",!!n.collab),k.Sb(1),k.Cc("ngIf",!n.collab)}}var Xo=function(e){function t(t,n,i){var a=e.call(this)||this;return a.state=i,a.limitCount=0,a.shouldShowToolTip=!0,a.collabs=n.getUserData().pipe(Object(je.a)((function(e){return!!e})),Object(E.a)((function(e){return Object(cn.b)(t.getCollabs().pipe(Object(Te.a)((function(e){return e.filter((function(e){return e.id!==a.state.get("CurrentUser")}))}))),a.collabHover).pipe(Object(Te.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return a.getCollabViews(n,i)})))}))),a}return Object(r.e)(t,e),t.\u0275fac=function(e){return new(e||t)(k.fc(Kt.a),k.fc(fe.x),k.fc(C.Ib))},t.\u0275cmp=k.Zb({type:t,selectors:[["user-strip"]],inputs:{limitCount:"limitCount",showActiveOnly:"showActiveOnly",userHasEditPermission:"userHasEditPermission",shouldShowToolTip:"shouldShowToolTip"},features:[k.Pb],decls:3,vars:4,consts:[[1,"user-strip-container"],["class","user-strip-img-wrapper",3,"ngStyle","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"user-strip-img-wrapper",3,"ngStyle","ngClass"],["tooltip","","placement","bottom","style","display: inline-block;",3,"disable",4,"ngIf"],["style","display: inline-block;",4,"ngIf"],["tooltip","","placement","bottom",2,"display","inline-block"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","trackAction","userOnlineStatus"],[1,"tooltip-content","user-info-bubble"],[1,"nu-text-bold"],["translate",""],[4,"ngIf"],["class","nu-text-small grey",4,"ngIf"],[1,"nu-text-small","white"],[1,"nu-text-small","grey"],[2,"display","inline-block"],[1,"user-count-inner","fx-round"],[3,"ngClass"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.cd(1,Wo,3,10,"div",1),k.yc(2,"async"),k.kc()),2&e&&(k.Sb(1),k.Cc("ngForOf",k.zc(2,2,t.collabs))("ngForTrackBy",t.getCollabTrackingId))},directives:[i.s,i.w,i.q,i.t,D.a,Na.a,Qa.a,y.a],pipes:[i.b,y.d],styles:['.user-strip-container[_ngcontent-%COMP%]{display:flex}.user-info-bubble[_ngcontent-%COMP%]{padding:10px}.user-count-inner[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;width:30px;background-size:cover;background-position:50%;background-repeat:no-repeat;background-color:#fff;overflow:hidden;text-align:center;border:#fff}.user-count-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;height:28px}.user-count-inner[_ngcontent-%COMP%]:after{content:"";display:block;height:inherit;width:inherit;top:0;background:hsla(0,0%,100%,.7)}.user-count-inner[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#26373b}.user-count-inner[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{color:grey}.user-strip-img-wrapper[_ngcontent-%COMP%]{max-width:100px;transition:all .2s linear;transition-delay:0s}.user-strip-img-wrapper[_ngcontent-%COMP%]   user-image[_ngcontent-%COMP%]{transform:scale(1);transition:all .2s linear;transition-delay:.3s}.user-strip-container[_ngcontent-%COMP%]     .user-img-inner{box-shadow:2px 0 #fff;border:1px solid #fff}.user-strip-container[_ngcontent-%COMP%]     .user-img-container.active .user-img-inner{box-shadow:none}.disable[_ngcontent-%COMP%]{pointer-events:none}'],changeDetection:0}),t}(Fo.a),Ko=n("pYIu"),Zo=n("TdEb"),$o=n("pVzg"),Qo=n("MjP4"),Jo=function(){function e(e,t,n,r){this.state=e,this.ll=t,this.resources=n,this.translate=r,this.maxClientExportWidthOrHeight=6e3,this.maxServerExportWidth=32e3}return e.prototype.prepareSvgData=function(){var e=this.ll.forCurrentObserver(!0),t=this.createDiagramSVGView(e);return e.pipe(Object(Qt.a)(1),Object(E.a)((function(e){return e.getDiagramOnce()})),Object(E.a)((function(e){return Object(sa.a)(Object(Ie.a)((function(){return t.populateDiagram()})),Object(Ie.a)((function(){return t.toSvg().pipe(Object(Qt.a)(1),Object(Te.a)((function(t){return{svg:t,name:e.name,id:e.id}})))})))})))},e.prototype.getPngBlob=function(e,t){var n=this;return this.ll.forCurrent(e).getDiagramOnce().pipe(Object(E.a)((function(e){var r=0===n.state.get("Selected").length||t?e.getBounds():e.getBounds(n.state.get("Selected")),i=r.width+40,a=r.height+40;if(n.isDiagramExceededMaxClientExport(i,a))return n.fetchDiagramFromServer("png",2*i).pipe(Object(Te.a)((function(t){return{name:e.name,blob:t}})));var o=n.state.get("Selected"),s=n.state.get("ShapeViews"),c=n.state.get("DiagramCanvas");c.removeAllChildren(),s.filter((function(e){return!!Object(tn.isEmpty)(o)||o.includes(e.name)})).forEach((function(e){e.visible=!0,c.addChild(e)})),c.cache(r.x-20,r.y-20,i,a,2);var l=c.getCacheDataURL();c.uncache();var u=n.state.get("ActiveShapes");return c.removeAllChildren(),s.filter((function(e){return u.includes(e.name)})).forEach((function(e){e.visible=!0,c.addChild(e)})),c.update(),Object(Oe.a)({name:e.name,blob:l})})),Object(Te.a)((function(e){return{content:e.blob,name:e.name+".png",type:"image/png",format:"blob"}})))},e.prototype.isDiagramExceededMaxClientExport=function(e,t){return e>this.maxClientExportWidthOrHeight||t>this.maxClientExportWidthOrHeight},e.prototype.createDiagramSVGView=function(e){return new de.m(e,this.resources,this.state)},e.prototype.fetchDiagramFromServer=function(e,t){var n=Math.min(this.maxServerExportWidth,Math.round(t));return this.prepareSvgData().pipe(Object(E.a)((function(t){return Object(Se.a)(fetch(C.m.get("SVG_TO_RASTER_URL"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({type:e,width:n,svg:t.svg,id:t.id})}))})),Object(E.a)((function(e){return Object(Se.a)(e.blob())})))},e.\u0275fac=function(t){return new(t||e)(k.pc(C.Ib),k.pc(sn.a),k.pc(C.W),k.pc(y.e))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),es=function(){return{event:"header.right.exit.click"}},ts=function(){function e(e,t,n){this.state=e,this.postMessage=t,this.diagramExportService=n}return e.prototype.confirmAndClose=function(){var e=this;if("confluence"===this.state.get("PluginApp")){this.state.set("LoadingIndicatorState",{main:!0,description:"Generating Diagram Image..."}),this.diagramExportService.getPngBlob(!0,!0).subscribe((function(t){var n=t;e.postMessage.sendToParent("document:close",{documentId:e.state.get("CurrentDiagram"),dataUrl:n.content})}))}else this.redirectToUrl(Qo.a.get().exitUrl)},e.prototype.redirectToUrl=function(e){window.location=e},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(C.pb),k.fc(Jo))},e.\u0275cmp=k.Zb({type:e,selectors:[["close-document-button"]],decls:6,vars:2,consts:[["tooltip","","placement","bottom",1,"ic-btn-close","nu-btn-med","nu-btn-icon",3,"trackAction","click"],[1,"fx-center-all"],[1,"nu-icon","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-icon-exit"],["translate","",1,"tooltip-content"]],template:function(e,t){1&e&&(k.lc(0,"button",0),k.tc("click",(function(){return t.confirmAndClose()})),k.lc(1,"span",1),k.wc(),k.lc(2,"svg",2),k.gc(3,"use",3),k.kc(),k.kc(),k.vc(),k.lc(4,"span",4),k.ed(5,"TOOLTIPS.CLOSE"),k.kc(),k.kc()),2&e&&k.Cc("trackAction",k.Gc(1,es))},directives:[D.a,Qa.a,y.a],styles:[".nu-btn-med[_ngcontent-%COMP%] { margin-top: 10px; padding-right: 0; height: 30px; }"],changeDetection:0}),e}(),ns=["diagramNameToolTip"],rs=["callButtonTooltip"],is=["diagramAppStatusToolTip"],as=["header"];function os(e,t){1&e&&k.gc(0,"payment-failed-message")}function ss(e,t){1&e&&(k.lc(0,"div",20),k.lc(1,"div"),k.lc(2,"span",21),k.ed(3,"HEADER_MENU.DIAGRAM_VIEW_MODE"),k.kc(),k.kc(),k.kc())}function cs(e,t){if(1&e&&(k.lc(0,"div",22),k.gc(1,"nu-badge",23),k.yc(2,"async"),k.yc(3,"async"),k.yc(4,"async"),k.yc(5,"async"),k.kc()),2&e){var n=k.xc(3);k.Sb(1),k.Cc("badgeText",k.zc(2,4,n.documentStatus).label)("bgColor",k.zc(3,6,n.documentStatus).bgColor)("textColor",k.zc(4,8,n.documentStatus).textColor)("expanded",k.zc(5,10,n.headerExpanded))}}function ls(e,t){if(1&e&&k.gc(0,"ng-lottie",28),2&e){var n=k.xc(4);k.Cc("options",n.conferenceOnGoingCallConfig)}}function us(e,t){if(1&e&&k.gc(0,"ng-lottie",28),2&e){var n=k.xc(4);k.Cc("options",n.conferenceInComingCallConfig)}}function ps(e,t){if(1&e&&(k.jc(0),k.lc(1,"div",24),k.gc(2,"user-strip",25),k.yc(3,"async"),k.kc(),k.lc(4,"div",26),k.cd(5,ls,1,1,"ng-lottie",27),k.yc(6,"async"),k.cd(7,us,1,1,"ng-lottie",27),k.yc(8,"async"),k.kc(),k.ic()),2&e){var n=k.xc(3);k.Sb(2),k.Cc("limitCount",3)("showActiveOnly",!0)("userHasEditPermission",k.zc(3,6,n.userHasEditPermission))("shouldShowToolTip",!1),k.Sb(3),k.Cc("ngIf","joined"===k.zc(6,8,n.conferenceStatus)),k.Sb(2),k.Cc("ngIf","active"===k.zc(8,10,n.conferenceStatus))}}var hs=function(){return{event:"header.left.diagramName.click"}},ds=function(){return["InterfaceControlState","view"]};function fs(e,t){if(1&e){var n=k.mc();k.jc(0),k.lc(1,"div",12),k.lc(2,"div"),k.lc(3,"div",13),k.yc(4,"async"),k.yc(5,"async"),k.yc(6,"async"),k.lc(7,"editable-label",14),k.tc("changedText",(function(e){return k.Pc(n),k.xc(2).renameDiagram(e)}))("click",(function(e){return k.Pc(n),k.xc(2).selectDiagramName(e)}))("focusout",(function(){return k.Pc(n),k.xc(2).diagramNameClicked=!1})),k.yc(8,"async"),k.kc(),k.lc(9,"span",15),k.ed(10,"TOOLTIPS.RENAME_DIAGRAM"),k.kc(),k.lc(11,"div",16,17),k.lc(13,"span",15),k.ed(14,"TOOLTIPS.REQUIRED_RENAME"),k.kc(),k.kc(),k.kc(),k.cd(15,ss,4,0,"div",18),k.kc(),k.cd(16,cs,6,12,"div",19),k.yc(17,"async"),k.cd(18,ps,9,12,"ng-container",0),k.yc(19,"async"),k.kc(),k.ic()}if(2&e){var r=t.ngIf,i=k.xc(2);k.Sb(3),k.Xb("header-disabled",!k.zc(4,10,i.userHasEditPermission)||"view"===k.zc(5,12,i.uiState))("move-down","view"===k.zc(6,14,i.uiState)),k.Sb(4),k.Dc("value",null==r?null:r.name),k.Cc("trackAction",k.Gc(22,hs))("readonly","view"===k.zc(8,16,i.uiState)),k.Sb(8),k.Cc("ifState",k.Gc(23,ds)),k.Sb(1),k.Cc("ngIf","none"!==k.zc(17,18,i.documentStatus).id),k.Sb(2),k.Cc("ngIf",!k.zc(19,20,i.headerExpanded))}}var gs=function(){return{event:"header.demo.signup.click"}};function ms(e,t){if(1&e){var n=k.mc();k.lc(0,"button",29),k.tc("click",(function(){return k.Pc(n),k.xc(2).showAuthDialog()})),k.lc(1,"label",30),k.ed(2,"LABELS.SIGNUP"),k.kc(),k.lc(3,"div",31),k.lc(4,"span",32),k.ed(5,"TOOLTIPS.SIGNUP"),k.kc(),k.gc(6,"br"),k.lc(7,"p",33),k.ed(8," TOOLTIPS.SIGNUP_DESC "),k.kc(),k.kc(),k.kc()}2&e&&k.Cc("trackAction",k.Gc(1,gs))}var vs=function(){return{event:"header.right.upgrade.click"}};function bs(e,t){if(1&e){var n=k.mc();k.lc(0,"button",34),k.tc("click",(function(){return k.Pc(n),k.xc(2).openUpgradePage()})),k.wc(),k.lc(1,"svg",35),k.gc(2,"use",36),k.kc(),k.vc(),k.lc(3,"label",30),k.ed(4,"LABELS.UPGRADE"),k.kc(),k.lc(5,"div",31),k.lc(6,"span",32),k.ed(7,"TOOLTIPS.UPGRADE"),k.kc(),k.gc(8,"br"),k.lc(9,"p",33),k.ed(10," TOOLTIPS.UPGRADE_DESC "),k.kc(),k.kc(),k.kc()}2&e&&k.Cc("trackAction",k.Gc(1,vs))}function ys(e,t){if(1&e){var n=k.mc();k.lc(0,"simple-dropdown-item",41),k.yc(1,"async"),k.lc(2,"div",42),k.lc(3,"a",43),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc(3).export(e.id)})),k.yc(4,"async"),k.ed(5),k.kc(),k.kc(),k.kc()}if(2&e){var r=t.$implicit,i=k.xc(3);k.Xb("disabled",(k.zc(1,6,i.appConnectionStatus),!1)),k.Cc("item",r),k.Sb(3),k.Xb("disabled",0===k.zc(4,8,i.appConnectionStatus)&&!r.offline),k.Sb(2),k.fd(r.label)}}var xs=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0,multiselectable:!1}};function Cs(e,t){if(1&e&&(k.lc(0,"abs-dropdown",37,38),k.lc(2,"simple-dropdown-button",39),k.yc(3,"async"),k.lc(4,"span",30),k.ed(5,"LABELS.EXPORT"),k.kc(),k.kc(),k.cd(6,ys,6,10,"simple-dropdown-item",40),k.kc()),2&e){var n=k.xc(2);k.Cc("settings",k.Gc(5,xs)),k.Sb(2),k.Cc("items",k.zc(3,3,n.documentDropdownItems)),k.Sb(4),k.Cc("ngForOf",n.exportTypes)}}var ws=function(){return{event:"header.right.share.click"}};function ks(e,t){if(1&e){var n=k.mc();k.lc(0,"button",45),k.tc("click",(function(){return k.Pc(n),k.xc(3).openShareWindow()})),k.yc(1,"async"),k.wc(),k.lc(2,"svg",46),k.gc(3,"use"),k.yc(4,"async"),k.kc(),k.vc(),k.lc(5,"label",30),k.ed(6,"LABELS.SHARE"),k.kc(),k.lc(7,"span",31),k.lc(8,"p",47),k.ed(9),k.yc(10,"async"),k.kc(),k.lc(11,"p",48),k.ed(12),k.yc(13,"async"),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc(3);k.Cc("disabled",0===k.zc(1,5,r.appConnectionStatus))("trackAction",k.Gc(13,ws)),k.Sb(3),k.Tb("href","./assets/icons/symbol-defs.svg#nu-ic-"+k.zc(4,7,r.shareButtonIcon),null,"xlink"),k.Sb(6),k.fd(k.zc(10,9,r.tooltipHeading)),k.Sb(3),k.fd(k.zc(13,11,r.tooltipDescription))}}var Ss=function(){return["InterfaceControlState","edit"]};function Os(e,t){1&e&&(k.jc(0),k.cd(1,ks,14,14,"button",44),k.ic()),2&e&&(k.Sb(1),k.Cc("ifState",k.Gc(1,Ss)))}function Es(e,t){1&e&&k.gc(0,"div",59)}function _s(e,t){1&e&&(k.wc(),k.lc(0,"svg",69),k.gc(1,"use",70),k.kc())}function Is(e,t){1&e&&(k.lc(0,"div",71),k.lc(1,"div",72),k.gc(2,"div",73),k.gc(3,"div",74),k.gc(4,"div",75),k.kc(),k.kc())}function Ps(e,t){if(1&e&&k.gc(0,"ng-lottie",28),2&e){var n=k.xc(5);k.Cc("options",n.conferenceInComingCallConfig)}}function Ts(e,t){if(1&e&&k.gc(0,"ng-lottie",76),2&e){var n=k.xc(5);k.Cc("options",n.conferenceOnGoingCallConfig)}}function As(e,t){1&e&&(k.wc(),k.lc(0,"svg",77),k.gc(1,"use",78),k.kc())}function Ms(e,t){if(1&e&&(k.lc(0,"p",82),k.ed(1),k.kc()),2&e){var n=k.xc().ngIf;k.Sb(1),k.gd(" ",n.heading," ")}}function Ds(e,t){if(1&e&&(k.lc(0,"div"),k.lc(1,"label",79),k.ed(2,"LABELS.BETA"),k.kc(),k.cd(3,Ms,2,1,"p",80),k.lc(4,"p",81),k.ed(5),k.kc(),k.kc()),2&e){var n=t.ngIf;k.Sb(3),k.Cc("ngIf",n.heading),k.Sb(2),k.gd(" ",n.description," ")}}var js=function(e){return{value1:e}},Ns=function(e){return{event:"header.right.axion.call.click",data:e}};function Rs(e,t){if(1&e){var n=k.mc();k.lc(0,"div",60),k.lc(1,"button",61,62),k.tc("click",(function(){return k.Pc(n),k.xc(4).actionConference()})),k.yc(3,"async"),k.yc(4,"async"),k.cd(5,_s,2,0,"svg",63),k.yc(6,"async"),k.cd(7,Is,5,0,"div",64),k.yc(8,"async"),k.cd(9,Ps,1,1,"ng-lottie",27),k.yc(10,"async"),k.lc(11,"div",65),k.cd(12,Ts,1,1,"ng-lottie",66),k.yc(13,"async"),k.lc(14,"div",67),k.cd(15,As,2,0,"svg",68),k.yc(16,"async"),k.kc(),k.kc(),k.lc(17,"span",31),k.cd(18,Ds,6,2,"div",0),k.yc(19,"async"),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc(4);k.Sb(1),k.Cc("disabled",0===k.zc(3,9,r.appConnectionStatus))("trackAction",k.Hc(27,Ns,k.Hc(25,js,k.zc(4,11,r.conferenceStatus))))("ngClass",r.white),k.Sb(4),k.Cc("ngIf","unstarted"===k.zc(6,13,r.conferenceStatus)),k.Sb(2),k.Cc("ngIf","connecting"===k.zc(8,15,r.conferenceStatus)),k.Sb(2),k.Cc("ngIf","active"===k.zc(10,17,r.conferenceStatus)),k.Sb(3),k.Cc("ngIf","joined"===k.zc(13,19,r.conferenceStatus)),k.Sb(3),k.Cc("ngIf","joined"===k.zc(16,21,r.conferenceStatus)),k.Sb(3),k.Cc("ngIf",k.zc(19,23,r.conferenceButtonTooltip))}}function Ls(e,t){1&e&&(k.lc(0,"label",30),k.ed(1,"LABELS.SAVE"),k.kc())}function Fs(e,t){1&e&&(k.lc(0,"label",30),k.ed(1,"LABELS.SAVING"),k.kc())}var Bs=function(){return{event:"header.right.save.click"}};function Vs(e,t){if(1&e){var n=k.mc();k.lc(0,"button",86),k.tc("click",(function(){return k.Pc(n),k.xc(6).openSaveDialog()})),k.yc(1,"async"),k.cd(2,Ls,2,0,"label",87),k.yc(3,"async"),k.cd(4,Fs,2,0,"label",87),k.yc(5,"async"),k.lc(6,"span",15),k.ed(7,"TOOLTIPS.SAVE"),k.kc(),k.kc()}if(2&e){var r=k.xc(6);k.Cc("disabled",k.zc(1,4,r.isSaveInProgress))("trackAction",k.Gc(10,Bs)),k.Sb(2),k.Cc("ngIf",!k.zc(3,6,r.isSaveInProgress)),k.Sb(2),k.Cc("ngIf",k.zc(5,8,r.isSaveInProgress))}}function zs(e,t){1&e&&(k.jc(0),k.cd(1,Vs,8,11,"button",85),k.ic()),2&e&&(k.Sb(1),k.Cc("ifState",k.Gc(1,Ss)))}var Us=function(){return["ApplicationIsEmbedded",!1]};function Gs(e,t){1&e&&(k.jc(0),k.cd(1,zs,2,2,"ng-container",83),k.gc(2,"close-document-button",84),k.ic()),2&e&&(k.Sb(1),k.Cc("ifState",k.Gc(1,Us)))}function Hs(e,t){if(1&e){var n=k.mc();k.lc(0,"div",89),k.lc(1,"a",43),k.tc("click",(function(){k.Pc(n);var e=k.xc().$implicit;return k.xc(4).export(e.id)})),k.yc(2,"async"),k.ed(3),k.kc(),k.kc()}if(2&e){var r=k.xc().$implicit,i=k.xc(4);k.Sb(1),k.Xb("disabled",0===k.zc(2,3,i.appConnectionStatus)&&!r.offline),k.Sb(2),k.fd(r.label)}}function Ys(e,t){if(1&e&&(k.wc(),k.vc(),k.lc(0,"simple-dropdown-item",41),k.yc(1,"async"),k.cd(2,Hs,4,5,"div",88),k.kc()),2&e){var n=t.$implicit,r=k.xc(4);k.Xb("disabled",(k.zc(1,4,r.appConnectionStatus),!1)),k.Cc("item",n),k.Sb(2),k.Cc("ngIf",r.canExportWorkspace)}}function qs(e,t){if(1&e&&(k.wc(),k.lc(0,"svg",95),k.gc(1,"use"),k.kc()),2&e){var n=k.xc(3).$implicit;k.Sb(1),k.Tb("href",n.icon,null,"xlink")}}function Ws(e,t){if(1&e){var n=k.mc();k.lc(0,"div",92),k.tc("click",(function(){k.Pc(n);var e=k.xc(2).$implicit;return k.xc(4).openSelectedItem(e.id)})),k.yc(1,"async"),k.lc(2,"a",93),k.ed(3),k.kc(),k.cd(4,qs,2,1,"svg",94),k.kc()}if(2&e){var r=k.xc(2).$implicit,i=k.xc(4);k.Xb("disabled",0===k.zc(1,4,i.appConnectionStatus)&&!r.isAvailableOffline||!r.isEnabled),k.Sb(3),k.fd(r.label),k.Sb(1),k.Cc("ngIf",r.icon)}}function Xs(e,t){if(1&e&&(k.lc(0,"div"),k.cd(1,Ws,5,6,"div",91),k.kc()),2&e){var n=k.xc().$implicit;k.Sb(1),k.Cc("ngIf",!n.isSeparator&&!n.hasSubMenu)}}function Ks(e,t){1&e&&k.gc(0,"div",96)}function Zs(e,t){if(1&e&&(k.wc(),k.vc(),k.lc(0,"simple-dropdown-item",41),k.cd(1,Xs,2,1,"div",0),k.yc(2,"async"),k.cd(3,Ks,1,0,"div",90),k.kc()),2&e){var n=t.$implicit,r=k.xc(4);k.Cc("item",n),k.Sb(1),k.Cc("ngIf",!n.isRoleBased||k.zc(2,3,r.roleObs)<=n.role),k.Sb(2),k.Cc("ngIf",n.isSeparator)}}var $s=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,multiselectable:!1}};function Qs(e,t){if(1&e&&(k.jc(0),k.cd(1,Es,1,0,"div",49),k.lc(2,"div",50),k.gc(3,"user-strip",51),k.yc(4,"async"),k.kc(),k.cd(5,Rs,20,29,"div",52),k.lc(6,"div",53),k.gc(7,"user-strip",51),k.yc(8,"async"),k.kc(),k.cd(9,Gs,3,2,"ng-container",11),k.lc(10,"abs-dropdown",54,38),k.lc(12,"simple-dropdown-button",55),k.yc(13,"async"),k.wc(),k.lc(14,"svg",56),k.gc(15,"use",57),k.kc(),k.kc(),k.cd(16,Ys,3,6,"simple-dropdown-item",40),k.cd(17,Zs,4,5,"simple-dropdown-item",58),k.yc(18,"async"),k.kc(),k.ic()),2&e){var n=k.xc(3);k.Sb(1),k.Cc("ifState",k.Gc(21,Us)),k.Sb(2),k.Cc("limitCount",3)("showActiveOnly",!0)("userHasEditPermission",k.zc(4,13,n.userHasEditPermission)),k.Sb(2),k.Cc("ngIf",n.enableCalls),k.Sb(2),k.Cc("limitCount",3)("showActiveOnly",!1)("userHasEditPermission",k.zc(8,15,n.userHasEditPermission)),k.Sb(2),k.Cc("ifMode","plugin"),k.Sb(1),k.Cc("settings",k.Gc(22,$s)),k.Sb(2),k.Cc("items",k.zc(13,17,n.documentDropdownItems)),k.Sb(4),k.Cc("ngForOf",n.exportTypes),k.Sb(1),k.Cc("ngForOf",k.zc(18,19,n.documentDropdownItems))}}function Js(e,t){if(1&e&&(k.jc(0),k.cd(1,Qs,19,23,"ng-container",0),k.yc(2,"async"),k.ic()),2&e){var n=k.xc(2);k.Sb(1),k.Cc("ngIf",k.zc(2,1,n.headerExpanded))}}function ec(e,t){if(1&e){var n=k.mc();k.lc(0,"div",3),k.tc("mouseenter",(function(){return k.Pc(n),k.xc().expandAll()}))("mouseleave",(function(){return k.Pc(n),k.xc().collapseAll()})),k.lc(1,"div",4),k.cd(2,fs,20,24,"ng-container",0),k.yc(3,"async"),k.kc(),k.lc(4,"div",5),k.cd(5,ms,9,2,"button",6),k.yc(6,"async"),k.cd(7,bs,11,2,"button",7),k.yc(8,"async"),k.cd(9,Cs,7,6,"abs-dropdown",8),k.cd(10,Os,2,2,"ng-container",0),k.kc(),k.lc(11,"div",9,10),k.cd(13,Js,3,3,"ng-container",11),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Sb(2),k.Cc("ngIf",k.zc(3,6,r.diagram)),k.Sb(3),k.Cc("ngIf",k.zc(6,8,r.isDemoUser)),k.Sb(2),k.Cc("ngIf",k.zc(8,10,r.isFreeUser)),k.Sb(2),k.Cc("ngIf",r.canExportWorkspace),k.Sb(1),k.Cc("ngIf",r.canShareWorkspace),k.Sb(3),k.Cc("ifMode","default")}}var tc=function(){function e(e,t,n,r,i,a,o,s,c,l,u,p,h,d,f,g,m,v,b,y){var x=this;this.state=e,this.route=t,this.commandService=n,this.titleService=r,this.ll=i,this.translate=a,this.conference=o,this.planPermManager=s,this.documentStatusSvc=c,this.modalController=l,this.userLocator=u,this.router=p,this.random=h,this.logger=d,this.notifierController=f,this.documentManage=g,this.dialogBoxController=m,this.collabLocator=v,this.authService=b,this.eDataSyncSvc=y,this.showPaymentFailedMessage=!1,this.diagramNameClicked=!1,this.showToolTipDelay=2e3,this.hideToolTipDelay=1e3,this.saveDialogDelay=500,this.subs=[],this.diagram=this.state.changes("CurrentDiagram").pipe(Object(E.a)((function(e){return x.ll.forDiagram(e,!1).getDiagramModel().pipe(Object(Xa.a)())}))),this.subs.push(this.ll.forCurrentObserver(!1).pipe(Object(E.a)((function(e){return e.getDiagramName().pipe(Object(_.a)((function(e){var t;t=e&&e.length>0?e+" - Creately":"Creately",x.titleService.setTitle(t)})))}))).subscribe()),this.roleObs=new I.a(he.g.REVIEWER),this.userHasEditPermission=new I.a(!1),this.subs.push(this.ll.forCurrentObserver(!1).pipe(Object(Qt.a)(1),Object(E.a)((function(e){return e.getDiagramName().pipe(Object(E.a)((function(e){return x.userHasEditPermission.pipe(Object(je.a)((function(e){return e})),Object(Qt.a)(1),Object(E.a)((function(t){return"Untitled Workspace"===e&&t?x.showDiagramNameTooltip():(x.hideDiagramNameTooltip(),hi.a)})))})))}))).subscribe()),this.subs.push(this.tooltipTourAutomation().subscribe()),this.documentStatus=new I.a(this.documentStatusSvc.getDocumentStatus("none")),this.documentDropdownItems=new I.a(null),this.headerExpanded=new I.a(!1),this.isSaveInProgress=new I.a(!1),this.shareButtonIcon=new I.a(""),this.tooltipHeading=new I.a(""),this.tooltipDescription=new I.a(""),this.isDemoUser=new I.a(!1),this.isFreeUser=new I.a(!1),this.isFreeUserSuspended=!1,this.maxWidth=460,this.tooltipCollapseAllOverride=!1}return Object.defineProperty(e.prototype,"appDisabledState",{get:function(){return this.state.changes("CurrentDiagram").pipe(Object(E.a)((function(e){return""===e||"start"===e?Object(Oe.a)(!1):Object(Oe.a)(!0)})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUserSignedIn",{get:function(){return window.gravity.client.hasValidSession()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appStatusIndicatorInfo",{get:function(){var e=this;return this.state.changes(x.c).pipe(Object(Te.a)((function(t){return t===x.c.OFFLINE?{icon:"offline",tooltip:{heading:e.translate.instant("TOOLTIPS.OFFLINE.OFFLINE_HEADER_INDICATOR.HEADING"),description:e.translate.instant("TOOLTIPS.OFFLINE.OFFLINE_HEADER_INDICATOR.DESCRIPTION")}}:{icon:"online",tooltip:{heading:e.translate.instant("TOOLTIPS.ONLINE.ONLINE_HEADER_INDICATOR.HEADING"),description:e.translate.instant("TOOLTIPS.ONLINE.ONLINE_HEADER_INDICATOR.DESCRIPTION")}}})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conferenceButtonTooltip",{get:function(){var e=this;return this.conference.currentConference.pipe(Object(Te.a)((function(t){return t?"connecting"===t.status?{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.CALL_CONNECTING"),description:""}:"active"===t.status?{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.JOIN_CALL"),description:""}:"joined"===t.status?{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.END_CALL"),description:""}:"full"===t.status?{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.CALL_FULL.HEADING"),description:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.CALL_FULL.DESC")}:{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.START_CALL"),description:""}:{heading:e.translate.instant("TOOLTIPS.CONFERENCE_CALL.START_CALL"),description:""}})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conferenceStatus",{get:function(){return this.conference.currentConference.pipe(Object(Te.a)((function(e){return e&&"disconnected"!==e.status?e.status:"unstarted"})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uiState",{get:function(){return this.state.changes("InterfaceControlState")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(x.c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableCalls",{get:function(){return!this.state.get("PluginApp")&&"default"===C.m.get("APP_MODE")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exportTypes",{get:function(){var e=[{id:"png",label:"LABELS.EXPORT_OPTIONS.PNG",offline:!0},{id:"svg",label:"LABELS.EXPORT_OPTIONS.SVG",offline:!0},{id:"jpeg",label:"LABELS.EXPORT_OPTIONS.JPEG",offline:!0},{id:"csv",label:"LABELS.EXPORT_OPTIONS.CSV",offline:!0}];return"plugin"!==C.m.get("APP_MODE")&&e.push({id:"pdf",label:"LABELS.EXPORT_OPTIONS.PDF",offline:!1}),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsNewCommentsAvailable",{get:function(){return this.state.changes("NewCommentsIndicator")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canShareWorkspace",{get:function(){return"plugin"!==C.m.get("APP_MODE")&&!this.state.get("ApplicationIsEmbedded")||!(!this.state.get("ApplicationIsEmbedded")||"msteams"!==this.state.get("PluginApp"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canExportWorkspace",{get:function(){var e=window.matchMedia("only screen and (max-width: 586px)").matches;return("plugin"!==C.m.get("APP_MODE")||!this.state.get("ApplicationIsEmbedded"))&&(!e||!this.state.get("ApplicationIsEmbedded")||"msteams"!==this.state.get("PluginApp"))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.prepareConferenceCallAnimations(),this.prepareAllPossibleDocumentDropdownItems(),this.subs.push(this.conference.currentConference.pipe(Object(je.a)((function(e){return e&&"active"===e.status})),Object(_.a)((function(){e.callButtonTooltip.show()})),Object($t.a)(this.hideToolTipDelay),Object(_.a)((function(){e.callButtonTooltip.hide()}))).subscribe()),this.subs.push(this.state.changes("CurrentDiagram").pipe(Object(Jt.a)(),Object(E.a)((function(){return e.ll.forCurrentObserver(!1).pipe(Object(E.a)((function(e){return e.getDiagramModel()})),Object(je.a)((function(e){return null!==e})),Object(Te.a)((function(t){return e.documentStatusSvc.getDocumentStatus(t.status)})))}))).subscribe((function(t){e.documentStatus.next(t)}))),this.subs.push(this.getTeamName().subscribe((function(t){return e.teamName=t})),this.listenToInterfaceAndPermissionChanges().subscribe(),this.listenToPermissionChange().subscribe(),this.updatePrivacy().subscribe(),this.planPermManager.isDemoUser().subscribe((function(t){return e.isDemoUser.next(t)})),this.userLocator.isUserPaused().pipe(Object(Qt.a)(1),Object(_.a)((function(t){return e.isUserPaused=t}))).subscribe(),this.planPermManager.isFreeUser().subscribe((function(t){return e.isFreeUser.next(t)})),this.checkIsUserSuspended())},e.prototype.export=function(e){var t=this;switch(C.Kb.track("header.right.export.click",{value1Type:"type",value1:e}),e){case"png":if(this.isDemoUser.value)this.showAuthDialog();else if(this.planPermManager.check([pe.p.DIAGRAM_EXPORT_AS_PNG])){var n=+localStorage.getItem("upgradpopeskipcount");this.isFreeUser.value&&n>0?this.showExportUpgradeDialog(vi.a.exportAsPng,pe.p.DIAGRAM_EXPORT_AS_PNG):(this.commandService.dispatch(vi.a.exportAsPng),localStorage.setItem("upgradpopeskipcount",(n+1).toString()))}else this.showExportUpgradeDialog(vi.a.exportAsPng,pe.p.DIAGRAM_EXPORT_AS_PNG);break;case"jpeg":if(this.isDemoUser.value)this.showAuthDialog();else if(this.planPermManager.check([pe.p.DIAGRAM_EXPORT_AS_JPEG])){n=+localStorage.getItem("upgradpopeskipcount");this.isFreeUser.value&&n>0?this.showExportUpgradeDialog(vi.a.exportAsJpeg,pe.p.DIAGRAM_EXPORT_AS_JPEG):(this.commandService.dispatch(vi.a.exportAsJpeg),localStorage.setItem("upgradpopeskipcount",(n+1).toString()))}else this.showExportUpgradeDialog(vi.a.exportAsJpeg,pe.p.DIAGRAM_EXPORT_AS_JPEG);break;case"svg":this.planPermManager.check([pe.p.DIAGRAM_EXPORT_AS_SVG])?this.isUserPaused?this.showUserPauseWarningDialogBox():this.commandService.dispatch(vi.a.exportAsSvg):this.modalController.show(fe.t,{inputs:{dialogData:{id:pe.p.DIAGRAM_EXPORT_AS_SVG,iframeType:fe.s.Export,buttons:[{type:"action",clickHandler:function(){},visibility:"disabled"}]}}});break;case"csv":this.commandService.dispatch(vi.a.exportAsCsv);break;case"xmi":this.commandService.dispatch(vi.a.exportAsXmi);break;case"java":this.commandService.dispatch(vi.a.exportAsCode,{type:"java"});break;case"mysql":this.commandService.dispatch(vi.a.exportAsCode,{type:"mysql"});break;case"pdf":this.planPermManager.check([pe.p.DIAGRAM_EXPORT_AS_PDF])?this.isUserPaused?this.showUserPauseWarningDialogBox():(this.modalController.show(C.cb,{inputs:{message:this.translate.instant("LOADING_WINDOWS.PDF_EXPORT"),icon:"vendor-logos/pdf.svg",class:"pdf-loading-window"}}),this.subs.push(this.commandService.dispatch(vi.a.exportAsPdf).pipe(Object(_.a)({complete:function(){return t.modalController.hide()}})).subscribe())):this.modalController.show(fe.t,{inputs:{dialogData:{id:pe.p.DIAGRAM_EXPORT_AS_PDF,iframeType:fe.s.Export,buttons:[{type:"action",clickHandler:function(){},visibility:"disabled"}]}}})}},e.prototype.showAuthDialog=function(){var e=this,t=this.state.get("CurrentUser");this.userLocator.getUserData().pipe(Object(Qt.a)(1),Object(E.a)((function(t){var n=t.email.includes(t.id)?{}:{email:t.email};return e.authService.showSignUp(n)}))).subscribe({complete:function(){e.handleDemoUserSignIn(e.state.get("CurrentUser")!==t)},error:function(){}})},e.prototype.prepareAllPossibleDocumentDropdownItems=function(){this.documentItems=[{id:"move-diagram",label:"HEADER_MENU.MOVE_DIAGRAM",isAvailableOffline:!1,modeAvailability:"edit",isAvailableInEmebedd:!1,isEnabled:!0,isRoleBased:!0,role:0},{id:"duplicate-diagram",label:"HEADER_MENU.DUPLICATE_DIAGRAM",isAvailableOffline:!1,modeAvailability:"both",isAvailableInEmebedd:!1,isEnabled:!0,isRoleBased:!0,role:5},{id:"archive-diagram",label:"HEADER_MENU.ARCHIVE_DIAGRAM",isAvailableOffline:!0,modeAvailability:"hidden",isAvailableInEmebedd:!0,isEnabled:!0,isRoleBased:!0,role:0},{id:"delete-diagram",label:"HEADER_MENU.DELETE_DIAGRAM",isAvailableOffline:!1,modeAvailability:"edit",isAvailableInEmebedd:!1,isEnabled:!0,isRoleBased:!0,role:0},{isSeparator:!0,modeAvailability:"edit",isAvailableInEmebedd:!1},{id:"diagram-view-mode",label:"HEADER_MENU.DIAGRAM_VIEW_MODE",isAvailableOffline:!0,modeAvailability:"edit",isAvailableInEmebedd:!1,isEnabled:!0},{id:"diagram-edit-mode",label:"HEADER_MENU.DIAGRAM_EDIT_MODE",isAvailableOffline:!0,modeAvailability:"view",isAvailableInEmebedd:!1,isEnabled:!0},{id:"diagram-offline",label:"HEADER_MENU.OFFLINE",isAvailableOffline:!1,modeAvailability:"hidden",isAvailableInEmebedd:!0,isEnabled:!0},{isSeparator:!0,modeAvailability:"edit",isAvailableInEmebedd:!1},{id:"workspace-prefs",label:"HEADER_MENU.PREFERENCES",isAvailableOffline:!0,modeAvailability:"both",isAvailableInEmebedd:!0,isEnabled:!0}]},e.prototype.openCommentPanel=function(){"diagramcomments"===this.state.get("RightSidebarPanel")?this.state.set("OpenRightSidebar",w.r.None):this.state.set("OpenRightSidebar","diagramcomments")},e.prototype.openSelectedItem=function(e){switch(e){case"workspace-prefs":this.state.set("OpenRightSidebar","diagraminfo");break;case"move-diagram":this.moveDiagram();break;case"diagram-view-mode":this.goToView();break;case"diagram-edit-mode":this.goToEdit();break;case"duplicate-diagram":this.duplicateDiagram();break;case"delete-diagram":this.showDeleteConfimationDialog()}},e.prototype.openShareWindow=function(){var e=this;this.state.get("CurrentUser")&&(this.isFreeUser.value?this.showUpgradeDialog("ShareUpgradeDialog",fe.s.Share,(function(){return e.modalController.show(To)}),!0):this.modalController.show(To,{inputs:{authDialog:function(){return e.showAuthDialog()}}}))},e.prototype.openUpgradePage=function(){this.isFreeUserSuspended?this.modalController.show(fe.g):window.open(C.m.get("PLAN_PAGE_URL"),"_blank")},e.prototype.openSaveDialog=function(){var e=this;this.isSaveInProgress.next(!0);var t=this.commandService.dispatch(qa.a.saveDocument),n=Object(Wa.a)(this.saveDialogDelay);Object(cn.b)(t,n).subscribe({error:function(t){C.db.error(t),e.isSaveInProgress.next(!1)},complete:function(){e.isSaveInProgress.next(!1)}})},e.prototype.expandAll=function(){this.headerExpanded.next(!0);var e=this.expansionAnimation(!0).start().subscribe();this.subs.push(e)},e.prototype.collapseAll=function(){var e=this;if(!this.tooltipCollapseAllOverride){var t=this.expansionAnimation(!1).start().pipe(Object(_.a)({complete:function(){e.headerExpanded.next(!1)}})).subscribe();this.subs.push(t)}},e.prototype.renameDiagram=function(e){C.Kb.track("header.left.diagramName.change"),this.commandService.dispatch(it.a.renameDiagram,this.state.get("CurrentDiagram"),{name:e})},e.prototype.actionConference=function(){if(this.conference.currentConference.value&&["joined","connecting","error"].indexOf(this.conference.currentConference.value.status)>-1)this.conference.stopConference();else if(!this.conference.currentConference.value||"full"!==this.conference.currentConference.value.status){if(!this.planPermManager.check([pe.p.CREATELY_VIDEO_CONFERENCE]))throw new fe.j("Joining video conference permission is denied",Za.a[pe.p.CREATELY_VIDEO_CONFERENCE]);this.conference.startConference()}},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.selectDiagramName=function(e){if(!this.diagramNameClicked){window.getSelection().removeAllRanges();var t=document.createRange();t.selectNodeContents(e.target),window.getSelection().addRange(t),e.target.focus()}this.diagramNameClicked=!this.diagramNameClicked},e.prototype.showLeftSidebar=function(){this.state.set("LeftSidebarVisibility",!this.state.get("LeftSidebarVisibility"))},e.prototype.goToEdit=function(){var e=this;this.state.set("HistoryPreviewMode",!1),this.subs.push(this.userLocator.isUserPaused().pipe(Object(Qt.a)(1),Object(_.a)((function(t){t&&e.showUserPauseWarningDialogBox()}))).subscribe()),this.router.navigate(["../",this.state.get("CurrentDiagram"),"edit"])},e.prototype.goToView=function(){this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])},e.prototype.expansionAnimation=function(e){var t={opacity:0,maxWidth:0,transform:"translateX(-"+this.maxWidth+"px)"},n={opacity:1,maxWidth:this.maxWidth+"px",transform:"translateX(0px)"},r=new C.l({from:e?t:n,to:e?n:t,transitionProperty:"opacity, max-width, transform",easing:"ease-in-out",duration:200});return r.element=this.header.nativeElement,r},e.prototype.handleDemoUserSignIn=function(e){window.gravity.client.getCurrentUserPlan().startsWith("free")?(this.modalController.show(fe.i,{inputs:{page:fe.h.Plans}}),e&&this.commandService.dispatch(vi.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe()):e&&this.commandService.dispatch(vi.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe()},e.prototype.checkIsUserSuspended=function(){var e=this;return this.userLocator.getUserData().pipe(Object(je.a)((function(e){return!!e&&e.suspended&&e.usageExceeded})),Object(_.a)((function(){return e.isFreeUserSuspended=!0}))).subscribe()},e.prototype.reload=function(){window.location.reload()},e.prototype.getTeamName=function(){return this.userLocator.getUserData().pipe(Object(je.a)((function(e){return!!e})),Object(Qt.a)(1),Object(Te.a)((function(e){return e.team?e.team.organizationName:null})))},e.prototype.updatePrivacy=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(E.a)((function(t){return e.ll.forDiagram(t,!1).getDiagramModel()})),Object(je.a)((function(e){return!!e})),Object(_.a)({next:function(t){if(t&&e.privacy!==t.privacy){e.privacy=t.privacy;var n=e.getPrivacyInfo(e.privacy.level),r=e.getPrivacyDescription(n.description,e.privacy.role);e.shareButtonIcon.next(n.icon),e.tooltipHeading.next(n.heading),e.tooltipDescription.next(r)}}}))},e.prototype.getPrivacyInfo=function(e){switch(e){case fe.n.SPECIFIC:return{icon:"user",heading:this.translate.instant("SHARE.SPECIFIC_USERS"),description:{edit:this.translate.instant("SHARE.SPECIFIC_USERS_DESC"),view:this.translate.instant("SHARE.SPECIFIC_USERS_DESC")}};case fe.n.ANYONE_IN_TEAM_WITH_LINK:return{icon:"company-link",heading:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName+" "+this.translate.instant("SHARE.ANYONE_AT_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")}};case fe.n.ANYONE_IN_TEAM:return{icon:"company",heading:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName,description:{edit:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_AT")+" "+this.teamName+" "+this.translate.instant("SHARE.ANYONE_AT_DESC_VIEW")}};case fe.n.ANYONE_WITH_LINK:return{icon:"user-link",heading:this.translate.instant("SHARE.ANYONE_LINK"),description:{edit:this.translate.instant("SHARE.ANYONE_LINK_DESC_EDIT"),view:this.translate.instant("SHARE.ANYONE_LINK_DESC_VIEW")}};case fe.n.PUBLIC:return{icon:"globe",heading:this.translate.instant("SHARE.PUBLIC"),description:{edit:this.translate.instant("SHARE.PUBLIC_DESC_VIEW"),view:this.translate.instant("SHARE.PUBLIC_DESC_VIEW")}}}},e.prototype.getPrivacyDescription=function(e,t){switch(t){case he.g.EDITOR:return e.edit;case he.g.REVIEWER:return e.view}},e.prototype.moveDiagram=function(){var e=this;this.diagram.pipe(Object(Qt.a)(1),Object(_.a)((function(t){e.modalController.show(he.r,{inputs:{diagramIds:[t.id],name:t.name,sourceProjectId:t.project}})}))).subscribe()},e.prototype.showDiagramNameTooltip=function(){var e=this;return Object(Oe.a)({}).pipe(Object($t.a)(this.showToolTipDelay),Object(je.a)((function(t){return!!e.diagramNameToolTip})),Object(_.a)((function(){return e.diagramNameToolTip.show()})),Object($t.a)(this.hideToolTipDelay),Object(je.a)((function(t){return!!e.diagramNameToolTip})),Object(_.a)((function(){return e.diagramNameToolTip.hide()})))},e.prototype.hideDiagramNameTooltip=function(){this.diagramNameToolTip&&this.diagramNameToolTip.hide()},e.prototype.showDeleteConfimationDialog=function(){var e=this;this.diagram.pipe(Object(Qt.a)(1),Object(_.a)((function(t){var n={id:"header-delete-diagram-confirmation",heading:"DIALOG_BOX.DELETE_DIAGRAM.HEADING",description:"DIALOG_BOX.DELETE_DIAGRAM.DESCRIPTION",descriptionParams:{diagramName:t.name},type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.DELETE_DIAGRAM",clickHandler:function(){e.documentManage.deleteDiagram(t.id).pipe(Object(fi.a)(),Object(_.a)((function(){return e.eDataSyncSvc.syncDiagramToEData(t,!0)}))).subscribe()}},{type:"cancel",text:"BUTTONS.CANCEL",clickHandler:function(){}}]};e.dialogBoxController.showDialog(n)}))).subscribe()},e.prototype.showExportUpgradeDialog=function(e,t){var n=this,r={id:t,iframeType:fe.s.Export,buttons:[{type:"action",clickHandler:function(){n.commandService.dispatch(e)}}]};this.modalController.show(fe.t,{inputs:{dialogData:r}})},e.prototype.duplicateDiagram=function(){var e=this;this.isUserSignedIn?this.diagram.pipe(Object(Qt.a)(1),Object(_.a)((function(t){var n=e.random.diagramId();e.logger.debug("Creating diagram from template. Diagram id : "+n+" Template id "+t.id),e.dispatchCreateCommand({id:n,project:t.project,templateId:t.id,type:"duplicate"})}))).subscribe():this.showUpgradeDialog(pe.p.DIAGRAM_DUPLICATE,fe.s.CreateWorkspace)},e.prototype.dispatchCreateCommand=function(e){var t,n=this;if(this.planPermManager.check([pe.p.DIAGRAM_CREATE]))t=qa.a.createDiagram;else if(this.planPermManager.check([pe.p.DIAGRAM_CREATE_PRIVATE]))t=qa.a.createDiagramPrivate;else if(this.planPermManager.check([pe.p.DIAGRAM_CREATE_TEAM]))t=qa.a.createDiagramTeam;else{if(!this.planPermManager.check([pe.p.DIAGRAM_CREATE_PUBLIC]))return void this.showUpgradeDialog(pe.p.DIAGRAM_CREATE_PUBLIC,fe.s.CreateWorkspace);t=qa.a.createDiagramPublic}var r=e.project;this.logger.debug("Creating diagram with id : "+e.id),this.commandService.dispatch(t,r,e).subscribe({error:function(e){n.handleDiagramPermissionError(e)},complete:function(){n.gotoEditor(e.id)}})},e.prototype.handleDiagramPermissionError=function(e){1615===e.code&&this.showUpgradeDialog(pe.p.DIAGRAM_CREATE,fe.s.CreateWorkspace),1611===e.code&&this.showUpgradeDialog(pe.p.DIAGRAM_CREATE_PUBLIC,fe.s.CreateWorkspace),1612===e.code&&this.showUpgradeDialog(pe.p.DIAGRAM_CREATE_PRIVATE,fe.s.CreateWorkspace),1623===e.code&&this.showUpgradeDialog(pe.p.DIAGRAM_CREATE_TEAM,fe.s.CreateWorkspace)},e.prototype.showUpgradeDialog=function(e,t,n,r){void 0===n&&(n=function(){}),void 0===r&&(r=!1);var i={id:e,iframeType:t,buttons:[{type:"action",clickHandler:n,visibility:r?"enable":"disabled"}]};this.modalController.show(fe.t,{inputs:{dialogData:i}})},e.prototype.gotoEditor=function(e){var t=this,n={inputs:{heading:this.translate.instant("NOTIFICATIONS.DIAGRAM_DUPLICATE.SUCCESS.HEADING"),description:this.translate.instant("NOTIFICATIONS.DIAGRAM_DUPLICATE.SUCCESS.BODY"),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("DIAGRAM_DUPLICATE_SUCCESS",C.i,C.jb.Success,n),this.router.navigate(["../",e,"edit"]),this.state.changes("DiagramLoaded").pipe(Object(je.a)((function(t){return t===e})),Object(Qt.a)(1),Object(_.a)((function(){t.eDataSyncSvc.syncDiagramToEData(e)}))).subscribe()},e.prototype.listenToInterfaceAndPermissionChanges=function(){var e=this;return this.state.changes("InterfaceControlState").pipe(Object(_.a)((function(t){var n=e.documentItems.filter((function(n){return!(e.state.get("ApplicationIsEmbedded")&&!n.isAvailableInEmebedd)&&(n.modeAvailability===t||"both"===n.modeAvailability)}));e.documentDropdownItems.next(n)})))},e.prototype.showUserPauseWarningDialogBox=function(){var e=this,t={id:"account-paused-renew",heading:"DIALOG_BOX.ACCOUNT_PAUSED.HEADING",description:"DIALOG_BOX.ACCOUNT_PAUSED.DESCRIPTION",type:"warning",icon:"warning",buttons:[{type:"ok",text:"BUTTONS.RENEW",clickHandler:function(){return e.showTeamPortal()}}]};this.modalController.show(fe.q,{inputs:{dialogData:t}})},e.prototype.showTeamPortal=function(){this.modalController.show(fe.o)},e.prototype.prepareConferenceCallAnimations=function(){this.conferenceOnGoingCallConfig={autoplay:!0,loop:!0,path:"./assets/anim/conference/call_ongoing.json"},this.conferenceInComingCallConfig={autoplay:!0,loop:10,path:"./assets/anim/conference/call_incoming.json"}},e.prototype.listenToPermissionChange=function(){var e=this;return this.diagram.pipe(Object(je.a)((function(e){return!!e})),Object(E.a)((function(t){return e.collabLocator.getCollabsSortedIgnoringOnline(t.id).pipe(Object(E.a)((function(t){var n=t.find((function(t){return t.id===e.state.get("CurrentUser")}));return e.getPrivacyLevel().pipe(Object(Te.a)((function(t){if(t&&t.level>=3||void 0!==n&&n.roleSortOrderWithoutOnline<he.G.UNREG_EDITOR){var r=!!n&&n.isRegistered&&[he.g.OWNER,he.g.EDITOR].includes(n.role);e.roleObs.next(n.role),e.userHasEditPermission.next(r)}return[]})))})))})))},e.prototype.getPrivacyLevel=function(){return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(Qt.a)(1),Object(Te.a)((function(e){return e.privacy})))},e.prototype.tooltipTourAutomation=function(){var e=this;return this.state.changes("TooltipAutomateState").pipe(Object(_.a)((function(t){t===yi.e.expandHeader?(e.tooltipCollapseAllOverride=!0,e.expandAll()):t===yi.e.collapseHeader&&(e.tooltipCollapseAllOverride=!1,e.collapseAll())})))},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(m.a),k.fc(C.B),k.fc(Re.c),k.fc(sn.a),k.fc(y.e),k.fc(nn),k.fc(fe.m),k.fc(Ka.a),k.fc(C.gb),k.fc(fe.x),k.fc(m.d),k.fc(C.sb),k.fc(C.db),k.fc(C.kb),k.fc(he.n),k.fc(C.M),k.fc(Kt.a),k.fc(fe.a),k.fc(Ao.a))},e.\u0275cmp=k.Zb({type:e,selectors:[["header-layout"]],viewQuery:function(e,t){var n;(1&e&&(k.jd(ns,!0,w.t),k.jd(rs,!0,w.t),k.jd(is,!0,w.t),k.jd(as,!0,k.r)),2&e)&&(k.Lc(n=k.uc())&&(t.diagramNameToolTip=n.first),k.Lc(n=k.uc())&&(t.callButtonTooltip=n.first),k.Lc(n=k.uc())&&(t.diagramAppStatusToolTip=n.first),k.Lc(n=k.uc())&&(t.header=n.first))},inputs:{showPaymentFailedMessage:"showPaymentFailedMessage"},features:[k.Rb([w.t,w.f])],decls:4,vars:4,consts:[[4,"ngIf"],[1,"header","fx-pointer-events-auto"],["class","header-main white",3,"mouseenter","mouseleave",4,"ngIf"],[1,"header-main","white",3,"mouseenter","mouseleave"],[1,"header-titles-container"],[1,"header-menu-container"],["class","nu2-btn-primary nu-btn-small","data-testid","singup-button","placement","bottom","tooltip","",3,"trackAction","click",4,"ngIf"],["class","header-action-btns-upgrade nu-btn-small nu-btn-icon-text","data-testid","upgrade-button","placement","bottom","tooltip","",3,"trackAction","click",4,"ngIf"],["class","export-drop-down",3,"settings",4,"ngIf"],[1,"header-expandable-section"],["header",""],[4,"ifMode"],[1,"fx-center-vertical"],["tooltip","","placement","bottom",1,"header-document-title-label"],[3,"trackAction","value","readonly","changedText","click","focusout"],["translate","",1,"tooltip-content"],["tooltip","","openOnHover","false","placement","bottom"],["diagramNameToolTip",""],["class","header-view-mode-container fx-center-vertical",4,"ifState"],["class","status-badge",4,"ngIf"],[1,"header-view-mode-container","fx-center-vertical"],["translate","",1,"header-view-mode-label"],[1,"status-badge"],[3,"badgeText","bgColor","textColor","expanded"],[1,"header-collabs-disabled"],[3,"limitCount","showActiveOnly","userHasEditPermission","shouldShowToolTip"],[1,"collab-call"],["class","conference-anim",3,"options",4,"ngIf"],[1,"conference-anim",3,"options"],["data-testid","singup-button","placement","bottom","tooltip","",1,"nu2-btn-primary","nu-btn-small",3,"trackAction","click"],["translate",""],[1,"tooltip-content"],["translate","",1,"nu-text-bold","fx-margin-bottom-5"],["translate","",1,"header-upgrade-desc","nu-text-small"],["data-testid","upgrade-button","placement","bottom","tooltip","",1,"header-action-btns-upgrade","nu-btn-small","nu-btn-icon-text",3,"trackAction","click"],[1,"nu-icon","nu-ic-premium-crown","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-premium-crown"],[1,"export-drop-down",3,"settings"],["dropdownMenu",""],["ddbutton","",1,"nu-btn-small","nu-btn-on-grey",3,"items"],["dditem","",3,"item","disabled",4,"ngFor","ngForOf"],["dditem","",3,"item"],[1,"header-dropdown-item"],["translate","",1,"menu-dropdown-item",3,"click"],["class","nu-btn-small nu-btn-icon-text primary fx-left header-share-button","data-testid","share-button","placement","bottom","tooltip","",3,"disabled","trackAction","click",4,"ifState"],["data-testid","share-button","placement","bottom","tooltip","",1,"nu-btn-small","nu-btn-icon-text","primary","fx-left","header-share-button",3,"disabled","trackAction","click"],[1,"nu-icon","nu-ic-share","share"],[1,"tooltip-header"],[1,"tooltip-body"],["class","header-divider",4,"ifState"],[1,"header-collabs-active"],[3,"limitCount","showActiveOnly","userHasEditPermission"],["class","header-plugins",4,"ngIf"],[1,"header-collabs-offline"],["direction","top","alignment","right",1,"header-dropdown-menu",3,"settings"],["ddbutton","",3,"items"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["dditem","",3,"item",4,"ngFor","ngForOf"],[1,"header-divider"],[1,"header-plugins"],["placement","bottom","tooltip","",1,"nu-btn-small","header-call-btn","fx-center-all",3,"disabled","trackAction","ngClass","click"],["callButtonTooltip",""],["class","nu-icon start-call",4,"ngIf"],["class","spinner-container",4,"ngIf"],[1,"end-call-div"],["class","conference-anim joined-call-icon",3,"options",4,"ngIf"],[1,"end-call-icon"],["class","nu-icon end-call",4,"ngIf"],[1,"nu-icon","start-call"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-start-call"],[1,"spinner-container"],["id","spinner",1,"spinner","small"],[1,"bounce1","grey"],[1,"bounce2","grey"],[1,"bounce3","grey"],[1,"conference-anim","joined-call-icon",3,"options"],[1,"nu-icon","end-call"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-end-call"],["translate","",1,"callbutton-tooltip-beta","nu-beta-tag","fx-margin-bottom-5","fx-margin-top-5"],["class","tooltip-header","translate","",4,"ngIf"],["translate","",1,"call-button-tooltip","tooltip-body"],["translate","",1,"tooltip-header"],[4,"ifState"],[1,"fx-left"],["class","header-action-btns-save nu-btn-small nu-btn-icon-text primary fx-left","placement","bottom","tooltip","",3,"disabled","trackAction","click",4,"ifState"],["placement","bottom","tooltip","",1,"header-action-btns-save","nu-btn-small","nu-btn-icon-text","primary","fx-left",3,"disabled","trackAction","click"],["translate","",4,"ngIf"],["class","header-dropdown-item only-mobile",4,"ngIf"],[1,"header-dropdown-item","only-mobile"],["class","separator-line",4,"ngIf"],["class","header-dropdown-item fx-margin-bottom-5",3,"disabled","click",4,"ngIf"],[1,"header-dropdown-item","fx-margin-bottom-5",3,"click"],["translate","",1,"menu-dropdown-item"],["class","dropdown-item-icon light-nv-blue",4,"ngIf"],[1,"dropdown-item-icon","light-nv-blue"],[1,"separator-line"]],template:function(e,t){1&e&&(k.cd(0,os,1,0,"payment-failed-message",0),k.lc(1,"div",1),k.cd(2,ec,14,12,"div",2),k.yc(3,"async"),k.kc()),2&e&&(k.Cc("ngIf",t.showPaymentFailedMessage),k.Sb(2),k.Cc("ngIf",k.zc(3,2,t.appDisabledState)))},directives:[i.t,jo,No.a,D.a,Ro.a,Qa.a,y.a,ki.a,Lo.a,Xo,Ue,Ko.a,Zo.a,i.s,$o.a,i.q,ts],pipes:[i.b],styles:[".spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   .bounce[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:4px;margin-right:4px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}.spinner[_ngcontent-%COMP%]   .bounce-1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner[_ngcontent-%COMP%]   .bounce-2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}.bounce[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.header[_ngcontent-%COMP%]{display:flex;align-items:center}.header-main[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:10px;border-radius:4px;margin-left:16px;height:50px;box-shadow:0 4px 16px rgba(0,0,0,.05),0 2px 6px rgba(0,0,0,.05),0 1px 2px rgba(0,0,0,.05)}.header-expandable-section[_ngcontent-%COMP%]{display:inline-flex;align-items:center;width:auto;transition:all;z-index:0}.header-hamburger[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:4px;padding-left:2px;padding-top:2px;cursor:pointer;box-shadow:0 4px 16px rgba(0,0,0,.05),0 2px 6px rgba(0,0,0,.05),0 1px 2px rgba(0,0,0,.05)}.fx-center-vertical[_ngcontent-%COMP%]{height:50px}.header-document-title-label[_ngcontent-%COMP%]{width:230px;margin-right:20px}.header-document-title-label[_ngcontent-%COMP%]  .editable-label{margin-left:10px;line-height:20px;font-size:16px;font-family:Montserrat,sans-serif;width:230px;text-overflow:ellipsis}.header-document-title-label[_ngcontent-%COMP%]  .editable-label::selection{background:#dcf2ee}.header-document-title-label[_ngcontent-%COMP%]  .editable-label::-moz-selection{background:#dcf2ee}.header-document-title-label.move-down[_ngcontent-%COMP%]{padding-top:15px}.header-disabled[_ngcontent-%COMP%]{pointer-events:none}.header-menu-container[_ngcontent-%COMP%], .header-titles-container[_ngcontent-%COMP%]{display:flex;background-color:#fff;z-index:1}.header-menu-container[_ngcontent-%COMP%]{align-items:center}@media only screen and (max-width:568px){.header-menu-container[_ngcontent-%COMP%]{display:none}}.header-collabs-offline[_ngcontent-%COMP%]{margin-top:2px}@media only screen and (max-width:568px){.header-collabs-offline[_ngcontent-%COMP%]{display:none}}.header-collabs-disabled[_ngcontent-%COMP%]{margin-top:2px;pointer-events:none}@media only screen and (max-width:568px){.header-collabs-disabled[_ngcontent-%COMP%]{display:none}}.header-collabs-active[_ngcontent-%COMP%]{margin-left:5px;margin-top:2px}@media only screen and (max-width:568px){.header-collabs-active[_ngcontent-%COMP%]{display:none}}.header-title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:2px}.header-bulb[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#04263d}.header-divider[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px}.header-secondary-title[_ngcontent-%COMP%]{padding-left:1px}.header-app-status-indicator[_ngcontent-%COMP%]{height:11px;margin-left:-6px}.header-drive-icon[_ngcontent-%COMP%]{margin-right:5px}.header-call-btn[_ngcontent-%COMP%]{margin-left:10px;border-radius:100%;border:#fff;width:40px;height:40px;padding:0;background-color:transparent}.spinner-container[_ngcontent-%COMP%]{margin-top:-5px}.call-button-tooltip[_ngcontent-%COMP%]{min-width:90px}.status-badge[_ngcontent-%COMP%]{margin-right:10px;margin-left:5px}.collab-call[_ngcontent-%COMP%]{display:flex;align-items:center}.nu-ic-collapse-thick[_ngcontent-%COMP%]{height:12px;width:12px;margin-left:10px;margin-right:10px}.hidden[_ngcontent-%COMP%]{display:none}.nu-ic-floating-menu[_ngcontent-%COMP%]{width:30px;height:30px}.conference-anim[_ngcontent-%COMP%]{margin-left:-15px;margin-right:-15px;width:80px;height:80px;display:inline-block;align-items:center;opacity:1}.start-call[_ngcontent-%COMP%]{height:25px;width:25px}.end-call-div[_ngcontent-%COMP%]{position:relative}.joined-call-icon[_ngcontent-%COMP%]{position:absolute;left:-30px;top:-40px;opacity:1}.end-call-icon[_ngcontent-%COMP%]{position:absolute;top:-30px;left:-30px;opacity:0}.end-call-div[_ngcontent-%COMP%]:hover   .end-call-icon[_ngcontent-%COMP%]{opacity:1}.end-call-div[_ngcontent-%COMP%]:hover   .joined-call-icon[_ngcontent-%COMP%]{opacity:0}.end-call[_ngcontent-%COMP%]{width:45px;height:45px;margin-top:12px;margin-left:10px}.comment-btn[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;background-color:transparent;cursor:pointer}.comment-icon[_ngcontent-%COMP%]{height:35px;width:35px}.header-dropdown-item[_ngcontent-%COMP%]{padding:5px;display:block;width:100%}.header-dropdown-item[_ngcontent-%COMP%]:hover{background-color:#dcf2ee;border-radius:3px}.header-dropdown-item.disabled[_ngcontent-%COMP%]{pointer-events:none;color:#dcdcdc}.header-dropdown-item.only-mobile[_ngcontent-%COMP%]{display:none}@media only screen and (max-width:568px){.header-dropdown-item.only-mobile[_ngcontent-%COMP%]{display:block}}.menu-dropdown-item[_ngcontent-%COMP%]{size:18px;font-weight:600}.menu-dropdown-item[_ngcontent-%COMP%]:hover{color:#000}.header-divider[_ngcontent-%COMP%]{height:25px;border:1px solid #dcdcdc}.separator-line[_ngcontent-%COMP%]{width:auto;border:1px solid rgba(202,204,206,.25);margin-top:5px;margin-bottom:5px}.dropdown-item-icon[_ngcontent-%COMP%], .dropdown-item-icon-export[_ngcontent-%COMP%]{margin-top:2px;height:10px;width:10px;float:right}.dropdown-item-icon-export[_ngcontent-%COMP%]{margin-left:100px}.header-view-mode-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:0 8px;position:static;width:73px;height:14px;left:0;top:0;background:#b0b4b5;border-radius:14px 14px 2px 2px;flex:none;order:0;flex-grow:0;margin:0 8px}.header-view-mode-label[_ngcontent-%COMP%]{font-size:11px;font-style:normal;font-weight:400;line-height:14px;color:#fff}.edit-collapse-icon.inactive[_ngcontent-%COMP%]{color:#caccce}.header-dropdown-menu[_ngcontent-%COMP%]    {position:relative}.header-dropdown-menu[_ngcontent-%COMP%]     .abs-dropdown-items-container{margin-top:16px;border-radius:5px}.header-dropdown-menu[_ngcontent-%COMP%]     .abs-dropdown-inner{left:-70px!important}.export-drop-down[_ngcontent-%COMP%]    {position:relative}.export-drop-down[_ngcontent-%COMP%]     .abs-dropdown-items-container{margin-top:12px;border-radius:5px}.header-export-dropdown[_ngcontent-%COMP%]     .abs-dropdown-inner-wrapper{position:fixed}.header-export-dropdown[_ngcontent-%COMP%]     .abs-dropdown-inner{position:absolute;margin-right:5px;top:-25px!important;left:150px!important;padding-left:25px}.header-export-dropdown[_ngcontent-%COMP%]     .ps-content{min-width:120px;min-height:100px}.header-export-dropdown[_ngcontent-%COMP%]     simple-dropdown-item:last-of-type .header-export-dropdown-item{margin:0}.header-new-comment-indicator[_ngcontent-%COMP%]{width:10px;height:10px;background-color:#f36c67;border-radius:100%;margin-left:-12px;margin-top:-12px}.header-share-button[_ngcontent-%COMP%]{min-width:90px}.nu-ic-download[_ngcontent-%COMP%]{margin-left:10px;width:20px;height:20px}.header-action-btns-upgrade[_ngcontent-%COMP%]{min-width:100px;background-color:rgba(81,192,170,.2);border:1px solid #29947f;color:#195249;font-weight:700}.nu-ic-premium-crown[_ngcontent-%COMP%]{width:16px!important;height:16px!important}"],changeDetection:0}),e}(),nc=n("09KV");function rc(e,t){1&e&&(k.lc(0,"span"),k.ed(1),k.yc(2,"translate"),k.kc()),2&e&&(k.Sb(1),k.gd(" ",k.zc(2,1,"HISTORY_PREVIEW_MESSAGES.HEADER_MSG_LATEST")," "))}function ic(e,t){1&e&&(k.ed(0),k.yc(1,"translate")),2&e&&k.gd(" ",k.zc(1,1,"HISTORY_PREVIEW_MESSAGES.HEADER_MSG_OLDER")," ")}var ac=function(){function e(e){this.state=e,this.latestVersion=this.state.changes("CurrentSnapshot").pipe(Object(Te.a)((function(e){return"__CURRENT__"===e})))}return e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib))},e.\u0275cmp=k.Zb({type:e,selectors:[["history-preview-message"]],decls:10,vars:4,consts:[[1,"history-preview-message-container","primary"],["data-testid","signup-banner",1,"history-preview-message-inner","fx-center-vertical"],[1,"history-preview-message-icon"],[1,"nu-icon","nu-icon-small","white"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning"],[1,"history-preview-message-text"],[4,"ngIf","ngIfElse"],["elseMessage",""]],template:function(e,t){if(1&e&&(k.lc(0,"div",0),k.lc(1,"div",1),k.lc(2,"div",2),k.wc(),k.lc(3,"svg",3),k.gc(4,"use",4),k.kc(),k.kc(),k.vc(),k.lc(5,"div",5),k.cd(6,rc,3,3,"span",6),k.yc(7,"async"),k.cd(8,ic,2,3,"ng-template",null,7,k.dd),k.kc(),k.kc(),k.kc()),2&e){var n=k.Mc(9);k.Sb(6),k.Cc("ngIf",k.zc(7,2,t.latestVersion))("ngIfElse",n)}},directives:[i.t],pipes:[i.b,y.d],styles:[".history-preview-message-container[_ngcontent-%COMP%]{color:#fff;height:30px;top:0;width:100%;z-index:1}.history-preview-message-inner[_ngcontent-%COMP%]{height:100%}.history-preview-message-icon[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px}.history-preview-message-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:4px}"],changeDetection:0}),e}(),oc=n("DL1I");function sc(e,t){1&e&&(k.wc(),k.lc(0,"svg",9),k.gc(1,"use",10),k.kc())}function cc(e,t){if(1&e){var n=k.mc();k.lc(0,"li",6),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc(2).onPenTypeChange(e)})),k.cd(1,sc,2,0,"svg",7),k.wc(),k.lc(2,"svg",8),k.gc(3,"use"),k.kc(),k.kc()}if(2&e){var r=t.$implicit,i=k.xc(2);k.Sb(1),k.Cc("ngIf",null==r?null:r.selected),k.Sb(2),k.Tb("href",i.getIconHref(r),null,"xlink")}}function lc(e,t){if(1&e&&(k.lc(0,"div"),k.lc(1,"ul",4),k.cd(2,cc,4,2,"li",5),k.kc(),k.kc()),2&e){var n=t.ngIf;k.Sb(2),k.Cc("ngForOf",n)}}function uc(e,t){if(1&e){var n=k.mc();k.lc(0,"toolbar-shape-style-dropdown-item",13),k.tc("changed",(function(e){return k.Pc(n),k.xc(2).onColorChange(e)})),k.kc()}if(2&e){var r=t.$implicit;k.Cc("item",r)("isSelected",null==r?null:r.selected)}}function pc(e,t){if(1&e&&(k.lc(0,"div",11),k.lc(1,"ul",4),k.cd(2,uc,1,2,"toolbar-shape-style-dropdown-item",12),k.kc(),k.kc()),2&e){var n=t.ngIf;k.Sb(2),k.Cc("ngForOf",n)}}var hc=function(){function e(e,t){this.state=e,this.cs=t,this.colors=new I.a(null),this.penTypes=new I.a(null),this.prepareDropdown()}return e.prototype.close=function(){this.cs.dispatch(vi.a.changeMouseControlState,{state:yi.b.Normal})},e.prototype.onKeydown=function(e){"Escape"===e.key&&this.close()},e.prototype.onPenTypeChange=function(e){C.Kb.track("toolbar.freehand.lineType.change",{value1Type:"lineType",value1:e.id});var t=this.getPenTypes(),n=t.findIndex((function(t){return t.id===e.id}));t[n].selected=!0;var i=this.state.get("FreeHandLastUsedItem");this.state.set("FreeHandLastUsedItem",{state:i.state,styles:Object(r.a)(Object(r.a)({},i.styles),e.styles)}),this.penTypes.next(t)},e.prototype.onColorChange=function(e){var t=this.getColors(),n=t.findIndex((function(t){return t.id===e}));if(n>-1){var i=t[n];i.selected=!0;var a=this.state.get("FreeHandLastUsedItem");C.Kb.track("toolbar.freehand.color.change",{value1Type:"colorName",value1:e,value2Type:"colorCode",value2:i.fillColor}),this.state.set("FreeHandLastUsedItem",{state:a.state,styles:Object(r.a)(Object(r.a)({},a.styles),{stroke:i.fillColor})})}this.colors.next(t)},e.prototype.getIconHref=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e.itemIcon.value},e.prototype.prepareDropdown=function(){var e=this.state.get("FreeHandLastUsedItem").styles,t=this.getPenTypes();t.forEach((function(t){Object.keys(t.styles).every((function(n){return t.styles[n]===e[n]}))&&(t.selected=!0)}));var n=this.getColors();n.forEach((function(t){t.fillColor===e.stroke&&(t.selected=!0)})),this.colors.next(n),this.penTypes.next(t)},e.prototype.getPenTypes=function(){return[{id:"pencil",itemIcon:{type:"svg",value:"pencil-line"},tooltip:"Pencil",styles:{"stroke-width":2,"stroke-dasharray":"0, 0"}},{id:"pen",itemIcon:{type:"svg",value:"pen-line"},value:"connectors.bundle.js#ConnectorStraight",tooltip:"Pen",styles:{"stroke-width":4,"stroke-dasharray":"0, 0"}},{id:"pencil-dotted",itemIcon:{type:"svg",value:"pencil-dotted"},tooltip:"Pencil Dotted Line",styles:{"stroke-width":2,"stroke-dasharray":"5, 5"}},{id:"pen-dotted",itemIcon:{type:"svg",value:"pen-dotted"},tooltip:"Pen Dotted Line",styles:{"stroke-width":4,"stroke-dasharray":"10, 5"}}]},e.prototype.getColors=function(){return[Object(r.a)({id:"white"},new oc.a(2,"#CACECC",[0,0],1,"#FFFFFF",pe.h.Solid,void 0,1,"#FFFFFF")),Object(r.a)({id:"grey"},new oc.a(2,"#FFFFFF",[0,0],1,"#8F8F8F",pe.h.Solid,void 0,1,"#8F8F8F")),Object(r.a)({id:"matterhorn"},new oc.a(2,"#FFFFFF",[0,0],1,"#4E4C4C",pe.h.Solid,void 0,1,"#4E4C4C")),Object(r.a)({id:"black"},new oc.a(2,"#FFFFFF",[0,0],1,"#000000",pe.h.Solid,void 0,1,"#000000")),Object(r.a)({id:"burnt-crimson"},new oc.a(2,"#FFFFFF",[0,0],1,"#612425",pe.h.Solid,void 0,1,"#612425")),Object(r.a)({id:"sea-buckthorn"},new oc.a(2,"#FFFFFF",[0,0],1,"#EB9052",pe.h.Solid,void 0,1,"#EB9052")),Object(r.a)({id:"matisse"},new oc.a(2,"#FFFFFF",[0,0],1,"#416178",pe.h.Solid,void 0,1,"#416178")),Object(r.a)({id:"killarney"},new oc.a(2,"#FFFFFF",[0,0],1,"#527D50",pe.h.Solid,void 0,1,"#527D50")),Object(r.a)({id:"night-shade"},new oc.a(2,"#FFFFFF",[0,0],1,"#A03349",pe.h.Solid,void 0,1,"#A03349")),Object(r.a)({id:"cream-can"},new oc.a(2,"#FFFFFF",[0,0],1,"#EFBB4D",pe.h.Solid,void 0,1,"#EFBB4D")),Object(r.a)({id:"seagull"},new oc.a(2,"#FFFFFF",[0,0],1,"#6AAFCC",pe.h.Solid,void 0,1,"#6AAFCC")),Object(r.a)({id:"green-smoke"},new oc.a(2,"#FFFFFF",[0,0],1,"#9EAB5D",pe.h.Solid,void 0,1,"#9EAB5D")),Object(r.a)({id:"alizarin"},new oc.a(2,"#FFFFFF",[0,0],1,"#D82837",pe.h.Solid,void 0,1,"#D82837")),Object(r.a)({id:"orchid"},new oc.a(2,"#FFFFFF",[0,0],1,"#AD67C3",pe.h.Solid,void 0,1,"#AD67C3")),Object(r.a)({id:"cornflower-blue"},new oc.a(2,"#FFFFFF",[0,0],1,"#6D88F0",pe.h.Solid,void 0,1,"#6D88F0"))]},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(C.B))},e.\u0275cmp=k.Zb({type:e,selectors:[["free-hand-toolbar"]],decls:6,vars:6,consts:[[1,"fx-pointer-events-auto","fht-dd-container"],[4,"ngIf"],[1,"separator"],["class","fht-dd-styles-container",4,"ngIf"],[1,"abs-dropdown-items-container"],["tabindex","-1","class","abs-dropdown-item fx-center-all",3,"click",4,"ngFor","ngForOf"],["tabindex","-1",1,"abs-dropdown-item","fx-center-all",3,"click"],["class","nu-icon dropdown-item-select-tick",4,"ngIf"],[1,"nu-icon","light-nv-blue","nu-icon-width"],[1,"nu-icon","dropdown-item-select-tick"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-tick-thin"],[1,"fht-dd-styles-container"],[3,"item","isSelected","changed",4,"ngFor","ngForOf"],[3,"item","isSelected","changed"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.cd(1,lc,3,1,"div",1),k.yc(2,"async"),k.gc(3,"div",2),k.cd(4,pc,3,1,"div",3),k.yc(5,"async"),k.kc()),2&e&&(k.Sb(1),k.Cc("ngIf",k.zc(2,2,t.penTypes)),k.Sb(3),k.Cc("ngIf",k.zc(5,4,t.colors)))},directives:[i.t,i.s,Bn.a],pipes:[i.b],styles:[".fht-dd-container[_ngcontent-%COMP%]{box-shadow:0 2px 2px 0 rgba(0,0,0,.05),0 4px 8px 0 rgba(0,0,0,.05),0 8px 24px 0 rgba(0,0,0,.05);background-color:#fff;border-radius:5px;margin-left:360px;bottom:70px;border-width:1px;position:absolute;z-index:2;display:inline-block}.fht-dd-container[_ngcontent-%COMP%]  .abs-dropdown-container{float:right}.fht-dd-container[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:100;text-align:center}.fht-dd-container[_ngcontent-%COMP%]  .ps-content{padding:0}.fht-dd-container[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:100px}.fht-dd-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.abs-dropdown-item[_ngcontent-%COMP%]{height:30px}.fht-dd-styles-container[_ngcontent-%COMP%]{display:block;width:130px;align-items:normal;flex-wrap:wrap;padding:10px}.fht-dd-styles-container[_ngcontent-%COMP%]  .tss-dd-item-container{display:inline-block}.separator[_ngcontent-%COMP%]{height:1px;width:100%;background:#e7e6e6;margin:3px 0 7px}.nu-icon-width[_ngcontent-%COMP%]{width:80px!important}"],changeDetection:0}),e}();function dc(e,t){if(1&e){var n=k.mc();k.lc(0,"div",2),k.wc(),k.lc(1,"svg",3),k.gc(2,"use",4),k.kc(),k.vc(),k.lc(3,"span",5),k.lc(4,"b",5),k.ed(5,"STORAGE_EXCEEDED.STORAGE_LIMIT "),k.kc(),k.ed(6,"STORAGE_EXCEEDED.UPGRATE_PLAN"),k.kc(),k.lc(7,"button",6),k.tc("click",(function(){return k.Pc(n),k.xc().showPlanPage()})),k.ed(8,"STORAGE_EXCEEDED.CLICK_HERE"),k.kc(),k.kc()}}function fc(e,t){if(1&e){var n=k.mc();k.lc(0,"div",2),k.wc(),k.lc(1,"svg",3),k.gc(2,"use",4),k.kc(),k.vc(),k.lc(3,"span",5),k.lc(4,"b",5),k.ed(5,"STORAGE_EXCEEDED.ACCOUNT_PAUSED "),k.kc(),k.ed(6,"STORAGE_EXCEEDED.UPGRATE"),k.kc(),k.lc(7,"button",6),k.tc("click",(function(){return k.Pc(n),k.xc().showPlanPage()})),k.ed(8,"STORAGE_EXCEEDED.CLICK_HERE"),k.kc(),k.kc()}}var gc=function(){function e(e,t,n){this.state=e,this.translateService=t,this.modalController=n,this.isFreePause=!1}return e.prototype.ngOnInit=function(){this.isFreePause?C.Kb.track("conversion.banner.upgrade.load",{value1:"LP After Paused",value2:"Your free usage limit of Creately has exceeded and your account is paused."}):C.Kb.track("conversion.banner.upgrade.load",{value1:"LP 3-Day Warning",value2:"Your storage limit has exceeded."})},e.prototype.showPlanPage=function(){this.isFreePause?(this.modalController.show(fe.g),C.Kb.track("conversion.banner.upgrade.click",{value1:"LP After Paused"})):(this.modalController.show(fe.i,{inputs:{page:fe.h.Plans}}),C.Kb.track("conversion.banner.upgrade.click",{value1:"LP 3-Day Warning"}))},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(y.e),k.fc(C.gb))},e.\u0275cmp=k.Zb({type:e,selectors:[["storage-exceeded-banner"]],inputs:{isFreePause:"isFreePause"},decls:3,vars:2,consts:[[1,"email-verification-banner-container","fx-pointer-events-auto"],["class","email-verification-banner warning",4,"ngIf"],[1,"email-verification-banner","warning"],[1,"nu-icon","nu-ic-small","fx-margin-right-5"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning"],["translate",""],["translate","",1,"nu-btn-med",3,"click"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.cd(1,dc,9,0,"div",1),k.cd(2,fc,9,0,"div",1),k.kc()),2&e&&(k.Sb(1),k.Cc("ngIf",!t.isFreePause),k.Sb(1),k.Cc("ngIf",t.isFreePause))},directives:[i.t,y.a],styles:[".warning[_ngcontent-%COMP%]{background-color:#fffaef;border:1px solid #e8dcc2}.warning[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#dd9c0b}.email-sent[_ngcontent-%COMP%]{background-color:#f2f7ff;border:1px solid #bfd0f0}.email-sent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#588ff5}.email-verification-banner[_ngcontent-%COMP%]{border-radius:2px;padding:10px;box-shadow:0 2px 2px #c3c3de;display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.email-verification-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;padding:0;margin:0 0 0 8px;font-size:13px}.email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .email-verification-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:transparent}.email-verification-banner-container[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;justify-content:center;z-index:-1}"],changeDetection:0}),e}(),mc=function(){function e(e){this.modalController=e}return e.prototype.showEmailVerificationWindow=function(){window.gravity.api.requestConfirmation(),this.modalController.show(fe.d)},e.\u0275fac=function(t){return new(t||e)(k.fc(C.gb))},e.\u0275cmp=k.Zb({type:e,selectors:[["email-verification-banner"]],decls:8,vars:0,consts:[[1,"email-verification-banner-container","fx-pointer-events-auto"],["data-testid","email-validation-banner",1,"email-verification-banner","warning"],[1,"nu-icon","nu-ic-xsmall","fx-margin-right-5","email-verification-banner-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning"],["translate",""],["translate","",1,"nu-btn-med","email-verification-banner-button",3,"click"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.lc(1,"div",1),k.wc(),k.lc(2,"svg",2),k.gc(3,"use",3),k.kc(),k.vc(),k.lc(4,"span",4),k.ed(5,"EMAIL_VERIFICATION_BANNER.PLEASE_VERIFY_YOUR_EMAIL"),k.kc(),k.lc(6,"button",5),k.tc("click",(function(){return t.showEmailVerificationWindow()})),k.ed(7,"EMAIL_VERIFICATION_BANNER.VERIFY"),k.kc(),k.kc(),k.kc())},directives:[y.a],styles:[".email-verification-banner[_ngcontent-%COMP%]{padding:8px 16px;height:46px;background:hsla(0,0%,100%,.7);box-shadow:0 2px 2px #c3c3de;display:flex;align-items:center;border:1px solid #c8931f;-webkit-backdrop-filter:blur(27.1828px);backdrop-filter:blur(27.1828px);border-radius:4px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.email-verification-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.email-verification-banner-container[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;justify-content:center;z-index:-1}.email-verification-banner-icon[_ngcontent-%COMP%]{width:20px;color:#c8931f}.email-verification-banner-button[_ngcontent-%COMP%]{width:56px;height:30px;background:rgba(255,198,72,.2);border:1px solid #c8931f;border-radius:4px;margin-left:16px;font-size:13px;font-weight:400}"],changeDetection:0}),e}(),vc=function(){function e(e){this.translateService=e}return e.prototype.updateStatusAndReload=function(){localStorage.appReloadedForOffline=!0,this.appReload()},e.prototype.appReload=function(){window.location.reload()},e.\u0275fac=function(t){return new(t||e)(k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["app-offline-reload-banner"]],decls:8,vars:0,consts:[[1,"app-offline-reload-banner-container","fx-pointer-events-auto"],["data-testid","app-offline-reload-banner",1,"app-offline-reload-banner","warning"],[1,"nu-icon","nu-ic-small","fx-margin-right-5","fx-margin-top-12"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-warning-fill"],["translate",""],["translate","",1,"app-offline-reload-banner-button",3,"click"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.lc(1,"div",1),k.wc(),k.lc(2,"svg",2),k.gc(3,"use",3),k.kc(),k.vc(),k.lc(4,"span",4),k.ed(5,"APP_OFFLINE_RELOAD_BANNER.TITLE"),k.kc(),k.lc(6,"button",5),k.tc("click",(function(){return t.updateStatusAndReload()})),k.ed(7,"APP_OFFLINE_RELOAD_BANNER.BUTTON"),k.kc(),k.kc(),k.kc())},directives:[y.a],styles:[".warning[_ngcontent-%COMP%]{background-color:#fcf0d9;border:1px solid #f9d686}.warning[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fab638}.app-offline-reload-banner[_ngcontent-%COMP%]{border-radius:4px;padding:10px;box-shadow:0 2px 2px #c3c3de;display:flex;align-items:center;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:36px}.app-offline-reload-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.app-offline-reload-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;padding:0;margin:0 0 0 60px}.app-offline-reload-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .app-offline-reload-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:transparent}.app-offline-reload-banner-container[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;justify-content:center;z-index:-1}.app-offline-reload-banner-button[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:13px;line-height:16px}.app-offline-reload-banner-button[_ngcontent-%COMP%]:hover{cursor:pointer}"],changeDetection:0}),e}(),bc=n("Wg7D"),yc=n("NvYU"),xc=n("1OUs"),Cc=["diagramAppStatusToolTip"];function wc(e,t){1&e&&(k.lc(0,"div"),k.lc(1,"span",14),k.gc(2,"img",15),k.lc(3,"span",16),k.lc(4,"p",17),k.ed(5,"TOOLTIPS.GOOGLE_DRIVE.HEADER_DRIVE_ICON.HEADING"),k.kc(),k.lc(6,"p",18),k.ed(7,"TOOLTIPS.GOOGLE_DRIVE.HEADER_DRIVE_ICON.DESCRIPTION"),k.kc(),k.kc(),k.kc(),k.kc())}function kc(e,t){1&e&&(k.wc(),k.lc(0,"svg",26),k.gc(1,"use",27),k.kc())}function Sc(e,t){1&e&&(k.wc(),k.lc(0,"svg",28),k.gc(1,"use",29),k.kc())}function Oc(e,t){1&e&&(k.wc(),k.lc(0,"svg",30),k.gc(1,"use",29),k.kc())}function Ec(e,t){if(1&e){var n=k.mc();k.lc(0,"div"),k.lc(1,"span",19,20),k.tc("mouseenter",(function(){return k.Pc(n),k.xc(3).appStatusIconMouseState(!0)}))("mouseleave",(function(){return k.Pc(n),k.xc(3).appStatusIconMouseState(!1)})),k.lc(3,"span"),k.cd(4,kc,2,0,"svg",21),k.yc(5,"async"),k.cd(6,Sc,2,0,"svg",22),k.yc(7,"async"),k.cd(8,Oc,2,0,"svg",23),k.yc(9,"async"),k.kc(),k.lc(10,"span",16),k.lc(11,"p",24),k.ed(12),k.yc(13,"async"),k.kc(),k.lc(14,"p",25),k.ed(15),k.yc(16,"async"),k.kc(),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc(3);k.Sb(4),k.Cc("ngIf","offline"===k.zc(5,5,r.appStatusIndicatorInfo).icon),k.Sb(2),k.Cc("ngIf","online"===k.zc(7,7,r.appStatusIndicatorInfo).icon),k.Sb(2),k.Cc("ngIf","sync"===k.zc(9,9,r.appStatusIndicatorInfo).icon),k.Sb(4),k.fd(k.zc(13,11,r.appStatusIndicatorInfo).tooltip.heading),k.Sb(3),k.fd(k.zc(16,13,r.appStatusIndicatorInfo).tooltip.description)}}function _c(e,t){if(1&e&&(k.jc(0),k.cd(1,Ec,17,15,"div",1),k.yc(2,"async"),k.ic()),2&e){var n=k.xc().ngIf,r=k.xc();k.Sb(1),k.Cc("ngIf",(!n.source||"creately"===n.source.type)&&k.zc(2,1,r.appStatusIndicatorInfo))}}function Ic(e,t){if(1&e&&(k.jc(0),k.cd(1,wc,8,0,"div",1),k.cd(2,_c,3,3,"ng-container",13),k.ic()),2&e){var n=t.ngIf;k.Sb(1),k.Cc("ngIf",n.source&&"gdrive"===n.source.type),k.Sb(1),k.Cc("ifMode","default")}}var Pc=function(){return["MouseControlState","normal","active"]},Tc=function(){return{event:"footer.select.click"}},Ac=function(){return["MouseControlState","pan","active"]},Mc=function(){return{event:"footer.pan.click"}};function Dc(e,t){if(1&e){var n=k.mc();k.lc(0,"div",31),k.lc(1,"div",32),k.lc(2,"button",33),k.tc("click",(function(){return k.Pc(n),k.xc().setMouseControlState("normal")})),k.wc(),k.lc(3,"svg",34),k.gc(4,"use",35),k.kc(),k.vc(),k.lc(5,"span",36),k.ed(6,"TOOLTIPS.NORMAL"),k.kc(),k.kc(),k.kc(),k.lc(7,"div",32),k.lc(8,"button",37),k.tc("click",(function(){return k.Pc(n),k.xc().setMouseControlState("pan")})),k.wc(),k.lc(9,"svg",38),k.gc(10,"use",39),k.kc(),k.vc(),k.lc(11,"div",16),k.lc(12,"span",40),k.ed(13,"TOOLTIPS.PAN"),k.kc(),k.lc(14,"span",41),k.ed(15,"Space + Drag"),k.kc(),k.kc(),k.kc(),k.kc(),k.kc()}2&e&&(k.Sb(2),k.Cc("ifStateClass",k.Gc(4,Pc))("trackAction",k.Gc(5,Tc)),k.Sb(6),k.Cc("ifStateClass",k.Gc(6,Ac))("trackAction",k.Gc(7,Mc)))}function jc(e,t){if(1&e){var n=k.mc();k.lc(0,"div",31),k.lc(1,"div",42),k.lc(2,"button",43),k.tc("click",(function(){return k.Pc(n),k.xc().undoRedo("undo")})),k.yc(3,"async"),k.wc(),k.lc(4,"svg",44),k.gc(5,"use",45),k.kc(),k.vc(),k.lc(6,"div",16),k.lc(7,"span",40),k.ed(8,"TOOLTIPS.UNDO"),k.kc(),k.lc(9,"span",41),k.ed(10),k.kc(),k.kc(),k.kc(),k.kc(),k.lc(11,"div",42),k.lc(12,"button",46),k.tc("click",(function(){return k.Pc(n),k.xc().undoRedo("redo")})),k.yc(13,"async"),k.wc(),k.lc(14,"svg",44),k.gc(15,"use",47),k.kc(),k.vc(),k.lc(16,"div",16),k.lc(17,"span",40),k.ed(18,"TOOLTIPS.REDO"),k.kc(),k.lc(19,"span",41),k.ed(20),k.kc(),k.kc(),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Sb(2),k.Cc("disabled",!k.zc(3,4,r.sessionHistory.canUndo)),k.Sb(8),k.fd(r.featureList.getFeature("undo").shortcutText),k.Sb(2),k.Cc("disabled",!k.zc(13,6,r.sessionHistory.canRedo)),k.Sb(8),k.fd(r.featureList.getFeature("redo").shortcutText)}}var Nc=function(){return{event:"footer.zoom.out.click"}};function Rc(e,t){if(1&e){var n=k.mc();k.lc(0,"button",48),k.tc("click",(function(){return k.Pc(n),k.xc().zoomOut()})),k.wc(),k.lc(1,"svg",49),k.gc(2,"use",50),k.kc(),k.vc(),k.lc(3,"div",16),k.lc(4,"span",40),k.ed(5,"TOOLTIPS.ZOOM_OUT"),k.kc(),k.lc(6,"span",41),k.ed(7),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Cc("trackAction",k.Gc(2,Nc)),k.Sb(7),k.fd(r.featureList.getFeature("zoomOut").shortcutText)}}function Lc(e,t){if(1&e){var n=k.mc();k.lc(0,"simple-dropdown-item",51),k.lc(1,"div",52),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc().updateZoomLevel(e.level)})),k.lc(2,"span",53),k.ed(3),k.kc(),k.lc(4,"span",54),k.ed(5),k.kc(),k.kc(),k.kc()}if(2&e){var r=t.$implicit;k.Cc("item",r),k.Sb(3),k.fd(r.label),k.Sb(2),k.fd(r.desc)}}var Fc=function(){return{event:"footer.zoom.in.click"}};function Bc(e,t){if(1&e){var n=k.mc();k.lc(0,"button",55),k.tc("click",(function(){return k.Pc(n),k.xc().zoomIn()})),k.wc(),k.lc(1,"svg",56),k.gc(2,"use",57),k.kc(),k.vc(),k.lc(3,"div",16),k.lc(4,"span",40),k.ed(5,"TOOLTIPS.ZOOM_IN"),k.kc(),k.lc(6,"span",41),k.ed(7),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc();k.Cc("trackAction",k.Gc(2,Fc)),k.Sb(7),k.fd(r.featureList.getFeature("zoomIn").shortcutText)}}function Vc(e,t){if(1&e){var n=k.mc();k.lc(0,"button",58),k.tc("mouseenter",(function(){return k.Pc(n),k.xc().openShortcutWindow()}))("mouseleave",(function(){return k.Pc(n),k.xc().closeShortcutWindow()})),k.wc(),k.lc(1,"svg",59),k.gc(2,"use",60),k.kc(),k.kc()}}var zc=function(){return["InterfaceControlState","edit"]},Uc=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,multiselectable:!1}},Gc=function(){return["ApplicationIsEmbedded",!1]},Hc=function(){function e(e,t,n,r,i,a){var o=this;this.commandService=e,this.state=t,this.sessionHistory=n,this.featureList=r,this.translate=i,this.ll=a,this.zoomLevels=[{label:"200%",level:2},{label:"100%",desc:this.featureList.getFeature("actualSize").shortcutText,level:1},{label:"50%",level:.5},{label:"10%",level:.1},{label:this.translate.instant("BASE_FEATURE.FIT_SIZE"),desc:this.featureList.getFeature("zoomFit").shortcutText,level:"fit"}],this.hideToolTipDelay=5e3,this.userCameFromOffline=!1,this.subs=[],this.showZoomButtons=new I.a(!1),this.zoomLevelLabel=this.state.changes("DiagramZoomLevel").pipe(Object(Te.a)((function(e){return Math.floor(100*e)}))),this.diagram=this.state.changes("CurrentDiagram").pipe(Object(E.a)((function(e){return o.ll.forDiagram(e,!1).getDiagramModel().pipe(Object(Xa.a)())}))),this.listenToAppStatusState()}return Object.defineProperty(e.prototype,"appStatusIndicatorInfo",{get:function(){var e=this;return this.state.changes(x.c).pipe(Object(Te.a)((function(t){return t===x.c.OFFLINE?(e.userCameFromOffline=!0,{icon:"offline",tooltip:{heading:e.translate.instant("TOOLTIPS.OFFLINE.OFFLINE_HEADER_INDICATOR.HEADING"),description:e.translate.instant("TOOLTIPS.OFFLINE.OFFLINE_HEADER_INDICATOR.DESCRIPTION")}}):t!==x.c.ONLINE||e.userCameFromOffline?e.userCameFromOffline?{icon:"sync",tooltip:{heading:e.translate.instant("TOOLTIPS.SYNC.ONLINE_HEADER_INDICATOR.DESCRIPTION"),description:""}}:void 0:{icon:"online",tooltip:{heading:e.translate.instant("TOOLTIPS.ONLINE.ONLINE_HEADER_INDICATOR.DESCRIPTION"),description:""}}})))},enumerable:!1,configurable:!0}),e.prototype.appStatusIconMouseState=function(e){this.showAppStatusTTOnMouse=e},e.prototype.zoomIn=function(){this.commandService.dispatch(gi.a.zoomDiagram,this.state.get("CurrentDiagram"),{delta:1.25,toCenter:!0})},e.prototype.zoomOut=function(){this.commandService.dispatch(gi.a.zoomDiagram,this.state.get("CurrentDiagram"),{delta:.8,toCenter:!0})},e.prototype.updateZoomLevel=function(e){C.Kb.track("footer.zoom.combo.click",{value1Type:"level",value1:""+e}),"string"==typeof e&&"fit"===e?this.commandService.dispatch(gi.a.zoomAndPanDiagram):this.commandService.dispatch(gi.a.zoomDiagram,this.state.get("CurrentDiagram"),{level:e,toCenter:!0})},e.prototype.openShortcutWindow=function(){this.commandService.dispatch(ur.showShortcutWindow,{show:!0})},e.prototype.closeShortcutWindow=function(){this.commandService.dispatch(ur.showShortcutWindow,{show:!1})},e.prototype.showOrHideZoomButtons=function(e){this.showZoomButtons.next(e)},e.prototype.undoRedo=function(e){"undo"===e?(C.Kb.track("footer.undo.click"),this.commandService.dispatch(it.a.undoAction)):"redo"===e&&(C.Kb.track("footer.redo.click"),this.commandService.dispatch(it.a.redoAction))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.setMouseControlState=function(e){e!==this.state.get("MouseControlState")&&this.commandService.dispatch(vi.a.changeMouseControlState,{state:e})},e.prototype.listenToAppStatusState=function(){var e=this;this.subs.push(this.state.changes("AppStatusIndicatorState").pipe(Object(je.a)((function(e){return e&&e.open})),Object(bc.a)(this.hideToolTipDelay),Object(_.a)((function(){return e.diagramAppStatusToolTip.show()})),Object($t.a)(this.hideToolTipDelay),Object(_.a)((function(){e.showAppStatusTTOnMouse||e.diagramAppStatusToolTip.hide(),e.state.set("AppStatusIndicatorState",{open:!1})}))).subscribe())},e.\u0275fac=function(t){return new(t||e)(k.fc(C.B),k.fc(C.Ib),k.fc(dr.a),k.fc(ir.a),k.fc(y.e),k.fc(sn.a))},e.\u0275cmp=k.Zb({type:e,selectors:[["diagram-toolbar"]],viewQuery:function(e,t){var n;(1&e&&k.jd(Cc,!0,w.t),2&e)&&(k.Lc(n=k.uc())&&(t.diagramAppStatusToolTip=n.first))},decls:20,vars:22,consts:[[1,"dt-container","fx-pointer-events-auto","fx-center-vertical"],[4,"ngIf"],["class","dt-block",4,"ifState"],[1,"dt-block",3,"mouseenter","mouseleave"],["class","dt-zoomout nu-btn-small nu-btn-icon dt-block-btn","data-testid","zoom-out-button","tooltip","",3,"trackAction","click",4,"ngIf"],[1,"dt-dropdown","dt-block-btn"],["data-testid","zoom-percentage","direction","up","alignment","right",3,"settings"],["dropdown",""],["ddbutton","",3,"items"],[1,"dt-dropdown-label"],["dditem","",3,"item",4,"ngFor","ngForOf"],["class","dt-zoomin nu-btn-small nu-btn-icon dt-block-btn","data-testid","zoom-in-button","tooltip","",3,"trackAction","click",4,"ngIf"],["class","dt-btn-shortcut nu-btn-small nu-btn-icon dt-block-btn","data-testid","shortcut-button",3,"mouseenter","mouseleave",4,"ifState"],[4,"ifMode"],["tooltip","","placement","top",1,"tooltip-container"],["src","./assets/images/vendor-logos/gdrive.svg",1,"dt-gdrive-icon"],[1,"tooltip-content"],["translate","",1,"tooltip-header","nu-text-bold"],["translate","",1,"tooltip-body"],["tooltip","","placement","top",1,"tooltip-container","dt-app-status-icon",3,"mouseenter","mouseleave"],["diagramAppStatusToolTip",""],["class","dt-app-status-indicator nu-icon dark-orange",4,"ngIf"],["class","dt-app-status-indicator nu-icon",4,"ngIf"],["class","dt-app-status-indicator nu-icon green",4,"ngIf"],[1,"tooltip-header"],[1,"tooltip-body"],[1,"dt-app-status-indicator","nu-icon","dark-orange"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-status-offline"],[1,"dt-app-status-indicator","nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-status-online"],[1,"dt-app-status-indicator","nu-icon","green"],[1,"dt-block"],[1,"dt-block-item"],["data-testid","select-button","tooltip","",1,"dt-select","nu-btn-small","nu-btn-icon","dt-block-btn",3,"ifStateClass","trackAction","click"],[1,"nu-icon","nu-ic-arrow"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-arrow"],["translate","",1,"tooltip-content"],["data-testid","pan-button","tooltip","",1,"dt-move","nu-btn-small","nu-btn-icon","dt-block-btn",3,"ifStateClass","trackAction","click"],[1,"nu-icon","nu-ic-move"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-move"],["translate","",1,"tooltip-label"],[1,"nu-text-small","tooltip-shortcut"],["tooltip","",1,"dt-block-item"],["data-testid","undo-button",1,"dt-select","nu-btn-small","nu-btn-icon","dt-block-btn",3,"disabled","click"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-undo"],["data-testid","redo-button","tooltip","",1,"dt-move","nu-btn-small","nu-btn-icon","dt-block-btn",3,"disabled","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-redo"],["data-testid","zoom-out-button","tooltip","",1,"dt-zoomout","nu-btn-small","nu-btn-icon","dt-block-btn",3,"trackAction","click"],[1,"nu-icon","nu-ic-substract"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-substract"],["dditem","",3,"item"],[1,"dt-dropdown-item-container",3,"click"],[1,"dt-dropdown-item"],[1,"dt-dropdown-item-sub"],["data-testid","zoom-in-button","tooltip","",1,"dt-zoomin","nu-btn-small","nu-btn-icon","dt-block-btn",3,"trackAction","click"],[1,"nu-icon","nu-ic-plus"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["data-testid","shortcut-button",1,"dt-btn-shortcut","nu-btn-small","nu-btn-icon","dt-block-btn",3,"mouseenter","mouseleave"],[1,"nu-icon","nu-ic-keyboard"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-keyboard"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.gc(1,"notification-count"),k.cd(2,Ic,3,2,"ng-container",1),k.yc(3,"async"),k.cd(4,Dc,16,8,"div",2),k.cd(5,jc,21,8,"div",2),k.lc(6,"div",3),k.tc("mouseenter",(function(){return t.showOrHideZoomButtons(!0)}))("mouseleave",(function(){return t.showOrHideZoomButtons(!1)})),k.cd(7,Rc,8,3,"button",4),k.yc(8,"async"),k.lc(9,"div",5),k.lc(10,"abs-dropdown",6,7),k.lc(12,"simple-dropdown-button",8),k.lc(13,"div",9),k.ed(14),k.yc(15,"async"),k.kc(),k.kc(),k.cd(16,Lc,6,3,"simple-dropdown-item",10),k.kc(),k.kc(),k.cd(17,Bc,8,3,"button",11),k.yc(18,"async"),k.kc(),k.cd(19,Vc,3,0,"button",12),k.kc()),2&e&&(k.Sb(2),k.Cc("ngIf",k.zc(3,10,t.diagram)),k.Sb(2),k.Cc("ifState",k.Gc(18,zc)),k.Sb(1),k.Cc("ifState",k.Gc(19,zc)),k.Sb(2),k.Cc("ngIf",k.zc(8,12,t.showZoomButtons)),k.Sb(3),k.Cc("settings",k.Gc(20,Uc)),k.Sb(2),k.Cc("items",t.zoomLevels),k.Sb(2),k.gd("",k.zc(15,14,t.zoomLevelLabel),"%"),k.Sb(2),k.Cc("ngForOf",t.zoomLevels),k.Sb(1),k.Cc("ngIf",k.zc(18,16,t.showZoomButtons)),k.Sb(2),k.Cc("ifState",k.Gc(21,Gc)))},directives:[yc.a,i.t,ki.a,Ko.a,Zo.a,i.s,No.a,D.a,y.a,xc.a,Qa.a,$o.a],pipes:[i.b],styles:[".dt-container[_ngcontent-%COMP%]{display:flex;position:relative;z-index:2;float:right;width:100%;min-width:300px}.dt-block[_ngcontent-%COMP%]{height:32px;box-shadow:0 4px 16px rgba(0,0,0,.05),0 2px 6px rgba(0,0,0,.05),0 1px 2px rgba(0,0,0,.05);background-color:#fff;border-radius:4px}.dt-block[_ngcontent-%COMP%]:not(:first-child){margin-left:10px}.dt-dropdown[_ngcontent-%COMP%]{display:inline-block}.dt-dropdown[_ngcontent-%COMP%]  .abs-dropdown-container{float:right}.dt-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:187px;text-align:center;border-radius:7px;border:0;box-shadow:0 4px 16px rgba(0,0,0,.05),0 2px 6px rgba(0,0,0,.05),0 1px 2px rgba(0,0,0,.05);margin-right:-70px!important;margin-bottom:10px}.dt-dropdown-item[_ngcontent-%COMP%]{float:left;margin-top:2px;margin-left:3px}.dt-dropdown-item[_ngcontent-%COMP%]:hover{color:#000}.dt-dropdown-item-sub[_ngcontent-%COMP%]{float:right;font-style:normal;font-weight:400;font-size:14px;line-height:20px;color:#899092;margin-right:3px}.dt-dropdown-label[_ngcontent-%COMP%]{height:32px;text-align:center;line-height:32px;padding:0 3px;width:40px;font-weight:700}.dt-block-btn[_ngcontent-%COMP%]{min-width:25px;height:100%;padding:0 3px;border-radius:0}.dt-dropdown-item-container[_ngcontent-%COMP%]{height:30px;padding-top:5px;padding-bottom:5px;font-weight:500;font-size:14px}.dt-dropdown-item-container[_ngcontent-%COMP%]:hover{background-color:#dcf2ee;border-radius:3px}.dt-block-item[_ngcontent-%COMP%]{display:inline-block}.dt-btn-shortcut[_ngcontent-%COMP%]{margin-left:10px}.dt-icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:10px}.nu-ic-plus[_ngcontent-%COMP%], .nu-ic-substract[_ngcontent-%COMP%]{background-color:#f1f4fa}.dt-gdrive-icon[_ngcontent-%COMP%]{height:20px;width:20px;margin-top:5px}.dt-app-status-indicator[_ngcontent-%COMP%]{height:25px;width:25px}notification-count[_ngcontent-%COMP%]{display:flex;padding-right:5px;padding-bottom:5px}.dt-app-status-icon[_ngcontent-%COMP%]{padding-top:15px;margin-top:10px}.nu-ic-arrow[_ngcontent-%COMP%]{width:28px}"],changeDetection:0}),e}(),Yc=["helpwidget"],qc=function(){function e(e,t,n,r,i){this.modalController=e,this.zendesk=t,this.commandService=n,this.planPermManager=r,this.tooltipSvc=i,this.DEFAULT_SEARCH_TEXT="Creately",this.subs=[],this.helpSearchQuery=new I.a(""),this.searchArticleResult=new I.a([]),this.isFreeOrDemoUser=new I.a(!0),this.isDefaultSearchResult=new I.a(!1)}return e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.handleHelpSearch().subscribe()),this.subs.push(this.planPermManager.isFreeOrDemoUser().subscribe((function(t){return e.isFreeOrDemoUser.next(t)})))},e.prototype.helpButtonAction=function(e){this.closeHelpWidget(),"contact"===e?(C.Kb.track("helpwidget.buttons.contact.click"),this.zendesk.open()):"search"===e?(C.Kb.track("helpwidget.buttons.zendeskHelpCenter.click"),this.zendesk.helpCenter()):"tooltip-reset"===e&&this.tooltipSvc.resetTooltipTour()},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.onHelpSearchChange=function(e){this.isDefaultSearchResult.next(!1),this.searchArticleResult.next([]),this.helpWidget.showVideos.next(""===e)},e.prototype.closeHelpWidget=function(){var e=this.helpWidget.closeWidget().subscribe();this.subs.push(e)},e.prototype.handleHelpSearch=function(){var e=this;return this.helpSearchQuery.pipe(Object(je.a)((function(e){return""!==e})),Object(E.a)((function(t){return e.getHelpSearchResult(t,3)})),Object(_.a)((function(t){return t.length>0&&e.searchArticleResult.next(t),t})),Object(je.a)((function(e){return 0===e.length})),Object(E.a)((function(){return e.getHelpSearchResult(e.DEFAULT_SEARCH_TEXT,2)})),Object(_.a)((function(t){e.searchArticleResult.next(t),e.isDefaultSearchResult.next(!0)})))},e.prototype.getHelpSearchResult=function(e,t){return this.commandService.dispatch(vi.a.helpCenterArticles,{searchQuery:e,numberOfArticle:t}).pipe(Object(fi.a)(),Object(Te.a)((function(e){return e&&e.resultData&&e.resultData[0]&&e.resultData[0].results?e.resultData[0].results.map((function(e){return{title:e.title,url:e.html_url}})):[]})))},e.\u0275fac=function(t){return new(t||e)(k.fc(C.gb),k.fc(fe.B),k.fc(C.B),k.fc(fe.m),k.fc(xi.a))},e.\u0275cmp=k.Zb({type:e,selectors:[["help-box"]],viewQuery:function(e,t){var n;(1&e&&k.Wc(Yc,!0),2&e)&&(k.Lc(n=k.uc())&&(t.helpWidget=n.first))},decls:11,vars:12,consts:[["helpwidget",""],["search",""],[3,"submitSearchText","changeHelpSearch"],[3,"searchResult","helpSearchText","isDefaultSearchResult"],["helpbuttons",""],[3,"showSupportButton","buttonClicked"]],template:function(e,t){1&e&&(k.lc(0,"help-widget",null,0),k.lc(2,"div",1),k.lc(3,"help-article-search",2),k.tc("submitSearchText",(function(e){return t.helpSearchQuery.next(e)}))("changeHelpSearch",(function(e){return t.onHelpSearchChange(e)})),k.kc(),k.gc(4,"help-search-result",3),k.yc(5,"async"),k.yc(6,"async"),k.yc(7,"async"),k.kc(),k.lc(8,"div",4),k.lc(9,"help-buttons-card",5),k.tc("buttonClicked",(function(e){return t.helpButtonAction(e)})),k.yc(10,"async"),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(4),k.Cc("searchResult",k.zc(5,4,t.searchArticleResult))("helpSearchText",k.zc(6,6,t.helpSearchQuery))("isDefaultSearchResult",k.zc(7,8,t.isDefaultSearchResult)),k.Sb(5),k.Cc("showSupportButton",!k.zc(10,10,t.isFreeOrDemoUser)))},directives:[G,se,ue,re],pipes:[i.b],encapsulation:2,changeDetection:0}),e}(),Wc=["diagramNameToolTip"];function Xc(e,t){1&e&&k.gc(0,"plan-window")}function Kc(e,t){1&e&&k.gc(0,"history-preview-message")}function Zc(e,t){1&e&&k.gc(0,"global-search")}function $c(e,t){1&e&&k.gc(0,"free-hand-toolbar")}function Qc(e,t){if(1&e&&(k.gc(0,"storage-exceeded-banner",25),k.yc(1,"async")),2&e){var n=k.xc();k.Cc("isFreePause",k.zc(1,1,n.isFreeUserSuspended))}}function Jc(e,t){1&e&&k.gc(0,"email-verification-banner",26)}function el(e,t){1&e&&k.gc(0,"app-offline-reload-banner",26)}function tl(e,t){if(1&e&&(k.jc(0),k.gc(1,"bottom-panel",27),k.ic()),2&e){var n=t.$implicit,r=k.xc();k.Sb(1),k.Xb("fx-hidden",r.selectedBottomPanelId!==n._url),k.Cc("manifest",n)}}function nl(e,t){1&e&&k.gc(0,"diagram-toolbar")}function rl(e,t){1&e&&k.gc(0,"help-box")}var il=function(){return["ApplicationIsEmbedded",!1]};function al(e,t){1&e&&(k.jc(0),k.cd(1,rl,1,0,"help-box",1),k.ic()),2&e&&(k.Sb(1),k.Cc("ifState",k.Gc(1,il)))}var ol=function(){return["ShowPlanWindow",!0]},sl=function(){return["HistoryPreviewMode",!0]},cl=function(e){return{height:e}},ll=function(){function e(e,t,n,r,i,a,o,s,c,l,u,p,h,d,f,g,m){var v=this;this.state=e,this.errorHandler=t,this.userLocator=n,this.mapper=r,this.viewContainerRef=i,this.menuController=a,this.modalController=o,this.notifierController=s,this.translate=c,this.commandService=l,this.errorReporter=u,this.modelSubManager=p,this.authService=h,this.dataStore=d,this.ll=f,this.appNavConfig=g,this.tooltipTourSvc=m,this.demoFlowDelay=3e3,this.notificationMessages=new st.a(this.translate),this.registerCommands(),this.menuController.viewContainerRef=this.viewContainerRef,this.showDemoMessage=new I.a(!1),this.showPaymentFailedMessage=new I.a(!1),this.showFreeUserStorageExceededBanner=new I.a(!1),this.isFreeUserSuspended=new I.a(!1),this.showAppOfflineReloadBanner=new I.a(!1),this.showGlobalSearchWidget=new I.a(!1),this.isLeftSidebarVisible=new I.a(!1),this.subs=[],this.blurBackground=new I.a(!1),this.showEmailVerificationBanner=new I.a(!1),this.subs.push(this.listenToModalBlurChanges()),this.setDiagramStates(),this.manifests=this.state.changes("EnabledPlugins").pipe(Object(Te.a)((function(e){return Object(tn.filter)(e,(function(e){return e.panels&&Object(tn.some)(e.panels,["position","bottom"])}))})),Object(_.a)((function(e){e.length>0&&(v.selectedBottomPanelId=e[0]._url)})),Object(di.a)(1))}return Object.defineProperty(e.prototype,"appDisabledState",{get:function(){return this.state.changes("CurrentDiagram").pipe(Object(E.a)((function(e){return""===e||"start"===e?Object(Oe.a)(!1):Object(Oe.a)(!0)})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFreeHandMode",{get:function(){return this.state.changes("MouseControlState").pipe(Object(Te.a)((function(e){return e===yi.b.Pen||e===yi.b.Highlighter})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logoutUrl",{get:function(){return C.m.get("COGNITO_LOGOUT_URL")+"?client_id="+C.m.get("COGNITO_CLIENT_ID")+"&logout_uri="+C.m.get("COGNITO_LOGOUT_REDIRECT_URL")},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.subs.push(this.handleDemoUser(),this.handleGlobalSearchWidget(),this.showOfflineNotification(),this.listenToShowPlansTag(),this.showCopyPasteNotification(),this.showOnboarding(),this.handleCanceledSubscriptions(),this.handleTeamUserInvitation(),this.handleAppOfflineReloadNotification(),this.handleLeftSidebarVisibility(),this.handleFreeUserStorageExceededBanner(),this.handleEmailVerificationBanner(),this.loadGlobalNotifications(),this.handleTooltipTourInit())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.handleDemoUserSignIn=function(e){var t=this,n=window.gravity.client.getCurrentUserPlan();n.startsWith("free")?e&&this.commandService.dispatch(vi.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe():e?this.commandService.dispatch(vi.a.transferDiagramOwnership,{diagramId:this.state.get("CurrentDiagram")}).subscribe({error:function(e){t.navigateAfterSignIn()},complete:function(){t.navigateAfterSignIn()}}):n.startsWith("demo")?this.subs.push(this.listenToTemplateTags(!0)):this.navigateAfterSignIn()},e.prototype.registerCommands=function(){gi.a.register(this.mapper)},e.prototype.handleDemoUser=function(){var e=this,t=this.state.get("CurrentUser");return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(je.a)((function(e){return!!e})),Object(_.a)((function(t){t.status!==fe.A.DEMO&&e.listenToTemplateTags()})),Object(je.a)((function(e){return e.status===fe.A.DEMO})),Object($t.a)(this.demoFlowDelay),Object(Qt.a)(1),Object(_.a)((function(){return e.showDemoMessage.next(!0)})),Object(_.a)((function(){return e.state.set("IsDemoMode",!0)})),Object(E.a)((function(n){return e.authService.showDemoAuthenticationFlow(n.email).pipe(Object(_.a)({complete:function(){e.handleDemoUserSignIn(e.state.get("CurrentUser")!==t)}}))}))).subscribe()},e.prototype.handleTeamUserInvitation=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(je.a)((function(e){return!!e&&e.status===fe.A.TEAM_CONFIRM})),Object(Qt.a)(1)).subscribe((function(){e.modalController.show(fe.p)}))},e.prototype.handleEmailVerificationBanner=function(){var e=this;return this.userLocator.getUserData().pipe(Object(je.a)((function(e){return!!e}))).subscribe((function(t){t.emailToConfirm&&t.status!==fe.A.DEMO?e.showEmailVerificationBanner.next(!0):e.showEmailVerificationBanner.next(!1)}))},e.prototype.handleFreeUserStorageExceededBanner=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(je.a)((function(e){return!!e&&e.usageExceeded})),Object(Qt.a)(1)).subscribe((function(t){t.suspended&&(e.isFreeUserSuspended.next(!0),e.modalController.show(fe.g)),e.showFreeUserStorageExceededBanner.next(!0)}))},e.prototype.handleGlobalSearchWidget=function(){var e=this;return this.state.changes("GlobalSearch").pipe(Object(je.a)((function(e){return!!e&&!!e.state}))).subscribe((function(t){t.state===bi.c.OPEN?e.showGlobalSearchWidget.next(!0):e.showGlobalSearchWidget.next(!1)}))},e.prototype.handleCanceledSubscriptions=function(){var e=this;return this.dispatchFetchUserSubscriptionData().pipe(Object(je.a)((function(e){return!!e})),Object(_.a)((function(t){t.paymentFailedCount>0&&e.showPaymentFailedMessage.next(!0),t.cancelled&&e.modelSubManager.stopAll(!1).subscribe({complete:function(){e.authService.logOut().subscribe({complete:function(){return e.redirect(e.logoutUrl)}})}})}))).subscribe()},e.prototype.redirect=function(e){window.location.replace(e)},e.prototype.dispatchFetchUserSubscriptionData=function(){return this.commandService.dispatch(vi.a.fetchUserSubscriptionData).pipe(Object(fi.a)(),Object(Te.a)((function(e){var t,n,r;if(e&&e.resultData[0]){var i=JSON.parse(e.resultData[0]);return null===(r=null===(n=null===(t=null==i?void 0:i.data)||void 0===t?void 0:t.user)||void 0===n?void 0:n.organization)||void 0===r?void 0:r.subscription}return null})))},e.prototype.listenToModalBlurChanges=function(){var e=this;return this.state.changes("ModalBlur").subscribe((function(t){t?e.blurBackground.next(!0):e.blurBackground.next(!1)}))},e.prototype.showOnboarding=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(je.a)((function(t){if(!t||t.status===fe.A.DEMO||!t.preferences)return!1;var n=t.preferences.onboarding_progress,r=t.preferences.onboarding_last_updated;return"complete"!==n&&(!(n&&n.startsWith("step")&&r)&&(!e.showInAppPlans||(e.modalController.show(fe.i,{inputs:{page:fe.h.Plans}}),!1)))})),Object(Qt.a)(1),Object(_.a)((function(){return e.modalController.show(fe.i,{inputs:{page:fe.h.Onboarding}})}))).subscribe()},e.prototype.showOfflineNotification=function(){var e=this;return this.state.changes(x.c).pipe(Object(je.a)((function(e){return e===x.c.OFFLINE||e===x.c.ONLINE})),Object(Jt.a)()).subscribe((function(t){if(t===x.c.OFFLINE){var n=e.notificationMessages.getNotificationMessage(st.b.OFFLINE);e.notifierController.show(st.b.OFFLINE,n.component,n.type,n.options,n.collapsed)}else e.notifierController.hide(st.b.OFFLINE)}))},e.prototype.showErrorNotification=function(){var e=this;return this.errorHandler.errorStream.pipe(Object(je.a)((function(){return e.state.get(x.c)===x.c.ONLINE})),Object(_.a)((function(){var t=e.notificationMessages.getNotificationMessage(st.b.ERROR,e.sendErrorReport.bind(e));e.notifierController.hide(st.b.ERROR),e.notifierController.show(st.b.ERROR,t.component,t.type,t.options,t.collapsed)}))).subscribe()},e.prototype.sendErrorReport=function(){this.errorReporter.submitErrorReport("",!1),this.showErrorReportCompleteNotification()},e.prototype.showErrorReportCompleteNotification=function(){var e=this;setTimeout((function(){e.notifierController.hide(st.b.ERROR)}),0);var t=this.notificationMessages.getNotificationMessage(st.b.ERROR_REPORT_COMPLETE);this.notifierController.show(st.b.ERROR_REPORT_COMPLETE,t.component,t.type,t.options,t.collapsed)},e.prototype.showCopyPasteNotification=function(){var e=this;return this.state.changes("CopyPasteNotifier").pipe(Object(je.a)((function(e){return!!e}))).subscribe((function(){var t=e.notificationMessages.getNotificationMessage(st.b.COPY_PASTE);e.notifierController.show(st.b.COPY_PASTE,t.component)}))},e.prototype.navigateAfterSignIn=function(){this.dataStore.remove(fe.v,{id:this.state.get("CurrentUser")}).subscribe()},e.prototype.reload=function(){window.location.reload()},e.prototype.loadGlobalNotifications=function(){var e=this;return this.state.changes("CurrentUser").pipe(Object(je.a)((function(e){return!!e})),Object(Jt.a)(),Object(E.a)((function(){return e.commandService.dispatch(Qn.a.getGlobalNotifications)}))).subscribe()},e.prototype.listenToShowPlansTag=function(){var e=this;return this.appNavConfig.listenToTag("post-sign-up").pipe(Object(_.a)((function(t){e.showInAppPlans="show"===t[0]&&"in-app-plans"===t[1]}))).subscribe()},e.prototype.listenToTemplateTags=function(e){var t=this;return this.appNavConfig.listenToTag("template-modal").pipe(Object(Te.a)((function(n){n!==hi.a&&(e?t.subs.push(t.tooltipTourSvc.initialiseTooltipTour(!0)):t.modalController.show(Ci.a),t.state.set("SelectedFloatingPanel","shapes"))}))).subscribe()},e.prototype.setDiagramStates=function(){this.state.set("ModalWindow",{show:!1})},e.prototype.handleAppOfflineReloadNotification=function(){var e=this;return this.state.changes(x.c).pipe(Object(je.a)((function(e){return e===x.c.OFFLINE||e===x.c.ONLINE}))).subscribe((function(t){localStorage.appReadyForOffline&&!localStorage.appReloadedForOffline&&t===x.c.OFFLINE?e.showAppOfflineReloadBanner.next(!0):e.showAppOfflineReloadBanner.next(!1)}))},e.prototype.handleLeftSidebarVisibility=function(){var e=this;return this.state.changes("LeftSidebarVisibility").pipe(Object(_.a)((function(t){e.isLeftSidebarVisible.next(t)}))).subscribe()},e.prototype.handleTooltipTourInit=function(){var e=this;return this.userLocator.getUserDataAfterUserSubscriptionStarted().pipe(Object(je.a)((function(e){return(null==e?void 0:e.status)!==fe.A.DEMO})),Object(Te.a)((function(){return e.tooltipTourSvc.initialiseTooltipTour()}))).subscribe()},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(k.s),k.fc(fe.x),k.fc(C.z),k.fc(k.hb),k.fc(_t.a),k.fc(C.gb),k.fc(C.kb),k.fc(y.e),k.fc(C.B),k.fc(w.c),k.fc(mi.d),k.fc(fe.a),k.fc(tr.b),k.fc(sn.a),k.fc(C.o),k.fc(xi.a))},e.\u0275cmp=k.Zb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;(1&e&&k.jd(Wc,!0,w.t),2&e)&&(k.Lc(n=k.uc())&&(t.diagramNameToolTip=n.first))},features:[k.Rb([w.t])],decls:48,vars:46,consts:[[3,"demoSignIn"],[4,"ifState"],[1,"container-fluid"],[4,"ngIf"],[1,"diagram-container","row",3,"ngStyle"],[1,"col","fx-no-padding"],["name","weblinks-viewer"],[1,"fx-pointer-events-none","fx-center-vertical","fx-cover","diagram-inner-container"],[1,"base-left-content-area"],[1,"base-right-content-area"],[1,"viewport-area"],[3,"showPaymentFailedMessage"],[1,"base-right-diagram-area"],[1,"diagram-viewport","fx-pointer-events-none","diagram-viewport-banner"],["class","banner-item",3,"isFreePause",4,"ngIf"],["class","banner-item",4,"ngIf"],[1,"diagram-viewport-floating-controls"],[1,"diagram-viewport-floating-controls-left-area"],["name","floating-panels"],[4,"ngFor","ngForOf"],[1,"diagram-viewport-floating-controls-right-area"],["name","floating-media-card"],[1,"diagram-viewport-floating-controls-right-area-2"],[4,"ifMode"],["name","right-pane"],[1,"banner-item",3,"isFreePause"],[1,"banner-item"],[3,"manifest"]],template:function(e,t){1&e&&(k.lc(0,"demo-message",0),k.tc("demoSignIn",(function(e){return t.handleDemoUserSignIn(e)})),k.kc(),k.cd(1,Xc,1,0,"plan-window",1),k.cd(2,Kc,1,0,"history-preview-message",1),k.gc(3,"app-notifier"),k.gc(4,"tooltip-tour-overlay"),k.gc(5,"modal-window-container"),k.lc(6,"div",2),k.yc(7,"async"),k.yc(8,"async"),k.cd(9,Zc,1,0,"global-search",3),k.yc(10,"async"),k.lc(11,"div",4),k.yc(12,"async"),k.lc(13,"div",5),k.lc(14,"div"),k.gc(15,"router-outlet",6),k.kc(),k.gc(16,"diagram-area"),k.kc(),k.lc(17,"div",7),k.lc(18,"div",8),k.yc(19,"async"),k.gc(20,"router-outlet"),k.kc(),k.lc(21,"div",9),k.lc(22,"div",10),k.gc(23,"header-layout",11),k.yc(24,"async"),k.gc(25,"shape-properties-action"),k.lc(26,"div",12),k.cd(27,$c,1,0,"free-hand-toolbar",3),k.yc(28,"async"),k.lc(29,"div",13),k.cd(30,Qc,2,3,"storage-exceeded-banner",14),k.yc(31,"async"),k.cd(32,Jc,1,0,"email-verification-banner",15),k.yc(33,"async"),k.cd(34,el,1,0,"app-offline-reload-banner",15),k.yc(35,"async"),k.kc(),k.lc(36,"div",16),k.lc(37,"div",17),k.gc(38,"router-outlet",18),k.cd(39,tl,2,3,"ng-container",19),k.yc(40,"async"),k.kc(),k.lc(41,"div",20),k.gc(42,"router-outlet",21),k.lc(43,"div",22),k.cd(44,nl,1,0,"diagram-toolbar",3),k.yc(45,"async"),k.cd(46,al,2,2,"ng-container",23),k.kc(),k.kc(),k.kc(),k.kc(),k.kc(),k.kc(),k.gc(47,"router-outlet",24),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(1),k.Cc("ifState",k.Gc(42,ol)),k.Sb(1),k.Cc("ifState",k.Gc(43,sl)),k.Sb(4),k.Xb("nu-overlay-blur",k.zc(7,18,t.blurBackground))("demo-user",k.zc(8,20,t.showDemoMessage)),k.Sb(3),k.Cc("ngIf",k.zc(10,22,t.showGlobalSearchWidget)),k.Sb(2),k.Cc("ngStyle",k.Hc(44,cl,k.zc(12,24,t.state.changes("HistoryPreviewMode"))?"calc( 100vh - 30px )":"100vh")),k.Sb(7),k.Xb("fx-hidden",!k.zc(19,26,t.isLeftSidebarVisible)),k.Sb(5),k.Cc("showPaymentFailedMessage",k.zc(24,28,t.showPaymentFailedMessage)),k.Sb(4),k.Cc("ngIf",k.zc(28,30,t.isFreeHandMode)),k.Sb(3),k.Cc("ngIf",k.zc(31,32,t.showFreeUserStorageExceededBanner)),k.Sb(2),k.Cc("ngIf",k.zc(33,34,t.showEmailVerificationBanner)),k.Sb(2),k.Cc("ngIf",k.zc(35,36,t.showAppOfflineReloadBanner)),k.Sb(5),k.Cc("ngForOf",k.zc(40,38,t.manifests)),k.Sb(5),k.Cc("ngIf",k.zc(45,40,t.appDisabledState)),k.Sb(2),k.Cc("ifMode","default"))},directives:[wi.a,ki.a,Si.a,ra,ia.a,i.t,i.w,m.i,Ya,tc,bn,i.s,No.a,nc.a,ac,bi.a,hc,gc,mc,vc,on,Hc,qc],pipes:[i.b],styles:[".demo-user[_ngcontent-%COMP%]   .base-left-content-area[_ngcontent-%COMP%], .demo-user[_ngcontent-%COMP%]   .base-right-content-area[_ngcontent-%COMP%]{padding-top:30px}.demo-user[_ngcontent-%COMP%]   .diagram-viewport-floating-controls[_ngcontent-%COMP%]{bottom:40px;margin-bottom:-40px}@supports (background:-webkit-canvas(squares)){.demo-user[_ngcontent-%COMP%]  .floating-panel-container{bottom:0}.demo-user[_ngcontent-%COMP%]   .diagram-viewport-floating-controls[_ngcontent-%COMP%]{align-items:flex-end}}.diagram-container[_ngcontent-%COMP%]{position:relative}.free-hand-view[_ngcontent-%COMP%]{position:absolute}.diagram-viewport[_ngcontent-%COMP%]{flex:1;height:100%;position:relative}.diagram-viewport-banner[_ngcontent-%COMP%]{margin-top:64px;display:flex;flex-direction:column;justify-content:start;align-items:center}.diagram-viewport-banner[_ngcontent-%COMP%] > .banner-item[_ngcontent-%COMP%]{margin-top:8px}.base-left-content-area[_ngcontent-%COMP%]{height:100%}.base-right-content-area[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;position:relative}.base-right-diagram-area[_ngcontent-%COMP%]{display:flex;flex:1;position:relative}.base-disabled-overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.4);z-index:3;width:calc(100% - 265px);right:0}header-layout[_ngcontent-%COMP%]{margin-top:16px;margin-left:0;position:absolute}bottom-panel[_ngcontent-%COMP%]{width:100%;overflow:hidden}.diagram-viewport-floating-controls[_ngcontent-%COMP%]{display:flex;align-items:flex-end;-webkit-align-items:flex-end;width:calc(100%);padding:0 15px 15px;position:absolute;height:100%}.diagram-viewport-floating-controls-left-area[_ngcontent-%COMP%]{display:flex;flex-grow:1;align-items:right}.diagram-viewport-floating-controls-right-area[_ngcontent-%COMP%]{display:flex;flex-direction:column}.diagram-viewport-floating-controls-right-area-2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.viewport-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.container-fluid[_ngcontent-%COMP%]{transform:translateZ(0)}"],changeDetection:0}),e}(),ul={cursors:{normal:'<svg xmlns="http://www.w3.org/2000/svg" width="8.85" height="16.12" ><polygon points="8.85 9.02 0 0 0 12.63 2.74 10.25 5.15 16.12 7.62 15.11 5.22 9.24 8.85 9.02"/></svg>',pan:'<svg xmlns="http://www.w3.org/2000/svg" data-ox="7.99" data-oy="8" width="15.99" height="16" ><title>cursors-tails</title><path d="M10.77,12.87l-2.55,3a.33.33,0,0,1-.45,0l-2.55-3c-.1-.12,0-.27.22-.27H7V10.74a1,1,0,0,1,2,0V12.6h1.55C10.75,12.6,10.87,12.75,10.77,12.87Z" style="fill:rgb(21,20,21)"/><path d="M10.55,3.39H9V5.54a1,1,0,0,1-2,0V3.39H5.44c-.2,0-.32-.14-.22-.26l2.55-3a.33.33,0,0,1,.45,0l2.55,3C10.87,3.25,10.75,3.39,10.55,3.39Z" style="fill:rgb(21,20,21)"/><path d="M15.91,8.22l-3,2.55c-.12.1-.27,0-.27-.22V9h-2a1,1,0,0,1,0-2h2V5.45c0-.2.15-.33.27-.23l3,2.55A.35.35,0,0,1,15.91,8.22Z" style="fill:rgb(21,20,21)"/><path d="M6.4,8a1,1,0,0,1-1,1h-2v1.55c0,.2-.15.32-.27.22l-3-2.55a.35.35,0,0,1,0-.45l3-2.55c.12-.1.27,0,.27.23V7h2A1,1,0,0,1,6.4,8Z" style="fill:rgb(21,20,21)"/></svg>',comment:"./assets/cursors/comment.cur",pen:'<svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" data-oy="19"><path d="M18.6431 11.8328C18.4431 11.6328 18.1431 11.6328 17.9431 11.8328L16.2431 13.4328C15.8431 11.5328 14.7431 8.83278 12.2431 6.43278C10.5431 4.83278 8.44307 3.73278 6.14307 3.13278L7.64307 1.63278C7.84307 1.43278 7.84307 1.13278 7.64307 0.932775C7.44307 0.732775 7.14307 0.732775 6.94307 0.832775L4.64307 3.13278L0.643066 17.8328C0.643066 18.0328 0.643066 18.2328 0.743066 18.4328L0.943066 18.7328L1.04307 18.8328C1.14307 18.9328 1.34307 18.9328 1.44307 18.9328C1.54307 18.9328 1.64307 18.9328 1.64307 18.9328L16.1431 14.9328L18.5431 12.5328C18.8431 12.3328 18.8431 12.0328 18.6431 11.8328ZM5.44307 3.93278C7.74307 4.43278 9.94307 5.53278 11.6431 7.13278C14.2431 9.53278 15.1431 12.3328 15.4431 14.0328L6.34307 16.5328C6.04307 15.4328 5.44307 14.7328 4.94307 14.2328C4.24307 13.6328 3.44307 13.3328 2.84307 13.2328L5.44307 3.93278ZM1.64307 17.9328L2.64307 14.2328C3.04307 14.3328 3.74307 14.5328 4.34307 15.0328C4.74307 15.3328 5.14307 15.9328 5.44307 16.8328L1.64307 17.9328Z" style="fill:rgb(4,38,61)"/></svg>',highlighter:'<svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" data-oy="20"><path d="M22.5499 11.7998C22.3499 11.5998 22.0499 11.5998 21.7499 11.7998L19.6499 13.8998L8.9499 2.7998L10.8499 0.999805C11.0499 0.799805 11.0499 0.499805 10.8499 0.199805C10.6499 -0.00019531 10.3499 -0.00019531 10.0499 0.199805L7.5499 2.5998L5.1499 11.3998L1.0499 15.4998C0.649897 15.8998 0.449897 16.4998 0.549897 16.9998C0.649897 17.3998 0.949898 17.7998 1.4499 17.8998L8.0499 19.6998C8.1499 19.6998 8.2499 19.6998 8.4499 19.6998C8.8499 19.6998 9.2499 19.4998 9.5499 19.1998L11.2499 17.4998L19.8499 15.0998L22.4499 12.4998C22.7499 12.2998 22.7499 11.9998 22.5499 11.7998ZM8.3499 3.6998L18.6499 14.3998L11.1499 16.4998L6.2499 11.4998L8.3499 3.6998ZM8.9499 18.4998C8.7499 18.6998 8.5499 18.6998 8.4499 18.6998L1.8499 16.8998C1.7499 16.8998 1.7499 16.7998 1.7499 16.7998C1.7499 16.6998 1.7499 16.4998 1.9499 16.2998L5.7499 12.4998L10.4499 17.1998L8.9499 18.4998Z" style="fill:rgb(4,38,61)/></svg>'},tails:{}},pl=n("Fqp3"),hl=n("Voii"),dl=n("aC2M"),fl=n("xOLM"),gl=function(e){function t(t,n){var r=e.call(this)||this;return r.state=t,r.collabLocator=n,r.OWNER_PLAN_ERROR="OWNER_PLAN_NOT_LOADED",r.currentUserIsOwner=!1,r.ownerHasPermission=!0,r.ownerIsOnline=!0,r.listenToCollabChanges().subscribe(),r}return Object(r.e)(t,e),t.prototype.getCollabsWithPermissions=function(){var e=this;return this.getCollabs().pipe(Object(fl.a)((function(t){return t.pipe(Object(_.a)((function(t){if(t.message!==e.OWNER_PLAN_ERROR)throw t})),Object(Qt.a)(3),Object($t.a)(1e3))})))},t.prototype.check=function(e){return!!this.currentUserIsOwner||("view"===this.state.get("InterfaceControlState")||(!!this.ownerHasPermission||!(!this.ownerIsOnline||this.ownerHasPermission)))},t.prototype.listenToCollabChanges=function(){var e=this;return this.getCollabsWithPermissions().pipe(Object(_.a)((function(t){var n=t.find((function(t){return t.role===he.g.OWNER&&t.id!==e.state.get("CurrentUser")}));if(n){e.currentUserIsOwner=!1;var r=n.plan.permissions[pe.p.COLLABORATE_OFFLINE];e.ownerHasPermission=r.allowed,e.ownerIsOnline=n.online}else e.currentUserIsOwner=!0})))},t.prototype.getCollabs=function(){var e=this;return Object(cn.b)([this.state.changes("CurrentUser"),this.state.changes("CurrentDiagram"),this.state.changes("InterfaceControlState")]).pipe(Object(je.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(E.a)((function(){return e.collabLocator.getCollabs()})),Object(_.a)((function(t){var n=t.find((function(t){return t.role===he.g.OWNER&&t.id!==e.state.get("CurrentUser")}));if(n&&!n.plan)throw new Error(e.OWNER_PLAN_ERROR)})))},t.\u0275fac=function(e){return new(e||t)(k.pc(C.Ib),k.pc(Kt.a))},t.\u0275prov=k.bc({token:t,factory:t.\u0275fac}),t}(fe.f),ml=n("iy5+"),vl=function(e){function t(t,n,r,i,a,o,s,c,l,u,p,h,d,f,g,m,v){var b=e.call(this,t)||this;return b.state=t,b.initController=n,b.logger=r,b.keyBoardController=i,b.featureList=a,b.cursorGen=o,b.modelSubManager=s,b.router=c,b.routeManager=l,b.translate=u,b.userLocator=p,b.collabLocator=h,b.ll=d,b.planPermManager=f,b.modalController=g,b.collaborateOfflinePermHandler=m,b.appNavConfigInterpreter=v,b.isOfflineCollabDialogDisplayed=!1,b}return Object(r.e)(t,e),t.prototype.canDeactivate=function(e,t,n,r){return this.stopWatchingConnectionChanges(),this.stopWatchingCollabChanges(),this.state.set("SidebarControls",ml.b.DISABLED),Object(Oe.a)(!0)},t.prototype.checkUserPauseStatus=function(e){var t=this;return this.userLocator.isUserPaused().pipe(Object(Jt.a)(),Object(Te.a)((function(n){return!n||(!e.url.endsWith("edit")||(t.router.navigate(["../",t.state.get("CurrentDiagram"),"view"]),!1))})))},t.prototype.canActivate=function(e,t){var n=this;this.logger.debug("BaseRouteResolver resolution started"),this.setFocusTargetState(t.url);var r=e.paramMap.get("id"),i=this.getRouteAction(t.url);return this.state.set("LastDiagramAction",{diagramId:r,action:i}),this.runResolverSequence(t).pipe(Object(_.a)({complete:function(){return n.state.set("SidebarControls",ml.b.ENABLED)}}))},t.prototype.resolve=function(e,t){return this.setDiagramStates(),this.registerFeatures(),this.keyBoardController.registerFeatures(),this.cursorGen.addCursors(ul),this.removePreviousRouteFromHistory(t),this.state.set("DiagramLoaded",e.paramMap.get("id")),!0},t.prototype.canActivateForOutcome=function(e){var t=e.outcome,n=t.type,r=t.action;return"plugin"===C.m.get("APP_MODE")?"complete"===n:"complete"===n||!("command"!==n&&"commandEvent"!==n||"Authenticate"!==r||e.outcome.wait)},t.prototype.registerFeatures=function(){this.featureList.register({id:"showShorcutWindow",commandEvent:ur.showShortcutWindow,label:this.translate.instant("BASE_FEATURE.SHORTCUTS"),shortcuts:[{keySequence:[pe.j.F1],action:"keydown"}],data:{show:!0},context:pl.a.All}),this.featureList.register({id:"hideShorcutWindow",commandEvent:ur.showShortcutWindow,label:this.translate.instant("BASE_FEATURE.SHORTCUTS"),shortcuts:[{keySequence:[pe.j.F1],action:"keyup"}],data:{show:!1},context:pl.a.All}),this.featureList.register({id:"zoomIn",commandEvent:gi.a.zoomDiagram,label:this.translate.instant("BASE_FEATURE.ZOOM_IN"),shortcuts:[{keySequence:[pe.j.Meta,pe.j.Plus],action:"keydown",repeatOnKeyPress:100},{keySequence:[pe.j.Meta,pe.j.Add],action:"keydown",repeatOnKeyPress:100},{keySequence:[pe.j.Meta,pe.j.Plus_FF],action:"keydown",repeatOnKeyPress:100}],data:{delta:1.25,toCenter:!0},context:pl.a.Canvas}),this.featureList.register({id:"zoomOut",commandEvent:gi.a.zoomDiagram,label:this.translate.instant("BASE_FEATURE.ZOOM_OUT"),shortcuts:[{keySequence:[pe.j.Meta,pe.j.Minus],action:"keydown",repeatOnKeyPress:100},{keySequence:[pe.j.Meta,pe.j.Subtract],action:"keydown",repeatOnKeyPress:100},{keySequence:[pe.j.Meta,pe.j.Minus_FF],action:"keydown",repeatOnKeyPress:100}],data:{delta:.8,toCenter:!0},context:pl.a.Canvas}),this.featureList.register({id:"zoomFit",commandEvent:gi.a.zoomAndPanDiagram,label:this.translate.instant("BASE_FEATURE.FIT_SIZE"),shortcuts:[{keySequence:[pe.j.Meta,pe.j.One],action:"keydown"}],data:{},context:pl.a.Canvas}),this.featureList.register({id:"actualSize",commandEvent:gi.a.zoomDiagram,label:this.translate.instant("BASE_FEATURE.ACTUAL_SIZE"),shortcuts:[{keySequence:[pe.j.Meta,pe.j.Zero],action:"keydown"}],data:{level:1,toCenter:!0},context:pl.a.Canvas}),this.featureList.register({id:"addComment",commandEvent:vi.a.changeMouseControlState,label:this.translate.instant("BASE_FEATURE.ADD_COMMENT"),shortcuts:[{keySequence:[pe.j.C],action:"keydown"}],data:{},attachKeyEventToData:!0,context:pl.a.CanvasNotSelected}),this.featureList.register({id:"freeHandPen",commandEvent:vi.a.changeMouseControlState,label:this.translate.instant("BASE_FEATURE.FREE_HAND_PEN"),shortcuts:[{keySequence:[pe.j.A],action:"keydown"}],data:{},attachKeyEventToData:!0,context:pl.a.CanvasNotSelected}),this.featureList.register({id:"freeHandHighlighter",commandEvent:vi.a.changeMouseControlState,label:this.translate.instant("BASE_FEATURE.FREE_HAND_HIGHLIGHTER"),shortcuts:[{keySequence:[pe.j.H],action:"keydown"}],data:{},attachKeyEventToData:!0,context:pl.a.CanvasNotSelected}),this.featureList.register({id:"documentSearch",commandEvent:vi.a.openGlobalSearch,label:this.translate.instant("COMMANDS.DOCUMENT_SEARCH"),shortcuts:[{keySequence:[pe.j.Meta,pe.j.F]}],data:{scope:bi.b.DOCUMENT},attachKeyEventToData:!0,context:pl.a.Canvas})},t.prototype.watchConnectionChanges=function(){this._connectionChangesSub||(this._connectionChangesSub=this.connectionChanges().subscribe())},t.prototype.stopWatchingConnectionChanges=function(){this._connectionChangesSub&&(this._connectionChangesSub.unsubscribe(),this._connectionChangesSub=null)},t.prototype.connectionChanges=function(){var e=this;return this.state.changes(x.c).pipe(Object(Ei.a)(1),Object(E.a)((function(t){return e.onConnectionChange(t)})))},t.prototype.onConnectionChange=function(e){var t=this;return this.logger.debug("BaseRouteResolver onConnectionChange",e),e===x.c.OFFLINE||e===x.c.SLEEP?this.modelSubManager.stopAll(!1):e===x.c.ONLINE?this.modelSubManager.stop(this.state.get("CurrentDiagram"),!1).pipe(Object(E.a)((function(){return t.runConnectionChangeSequence()}))):hi.a},t.prototype.runConnectionChangeSequence=function(){var e=this;return this.logger.debug("BaseRoute Connection Change sequence started"),this.startSequence().pipe(Object(_.a)({next:function(t){return e.logger.debug("BaseRoute Connection Change sequence status",t)},complete:function(){return e.logger.debug("BaseRoute Connection Change sequence completed.")}}))},t.prototype.watchCollabChanges=function(){this._collabChangesSub||(this._collabChangesSub=this.listenToCollabChanges().subscribe())},t.prototype.stopWatchingCollabChanges=function(){this._collabChangesSub&&(this._collabChangesSub.unsubscribe(),this._collabChangesSub=null)},t.prototype.watchOfflineCollabChanges=function(){var e=this;this._offlineCollabChangesSub||setTimeout((function(){e._offlineCollabChangesSub=e.listenToOfflineCollabChanges().subscribe()}),3e3)},t.prototype.listenToCollabChanges=function(){var e=this;return Object(cn.b)([this.state.changes("CurrentUser"),this.state.changes("CurrentDiagram")]).pipe(Object(je.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(E.a)((function(t){var n=Object(r.h)(t,2),i=n[0];n[1];return e.ll.forCurrentObserver(!1).pipe(Object(E.a)((function(e){return e.getDiagramOnce()})),Object(E.a)((function(t){return e.collabLocator.getCollabs(t.id).pipe(Object(_a.a)()).pipe(Object(_.a)((function(n){var a=Object(r.h)(n,2),o=a[0],s=a[1];e.onCollabChange(i,t,o,s)})))})))})))},t.prototype.listenToOfflineCollabChanges=function(){var e=this;return this.collaborateOfflinePermHandler.getCollabsWithPermissions().pipe(Object(E.a)((function(t){if(!e.planPermManager.check([pe.p.COLLABORATE_OFFLINE])){var n=t.find((function(e){return e.role===he.g.OWNER}));return e.userLocator.getUserInfo(n.id).pipe(Object(_.a)((function(t){var n=Object(r.a)(Object(r.a)({},Za.a[pe.p.COLLABORATE_OFFLINE]),{descriptionParams:{ownerName:t.fullName},buttons:[{type:"ok",text:"BUTTONS.STAY_ON_DOCUMENT",clickHandler:e.redirectHandler.bind(e)}],hideCancelButton:!0,closeClickHandler:e.redirectHandler.bind(e)});e.isOfflineCollabDialogDisplayed||(e.isOfflineCollabDialogDisplayed=!0,e.modalController.show(fe.q,{inputs:{dialogData:n}}))})))}return e.isOfflineCollabDialogDisplayed?(e.isOfflineCollabDialogDisplayed=!1,Object(Oe.a)(e.modalController.hide())):hi.a})))},t.prototype.redirectHandler=function(){this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])},t.prototype.onCollabChange=function(e,t,n,r){if(t.privacy.level===fe.n.SPECIFIC&&r&&r.length>0){var i=n.find((function(t){return t.id===e})),a=r.find((function(t){return t.id===e}));(!a||i&&i.role!==a.role)&&this.routeManager.lastRoute.endsWith("edit")&&this.router.navigate(["../",this.state.get("CurrentDiagram"),"view"])}},t.prototype.setFocusTargetState=function(e){var t,n=e.split("/"),r=n[n.length-1];r.indexOf("?")>-1&&(r=r.substring(0,r.indexOf("?"))),"s"===n[n.length-2]&&r.length>0?t={shapeId:r}:"g"===n[n.length-2]&&r.length>0&&(t={groupId:r}),t&&this.state.set("FocusTarget",t)},t.prototype.removePreviousRouteFromHistory=function(e){var t=this.routeManager.lastRoute;t&&t.startsWith("/create?")&&this.routeManager.removeRouteFromHistory(e.url)},t.prototype.setDiagramStates=function(){this.state.set("Selected",[]),this.state.set("CurrentSidebarTask",""),this.state.set("InnerShapeSelection",{}),this.state.set("SnapData",{}),this.state.set("SnapToGuides",!1),this.state.set("ShowGuides",!1),this.state.set("ShapeSearchResults",{results:[],searchQuery:""}),this.state.set("ShapeSearchQuery",""),this.state.set("CommentThreadData",{}),this.state.set("WebLinkViewer",{open:!1}),this.state.get("FloatingMedia")||this.state.set("FloatingMedia",{open:!1}),this.state.set("ShapeDataViewer",{open:!1}),this.state.set("ShapelinkTarget",{}),this.state.set("ShowNewCommentsIndicator",!1),this.state.set("CopyPasteNotifier",!1),this.state.set("NewCommentsIndicator",!1),this.state.get("RightSidebarPanel")||this.state.set("RightSidebarPanel","none"),this.state.set("SidebarControls",ml.b.ENABLED),this.state.set("GlobalSearch",{}),this.state.set("GlobalSearchText",{}),this.state.set("HistoryPreviewMode",!1),"start"===this.state.get("CurrentDiagram")||"template"===this.state.get("SelectedLeftPanel")?this.state.set("LeftSidebarVisibility",!0):this.state.get("ApplicationIsEmbedded")&&"msteams"===this.state.get("PluginApp")?this.state.set("LeftSidebarVisibility",!1):this.state.set("LeftSidebarVisibility",!0),"start"===this.state.get("CurrentDiagram")&&this.state.set("SelectedLeftPanel","dashboard"),this.state.get("OpenRightSidebar")||this.state.set("OpenRightSidebar",w.r.None),this.state.set("SmartRulesEnabled",!1)},t.prototype.runResolverSequence=function(e){var t=this;return this.startSequence().pipe(Object(Ne.a)(this.router.events.pipe(Object(je.a)((function(e){return e instanceof m.b||e instanceof m.c})))),Object(je.a)((function(e){return t.canActivateForOutcome(e)})),Object(Qt.a)(1),Object(Te.a)((function(e){t.logger.debug("BaseRouteResolver sequence status",e),t.setCurrentDiagram(e.input.resourceId),t.hideLoadingScreen(),t.logger.debug("BaseRouteResolver setting current diagram to "+e.input.resourceId)})),Object(_.a)({complete:function(){t.watchConnectionChanges(),t.watchCollabChanges(),t.watchOfflineCollabChanges(),t.logger.debug("BaseRouteResolver route resolution completed.")}}),Object(E.a)((function(){return t.state.get("CurrentUser")?t.checkUserPauseStatus(e):Object(Oe.a)(!0)})))},t.prototype.startSequence=function(){var e=this.state.get("LastDiagramAction").diagramId,t=this.state.get("LastDiagramAction").action;t=this.appNavConfigInterpreter.receiveQueryParam(t);var n=new C.X(t,e);return this.initController.startSequence("RouteResponsibility",n)},t.\u0275fac=function(e){return new(e||t)(k.pc(C.Ib),k.pc(C.Y),k.pc(C.db),k.pc(pr.a),k.pc(ir.a),k.pc(oa.a),k.pc(mi.d),k.pc(m.d),k.pc(dl.a),k.pc(y.e),k.pc(fe.x),k.pc(Kt.a),k.pc(sn.a),k.pc(fe.m),k.pc(C.gb),k.pc(gl),k.pc(C.o))},t.\u0275prov=k.bc({token:t,factory:t.\u0275fac}),t}(hl.a),bl=n("o9on"),yl=n("CDoB"),xl=n("hh8i"),Cl=n("diDk"),wl=n("Xpu5"),kl=n("S9z9"),Sl=n("0jHB"),Ol=n("P4Xx"),El=n("unyx"),_l=n("LLEj"),Il=n("gZOS"),Pl=n("B5wR"),Tl=function(){function e(e,t,n,r,i,a,o,s,c,l,u,p,h,d,f,g){this.commands=e,this.ll=t,this.stateSvc=n,this.datastore=r,this.datasync=i,this.reporter=a,this.pluginReg=o,this.realtimeState=s,this.defLocator=c,this.random=l,this.ell=u,this.modelSubManager=p,this.loader=h,this.shapeBoundsLocator=d,this.notifierController=f,this.tooltipTourService=g,this.frameCountsWithDuration=[],this.frameCountStartTime=0,this.autoDrowIntervals=[],this.autoShapeMoveIntervals=[]}return e.prototype.initialize=function(){window.Debugger=this,window.Reporter=this.reporter,window.Flags=C.P,window.eDataRegistry=Pl.a.instance},e.prototype.initEData=function(){this.defLocator.getDefinition("creately.edata.uml").subscribe(),this.defLocator.getDefinition("creately.edata.bpm").subscribe()},e.prototype.runEDataSub=function(){var e=this.commands.dispatch(vi.a.startEDataSubscription,{resourceId:this.stateSvc.get("CurrentDiagram")});console.log("--- START EDATASSS ",e)},e.prototype.runEDataProjectSub=function(){var e=this.commands.dispatch(he.w.getProjectEData,this.stateSvc.get("CurrentProject"),null);console.log("--- START EDATASSS ",e)},e.prototype.runCreateEData=function(){var e=this;this.commands.dispatch(qa.a.createEData,this.stateSvc.get("CurrentProject"),{id:this.random.diagramId(),defId:"creately.edata.uml"}).pipe(Object(fi.a)(),Object(E.a)((function(t){if(t&&t.resultData[0]&&t.resultData[0].model){var n=t.resultData[0].model;return e.commands.dispatch(it.a.addEDataModel,{eDataModelId:n.id})}return hi.a}))).subscribe()},e.prototype.loadCustomPlugin=function(e){this.pluginReg.load(e)},e.prototype.logStorageChanges=function(e){void 0===e&&(e=!0),C.P.set("DEBUG_STORAGE_CHANGES",e)},e.prototype.logStateChanges=function(e){void 0===e&&(e=!0),C.P.set("DEBUG_STATE_CHANGES",e)},e.prototype.logAppTracking=function(e){void 0===e&&(e=!0),C.P.set("DEBUG_APP_TRACKING",e)},e.prototype.logCommandProgress=function(e){void 0===e&&(e=!0),C.P.set("DEBUG_COMMAND_PROGRESS",e)},e.prototype.logObserverCounts=function(e){void 0===e&&(e=!0),C.P.set("DEBUG_OBSERVER_COUNTS",e)},e.prototype.logSelectionChanges=function(){this.stateSvc.changes("Selected").subscribe((function(e){return console.log("Debugger: selection:",e)}))},e.prototype.getDiagramId=function(){return this.stateSvc.get("CurrentDiagram")},e.prototype.getSelection=function(){return this.stateSvc.get("Selected")},e.prototype.setSelection=function(e){return this.stateSvc.set("Selected",e)},e.prototype.getGridAreaCanvas=function(){return this.stateSvc.get("GridAreaCanvas")},e.prototype.getDiagramCanvas=function(){return this.stateSvc.get("DiagramCanvas")},e.prototype.getIndicatorCanvas=function(){return this.stateSvc.get("InteractionCanvas")},e.prototype.getDiagramFromDatabase=function(){this.datastore.findOneLatest(ln.a,{id:this.getDiagramId()}).subscribe((function(e){return console.log("Debugger: diagram from database:",e)}))},e.prototype.getDiagramFromLocator=function(e){void 0===e&&(e=!0),this.ll.forCurrent(e).getDiagramOnce().subscribe((function(e){return console.log("Debugger: diagram from locator:",e)}))},e.prototype.getDiagramModelChanges=function(){this.datastore.getModelStore(ln.a).findChanges({modelId:this.getDiagramId()}).pipe(Object(Qt.a)(1)).subscribe((function(e){return console.log("Debugger: changes from database:",e)}))},e.prototype.addDiagramModelChanges=function(e){this.datasync.applyChanges(ln.a,e).subscribe({complete:function(){return console.log("Debugger: changes added successfully")}})},e.prototype.connectPhoton=function(){},e.prototype.disconnectPhoton=function(){},e.prototype.enablePhotonPreviewSyncEmition=function(e){void 0===e&&(e=!0),C.P.set("DEBUG_PHOTON_PREVIEW_SYNC_EMIT",e)},e.prototype.enablePhotonPreviewSyncReceiver=function(e){void 0===e&&(e=!0),C.P.set("DEBUG_PHOTON_PREVIEW_SYNC_RECEIVE",e)},e.prototype.enablePhotonPointerMove=function(e){void 0===e&&(e=!0),C.P.set("DEBUG_PHOTON_POINTER_MOVE",e)},e.prototype.setRealtimePointerPosition=function(e,t){this.realtimeState.set("pointer",JSON.stringify([e,t]))},e.prototype.setRealtimePointerPositionRandomly=function(e,t,n,r,i){var a=this;void 0===e&&(e=200),void 0===t&&(t=5e3),void 0===n&&(n=500),void 0===r&&(r=250),void 0===i&&(i=100);var o=Date.now(),s=function(){var c=(Date.now()-o)%t/t,l=2*Math.PI*c,u=n+i*Math.cos(l),p=r+i*Math.sin(l);a.realtimeState.set("pointer",JSON.stringify([u,p])),setTimeout(s,e)};s()},e.prototype.dispatchCommandEvent=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.commands).dispatch.apply(e,Object(r.j)(t)).subscribe((function(e){return console.log("Debugger: "+t[0]+":",e)}))},e.prototype.previewCommandEvent=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.commands).preview.apply(e,Object(r.j)(t)).subscribe((function(e){return console.log("Debugger: "+t[0]+":",e)}))},e.prototype.createErrorReport=function(){return this.reporter.createErrorReport()},e.prototype.submitErrorReport=function(){this.reporter.submitErrorReport()},e.prototype.restoreDiagramData=function(e){var t=this.getDiagramId(),n=this.datastore.getModelStore(ln.a);n.findOneRaw({id:t}).pipe(Object(Qt.a)(1)).subscribe((function(t){n.collection.insert(Object(r.a)(Object(r.a)({},Object(tn.cloneDeep)(e.diagram)),{id:t.id,lastChangeId:t.lastChangeId})),n.changeCollection.insert(e.changes.map((function(e){return Object(r.a)(Object(r.a)({},Object(tn.cloneDeep)(e)),{modelId:t.id})})))}))},e.prototype.clearLocalData=function(){this.datastore.drop()},e.prototype.selectLikeSamal=function(e,t){var n=this;void 0===e&&(e=1e4),void 0===t&&(t=250),this.ll.forCurrent(!1).getDiagramOnce().subscribe((function(r){var i=Object.keys(r.shapes),a=Date.now(),o=function(){if(!(Date.now()>a+e)){var r=Math.floor(Math.random()*i.length),s=Object(tn.sampleSize)(i,r);n.setSelection(s),setTimeout(o,t)}};o()}))},e.prototype.updateTexBounds=function(){this.dispatchCommandEvent("UpdateTextBounds")},e.prototype.startCanvasFPS=function(e){var t=this;void 0===e&&(e=2);var n=function(){if(C.P.get("DEBUG_FRAME_RATE")){if(0!==t.frameCountStartTime){var r=Date.now()-t.frameCountStartTime;t.frameCountsWithDuration.push({count:Ea.FRAME_RATE_COUNT,duration:r})}t.frameCountStartTime=Date.now(),Ea.FRAME_RATE_COUNT=0,setTimeout(n,1e3*e)}};C.P.set("DEBUG_FRAME_RATE",!0),0===this.frameCountsWithDuration.length&&(n(),console.log("Debugger: fps: Frame rate count started successfully."))},e.prototype.stopCanvasFPS=function(){C.P.set("DEBUG_FRAME_RATE",!1);var e=0,t=0;this.frameCountsWithDuration.forEach((function(n){e+=n.count,t+=n.duration/1e3,console.log("Debugger: fps: "+Math.round(n.count/(n.duration/1e3)))})),console.log("Debugger: average fps: "+Math.round(e/t)),Ea.FRAME_RATE_COUNT=0,this.frameCountsWithDuration=[],this.frameCountStartTime=0},e.prototype.createCustomDB=function(e,t){var n=this;this.commands.dispatch(qa.a.createEData,this.stateSvc.get("CurrentProject"),{id:e,defId:"creately.edata.custom",name:t}).pipe(Object(fi.a)(),Object(E.a)((function(e){if(e&&e.resultData[0]&&e.resultData[0].model){var t=e.resultData[0].model;return n.commands.dispatch(it.a.addEDataModel,{eDataModelId:t.id})}throw new Error("Faild add the db to the diagram")})),Object(fi.a)(),Object(E.a)((function(){return n.modelSubManager.start(xl.a,e)}))).subscribe()},e.prototype.createType=function(e,t){var n=this,r=this.stateSvc.get("Selected");1===r.length&&this.ell.getEDataModel(e).pipe(Object(E.a)((function(i){if(i){var a=C.sb.entityId();return n.commands.dispatch(wl.a.updateEntityDefs,e,{shapeId:r,entityDefId:a,entityDefName:t})}throw new Error("No edata model found")}))).subscribe()},e.prototype.updateType=function(e){var t=this,n=this.stateSvc.get("Selected");1===n.length&&this.ll.forCurrent(!1).getShapeOnce(n).pipe(Object(_.a)((function(r){if(r.eData&&!Object(tn.isEmpty)(r.eData)){var i=Object.keys(r.eData)[0];return t.commands.dispatch(wl.a.updateEntityDefs,i,{shapeId:n,entityDefId:r.entityDefId,entityDefName:e})}}))).subscribe()},e.prototype.makeTypeEditable=function(e,t,n){this.commands.dispatch(wl.a.switchTypeEditable,e,{editable:n,entityDefId:t})},e.prototype.removeType=function(e,t){this.commands.dispatch(wl.a.updateEntityDefs,e,{entityDefId:t,action:"delete"})},e.prototype.renameType=function(e,t,n){this.commands.dispatch(wl.a.updateEntityDefs,e,{entityDefId:t,entityDefName:n,action:"rename"})},e.prototype.showDropdowns=function(e){void 0===e&&(e="body");var t=document.querySelector("#showDropdownsTempStyle");t||((t=document.createElement("style")).id="showDropdownsTempStyle",document.head.appendChild(t)),t.textContent=e+" ul.abs-dropdown-items-container{ display: block !important }"},e.prototype.deleteEdata=function(e){var t=this;this.ell.getEDataModel(e).pipe(Object(E.a)((function(n){if(!n)return Object(Oe.a)({});var i=n.getUsedDiagIds().map((function(n){return t.commands.dispatch(it.a.removeEdata,n,{eDataId:e}).pipe(Object(fi.a)())}));return Object(Ol.a)(Object(r.j)([Object(Oe.a)({})],i))})),Object(E.a)((function(){return t.commands.dispatch(he.w.deleteEData,e,{modelType:El.b}).pipe(Object(fi.a)())}))).subscribe()},e.prototype.hideErrors=function(){C.P.set("DEBUG_ERROR_NOTIFICATIONS",!0)},e.prototype.showErrors=function(){C.P.set("DEBUG_ERROR_NOTIFICATIONS",!1)},e.prototype.setCanvasSensitivity=function(e,t){_l.a.zoomSensitivity=e,_l.a.panSensitivity=t},e.prototype.showFPSMeter=function(){var e=document.createElement("div");e.style.marginLeft="20px",e.style.display="inline",e.style.position="relative",e.style.marginLeft="8px",e.style.color="#383838",e.style.border="1px solid #b5b5b5",e.style.padding="3px 4px",e.style.top="14px",e.style.fontSize="10px",e.style.height="20px";var t=document.querySelector(".header-titles-container");t&&t.appendChild(e),ua.Ticker.addEventListener("tick",(function(t){t.paused||(e.innerText=Math.round(ua.Ticker.getMeasuredFPS())+" fps")}))},e.prototype.zoomPanRandom=function(){var e=this;setInterval((function(){e.commands.dispatch(gi.a.zoomAndPanDiagram,{level:Math.random(),animate:!0,toCenter:!0})}),200)},e.prototype.dispatchDuplicateProject=function(e){var t=C.sb.projectId();this.commands.dispatch(he.w.duplicateProject,e,{id:t})},e.prototype.enableSmartRules=function(){this.stateSvc.set("SmartRulesEnabled",!0)},e.prototype.renderAllShapeViews=function(){var e=this;this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(_.a)((function(t){e.stateSvc.set("ActiveShapes",Object.keys(t.shapes))}))).subscribe()},e.prototype.startAutoDraw=function(e,t,n){var r=this;void 0===e&&(e=["general","grids-boards","flowchart","block","core"]),void 0===t&&(t=1e3),void 0===n&&(n=1e4);var i=setInterval((function(){var t=e[Math.floor(Math.random()*e.length)];r.loader.getLibrary(t).pipe(Object(Xa.a)()).subscribe((function(e){var t,i=e.defs,a=i[Math.floor(Math.random()*i.length)].split("."),o=a.pop(),s=a.join("."),c=C.sb.shapeId();r.commands.dispatch(it.a.addDiagramShape,{shapes:(t={},t[c]={id:c,defId:s,version:o,x:Math.floor(Math.random()*n),y:Math.floor(Math.random()*n),type:"basic"},t)})}))}),t);this.autoDrowIntervals.push(i)},e.prototype.stopAutoDraw=function(){this.autoDrowIntervals.forEach((function(e){clearInterval(e)})),this.autoDrowIntervals=[]},e.prototype.startAutoShapeMove=function(e,t){var n=this;void 0===e&&(e=500),void 0===t&&(t=[]);var r=setInterval((function(){n.ll.forCurrent(!1).getDiagramOnce().subscribe((function(e){var r,i=Object.values(e.shapes).filter((function(e){return!t.includes(e.id)})).filter((function(e){return!e.isConnector()})).map((function(e){return e.id})),a=i[Math.floor(Math.random()*i.length)],o=e.shapes[a],s="shapes."+a+".x",c="shapes."+a+".y",l=o.x+50-Math.floor(100*Math.random()),u=o.y+50-Math.floor(100*Math.random());n.commands.dispatch(it.a.applyModifierDocument,{modifier:{$set:(r={},r[s]=l,r[c]=u,r)}})}))}),e);this.autoShapeMoveIntervals.push(r)},e.prototype.stopAutoShapeMove=function(){this.autoShapeMoveIntervals.forEach((function(e){clearInterval(e)})),this.autoShapeMoveIntervals=[]},e.prototype.getAvailableEdata=function(){this.ell.currentEDataModelsOnce().subscribe((function(e){e.forEach((function(e){console.group(e.id),console.log("Debugger: Edata Id",e.id),console.log("Debugger: Edata Def Id",e.defId),console.log("Debugger: Edata Def Name",e.name),console.groupEnd()}))}))},e.prototype.detachSelectedShapesFromEdata=function(e){var t=this.stateSvc.get("Selected"),n=this.getDiagramId();0!==t.length?(this.commands.dispatch(it.a.removeShapeFromEdata,n,{shapeIds:t}),this.commands.dispatch(wl.a.deleteEntityShapes,e,{shapeIds:t,diagramId:n})):console.log("Debugger: No shapes selected")},e.prototype.fixBrokenEntities=function(e){var t=this;Object(cn.b)(this.ll.forCurrent(!1).getDiagramOnce(),this.ell.getEData(e).pipe(Object(E.a)((function(e){return e.getEDataModelOnce()})))).pipe(Object(E.a)((function(e){var n=Object(r.h)(e,2),i=n[0],a=n[1];if(!i||!a)return Object(Oe.a)({});var o=i.shapes,s=Il.Sakota.create(a);Object.keys(o).forEach((function(e){var t=o[e];t.eDataId&&t.eDataId===s.id&&t.type!==pe.r.Connector&&(s.entities[t.entityId]&&(s.entities[t.entityId].shapes&&s.entities[t.entityId].shapes[i.id]||(s.entities[t.entityId].shapes||(s.entities[t.entityId].shapes={}),s.entities[t.entityId].shapes[i.id]={}),s.entities[t.entityId].shapes[i.id][e]=t.defId))}));var c=s.__sakota__.getChanges();return Object(tn.isEmpty)(c)?void 0:t.commands.dispatch(wl.a.applyModifierEData,a.id,{modifier:c,diagramId:i.id})}))).subscribe()},e.prototype.drawShapeBounds=function(){var e=this,t=this.stateSvc.get("DiagramCanvas"),n=new ua.Shape;this.ll.forCurrent(!1).getDiagramModel().pipe(Object($t.a)(50)).subscribe((function(r){var i=e.shapeBoundsLocator.shapesTree.all();n.parent||t.addChild(n),n.graphics.clear(),i.forEach((function(e){n.graphics.setStrokeStyle(3).beginStroke("red").moveTo(e.x,e.y).lineTo(e.x+e.width,e.y).lineTo(e.x+e.width,e.y+e.height).lineTo(e.x,e.y+e.height).lineTo(e.x,e.y).endStroke()})),t.update()}))},e.prototype.notifyError=function(e){this.notifierController.show("Something-went-wrong.-notification",C.i,C.jb.Error,{inputs:{heading:"Something went wrong.",description:"Email change limit exceeded.",autoDismiss:!0}},e)},e.prototype.updateNotesSection=function(e,t,n){yl.a.updateDocument(e,t,n)},e.prototype.resetTooltipTour=function(){this.tooltipTourService.resetTooltipTour()},e.\u0275fac=function(t){return new(t||e)(k.pc(C.B),k.pc(sn.a),k.pc(C.Ib),k.pc(tr.b),k.pc(tr.c),k.pc(kl.a),k.pc(Wt.a),k.pc(Zt.b),k.pc(Sl.a),k.pc(C.sb),k.pc(Cl.a),k.pc(mi.d),k.pc(Mt.a),k.pc(kr.a),k.pc(C.kb),k.pc(xi.a))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),Al=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r)||this;return a.commandMapper=t,a.log=n,a.injector=r,a.dataStore=i,a}return Object(r.e)(t,e),t.prototype.execute=function(e,t,n){var r=this;return this.getChanges(e.toString()).pipe(Object(je.a)((function(e){return!!e&&!!e.length})),Object(Te.a)((function(e){return e.filter((function(e){return!!e}))})),Object(Te.a)((function(e){return e.sort((function(e,t){return t.clientTime-e.clientTime}))})),Object(Te.a)((function(e){var t=r.getModifierData(e),n=r.createEventData(e[0].event,e[0].ctx,t);return{commands:r.getCommandList(t),eventData:n}})),Object(E.a)((function(e){var t=e.commands,i=e.eventData;return r.processCommandList(t,i,void 0,n)})))},t.prototype.getChanges=function(e){var t=this,n=this.dataStore.getModelStore(he.j);return n.findChanges({"event.eventId":e}).pipe(Object(Qt.a)(1),Object(E.a)((function(r){return Object(tn.isEmpty)(r)?(n=t.dataStore.getModelStore(El.b)).findChanges({"event.eventId":e}).pipe(Object(Qt.a)(1)):Object(Oe.a)(r)})))},t.prototype.getModifierData=function(e){return e.map((function(e){return{command:e.command,modifier:e.modifier,reverter:e.reverter}}))},t.prototype.createEventData=function(e,t,n){return{eventId:C.sb.eventId(),eventName:e.eventName,originalEventId:e.eventId,scenario:this.scenario,ctx:t,modifierData:n}},t.prototype.getCommandList=function(e){var t=this,n=new C.Fb;return e.forEach((function(e){var r=t.commandMapper.getCommandByName(e.command);n.add(r)})),n},t.\u0275fac=function(e){return new(e||t)(k.pc(C.z),k.pc(C.db),k.pc(k.C),k.pc(tr.b))},t.\u0275prov=k.bc({token:t,factory:t.\u0275fac}),t}(C.c),Ml=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r,i)||this;return a.commandMapper=t,a.log=n,a.injector=r,a.dataStore=i,a}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"scenario",{get:function(){return C.A.REDO},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(k.pc(C.z),k.pc(C.db),k.pc(k.C),k.pc(tr.b))},t.\u0275prov=k.bc({token:t,factory:t.\u0275fac}),t}(Al),Dl=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r,i)||this;return a.commandMapper=t,a.log=n,a.injector=r,a.dataStore=i,a}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"scenario",{get:function(){return C.A.UNDO},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(k.pc(C.z),k.pc(C.db),k.pc(k.C),k.pc(tr.b))},t.\u0275prov=k.bc({token:t,factory:t.\u0275fac}),t}(Al),jl=n("dKf+"),Nl=n("1JG0"),Rl=n("16Fa"),Ll=n("EmgI"),Fl=n("4t+C"),Bl=n("zjfJ"),Vl=n("fGyu"),zl=n("Czhu");function Ul(e){return Array.isArray?Array.isArray(e):"[object Array]"===Kl(e)}function Gl(e){return"string"==typeof e}function Hl(e){return"number"==typeof e}function Yl(e){return!0===e||!1===e||function(e){return ql(e)&&null!==e}(e)&&"[object Boolean]"==Kl(e)}function ql(e){return"object"==typeof e}function Wl(e){return null!=e}function Xl(e){return!e.trim().length}function Kl(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var Zl=function(e){return"Invalid value for key ".concat(e)},$l=function(e){return"Pattern length exceeds max of ".concat(e,".")},Ql=Object.prototype.hasOwnProperty,Jl=function(){function e(t){var n=this;Object(we.a)(this,e),this._keys=[],this._keyMap={};var r=0;t.forEach((function(e){var t=eu(e);r+=t.weight,n._keys.push(t),n._keyMap[t.id]=t,r+=t.weight})),this._keys.forEach((function(e){e.weight/=r}))}return Object(ke.a)(e,[{key:"get",value:function(e){return this._keyMap[e]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),e}();function eu(e){var t=null,n=null,r=null,i=1;if(Gl(e)||Ul(e))r=e,t=tu(e),n=nu(e);else{if(!Ql.call(e,"name"))throw new Error(function(e){return"Missing ".concat(e," property in key")}("name"));var a=e.name;if(r=a,Ql.call(e,"weight")&&(i=e.weight)<=0)throw new Error(function(e){return"Property 'weight' in key '".concat(e,"' must be a positive integer")}(a));t=tu(a),n=nu(a)}return{path:t,id:n,weight:i,src:r}}function tu(e){return Ul(e)?e:e.split(".")}function nu(e){return Ul(e)?e.join("."):e}var ru={useExtendedSearch:!1,getFn:function(e,t){var n=[],r=!1;return function e(t,i,a){if(Wl(t))if(i[a]){var o=t[i[a]];if(!Wl(o))return;if(a===i.length-1&&(Gl(o)||Hl(o)||Yl(o)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(o));else if(Ul(o)){r=!0;for(var s=0,c=o.length;s<c;s+=1)e(o[s],i,a+1)}else i.length&&e(o,i,a+1)}else n.push(t)}(e,Gl(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1},iu=Object(zl.a)(Object(zl.a)(Object(zl.a)(Object(zl.a)({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),ru),au=/[^ ]+/g;function ou(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=new Map,n=Math.pow(10,e);return{get:function(e){var r=e.match(au).length;if(t.has(r))return t.get(r);var i=1/Math.sqrt(r),a=parseFloat(Math.round(i*n)/n);return t.set(r,a),a},clear:function(){t.clear()}}}var su=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getFn,r=void 0===n?iu.getFn:n;Object(we.a)(this,e),this.norm=ou(3),this.getFn=r,this.isCreated=!1,this.setIndexRecords()}return Object(ke.a)(e,[{key:"setSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}},{key:"setIndexRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}},{key:"setKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=t,this._keysMap={},t.forEach((function(t,n){e._keysMap[t.id]=n}))}},{key:"create",value:function(){var e=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,Gl(this.docs[0])?this.docs.forEach((function(t,n){e._addString(t,n)})):this.docs.forEach((function(t,n){e._addObject(t,n)})),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();Gl(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}},{key:"getValueForItemAtKeyId",value:function(e,t){return e[this._keysMap[t]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){if(Wl(e)&&!Xl(e)){var n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}}},{key:"_addObject",value:function(e,t){var n=this,r={i:t,$:{}};this.keys.forEach((function(t,i){var a=n.getFn(e,t.path);if(Wl(a))if(Ul(a))!function(){for(var e=[],t=[{nestedArrIndex:-1,value:a}];t.length;){var o=t.pop(),s=o.nestedArrIndex,c=o.value;if(Wl(c))if(Gl(c)&&!Xl(c)){var l={v:c,i:s,n:n.norm.get(c)};e.push(l)}else Ul(c)&&c.forEach((function(e,n){t.push({nestedArrIndex:n,value:e})}))}r.$[i]=e}();else if(!Xl(a)){var o={v:a,n:n.norm.get(a)};r.$[i]=o}})),this.records.push(r)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),e}();function cu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.getFn,i=void 0===r?iu.getFn:r,a=new su({getFn:i});return a.setKeys(e.map(eu)),a.setSources(t),a.create(),a}function lu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.errors,r=void 0===n?0:n,i=t.currentLocation,a=void 0===i?0:i,o=t.expectedLocation,s=void 0===o?0:o,c=t.distance,l=void 0===c?iu.distance:c,u=t.ignoreLocation,p=void 0===u?iu.ignoreLocation:u,h=r/e.length;if(p)return h;var d=Math.abs(s-a);return l?h+d/l:d?1:h}function uu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iu.minMatchCharLength,n=[],r=-1,i=-1,a=0,o=e.length;a<o;a+=1){var s=e[a];s&&-1===r?r=a:s||-1===r||((i=a-1)-r+1>=t&&n.push([r,i]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}var pu=32;function hu(e){for(var t={},n=0,r=e.length;n<r;n+=1){var i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}var du=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.location,a=void 0===i?iu.location:i,o=r.threshold,s=void 0===o?iu.threshold:o,c=r.distance,l=void 0===c?iu.distance:c,u=r.includeMatches,p=void 0===u?iu.includeMatches:u,h=r.findAllMatches,d=void 0===h?iu.findAllMatches:h,f=r.minMatchCharLength,g=void 0===f?iu.minMatchCharLength:f,m=r.isCaseSensitive,v=void 0===m?iu.isCaseSensitive:m,b=r.ignoreLocation,y=void 0===b?iu.ignoreLocation:b;if(Object(we.a)(this,e),this.options={location:a,threshold:s,distance:l,includeMatches:p,findAllMatches:d,minMatchCharLength:g,isCaseSensitive:v,ignoreLocation:y},this.pattern=v?t:t.toLowerCase(),this.chunks=[],this.pattern.length){var x=function(e,t){n.chunks.push({pattern:e,alphabet:hu(e),startIndex:t})},C=this.pattern.length;if(C>pu){for(var w=0,k=C%pu,S=C-k;w<S;)x(this.pattern.substr(w,pu),w),w+=pu;if(k){var O=C-pu;x(this.pattern.substr(O),O)}}else x(this.pattern,0)}}return Object(ke.a)(e,[{key:"searchIn",value:function(e){var t=this.options,n=t.isCaseSensitive,r=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var i={isMatch:!0,score:0};return r&&(i.indices=[[0,e.length-1]]),i}var a=this.options,o=a.location,s=a.distance,c=a.threshold,l=a.findAllMatches,u=a.minMatchCharLength,p=a.ignoreLocation,h=[],d=0,f=!1;this.chunks.forEach((function(t){var n=t.pattern,i=t.alphabet,a=t.startIndex,g=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.location,a=void 0===i?iu.location:i,o=r.distance,s=void 0===o?iu.distance:o,c=r.threshold,l=void 0===c?iu.threshold:c,u=r.findAllMatches,p=void 0===u?iu.findAllMatches:u,h=r.minMatchCharLength,d=void 0===h?iu.minMatchCharLength:h,f=r.includeMatches,g=void 0===f?iu.includeMatches:f,m=r.ignoreLocation,v=void 0===m?iu.ignoreLocation:m;if(t.length>pu)throw new Error($l(pu));for(var b,y=t.length,x=e.length,C=Math.max(0,Math.min(a,x)),w=l,k=C,S=d>1||g,O=S?Array(x):[];(b=e.indexOf(t,k))>-1;){var E=lu(t,{currentLocation:b,expectedLocation:C,distance:s,ignoreLocation:v});if(w=Math.min(E,w),k=b+y,S)for(var _=0;_<y;)O[b+_]=1,_+=1}k=-1;for(var I=[],P=1,T=y+x,A=1<<y-1,M=0;M<y;M+=1){for(var D=0,j=T;D<j;){lu(t,{errors:M,currentLocation:C+j,expectedLocation:C,distance:s,ignoreLocation:v})<=w?D=j:T=j,j=Math.floor((T-D)/2+D)}T=j;var N=Math.max(1,C-j+1),R=p?x:Math.min(C+j,x)+y,L=Array(R+2);L[R+1]=(1<<M)-1;for(var F=R;F>=N;F-=1){var B=F-1,V=n[e.charAt(B)];if(S&&(O[B]=+!!V),L[F]=(L[F+1]<<1|1)&V,M&&(L[F]|=(I[F+1]|I[F])<<1|1|I[F+1]),L[F]&A&&(P=lu(t,{errors:M,currentLocation:B,expectedLocation:C,distance:s,ignoreLocation:v}))<=w){if(w=P,(k=B)<=C)break;N=Math.max(1,2*C-k)}}if(lu(t,{errors:M+1,currentLocation:C,expectedLocation:C,distance:s,ignoreLocation:v})>w)break;I=L}var z={isMatch:k>=0,score:Math.max(.001,P)};if(S){var U=uu(O,d);U.length?g&&(z.indices=U):z.isMatch=!1}return z}(e,n,i,{location:o+a,distance:s,threshold:c,findAllMatches:l,minMatchCharLength:u,includeMatches:r,ignoreLocation:p}),m=g.isMatch,v=g.score,b=g.indices;m&&(f=!0),d+=v,m&&b&&(h=[].concat(Object(Vl.a)(h),Object(Vl.a)(b)))}));var g={isMatch:f,score:f?d/this.chunks.length:1};return f&&r&&(g.indices=h),g}}]),e}(),fu=function(){function e(t){Object(we.a)(this,e),this.pattern=t}return Object(ke.a)(e,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(e){return gu(e,this.multiRegex)}},{key:"isSingleMatch",value:function(e){return gu(e,this.singleRegex)}}]),e}();function gu(e,t){var n=e.match(t);return n?n[1]:null}var mu=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(e){return Object(we.a)(this,n),t.call(this,e)}return Object(ke.a)(n,[{key:"search",value:function(e){var t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),n}(fu),vu=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(e){return Object(we.a)(this,n),t.call(this,e)}return Object(ke.a)(n,[{key:"search",value:function(e){var t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),n}(fu),bu=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(e){return Object(we.a)(this,n),t.call(this,e)}return Object(ke.a)(n,[{key:"search",value:function(e){var t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),n}(fu),yu=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(e){return Object(we.a)(this,n),t.call(this,e)}return Object(ke.a)(n,[{key:"search",value:function(e){var t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),n}(fu),xu=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(e){return Object(we.a)(this,n),t.call(this,e)}return Object(ke.a)(n,[{key:"search",value:function(e){var t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),n}(fu),Cu=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(e){return Object(we.a)(this,n),t.call(this,e)}return Object(ke.a)(n,[{key:"search",value:function(e){var t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),n}(fu),wu=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.location,o=void 0===a?iu.location:a,s=i.threshold,c=void 0===s?iu.threshold:s,l=i.distance,u=void 0===l?iu.distance:l,p=i.includeMatches,h=void 0===p?iu.includeMatches:p,d=i.findAllMatches,f=void 0===d?iu.findAllMatches:d,g=i.minMatchCharLength,m=void 0===g?iu.minMatchCharLength:g,v=i.isCaseSensitive,b=void 0===v?iu.isCaseSensitive:v,y=i.ignoreLocation,x=void 0===y?iu.ignoreLocation:y;return Object(we.a)(this,n),(r=t.call(this,e))._bitapSearch=new du(e,{location:o,threshold:c,distance:u,includeMatches:h,findAllMatches:f,minMatchCharLength:m,isCaseSensitive:b,ignoreLocation:x}),r}return Object(ke.a)(n,[{key:"search",value:function(e){return this._bitapSearch.searchIn(e)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),n}(fu),ku=function(e){Object(ye.a)(n,e);var t=Object(xe.a)(n);function n(e){return Object(we.a)(this,n),t.call(this,e)}return Object(ke.a)(n,[{key:"search",value:function(e){for(var t,n=0,r=[],i=this.pattern.length;(t=e.indexOf(this.pattern,n))>-1;)n=t+i,r.push([t,n-1]);var a=!!r.length;return{isMatch:a,score:a?0:1,indices:r}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),n}(fu),Su=[mu,ku,bu,yu,Cu,xu,vu,wu],Ou=Su.length,Eu=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function _u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((function(e){for(var n=e.trim().split(Eu).filter((function(e){return e&&!!e.trim()})),r=[],i=0,a=n.length;i<a;i+=1){for(var o=n[i],s=!1,c=-1;!s&&++c<Ou;){var l=Su[c],u=l.isMultiMatch(o);u&&(r.push(new l(u,t)),s=!0)}if(!s)for(c=-1;++c<Ou;){var p=Su[c],h=p.isSingleMatch(o);if(h){r.push(new p(h,t));break}}}return r}))}var Iu=new Set([wu.type,ku.type]),Pu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.isCaseSensitive,i=void 0===r?iu.isCaseSensitive:r,a=n.includeMatches,o=void 0===a?iu.includeMatches:a,s=n.minMatchCharLength,c=void 0===s?iu.minMatchCharLength:s,l=n.ignoreLocation,u=void 0===l?iu.ignoreLocation:l,p=n.findAllMatches,h=void 0===p?iu.findAllMatches:p,d=n.location,f=void 0===d?iu.location:d,g=n.threshold,m=void 0===g?iu.threshold:g,v=n.distance,b=void 0===v?iu.distance:v;Object(we.a)(this,e),this.query=null,this.options={isCaseSensitive:i,includeMatches:o,minMatchCharLength:c,findAllMatches:h,ignoreLocation:u,location:f,threshold:m,distance:b},this.pattern=i?t:t.toLowerCase(),this.query=_u(this.pattern,this.options)}return Object(ke.a)(e,[{key:"searchIn",value:function(e){var t=this.query;if(!t)return{isMatch:!1,score:1};var n=this.options,r=n.includeMatches;e=n.isCaseSensitive?e:e.toLowerCase();for(var i=0,a=[],o=0,s=0,c=t.length;s<c;s+=1){var l=t[s];a.length=0,i=0;for(var u=0,p=l.length;u<p;u+=1){var h=l[u],d=h.search(e),f=d.isMatch,g=d.indices,m=d.score;if(!f){o=0,i=0,a.length=0;break}if(i+=1,o+=m,r){var v=h.constructor.type;Iu.has(v)?a=[].concat(Object(Vl.a)(a),Object(Vl.a)(g)):a.push(g)}}if(i){var b={isMatch:!0,score:o/i};return r&&(b.indices=a),b}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(e,t){return t.useExtendedSearch}}]),e}(),Tu=[];function Au(e,t){for(var n=0,r=Tu.length;n<r;n+=1){var i=Tu[n];if(i.condition(e,t))return new i(e,t)}return new du(e,t)}var Mu="$and",Du="$or",ju="$path",Nu="$val",Ru=function(e){return!(!e[Mu]&&!e[Du])},Lu=function(e){return!!e[ju]},Fu=function(e){return!Ul(e)&&ql(e)&&!Ru(e)},Bu=function(e){return Object(Bl.a)({},Mu,Object.keys(e).map((function(t){return Object(Bl.a)({},t,e[t])})))};function Vu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.auto,i=void 0===r||r,a=function e(n){var r=Object.keys(n),a=Lu(n);if(!a&&r.length>1&&!Ru(n))return e(Bu(n));if(Fu(n)){var o=a?n[ju]:r[0],s=a?n[Nu]:n[o];if(!Gl(s))throw new Error(Zl(o));var c={keyId:nu(o),pattern:s};return i&&(c.searcher=Au(s,t)),c}var l={children:[],operator:r[0]};return r.forEach((function(t){var r=n[t];Ul(r)&&r.forEach((function(t){l.children.push(e(t))}))})),l};return Ru(e)||(e=Bu(e)),a(e)}function zu(e,t){var n=t.ignoreFieldNorm,r=void 0===n?iu.ignoreFieldNorm:n;e.forEach((function(e){var t=1;e.matches.forEach((function(e){var n=e.key,i=e.norm,a=e.score,o=n?n.weight:null;t*=Math.pow(0===a&&o?Number.EPSILON:a,(o||1)*(r?1:i))})),e.score=t}))}function Uu(e,t){var n=e.matches;t.matches=[],Wl(n)&&n.forEach((function(e){if(Wl(e.indices)&&e.indices.length){var n={indices:e.indices,value:e.value};e.key&&(n.key=e.key.src),e.idx>-1&&(n.refIndex=e.idx),t.matches.push(n)}}))}function Gu(e,t){t.score=e.score}function Hu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.includeMatches,i=void 0===r?iu.includeMatches:r,a=n.includeScore,o=void 0===a?iu.includeScore:a,s=[];return i&&s.push(Uu),o&&s.push(Gu),e.map((function(e){var n=e.idx,r={item:t[n],refIndex:n};return s.length&&s.forEach((function(t){t(e,r)})),r}))}var Yu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;Object(we.a)(this,e),this.options=Object(zl.a)(Object(zl.a)({},iu),n),this.options.useExtendedSearch,this._keyStore=new Jl(this.options.keys),this.setCollection(t,r)}return Object(ke.a)(e,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof su))throw new Error("Incorrect 'index' type");this._myIndex=t||cu(this.options.keys,this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(e){Wl(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"remove",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1},t=[],n=0,r=this._docs.length;n<r;n+=1){var i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,r-=1,t.push(i))}return t}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.limit,r=void 0===n?-1:n,i=this.options,a=i.includeMatches,o=i.includeScore,s=i.shouldSort,c=i.sortFn,l=i.ignoreFieldNorm,u=Gl(e)?Gl(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return zu(u,{ignoreFieldNorm:l}),s&&u.sort(c),Hl(r)&&r>-1&&(u=u.slice(0,r)),Hu(u,this._docs,{includeMatches:a,includeScore:o})}},{key:"_searchStringList",value:function(e){var t=Au(e,this.options),n=this._myIndex.records,r=[];return n.forEach((function(e){var n=e.v,i=e.i,a=e.n;if(Wl(n)){var o=t.searchIn(n),s=o.isMatch,c=o.score,l=o.indices;s&&r.push({item:n,idx:i,matches:[{score:c,value:n,norm:a,indices:l}]})}})),r}},{key:"_searchLogical",value:function(e){var t=this,n=Vu(e,this.options),r=this._myIndex.records,i={},a=[];return r.forEach((function(e){var r=e.$,o=e.i;if(Wl(r)){var s=function e(n,r,i){if(!n.children){var a=n.keyId,o=n.searcher,s=t._findMatches({key:t._keyStore.get(a),value:t._myIndex.getValueForItemAtKeyId(r,a),searcher:o});return s&&s.length?[{idx:i,item:r,matches:s}]:[]}switch(n.operator){case Mu:for(var c=[],l=0,u=n.children.length;l<u;l+=1){var p=e(n.children[l],r,i);if(!p.length)return[];c.push.apply(c,Object(Vl.a)(p))}return c;case Du:for(var h=[],d=0,f=n.children.length;d<f;d+=1){var g=e(n.children[d],r,i);if(g.length){h.push.apply(h,Object(Vl.a)(g));break}}return h}}(n,r,o);s.length&&(i[o]||(i[o]={idx:o,item:r,matches:[]},a.push(i[o])),s.forEach((function(e){var t,n=e.matches;(t=i[o].matches).push.apply(t,Object(Vl.a)(n))})))}})),a}},{key:"_searchObjectList",value:function(e){var t=this,n=Au(e,this.options),r=this._myIndex,i=r.keys,a=r.records,o=[];return a.forEach((function(e){var r=e.$,a=e.i;if(Wl(r)){var s=[];i.forEach((function(e,i){s.push.apply(s,Object(Vl.a)(t._findMatches({key:e,value:r[i],searcher:n})))})),s.length&&o.push({idx:a,item:r,matches:s})}})),o}},{key:"_findMatches",value:function(e){var t=e.key,n=e.value,r=e.searcher;if(!Wl(n))return[];var i=[];if(Ul(n))n.forEach((function(e){var n=e.v,a=e.i,o=e.n;if(Wl(n)){var s=r.searchIn(n),c=s.isMatch,l=s.score,u=s.indices;c&&i.push({score:l,key:t,value:n,idx:a,norm:o,indices:u})}}));else{var a=n.v,o=n.n,s=r.searchIn(a),c=s.isMatch,l=s.score,u=s.indices;c&&i.push({score:l,key:t,value:a,norm:o,indices:u})}return i}}]),e}();Yu.version="6.4.6",Yu.createIndex=cu,Yu.parseIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getFn,r=void 0===n?iu.getFn:n,i=e.keys,a=e.records,o=new su({getFn:r});return o.setKeys(i),o.setIndexRecords(a),o},Yu.config=iu,Yu.parseQuery=Vu,function(){Tu.push.apply(Tu,arguments)}(Pu);var qu=Yu,Wu=function(){function e(){}return e.prototype.prepareCollection=function(e,t,n){var r={includeScore:!0,shouldSort:!0,threshold:.4,ignoreFieldNorm:!0,ignoreLocation:!0,keys:t,useExtendedSearch:!0};if(n){var i=qu.parseIndex(n);this.fuseIndex=new qu(e,r,i)}else this.fuseIndex=new qu(e,r)},e.prototype.addCollection=function(e){var t=this;e.forEach((function(e){t.addDocument(e)}))},e.prototype.addDocument=function(e){this.fuseIndex.add(e)},e.prototype.removeDocument=function(e){this.fuseIndex.remove(e)},e.prototype.getIndexSize=function(){return this.fuseIndex?this.fuseIndex.getIndex().size():0},e.prototype.searchCollection=function(e,t){return this.fuseIndex?this.fuseIndex.search(e,t):[]},e}(),Xu=function(){function e(e,t,n,r,i){this.definitionLocator=e,this.datastore=t,this.ll=n,this.state=r,this.workerRegistry=i,this.fuseModel=new Wu,this.delayLoadingColection=3e3,this.type="document",this.workerRegistry.register("document-search","./document-search-web.worker"),this.documentSearchWorker=this.workerRegistry.fetch("document-search"),this.watchOnCollectionChanges(),this.listenToWorkerMessage(),this.isServiceWorkerSupported&&this.listenToWorkspaceCachingServiceWorker()}return Object.defineProperty(e.prototype,"isServiceWorkerSupported",{get:function(){return"serviceWorker"in navigator},enumerable:!1,configurable:!0}),e.prototype.search=function(e,t){var n=this.fuseModel.searchCollection(e,t);n=n.map((function(e){return e.item.score=e.score,e.item}));var r=this.sortItemsByProperty(n,["diagramId","score"]),i=this.bringGivenDiagramsToTop(r,this.state.get("CurrentDiagram"));return Object(Oe.a)(i)},e.prototype.listenToWorkspaceCachingServiceWorker=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){"workspace-caching-completed"===t.data.message&&setTimeout((function(){e.loadAllCollections()}),e.delayLoadingColection)}))},e.prototype.listenToWorkerMessage=function(){var e=this;this.documentSearchWorker.onmessage=function(t){var n=t.data;"loaded-collection"===n.message?e.prepareFuseCollection(JSON.parse(n.fuse)):"remove-document"===n.message?e.removeFuseDocument(n.documentId):"add-collection"===n.message&&(e.fuseModel.getIndexSize()>0?e.addFuseCollection(n.collection):e.prepareFuseCollection({fuseIndex:null,collection:n.collection}))}},e.prototype.removeFuseDocument=function(e){this.fuseModel.removeDocument((function(t){return t.id===e}))},e.prototype.addFuseCollection=function(e){e.forEach((function(e){e.action=C.m.get("APP_URL")+"/diagram/"+e.diagramId+"/edit/shape/"+e.shapeId})),e&&e.length>0&&this.fuseModel.addCollection(e)},e.prototype.prepareFuseCollection=function(e){e&&(e.collection.forEach((function(e){e.action=C.m.get("APP_URL")+"/diagram/"+e.diagramId+"/edit/shape/"+e.shapeId})),this.fuseModel.prepareCollection(e.collection,["text"],e.fuseIndex))},e.prototype.loadAllCollections=function(){this.documentSearchWorker.postMessage({message:"start-load-collection",defs:this.definitionLocator.getCachedDefs()})},e.prototype.watchOnCollectionChanges=function(){var e=this;this.datastore.watch(ln.a,{}).pipe(Object(_.a)((function(t){0===e.fuseModel.getIndexSize()&&e.loadAllCollections(),e.documentSearchWorker.postMessage({message:"update-collection-changes",collection:t,defs:e.definitionLocator.getCachedDefs()})}))).subscribe()},e.prototype.sortItemsByProperty=function(e,t,n){return void 0===n&&(n="~"),e.sort((function(e,r){var i=t.reduce((function(t,r){return t+n+e[r]}),""),a=t.reduce((function(e,t){return e+n+r[t]}),"");return i.localeCompare(a)}))},e.prototype.bringGivenDiagramsToTop=function(e,t){var n=e.filter((function(e){return e.diagramId===t})),i=e.filter((function(e){return e.diagramId!==t}));return Object(r.j)(n,i)},e.\u0275fac=function(t){return new(t||e)(k.pc(Sl.a),k.pc(tr.b),k.pc(sn.a),k.pc(C.Ib),k.pc(fr.a))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),Ku=function(){function e(e,t){this.logger=e,this.dataStore=t,this.name="DiagramResponsibility"}return e.prototype.checkState=function(e){if(!e.states.diagramRequired)return Object(Oe.a)(!0);this.logger.debug("DiagramResponsibility checkState");var t=this.dataStore.getModelStore(ln.a),n={id:e.input.resourceId};return Object(cn.b)(t.findOneRaw(n),t.findOneStatic(n)).pipe(Object(Qt.a)(1),Object(Te.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!(n&&i&&i.privacy)})))},e.prototype.nextResponsibility=function(e){return e.states.diagramRequired?["DiagramSubscriptionResponsibility"]:[]},e.prototype.result=function(e){if(!e.states.diagramRequired)return{type:"complete"}},e.\u0275fac=function(t){return new(t||e)(k.pc(C.db),k.pc(tr.b))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),Zu=function(){function e(e,t){this.logger=e,this.subManager=t,this.name="DiagramSubscriptionResponsibility"}return e.prototype.checkState=function(e){this.logger.debug("DiagramSubscriptionResponsibility checkState");var t=this.subManager.get(e.input.resourceId);return t?Object(Oe.a)(t.currentStatus):Object(Oe.a)({})},e.prototype.nextResponsibility=function(e){var t=this.getStates(e);if(t.diagramSubStarted||t.hasDiagram&&(!t.diagramSubErrored||!this.isPermOrAuthError(e)))return["PrivacyResponsibility"]},e.prototype.result=function(e){var t=this.getStates(e);return t.diagramSubErrored?this.getSubscriptionErrorOutcome(e,t):t.diagramSubStarted?void 0:{type:"commandEvent",action:t.isAuthenticated?vi.a.startDiagramSubscriptionAndDeps:vi.a.startDiagramSubscription,wait:!t.hasDiagram}},e.prototype.isPermissionError=function(e){var t=e.states.DiagramSubscriptionResponsibility.error;return!!t&&(1202===t.code||1203===t.code)},e.prototype.isAuthenticationError=function(e){var t=e.states.DiagramSubscriptionResponsibility.error;return!!t&&2201===t.code},e.prototype.isPermOrAuthError=function(e){return this.isPermissionError(e)||this.isAuthenticationError(e)},e.prototype.getStates=function(e){var t=e.states.DiagramSubscriptionResponsibility;return{diagramSubStarted:t&&t.subStatus===mi.f.started,diagramSubErrored:t&&t.subStatus===mi.f.errored,hasDiagram:!!e.states.DiagramResponsibility,isAuthenticated:0===e.states.AuthResponsibility}},e.prototype.getSubscriptionErrorOutcome=function(e,t){return this.isPermissionError(e)?{type:"route",action:e.input.resourceId+"/"+e.input.action+"-permission-error"}:this.isAuthenticationError(e)?t.isAuthenticated?{type:"commandEvent",action:vi.a.startDiagramSubscriptionAndDeps,wait:!0}:{type:"command",action:"Authenticate",wait:!0}:t.hasDiagram?void 0:{type:"route",action:e.input.resourceId+"/diagram-error"}},e.\u0275fac=function(t){return new(t||e)(k.pc(C.db),k.pc(mi.d))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),$u=n("zd2y"),Qu=n("wx9+"),Ju=n("F+Ww"),ep=n("i+Vu"),tp=n("xYNC"),np=n("PIOu"),rp=n("ccLb"),ip=n("TZl/"),ap=function(e){function t(t,n,i){var a=e.call(this)||this;return a.state=t,a.ll=n,a.collabLocator=i,Object(cn.b)([a.state.changes("CurrentUser"),a.state.changes("CurrentDiagram")]).pipe(Object(je.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(E.a)((function(e){var t=Object(r.h)(e,2),n=(t[0],t[1]);return Object(Z.a)(a.collabLocator.getCollabs(n).pipe(Object(Jt.a)(tn.isEqual),Object(_.a)((function(e){var t=e.find((function(e){return e.role===he.g.OWNER&&e.id!==a.state.get("CurrentUser")}));t&&t.plan?a.ownerUserPermModel=t.plan.permissions[pe.p.DIAGRAM_ADD_SHAPES]:a.ownerUserPermModel=null}))),a.ll.forCurrentObserver(!1).pipe(Object(E.a)((function(e){return e.getDiagramModel().pipe(Object(_.a)((function(e){a.shapeCount=Object.keys(e.shapes).length})))}))))}))).subscribe(),a}return Object(r.e)(t,e),t.prototype.check=function(e){return!!(e.allowed||this.ownerUserPermModel&&this.ownerUserPermModel.allowed)&&(!!(e.maxUsage<0||this.ownerUserPermModel&&this.ownerUserPermModel.maxUsage<0)||this.checkUseExceeded(e,this.ownerUserPermModel))},t.prototype.checkUseExceeded=function(e,t){return!!(e.maxUsage>0&&this.shapeCount<e.maxUsage||t&&t.maxUsage>0&&this.shapeCount<t.maxUsage)},t.\u0275fac=function(e){return new(e||t)(k.pc(C.Ib),k.pc(sn.a),k.pc(Kt.a))},t.\u0275prov=k.bc({token:t,factory:t.\u0275fac}),t}(fe.f),op=function(e){function t(t,n){var i=e.call(this)||this;return i.state=t,i.ll=n,i.imageCount=0,Object(cn.b)([i.state.changes("CurrentUser"),i.state.changes("CurrentDiagram")]).pipe(Object(je.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!n&&!!i})),Object(E.a)((function(){return i.ll.forCurrentObserver(!1).pipe(Object(E.a)((function(e){return e.getDiagramChanges()})),Object(E.a)((function(){return i.ll.forCurrentObserver(!1).pipe(Object(E.a)((function(e){return e.getDiagramOnce().pipe(Object(_.a)((function(e){i.imageCount=Object.values(e.shapes).filter((function(e){return e.type===pe.r.Image})).length})))})))})))}))).subscribe(),i}return Object(r.e)(t,e),t.prototype.checkUsageExceed=function(e){return e.maxUsage>0&&this.imageCount<e.maxUsage},t.\u0275fac=function(e){return new(e||t)(k.pc(C.Ib),k.pc(sn.a))},t.\u0275prov=k.bc({token:t,factory:t.\u0275fac}),t}(fe.f),sp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.prototype.checkUsageExceed=function(e){return e.maxUsage>0&&localStorage.googleSearchedCount<=e.maxUsage},t.\u0275fac=function(e){return cp(e||t)},t.\u0275prov=k.bc({token:t,factory:t.\u0275fac}),t}(fe.f),cp=k.nc(sp),lp=function(e){function t(t){var n=e.call(this)||this;return n.injector=t,n}return Object(r.e)(t,e),t.prototype.checkUsageExceed=function(e){return e.maxUsage>0&&this.injector.get(nn).userCount.value<e.maxUsage},t.\u0275fac=function(e){return new(e||t)(k.pc(k.C))},t.\u0275prov=k.bc({token:t,factory:t.\u0275fac}),t}(fe.f),up=n("35j0");function pp(e,t){1&e&&(k.lc(0,"div",12),k.lc(1,"div",13),k.lc(2,"div",14),k.lc(3,"p",15),k.ed(4,"OFFLINE.PANEL.HEADING"),k.kc(),k.lc(5,"p",16),k.ed(6,"OFFLINE.PANEL.WEB_LINK_VIEWER"),k.kc(),k.kc(),k.kc(),k.kc())}function hp(e,t){if(1&e){var n=k.mc();k.lc(0,"div",12),k.lc(1,"div",17),k.lc(2,"h2",18),k.ed(3,"WEBLINK.TITLE"),k.kc(),k.gc(4,"p",19),k.yc(5,"async"),k.lc(6,"div",20),k.lc(7,"button",21),k.tc("click",(function(){return k.Pc(n),k.xc(3).openLinkInNewWindow()})),k.lc(8,"label",22),k.ed(9,"WEBLINK.OPEN_LINK_BUTTON"),k.kc(),k.kc(),k.kc(),k.lc(10,"p",23),k.ed(11,"WEBLINK.WHITELIST_MSG"),k.kc(),k.lc(12,"p",23),k.ed(13,"WEBLINK.WHITELIST_EMAIL"),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc(3);k.Sb(4),k.Cc("innerHTML",k.zc(5,1,r.getLinkMessage()),k.Qc)}}function dp(e,t){if(1&e){var n=k.mc();k.lc(0,"div",12),k.lc(1,"div",17),k.lc(2,"h2",18),k.ed(3,"WEBLINK.TITLE_EMBEDDED"),k.kc(),k.gc(4,"p",19),k.yc(5,"async"),k.lc(6,"div",20),k.lc(7,"button",21),k.tc("click",(function(){return k.Pc(n),k.xc(3).openLinkInNewWindow()})),k.lc(8,"label",22),k.ed(9,"WEBLINK.OPEN_LINK_BUTTON"),k.kc(),k.kc(),k.kc(),k.lc(10,"p",23),k.ed(11,"WEBLINK.WHITELIST_MSG"),k.kc(),k.lc(12,"p",23),k.ed(13,"WEBLINK.WHITELIST_EMAIL"),k.kc(),k.kc(),k.kc()}if(2&e){var r=k.xc(3);k.Sb(4),k.Cc("innerHTML",k.zc(5,1,r.getLinkMessage()),k.Qc)}}function fp(e,t){if(1&e&&k.gc(0,"iframe",24),2&e){var n=k.xc().ngIf;k.Cc("src",n.safeUrl,k.Rc)}}function gp(e,t){if(1&e&&(k.lc(0,"div",25),k.lc(1,"div",26),k.lc(2,"a",27),k.ed(3),k.kc(),k.kc(),k.kc()),2&e){var n=k.xc().ngIf;k.Sb(2),k.Dc("href",n.url,k.Sc),k.Sb(1),k.fd(n.url)}}function mp(e,t){if(1&e){var n=k.mc();k.lc(0,"div",3),k.lc(1,"div",4),k.lc(2,"div",5),k.cd(3,pp,7,0,"div",6),k.yc(4,"async"),k.cd(5,hp,14,3,"div",6),k.yc(6,"async"),k.yc(7,"async"),k.cd(8,dp,14,3,"div",6),k.yc(9,"async"),k.yc(10,"async"),k.cd(11,fp,1,1,"iframe",7),k.yc(12,"async"),k.yc(13,"async"),k.cd(14,gp,4,2,"div",8),k.yc(15,"async"),k.kc(),k.lc(16,"div",9),k.tc("click",(function(){return k.Pc(n),k.xc(2).hideComponentBox()})),k.wc(),k.lc(17,"svg",10),k.gc(18,"use",11),k.kc(),k.kc(),k.kc(),k.kc()}if(2&e){var r=t.ngIf,i=k.xc(2);k.Sb(3),k.Cc("ngIf",0===k.zc(4,5,i.appConnectionStatus)),k.Sb(2),k.Cc("ngIf",0!==k.zc(6,7,i.appConnectionStatus)&&!k.zc(7,9,i.isLinkVerified)),k.Sb(3),k.Cc("ngIf",0!==k.zc(9,11,i.appConnectionStatus)&&k.zc(10,13,i.isLinkVerified)&&i.state.get("ApplicationIsEmbedded")),k.Sb(3),k.Cc("ngIf",k.zc(12,15,i.isLinkVerified)&&0!==k.zc(13,17,i.appConnectionStatus)&&!i.state.get("ApplicationIsEmbedded")),k.Sb(3),k.Cc("ngIf",k.zc(15,19,i.isLinkVerified)&&!r.createlyMediaId&&!i.state.get("ApplicationIsEmbedded"))}}function vp(e,t){if(1&e&&(k.lc(0,"div",1),k.cd(1,mp,19,21,"div",2),k.yc(2,"async"),k.kc()),2&e){var n=k.xc();k.Sb(1),k.Cc("ngIf",k.zc(2,1,n.viewerData))}}var bp=function(){function e(e,t,n){this.state=e,this.sanitizer=t,this.translateService=n,this.subs=[],this.showComponent=new I.a(!1),this.viewerData=new I.a({safeUrl:void 0,url:"",placeHolder:"",createlyMediaId:void 0}),this.isLinkVerified=new I.a(!1),this.initTime=Date.now()}return Object.defineProperty(e.prototype,"appConnectionStatus",{get:function(){return this.state.changes(x.c)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.state.changes("WebLinkViewer").pipe(Object(_.a)((function(t){t.open?(e.showComponent.next(!0),t.link=decodeURI(t.link),e.viewerData.next({safeUrl:e.sanitizer.bypassSecurityTrustResourceUrl(t.link),url:t.link,createlyMediaId:t.createlyMediaId})):e.showComponent.next(!1)})),Object(_.a)((function(){return e.checkLinkIsVerified()}))).subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getLinkMessage=function(){return this.translate("WEBLINK.LINK_DESC",{link:this.viewerData.value.url})},e.prototype.translate=function(e,t){return this.translateService.get(e,t).pipe(Object(Qt.a)(1))},e.prototype.openLinkInNewWindow=function(){window.open(this.viewerData.value.url,"_blank")},e.prototype.hideComponentBox=function(){var e=this.state.get("WebLinkViewer");e.mediaName&&C.Kb.track("n.helpWidget.videos.window.close",{value1Type:"mediaTitle",value1:e.mediaName,value2Type:"durationsInMs",value2:(Date.now()-this.initTime).toString()}),this.state.set("WebLinkViewer",{open:!1})},e.prototype.checkLinkIsVerified=function(){return Object(r.c)(this,void 0,void 0,(function(){var e,t,n;return Object(r.f)(this,(function(r){switch(r.label){case 0:return(e=this.viewerData.value.url)?[4,fetch("./assets/security/whitelist.txt").then((function(e){return e.text()}))]:[2,void 0];case 1:return(t=r.sent())&&((n=this.extractDomain(e))&&t.includes(n)?this.isLinkVerified.next(!0):this.isLinkVerified.next(!1)),[2]}}))}))},e.prototype.extractDomain=function(e){var t,n;return(n=e.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n\?\=]+)/im))&&(n=(t=n[1]).match(/^[^\.]+\.(.+\..+)$/))&&(t=n[1]),t},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(Re.b),k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["weblinks-viewer"]],decls:2,vars:3,consts:[["class","weblinks-viewer-overlay fx-cover fx-center-all",4,"ngIf"],[1,"weblinks-viewer-overlay","fx-cover","fx-center-all"],["class","weblinks-viewer-container",4,"ngIf"],[1,"weblinks-viewer-container"],[1,"weblinks-viewer-container-inner"],[1,"weblinks-viewer-content"],["class","weblinks-viewer-external-link-msg",4,"ngIf"],["allow","autoplay","allowfullscreen","",3,"src",4,"ngIf"],["class","wlv-footer",4,"ngIf"],[1,"weblinks-viewer-close-btn",3,"click"],[1,"nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close-2"],[1,"weblinks-viewer-external-link-msg"],[1,"fx-margin-top-30","fx-center-column"],[1,"weblink-viewer-offline-message","fx-margin-bottom-10"],["translate","",1,"navy-blue","nu-text-small","fx-margin-bottom-5","fx-center-all"],["translate","",1,"grey","nu-text-small"],[1,"weblinks-viewer-external-link-msg-inner"],["translate","",1,"fx-margin-bottom-5"],[1,"fx-margin-bottom-5",3,"innerHTML"],[1,"fx-margin-bottom-25","fx-span-width"],[1,"nu-btn-small","nu-btn-icon-text","primary","fx-center",3,"click"],["translate",""],["translate","",1,"nu-text-xsmall"],["allow","autoplay","allowfullscreen","",3,"src"],[1,"wlv-footer"],[1,"wlv-footer-left"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(k.cd(0,vp,3,3,"div",0),k.yc(1,"async")),2&e&&k.Cc("ngIf",k.zc(1,1,t.showComponent))},directives:[i.t,y.a],pipes:[i.b],styles:[".weblinks-viewer-overlay[_ngcontent-%COMP%]{z-index:1001;background-color:hsla(0,0%,40.8%,.8)}.weblinks-viewer-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column}.weblinks-viewer-container-inner[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:4px;display:flex;padding:32px 8px 8px}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  iframe{width:100%;height:inherit}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-footer{height:94px;background:#fff}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-footer-left{float:left;top:58px;left:24px;position:relative}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-nav{display:inline}.weblinks-viewer-container-inner[_ngcontent-%COMP%]  .wlv-footer-right{float:right;position:relative;top:60px;right:50px}.weblinks-viewer-icon-container[_ngcontent-%COMP%]{width:100px;margin-right:15px;border-radius:4px 0 0 4px}.weblinks-viewer-icon-container.neutral[_ngcontent-%COMP%]{background-color:#40b29e}.weblinks-viewer-icon-container.warning[_ngcontent-%COMP%]{background-color:#ffc648}.weblinks-viewer-icon-container.success[_ngcontent-%COMP%]{background-color:#61a15e}.weblinks-viewer-icon-container.error[_ngcontent-%COMP%]{background-color:#d92626}.weblinks-viewer-content[_ngcontent-%COMP%]{flex:1;word-break:break-word;display:flex;flex-direction:column;height:85vh;overflow:hidden}.weblinks-viewer-content-text[_ngcontent-%COMP%]{flex:1}.weblinks-viewer-button-container[_ngcontent-%COMP%]{text-align:right}.weblinks-viewer-close-btn[_ngcontent-%COMP%]{top:3px;right:5px;position:absolute;fill:rgba(98,104,106,.5)}.weblinks-viewer-close-btn[_ngcontent-%COMP%]:hover{cursor:pointer;fill:rgba(41,53,56,.7)}.weblinks-viewer-external-link-msg[_ngcontent-%COMP%]{background-color:#eceef2;height:80vh;position:relative;display:flex;align-items:center;justify-content:center}.weblinks-viewer-external-link-msg-inner[_ngcontent-%COMP%]{display:inline-block;text-align:center;max-width:500px}.weblinks-viewer-external-link-msg-inner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.weblinks-viewer-external-link-msg-inner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7e7e7e}"],changeDetection:0}),e}(),yp=n("elRR"),xp=function(){function e(e,t,n){this.realtimeStates=e,this.dcs=t,this.state=n,this.peerMap={},this.previewChangeThrottle=200,this.subs=[]}return e.prototype.initialize=function(){var e=this;this.subs.push(this.state.changes("RealtimeConnectionStatus").pipe(Object(je.a)((function(e){return e===Zt.a.ONLINE})),Object(Qt.a)(1),Object(E.a)((function(){return e.state.changes("CurrentDiagram").pipe(Object(E.a)((function(){return Object(Z.a)(e.updateRealtimeStateChanges(),e.listenToRealtimeStates(),e.listenToRemovedPeers())})))}))).subscribe())},e.prototype.listenToRealtimeStates=function(){var t=this;return this.realtimeStates.get(e.KEY_PREVIEW_CHANGES).pipe(Object(_.a)((function(e){if(C.P.get("DEBUG_PHOTON_PREVIEW_SYNC_RECEIVE")){var n=e.peerId;t.peerMap[n]||(t.peerMap[n]=new _e.a,t.dcs.addPreviewStream(n,t.peerMap[e.peerId])),t.peerMap[n].next(JSON.parse(e.value))}})))},e.prototype.updateRealtimeStateChanges=function(){var t=this;return this.dcs.getPreviewChanges().pipe(Object(aa.lodashThrottle)(this.previewChangeThrottle),Object(_.a)((function(n){C.P.get("DEBUG_PHOTON_PREVIEW_SYNC_EMIT")&&t.realtimeStates.set(e.KEY_PREVIEW_CHANGES,JSON.stringify(n))})))},e.prototype.listenToRemovedPeers=function(){var e=this;return this.realtimeStates.removedPeers().pipe(Object(_.a)((function(t){e.dcs.removePreviewStream(t),e.peerMap[t]&&(e.peerMap[t].complete(),delete e.peerMap[t])})))},e.KEY_PREVIEW_CHANGES="previewchanges",e.\u0275fac=function(t){return new(t||e)(k.pc(Zt.b),k.pc(jl.a),k.pc(C.Ib))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),Cp=n("kgIF"),wp=n("z3tU"),kp=n("nWGD"),Sp=n("aYRE"),Op=n("u80+"),Ep=n("c6sW");function _p(e,t){if(1&e&&(k.lc(0,"a",6),k.lc(1,"button",7),k.lc(2,"span",8),k.ed(3),k.kc(),k.kc(),k.kc()),2&e){var n=k.xc();k.Cc("routerLink",n.buttonLink),k.Sb(3),k.fd(n.buttonCaption)}}function Ip(e,t){if(1&e&&(k.lc(0,"a",9),k.lc(1,"button",7),k.lc(2,"span",8),k.ed(3),k.kc(),k.kc(),k.kc()),2&e){var n=k.xc();k.Cc("href",n.buttonLink,k.Sc),k.Sb(3),k.fd(n.buttonCaption)}}var Pp=function(e){return{"background-image":e}},Tp=function(){function e(){}return Object.defineProperty(e.prototype,"errorHeading",{get:function(){return"MESSAGES.DESKTOP.PERMISSION_ERROR_HEADING"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return"MESSAGES.DESKTOP.PERMISSION_ERROR_DESCRIPTION"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCaption",{get:function(){return"MESSAGES.DESKTOP.PERMISSION_ERROR_BUTTON"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonLink",{get:function(){return C.m.get("PLAN_PAGE_URL")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalLink",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return"https://creately-google-drive-integration.s3.amazonaws.com/google-drive-success-img-large.svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenColor",{get:function(){return"light"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo",{get:function(){return"./assets/images/logo-on-white-200X80.svg"},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Zb({type:e,selectors:[["desktop-permission-error"]],decls:10,vars:12,consts:[[1,"fullscreen-container","fx-cover","fx-center-all","fx-center",3,"ngStyle"],["alt","Creately",1,"logo","fx-floating",3,"src"],[1,"fullscreen-message"],["translate",""],[3,"routerLink",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],[3,"routerLink"],[1,"nu-btn-med","fullscreen-button"],["translate","",1,"dark-blue"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.gc(1,"img",1),k.lc(2,"div",2),k.lc(3,"h1",3),k.ed(4),k.kc(),k.lc(5,"p",3),k.ed(6),k.kc(),k.kc(),k.lc(7,"div"),k.cd(8,_p,4,2,"a",4),k.cd(9,Ip,4,2,"a",5),k.kc(),k.kc()),2&e&&(k.Xb("light","light"===t.screenColor)("hasImage",t.image),k.Cc("ngStyle",k.Hc(10,Pp,"url("+t.image+")")),k.Sb(1),k.Cc("src",t.logo,k.Sc),k.Sb(3),k.fd(t.errorHeading),k.Sb(2),k.fd(t.errorMessage),k.Sb(2),k.Cc("ngIf",!t.externalLink),k.Sb(1),k.Cc("ngIf",t.externalLink))},directives:[i.w,y.a,i.t,m.g],styles:[".fullscreen-container[_ngcontent-%COMP%]{color:#fff;padding:20px;flex-direction:column;background-color:#06263d}.fullscreen-container.light[_ngcontent-%COMP%]{color:#04263d;background-color:#fff}.fullscreen-container.hasImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:bottom;background-size:500px}.fullscreen-container.hasImage[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-bottom:100px}.fullscreen-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:16px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-top:15px;width:205px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]:first-of-type{margin-top:30px}.fullscreen-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:25px}.fullscreen-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:35px;margin-bottom:20px;font-family:lt_bold,Open Sans,sans-serif}.fullscreen-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:20px;left:20px;width:120px}.fullscreen-footer[_ngcontent-%COMP%]{opacity:.5;position:fixed;bottom:20px;max-width:400px}.fullscreen-footer[_ngcontent-%COMP%]  a{color:#fff;text-decoration:underline;font-size:16px}.fullscreen-footer[_ngcontent-%COMP%]  a:hover{font-weight:700}.fullscreen-message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;margin-top:50px}"]}),e}();function Ap(e,t){if(1&e&&(k.lc(0,"a",6),k.lc(1,"button",7),k.lc(2,"span",8),k.ed(3),k.kc(),k.kc(),k.kc()),2&e){var n=k.xc();k.Cc("routerLink",n.buttonLink),k.Sb(3),k.fd(n.buttonCaption)}}function Mp(e,t){if(1&e&&(k.lc(0,"a",9),k.lc(1,"button",7),k.lc(2,"span",8),k.ed(3),k.kc(),k.kc(),k.kc()),2&e){var n=k.xc();k.Cc("href",n.buttonLink,k.Sc),k.Sb(3),k.fd(n.buttonCaption)}}var Dp=function(e){return{"background-image":e}},jp=function(){function e(e){this.env=e}return Object.defineProperty(e.prototype,"errorHeading",{get:function(){return"LABELS.OOPS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return"MESSAGES.PERMISSION_ERROR_EDIT"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCaption",{get:function(){return"BUTTONS.GOTO_DIAGRAMS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenColor",{get:function(){return"dark"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo",{get:function(){return"./assets/images/logo-on-dark-200X80.svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonLink",{get:function(){return this.env.isDesktop?"/redirect/manage/recent":"/start/dashboard"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalLink",{get:function(){return!1},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(k.fc(C.F))},e.\u0275cmp=k.Zb({type:e,selectors:[["edit-permission-error"]],decls:10,vars:12,consts:[[1,"fullscreen-container","fx-cover","fx-center-all","fx-center",3,"ngStyle"],["alt","Creately",1,"logo","fx-floating",3,"src"],[1,"fullscreen-message"],["translate",""],[3,"routerLink",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],[3,"routerLink"],[1,"nu-btn-med","fullscreen-button"],["translate","",1,"dark-blue"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.gc(1,"img",1),k.lc(2,"div",2),k.lc(3,"h1",3),k.ed(4),k.kc(),k.lc(5,"p",3),k.ed(6),k.kc(),k.kc(),k.lc(7,"div"),k.cd(8,Ap,4,2,"a",4),k.cd(9,Mp,4,2,"a",5),k.kc(),k.kc()),2&e&&(k.Xb("light","light"===t.screenColor)("hasImage",t.image),k.Cc("ngStyle",k.Hc(10,Dp,"url("+t.image+")")),k.Sb(1),k.Cc("src",t.logo,k.Sc),k.Sb(3),k.fd(t.errorHeading),k.Sb(2),k.fd(t.errorMessage),k.Sb(2),k.Cc("ngIf",!t.externalLink),k.Sb(1),k.Cc("ngIf",t.externalLink))},directives:[i.w,y.a,i.t,m.g],styles:[".fullscreen-container[_ngcontent-%COMP%]{color:#fff;padding:20px;flex-direction:column;background-color:#06263d}.fullscreen-container.light[_ngcontent-%COMP%]{color:#04263d;background-color:#fff}.fullscreen-container.hasImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:bottom;background-size:500px}.fullscreen-container.hasImage[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-bottom:100px}.fullscreen-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:16px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-top:15px;width:205px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]:first-of-type{margin-top:30px}.fullscreen-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:25px}.fullscreen-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:35px;margin-bottom:20px;font-family:lt_bold,Open Sans,sans-serif}.fullscreen-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:20px;left:20px;width:120px}.fullscreen-footer[_ngcontent-%COMP%]{opacity:.5;position:fixed;bottom:20px;max-width:400px}.fullscreen-footer[_ngcontent-%COMP%]  a{color:#fff;text-decoration:underline;font-size:16px}.fullscreen-footer[_ngcontent-%COMP%]  a:hover{font-weight:700}.fullscreen-message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;margin-top:50px}"]}),e}();function Np(e,t){if(1&e&&(k.lc(0,"a",6),k.lc(1,"button",7),k.lc(2,"span",8),k.ed(3),k.kc(),k.kc(),k.kc()),2&e){var n=k.xc();k.Cc("routerLink",n.buttonLink),k.Sb(3),k.fd(n.buttonCaption)}}function Rp(e,t){if(1&e&&(k.lc(0,"a",9),k.lc(1,"button",7),k.lc(2,"span",8),k.ed(3),k.kc(),k.kc(),k.kc()),2&e){var n=k.xc();k.Cc("href",n.buttonLink,k.Sc),k.Sb(3),k.fd(n.buttonCaption)}}var Lp=function(e){return{"background-image":e}},Fp=function(){function e(){}return Object.defineProperty(e.prototype,"errorHeading",{get:function(){return"LABELS.OOPS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return"MESSAGES.PERMISSION_ERROR_VIEW"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonCaption",{get:function(){return"BUTTONS.GOTO_DIAGRAMS"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenColor",{get:function(){return"dark"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logo",{get:function(){return"./assets/images/logo-on-dark-200X80.svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonLink",{get:function(){return"/"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"externalLink",{get:function(){return!1},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Zb({type:e,selectors:[["view-permission-error"]],decls:10,vars:12,consts:[[1,"fullscreen-container","fx-cover","fx-center-all","fx-center",3,"ngStyle"],["alt","Creately",1,"logo","fx-floating",3,"src"],[1,"fullscreen-message"],["translate",""],[3,"routerLink",4,"ngIf"],["target","_blank",3,"href",4,"ngIf"],[3,"routerLink"],[1,"nu-btn-med","fullscreen-button"],["translate","",1,"dark-blue"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.gc(1,"img",1),k.lc(2,"div",2),k.lc(3,"h1",3),k.ed(4),k.kc(),k.lc(5,"p",3),k.ed(6),k.kc(),k.kc(),k.lc(7,"div"),k.cd(8,Np,4,2,"a",4),k.cd(9,Rp,4,2,"a",5),k.kc(),k.kc()),2&e&&(k.Xb("light","light"===t.screenColor)("hasImage",t.image),k.Cc("ngStyle",k.Hc(10,Lp,"url("+t.image+")")),k.Sb(1),k.Cc("src",t.logo,k.Sc),k.Sb(3),k.fd(t.errorHeading),k.Sb(2),k.fd(t.errorMessage),k.Sb(2),k.Cc("ngIf",!t.externalLink),k.Sb(1),k.Cc("ngIf",t.externalLink))},directives:[i.w,y.a,i.t,m.g],styles:[".fullscreen-container[_ngcontent-%COMP%]{color:#fff;padding:20px;flex-direction:column;background-color:#06263d}.fullscreen-container.light[_ngcontent-%COMP%]{color:#04263d;background-color:#fff}.fullscreen-container.hasImage[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:bottom;background-size:500px}.fullscreen-container.hasImage[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-bottom:100px}.fullscreen-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:16px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]{margin-top:15px;width:205px}.fullscreen-container[_ngcontent-%COMP%]   .fullscreen-button[_ngcontent-%COMP%]:first-of-type{margin-top:30px}.fullscreen-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:25px}.fullscreen-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:35px;margin-bottom:20px;font-family:lt_bold,Open Sans,sans-serif}.fullscreen-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{top:20px;left:20px;width:120px}.fullscreen-footer[_ngcontent-%COMP%]{opacity:.5;position:fixed;bottom:20px;max-width:400px}.fullscreen-footer[_ngcontent-%COMP%]  a{color:#fff;text-decoration:underline;font-size:16px}.fullscreen-footer[_ngcontent-%COMP%]  a:hover{font-weight:700}.fullscreen-message-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;margin-top:50px}"]}),e}(),Bp=n("1ahL"),Vp=n("RTAa"),zp=function(){return{event:"notification.panel.markRead.click"}};function Up(e,t){if(1&e){var n=k.mc();k.lc(0,"div",11),k.tc("click",(function(){return k.Pc(n),k.xc().markAsRead()})),k.lc(1,"span",12),k.ed(2,"TOOLTIPS.NOTIFICATION.MARK_AS_READ"),k.kc(),k.wc(),k.lc(3,"svg",13),k.gc(4,"use",14),k.kc(),k.lc(5,"svg",15),k.gc(6,"use",16),k.kc(),k.kc()}2&e&&k.Cc("trackAction",k.Gc(1,zp))}var Gp=function(e){return{cursor:e}},Hp=function(){function e(e,t,n,r,i){this.translateService=e,this.commandService=t,this.stateService=n,this.modelSubManager=r,this.diagramNavigation=i}return Object.defineProperty(e.prototype,"actorName",{get:function(){var e,t;return(null===(e=this.notification.actorInfo)||void 0===e?void 0:e.fullName)||(null===(t=this.notification.actorInfo)||void 0===t?void 0:t.email)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRead",{get:function(){return this.notification.seen},enumerable:!1,configurable:!0}),e.prototype.markAsRead=function(){this.commandService.dispatch(Qn.a.markGlobalNotificationRead,{notificationIds:[this.notification._id]})},e.prototype.openReferingResource=function(){this.notification.seen||this.markAsRead(),this.canNavigateToResource()&&("DIAGRAM"===this.notification.resourceType?this.navToSelectedDiagram(this.notification.resourceId):"PROJECT"===this.notification.resourceType&&this.openFolderpanel(this.notification.resourceId))},e.prototype.canNavigateToResource=function(){return!this.notification.key.endsWith(".delete")},e.prototype.navToSelectedDiagram=function(e){var t=this,n=this.stateService.get("CurrentDiagram");"start"!==n?n===e?this.stateService.get("InterfaceControlState")===yi.a.Edit&&this.stateService.set("SelectedFloatingPanel","quick-toolbar"):this.modelSubManager.stop(this.stateService.get("CurrentDiagram"),!0).pipe(Object(Qt.a)(1),Object(_.a)((function(){return t.navigateToDiagram(e)}))).subscribe():this.navigateToDiagram(e)},e.prototype.openFolderpanel=function(e){this.stateService.set("SelectedLeftPanel","folders"),this.stateService.set("FolderPanelSelectedTab","diagrams"),this.stateService.set("FolderPanelSelectedProject",e)},e.prototype.navigateToDiagram=function(e){var t=this.stateService.get("InterfaceControlState")===yi.a.View?"view":"edit";this.diagramNavigation.navigateToDiagram(e,t)},e.\u0275fac=function(t){return new(t||e)(k.fc(y.e),k.fc(C.B),k.fc(C.Ib),k.fc(mi.d),k.fc(Vp.a))},e.\u0275cmp=k.Zb({type:e,selectors:[["notification-list-item"]],inputs:{notification:"notification"},decls:15,vars:18,consts:[[1,"notification-list-item-container","user-img-show-indicator",3,"click"],[1,"notification-list-item-user-image"],["imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"],[1,"nu-icon","nu-icon-med","nu-ic-notification-action"],[1,"notification-list-item-inner",3,"ngStyle"],[1,"notification-list-item-notification-row"],[1,"notification-list-item-notification-email","fx-ellipsis","grey","nu-text-xsmall"],["class","notification-list-item-is-read","tooltip","","placement","bottom",3,"trackAction","click",4,"ngIf"],[1,"notification-list-item-notification-text-row"],[1,"notification-list-item-notification-text","nu-text-small",3,"innerHTML"],[1,"notification-list-item-notification-time","fx-ellipsis","grey"],["tooltip","","placement","bottom",1,"notification-list-item-is-read",3,"trackAction","click"],["translate","",1,"tooltip-content"],[1,"nu-icon","nu-icon-xsmall","nu-ic-ellipse"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-ellipse"],[1,"nu-icon","nu-icon-xsmall","nu-ic-notification-tick"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-notification-tick"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.tc("click",(function(){return t.openReferingResource()})),k.lc(1,"div",1),k.gc(2,"user-image",2),k.wc(),k.lc(3,"svg",3),k.gc(4,"use"),k.kc(),k.kc(),k.vc(),k.lc(5,"div",4),k.lc(6,"div",5),k.lc(7,"p",6),k.ed(8),k.kc(),k.cd(9,Up,7,2,"div",7),k.kc(),k.lc(10,"div",8),k.gc(11,"p",9),k.yc(12,"safeHTML"),k.lc(13,"p",10),k.ed(14),k.kc(),k.kc(),k.kc(),k.kc()),2&e&&(k.Xb("notification-list-item-container-seen",!t.isRead),k.Sb(2),k.Cc("hasImage",t.notification.actorInfo.hasImage)("imagePath",t.notification.actorInfo.image)("userColor",t.notification.actorInfo.getColor())("userInitials",t.notification.actorInfo.initial)("userRegistered",!0)("userOnlineStatus",!0),k.Sb(2),k.Tb("href",t.notification.actionSVG,null,"xlink"),k.Sb(1),k.Cc("ngStyle",k.Hc(16,Gp,t.canNavigateToResource()?"pointer":"default")),k.Sb(3),k.fd(t.actorName),k.Sb(1),k.Cc("ngIf",!t.isRead),k.Sb(2),k.Cc("innerHTML",k.zc(12,14,t.notification.translatedContentHTML),k.Qc),k.Sb(3),k.fd(t.notification.formatedTime))},directives:[Na.a,i.w,i.t,D.a,Qa.a,y.a],pipes:[bo.a],styles:[".notification-list-item-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1px;padding-left:10px}.notification-list-item-container-seen[_ngcontent-%COMP%]{background:#f6f8fa}.notification-list-item-inner[_ngcontent-%COMP%]{flex:1}.notification-list-item-notification-text[_ngcontent-%COMP%]{line-height:17px;max-width:260px;font-family:lt_regular,Open Sans,sans-serif;font-size:14px}.notification-list-item-notification-email[_ngcontent-%COMP%]{line-height:14px;max-width:280px}.notification-list-item-notification-time[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:12px;line-height:14px;font-family:lt_regular,Open Sans,sans-serif;width:66px;text-align:right}.notification-list-item-user-image[_ngcontent-%COMP%]{margin-right:15px;position:relative}.notification-list-item-remove[_ngcontent-%COMP%]{margin-right:15px;margin-left:55px}.notification-list-item-dropdown[_ngcontent-%COMP%]  .dropdown-container{min-width:100px}.notification-list-item-owner[_ngcontent-%COMP%]{width:138px}.notification-list-item-notification-row[_ngcontent-%COMP%]{align-items:center;padding-top:17px;padding-bottom:5px}.notification-list-item-notification-row[_ngcontent-%COMP%], .notification-list-item-notification-text-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;padding-right:10px}.notification-list-item-notification-text-row[_ngcontent-%COMP%]{align-items:baseline;padding-bottom:17px;overflow-wrap:break-word}.notification-list-item-is-read[_ngcontent-%COMP%]{height:14px}.notification-list-item-is-read[_ngcontent-%COMP%]   .nu-ic-notification-tick[_ngcontent-%COMP%], .notification-list-item-is-read[_ngcontent-%COMP%]:hover   .nu-ic-ellipse[_ngcontent-%COMP%]{display:none}.notification-list-item-is-read[_ngcontent-%COMP%]:hover   .nu-ic-notification-tick[_ngcontent-%COMP%]{display:block}.nu-ic-notification-action[_ngcontent-%COMP%]{position:absolute;top:10px;left:15px}"]}),e}(),Yp=n("Lzmu"),qp=n("7N9q");function Wp(e,t){1&e&&(k.lc(0,"div",8),k.ed(1," GLOBAL_SEARCH.DOCUMENT_SEARCH_NO_RESULTS "),k.kc())}function Xp(e,t){1&e&&k.gc(0,"div",18)}function Kp(e,t){if(1&e&&(k.lc(0,"div",15),k.cd(1,Xp,1,0,"div",16),k.lc(2,"p",17),k.ed(3),k.kc(),k.kc()),2&e){var n=k.xc(),r=n.first,i=n.$implicit;k.Sb(1),k.Cc("ngIf",!r),k.Sb(2),k.fd(i.title)}}function Zp(e,t){if(1&e&&(k.lc(0,"div"),k.lc(1,"p",19),k.ed(2),k.kc(),k.kc()),2&e){var n=k.xc().$implicit;k.Sb(2),k.gd("",n.path,":")}}var $p=function(e){return{"document-item-selection":e}};function Qp(e,t){if(1&e){var n=k.mc();k.lc(0,"div",9),k.cd(1,Kp,4,2,"div",10),k.lc(2,"div",11),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc(2).panToShape(e.action)})),k.cd(3,Zp,3,1,"div",12),k.lc(4,"p",13),k.gc(5,"span",14),k.kc(),k.kc(),k.kc()}if(2&e){var r=t.$implicit,i=t.index,a=k.xc(2);k.Sb(1),k.Cc("ngIf",a.shouldDisplayDiagramName(r)),k.Sb(1),k.Cc("ngClass",k.Hc(4,$p,i===a.selectedSearchResultsIndex)),k.Sb(1),k.Cc("ngIf",""!==r.path),k.Sb(2),k.Cc("innerHTML",r.text,k.Qc)}}var Jp=function(){return{scrollYMarginOffset:1}};function eh(e,t){if(1&e&&(k.lc(0,"div",2),k.lc(1,"div",3),k.cd(2,Wp,2,0,"div",4),k.kc(),k.lc(3,"perfect-scrollbar",5),k.lc(4,"div",6),k.cd(5,Qp,6,6,"div",7),k.kc(),k.kc(),k.kc()),2&e){var n=t.ngIf;k.Sb(2),k.Cc("ngIf",0===n.length),k.Sb(1),k.Cc("config",k.Gc(3,Jp)),k.Sb(2),k.Cc("ngForOf",n)}}var th=function(){function e(e,t,n,r,i){this.searchService=e,this.state=t,this.linkService=n,this.translateService=r,this.ref=i,this.searchResults=new I.a([]),this.selectedSearchResultsIndex=-1,this.subs=[],this.lastDiagramId="",this.subs=[]}return e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.state.changes("GlobalSearchText").pipe(Object(E.a)((function(t){return t&&t.searchText?(e.resetSelectedItem(),e.doSearch(t.searchText)):Object(Oe.a)({})}))).subscribe(),this.listenToArrowKeys().subscribe(),this.listenToEnterKey().subscribe())},e.prototype.shouldDisplayDiagramName=function(e){return e.diagramId!==this.lastDiagramId&&(this.lastDiagramId=e.diagramId,!0)},e.prototype.panToShape=function(e){this.linkService.navigate(he.K.fromUrl(e))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.listenToArrowKeys=function(){var e=this;return Object(P.a)(window,"keydown").pipe(Object(je.a)((function(e){return e.keyCode===pe.j.ArrowDown||e.keyCode===pe.j.ArrowUp})),Object(_.a)((function(t){-1===e.selectedSearchResultsIndex?e.searchResults.value.length>0&&e.selectedSearchResultsIndex++:t.keyCode===pe.j.ArrowDown?e.navigateToNextItem():t.keyCode===pe.j.ArrowUp&&e.navigateToPreviousItem(),e.ref.markForCheck();var n=e.searchResults.value[e.selectedSearchResultsIndex];n&&e.panToShape(n.action)})))},e.prototype.listenToEnterKey=function(){var e=this;return Object(P.a)(window,"keydown").pipe(Object(je.a)((function(e){return e.keyCode===pe.j.Enter})),Object(_.a)((function(t){e.selectedSearchResultsIndex>-1&&e.state.set("GlobalSearch",{state:bi.c.CLOSE})})))},e.prototype.resetSelectedItem=function(){this.selectedSearchResultsIndex=-1,this.lastDiagramId=""},e.prototype.navigateToNextItem=function(){this.selectedSearchResultsIndex<this.searchResults.value.length-1&&this.selectedSearchResultsIndex++},e.prototype.navigateToPreviousItem=function(){this.selectedSearchResultsIndex>0&&this.selectedSearchResultsIndex--},e.prototype.doSearch=function(e){var t=this;return this.searchService.search(e,["document"],{keys:["text"],limit:10}).pipe(Object(_.a)((function(n){var r=JSON.parse(JSON.stringify(n)),i=t.adjustTextToFocus(r,e),a=t.highlightKeywordsInText(i,e),o=t.updateCurrentDiagramNames(a);t.searchResults.next(o)})))},e.prototype.updateCurrentDiagramNames=function(e){var t=this;return e=e.map((function(e){return e.diagramId===t.state.get("CurrentDiagram")&&(e.title=t.translateService.instant("LABELS.CURRENT_WORKSPACE")),e}))},e.prototype.adjustTextToFocus=function(e,t){var n=this;return e=e.map((function(e){return e.text=n.textAdjuster(e.text,t,7),e}))},e.prototype.textAdjuster=function(e,t,n){var r=e.indexOf(t);if(r>-1){var i=r+t.length,a=e.substring(i,e.length),o=e.substring(0,r).split(" "),s=o.length;if(s>n){for(var c=s-n,l="...",u=c=c>n?n:c;u>0;u--)l=l+o[s-u]+" ";e=l+" "+t+a}}return e},e.prototype.highlightKeywordsInText=function(e,t){var n=new RegExp(t,"gi");return e.map((function(e){return e.text=e.text.replace(n,"<span class='yellow'>"+t+"</span>"),e})),e},e.\u0275fac=function(t){return new(t||e)(k.fc(Cn.a),k.fc(C.Ib),k.fc(Ca.a),k.fc(y.e),k.fc(k.j))},e.\u0275cmp=k.Zb({type:e,selectors:[["document-search"]],decls:3,vars:3,consts:[[1,"fx-pointer-events-auto"],["class","search-results-dropdown-results",4,"ngIf"],[1,"search-results-dropdown-results"],[1,"document-search-result-header"],["translate","",4,"ngIf"],[1,"search-result-scrollbar",3,"config"],[1,"search-result-content"],["class","search-result-shapes",4,"ngFor","ngForOf"],["translate",""],[1,"search-result-shapes"],["class","document-search-title-container",4,"ngIf"],[1,"document-search-item-container",3,"ngClass","click"],[4,"ngIf"],[1,"document-line-item-text"],[3,"innerHTML"],[1,"document-search-title-container"],["class","separator-line",4,"ngIf"],[1,"document-search-title"],[1,"separator-line"],[1,"document-line-item-path"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.cd(1,eh,6,4,"div",1),k.yc(2,"async"),k.kc()),2&e&&(k.Sb(1),k.Cc("ngIf",k.zc(2,1,t.searchResults)))},directives:[i.t,j.b,i.s,y.a,i.q],pipes:[i.b],styles:[".document-line-item-text[_ngcontent-%COMP%]{display:block;align-items:center;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;font-weight:500}.document-line-item-text[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}.document-line-item-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex:1}.document-line-item-text[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.document-line-item-path[_ngcontent-%COMP%]{padding-right:5px}.document-search-item-container[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;padding:2px 5px;display:flex;flex-direction:row;justify-content:start}.document-search-item-container[_ngcontent-%COMP%]:hover{background:rgba(81,192,170,.2);border-radius:4px;padding-top:2px;padding-bottom:2px}.separator-line[_ngcontent-%COMP%]{position:absolute;width:600px;height:0;margin-top:0;opacity:1%;border:1px solid #eaeaea}.document-search-title[_ngcontent-%COMP%]{padding-top:10px;font-size:12px;color:#7e7e7e;font-weight:600}.document-item-selection[_ngcontent-%COMP%]{background:rgba(81,192,170,.2);border-radius:4px;padding-top:2px;padding-bottom:2px}.document-search-title-container[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}.document-search-result-header[_ngcontent-%COMP%]{margin:5px}"],changeDetection:0}),e}(),nh=n("T4Sa"),rh=n("61p6"),ih=n("0itG"),ah=n("j1Bk"),oh=n("UCH/"),sh=n("wvAw"),ch=n("tLVu"),lh=n("2DR2"),uh=n("pTJA"),ph=n("okSW"),hh=n("XrO3"),dh=n("9pEM");function fh(e,t){1&e&&(k.lc(0,"div",8),k.ed(1,"SHAPE_DATA.COMMENTS.NO_COMMENTS"),k.kc())}function gh(e,t){if(1&e){var n=k.mc();k.lc(0,"comment-thread-item",13),k.tc("itemClicked",(function(){k.Pc(n);var e=k.xc().$implicit;return k.xc(2).handleCommentItemClick(e.parentComment)}))("replyClicked",(function(){k.Pc(n);var e=k.xc().$implicit;return k.xc(2).handleCommentItemClick(e.parentComment)})),k.kc()}if(2&e){var r=k.xc().$implicit;k.Cc("comment",r.latestComment)("commenter",r.threadCommenter)("threadCommentor",r.previousThreadCommenter)("threadCount",r.commentCount)("showControls",!0)("showReplayControl",!0)}}function mh(e,t){if(1&e){var n=k.mc();k.lc(0,"comment-thread-item",13),k.tc("itemClicked",(function(){k.Pc(n);var e=k.xc().$implicit;return k.xc(2).handleCommentItemClick(e.parentComment)}))("replyClicked",(function(){k.Pc(n);var e=k.xc().$implicit;return k.xc(2).handleCommentItemClick(e.parentComment)})),k.kc()}if(2&e){var r=k.xc().$implicit;k.Cc("comment",r.parentComment)("commenter",r.threadCommenter)("threadCommentor",r.previousThreadCommenter)("threadCount",r.commentCount)("showControls",!0)("showReplayControl",!0)}}function vh(e,t){if(1&e&&(k.lc(0,"div",11),k.cd(1,gh,1,6,"comment-thread-item",12),k.cd(2,mh,1,6,"comment-thread-item",12),k.kc()),2&e){var n=t.$implicit,r=k.xc(2);k.Xb("active",n.selected),k.Tb("data-thread-id",null==n||null==n.parentComment?null:n.parentComment.id),k.Sb(1),k.Cc("ngIf",!r.isThreadOpen(n.parentComment.id)),k.Sb(1),k.Cc("ngIf",r.isThreadOpen(n.parentComment.id))}}function bh(e,t){if(1&e&&(k.lc(0,"div",9),k.cd(1,vh,3,5,"div",10),k.kc()),2&e){var n=t.ngIf;k.Sb(1),k.Cc("ngForOf",n)}}function yh(e,t){if(1&e&&(k.lc(0,"div",17),k.lc(1,"label"),k.ed(2),k.yc(3,"async"),k.kc(),k.kc()),2&e){var n=k.xc(2);k.Sb(2),k.gd(" ",k.zc(3,1,n.resolvedLabel)," ")}}function xh(e,t){if(1&e){var n=k.mc();k.lc(0,"div",18),k.lc(1,"comment-thread-item",19),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc(2).handleCommentItemClick(e.parentComment)})),k.kc(),k.kc()}if(2&e){var r=t.$implicit;k.Tb("data-thread-id",null==r||null==r.parentComment?null:r.parentComment.id),k.Sb(1),k.Cc("comment",r.latestComment)("commenter",r.threadCommenter)("threadCommentor",r.previousThreadCommenter)("resolvedCommentor",r.resolvedCommentor)("threadCount",r.commentCount)("showControls",!1)}}function Ch(e,t){if(1&e&&(k.lc(0,"div",14),k.cd(1,yh,4,3,"div",15),k.cd(2,xh,2,7,"div",16),k.kc()),2&e){var n=t.ngIf;k.Sb(1),k.Cc("ngIf",n.length>0),k.Sb(1),k.Cc("ngForOf",n)}}var wh=function(){return["Enter"]},kh=function(e){function t(t,n,r,i,a,o,s){var c=e.call(this,t,n,r,i,a,o,s)||this;return c.commands=t,c.state=n,c.datastore=r,c.userLocator=i,c.translateService=a,c.ll=o,c.cursorGen=s,c.parentSelectorPrefix=".shape-data-editor-comments-comment-item",c.noComments=new I.a(!0),c}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"shapeId",{get:function(){return this.state.get("Selected")[0]},enumerable:!1,configurable:!0}),t.prototype.isThreadOpen=function(e){var t=this.state.get("CommentThreadData");return t.visible&&t.threadId===e},t.prototype.addNewComment=function(e){if(e=e.trim()){var t=C.sb.commentId();this.commands.dispatch(vi.a.addComment,{comment:{id:t,comment:e,shapeId:this.shapeId},close:!0})}},t.prototype.handleCommentItemClick=function(e){var t=this.state.get("CommentThreadData"),n={visible:!0,threadId:e.id,comments:[e],parentSelector:this.parentSelectorPrefix+'[data-thread-id="'+e.id+'"]'};t.parentSelector===n.parentSelector&&(n.visible=!t.visible),this.state.set("CommentThreadData",n)},t.prototype.init=function(){var e=this;this.subs=[],this.subs.push(this.state.changes("CurrentDiagram").pipe(Object(_.a)((function(t){e.diagramId=t,e.unresolvedComments=e.getShapeDataEditorOpen().pipe(Object(E.a)((function(){return e.getUnresolvedComments()}))),e.resolvedComments=e.getShapeDataEditorOpen().pipe(Object(E.a)((function(){return e.getResolvedComments()}))),e.resolvedLabel=e.getShapeDataEditorOpen().pipe(Object(E.a)((function(){return e.getResolvedLabel()})))}))).subscribe()),this.noCommentsSubscribe()},t.prototype.noCommentsSubscribe=function(){var e=this;this.subs.push(Object(cn.b)(this.unresolvedComments,this.resolvedComments).pipe(Object(Te.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return n&&n.length>0||i&&i.length>0})),Object(Jt.a)()).subscribe((function(t){e.noComments.next(!t)})))},t.prototype.getResolvedComments=function(){var e=this;return this.datastore.find(Da.a,{diagramId:this.diagramId,shapeId:this.shapeId,parentId:null,resolved:{$exists:!0}}).pipe(Object(E.a)((function(t){return e.getCommentList(t)})),Object(E.a)((function(t){return t.length>0?e.updateCommentWithResolvedUser(t):Object(Oe.a)([])})))},t.prototype.getUnresolvedComments=function(){var e=this;return this.datastore.find(Da.a,{diagramId:this.diagramId,shapeId:this.shapeId,parentId:null,$and:[{$or:[{resolved:null},{resolved:!1}]}]}).pipe(Object(E.a)((function(t){return e.getCommentList(t)})),Object(E.a)((function(t){return e.updateSelectedProperty(t)})))},t.prototype.getShapeDataEditorOpen=function(){var e=this;return this.state.changes("Selected").pipe(Object(je.a)((function(e){return 1===e.length})),Object(E.a)((function(){return e.state.changes("CommentThreadData").pipe(Object(je.a)((function(e){return!e.visible})))})))},t.prototype.getCommentList=function(e){var t=this;return(e=Object(tn.orderBy)(e,["lastUpdatedTime"],["asc"]))&&e.length>0?cn.b.apply(void 0,Object(r.j)(e.map((function(e){return t.getCommentItem(e)})))).pipe(Object(Te.a)((function(e){return e=e.filter((function(e){return!e.latestComment.deleted}))}))):Object(Oe.a)([])},t.prototype.getCommentItem=function(e){var t=this;return this.datastore.find(Da.a,{diagramId:this.diagramId,$or:[{deleted:null},{deleted:!1}],parentId:e.id},{sort:{lastUpdated:1}}).pipe(Object(Qt.a)(1),Object(E.a)((function(n){n.unshift(e);var i=t.getCommenterIds(n,2);return cn.b.apply(void 0,Object(r.j)(i.map((function(e){return t.userLocator.getUserInfo(e).pipe(Object(je.a)((function(e){return!!e})),Object(Qt.a)(1))})))).pipe(Object(Te.a)((function(r){return t.buildCommentItem(r[r.length-1],r[r.length-2],n.length,e,n[n.length-1],n[n.length-1].lastUpdated)})))})))},t.\u0275fac=function(e){return new(e||t)(k.fc(C.B),k.fc(C.Ib),k.fc(tr.b),k.fc(fe.x),k.fc(y.e),k.fc(sn.a),k.fc(oa.a))},t.\u0275cmp=k.Zb({type:t,selectors:[["shape-data-editor-comments"]],features:[k.Pb],decls:13,vars:19,consts:[[1,"shape-data-editor-comments-container"],["container",""],["class","shape-data-editor-comments-no-comments","translate","",4,"ngIf"],["class","shape-data-editor-comments-comments-container unresolved-comments",4,"ngIf"],["class","shape-data-editor-comments-comments-container resolved-comments",4,"ngIf"],[1,"comment-thread-input","main-comment-input"],[1,"comment-thread-input-box"],[3,"placeholder","clearOnSubmit","submitOnCode","submitOnBlur","multiLined","autoFocus","submit"],["translate","",1,"shape-data-editor-comments-no-comments"],[1,"shape-data-editor-comments-comments-container","unresolved-comments"],["class","shape-data-editor-comments-comment-item unresolved-comment",3,"active",4,"ngFor","ngForOf"],[1,"shape-data-editor-comments-comment-item","unresolved-comment"],[3,"comment","commenter","threadCommentor","threadCount","showControls","showReplayControl","itemClicked","replyClicked",4,"ngIf"],[3,"comment","commenter","threadCommentor","threadCount","showControls","showReplayControl","itemClicked","replyClicked"],[1,"shape-data-editor-comments-comments-container","resolved-comments"],["class","shape-data-editor-comments-padding fx-margin-bottom-10",4,"ngIf"],["class","shape-data-editor-comments-comment-item resolved-comment",4,"ngFor","ngForOf"],[1,"shape-data-editor-comments-padding","fx-margin-bottom-10"],[1,"shape-data-editor-comments-comment-item","resolved-comment"],[3,"comment","commenter","threadCommentor","resolvedCommentor","threadCount","showControls","click"]],template:function(e,t){1&e&&(k.lc(0,"perfect-scrollbar"),k.lc(1,"div",0,1),k.cd(3,fh,2,0,"div",2),k.yc(4,"async"),k.cd(5,bh,2,1,"div",3),k.yc(6,"async"),k.cd(7,Ch,3,2,"div",4),k.yc(8,"async"),k.lc(9,"div",5),k.lc(10,"div",6),k.lc(11,"text-input",7),k.tc("submit",(function(e){return t.addNewComment(e)})),k.yc(12,"translate"),k.kc(),k.kc(),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(3),k.Cc("ngIf",k.zc(4,10,t.noComments)),k.Sb(2),k.Cc("ngIf",k.zc(6,12,t.unresolvedComments)),k.Sb(2),k.Cc("ngIf",k.zc(8,14,t.resolvedComments)),k.Sb(4),k.Dc("placeholder",k.zc(12,16,"PLACEHOLDERS.COMMENT")),k.Cc("clearOnSubmit",!0)("submitOnCode",k.Gc(18,wh))("submitOnBlur",!0)("submitOnBlur",!0)("multiLined",!0)("autoFocus",!0))},directives:[j.b,i.t,ae.a,y.a,i.s,ja.a],pipes:[i.b,y.d],styles:[".panel-heading[_ngcontent-%COMP%]{margin-bottom:10px}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%], .shape-data-editor-comments-padding[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.shape-data-editor-comments-container[_ngcontent-%COMP%]{width:255px;height:100%}.shape-data-editor-comments-no-comments[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:14px;line-height:20px;color:#6a7172;margin-left:10px}.shape-data-editor-comments-default-msg[_ngcontent-%COMP%]{line-height:20px}.shape-data-editor-comments-default-msg[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-bottom:-3px}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%]{margin-bottom:5px;cursor:pointer}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%]:hover{background-color:#f2f5fb}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%]  .cti{padding-left:0;padding-right:0}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%]  .cti *{cursor:pointer}.shape-data-editor-comments-comment-item[_ngcontent-%COMP%]  comment-thread-item{margin-bottom:5px;cursor:pointer;background:#fff;border:.5px solid #c3c3de;box-sizing:border-box;box-shadow:0 2px 2px rgba(195,195,222,.25);border-radius:3px;position:relative;display:block;padding:2px 6px}.shape-data-editor-comments-comment-item.active[_ngcontent-%COMP%]{background-color:#f2f5fb}.resolved-comment[_ngcontent-%COMP%]  .cti *{color:#9aa0a9}.resolved-comment[_ngcontent-%COMP%]  .user-img-container.active .user-img-inner:after{background:hsla(0,0%,100%,.7)!important}.shape-data-editor-comments-comments-container[_ngcontent-%COMP%]{margin-bottom:15px}.comment-panel-toggle-button-container[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;margin-bottom:15px;margin-top:15px}.comment-panel-toggle-button-container[_ngcontent-%COMP%]  label{line-height:18px}.shape-data-editor-comments-help-image[_ngcontent-%COMP%]{max-width:100%}.shape-data-editor-comments-help-msg[_ngcontent-%COMP%]{line-height:20px}.shape-data-editor-comments-help-msg[_ngcontent-%COMP%]   .fx-block[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t}(nh.a),Sh=n("RrMq"),Oh=n("EePP"),Eh=["richTextAreaView"],_h=["viewerContainer"],Ih=function(e){return{"fx-hidden":e}},Ph=function(e){return{tiptap:e}},Th=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n)||this;return o.componentFactoryResolver=t,o.injector=n,o.dtov=r,o.ll=i,o.state=a,o.subs=[],o.showComponent=new I.a(!1),o.activeEditor=new I.a(""),o}return Object(r.e)(t,e),t.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.state.changes("ShapeDataViewer").pipe(Object(E.a)((function(t){return t.open?(e.showComponent.next(!0),t.shapeId?e.initComponent(t.shapeId):Object(Oe.a)({})):(e.richTextAreaView.clear(),e.tipTapEditor=null,e.richTextEditorUIC=null,e.showComponent.next(!1),Object(Oe.a)({}))}))).subscribe())},t.prototype.handlerMouseEnter=function(){var e=this.state.get("ShapeDataViewer").shapeId;this.state.set("ShapeDataViewer",{open:!0,shapeId:e,src:"viewer"})},t.prototype.handlerMouseLeave=function(){this.state.set("ShapeDataViewer",{open:!1,src:"viewer"})},t.prototype.initComponent=function(e){var t=this;return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(_.a)((function(n){var r=n.shapes[e];t.clearEditor();var i=r.getDataItems(n);i.description&&i.description.value&&"string"==typeof i.description.value?t.updateTiptapText(n,r):i&&i.dataitemsttings&&t.updateTextArea(n,r)})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.createTextArea=function(){var e=this.makeComponent(Xr.a);this.richTextEditorUIC=e.instance,this.richTextEditorUIC.enableUploadOptions=!1,this.richTextEditorUIC.disableResizeOptions(),this.insert(this.richTextAreaView,e),e.changeDetectorRef.detectChanges()},t.prototype.createTiptapTextArea=function(){var e=this.makeComponent(Tn.a);this.tipTapEditor=e.instance,this.tipTapEditor.viewOnly=!0,this.tipTapEditor.diagramId=this.state.get("CurrentDiagram"),this.tipTapEditor.shapeIdSubject.next(this.state.get("ShapeDataViewer").shapeId),this.insert(this.richTextAreaView,e),e.changeDetectorRef.detectChanges()},t.prototype.updateTextArea=function(e,t){this.activeEditor.next("quill"),this.richTextEditorUIC||this.createTextArea(),this.richTextEditorUIC.quill.enable(!0);var n=t.getDataItems(e),r=Object(tn.cloneDeep)(n.dataitemsttings);this.replaceValues(r,e,t),this.richTextEditorUIC.quill.setContents(r.value),this.richTextEditorUIC.quill.enable(!1);var i=t.bounds,a=this.viewerContainer.nativeElement;a.style.left=this.dtov.x(i.x+i.width)+"px",a.style.top=this.dtov.y(i.bottom-10)+"px"},t.prototype.updateTiptapText=function(e,t){this.activeEditor.next("tiptap"),this.tipTapEditor||this.createTiptapTextArea(),this.tipTapEditor.editor.commands.clearContent();var n=t.getDataItems(e);this.tipTapEditor.editor.commands.setContent(n.description.value);var r=t.bounds,i=this.viewerContainer.nativeElement;i.style.left=this.dtov.x(r.x+r.width)+"px",i.style.top=this.dtov.y(r.bottom-10)+"px"},t.prototype.clearEditor=function(){this.richTextEditorUIC&&this.richTextEditorUIC.quill.setContents([]),this.tipTapEditor&&this.tipTapEditor.editor.commands.clearContent()},t.prototype.replaceValues=function(e,t,n){var i,a;Object(tn.values)(e.value.ops||[]).filter((function(e){return e.insert})).forEach((function(e){if("string"==typeof e.insert){var r=e.insert.replace(/({)?{{[^{}]*}}(?!})/g,(function(e,r,i){var o=e.replace(/{{/g,"").replace(/}}/g,""),s=n.getDataItems(t),c=Object(tn.values)(s).find((function(e){return e.label===o}))||{};if(c.type===pe.c.BINARY)return c.value?"True":"False";if(c.type===pe.c.OPTION_LIST)return c.value;if(c.type===pe.c.STRING||c.type===pe.c.NUMBER)return c.value;if("users"===c.type)return((c.value||{}).people||[]).map((function(e){return e.fullName||e.email})).join(", ");if("tags"===c.type)return(c.value||[]).map((function(e){return e.name})).join(", ");if("date"===c.type&&c.value){var l=new Date(c.value);return l.getMonth()+1+"/"+l.getDate()+"/"+l.getFullYear()}return c.type===pe.c.STRING_HTML&&(a=c.value),""}));e.insert=r}})),e.value&&e.value.ops&&a&&(i=e.value.ops).push.apply(i,Object(r.j)(a.ops))},t.\u0275fac=function(e){return new(e||t)(k.fc(k.m),k.fc(k.C),k.fc(_i.a),k.fc(sn.a),k.fc(C.Ib))},t.\u0275cmp=k.Zb({type:t,selectors:[["shape-data-viewer"]],viewQuery:function(e,t){var n;(1&e&&(k.jd(Eh,!0,k.hb),k.jd(_h,!0,k.r)),2&e)&&(k.Lc(n=k.uc())&&(t.richTextAreaView=n.first),k.Lc(n=k.uc())&&(t.viewerContainer=n.first))},features:[k.Pb],decls:9,vars:10,consts:[[1,"shape-data-viewer-container"],["viewerContainer",""],[3,"ngClass"],[3,"ngClass","mouseenter","mouseleave"],["richTextAreaView",""]],template:function(e,t){1&e&&(k.lc(0,"div",0,1),k.lc(2,"div",2),k.yc(3,"async"),k.lc(4,"div",3),k.tc("mouseenter",(function(){return t.handlerMouseEnter()}))("mouseleave",(function(){return t.handlerMouseLeave()})),k.yc(5,"async"),k.gc(6,"div",null,4),k.kc(),k.kc(),k.gc(8,"div"),k.kc()),2&e&&(k.Sb(2),k.Cc("ngClass",k.Hc(6,Ih,!k.zc(3,2,t.showComponent))),k.Sb(2),k.Cc("ngClass",k.Hc(8,Ph,"tiptap"===k.zc(5,4,t.activeEditor))))},directives:[i.q],pipes:[i.b],styles:[".shape-data-viewer-container[_ngcontent-%COMP%]{z-index:1000;position:relative;display:inline-block}.shape-data-viewer-container[_ngcontent-%COMP%]  .ql-container{position:absolute;display:inline-block;background-color:#fff;min-width:200px;max-width:500px;border-radius:4px;box-shadow:0 0 2px #8e8e8e;padding:12px}.shape-data-viewer-container[_ngcontent-%COMP%]  .ql-editor{max-height:400px;min-height:unset!important;padding-right:10px}.shape-data-viewer-container[_ngcontent-%COMP%]  span.file-embed-option[data-id=remove]{display:none!important}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap-editor{position:absolute;display:inline-block;background-color:#fff;min-width:200px;max-width:500px;border-radius:4px;box-shadow:0 0 2px #8e8e8e;padding:12px;max-height:400px;overflow:scroll}.shape-data-viewer-container[_ngcontent-%COMP%]  .more-options{display:none!important}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap-editor>div{padding-right:15px;pointer-events:none}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap-editor{min-height:unset!important}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap-editor editable-label{display:block!important}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap rich-text-editor-uic, .shape-data-viewer-container[_ngcontent-%COMP%]  tiptap-editor-component{display:none}.shape-data-viewer-container[_ngcontent-%COMP%]  .tiptap tiptap-editor-component{display:block!important}"],changeDetection:0}),t}(w.k),Ah=n("TAUj"),Mh=n("T6P6"),Dh=n("34tD"),jh=n("BQCR"),Nh=n("J8oI"),Rh=n("2ZsA"),Lh=n("wuOO"),Fh=n("ujvC"),Bh=function(e){return{event:e}};function Vh(e,t){if(1&e&&(k.lc(0,"button",1),k.tc("click",(function(){return t.$implicit.clickHandler()})),k.ed(1),k.kc()),2&e){var n=t.$implicit;k.Xb("secondary","outlined"===n.style)("primary","primary"===n.style),k.Cc("trackAction",k.Hc(7,Bh,n.id)),k.Tb("data-testid",n.testId),k.Sb(1),k.gd(" ",n.label,"\n")}}var zh=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Zb({type:e,selectors:[["tour-buttons"]],inputs:{buttons:"buttons"},decls:1,vars:1,consts:[["class","tour-button nu-btn-med","translate","",3,"trackAction","secondary","primary","click",4,"ngFor","ngForOf"],["translate","",1,"tour-button","nu-btn-med",3,"trackAction","click"]],template:function(e,t){1&e&&k.cd(0,Vh,2,9,"button",0),2&e&&k.Cc("ngForOf",t.buttons)},directives:[i.s,y.a,Qa.a],styles:[".tour-button[_ngcontent-%COMP%]{min-width:100px;padding-left:20px;padding-right:20px}"],changeDetection:0}),e}();function Uh(e,t){if(1&e){var n=k.mc();k.lc(0,"span",2),k.wc(),k.lc(1,"svg",3),k.tc("click",(function(){k.Pc(n);var e=t.$implicit;return k.xc().navButtonClicked.next(e.id)})),k.gc(2,"use"),k.kc(),k.kc()}if(2&e){var r=t.$implicit,i=k.xc();k.Sb(1),k.Xb("selected",r.id===i.selected),k.Sb(1),k.Tb("href",i.iconURL(r.paginationSymbol),null,"xlink")}}var Gh=function(){function e(){this.navButtonClicked=new k.t}return e.prototype.iconURL=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Zb({type:e,selectors:[["tour-pagination"]],inputs:{cardList:"cardList",selected:"selected"},outputs:{navButtonClicked:"navButtonClicked"},decls:2,vars:1,consts:[[1,"tour-pagination"],["class","pagination-button",4,"ngFor","ngForOf"],[1,"pagination-button"],[1,"nu-icon",3,"click"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.cd(1,Uh,3,3,"span",1),k.kc()),2&e&&(k.Sb(1),k.Cc("ngForOf",t.cardList))},directives:[i.s],styles:[".pagination-button[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}.pagination-button[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#61a15e}.pagination-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#dcdcdc}.pagination-button[_ngcontent-%COMP%]   svg.selected[_ngcontent-%COMP%]{color:#40b29e}"],changeDetection:0}),e}(),Hh=function(){function e(e,t){this.connection=e,this.commandService=t}return e.prototype.start=function(){this.userUpdateSubscription||(this.userUpdateSubscription=this.listenToUserUpdateMessages().subscribe())},e.prototype.listenToUserUpdateMessages=function(){var e=this;return this.connection.inStream.pipe(Object(je.a)((function(e){return"sub"===e.type&&"update"===e.msg&&"User"===e.sub})),Object(E.a)((function(t){return e.commandService.dispatch(fe.u.updateUserPermission,t.ppld)})))},e.\u0275fac=function(t){return new(t||e)(k.pc(x.g),k.pc(C.B))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}(),Yh=n("o+Mh"),qh=n("onas"),Wh=n("6IEn"),Xh=n("B1tl"),Kh=n("CdCz"),Zh=n("k/7B"),$h=n("r7/9"),Qh=n("G3/p"),Jh=n("qlkn"),ed=n("nwI5"),td=n("f0nv"),nd=n("z3n9"),rd=n("SXG+"),id=n("4C8c"),ad=n("1pbQ"),od=["floatingCard"];function sd(e,t){if(1&e){var n=k.mc();k.lc(0,"div",1,2),k.lc(2,"div",3),k.tc("click",(function(){return k.Pc(n),k.xc().closeFloatingMedia()})),k.wc(),k.lc(3,"svg",4),k.gc(4,"use",5),k.kc(),k.kc(),k.vc(),k.lc(5,"media-card",6),k.tc("click",(function(){return k.Pc(n),k.xc().closeFloatingMedia()})),k.kc(),k.gc(6,"div",7),k.kc()}if(2&e){var r=k.xc();k.Sb(5),k.Cc("card",r.card)("showHeading",!1)}}var cd=function(){function e(e,t,n){this.state=e,this.translate=t,this.commandSvc=n,this.showHeading=!1,this.subs=[],this.animationStartDelay=6e4,this.animationDuration=100,this.wiggleDelay=61e3,this.numBounces=5,this.showFloatingMediaCard=new I.a(!1)}return e.prototype.ngOnInit=function(){var e=this;this.subs.push(this.state.changes("FloatingMedia").pipe(Object(_.a)((function(t){t.open?(e.showFloatingMediaCard.next(!0),e.card=t,e.card.size="xlarge"):e.showFloatingMediaCard.next(!1)}))).subscribe())},e.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(Object(Wa.a)(this.animationStartDelay,this.wiggleDelay).pipe(Object(je.a)((function(){return e.showFloatingMediaCard.value})),Object(Qt.a)(3),Object(_.a)((function(){e.wiggleAnimation().subscribe()}))).subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.closeFloatingMedia=function(){var e=this;C.Kb.track("n.helpWidget.videos.compactVid.click",{value1Type:"mediaTitle",value1:this.card.name}),this.state.set("FloatingMedia",{open:!1});var t=C.Sb.find((function(t){return t.id===e.card.id}));t&&this.commandSvc.dispatch(fe.u.updateUserSeenMedia,{mediaType:t.mediaType,newMediaId:t.id})},e.prototype.wiggleAnimation=function(){var e=this,t=0,n="left";return Object(Wa.a)(0,this.animationDuration).pipe(Object(Qt.a)(this.numBounces),Object(_.a)((function(){++t===e.numBounces?e.resetCardPosition():"left"===n?(e.triggerWiggleLeftAnimation(),n="right"):(e.triggerWiggleRightAnimation(),n="left")})))},e.prototype.triggerWiggleRightAnimation=function(){var e=new C.l({from:{transform:"rotate(2deg)"},to:{transform:"rotate(-2deg)"},transitionProperty:"transform",easing:"linear",duration:this.animationDuration});return e.element=this.floatingCard.nativeElement,e},e.prototype.triggerWiggleLeftAnimation=function(){var e=new C.l({from:{transform:"rotate(-2deg)"},to:{transform:"rotate(2deg)"},transitionProperty:"transform",easing:"linear",duration:this.animationDuration});return e.element=this.floatingCard.nativeElement,e},e.prototype.resetCardPosition=function(){var e=new C.l({from:{transform:"rotate(0deg)"},to:{transform:"rotate(0deg)"},transitionProperty:"transform",easing:"linear",duration:50});return e.element=this.floatingCard.nativeElement,e},e.\u0275fac=function(t){return new(t||e)(k.fc(C.Ib),k.fc(y.e),k.fc(C.B))},e.\u0275cmp=k.Zb({type:e,selectors:[["floating-media-card"]],viewQuery:function(e,t){var n;(1&e&&k.jd(od,!0,k.r),2&e)&&(k.Lc(n=k.uc())&&(t.floatingCard=n.first))},decls:2,vars:3,consts:[["class","floating-card fx-pointer-events-auto",4,"ngIf"],[1,"floating-card","fx-pointer-events-auto"],["floatingCard",""],[1,"close-btn",3,"click"],[1,"nu-icon-xsmall"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close-2"],[3,"card","showHeading","click"],[1,"speechBubbleBottomRight"]],template:function(e,t){1&e&&(k.cd(0,sd,7,2,"div",0),k.yc(1,"async")),2&e&&k.Cc("ngIf",k.zc(1,1,t.showFloatingMediaCard))},directives:[i.t,N.a],pipes:[i.b],styles:[".floating-card[_ngcontent-%COMP%]{position:absolute;width:288px;z-index:4;will-change:transform,opacity;bottom:75px;right:0;background:#fff;border-radius:8px;padding:8px;margin-right:5px;box-shadow:0 8px 24px rgba(0,0,0,.05),0 4px 8px rgba(0,0,0,.05),0 2px 2px rgba(0,0,0,.05)}.floating-card[_ngcontent-%COMP%]:hover{cursor:pointer;background:#dcf2ee}.speechBubbleBottomRight[_ngcontent-%COMP%]{width:0;height:0;position:absolute;border-left:6px solid transparent;border-right:6px solid transparent;border-top:8px solid #fff;bottom:-8px;right:33px}.floating-card[_ngcontent-%COMP%]:hover   .speechBubbleBottomRight[_ngcontent-%COMP%]{border-top:8px solid #dcf2ee}.close-btn[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;fill:rgba(98,104,106,.5)}.close-btn[_ngcontent-%COMP%]:hover{cursor:pointer;fill:rgba(41,53,56,.7)}"],changeDetection:0}),e}(),ld=n("/ege"),ud=n("bq/2"),pd=n("eaE7"),hd=n("BJDd"),dd=n("hb43"),fd=n("UfOR"),gd=n("S8c2"),md=n("fdBj"),vd=n("LX6Z"),bd=n("6uE6"),yd=n("Ownj"),xd=n("Y4mt"),Cd=n("rPyh"),wd=n("sIsI"),kd=n("nmkj"),Sd=n("OlX0"),Od=n("igS9"),Ed=n("/kaM"),_d=n("0Ohc"),Id=n("am3J"),Pd=n("ZFuN"),Td=n("+ZK7"),Ad=n("vd2+"),Md=n("HF29"),Dd=n("QVgP"),jd=n("qtZD"),Nd=n("bMav"),Rd=n("T4H+"),Ld=n("lQIu"),Fd=n("D8VW"),Bd=n("8uPo"),Vd=n("GmW1"),zd=n("ys29"),Ud=n("D+VW"),Gd=n("8Tlt"),Hd=n("Q0Yk"),Yd=n("fRBV"),qd=n("rDL/"),Wd=n("LiJA"),Xd=n("0Gjp"),Kd=n("H+7l"),Zd=n("IG37"),$d=n("XwbL"),Qd=n("uXwy"),Jd=n("g5Ym"),ef=n("wkyi");function tf(e,t){if(1&e){var n=k.mc();k.lc(0,"button",6),k.tc("click",(function(){k.Pc(n);var e=t.$implicit,r=k.xc();return r.selected.next(e.rating),r.expandCard=!0})),k.yc(1,"async"),k.yc(2,"async"),k.gc(3,"img",7),k.ed(4),k.yc(5,"async"),k.kc()}if(2&e){var r=t.$implicit,i=k.xc();k.Xb("selected",k.zc(1,7,i.selected)==r.rating)("has-selected",k.zc(2,9,i.selected)),k.Sb(3),k.Ec("src","./assets/images/emoticons/",r.url,"",k.Sc),k.Dc("width",r.size),k.Sb(1),k.gd(" ",k.zc(5,11,i.selectedRating)," ")}}var nf=function(){function e(e){this.translate=e,this.expandCard=!1,this.emotions=[{url:"love.svg",rating:5,size:47},{url:"happy.svg",rating:4,size:47},{url:"meh.svg",rating:3,size:47},{url:"disappointed.svg",rating:2,size:47},{url:"dislike.svg",rating:1,size:49}],this.selected=new I.a(void 0)}return Object.defineProperty(e.prototype,"userRating",{set:function(e){e!==this.selected.value&&this.selected.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportUrl",{get:function(){return H.a.get("ZENDESK_CONTACT_US_URL")},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(k.fc(y.e))},e.\u0275cmp=k.Zb({type:e,selectors:[["help-card-emoticon-rating"]],inputs:{userRating:"userRating"},outputs:{selected:"selected"},decls:10,vars:10,consts:[[1,"help-widget-card","white"],[1,"fx-margin-bottom-10"],[1,"emoticon-container","fx-margin-bottom-20","fx-margin-top-20"],["class","emoticon-button fx-button fx-icon",3,"selected","has-selected","click",4,"ngFor","ngForOf"],[1,"emoticon-link","fx-center"],["target","_blank",1,"primary",3,"href"],[1,"emoticon-button","fx-button","fx-icon",3,"click"],[3,"src","width"]],template:function(e,t){1&e&&(k.lc(0,"div",0),k.lc(1,"h2",1),k.ed(2),k.yc(3,"async"),k.kc(),k.lc(4,"div",2),k.cd(5,tf,6,13,"button",3),k.kc(),k.lc(6,"div",4),k.lc(7,"a",5),k.ed(8),k.yc(9,"async"),k.kc(),k.kc(),k.kc()),2&e&&(k.Sb(2),k.fd(k.zc(3,6,t.translate.get("HELP.EXP_SO_FAR"))),k.Sb(3),k.Cc("ngForOf",t.emotions),k.Sb(1),k.Xb("show-link",t.expandCard),k.Sb(1),k.Dc("href",t.supportUrl,k.Sc),k.Sb(1),k.gd(" ",k.zc(9,8,t.translate.get("HELP.TELL_US"))," "))},directives:[i.s],pipes:[i.b],styles:['.emoticon-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;height:50px}.emoticon-button[_ngcontent-%COMP%]{transform:scale(1);transition:transform .3s ease-in-out,opacity .3s ease-in-out;position:relative}.emoticon-button[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:1}.emoticon-button.has-selected[_ngcontent-%COMP%]{opacity:.5}.emoticon-button.selected[_ngcontent-%COMP%]{opacity:1}.emoticon-button.selected[_ngcontent-%COMP%]:before{background-image:url(/assets/images/emoticons/selected.svg);content:" ";height:18px;width:18px;display:block;position:absolute;bottom:0;right:0}.emoticon-link[_ngcontent-%COMP%]{transition:height .3s cubic-bezier(.68,-.55,.265,1.55);height:0;line-height:30px;overflow:hidden}.emoticon-link.show-link[_ngcontent-%COMP%]{height:30px}'],changeDetection:0}),e}(),rf=n("52aJ"),af=n("8RvG"),of=n("WpxP"),sf=n("1GLe"),cf=n("s9xl"),lf=n("qvOF"),uf=n("E5oP"),pf=n("H0K4"),hf=function(){function e(){}return e.match=function(e){if(e.length>0){var t=e[0].path;if(t.startsWith("edit")||t.startsWith("dashboard"))return{consumed:e}}return null},e}(),df=[{path:"edit-permission-error",component:jp,canActivate:[rr.a]},{path:"view-permission-error",component:Fp,canActivate:[rr.a]},{path:"desktop-permission-error",component:Tp,canActivate:[rr.a]},{path:"new/project/:project",canActivate:[Dt.a],component:ll},{path:"",runGuardsAndResolvers:"always",component:ll,canDeactivate:[vl],canActivate:[vl],resolve:[vl],children:[{path:"view",loadChildren:function(){return Promise.all([n.e(1),n.e(31)]).then(n.bind(null,"SDYM")).then((function(e){return e.ViewerModule}))}},{matcher:hf.match,loadChildren:function(){return Promise.all([n.e(1),n.e(8)]).then(n.bind(null,"C7fj")).then((function(e){return e.EditorModule}))}},{path:"",redirectTo:"view",pathMatch:"full"},{path:"",outlet:"right-pane",component:ml.a},{outlet:"weblinks-viewer",component:bp,path:""},{outlet:"shape-data-viewer",component:Th,path:""},{outlet:"floating-media-card",component:cd,path:""}]}],ff=function(){function e(e,t,n,r,i,a,o,s,c,l,u,p,h,d,f,g,m,v,b,y,x,C){this.mapper=e,this.realtime=t,this.ll=n,this.ell=r,this.defLocator=i,this.imageLoader=a,this.pluginReg=o,this.offlineSync=h,this.realtimeState=d,this.planPermManager=f,this.injector=g,this.realtimeDataSync=m,this.edata=v,this.searchService=b,this.documentSearchProvider=y,this.userPermissionUpdateService=x,this.drs=C,this.ll.initialize(),this.ell.initialize(),vi.a.register(this.mapper),this.loadBundledDefinitions(),ur.register(this.mapper),Qn.a.register(this.mapper),this.initializeFactories(i,a),this.realtime.start(),this.pluginReg.initialize(),p.initialize(),this.offlineSync.start(),this.realtimeState.initialize(),this.realtimeDataSync.initialize(),this.edata.initialize(),this.registerHandlers(),bl.a.register(this.mapper),this.searchService.register(y),this.userPermissionUpdateService.start(),this.defLocator.prepareShapesLatestVersion(),this.drs.initialize(),this.handleServiceWokerUnregister()}return e.prototype.initializeFactories=function(e,t){de.x.instance.registerDefinitionLocator(e),de.A.instance.registerDefinitionLocator(e),de.f.instance.registerDefinitionLocator(e),de.q.instance.registerResourceLoader(t),de.k.instance.registerDefinitionLocator(e),np.a.instance.registerDefinitionLocator(e),rp.a.instance.registerDefinitionLocator(e)},e.prototype.loadBundledDefinitions=function(){var e=this;de.J.forEach((function(t){return e.defLocator.cacheSourceFile(t,t.name)})),de.I.forEach((function(t){return e.defLocator.cacheDefinition(t)}))},e.prototype.registerHandlers=function(){this.planPermManager.registerHandler(pe.p.CREATELY_GOOGLE_SEARCH,this.injector.get(sp)),this.planPermManager.registerHandler(pe.p.CREATELY_VIDEO_CONFERENCE,this.injector.get(lp)),this.planPermManager.registerHandler(pe.p.DIAGRAM_ADD_SHAPES,this.injector.get(ap)),this.planPermManager.registerHandler(pe.p.COLLABORATE_OFFLINE,this.injector.get(gl)),this.planPermManager.registerHandler(pe.p.DIAGRAM_IMPORT_IMAGE,this.injector.get(op))},e.prototype.handleServiceWokerUnregister=function(){window.navigator&&navigator.serviceWorker&&navigator.serviceWorker.getRegistrations().then((function(e){var t,n;try{for(var i=Object(r.k)(e),a=i.next();!a.done;a=i.next()){a.value.unregister()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}))},e.\u0275mod=k.dc({type:e}),e.\u0275inj=k.cc({factory:function(t){return new(t||e)(k.pc(C.z),k.pc(x.h),k.pc(sn.a),k.pc(Cl.a),k.pc(Sl.a),k.pc(C.W),k.pc(Wt.a),k.pc(de.C),k.pc(Cp.a),k.pc(Pl.a),k.pc(ip.a),k.pc(Tl),k.pc(hr),k.pc(Zt.b),k.pc(fe.m),k.pc(k.C),k.pc(xp),k.pc(ep.a),k.pc(Cn.a),k.pc(Xu),k.pc(Hh),k.pc(wa.a))},providers:[Pr.a,dt.a,ht.a,pt.a,lt.a,ut.a,ep.a,sn.a,Cl.a,Mt.a,At.a,he.x,Kt.a,Qu.a,Sl.a,Cp.a,Pl.a,vl,Dt.a,_i.a,Ta.a,wp.a,_t.a,kt.a,C.Y,he.u,Ku,{provide:"DiagramResponsibility",useExisting:Ku},nr,{provide:"PluginDocumentResponsibility",useExisting:nr},er,{provide:"PluginAuthResponsibility",useExisting:er},Zu,{provide:"DiagramSubscriptionResponsibility",useExisting:Zu},pr.a,zn.a,Ot.a,wt.a,Er.a,gt.a,Sr.a,Or.a,xt.a,vt.a,Fh.a,Rh.a,up.a,jh.a,Lh.a,Nh.a,Pt.a,mt.a,Ar.a,Tr.a,Ir.a,yt.a,Ct.a,_r.a,St.a,de.C,{provide:de.a,useExisting:Sl.a},{provide:"UndoScenario",useClass:Dl},{provide:"RedoScenario",useClass:Ml},ft.a,{provide:"GridService",useClass:la.a},dr.a,yp.a,{provide:"ShapeBounds",useClass:Nt},{provide:"SelectionScaleSnap",useClass:jr},{provide:"SelectionMoveSnap",useClass:Dr},yn.a,nd.a,Fr.a,Br.a,Vr.a,Ao.a,et.a,rd.a,tt.a,wr.a,br.a,yr.a,$e.a,vr.a,mr.a,Kh.a,xr.a,Qe.a,Je.a,Ke.a,Ze.a,td.a,Cr.a,he.n,xn.a,gr.a,kr.a,nt.a,oa.a,ip.a,ct,{provide:"ImageFileReceiver",useExisting:ct},rt.a,It.a,jt.a,Nr.a,Xu,Cn.a,fr.a,$u.a,Mr.a,Ep.a,Tt.a,Wt.a,Tl,hr,C.o,jl.a,Ju.a,Rl.a,Nl.a,Zt.b,xp,nn,sp,lp,Ca.a,ap,Et.a,bt.a,Ll.a,Fl.a,Hh,gl,op,hh.a,kp.a,Sp.a,Op.a,Ka.a,Gt.a,Jn.a,Jo,tp.a,Qh.a,Jh.a,id.a,xi.a,wa.a],imports:[[i.c,x.e,C.Q,C.S,de.o,m.h.forChild(df),y.c,w.n,Xe.a,S,he.p,v.b,a.m,b.g.forRoot(),fe.e,o.b,l.i,c.i,h.b,s.g,f.b,p.e,u.b,a.C,g.c,d.b,h.b,d.b,Ge.forRoot({player:gf})]]}),e}();function gf(){return me.a}k.Tc(bi.a,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h]),k.Tc(Wn,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h]),k.Tc(Ma,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h]),k.Tc(he.v,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h]),k.Tc(he.M,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h]),k.Tc(Ht.a,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h]),k.Tc(lh.b,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h]),k.Tc(Ah.a,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h]),k.Tc(Tn.a,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h]),k.Tc(wn.a,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h]),k.Tc(Bp.a,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,ki.a,xc.a,Qa.a,ld.a,m.i,m.e,m.g,m.f,m.j,y.a,N.a,ud.a,pd.a,hd.a,D.a,dd.a,fd.a,gd.a,md.a,vd.a,bd.a,yd.a,xd.a,Cd.a,wd.a,kd.a,Sd.a,Ro.a,Od.a,Ed.a,ia.a,_d.a,Id.a,Pd.a,ae.a,Ko.a,Td.a,Na.a,$o.a,Zo.a,Ad.a,j.b,j.c,Md.a,Dd.a,jd.a,lo.a,Nd.a,Si.a,Rd.a,Lo.a,yc.a,No.a,Ld.b,Fd.a,Bd.a,Vd.a,zd.a,Ud.a,Gd.a,Hd.a,Yd.a,qd.a,Wd.a,Xd.a,Pa.a,Kd.a,Zd.a,$d.a,Qd.a,Jd.a,ef.a,un.a,G,nf,Y,W,K,J,te,re,ie,se,ue,Ja.a,eo.a,io.a,rf.a,af.a,of.a,v.a,a.I,a.x,a.H,a.d,a.y,a.B,a.a,a.E,a.F,a.A,a.s,a.t,a.D,a.o,a.n,a.z,a.b,a.e,a.v,a.w,a.u,b.b,b.a,wi.a,jo,Mo.a,sf.a,cf.a,nc.a,o.a,o.d,o.c,lf.a,c.k,c.j,uf.b,l.a,l.b,l.f,l.g,l.h,l.j,l.k,l.m,l.p,l.n,l.c,l.d,l.o,l.l,l.e,p.b,p.c,p.f,p.g,p.h,p.i,p.j,h.a,h.c,s.d,s.a,s.c,s.e,s.b,s.f,f.a,u.a,u.c,u.d,u.g,u.h,u.f,u.e,a.i,a.k,a.j,a.l,a.f,pf.b,pf.c,g.b,g.d,d.a,d.c,d.d,Ve,ze,Ue,ll,Ia,Ya,ha,ka,Hc,hc,Sa,ac,ts,pi.a,li.a,ml.a,ih.a,oh.a,rh.a,nh.a,Rr.a,Lr.a,Yt.a,Lt.a,Vt.a,Rt.a,Xo,gc,vc,bi.a,th,zt.a,Ut.a,cr,sr,Wn,Ma,Xn.a,ci.a,ro,so,he.C,he.v,he.A,To,he.M,qh.c,oo,Fp,jp,Tp,ah.a,ti.a,oi.a,si.a,Vn.a,Bn.a,ri.a,ni.a,ai.a,ii.a,qt.a,ei.a,Qr.a,Jr.a,$n,qc,zr.a,Zn.a,ui.a,Yh.a,Kn.a,Ht.a,tc,bn,on,Gh,zh,ja.a,Ua,bp,cd,Ha,lh.b,ph.a,Yr.a,Oh.b,ch.a,dh.a,Th,Sh.a,kh,Dh.a,Mh.a,Ah.a,Zh.a,$h.a,uh.a,sh.a,En.a,_n.a,Kr.a,Ur.a,qr.a,$r.a,Hr.a,On.a,Sn.a,kn.a,Zr.a,Wr.a,Xr.a,Tn.a,Ln,In.a,Wh.a,Xh.a,wn.a,Pn.a,Gr.a,vo,qp.a,Bp.a,Hp,Yp.a,mc,Ft.b,ed.a,Bt.a,ra,Ai,Qi,ad.a],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,y.d,bo.b,bo.a,b.h])},Nh1y:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,root,factory;"undefined"!=typeof navigator&&(root=window||{},factory=function(window){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,idPrefix="",expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bmRnd,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface(){return{}}!function(){var e,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],n=t.length;for(e=0;e<n;e+=1)BMMath[t[e]]=Math[t[e]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"==typeof e&&e.length){var t,n=createSizedArray(e.length),r=e.length;for(t=0;t<r;t+=1)n[t]=Math.abs(e[t]);return n}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(e){bmRnd=e?Math.round:function(e){return e}}function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,n,r){this.type=e,this.currentTime=t,this.totalTime=n,this.direction=r<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,n,r){this.type=e,this.currentLoop=n,this.totalLoops=t,this.direction=r<0?-1:1}function BMSegmentStartEvent(e,t,n){this.type=e,this.firstFrame=t,this.totalFrames=n}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}function BMAnimationConfigErrorEvent(e,t){this.type=e,this.nativeError=t}roundValues(!1);var createElementID=(_count=0,function(){return idPrefix+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(e,t,n){var r,i,a,o,s,c,l,u;switch(c=n*(1-t),l=n*(1-(s=6*e-(o=Math.floor(6*e)))*t),u=n*(1-(1-s)*t),o%6){case 0:r=n,i=u,a=c;break;case 1:r=l,i=n,a=c;break;case 2:r=c,i=n,a=u;break;case 3:r=c,i=l,a=n;break;case 4:r=u,i=c,a=n;break;case 5:r=n,i=c,a=l}return[r,i,a]}function RGBtoHSV(e,t,n){var r,i=Math.max(e,t,n),a=Math.min(e,t,n),o=i-a,s=0===i?0:o/i,c=i/255;switch(i){case a:r=0;break;case e:r=t-n+o*(t<n?6:0),r/=6*o;break;case t:r=n-e+2*o,r/=6*o;break;case n:r=e-t+4*o,r/=6*o}return[r,s,c]}function addSaturationToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[1]+=t,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[2]+=t,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[0]+=t/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var e,t,n=[];for(e=0;e<256;e+=1)t=e.toString(16),n[e]=1===t.length?"0"+t:t;return function(e,t,r){return e<0&&(e=0),t<0&&(t=0),r<0&&(r=0),"#"+n[e]+n[t]+n[r]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var n=this._cbs[e],r=0;r<n.length;r+=1)n[r](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),(function(){this.removeEventListener(e,t)}).bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var n=0,r=this._cbs[e].length;n<r;)this._cbs[e][n]===t&&(this._cbs[e].splice(n,1),n-=1,r-=1),n+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var createTypedArray=function(){function e(e,t){var n,r=0,i=[];switch(e){case"int16":case"uint8c":n=1;break;default:n=1.1}for(r=0;r<t;r+=1)i.push(n);return i}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,n){return"float32"===t?new Float32Array(n):"int16"===t?new Int16Array(n):"uint8c"===t?new Uint8ClampedArray(n):e(t,n)}:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function createNS(e){return document.createElementNS(svgNS,e)}function createTag(e){return document.createElement(e)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var e;this._mdf=!1;var t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(e){return blendModeEnums[e]||""}),blendModeEnums,lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"},Matrix=function(){var e=Math.cos,t=Math.sin,n=Math.tan,r=Math.round;function i(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function a(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function o(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1)}function s(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1)}function c(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function l(e,t){return this._t(1,t,e,1,0,0)}function u(e,t){return this.shear(n(e),n(t))}function p(r,i){var a=e(i),o=t(i);return this._t(a,o,0,0,-o,a,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(r),1,0,0,0,0,1,0,0,0,0,1)._t(a,-o,0,0,o,a,0,0,0,0,1,0,0,0,0,1)}function h(e,t,n){return n||0===n||(n=1),1===e&&1===t&&1===n?this:this._t(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1)}function d(e,t,n,r,i,a,o,s,c,l,u,p,h,d,f,g){return this.props[0]=e,this.props[1]=t,this.props[2]=n,this.props[3]=r,this.props[4]=i,this.props[5]=a,this.props[6]=o,this.props[7]=s,this.props[8]=c,this.props[9]=l,this.props[10]=u,this.props[11]=p,this.props[12]=h,this.props[13]=d,this.props[14]=f,this.props[15]=g,this}function f(e,t,n){return n=n||0,0!==e||0!==t||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1):this}function g(e,t,n,r,i,a,o,s,c,l,u,p,h,d,f,g){var m=this.props;if(1===e&&0===t&&0===n&&0===r&&0===i&&1===a&&0===o&&0===s&&0===c&&0===l&&1===u&&0===p)return m[12]=m[12]*e+m[15]*h,m[13]=m[13]*a+m[15]*d,m[14]=m[14]*u+m[15]*f,m[15]*=g,this._identityCalculated=!1,this;var v=m[0],b=m[1],y=m[2],x=m[3],C=m[4],w=m[5],k=m[6],S=m[7],O=m[8],E=m[9],_=m[10],I=m[11],P=m[12],T=m[13],A=m[14],M=m[15];return m[0]=v*e+b*i+y*c+x*h,m[1]=v*t+b*a+y*l+x*d,m[2]=v*n+b*o+y*u+x*f,m[3]=v*r+b*s+y*p+x*g,m[4]=C*e+w*i+k*c+S*h,m[5]=C*t+w*a+k*l+S*d,m[6]=C*n+w*o+k*u+S*f,m[7]=C*r+w*s+k*p+S*g,m[8]=O*e+E*i+_*c+I*h,m[9]=O*t+E*a+_*l+I*d,m[10]=O*n+E*o+_*u+I*f,m[11]=O*r+E*s+_*p+I*g,m[12]=P*e+T*i+A*c+M*h,m[13]=P*t+T*a+A*l+M*d,m[14]=P*n+T*o+A*u+M*f,m[15]=P*r+T*s+A*p+M*g,this._identityCalculated=!1,this}function m(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function v(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function b(e){var t;for(t=0;t<16;t+=1)e.props[t]=this.props[t];return e}function y(e){var t;for(t=0;t<16;t+=1)this.props[t]=e[t]}function x(e,t,n){return{x:e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}}function C(e,t,n){return e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12]}function w(e,t,n){return e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13]}function k(e,t,n){return e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}function S(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,n=-this.props[1]/e,r=-this.props[4]/e,i=this.props[0]/e,a=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,o=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,s=new Matrix;return s.props[0]=t,s.props[1]=n,s.props[4]=r,s.props[5]=i,s.props[12]=a,s.props[13]=o,s}function O(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function E(e){var t,n=e.length,r=[];for(t=0;t<n;t+=1)r[t]=O(e[t]);return r}function _(e,t,n){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=e[0],r[1]=e[1],r[2]=t[0],r[3]=t[1],r[4]=n[0],r[5]=n[1];else{var i=this.props[0],a=this.props[1],o=this.props[4],s=this.props[5],c=this.props[12],l=this.props[13];r[0]=e[0]*i+e[1]*o+c,r[1]=e[0]*a+e[1]*s+l,r[2]=t[0]*i+t[1]*o+c,r[3]=t[0]*a+t[1]*s+l,r[4]=n[0]*i+n[1]*o+c,r[5]=n[0]*a+n[1]*s+l}return r}function I(e,t,n){return this.isIdentity()?[e,t,n]:[e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]]}function P(e,t){if(this.isIdentity())return e+","+t;var n=this.props;return Math.round(100*(e*n[0]+t*n[4]+n[12]))/100+","+Math.round(100*(e*n[1]+t*n[5]+n[13]))/100}function T(){for(var e=0,t=this.props,n="matrix3d(";e<16;)n+=r(1e4*t[e])/1e4,n+=15===e?")":",",e+=1;return n}function A(e){return e<1e-6&&e>0||e>-1e-6&&e<0?r(1e4*e)/1e4:e}function M(){var e=this.props;return"matrix("+A(e[0])+","+A(e[1])+","+A(e[4])+","+A(e[5])+","+A(e[12])+","+A(e[13])+")"}return function(){this.reset=i,this.rotate=a,this.rotateX=o,this.rotateY=s,this.rotateZ=c,this.skew=u,this.skewFromAxis=p,this.shear=l,this.scale=h,this.setTransform=d,this.translate=f,this.transform=g,this.applyToPoint=x,this.applyToX=C,this.applyToY=w,this.applyToZ=k,this.applyToPointArray=I,this.applyToTriplePoints=_,this.applyToPointStringified=P,this.toCSS=T,this.to2dCSS=M,this.clone=b,this.cloneFromProps=y,this.equals=v,this.inversePoints=E,this.inversePoint=O,this.getInverseMatrix=S,this._t=this.transform,this.isIdentity=m,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();!function(e,t){var n=this,r=256,i=t.pow(r,6),a=t.pow(2,52),o=2*a,s=255;function c(e){var t,n=e.length,i=this,a=0,o=i.i=i.j=0,c=i.S=[];for(n||(e=[n++]);a<r;)c[a]=a++;for(a=0;a<r;a++)c[a]=c[o=s&o+e[a%n]+(t=c[a])],c[o]=t;i.g=function(e){for(var t,n=0,a=i.i,o=i.j,c=i.S;e--;)t=c[a=s&a+1],n=n*r+c[s&(c[a]=c[o=s&o+t])+(c[o]=t)];return i.i=a,i.j=o,n}}function l(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function u(e,t){for(var n,r=e+"",i=0;i<r.length;)t[s&i]=s&(n^=19*t[s&i])+r.charCodeAt(i++);return p(t)}function p(e){return String.fromCharCode.apply(0,e)}t.seedrandom=function(s,h,d){var f=[],g=u(function e(t,n){var r,i=[],a=typeof t;if(n&&"object"==a)for(r in t)try{i.push(e(t[r],n-1))}catch(o){}return i.length?i:"string"==a?t:t+"\0"}((h=!0===h?{entropy:!0}:h||{}).entropy?[s,p(e)]:null===s?function(){try{var t=new Uint8Array(r);return(n.crypto||n.msCrypto).getRandomValues(t),p(t)}catch(o){var i=n.navigator,a=i&&i.plugins;return[+new Date,n,a,n.screen,p(e)]}}():s,3),f),m=new c(f),v=function(){for(var e=m.g(6),t=i,n=0;e<a;)e=(e+n)*r,t*=r,n=m.g(1);for(;e>=o;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|m.g(4)},v.quick=function(){return m.g(4)/4294967296},v.double=v,u(p(m.S),e),(h.pass||d||function(e,n,r,i){return i&&(i.S&&l(i,m),e.state=function(){return l(m,{})}),r?(t.random=e,n):e})(v,g,"global"in h?h.global:this==t,h.state)},u(t.random(),e)}([],BMMath);var BezierFactory=function(){var e={getBezierEasing:function(e,n,r,i,a){var o=a||("bez_"+e+"_"+n+"_"+r+"_"+i).replace(/\./g,"p");if(t[o])return t[o];var s=new l([e,n,r,i]);return t[o]=s,s}},t={},n=.1,r="function"==typeof Float32Array;function i(e,t){return 1-3*t+3*e}function a(e,t){return 3*t-6*e}function o(e){return 3*e}function s(e,t,n){return((i(t,n)*e+a(t,n))*e+o(t))*e}function c(e,t,n){return 3*i(t,n)*e*e+2*a(t,n)*e+o(t)}function l(e){this._p=e,this._mSampleValues=r?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return l.prototype={get:function(e){var t=this._p[0],n=this._p[1],r=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),t===n&&r===i?e:0===e?0:1===e?1:s(this._getTForX(e),n,i)},_precompute:function(){var e=this._p[0],t=this._p[1],n=this._p[2],r=this._p[3];this._precomputed=!0,e===t&&n===r||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],r=0;r<11;++r)this._mSampleValues[r]=s(r*n,e,t)},_getTForX:function(e){for(var t=this._p[0],r=this._p[2],i=this._mSampleValues,a=0,o=1;10!==o&&i[o]<=e;++o)a+=n;var l=a+(e-i[--o])/(i[o+1]-i[o])*n,u=c(l,t,r);return u>=.001?function(e,t,n,r){for(var i=0;i<4;++i){var a=c(t,n,r);if(0===a)return t;t-=(s(t,n,r)-e)/a}return t}(e,l,t,r):0===u?l:function(e,t,n,r,i){var a,o,c=0;do{(a=s(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o}while(Math.abs(a)>1e-7&&++c<10);return o}(e,a,a+n,t,r)}},e}();function extendPrototype(e,t){var n,r,i=e.length;for(n=0;n<i;n+=1)for(var a in r=e[n].prototype)Object.prototype.hasOwnProperty.call(r,a)&&(t.prototype[a]=r[a])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}function bezFunction(){var e=Math;function t(e,t,n,r,i,a){var o=e*r+t*i+n*a-i*r-a*e-n*t;return o>-.001&&o<.001}var n=function(e,t,n,r){var i,a,o,s,c,l,u=defaultCurveSegments,p=0,h=[],d=[],f=bezierLengthPool.newElement();for(o=n.length,i=0;i<u;i+=1){for(c=i/(u-1),l=0,a=0;a<o;a+=1)s=bmPow(1-c,3)*e[a]+3*bmPow(1-c,2)*c*n[a]+3*(1-c)*bmPow(c,2)*r[a]+bmPow(c,3)*t[a],h[a]=s,null!==d[a]&&(l+=bmPow(h[a]-d[a],2)),d[a]=h[a];l&&(p+=l=bmSqrt(l)),f.percents[i]=c,f.lengths[i]=p}return f.addedLength=p,f};function r(e){this.segmentLength=0,this.points=new Array(e)}function i(e,t){this.partialLength=e,this.point=t}var a,o=(a={},function(e,n,o,s){var c=(e[0]+"_"+e[1]+"_"+n[0]+"_"+n[1]+"_"+o[0]+"_"+o[1]+"_"+s[0]+"_"+s[1]).replace(/\./g,"p");if(!a[c]){var l,u,p,h,d,f,g,m=defaultCurveSegments,v=0,b=null;2===e.length&&(e[0]!==n[0]||e[1]!==n[1])&&t(e[0],e[1],n[0],n[1],e[0]+o[0],e[1]+o[1])&&t(e[0],e[1],n[0],n[1],n[0]+s[0],n[1]+s[1])&&(m=2);var y=new r(m);for(p=o.length,l=0;l<m;l+=1){for(g=createSizedArray(p),d=l/(m-1),f=0,u=0;u<p;u+=1)h=bmPow(1-d,3)*e[u]+3*bmPow(1-d,2)*d*(e[u]+o[u])+3*(1-d)*bmPow(d,2)*(n[u]+s[u])+bmPow(d,3)*n[u],g[u]=h,null!==b&&(f+=bmPow(g[u]-b[u],2));v+=f=bmSqrt(f),y.points[l]=new i(f,g),b=g}y.segmentLength=v,a[c]=y}return a[c]});function s(e,t){var n=t.percents,r=t.lengths,i=n.length,a=bmFloor((i-1)*e),o=e*t.addedLength,s=0;if(a===i-1||0===a||o===r[a])return n[a];for(var c=r[a]>o?-1:1,l=!0;l;)if(r[a]<=o&&r[a+1]>o?(s=(o-r[a])/(r[a+1]-r[a]),l=!1):a+=c,a<0||a>=i-1){if(a===i-1)return n[a];l=!1}return n[a]+(n[a+1]-n[a])*s}var c=createTypedArray("float32",8);return{getSegmentsLength:function(e){var t,r=segmentsLengthPool.newElement(),i=e.c,a=e.v,o=e.o,s=e.i,c=e._length,l=r.lengths,u=0;for(t=0;t<c-1;t+=1)l[t]=n(a[t],a[t+1],o[t],s[t+1]),u+=l[t].addedLength;return i&&c&&(l[t]=n(a[t],a[0],o[t],s[0]),u+=l[t].addedLength),r.totalLength=u,r},getNewSegment:function(t,n,r,i,a,o,l){a<0?a=0:a>1&&(a=1);var u,p=s(a,l),h=s(o=o>1?1:o,l),d=t.length,f=1-p,g=1-h,m=f*f*f,v=p*f*f*3,b=p*p*f*3,y=p*p*p,x=f*f*g,C=p*f*g+f*p*g+f*f*h,w=p*p*g+f*p*h+p*f*h,k=p*p*h,S=f*g*g,O=p*g*g+f*h*g+f*g*h,E=p*h*g+f*h*h+p*g*h,_=p*h*h,I=g*g*g,P=h*g*g+g*h*g+g*g*h,T=h*h*g+g*h*h+h*g*h,A=h*h*h;for(u=0;u<d;u+=1)c[4*u]=e.round(1e3*(m*t[u]+v*r[u]+b*i[u]+y*n[u]))/1e3,c[4*u+1]=e.round(1e3*(x*t[u]+C*r[u]+w*i[u]+k*n[u]))/1e3,c[4*u+2]=e.round(1e3*(S*t[u]+O*r[u]+E*i[u]+_*n[u]))/1e3,c[4*u+3]=e.round(1e3*(I*t[u]+P*r[u]+T*i[u]+A*n[u]))/1e3;return c},getPointInSegment:function(t,n,r,i,a,o){var c=s(a,o),l=1-c;return[e.round(1e3*(l*l*l*t[0]+(c*l*l+l*c*l+l*l*c)*r[0]+(c*c*l+l*c*c+c*l*c)*i[0]+c*c*c*n[0]))/1e3,e.round(1e3*(l*l*l*t[1]+(c*l*l+l*c*l+l*l*c)*r[1]+(c*c*l+l*c*c+c*l*c)*i[1]+c*c*c*n[1]))/1e3]},buildBezierData:o,pointOnLine2D:t,pointOnLine3D:function(n,r,i,a,o,s,c,l,u){if(0===i&&0===s&&0===u)return t(n,r,a,o,c,l);var p,h=e.sqrt(e.pow(a-n,2)+e.pow(o-r,2)+e.pow(s-i,2)),d=e.sqrt(e.pow(c-n,2)+e.pow(l-r,2)+e.pow(u-i,2)),f=e.sqrt(e.pow(c-a,2)+e.pow(l-o,2)+e.pow(u-s,2));return(p=h>d?h>f?h-d-f:f-d-h:f>d?f-d-h:d-h-f)>-1e-4&&p<1e-4}}}!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=setTimeout((function(){t(n+r)}),r);return e=n+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var bez=bezFunction();function dataFunctionManager(){function e(i,a,o){var s,c,l,u,p,h,d,f=i.length;for(c=0;c<f;c+=1)if("ks"in(s=i[c])&&!s.completed){if(s.completed=!0,s.tt&&(i[c-1].td=s.tt),s.hasMask){var g=s.masksProperties;for(u=g.length,l=0;l<u;l+=1)if(g[l].pt.k.i)r(g[l].pt.k);else for(h=g[l].pt.k.length,p=0;p<h;p+=1)g[l].pt.k[p].s&&r(g[l].pt.k[p].s[0]),g[l].pt.k[p].e&&r(g[l].pt.k[p].e[0])}0===s.ty?(s.layers=t(s.refId,a),e(s.layers,a,o)):4===s.ty?n(s.shapes):5===s.ty&&(0!==(d=s).t.a.length||"m"in d.t.p||(d.singleShape=!0))}}function t(e,t){for(var n=0,r=t.length;n<r;){if(t[n].id===e)return t[n].layers.__used?JSON.parse(JSON.stringify(t[n].layers)):(t[n].layers.__used=!0,t[n].layers);n+=1}return null}function n(e){var t,i,a;for(t=e.length-1;t>=0;t-=1)if("sh"===e[t].ty)if(e[t].ks.k.i)r(e[t].ks.k);else for(a=e[t].ks.k.length,i=0;i<a;i+=1)e[t].ks.k[i].s&&r(e[t].ks.k[i].s[0]),e[t].ks.k[i].e&&r(e[t].ks.k[i].e[0]);else"gr"===e[t].ty&&n(e[t].it)}function r(e){var t,n=e.i.length;for(t=0;t<n;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function i(e,t){var n=t?t.split("."):[100,100,100];return e[0]>n[0]||!(n[0]>e[0])&&(e[1]>n[1]||!(n[1]>e[1])&&(e[2]>n[2]||!(n[2]>e[2])&&null))}var a,o=function(){var e=[4,4,14];function t(e){var t,n,r,i=e.length;for(t=0;t<i;t+=1)5===e[t].ty&&(n=e[t],r=void 0,r=n.t.d,n.t.d={k:[{s:r,t:0}]})}return function(n){if(i(e,n.v)&&(t(n.layers),n.assets)){var r,a=n.assets.length;for(r=0;r<a;r+=1)n.assets[r].layers&&t(n.assets[r].layers)}}}(),s=(a=[4,7,99],function(e){if(e.chars&&!i(a,e.v)){var t,n,o,s,c,l=e.chars.length;for(t=0;t<l;t+=1)if(e.chars[t].data&&e.chars[t].data.shapes)for(o=(c=e.chars[t].data.shapes[0].it).length,n=0;n<o;n+=1)(s=c[n].ks.k).__converted||(r(c[n].ks.k),s.__converted=!0)}}),c=function(){var e=[4,1,9];function t(e){var n,r,i,a=e.length;for(n=0;n<a;n+=1)if("gr"===e[n].ty)t(e[n].it);else if("fl"===e[n].ty||"st"===e[n].ty)if(e[n].c.k&&e[n].c.k[0].i)for(i=e[n].c.k.length,r=0;r<i;r+=1)e[n].c.k[r].s&&(e[n].c.k[r].s[0]/=255,e[n].c.k[r].s[1]/=255,e[n].c.k[r].s[2]/=255,e[n].c.k[r].s[3]/=255),e[n].c.k[r].e&&(e[n].c.k[r].e[0]/=255,e[n].c.k[r].e[1]/=255,e[n].c.k[r].e[2]/=255,e[n].c.k[r].e[3]/=255);else e[n].c.k[0]/=255,e[n].c.k[1]/=255,e[n].c.k[2]/=255,e[n].c.k[3]/=255}function n(e){var n,r=e.length;for(n=0;n<r;n+=1)4===e[n].ty&&t(e[n].shapes)}return function(t){if(i(e,t.v)&&(n(t.layers),t.assets)){var r,a=t.assets.length;for(r=0;r<a;r+=1)t.assets[r].layers&&n(t.assets[r].layers)}}}(),l=function(){var e=[4,4,18];function t(e){var n,r,i;for(n=e.length-1;n>=0;n-=1)if("sh"===e[n].ty)if(e[n].ks.k.i)e[n].ks.k.c=e[n].closed;else for(i=e[n].ks.k.length,r=0;r<i;r+=1)e[n].ks.k[r].s&&(e[n].ks.k[r].s[0].c=e[n].closed),e[n].ks.k[r].e&&(e[n].ks.k[r].e[0].c=e[n].closed);else"gr"===e[n].ty&&t(e[n].it)}function n(e){var n,r,i,a,o,s,c=e.length;for(r=0;r<c;r+=1){if((n=e[r]).hasMask){var l=n.masksProperties;for(a=l.length,i=0;i<a;i+=1)if(l[i].pt.k.i)l[i].pt.k.c=l[i].cl;else for(s=l[i].pt.k.length,o=0;o<s;o+=1)l[i].pt.k[o].s&&(l[i].pt.k[o].s[0].c=l[i].cl),l[i].pt.k[o].e&&(l[i].pt.k[o].e[0].c=l[i].cl)}4===n.ty&&t(n.shapes)}}return function(t){if(i(e,t.v)&&(n(t.layers),t.assets)){var r,a=t.assets.length;for(r=0;r<a;r+=1)t.assets[r].layers&&n(t.assets[r].layers)}}}();var u={completeData:function(t,n){t.__complete||(c(t),o(t),s(t),l(t),e(t.layers,t.assets,n),t.__complete=!0)}};return u.checkColors=c,u.checkChars=s,u.checkShapes=l,u.completeLayers=e,u}var dataManager=dataFunctionManager();function getFontProperties(e){for(var t=e.fStyle?e.fStyle.split(" "):[],n="normal",r="normal",i=t.length,a=0;a<i;a+=1)switch(t[a].toLowerCase()){case"italic":r="italic";break;case"bold":n="700";break;case"black":n="900";break;case"medium":n="500";break;case"regular":case"normal":n="400";break;case"light":case"thin":n="200"}return{style:r,weight:e.fWeight||n}}var FontManager=function(){var e={w:0,size:0,shapes:[]},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var n=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],r=[65039,8205];function i(e,t){var n=createTag("span");n.setAttribute("aria-hidden",!0),n.style.fontFamily=t;var r=createTag("span");r.innerText="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(r),document.body.appendChild(n);var i=r.offsetWidth;return r.style.fontFamily=function(e){var t,n=e.split(","),r=n.length,i=[];for(t=0;t<r;t+=1)"sans-serif"!==n[t]&&"monospace"!==n[t]&&i.push(n[t]);return i.join(",")}(e)+", "+t,{node:r,w:i,parent:n}}function a(e,t){var n=createNS("text");n.style.fontSize="100px";var r=getFontProperties(t);return n.setAttribute("font-family",t.fFamily),n.setAttribute("font-style",r.style),n.setAttribute("font-weight",r.weight),n.textContent="1",t.fClass?(n.style.fontFamily="inherit",n.setAttribute("class",t.fClass)):n.style.fontFamily=t.fFamily,e.appendChild(n),createTag("canvas").getContext("2d").font=t.fWeight+" "+t.fStyle+" 100px "+t.fFamily,n}var o=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};o.isModifier=function(e,t){var r=e.toString(16)+t.toString(16);return-1!==n.indexOf(r)},o.isZeroWidthJoiner=function(e,t){return t?e===r[0]&&t===r[1]:e===r[1]},o.isCombinedCharacter=function(e){return-1!==t.indexOf(e)};var s={addChars:function(e){if(e){var t;this.chars||(this.chars=[]);var n,r,i=e.length,a=this.chars.length;for(t=0;t<i;t+=1){for(n=0,r=!1;n<a;)this.chars[n].style===e[t].style&&this.chars[n].fFamily===e[t].fFamily&&this.chars[n].ch===e[t].ch&&(r=!0),n+=1;r||(this.chars.push(e[t]),a+=1)}}},addFonts:function(e,t){if(e){if(this.chars)return this.isLoaded=!0,void(this.fonts=e.list);var n,r=e.list,o=r.length,s=o;for(n=0;n<o;n+=1){var c,l,u=!0;if(r[n].loaded=!1,r[n].monoCase=i(r[n].fFamily,"monospace"),r[n].sansCase=i(r[n].fFamily,"sans-serif"),r[n].fPath){if("p"===r[n].fOrigin||3===r[n].origin){if((c=document.querySelectorAll('style[f-forigin="p"][f-family="'+r[n].fFamily+'"], style[f-origin="3"][f-family="'+r[n].fFamily+'"]')).length>0&&(u=!1),u){var p=createTag("style");p.setAttribute("f-forigin",r[n].fOrigin),p.setAttribute("f-origin",r[n].origin),p.setAttribute("f-family",r[n].fFamily),p.type="text/css",p.innerText="@font-face {font-family: "+r[n].fFamily+"; font-style: normal; src: url('"+r[n].fPath+"');}",t.appendChild(p)}}else if("g"===r[n].fOrigin||1===r[n].origin){for(c=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),l=0;l<c.length;l+=1)-1!==c[l].href.indexOf(r[n].fPath)&&(u=!1);if(u){var h=createTag("link");h.setAttribute("f-forigin",r[n].fOrigin),h.setAttribute("f-origin",r[n].origin),h.type="text/css",h.rel="stylesheet",h.href=r[n].fPath,document.body.appendChild(h)}}else if("t"===r[n].fOrigin||2===r[n].origin){for(c=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),l=0;l<c.length;l+=1)r[n].fPath===c[l].src&&(u=!1);if(u){var d=createTag("link");d.setAttribute("f-forigin",r[n].fOrigin),d.setAttribute("f-origin",r[n].origin),d.setAttribute("rel","stylesheet"),d.setAttribute("href",r[n].fPath),t.appendChild(d)}}}else r[n].loaded=!0,s-=1;r[n].helper=a(t,r[n]),r[n].cache={},this.fonts.push(r[n])}0===s?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(t,n,r){for(var i=0,a=this.chars.length;i<a;){if(this.chars[i].ch===t&&this.chars[i].style===n&&this.chars[i].fFamily===r)return this.chars[i];i+=1}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",t,n,r)),e},getFontByName:function(e){for(var t=0,n=this.fonts.length;t<n;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},measureText:function(e,t,n){var r=this.getFontByName(t),i=e.charCodeAt(0);if(!r.cache[i+1]){var a=r.helper;if(" "===e){a.textContent="|"+e+"|";var o=a.getComputedTextLength();a.textContent="||";var s=a.getComputedTextLength();r.cache[i+1]=(o-s)/100}else a.textContent=e,r.cache[i+1]=a.getComputedTextLength()/100}return r.cache[i+1]*n},checkLoadedFonts:function(){var e,t,n,r=this.fonts.length,i=r;for(e=0;e<r;e+=1)this.fonts[e].loaded?i-=1:"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:(t=this.fonts[e].monoCase.node,n=this.fonts[e].monoCase.w,t.offsetWidth!==n?(i-=1,this.fonts[e].loaded=!0):(t=this.fonts[e].sansCase.node,n=this.fonts[e].sansCase.w,t.offsetWidth!==n&&(i-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==i&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return o.prototype=s,o}(),PropertyFactory=function(){var e=initialDefaultFrame,t=Math.abs;function n(e,t){var n,i=this.offsetTime;"multidimensional"===this.propType&&(n=createTypedArray("float32",this.pv.length));for(var a,o,s,c,l,u,p,h,d=t.lastIndex,f=d,g=this.keyframes.length-1,m=!0;m;){if(a=this.keyframes[f],o=this.keyframes[f+1],f===g-1&&e>=o.t-i){a.h&&(a=o),d=0;break}if(o.t-i>e){d=f;break}f<g-1?f+=1:(d=0,m=!1)}var v,b,y,x,C,w,k,S,O,E,_=o.t-i,I=a.t-i;if(a.to){a.bezierData||(a.bezierData=bez.buildBezierData(a.s,o.s||a.e,a.to,a.ti));var P=a.bezierData;if(e>=_||e<I){var T=e>=_?P.points.length-1:0;for(c=P.points[T].point.length,s=0;s<c;s+=1)n[s]=P.points[T].point[s]}else{a.__fnct?h=a.__fnct:(h=BezierFactory.getBezierEasing(a.o.x,a.o.y,a.i.x,a.i.y,a.n).get,a.__fnct=h),l=h((e-I)/(_-I));var A,M=P.segmentLength*l,D=t.lastFrame<e&&t._lastKeyframeIndex===f?t._lastAddedLength:0;for(p=t.lastFrame<e&&t._lastKeyframeIndex===f?t._lastPoint:0,m=!0,u=P.points.length;m;){if(D+=P.points[p].partialLength,0===M||0===l||p===P.points.length-1){for(c=P.points[p].point.length,s=0;s<c;s+=1)n[s]=P.points[p].point[s];break}if(M>=D&&M<D+P.points[p+1].partialLength){for(A=(M-D)/P.points[p+1].partialLength,c=P.points[p].point.length,s=0;s<c;s+=1)n[s]=P.points[p].point[s]+(P.points[p+1].point[s]-P.points[p].point[s])*A;break}p<u-1?p+=1:m=!1}t._lastPoint=p,t._lastAddedLength=D-P.points[p].partialLength,t._lastKeyframeIndex=f}}else{var j,N,R,L,F;if(g=a.s.length,v=o.s||a.e,this.sh&&1!==a.h)if(e>=_)n[0]=v[0],n[1]=v[1],n[2]=v[2];else if(e<=I)n[0]=a.s[0],n[1]=a.s[1],n[2]=a.s[2];else{var B=r(a.s),V=r(v);b=n,y=function(e,t,n){var r,i,a,o,s,c=[],l=e[0],u=e[1],p=e[2],h=e[3],d=t[0],f=t[1],g=t[2],m=t[3];return(i=l*d+u*f+p*g+h*m)<0&&(i=-i,d=-d,f=-f,g=-g,m=-m),1-i>1e-6?(r=Math.acos(i),a=Math.sin(r),o=Math.sin((1-n)*r)/a,s=Math.sin(n*r)/a):(o=1-n,s=n),c[0]=o*l+s*d,c[1]=o*u+s*f,c[2]=o*p+s*g,c[3]=o*h+s*m,c}(B,V,(e-I)/(_-I)),x=y[0],C=y[1],w=y[2],k=y[3],S=Math.atan2(2*C*k-2*x*w,1-2*C*C-2*w*w),O=Math.asin(2*x*C+2*w*k),E=Math.atan2(2*x*k-2*C*w,1-2*x*x-2*w*w),b[0]=S/degToRads,b[1]=O/degToRads,b[2]=E/degToRads}else for(f=0;f<g;f+=1)1!==a.h&&(e>=_?l=1:e<I?l=0:(a.o.x.constructor===Array?(a.__fnct||(a.__fnct=[]),a.__fnct[f]?h=a.__fnct[f]:(j=void 0===a.o.x[f]?a.o.x[0]:a.o.x[f],N=void 0===a.o.y[f]?a.o.y[0]:a.o.y[f],R=void 0===a.i.x[f]?a.i.x[0]:a.i.x[f],L=void 0===a.i.y[f]?a.i.y[0]:a.i.y[f],h=BezierFactory.getBezierEasing(j,N,R,L).get,a.__fnct[f]=h)):a.__fnct?h=a.__fnct:(j=a.o.x,N=a.o.y,R=a.i.x,L=a.i.y,h=BezierFactory.getBezierEasing(j,N,R,L).get,a.__fnct=h),l=h((e-I)/(_-I)))),v=o.s||a.e,F=1===a.h?a.s[f]:a.s[f]+(v[f]-a.s[f])*l,"multidimensional"===this.propType?n[f]=F:n=F}return t.lastIndex=d,n}function r(e){var t=e[0]*degToRads,n=e[1]*degToRads,r=e[2]*degToRads,i=Math.cos(t/2),a=Math.cos(n/2),o=Math.cos(r/2),s=Math.sin(t/2),c=Math.sin(n/2),l=Math.sin(r/2);return[s*c*o+i*a*l,s*a*o+i*c*l,i*c*o-s*a*l,i*a*o-s*c*l]}function i(){var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==e&&(this._caching.lastFrame>=r&&t>=r||this._caching.lastFrame<n&&t<n))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(t,this._caching);this.pv=i}return this._caching.lastFrame=t,this.pv}function a(e){var n;if("unidimensional"===this.propType)n=e*this.mult,t(this.v-n)>1e-5&&(this.v=n,this._mdf=!0);else for(var r=0,i=this.v.length;r<i;)n=e[r]*this.mult,t(this.v[r]-n)>1e-5&&(this.v[r]=n,this._mdf=!0),r+=1}function o(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e;this.lock=!0,this._mdf=this._isFirstFrame;var t=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(e=0;e<t;e+=1)n=this.effectsSequence[e](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function s(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function c(e,t,n,r){this.propType="unidimensional",this.mult=n||1,this.data=t,this.v=n?t.k*n:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=o,this.setVValue=a,this.addEffect=s}function l(e,t,n,r){var i;this.propType="multidimensional",this.mult=n||1,this.data=t,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var c=t.k.length;for(this.v=createTypedArray("float32",c),this.pv=createTypedArray("float32",c),this.vel=createTypedArray("float32",c),i=0;i<c;i+=1)this.v[i]=t.k[i]*this.mult,this.pv[i]=t.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=o,this.setVValue=a,this.addEffect=s}function u(t,r,c,l){this.propType="unidimensional",this.keyframes=r.k,this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:e,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=r,this.mult=c||1,this.elem=t,this.container=l,this.comp=t.comp,this.v=e,this.pv=e,this._isFirstFrame=!0,this.getValue=o,this.setVValue=a,this.interpolateValue=n,this.effectsSequence=[i.bind(this)],this.addEffect=s}function p(t,r,c,l){var u;this.propType="multidimensional";var p,h,d,f,g=r.k.length;for(u=0;u<g-1;u+=1)r.k[u].to&&r.k[u].s&&r.k[u+1]&&r.k[u+1].s&&(p=r.k[u].s,h=r.k[u+1].s,d=r.k[u].to,f=r.k[u].ti,(2===p.length&&(p[0]!==h[0]||p[1]!==h[1])&&bez.pointOnLine2D(p[0],p[1],h[0],h[1],p[0]+d[0],p[1]+d[1])&&bez.pointOnLine2D(p[0],p[1],h[0],h[1],h[0]+f[0],h[1]+f[1])||3===p.length&&(p[0]!==h[0]||p[1]!==h[1]||p[2]!==h[2])&&bez.pointOnLine3D(p[0],p[1],p[2],h[0],h[1],h[2],p[0]+d[0],p[1]+d[1],p[2]+d[2])&&bez.pointOnLine3D(p[0],p[1],p[2],h[0],h[1],h[2],h[0]+f[0],h[1]+f[1],h[2]+f[2]))&&(r.k[u].to=null,r.k[u].ti=null),p[0]===h[0]&&p[1]===h[1]&&0===d[0]&&0===d[1]&&0===f[0]&&0===f[1]&&(2===p.length||p[2]===h[2]&&0===d[2]&&0===f[2])&&(r.k[u].to=null,r.k[u].ti=null));this.effectsSequence=[i.bind(this)],this.data=r,this.keyframes=r.k,this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=c||1,this.elem=t,this.container=l,this.comp=t.comp,this.getValue=o,this.setVValue=a,this.interpolateValue=n,this.frameId=-1;var m=r.k[0].s.length;for(this.v=createTypedArray("float32",m),this.pv=createTypedArray("float32",m),u=0;u<m;u+=1)this.v[u]=e,this.pv[u]=e;this._caching={lastFrame:e,lastIndex:0,value:createTypedArray("float32",m)},this.addEffect=s}return{getProp:function(e,t,n,r,i){var a;if(t.k.length)if("number"==typeof t.k[0])a=new l(e,t,r,i);else switch(n){case 0:a=new u(e,t,r,i);break;case 1:a=new p(e,t,r,i)}else a=new c(e,t,r,i);return a.effectsSequence.length&&i.addDynamicProperty(a),a}}}(),TransformPropertyFactory=function(){var e=[0,0];function t(e,t,n){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(n||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti){var r,i=t.or.k.length;for(r=0;r<i;r+=1)t.or.k[r].to=null,t.or.k[r].ti=null}this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=PropertyFactory.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){var n;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var r,i;if(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(r=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),i=this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),i=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(r=this.p.pv,i=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){r=[],i=[];var a=this.px,o=this.py;a._caching.lastFrame+a.offsetTime<=a.keyframes[0].t?(r[0]=a.getValueAtTime((a.keyframes[0].t+.01)/n,0),r[1]=o.getValueAtTime((o.keyframes[0].t+.01)/n,0),i[0]=a.getValueAtTime(a.keyframes[0].t/n,0),i[1]=o.getValueAtTime(o.keyframes[0].t/n,0)):a._caching.lastFrame+a.offsetTime>=a.keyframes[a.keyframes.length-1].t?(r[0]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/n,0),r[1]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/n,0),i[0]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/n,0),i[1]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/n,0)):(r=[a.pv,o.pv],i[0]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/n,a.offsetTime),i[1]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/n,o.offsetTime))}else r=i=e;this.v.rotate(-Math.atan2(r[1]-i[1],r[0]-i[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,n,r){return new t(e,n,r)}}}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var n=0;n<t;)this.v[n]=pointPool.newElement(),this.o[n]=pointPool.newElement(),this.i[n]=pointPool.newElement(),n+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,n,r,i){var a;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":a=this.v;break;case"i":a=this.i;break;case"o":a=this.o;break;default:a=[]}(!a[r]||a[r]&&!i)&&(a[r]=pointPool.newElement()),a[r][0]=e,a[r][1]=t},ShapePath.prototype.setTripleAt=function(e,t,n,r,i,a,o,s){this.setXYAt(e,t,"v",o,s),this.setXYAt(n,r,"o",o,s),this.setXYAt(i,a,"i",o,s)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,n=this.o,r=this.i,i=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],r[0][0],r[0][1],n[0][0],n[0][1],0,!1),i=1);var a,o=this._length-1,s=this._length;for(a=i;a<s;a+=1)e.setTripleAt(t[o][0],t[o][1],r[o][0],r[o][1],n[o][0],n[o][1],a,!1),o-=1;return e};var ShapePropertyFactory=function(){var e=-999999;function t(e,t,n){var r,i,a,o,s,c,l,u,p,h=n.lastIndex,d=this.keyframes;if(e<d[0].t-this.offsetTime)r=d[0].s[0],a=!0,h=0;else if(e>=d[d.length-1].t-this.offsetTime)r=d[d.length-1].s?d[d.length-1].s[0]:d[d.length-2].e[0],a=!0;else{for(var f,g,m=h,v=d.length-1,b=!0;b&&(f=d[m],!((g=d[m+1]).t-this.offsetTime>e));)m<v-1?m+=1:b=!1;if(h=m,!(a=1===f.h)){if(e>=g.t-this.offsetTime)u=1;else if(e<f.t-this.offsetTime)u=0;else{var y;f.__fnct?y=f.__fnct:(y=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y).get,f.__fnct=y),u=y((e-(f.t-this.offsetTime))/(g.t-this.offsetTime-(f.t-this.offsetTime)))}i=g.s?g.s[0]:f.e[0]}r=f.s[0]}for(c=t._length,l=r.i[0].length,n.lastIndex=h,o=0;o<c;o+=1)for(s=0;s<l;s+=1)p=a?r.i[o][s]:r.i[o][s]+(i.i[o][s]-r.i[o][s])*u,t.i[o][s]=p,p=a?r.o[o][s]:r.o[o][s]+(i.o[o][s]-r.o[o][s])*u,t.o[o][s]=p,p=a?r.v[o][s]:r.v[o][s]+(i.v[o][s]-r.v[o][s])*u,t.v[o][s]=p}function n(){var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,i=this._caching.lastFrame;return i!==e&&(i<n&&t<n||i>r&&t>r)||(this._caching.lastIndex=i<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}function r(){this.paths=this.localShapeCollection}function i(e){(function(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var n,r=e._length;for(n=0;n<r;n+=1)if(e.v[n][0]!==t.v[n][0]||e.v[n][1]!==t.v[n][1]||e.o[n][0]!==t.o[n][0]||e.o[n][1]!==t.o[n][1]||e.i[n][0]!==t.i[n][0]||e.i[n][1]!==t.i[n][1])return!1;return!0})(this.v,e)||(this.v=shapePool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function a(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var e,t;this.lock=!0,this._mdf=!1,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var n=this.effectsSequence.length;for(t=0;t<n;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function o(e,t,n){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;var i=3===n?t.pt.k:t.ks.k;this.v=shapePool.clone(i),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function s(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function c(t,i,a){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=3===a?i.pt.k:i.ks.k,this.k=!0,this.kf=!0;var o=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,o),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=r,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[n.bind(this)]}o.prototype.interpolateShape=t,o.prototype.getValue=a,o.prototype.setVValue=i,o.prototype.addEffect=s,c.prototype.getValue=a,c.prototype.interpolateShape=t,c.prototype.setVValue=i,c.prototype.addEffect=s;var l=function(){var e=roundCorner;function t(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],n=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,a=3!==this.d,o=this.v;o.v[0][0]=t,o.v[0][1]=n-i,o.v[1][0]=a?t+r:t-r,o.v[1][1]=n,o.v[2][0]=t,o.v[2][1]=n+i,o.v[3][0]=a?t-r:t+r,o.v[3][1]=n,o.i[0][0]=a?t-r*e:t+r*e,o.i[0][1]=n-i,o.i[1][0]=a?t+r:t-r,o.i[1][1]=n-i*e,o.i[2][0]=a?t+r*e:t-r*e,o.i[2][1]=n+i,o.i[3][0]=a?t-r:t+r,o.i[3][1]=n+i*e,o.o[0][0]=a?t+r*e:t-r*e,o.o[0][1]=n-i,o.o[1][0]=a?t+r:t-r,o.o[1][1]=n+i*e,o.o[2][0]=a?t-r*e:t+r*e,o.o[2][1]=n+i,o.o[3][0]=a?t-r:t+r,o.o[3][1]=n-i*e}},extendPrototype([DynamicPropertyContainer],t),t}(),u=function(){function e(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e,t,n,r,i=2*Math.floor(this.pt.v),a=2*Math.PI/i,o=!0,s=this.or.v,c=this.ir.v,l=this.os.v,u=this.is.v,p=2*Math.PI*s/(2*i),h=2*Math.PI*c/(2*i),d=-Math.PI/2;d+=this.r.v;var f=3===this.data.d?-1:1;for(this.v._length=0,e=0;e<i;e+=1){n=o?l:u,r=o?p:h;var g=(t=o?s:c)*Math.cos(d),m=t*Math.sin(d),v=0===g&&0===m?0:m/Math.sqrt(g*g+m*m),b=0===g&&0===m?0:-g/Math.sqrt(g*g+m*m);g+=+this.p.v[0],m+=+this.p.v[1],this.v.setTripleAt(g,m,g-v*r*n*f,m-b*r*n*f,g+v*r*n*f,m+b*r*n*f,e,!0),o=!o,d+=a*f}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),n=2*Math.PI/t,r=this.or.v,i=this.os.v,a=2*Math.PI*r/(4*t),o=.5*-Math.PI,s=3===this.data.d?-1:1;for(o+=this.r.v,this.v._length=0,e=0;e<t;e+=1){var c=r*Math.cos(o),l=r*Math.sin(o),u=0===c&&0===l?0:l/Math.sqrt(c*c+l*l),p=0===c&&0===l?0:-c/Math.sqrt(c*c+l*l);c+=+this.p.v[0],l+=+this.p.v[1],this.v.setTripleAt(c,l,c-u*a*i*s,l-p*a*i*s,c+u*a*i*s,l+p*a*i*s,e,!0),o+=n*s}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],e),e}(),p=function(){function e(e,t){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return e.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2,i=bmMin(n,r,this.r.v),a=i*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+n,t-r+i,e+n,t-r+i,e+n,t-r+a,0,!0),this.v.setTripleAt(e+n,t+r-i,e+n,t+r-a,e+n,t+r-i,1,!0),0!==i?(this.v.setTripleAt(e+n-i,t+r,e+n-i,t+r,e+n-a,t+r,2,!0),this.v.setTripleAt(e-n+i,t+r,e-n+a,t+r,e-n+i,t+r,3,!0),this.v.setTripleAt(e-n,t+r-i,e-n,t+r-i,e-n,t+r-a,4,!0),this.v.setTripleAt(e-n,t-r+i,e-n,t-r+a,e-n,t-r+i,5,!0),this.v.setTripleAt(e-n+i,t-r,e-n+i,t-r,e-n+a,t-r,6,!0),this.v.setTripleAt(e+n-i,t-r,e+n-a,t-r,e+n-i,t-r,7,!0)):(this.v.setTripleAt(e-n,t+r,e-n+a,t+r,e-n,t+r,2),this.v.setTripleAt(e-n,t-r,e-n,t-r+a,e-n,t-r,3))):(this.v.setTripleAt(e+n,t-r+i,e+n,t-r+a,e+n,t-r+i,0,!0),0!==i?(this.v.setTripleAt(e+n-i,t-r,e+n-i,t-r,e+n-a,t-r,1,!0),this.v.setTripleAt(e-n+i,t-r,e-n+a,t-r,e-n+i,t-r,2,!0),this.v.setTripleAt(e-n,t-r+i,e-n,t-r+i,e-n,t-r+a,3,!0),this.v.setTripleAt(e-n,t+r-i,e-n,t+r-a,e-n,t+r-i,4,!0),this.v.setTripleAt(e-n+i,t+r,e-n+i,t+r,e-n+a,t+r,5,!0),this.v.setTripleAt(e+n-i,t+r,e+n-a,t+r,e+n-i,t+r,6,!0),this.v.setTripleAt(e+n,t+r-i,e+n,t+r-i,e+n,t+r-a,7,!0)):(this.v.setTripleAt(e-n,t-r,e-n+a,t-r,e-n,t-r,1,!0),this.v.setTripleAt(e-n,t+r,e-n,t+r-a,e-n,t+r,2,!0),this.v.setTripleAt(e+n,t+r,e+n-a,t+r,e+n,t+r,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],e),e}(),h={getShapeProp:function(e,t,n){var r;return 3===n||4===n?r=(3===n?t.pt:t.ks).k.length?new c(e,t,n):new o(e,t,n):5===n?r=new p(e,t):6===n?r=new l(e,t):7===n&&(r=new u(e,t)),r.k&&e.addDynamicProperty(r),r},getConstructorFunction:function(){return o},getKeyframedConstructorFunction:function(){return c}};return h}(),ShapeModifiers=(ob={},modifiers={},ob.registerModifier=function(e,t){modifiers[e]||(modifiers[e]=t)},ob.getModifier=function(e,t,n){return new modifiers[e](t,n)},ob),ob,modifiers;function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function PuckerAndBloatModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(e,t,n,r){var i;this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var a,o=t.length||0;for(i=0;i<o;i+=1)a=PropertyFactory.getProp(e,t[i].v,0,0,this),this.k=a.k||this.k,this.dataProps[i]={n:t[i].n,p:a};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(e,t,n){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var r=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var t={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,n,r,i){var a=[];t<=1?a.push({s:e,e:t}):e>=1?a.push({s:e-1,e:t-1}):(a.push({s:e,e:1}),a.push({s:0,e:t-1}));var o,s,c=[],l=a.length;for(o=0;o<l;o+=1){var u,p;(s=a[o]).e*i<r||s.s*i>r+n||(u=s.s*i<=r?0:(s.s*i-r)/n,p=s.e*i>=r+n?1:(s.e*i-r)/n,c.push([u,p]))}return c.length||c.push([0,0]),c},TrimModifier.prototype.releasePathsData=function(e){var t,n=e.length;for(t=0;t<n;t+=1)segmentsLengthPool.release(e[t]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,n,r,i;if(this._mdf||e){var a=this.o.v%360/360;if(a<0&&(a+=1),(t=this.s.v>1?1+a:this.s.v<0?0+a:this.s.v+a)>(n=this.e.v>1?1+a:this.e.v<0?0+a:this.e.v+a)){var o=t;t=n,n=o}t=1e-4*Math.round(1e4*t),n=1e-4*Math.round(1e4*n),this.sValue=t,this.eValue=n}else t=this.sValue,n=this.eValue;var s,c,l,u,p,h=this.shapes.length,d=0;if(n===t)for(i=0;i<h;i+=1)this.shapes[i].localShapeCollection.releaseShapes(),this.shapes[i].shape._mdf=!0,this.shapes[i].shape.paths=this.shapes[i].localShapeCollection,this._mdf&&(this.shapes[i].pathsData.length=0);else if(1===n&&0===t||0===n&&1===t){if(this._mdf)for(i=0;i<h;i+=1)this.shapes[i].pathsData.length=0,this.shapes[i].shape._mdf=!0}else{var f,g,m=[];for(i=0;i<h;i+=1)if((f=this.shapes[i]).shape._mdf||this._mdf||e||2===this.m){if(c=(r=f.shape.paths)._length,p=0,!f.shape._mdf&&f.pathsData.length)p=f.totalShapeLength;else{for(l=this.releasePathsData(f.pathsData),s=0;s<c;s+=1)u=bez.getSegmentsLength(r.shapes[s]),l.push(u),p+=u.totalLength;f.totalShapeLength=p,f.pathsData=l}d+=p,f.shape._mdf=!0}else f.shape.paths=f.localShapeCollection;var v,b=t,y=n,x=0;for(i=h-1;i>=0;i-=1)if((f=this.shapes[i]).shape._mdf){for((g=f.localShapeCollection).releaseShapes(),2===this.m&&h>1?(v=this.calculateShapeEdges(t,n,f.totalShapeLength,x,d),x+=f.totalShapeLength):v=[[b,y]],c=v.length,s=0;s<c;s+=1){b=v[s][0],y=v[s][1],m.length=0,y<=1?m.push({s:f.totalShapeLength*b,e:f.totalShapeLength*y}):b>=1?m.push({s:f.totalShapeLength*(b-1),e:f.totalShapeLength*(y-1)}):(m.push({s:f.totalShapeLength*b,e:f.totalShapeLength}),m.push({s:0,e:f.totalShapeLength*(y-1)}));var C=this.addShapes(f,m[0]);if(m[0].s!==m[0].e){if(m.length>1)if(f.shape.paths.shapes[f.shape.paths._length-1].c){var w=C.pop();this.addPaths(C,g),C=this.addShapes(f,m[1],w)}else this.addPaths(C,g),C=this.addShapes(f,m[1]);this.addPaths(C,g)}}f.shape.paths=g}}},TrimModifier.prototype.addPaths=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)t.addShape(e[n])},TrimModifier.prototype.addSegment=function(e,t,n,r,i,a,o){i.setXYAt(t[0],t[1],"o",a),i.setXYAt(n[0],n[1],"i",a+1),o&&i.setXYAt(e[0],e[1],"v",a),i.setXYAt(r[0],r[1],"v",a+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,n,r){t.setXYAt(e[1],e[5],"o",n),t.setXYAt(e[2],e[6],"i",n+1),r&&t.setXYAt(e[0],e[4],"v",n),t.setXYAt(e[3],e[7],"v",n+1)},TrimModifier.prototype.addShapes=function(e,t,n){var r,i,a,o,s,c,l,u,p=e.pathsData,h=e.shape.paths.shapes,d=e.shape.paths._length,f=0,g=[],m=!0;for(n?(s=n._length,u=n._length):(n=shapePool.newElement(),s=0,u=0),g.push(n),r=0;r<d;r+=1){for(c=p[r].lengths,n.c=h[r].c,a=h[r].c?c.length:c.length+1,i=1;i<a;i+=1)if(f+(o=c[i-1]).addedLength<t.s)f+=o.addedLength,n.c=!1;else{if(f>t.e){n.c=!1;break}t.s<=f&&t.e>=f+o.addedLength?(this.addSegment(h[r].v[i-1],h[r].o[i-1],h[r].i[i],h[r].v[i],n,s,m),m=!1):(l=bez.getNewSegment(h[r].v[i-1],h[r].v[i],h[r].o[i-1],h[r].i[i],(t.s-f)/o.addedLength,(t.e-f)/o.addedLength,c[i-1]),this.addSegmentFromArray(l,n,s,m),m=!1,n.c=!1),f+=o.addedLength,s+=1}if(h[r].c&&c.length){if(o=c[i-1],f<=t.e){var v=c[i-1].addedLength;t.s<=f&&t.e>=f+v?(this.addSegment(h[r].v[i-1],h[r].o[i-1],h[r].i[0],h[r].v[0],n,s,m),m=!1):(l=bez.getNewSegment(h[r].v[i-1],h[r].v[0],h[r].o[i-1],h[r].i[0],(t.s-f)/v,(t.e-f)/v,c[i-1]),this.addSegmentFromArray(l,n,s,m),m=!1,n.c=!1)}else n.c=!1;f+=o.addedLength,s+=1}if(n._length&&(n.setXYAt(n.v[u][0],n.v[u][1],"i",u),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),f>t.e)break;r<d-1&&(n=shapePool.newElement(),m=!0,g.push(n),s=0)}return g},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var n,r=shapePool.newElement();r.c=e.c;var i,a,o,s,c,l,u,p,h,d,f,g,m=e._length,v=0;for(n=0;n<m;n+=1)i=e.v[n],o=e.o[n],a=e.i[n],i[0]===o[0]&&i[1]===o[1]&&i[0]===a[0]&&i[1]===a[1]?0!==n&&n!==m-1||e.c?(s=0===n?e.v[m-1]:e.v[n-1],l=(c=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(c/2,t)/c:0,u=f=i[0]+(s[0]-i[0])*l,p=g=i[1]-(i[1]-s[1])*l,h=u-(u-i[0])*roundCorner,d=p-(p-i[1])*roundCorner,r.setTripleAt(u,p,h,d,f,g,v),v+=1,s=n===m-1?e.v[0]:e.v[n+1],l=(c=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(c/2,t)/c:0,u=h=i[0]+(s[0]-i[0])*l,p=d=i[1]+(s[1]-i[1])*l,f=u-(u-i[0])*roundCorner,g=p-(p-i[1])*roundCorner,r.setTripleAt(u,p,h,d,f,g,v),v+=1):(r.setTripleAt(i[0],i[1],o[0],o[1],a[0],a[1],v),v+=1):(r.setTripleAt(e.v[n][0],e.v[n][1],e.o[n][0],e.o[n][1],e.i[n][0],e.i[n][1],v),v+=1);return r},RoundCornersModifier.prototype.processShapes=function(e){var t,n,r,i,a,o,s=this.shapes.length,c=this.rd.v;if(0!==c)for(n=0;n<s;n+=1){if(o=(a=this.shapes[n]).localShapeCollection,a.shape._mdf||this._mdf||e)for(o.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,i=a.shape.paths._length,r=0;r<i;r+=1)o.addShape(this.processPath(t[r],c));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,t){var n=t/100,r=[0,0],i=e._length,a=0;for(a=0;a<i;a+=1)r[0]+=e.v[a][0],r[1]+=e.v[a][1];r[0]/=i,r[1]/=i;var o,s,c,l,u,p,h=shapePool.newElement();for(h.c=e.c,a=0;a<i;a+=1)o=e.v[a][0]+(r[0]-e.v[a][0])*n,s=e.v[a][1]+(r[1]-e.v[a][1])*n,c=e.o[a][0]+(r[0]-e.o[a][0])*-n,l=e.o[a][1]+(r[1]-e.o[a][1])*-n,u=e.i[a][0]+(r[0]-e.i[a][0])*-n,p=e.i[a][1]+(r[1]-e.i[a][1])*-n,h.setTripleAt(o,s,c,l,u,p,a);return h},PuckerAndBloatModifier.prototype.processShapes=function(e){var t,n,r,i,a,o,s=this.shapes.length,c=this.amount.v;if(0!==c)for(n=0;n<s;n+=1){if(o=(a=this.shapes[n]).localShapeCollection,a.shape._mdf||this._mdf||e)for(o.releaseShapes(),a.shape._mdf=!0,t=a.shape.paths.shapes,i=a.shape.paths._length,r=0;r<i;r+=1)o.addShape(this.processPath(t[r],c));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,n,r,i,a){var o=a?-1:1,s=r.s.v[0]+(1-r.s.v[0])*(1-i),c=r.s.v[1]+(1-r.s.v[1])*(1-i);e.translate(r.p.v[0]*o*i,r.p.v[1]*o*i,r.p.v[2]),t.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),t.rotate(-r.r.v*o*i),t.translate(r.a.v[0],r.a.v[1],r.a.v[2]),n.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),n.scale(a?1/s:s,a?1/c:c),n.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(e,t,n,r){for(this.elem=e,this.arr=t,this.pos=n,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[n]);n>0;)n-=1,this._elements.unshift(t[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t]._processed=!1,"gr"===e[t].ty&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)e[n]._render=t,"gr"===e[n].ty&&this.changeGroupRender(e[n].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,n,r,i,a,o=!1;if(this._mdf||e){var s,c=Math.ceil(this.c.v);if(this._groups.length<c){for(;this._groups.length<c;){var l={it:this.cloneElements(this._elements),ty:"gr"};l.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,l),this._groups.splice(0,0,l),this._currentCopies+=1}this.elem.reloadShapes(),o=!0}for(a=0,r=0;r<=this._groups.length-1;r+=1){if(s=a<c,this._groups[r]._render=s,this.changeGroupRender(this._groups[r].it,s),!s){var u=this.elemsData[r].it,p=u[u.length-1];0!==p.transform.op.v?(p.transform.op._mdf=!0,p.transform.op.v=0):p.transform.op._mdf=!1}a+=1}this._currentCopies=c;var h=this.o.v,d=h%1,f=h>0?Math.floor(h):Math.ceil(h),g=this.pMatrix.props,m=this.rMatrix.props,v=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var b,y,x=0;if(h>0){for(;x<f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),x+=1;d&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,d,!1),x+=d)}else if(h<0){for(;x>f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),x-=1;d&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-d,!0),x-=d)}for(r=1===this.data.m?0:this._currentCopies-1,i=1===this.data.m?1:-1,a=this._currentCopies;a;){if(y=(n=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),0!==x){for((0!==r&&1===i||r!==this._currentCopies-1&&-1===i)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),b=0;b<y;b+=1)n[b]=this.matrix.props[b];this.matrix.reset()}else for(this.matrix.reset(),b=0;b<y;b+=1)n[b]=this.matrix.props[b];x+=1,a-=1,r+=i}}else for(a=this._currentCopies,r=0,i=1;a;)n=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,a-=1,r+=i;return o},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,n=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<n;t+=1)"o"!==this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(e,t){for(var n=0,r=this.o.length/2;n<r;){if(Math.abs(e[4*n]-e[4*t+2*n])>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var t,n,r,i=4*this.data.p;for(t=0;t<i;t+=1)n=t%4==0?100:255,r=Math.round(this.prop.v[t]*n),this.c[t]!==r&&(this.c[t]=r,this._cmdf=!e);if(this.o.length)for(i=this.prop.v.length,t=4*this.data.p;t<i;t+=1)n=t%2==0?100:1,r=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==r&&(this.o[t-4*this.data.p]=r,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(e,t,n,r){if(0===t)return"";var i,a=e.o,o=e.i,s=e.v,c=" M"+r.applyToPointStringified(s[0][0],s[0][1]);for(i=1;i<t;i+=1)c+=" C"+r.applyToPointStringified(a[i-1][0],a[i-1][1])+" "+r.applyToPointStringified(o[i][0],o[i][1])+" "+r.applyToPointStringified(s[i][0],s[i][1]);return n&&t&&(c+=" C"+r.applyToPointStringified(a[i-1][0],a[i-1][1])+" "+r.applyToPointStringified(o[0][0],o[0][1])+" "+r.applyToPointStringified(s[0][0],s[0][1]),c+="z"),c},audioControllerFactory=function(){function e(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].pause()},resume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].resume()},setRate:function(e){var t,n=this.audios.length;for(t=0;t<n;t+=1)this.audios[t].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):Howl?new Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),ImagePreloader=function(){var e=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(e,t,n){var r="";if(e.e)r=e.p;else if(t){var i=e.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),r=t+i}else r=n,r+=e.u?e.u:"",r+=e.p;return r}function i(e){var t=0,n=setInterval((function(){(e.getBBox().width||t>500)&&(this._imageLoaded(),clearInterval(n)),t+=1}).bind(this),50)}function a(e){var t={assetData:e},n=r(e,this.assetsPath,this.path);return assetLoader.load(n,(function(e){t.img=e,this._footageLoaded()}).bind(this),(function(){t.img={},this._footageLoaded()}).bind(this)),t}function o(){this._imageLoaded=t.bind(this),this._footageLoaded=n.bind(this),this.testImageLoaded=i.bind(this),this.createFootageData=a.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return o.prototype={loadAssets:function(e,t){var n;this.imagesLoadedCb=t;var r=e.length;for(n=0;n<r;n+=1)e[n].layers||(e[n].t&&"seq"!==e[n].t?3===e[n].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(e[n]))):(this.totalImages+=1,this.images.push(this._createImageData(e[n]))))},setAssetsPath:function(e){this.assetsPath=e||""},setPath:function(e){this.path=e||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(e){for(var t=0,n=this.images.length;t<n;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}return null},createImgData:function(t){var n=r(t,this.assetsPath,this.path),i=createTag("img");i.crossOrigin="anonymous",i.addEventListener("load",this._imageLoaded,!1),i.addEventListener("error",(function(){a.img=e,this._imageLoaded()}).bind(this),!1),i.src=n;var a={img:i,assetData:t};return a},createImageData:function(t){var n=r(t,this.assetsPath,this.path),i=createNS("image");isSafari?this.testImageLoaded(i):i.addEventListener("load",this._imageLoaded,!1),i.addEventListener("error",(function(){a.img=e,this._imageLoaded()}).bind(this),!1),i.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this._elementHelper.append?this._elementHelper.append(i):this._elementHelper.appendChild(i);var a={img:i,assetData:t};return a},imageLoaded:t,footageLoaded:n,setCacheType:function(e,t){"svg"===e?(this._elementHelper=t,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},o}(),featureSupport=function(){var e={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),e}(),filtersFactory=function(){var e={createFilter:function(e,t){var n=createNS("filter");return n.setAttribute("id",e),!0!==t&&(n.setAttribute("filterUnits","objectBoundingBox"),n.setAttribute("x","0%"),n.setAttribute("y","0%"),n.setAttribute("width","100%"),n.setAttribute("height","100%")),n},createAlphaToLuminanceFilter:function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}};return e}(),assetLoader=function(){function e(e){return e.response&&"object"==typeof e.response?e.response:e.response&&"string"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):null}return{load:function(t,n,r){var i,a=new XMLHttpRequest;try{a.responseType="json"}catch(o){}a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)i=e(a),n(i);else try{i=e(a),n(i)}catch(o){r&&r(o)}},a.open("GET",t,!0),a.send()}}}();function TextAnimatorProperty(e,t,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function TextAnimatorDataProperty(e,t,n){var r={propType:!1},i=PropertyFactory.getProp,a=t.a;this.a={r:a.r?i(e,a.r,0,degToRads,n):r,rx:a.rx?i(e,a.rx,0,degToRads,n):r,ry:a.ry?i(e,a.ry,0,degToRads,n):r,sk:a.sk?i(e,a.sk,0,degToRads,n):r,sa:a.sa?i(e,a.sa,0,degToRads,n):r,s:a.s?i(e,a.s,1,.01,n):r,a:a.a?i(e,a.a,1,0,n):r,o:a.o?i(e,a.o,0,.01,n):r,p:a.p?i(e,a.p,1,0,n):r,sw:a.sw?i(e,a.sw,0,0,n):r,sc:a.sc?i(e,a.sc,1,0,n):r,fc:a.fc?i(e,a.fc,1,0,n):r,fh:a.fh?i(e,a.fh,0,0,n):r,fs:a.fs?i(e,a.fs,0,.01,n):r,fb:a.fb?i(e,a.fb,0,.01,n):r,t:a.t?i(e,a.t,0,0,n):r},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,n),this.s.t=t.s.t}function LetterProps(e,t,n,r,i,a){this.o=e,this.sw=t,this.sc=n,this.fc=r,this.m=i,this.p=a,this._mdf={o:!0,sw:!!t,sc:!!n,fc:!!r,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){var e,t,n=this._textData.a.length,r=PropertyFactory.getProp;for(e=0;e<n;e+=1)t=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,r,i,a,o,s,c,l,u,p,h,d,f,g,m,v,b,y,x,C=this._moreOptions.alignment.v,w=this._animatorsData,k=this._textData,S=this.mHelper,O=this._renderType,E=this.renderedLetters.length,_=e.l;if(this._hasMaskedPath){if(x=this._pathData.m,!this._pathData.n||this._pathData._mdf){var I,P=x.v;for(this._pathData.r&&(P=P.reverse()),o={tLength:0,segments:[]},a=P._length-1,v=0,i=0;i<a;i+=1)I=bez.buildBezierData(P.v[i],P.v[i+1],[P.o[i][0]-P.v[i][0],P.o[i][1]-P.v[i][1]],[P.i[i+1][0]-P.v[i+1][0],P.i[i+1][1]-P.v[i+1][1]]),o.tLength+=I.segmentLength,o.segments.push(I),v+=I.segmentLength;i=a,x.v.c&&(I=bez.buildBezierData(P.v[i],P.v[0],[P.o[i][0]-P.v[i][0],P.o[i][1]-P.v[i][1]],[P.i[0][0]-P.v[0][0],P.i[0][1]-P.v[0][1]]),o.tLength+=I.segmentLength,o.segments.push(I),v+=I.segmentLength),this._pathData.pi=o}if(o=this._pathData.pi,s=this._pathData.f.v,h=0,p=1,l=0,u=!0,g=o.segments,s<0&&x.v.c)for(o.tLength<Math.abs(s)&&(s=-Math.abs(s)%o.tLength),p=(f=g[h=g.length-1].points).length-1;s<0;)s+=f[p].partialLength,(p-=1)<0&&(p=(f=g[h-=1].points).length-1);d=(f=g[h].points)[p-1],m=(c=f[p]).partialLength}a=_.length,n=0,r=0;var T,A,M,D,j,N=1.2*e.finalSize*.714,R=!0;M=w.length;var L,F,B,V,z,U,G,H,Y,q,W,X,K=-1,Z=s,$=h,Q=p,J=-1,ee="",te=this.defaultPropsArray;if(2===e.j||1===e.j){var ne=0,re=0,ie=2===e.j?-.5:-1,ae=0,oe=!0;for(i=0;i<a;i+=1)if(_[i].n){for(ne&&(ne+=re);ae<i;)_[ae].animatorJustifyOffset=ne,ae+=1;ne=0,oe=!0}else{for(A=0;A<M;A+=1)(T=w[A].a).t.propType&&(oe&&2===e.j&&(re+=T.t.v*ie),(j=w[A].s.getMult(_[i].anIndexes[A],k.a[A].s.totalChars)).length?ne+=T.t.v*j[0]*ie:ne+=T.t.v*j*ie);oe=!1}for(ne&&(ne+=re);ae<i;)_[ae].animatorJustifyOffset=ne,ae+=1}for(i=0;i<a;i+=1){if(S.reset(),V=1,_[i].n)n=0,r+=e.yOffset,r+=R?1:0,s=Z,R=!1,this._hasMaskedPath&&(p=Q,d=(f=g[h=$].points)[p-1],m=(c=f[p]).partialLength,l=0),ee="",W="",Y="",X="",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if(J!==_[i].line){switch(e.j){case 1:s+=v-e.lineWidths[_[i].line];break;case 2:s+=(v-e.lineWidths[_[i].line])/2}J=_[i].line}K!==_[i].ind&&(_[K]&&(s+=_[K].extra),s+=_[i].an/2,K=_[i].ind),s+=C[0]*_[i].an*.005;var se=0;for(A=0;A<M;A+=1)(T=w[A].a).p.propType&&((j=w[A].s.getMult(_[i].anIndexes[A],k.a[A].s.totalChars)).length?se+=T.p.v[0]*j[0]:se+=T.p.v[0]*j),T.a.propType&&((j=w[A].s.getMult(_[i].anIndexes[A],k.a[A].s.totalChars)).length?se+=T.a.v[0]*j[0]:se+=T.a.v[0]*j);for(u=!0;u;)l+m>=s+se||!f?(b=(s+se-l)/c.partialLength,F=d.point[0]+(c.point[0]-d.point[0])*b,B=d.point[1]+(c.point[1]-d.point[1])*b,S.translate(-C[0]*_[i].an*.005,-C[1]*N*.01),u=!1):f&&(l+=c.partialLength,(p+=1)>=f.length&&(p=0,g[h+=1]?f=g[h].points:x.v.c?(p=0,f=g[h=0].points):(l-=c.partialLength,f=null)),f&&(d=c,m=(c=f[p]).partialLength));L=_[i].an/2-_[i].add,S.translate(-L,0,0)}else L=_[i].an/2-_[i].add,S.translate(-L,0,0),S.translate(-C[0]*_[i].an*.005,-C[1]*N*.01,0);for(A=0;A<M;A+=1)(T=w[A].a).t.propType&&(j=w[A].s.getMult(_[i].anIndexes[A],k.a[A].s.totalChars),0===n&&0===e.j||(this._hasMaskedPath?j.length?s+=T.t.v*j[0]:s+=T.t.v*j:j.length?n+=T.t.v*j[0]:n+=T.t.v*j));for(e.strokeWidthAnim&&(U=e.sw||0),e.strokeColorAnim&&(z=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(G=[e.fc[0],e.fc[1],e.fc[2]]),A=0;A<M;A+=1)(T=w[A].a).a.propType&&((j=w[A].s.getMult(_[i].anIndexes[A],k.a[A].s.totalChars)).length?S.translate(-T.a.v[0]*j[0],-T.a.v[1]*j[1],T.a.v[2]*j[2]):S.translate(-T.a.v[0]*j,-T.a.v[1]*j,T.a.v[2]*j));for(A=0;A<M;A+=1)(T=w[A].a).s.propType&&((j=w[A].s.getMult(_[i].anIndexes[A],k.a[A].s.totalChars)).length?S.scale(1+(T.s.v[0]-1)*j[0],1+(T.s.v[1]-1)*j[1],1):S.scale(1+(T.s.v[0]-1)*j,1+(T.s.v[1]-1)*j,1));for(A=0;A<M;A+=1){if(T=w[A].a,j=w[A].s.getMult(_[i].anIndexes[A],k.a[A].s.totalChars),T.sk.propType&&(j.length?S.skewFromAxis(-T.sk.v*j[0],T.sa.v*j[1]):S.skewFromAxis(-T.sk.v*j,T.sa.v*j)),T.r.propType&&(j.length?S.rotateZ(-T.r.v*j[2]):S.rotateZ(-T.r.v*j)),T.ry.propType&&(j.length?S.rotateY(T.ry.v*j[1]):S.rotateY(T.ry.v*j)),T.rx.propType&&(j.length?S.rotateX(T.rx.v*j[0]):S.rotateX(T.rx.v*j)),T.o.propType&&(j.length?V+=(T.o.v*j[0]-V)*j[0]:V+=(T.o.v*j-V)*j),e.strokeWidthAnim&&T.sw.propType&&(j.length?U+=T.sw.v*j[0]:U+=T.sw.v*j),e.strokeColorAnim&&T.sc.propType)for(H=0;H<3;H+=1)j.length?z[H]+=(T.sc.v[H]-z[H])*j[0]:z[H]+=(T.sc.v[H]-z[H])*j;if(e.fillColorAnim&&e.fc){if(T.fc.propType)for(H=0;H<3;H+=1)j.length?G[H]+=(T.fc.v[H]-G[H])*j[0]:G[H]+=(T.fc.v[H]-G[H])*j;T.fh.propType&&(G=j.length?addHueToRGB(G,T.fh.v*j[0]):addHueToRGB(G,T.fh.v*j)),T.fs.propType&&(G=j.length?addSaturationToRGB(G,T.fs.v*j[0]):addSaturationToRGB(G,T.fs.v*j)),T.fb.propType&&(G=j.length?addBrightnessToRGB(G,T.fb.v*j[0]):addBrightnessToRGB(G,T.fb.v*j))}}for(A=0;A<M;A+=1)(T=w[A].a).p.propType&&(j=w[A].s.getMult(_[i].anIndexes[A],k.a[A].s.totalChars),this._hasMaskedPath?j.length?S.translate(0,T.p.v[1]*j[0],-T.p.v[2]*j[1]):S.translate(0,T.p.v[1]*j,-T.p.v[2]*j):j.length?S.translate(T.p.v[0]*j[0],T.p.v[1]*j[1],-T.p.v[2]*j[2]):S.translate(T.p.v[0]*j,T.p.v[1]*j,-T.p.v[2]*j));if(e.strokeWidthAnim&&(Y=U<0?0:U),e.strokeColorAnim&&(q="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),e.fillColorAnim&&e.fc&&(W="rgb("+Math.round(255*G[0])+","+Math.round(255*G[1])+","+Math.round(255*G[2])+")"),this._hasMaskedPath){if(S.translate(0,-e.ls),S.translate(0,C[1]*N*.01+r,0),k.p.p){y=(c.point[1]-d.point[1])/(c.point[0]-d.point[0]);var ce=180*Math.atan(y)/Math.PI;c.point[0]<d.point[0]&&(ce+=180),S.rotate(-ce*Math.PI/180)}S.translate(F,B,0),s-=C[0]*_[i].an*.005,_[i+1]&&K!==_[i+1].ind&&(s+=_[i].an/2,s+=.001*e.tr*e.finalSize)}else{switch(S.translate(n,r,0),e.ps&&S.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:S.translate(_[i].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[_[i].line]),0,0);break;case 2:S.translate(_[i].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[_[i].line])/2,0,0)}S.translate(0,-e.ls),S.translate(L,0,0),S.translate(C[0]*_[i].an*.005,C[1]*N*.01,0),n+=_[i].l+.001*e.tr*e.finalSize}"html"===O?ee=S.toCSS():"svg"===O?ee=S.to2dCSS():te=[S.props[0],S.props[1],S.props[2],S.props[3],S.props[4],S.props[5],S.props[6],S.props[7],S.props[8],S.props[9],S.props[10],S.props[11],S.props[12],S.props[13],S.props[14],S.props[15]],X=V}E<=i?(D=new LetterProps(X,Y,q,W,ee,te),this.renderedLetters.push(D),E+=1,this.lettersChangedFlag=!0):(D=this.renderedLetters[i],this.lettersChangedFlag=D.update(X,Y,q,W,ee,te)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(e,t,n,r,i,a){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,o=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,o=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,o=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,o=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,o=!0),!a.length||this.p[0]===a[0]&&this.p[1]===a[1]&&this.p[4]===a[4]&&this.p[5]===a[5]&&this.p[12]===a[12]&&this.p[13]===a[13]||(this.p=a,this._mdf.p=!0,o=!0),o},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var r;this.lock=!0,this._mdf=!1;var i=this.effectsSequence.length,a=e||this.data.d.k[this.keysIndex].s;for(r=0;r<i;r+=1)a=n!==this.keysIndex?this.effectsSequence[r](a,a.t):this.effectsSequence[r](this.currentData,a.t);t!==a&&this.setCurrentData(a),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,n=0,r=e.length;n<=r-1&&!(n===r-1||e[n+1].t>t);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,n,r=[],i=0,a=e.length,o=!1;i<a;)t=e.charCodeAt(i),FontManager.isCombinedCharacter(t)?r[r.length-1]+=e.charAt(i):t>=55296&&t<=56319?(n=e.charCodeAt(i+1))>=56320&&n<=57343?(o||FontManager.isModifier(t,n)?(r[r.length-1]+=e.substr(i,2),o=!1):r.push(e.substr(i,2)),i+=1):r.push(e.charAt(i)):t>56319?(n=e.charCodeAt(i+1),FontManager.isZeroWidthJoiner(t,n)?(o=!0,r[r.length-1]+=e.substr(i,2),i+=1):r.push(e.charAt(i))):FontManager.isZeroWidthJoiner(t)?(r[r.length-1]+=e.charAt(i),o=!0):r.push(e.charAt(i)),i+=1;return r},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,n,r,i,a,o,s,c=this.elem.globalData.fontManager,l=this.data,u=[],p=0,h=l.m.g,d=0,f=0,g=0,m=[],v=0,b=0,y=c.getFontByName(e.f),x=0,C=getFontProperties(y);e.fWeight=C.weight,e.fStyle=C.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),n=e.finalText.length,e.finalLineHeight=e.lh;var w,k=e.tr/1e3*e.finalSize;if(e.sz)for(var S,O,E=!0,_=e.sz[0],I=e.sz[1];E;){S=0,v=0,n=(O=this.buildFinalText(e.t)).length,k=e.tr/1e3*e.finalSize;var P=-1;for(t=0;t<n;t+=1)w=O[t].charCodeAt(0),r=!1," "===O[t]?P=t:13!==w&&3!==w||(v=0,r=!0,S+=e.finalLineHeight||1.2*e.finalSize),c.chars?(s=c.getCharData(O[t],y.fStyle,y.fFamily),x=r?0:s.w*e.finalSize/100):x=c.measureText(O[t],e.f,e.finalSize),v+x>_&&" "!==O[t]?(-1===P?n+=1:t=P,S+=e.finalLineHeight||1.2*e.finalSize,O.splice(t,P===t?1:0,"\r"),P=-1,v=0):(v+=x,v+=k);S+=y.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&I<S?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=O,n=e.finalText.length,E=!1)}v=-k,x=0;var T,A=0;for(t=0;t<n;t+=1)if(r=!1,13===(w=(T=e.finalText[t]).charCodeAt(0))||3===w?(A=0,m.push(v),b=v>b?v:b,v=-2*k,i="",r=!0,g+=1):i=T,c.chars?(s=c.getCharData(T,y.fStyle,c.getFontByName(e.f).fFamily),x=r?0:s.w*e.finalSize/100):x=c.measureText(i,e.f,e.finalSize)," "===T?A+=x+k:(v+=x+k+A,A=0),u.push({l:x,an:x,add:d,n:r,anIndexes:[],val:i,line:g,animatorJustifyOffset:0}),2==h){if(d+=x,""===i||" "===i||t===n-1){for(""!==i&&" "!==i||(d-=x);f<=t;)u[f].an=d,u[f].ind=p,u[f].extra=x,f+=1;p+=1,d=0}}else if(3==h){if(d+=x,""===i||t===n-1){for(""===i&&(d-=x);f<=t;)u[f].an=d,u[f].ind=p,u[f].extra=x,f+=1;d=0,p+=1}}else u[p].ind=p,u[p].extra=0,p+=1;if(e.l=u,b=v>b?v:b,m.push(v),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=b,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=m;var M,D,j,N,R=l.a;o=R.length;var L=[];for(a=0;a<o;a+=1){for((M=R[a]).a.sc&&(e.strokeColorAnim=!0),M.a.sw&&(e.strokeWidthAnim=!0),(M.a.fc||M.a.fh||M.a.fs||M.a.fb)&&(e.fillColorAnim=!0),N=0,j=M.s.b,t=0;t<n;t+=1)(D=u[t]).anIndexes[a]=N,(1==j&&""!==D.val||2==j&&""!==D.val&&" "!==D.val||3==j&&(D.n||" "==D.val||t==n-1)||4==j&&(D.n||t==n-1))&&(1===M.s.rn&&L.push(N),N+=1);l.a[a].s.totalChars=N;var F,B=-1;if(1===M.s.rn)for(t=0;t<n;t+=1)B!=(D=u[t]).anIndexes[a]&&(B=D.anIndexes[a],F=L.splice(Math.floor(Math.random()*L.length),1)[0]),D.anIndexes[a]=F}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=y.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var n=this.copyData({},this.data.d.k[t].s);n=this.copyData(n,e),this.data.d.k[t].s=n,this.recalculate(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,t=Math.min,n=Math.floor;function r(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),this.e="e"in t?PropertyFactory.getProp(e,t.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var i=0,a=0,o=1,s=1;this.ne.v>0?i=this.ne.v/100:a=-this.ne.v/100,this.xe.v>0?o=1-this.xe.v/100:s=1+this.xe.v/100;var c=BezierFactory.getBezierEasing(i,a,o,s).get,l=0,u=this.finalS,p=this.finalE,h=this.data.sh;if(2===h)l=c(l=p===u?r>=p?1:0:e(0,t(.5/(p-u)+(r-u)/(p-u),1)));else if(3===h)l=c(l=p===u?r>=p?0:1:1-e(0,t(.5/(p-u)+(r-u)/(p-u),1)));else if(4===h)p===u?l=0:(l=e(0,t(.5/(p-u)+(r-u)/(p-u),1)))<.5?l*=2:l=1-2*(l-.5),l=c(l);else if(5===h){if(p===u)l=0;else{var d=p-u,f=-d/2+(r=t(e(0,r+.5-u),p-u)),g=d/2;l=Math.sqrt(1-f*f/(g*g))}l=c(l)}else 6===h?(p===u?l=0:(r=t(e(0,r+.5-u),p-u),l=(1+Math.cos(Math.PI+2*Math.PI*r/(p-u)))/2),l=c(l)):(r>=n(u)&&(l=e(0,t(r-u<0?t(p,1)-(u-r):p-r,1))),l=c(l));return l*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/t,r=this.s.v/t+n,i=this.e.v/t+n;if(r>i){var a=r;r=i,i=a}this.finalS=r,this.finalE=i}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(e,t,n){return new r(e,t,n)}}}(),poolFactory=function(e,t,n){var r=0,i=e,a=createSizedArray(i);return{newElement:function(){return r?a[r-=1]:t()},release:function(e){r===i&&(a=pooling.double(a),i*=2),n&&n(e),a[r]=e,r+=1}}},pooling={double:function(e){return e.concat(createSizedArray(e.length))}},pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)})),shapePool=(factory=poolFactory(4,(function(){return new ShapePath}),(function(e){var t,n=e._length;for(t=0;t<n;t+=1)pointPool.release(e.v[t]),pointPool.release(e.i[t]),pointPool.release(e.o[t]),e.v[t]=null,e.i[t]=null,e.o[t]=null;e._length=0,e.c=!1})),factory.clone=function(e){var t,n=factory.newElement(),r=void 0===e._length?e.v.length:e._length;for(n.setLength(r),n.c=e.c,t=0;t<r;t+=1)n.setTripleAt(e.v[t][0],e.v[t][1],e.o[t][0],e.o[t][1],e.i[t][0],e.i[t][1],t);return n},factory),factory,shapeCollectionPool=function(){var e={newShapeCollection:function(){return t?r[t-=1]:new ShapeCollection},release:function(e){var i,a=e._length;for(i=0;i<a;i+=1)shapePool.release(e.shapes[i]);e._length=0,t===n&&(r=pooling.double(r),n*=2),r[t]=e,t+=1}},t=0,n=4,r=createSizedArray(n);return e}(),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(e){var t,n=e.lengths.length;for(t=0;t<n;t+=1)bezierLengthPool.release(e.lengths[t]);e.lengths.length=0})),bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}})),markerParser=function(){function e(e){for(var t,n=e.split("\r\n"),r={},i=0,a=0;a<n.length;a+=1)2===(t=n[a].split(":")).length&&(r[t[0]]=t[1].trim(),i+=1);if(0===i)throw new Error;return r}return function(t){for(var n=[],r=0;r<t.length;r+=1){var i=t[r],a={time:i.tm,duration:i.dr};try{a.payload=JSON.parse(t[r].cm)}catch(o){try{a.payload=e(t[r].cm)}catch(s){a.payload={name:t[r]}}}n.push(a)}return n}}();function BaseRenderer(){}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(t&&t.title){var r=createNS("title"),i=createElementID();r.setAttribute("id",i),r.textContent=t.title,this.svgElement.appendChild(r),n+=i}if(t&&t.description){var a=createNS("desc"),o=createElementID();a.setAttribute("id",o),a.textContent=t.description,this.svgElement.appendChild(a),n+=" "+o}n&&this.svgElement.setAttribute("aria-labelledby",n);var s=createNS("defs");this.svgElement.appendChild(s);var c=createNS("g");this.svgElement.appendChild(c),this.layerElement=c,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&!1===t.hideOnTransparent),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"}},this.globalData={_mdf:!1,frameNum:-1,defs:s,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",className:t&&t.className||"",id:t&&t.id||""},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(e,t,n){this.data=e,this.element=t,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,i,a=this.globalData.defs,o=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(o),this.solidPath="";var s,c,l,u,p,h,d=this.masksProperties,f=0,g=[],m=createElementID(),v="clipPath",b="clip-path";for(r=0;r<o;r+=1)if(("a"!==d[r].mode&&"n"!==d[r].mode||d[r].inv||100!==d[r].o.k||d[r].o.x)&&(v="mask",b="mask"),"s"!==d[r].mode&&"i"!==d[r].mode||0!==f?l=null:((l=createNS("rect")).setAttribute("fill","#ffffff"),l.setAttribute("width",this.element.comp.data.w||0),l.setAttribute("height",this.element.comp.data.h||0),g.push(l)),i=createNS("path"),"n"===d[r].mode)this.viewData[r]={op:PropertyFactory.getProp(this.element,d[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,d[r],3),elem:i,lastPath:""},a.appendChild(i);else{var y;if(f+=1,i.setAttribute("fill","s"===d[r].mode?"#000000":"#ffffff"),i.setAttribute("clip-rule","nonzero"),0!==d[r].x.k?(v="mask",b="mask",h=PropertyFactory.getProp(this.element,d[r].x,0,null,this.element),y=createElementID(),(u=createNS("filter")).setAttribute("id",y),(p=createNS("feMorphology")).setAttribute("operator","erode"),p.setAttribute("in","SourceGraphic"),p.setAttribute("radius","0"),u.appendChild(p),a.appendChild(u),i.setAttribute("stroke","s"===d[r].mode?"#000000":"#ffffff")):(p=null,h=null),this.storedData[r]={elem:i,x:h,expan:p,lastPath:"",lastOperator:"",filterId:y,lastRadius:0},"i"===d[r].mode){c=g.length;var x=createNS("g");for(s=0;s<c;s+=1)x.appendChild(g[s]);var C=createNS("mask");C.setAttribute("mask-type","alpha"),C.setAttribute("id",m+"_"+f),C.appendChild(i),a.appendChild(C),x.setAttribute("mask","url("+locationHref+"#"+m+"_"+f+")"),g.length=0,g.push(x)}else g.push(i);d[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:i,lastPath:"",op:PropertyFactory.getProp(this.element,d[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,d[r],3),invRect:l},this.viewData[r].prop.k||this.drawPath(d[r],this.viewData[r].prop.v,this.viewData[r])}for(this.maskElement=createNS(v),o=g.length,r=0;r<o;r+=1)this.maskElement.appendChild(g[r]);f>0&&(this.maskElement.setAttribute("id",m),this.element.maskedElement.setAttribute(b,"url("+locationHref+"#"+m+")"),a.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(e,t){this.elem=e,this.pos=t}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(e,t,n){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=n,this.lvl=t,this._isAnimated=!!n.k;for(var r=0,i=e.length;r<i;){if(e[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGTransformData(e,t,n){this.transform={mProps:e,op:t,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n}function SVGGradientFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,n)}function SVGGradientStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,n),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(e){var t,n,r=this.layers.length;for(this.completeLayers=!0,t=r-1;t>=0;t-=1)this.elements[t]||(n=this.layers[t]).ip-n.st<=e-this.layers[t].st&&n.op-n.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e);default:return this.createNull(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){var t;this.completeLayers=!1;var n,r=e.length,i=this.layers.length;for(t=0;t<r;t+=1)for(n=0;n<i;){if(this.layers[n].id===e[t].id){this.layers[n]=e[t];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,n){for(var r=this.elements,i=this.layers,a=0,o=i.length;a<o;)i[a].ind==t&&(r[a]&&!0!==r[a]?(n.push(r[a]),r[a].setAsParent(),void 0!==i[a].parent?this.buildElementParenting(e,i[a].parent,n):e.setHierarchy(n)):(this.buildItem(a),this.addPendingElement(e))),a+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length;for(t=0;t<n;t+=1)if(e[t].xt){var r=this.createComp(e[t]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRenderer.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRenderer.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRenderer.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},SVGRenderer.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var n=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",e.w),r.setAttribute("height",e.h),r.setAttribute("x",0),r.setAttribute("y",0);var i=createElementID();n.setAttribute("id",i),n.appendChild(r),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+i+")"),t.appendChild(n),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRenderer.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){t[e]=!0;var n=this.createItem(this.layers[e]);t[e]=n,expressionsPlugin&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,e),this.layers[e].tt&&(this.elements[e-1]&&!0!==this.elements[e-1]?n.setMatte(t[e-1].layerId):(this.buildItem(e-1),this.addPendingElement(n)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,n=this.elements.length;t<n;){if(this.elements[t]===e){e.setMatte(this.elements[t-1].layerId);break}t+=1}}},SVGRenderer.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){var t;null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var n=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<n;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){for(var r,i=0;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(r=this.elements[i].getBaseElement()),i+=1;r?this.layerElement.insertBefore(n,r):this.layerElement.appendChild(n)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRenderer.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRenderer.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(e){if(1!==e[0]||0!==e[1]||0!==e[4]||1!==e[5]||0!==e[12]||0!==e[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(e);var t=this.contextData.cTr.props;this.transformMat.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var n=this.contextData.cTr.props;this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])}else this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRenderer.prototype.ctxOpacity=function(e){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=e<0?0:e,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=e<0?0:e,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(e){if(this.renderConfig.clearCanvas){e&&this.canvasContext.save();var t,n=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var r=this.contextData.saved[this.contextData.cArrPos];for(t=0;t<16;t+=1)r[t]=n[t];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(e){if(this.renderConfig.clearCanvas){e&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var t,n=this.contextData.saved[this.contextData.cArrPos],r=this.contextData.cTr.props;for(t=0;t<16;t+=1)r[t]=n[t];this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),n=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=n,this.globalData.currentGlobalAlpha!==n&&(this.canvasContext.globalAlpha=n,this.globalData.currentGlobalAlpha=n)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var n="0px 0px 0px";t.transformOrigin=n,t.mozTransformOrigin=n,t.webkitTransformOrigin=n,t["-webkit-transform"]=n,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var e,t,n,r;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(e=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",e*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",t*this.renderConfig.dpr)):(e=this.canvasContext.canvas.width*this.renderConfig.dpr,t=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var i=this.renderConfig.preserveAspectRatio.split(" "),a=i[1]||"meet",o=i[0]||"xMidYMid",s=o.substr(0,4),c=o.substr(4);n=e/t,(r=this.transformCanvas.w/this.transformCanvas.h)>n&&"meet"===a||r<n&&"slice"===a?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===s&&(r<n&&"meet"===a||r>n&&"slice"===a)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===s&&(r<n&&"meet"===a||r>n&&"slice"===a)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===c&&(r>n&&"meet"===a||r<n&&"slice"===a)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===c&&(r>n&&"meet"===a||r<n&&"slice"===a)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),e=(this.layers?this.layers.length:0)-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){var n;this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var r=this.layers.length;for(this.completeLayers||this.checkLayers(e),n=0;n<r;n+=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(e-this.layers[n].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){var n=this.createItem(this.layers[e],this,this.globalData);t[e]=n,n.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){var r=this.layers[t];if(r.ddd&&this.supports3d)this.addTo3dContainer(n,t);else if(this.threeDElements)this.addTo3dContainer(n,t);else{for(var i,a,o=0;o<t;)this.elements[o]&&!0!==this.elements[o]&&this.elements[o].getBaseElement&&(a=this.elements[o],i=(this.layers[o].ddd?this.getThreeDContainerByPos(o):a.getBaseElement())||i),o+=1;i?r.ddd&&this.supports3d||this.layerElement.insertBefore(n,i):r.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRenderer.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRenderer.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRenderer.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)},HybridRenderer.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(e){for(var t=0,n=this.threeDElements.length;t<n;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRenderer.prototype.createThreeDContainer=function(e,t){var n,r,i=createTag("div");styleDiv(i);var a=createTag("div");if(styleDiv(a),"3d"===t){(n=i.style).width=this.globalData.compSize.w+"px",n.height=this.globalData.compSize.h+"px";var o="50% 50%";n.webkitTransformOrigin=o,n.mozTransformOrigin=o,n.transformOrigin=o;var s="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(r=a.style).transform=s,r.webkitTransform=s}i.appendChild(a);var c={container:a,perspectiveElem:i,startPos:e,endPos:e,type:t};return this.threeDElements.push(c),c},HybridRenderer.prototype.build3dContainers=function(){var e,t,n=this.layers.length,r="";for(e=0;e<n;e+=1)this.layers[e].ddd&&3!==this.layers[e].ty?("3d"!==r&&(r="3d",t=this.createThreeDContainer(e,"3d")),t.endPos=Math.max(t.endPos,e)):("2d"!==r&&(r="2d",t=this.createThreeDContainer(e,"2d")),t.endPos=Math.max(t.endPos,e));for(e=(n=this.threeDElements.length)-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(e,t){for(var n=0,r=this.threeDElements.length;n<r;){if(t<=this.threeDElements[n].endPos){for(var i,a=this.threeDElements[n].startPos;a<t;)this.elements[a]&&this.elements[a].getBaseElement&&(i=this.elements[a].getBaseElement()),a+=1;i?this.threeDElements[n].container.insertBefore(e,i):this.threeDElements[n].container.appendChild(e);break}n+=1}},HybridRenderer.prototype.configAnimation=function(e){var t=createTag("div"),n=this.animationItem.wrapper,r=t.style;r.width=e.w+"px",r.height=e.h+"px",this.resizerElem=t,styleDiv(t),r.transformStyle="flat",r.mozTransformStyle="flat",r.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),n.appendChild(t),r.overflow="hidden";var i=createNS("svg");i.setAttribute("width","1"),i.setAttribute("height","1"),styleDiv(i),this.resizerElem.appendChild(i);var a=createNS("defs");i.appendChild(a),this.data=e,this.setupGlobalData(e,i),this.globalData.defs=a,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){var e;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var e,t,n,r,i=this.animationItem.wrapper.offsetWidth,a=this.animationItem.wrapper.offsetHeight,o=i/a;this.globalData.compSize.w/this.globalData.compSize.h>o?(e=i/this.globalData.compSize.w,t=i/this.globalData.compSize.w,n=0,r=(a-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(e=a/this.globalData.compSize.h,t=a/this.globalData.compSize.h,n=(i-this.globalData.compSize.w*(a/this.globalData.compSize.h))/2,r=0);var s=this.resizerElem.style;s.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+n+","+r+",0,1)",s.transform=s.webkitTransform},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,n=this.globalData.compSize.h,r=this.threeDElements.length;for(e=0;e<r;e+=1){var i=this.threeDElements[e].perspectiveElem.style;i.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(n,2))+"px",i.perspective=i.webkitPerspective}}},HybridRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length,r=createTag("div");for(t=0;t<n;t+=1)if(e[t].xt){var i=this.createComp(e[t],r,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var t,n=this.element.finalTransform.mat,r=this.masksProperties.length;for(t=0;t<r;t+=1)if((this.viewData[t].prop._mdf||e)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||e)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[t].invRect.setAttribute("transform",n.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||e))){var i=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[t].filterId+")")),i.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,n){var r,i,a=" M"+t.v[0][0]+","+t.v[0][1];for(i=t._length,r=1;r<i;r+=1)a+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[r][0]+","+t.i[r][1]+" "+t.v[r][0]+","+t.v[r][1];if(t.c&&i>1&&(a+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),n.lastPath!==a){var o="";n.elem&&(t.c&&(o=e.inv?this.solidPath+a:a),n.elem.setAttribute("d",o)),n.lastPath=a}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var n,r=this.dynamicProperties.length;for(n=0;n<r;n+=1)(t||this._isParent&&"transform"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,n=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<r;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),n=0;n<r;n+=1)e=this.hierarchy[n].finalTransform.mProp.v.props,t.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var n,r=!0,i=this.comp;r;)i.finalTransform?(i.data.hasMask&&t.splice(0,0,i.finalTransform),i=i.comp):r=!1;var a,o=t.length;for(n=0;n<o;n+=1)a=t[n].mat.applyToPointArray(0,0,0),e=[e[0]-a[0],e[1]-a[1],0];return e},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,n){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,t),this.setGradientOpacity(t,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var n=createElementID(),r=createNS(1===t.t?"linearGradient":"radialGradient");r.setAttribute("id",n),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var i,a,o,s=[];for(o=4*t.g.p,a=0;a<o;a+=4)i=createNS("stop"),r.appendChild(i),s.push(i);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+n+")"),this.gf=r,this.cst=s},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var n,r,i,a=createNS("mask"),o=createNS("path");a.appendChild(o);var s=createElementID(),c=createElementID();a.setAttribute("id",c);var l=createNS(1===e.t?"linearGradient":"radialGradient");l.setAttribute("id",s),l.setAttribute("spreadMethod","pad"),l.setAttribute("gradientUnits","userSpaceOnUse"),i=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var u=this.stops;for(r=4*e.g.p;r<i;r+=2)(n=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),l.appendChild(n),u.push(n);o.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+s+")"),"gs"===e.ty&&(o.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),1===e.lj&&o.setAttribute("stroke-miterlimit",e.ml)),this.of=l,this.ms=a,this.ost=u,this.maskId=c,t.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=function(){var e=new Matrix,t=new Matrix;function n(e,t,n){(n||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(n||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function r(n,r,i){var a,o,s,c,l,u,p,h,d,f,g,m=r.styles.length,v=r.lvl;for(u=0;u<m;u+=1){if(c=r.sh._mdf||i,r.styles[u].lvl<v){for(h=t.reset(),f=v-r.styles[u].lvl,g=r.transformers.length-1;!c&&f>0;)c=r.transformers[g].mProps._mdf||c,f-=1,g-=1;if(c)for(f=v-r.styles[u].lvl,g=r.transformers.length-1;f>0;)d=r.transformers[g].mProps.v.props,h.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),f-=1,g-=1}else h=e;if(o=(p=r.sh.paths)._length,c){for(s="",a=0;a<o;a+=1)(l=p.shapes[a])&&l._length&&(s+=buildShapeString(l,l._length,l.c,h));r.caches[u]=s}else s=r.caches[u];r.styles[u].d+=!0===n.hd?"":s,r.styles[u]._mdf=c||r.styles[u]._mdf}}function i(e,t,n){var r=t.style;(t.c._mdf||n)&&r.pElem.setAttribute("fill","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n)&&r.pElem.setAttribute("fill-opacity",t.o.v)}function a(e,t,n){o(e,t,n),s(0,t,n)}function o(e,t,n){var r,i,a,o,s,c=t.gf,l=t.g._hasOpacity,u=t.s.v,p=t.e.v;if(t.o._mdf||n){var h="gf"===e.ty?"fill-opacity":"stroke-opacity";t.style.pElem.setAttribute(h,t.o.v)}if(t.s._mdf||n){var d=1===e.t?"x1":"cx",f="x1"===d?"y1":"cy";c.setAttribute(d,u[0]),c.setAttribute(f,u[1]),l&&!t.g._collapsable&&(t.of.setAttribute(d,u[0]),t.of.setAttribute(f,u[1]))}if(t.g._cmdf||n){r=t.cst;var g=t.g.c;for(a=r.length,i=0;i<a;i+=1)(o=r[i]).setAttribute("offset",g[4*i]+"%"),o.setAttribute("stop-color","rgb("+g[4*i+1]+","+g[4*i+2]+","+g[4*i+3]+")")}if(l&&(t.g._omdf||n)){var m=t.g.o;for(a=(r=t.g._collapsable?t.cst:t.ost).length,i=0;i<a;i+=1)o=r[i],t.g._collapsable||o.setAttribute("offset",m[2*i]+"%"),o.setAttribute("stop-opacity",m[2*i+1])}if(1===e.t)(t.e._mdf||n)&&(c.setAttribute("x2",p[0]),c.setAttribute("y2",p[1]),l&&!t.g._collapsable&&(t.of.setAttribute("x2",p[0]),t.of.setAttribute("y2",p[1])));else if((t.s._mdf||t.e._mdf||n)&&(s=Math.sqrt(Math.pow(u[0]-p[0],2)+Math.pow(u[1]-p[1],2)),c.setAttribute("r",s),l&&!t.g._collapsable&&t.of.setAttribute("r",s)),t.e._mdf||t.h._mdf||t.a._mdf||n){s||(s=Math.sqrt(Math.pow(u[0]-p[0],2)+Math.pow(u[1]-p[1],2)));var v=Math.atan2(p[1]-u[1],p[0]-u[0]),b=t.h.v;b>=1?b=.99:b<=-1&&(b=-.99);var y=s*b,x=Math.cos(v+t.a.v)*y+u[0],C=Math.sin(v+t.a.v)*y+u[1];c.setAttribute("fx",x),c.setAttribute("fy",C),l&&!t.g._collapsable&&(t.of.setAttribute("fx",x),t.of.setAttribute("fy",C))}}function s(e,t,n){var r=t.style,i=t.d;i&&(i._mdf||n)&&i.dashStr&&(r.pElem.setAttribute("stroke-dasharray",i.dashStr),r.pElem.setAttribute("stroke-dashoffset",i.dashoffset[0])),t.c&&(t.c._mdf||n)&&r.pElem.setAttribute("stroke","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n)&&r.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||n)&&(r.pElem.setAttribute("stroke-width",t.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",t.w.v))}return{createRenderFunction:function(e){switch(e.ty){case"fl":return i;case"gf":return o;case"gs":return a;case"st":return s;case"sh":case"el":case"rc":case"sr":return r;case"tr":return n;default:return null}}}}();function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(e,t,n,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i,a=4;"rc"===t.ty?a=5:"el"===t.ty?a=6:"sr"===t.ty&&(a=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,a,e);var o,s=n.length;for(i=0;i<s;i+=1)n[i].closed||(o={transforms:r.addTransformSequence(n[i].transforms),trNodes:[]},this.styledShapes.push(o),n[i].elements.push(o))}function BaseElement(){}function NullElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initFrame(),this.initTransform(e,t,n),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(e,t,n){this.initElement(e,t,n)}function AudioElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,n),this._isPlaying=!1,this._canPlay=!1;var r=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(r),this._currentTime=0,this.globalData.audioController.addAudio(this),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function FootageElement(e,t,n){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(e,t,n)}function SVGCompElement(e,t,n){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGTextLottieElement(e,t,n){this.textSpans=[],this.renderType="svg",this.initElement(e,t,n)}function SVGShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,n),this.prevViewData=[]}function SVGTintFilter(e,t){this.filterManager=t;var n=createNS("feColorMatrix");if(n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),e.appendChild(n),(n=createNS("feColorMatrix")).setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result","f2"),e.appendChild(n),this.matrixFilter=n,100!==t.effectElements[2].p.v||t.effectElements[2].p.k){var r,i=createNS("feMerge");e.appendChild(i),(r=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),i.appendChild(r),(r=createNS("feMergeNode")).setAttribute("in","f2"),i.appendChild(r)}}function SVGFillFilter(e,t){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),e.appendChild(n),this.matrixFilter=n}function SVGGaussianBlurEffect(e,t){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var n=createNS("feGaussianBlur");e.appendChild(n),this.feGaussianBlur=n}function SVGStrokeEffect(e,t){this.initialized=!1,this.filterManager=t,this.elem=e,this.paths=[]}function SVGTritoneFilter(e,t){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),e.appendChild(n);var r=createNS("feComponentTransfer");r.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(r),this.matrixFilter=r;var i=createNS("feFuncR");i.setAttribute("type","table"),r.appendChild(i),this.feFuncR=i;var a=createNS("feFuncG");a.setAttribute("type","table"),r.appendChild(a),this.feFuncG=a;var o=createNS("feFuncB");o.setAttribute("type","table"),r.appendChild(o),this.feFuncB=o}function SVGProLevelsFilter(e,t){this.filterManager=t;var n=this.filterManager.effectElements,r=createNS("feComponentTransfer");(n[10].p.k||0!==n[10].p.v||n[11].p.k||1!==n[11].p.v||n[12].p.k||1!==n[12].p.v||n[13].p.k||0!==n[13].p.v||n[14].p.k||1!==n[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",r)),(n[17].p.k||0!==n[17].p.v||n[18].p.k||1!==n[18].p.v||n[19].p.k||1!==n[19].p.v||n[20].p.k||0!==n[20].p.v||n[21].p.k||1!==n[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",r)),(n[24].p.k||0!==n[24].p.v||n[25].p.k||1!==n[25].p.v||n[26].p.k||1!==n[26].p.v||n[27].p.k||0!==n[27].p.v||n[28].p.k||1!==n[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",r)),(n[31].p.k||0!==n[31].p.v||n[32].p.k||1!==n[32].p.v||n[33].p.k||1!==n[33].p.v||n[34].p.k||0!==n[34].p.v||n[35].p.k||1!==n[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",r)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(r.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(r),r=createNS("feComponentTransfer")),(n[3].p.k||0!==n[3].p.v||n[4].p.k||1!==n[4].p.v||n[5].p.k||1!==n[5].p.v||n[6].p.k||0!==n[6].p.v||n[7].p.k||1!==n[7].p.v)&&(r.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(r),this.feFuncRComposed=this.createFeFunc("feFuncR",r),this.feFuncGComposed=this.createFeFunc("feFuncG",r),this.feFuncBComposed=this.createFeFunc("feFuncB",r))}function SVGDropShadowEffect(e,t){var n=t.container.globalData.renderConfig.filterSize;e.setAttribute("x",n.x),e.setAttribute("y",n.y),e.setAttribute("width",n.width),e.setAttribute("height",n.height),this.filterManager=t;var r=createNS("feGaussianBlur");r.setAttribute("in","SourceAlpha"),r.setAttribute("result","drop_shadow_1"),r.setAttribute("stdDeviation","0"),this.feGaussianBlur=r,e.appendChild(r);var i=createNS("feOffset");i.setAttribute("dx","25"),i.setAttribute("dy","0"),i.setAttribute("in","drop_shadow_1"),i.setAttribute("result","drop_shadow_2"),this.feOffset=i,e.appendChild(i);var a=createNS("feFlood");a.setAttribute("flood-color","#00ff00"),a.setAttribute("flood-opacity","1"),a.setAttribute("result","drop_shadow_3"),this.feFlood=a,e.appendChild(a);var o=createNS("feComposite");o.setAttribute("in","drop_shadow_3"),o.setAttribute("in2","drop_shadow_2"),o.setAttribute("operator","in"),o.setAttribute("result","drop_shadow_4"),e.appendChild(o);var s,c=createNS("feMerge");e.appendChild(c),s=createNS("feMergeNode"),c.appendChild(s),(s=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=s,this.feMerge=c,this.originalNodeAdded=!1,c.appendChild(s)}ShapeTransformManager.prototype={addTransformSequence:function(e){var t,n=e.length,r="_";for(t=0;t<n;t+=1)r+=e[t].transform.key+"_";var i=this.sequences[r];return i||(i={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=i,this.sequenceList.push(i)),i},processSequence:function(e,t){for(var n,r=0,i=e.transforms.length,a=t;r<i&&!t;){if(e.transforms[r].transform.mProps._mdf){a=!0;break}r+=1}if(a)for(e.finalTransform.reset(),r=i-1;r>=0;r-=1)n=e.transforms[r].transform.mProps.v.props,e.finalTransform.transform(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);e._mdf=a},processSequences:function(e){var t,n=this.sequenceList.length;for(t=0;t<n;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var e=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(e),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,n){this.globalData=t,this.comp=n,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e,t,n,r=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var i=createNS("mask");i.setAttribute("id",this.layerId),i.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),i.appendChild(this.layerElement),r=i,this.globalData.defs.appendChild(i),featureSupport.maskType||1!=this.data.td||(i.setAttribute("mask-type","luminance"),e=createElementID(),t=filtersFactory.createFilter(e),this.globalData.defs.appendChild(t),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(n=createNS("g")).appendChild(this.layerElement),r=n,i.appendChild(n),n.setAttribute("filter","url("+locationHref+"#"+e+")"))}else if(2==this.data.td){var a=createNS("mask");a.setAttribute("id",this.layerId),a.setAttribute("mask-type","alpha");var o=createNS("g");a.appendChild(o),e=createElementID(),t=filtersFactory.createFilter(e);var s=createNS("feComponentTransfer");s.setAttribute("in","SourceGraphic"),t.appendChild(s);var c=createNS("feFuncA");c.setAttribute("type","table"),c.setAttribute("tableValues","1.0 0.0"),s.appendChild(c),this.globalData.defs.appendChild(t);var l=createNS("rect");l.setAttribute("width",this.comp.data.w),l.setAttribute("height",this.comp.data.h),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("fill","#ffffff"),l.setAttribute("opacity","0"),o.setAttribute("filter","url("+locationHref+"#"+e+")"),o.appendChild(l),o.appendChild(this.layerElement),r=o,featureSupport.maskType||(a.setAttribute("mask-type","luminance"),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),o.appendChild(l),n.appendChild(this.layerElement),r=n,o.appendChild(n)),this.globalData.defs.appendChild(a)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var u=createNS("clipPath"),p=createNS("path");p.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var h=createElementID();if(u.setAttribute("id",h),u.appendChild(p),this.globalData.defs.appendChild(u),this.checkMasks()){var d=createNS("g");d.setAttribute("clip-path","url("+locationHref+"#"+h+")"),d.appendChild(this.layerElement),this.transformedElement=d,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+h+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+e+")")}},IShapeElement.prototype={addShapeToModifiers:function(e){var t,n=this.shapeModifiers.length;for(t=0;t<n;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();for(e=(t=this.shapeModifiers.length)-1;e>=0&&!this.shapeModifiers[e].processShapes(this._isFirstFrame);e-=1);}},searchProcessedElement:function(e){for(var t=this.processedElements,n=0,r=t.length;n<r;){if(t[n].elem===e)return t[n].pos;n+=1}return 0},addProcessedElement:function(e,t){for(var n=this.processedElements,r=n.length;r;)if(n[r-=1].elem===e)return void(n[r].pos=t);n.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}},ITextElement.prototype.initElement=function(e,t,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,n),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(e,t){var n,r,i=t.length,a="";for(n=0;n<i;n+=1)r=t[n].ks.k,a+=buildShapeString(r,r.i.length,!0,e);return a},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,n,r,i){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n])/2,0,0)}t.translate(r,i,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var n,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var t=this.tm.v;this._currentTime=t}},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this.audio.volume(e)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){this.layerInterface=FootageInterface(this)},FootageElement.prototype.getFootageData=function(){return this.footageData},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var t=0,n=e.length,r=[],i="";t<n;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(r.push(i),i=""):i+=e[t],t+=1;return r.push(i),r},SVGTextLottieElement.prototype.buildNewText=function(){var e,t,n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var r=this.globalData.fontManager.getFontByName(n.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var i=n.fWeight,a=n.fStyle;this.layerElement.setAttribute("font-style",a),this.layerElement.setAttribute("font-weight",i)}this.layerElement.setAttribute("aria-label",n.t);var o,s=n.l||[],c=!!this.globalData.fontManager.chars;t=s.length;var l,u=this.mHelper,p="",h=this.data.singleShape,d=0,f=0,g=!0,m=.001*n.tr*n.finalSize;if(!h||c||n.sz){var v,b,y=this.textSpans.length;for(e=0;e<t;e+=1)c&&h&&0!==e||(o=y>e?this.textSpans[e]:createNS(c?"path":"text"),y<=e&&(o.setAttribute("stroke-linecap","butt"),o.setAttribute("stroke-linejoin","round"),o.setAttribute("stroke-miterlimit","4"),this.textSpans[e]=o,this.layerElement.appendChild(o)),o.style.display="inherit"),u.reset(),u.scale(n.finalSize/100,n.finalSize/100),h&&(s[e].n&&(d=-m,f+=n.yOffset,f+=g?1:0,g=!1),this.applyTextPropertiesToMatrix(n,u,s[e].line,d,f),d+=s[e].l||0,d+=m),c?(l=(v=(b=this.globalData.fontManager.getCharData(n.finalText[e],r.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily))&&b.data||{}).shapes?v.shapes[0].it:[],h?p+=this.createPathShape(u,l):o.setAttribute("d",this.createPathShape(u,l))):(h&&o.setAttribute("transform","translate("+u.props[12]+","+u.props[13]+")"),o.textContent=s[e].val,o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));h&&o&&o.setAttribute("d",p)}else{var x=this.textContainer,C="start";switch(n.j){case 1:C="end";break;case 2:C="middle";break;default:C="start"}x.setAttribute("text-anchor",C),x.setAttribute("letter-spacing",m);var w=this.buildTextContents(n.finalText);for(t=w.length,f=n.ps?n.ps[1]+n.ascent:0,e=0;e<t;e+=1)(o=this.textSpans[e]||createNS("tspan")).textContent=w[e],o.setAttribute("x",0),o.setAttribute("y",f),o.style.display="inherit",x.appendChild(o),this.textSpans[e]=o,f+=n.finalLineHeight;this.layerElement.appendChild(x)}for(;e<this.textSpans.length;)this.textSpans[e].style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var e,t;this._sizeChanged=!0;var n,r,i=this.textAnimator.renderedLetters,a=this.textProperty.currentData.l;for(t=a.length,e=0;e<t;e+=1)a[e].n||(n=i[e],r=this.textSpans[e],n._mdf.m&&r.setAttribute("transform",n.m),n._mdf.o&&r.setAttribute("opacity",n.o),n._mdf.sw&&r.setAttribute("stroke-width",n.sw),n._mdf.sc&&r.setAttribute("stroke",n.sc),n._mdf.fc&&r.setAttribute("fill",n.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,t,n,r,i=this.shapes.length,a=this.stylesList.length,o=[],s=!1;for(n=0;n<a;n+=1){for(r=this.stylesList[n],s=!1,o.length=0,e=0;e<i;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(r)&&(o.push(t),s=t._isAnimated||s);o.length>1&&s&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var n,r=new SVGStyleData(e,t),i=r.pElem;return"st"===e.ty?n=new SVGStrokeStyleData(this,e,r):"fl"===e.ty?n=new SVGFillStyleData(this,e,r):"gf"!==e.ty&&"gs"!==e.ty||(n=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,r),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),i.setAttribute("mask","url("+locationHref+"#"+n.maskId+")"))),"st"!==e.ty&&"gs"!==e.ty||(i.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),i.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),i.setAttribute("fill-opacity","0"),1===e.lj&&i.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&i.setAttribute("fill-rule","evenodd"),e.ln&&i.setAttribute("id",e.ln),e.cl&&i.setAttribute("class",e.cl),e.bm&&(i.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(r),this.addToAnimatedContents(e,n),n},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var n=TransformPropertyFactory.getTransformProperty(this,e,this),r=new SVGTransformData(n,n.o,t);return this.addToAnimatedContents(e,r),r},SVGShapeElement.prototype.createShapeElement=function(e,t,n){var r=4;"rc"===e.ty?r=5:"el"===e.ty?r=6:"sr"===e.ty&&(r=7);var i=new SVGShapeData(t,n,ShapePropertyFactory.getShapeProp(this,e,r,this));return this.shapes.push(i),this.addShapeToModifiers(i),this.addToAnimatedContents(e,i),i},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var n=0,r=this.animatedContents.length;n<r;){if(this.animatedContents[n].element===t)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var t,n=e.styles,r=this.stylesList.length;for(t=0;t<r;t+=1)this.stylesList[t].closed||n.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,n,r,i,a,o){var s,c,l,u,p,h,d=[].concat(a),f=e.length-1,g=[],m=[];for(s=f;s>=0;s-=1){if((h=this.searchProcessedElement(e[s]))?t[s]=n[h-1]:e[s]._render=o,"fl"===e[s].ty||"st"===e[s].ty||"gf"===e[s].ty||"gs"===e[s].ty)h?t[s].style.closed=!1:t[s]=this.createStyleElement(e[s],i),e[s]._render&&r.appendChild(t[s].style.pElem),g.push(t[s].style);else if("gr"===e[s].ty){if(h)for(l=t[s].it.length,c=0;c<l;c+=1)t[s].prevViewData[c]=t[s].it[c];else t[s]=this.createGroupElement(e[s]);this.searchShapes(e[s].it,t[s].it,t[s].prevViewData,t[s].gr,i+1,d,o),e[s]._render&&r.appendChild(t[s].gr)}else"tr"===e[s].ty?(h||(t[s]=this.createTransformElement(e[s],r)),u=t[s].transform,d.push(u)):"sh"===e[s].ty||"rc"===e[s].ty||"el"===e[s].ty||"sr"===e[s].ty?(h||(t[s]=this.createShapeElement(e[s],d,i)),this.setElementStyles(t[s])):"tm"===e[s].ty||"rd"===e[s].ty||"ms"===e[s].ty||"pb"===e[s].ty?(h?(p=t[s]).closed=!1:((p=ShapeModifiers.getModifier(e[s].ty)).init(this,e[s]),t[s]=p,this.shapeModifiers.push(p)),m.push(p)):"rp"===e[s].ty&&(h?(p=t[s]).closed=!0:(p=ShapeModifiers.getModifier(e[s].ty),t[s]=p,p.init(this,e,s,t),this.shapeModifiers.push(p),o=!1),m.push(p));this.addProcessedElement(e[s],s+1)}for(f=g.length,s=0;s<f;s+=1)g[s].closed=!0;for(f=m.length,s=0;s<f;s+=1)m[s].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var e;this.renderModifiers();var t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,t,n=this.animatedContents.length;for(e=0;e<n;e+=1)t=this.animatedContents[e],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",n[0]-t[0]+" 0 0 0 "+t[0]+" "+(n[1]-t[1])+" 0 0 0 "+t[1]+" "+(n[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 "+r+" 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+n+" 0")}},SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=3==n?0:t,i=2==n?0:t;this.feGaussianBlur.setAttribute("stdDeviation",r+" "+i);var a=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",a)}},SVGStrokeEffect.prototype.initialize=function(){var e,t,n,r,i=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,n=0):r=1+(n=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);n<r;n+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:n});if(3===this.filterManager.effectElements[10].p.v){var a=createNS("mask"),o=createElementID();a.setAttribute("id",o),a.setAttribute("mask-type","alpha"),a.appendChild(t),this.elem.globalData.defs.appendChild(a);var s=createNS("g");for(s.setAttribute("mask","url("+locationHref+"#"+o+")");i[0];)s.appendChild(i[0]);this.elem.layerElement.appendChild(s),this.masker=a,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){var t;this.initialized||this.initialize();var n,r,i=this.paths.length;for(t=0;t<i;t+=1)if(-1!==this.paths[t].m&&(n=this.elem.maskManager.viewData[this.paths[t].m],r=this.paths[t].p,(e||this.filterManager._mdf||n.prop._mdf)&&r.setAttribute("d",n.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var a;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var o=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),s=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),c=r.getTotalLength();a="0 0 0 "+c*o+" ";var l,u=c*(s-o),p=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,h=Math.floor(u/p);for(l=0;l<h;l+=1)a+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";a+="0 "+10*c+" 0 0"}else a="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;r.setAttribute("stroke-dasharray",a)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p._mdf)){var d=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*d[0])+","+bmFloor(255*d[1])+","+bmFloor(255*d[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,i=r[0]+" "+n[0]+" "+t[0],a=r[1]+" "+n[1]+" "+t[1],o=r[2]+" "+n[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",a),this.feFuncB.setAttribute("tableValues",o)}},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var n=createNS(e);return n.setAttribute("type","table"),t.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(e,t,n,r,i){for(var a,o,s=0,c=Math.min(e,t),l=Math.max(e,t),u=Array.call(null,{length:256}),p=0,h=i-r,d=t-e;s<=256;)o=(a=s/256)<=c?d<0?i:r:a>=l?d<0?r:i:r+h*Math.pow((a-e)/d,1/n),u[p]=o,p+=1,s+=256/255;return u.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t,n=this.filterManager.effectElements;this.feFuncRComposed&&(e||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(t=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(t=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(t=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(t=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(t=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=n*Math.cos(r),a=n*Math.sin(r);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",a)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,n){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGEffects(e){var t,n,r=e.data.ef?e.data.ef.length:0,i=createElementID(),a=filtersFactory.createFilter(i,!0),o=0;for(this.filters=[],t=0;t<r;t+=1)n=null,20===e.data.ef[t].ty?(o+=1,n=new SVGTintFilter(a,e.effectsManager.effectElements[t])):21===e.data.ef[t].ty?(o+=1,n=new SVGFillFilter(a,e.effectsManager.effectElements[t])):22===e.data.ef[t].ty?n=new SVGStrokeEffect(e,e.effectsManager.effectElements[t]):23===e.data.ef[t].ty?(o+=1,n=new SVGTritoneFilter(a,e.effectsManager.effectElements[t])):24===e.data.ef[t].ty?(o+=1,n=new SVGProLevelsFilter(a,e.effectsManager.effectElements[t])):25===e.data.ef[t].ty?(o+=1,n=new SVGDropShadowEffect(a,e.effectsManager.effectElements[t])):28===e.data.ef[t].ty?n=new SVGMatte3Effect(a,e.effectsManager.effectElements[t],e):29===e.data.ef[t].ty&&(o+=1,n=new SVGGaussianBlurEffect(a,e.effectsManager.effectElements[t])),n&&this.filters.push(n);o&&(e.globalData.defs.appendChild(a),e.layerElement.setAttribute("filter","url("+locationHref+"#"+i+")")),this.filters.length&&e.addRenderableComponent(this)}function CVContextData(){var e;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),e=0;e<15;e+=1)this.saved[e]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(e,t,n)}function CVCompElement(e,t,n){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CVMaskElement(e,t){var n;this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r=this.masksProperties.length,i=!1;for(n=0;n<r;n+=1)"n"!==this.masksProperties[n].mode&&(i=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=i,i&&this.element.addRenderableComponent(this)}function CVShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,n)}function CVSolidElement(e,t,n){this.initElement(e,t,n)}function CVTextElement(e,t,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,n)}function CVEffects(){}function HBaseElement(){}function HSolidElement(e,t,n){this.initElement(e,t,n)}function HCompElement(e,t,n){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,n)}function HImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,n)}function HCameraElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,e.pe,0,0,this),e.ks.p.s?(this.px=r(this,e.ks.p.x,1,0,this),this.py=r(this,e.ks.p.y,1,0,this),this.pz=r(this,e.ks.p.z,1,0,this)):this.p=r(this,e.ks.p,1,0,this),e.ks.a&&(this.a=r(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var i,a=e.ks.or.k.length;for(i=0;i<a;i+=1)e.ks.or.k[i].to=null,e.ks.or.k[i].ti=null}this.or=r(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,e.ks.rx,0,degToRads,this),this.ry=r(this,e.ks.ry,0,degToRads,this),this.rz=r(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HEffects(){}SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,n=_svgMatteSymbols.length;t<n;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var n=e.layerElement.parentNode;if(n){for(var r,i=n.children,a=0,o=i.length;a<o&&i[a]!==e.layerElement;)a+=1;a<=o-2&&(r=i[a+1]);var s=createNS("use");s.setAttribute("href","#"+t),r?n.insertBefore(s,r):n.appendChild(s)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){if(!this.findSymbol(t)){var n=createElementID(),r=createNS("mask");r.setAttribute("id",t.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var i=e.globalData.defs;i.appendChild(r);var a=createNS("symbol");a.setAttribute("id",n),this.replaceInParent(t,n),a.appendChild(t.layerElement),i.appendChild(a);var o=createNS("use");o.setAttribute("href","#"+n),r.appendChild(o),t.data.hd=!1,t.show()}e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,n=0,r=t.length;n<r;)t[n]&&t[n].data.ind===e&&this.setElementAsMask(this.elem,t[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=this.savedOp;this.savedOp=createTypedArray("float32",e),this.savedOp.set(t);var n=0;for(n=this._length;n<e;n+=1)this.saved[n]=createTypedArray("float32",16);this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var e=0===this.data.ty;this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(e),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t,n,r=e.getContext("2d"),i=this.img.width,a=this.img.height,o=i/a,s=this.assetData.w/this.assetData.h,c=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;o>s&&"xMidYMid slice"===c||o<s&&"xMidYMid slice"!==c?t=(n=a)*s:n=(t=i)/s,r.drawImage(this.img,(i-t)/2,(a-n)/2,t,n,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),e=this.layers.length-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e,t,n,r,i=this.element.finalTransform.mat,a=this.element.canvasContext,o=this.masksProperties.length;for(a.beginPath(),e=0;e<o;e+=1)if("n"!==this.masksProperties[e].mode){var s;this.masksProperties[e].inv&&(a.moveTo(0,0),a.lineTo(this.element.globalData.compSize.w,0),a.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),a.lineTo(0,this.element.globalData.compSize.h),a.lineTo(0,0)),r=this.viewData[e].v,t=i.applyToPointArray(r.v[0][0],r.v[0][1],0),a.moveTo(t[0],t[1]);var c=r._length;for(s=1;s<c;s+=1)n=i.applyToTriplePoints(r.o[s-1],r.i[s],r.v[s]),a.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=i.applyToTriplePoints(r.o[s-1],r.i[0],r.v[0]),a.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),a.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var n={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},r={};if("fl"===e.ty||"st"===e.ty?(r.c=PropertyFactory.getProp(this,e.c,1,255,this),r.c.k||(n.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")")):"gf"!==e.ty&&"gs"!==e.ty||(r.s=PropertyFactory.getProp(this,e.s,1,null,this),r.e=PropertyFactory.getProp(this,e.e,1,null,this),r.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,e.g,this)),r.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"===e.ty||"gs"===e.ty){if(n.lc=lineCapEnum[e.lc||2],n.lj=lineJoinEnum[e.lj||2],1==e.lj&&(n.ml=e.ml),r.w=PropertyFactory.getProp(this,e.w,0,null,this),r.w.k||(n.wi=r.w.v),e.d){var i=new DashProperty(this,e.d,"canvas",this);r.d=i,r.d.k||(n.da=r.d.dashArray,n.do=r.d.dashoffset[0])}}else n.r=2===e.r?"evenodd":"nonzero";return this.stylesList.push(n),r.style=n,r},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){var e;this._isFirstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var t,n=this.stylesList.length;for(t=0;t<n;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,n,r,i){var a,o,s,c,l,u,p=e.length-1,h=[],d=[],f=[].concat(i);for(a=p;a>=0;a-=1){if((c=this.searchProcessedElement(e[a]))?t[a]=n[c-1]:e[a]._shouldRender=r,"fl"===e[a].ty||"st"===e[a].ty||"gf"===e[a].ty||"gs"===e[a].ty)c?t[a].style.closed=!1:t[a]=this.createStyleElement(e[a],f),h.push(t[a].style);else if("gr"===e[a].ty){if(c)for(s=t[a].it.length,o=0;o<s;o+=1)t[a].prevViewData[o]=t[a].it[o];else t[a]=this.createGroupElement(e[a]);this.searchShapes(e[a].it,t[a].it,t[a].prevViewData,r,f)}else"tr"===e[a].ty?(c||(u=this.createTransformElement(e[a]),t[a]=u),f.push(t[a]),this.addTransformToStyleList(t[a])):"sh"===e[a].ty||"rc"===e[a].ty||"el"===e[a].ty||"sr"===e[a].ty?c||(t[a]=this.createShapeElement(e[a])):"tm"===e[a].ty||"rd"===e[a].ty||"pb"===e[a].ty?(c?(l=t[a]).closed=!1:((l=ShapeModifiers.getModifier(e[a].ty)).init(this,e[a]),t[a]=l,this.shapeModifiers.push(l)),d.push(l)):"rp"===e[a].ty&&(c?(l=t[a]).closed=!0:(l=ShapeModifiers.getModifier(e[a].ty),t[a]=l,l.init(this,e,a,t),this.shapeModifiers.push(l),r=!1),d.push(l));this.addProcessedElement(e[a],a+1)}for(this.removeTransformFromStyleList(),this.closeStyles(h),p=d.length,a=0;a<p;a+=1)d[a].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,t,n,r,i,a,o,s,c,l=this.stylesList.length,u=this.globalData.renderer,p=this.globalData.canvasContext;for(e=0;e<l;e+=1)if(("st"!==(s=(c=this.stylesList[e]).type)&&"gs"!==s||0!==c.wi)&&c.data._shouldRender&&0!==c.coOp&&0!==this.globalData.currentGlobalAlpha){for(u.save(),a=c.elements,"st"===s||"gs"===s?(p.strokeStyle="st"===s?c.co:c.grd,p.lineWidth=c.wi,p.lineCap=c.lc,p.lineJoin=c.lj,p.miterLimit=c.ml||0):p.fillStyle="fl"===s?c.co:c.grd,u.ctxOpacity(c.coOp),"st"!==s&&"gs"!==s&&p.beginPath(),u.ctxTransform(c.preTransforms.finalTransform.props),n=a.length,t=0;t<n;t+=1){for("st"!==s&&"gs"!==s||(p.beginPath(),c.da&&(p.setLineDash(c.da),p.lineDashOffset=c.do)),i=(o=a[t].trNodes).length,r=0;r<i;r+=1)"m"===o[r].t?p.moveTo(o[r].p[0],o[r].p[1]):"c"===o[r].t?p.bezierCurveTo(o[r].pts[0],o[r].pts[1],o[r].pts[2],o[r].pts[3],o[r].pts[4],o[r].pts[5]):p.closePath();"st"!==s&&"gs"!==s||(p.stroke(),c.da&&p.setLineDash(this.dashResetter))}"st"!==s&&"gs"!==s&&p.fill(c.r),u.restore()}},CVShapeElement.prototype.renderShape=function(e,t,n,r){var i,a;for(a=e,i=t.length-1;i>=0;i-=1)"tr"===t[i].ty?(a=n[i].transform,this.renderShapeTransform(e,a)):"sh"===t[i].ty||"el"===t[i].ty||"rc"===t[i].ty||"sr"===t[i].ty?this.renderPath(t[i],n[i]):"fl"===t[i].ty?this.renderFill(t[i],n[i],a):"st"===t[i].ty?this.renderStroke(t[i],n[i],a):"gf"===t[i].ty||"gs"===t[i].ty?this.renderGradientFill(t[i],n[i],a):"gr"===t[i].ty?this.renderShape(a,t[i].it,n[i].it):t[i].ty;r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var n,r,i,a=e.trNodes,o=t.paths,s=o._length;a.length=0;var c=e.transforms.finalTransform;for(i=0;i<s;i+=1){var l=o.shapes[i];if(l&&l.v){for(r=l._length,n=1;n<r;n+=1)1===n&&a.push({t:"m",p:c.applyToPointArray(l.v[0][0],l.v[0][1],0)}),a.push({t:"c",pts:c.applyToTriplePoints(l.o[n-1],l.i[n],l.v[n])});1===r&&a.push({t:"m",p:c.applyToPointArray(l.v[0][0],l.v[0][1],0)}),l.c&&r&&(a.push({t:"c",pts:c.applyToTriplePoints(l.o[n-1],l.i[0],l.v[0])}),a.push({t:"z"}))}}e.trNodes=a}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender){var n,r=t.styledShapes.length;for(n=0;n<r;n+=1)this.renderStyledShape(t.styledShapes[n],t.sh)}},CVShapeElement.prototype.renderFill=function(e,t,n){var r=t.style;(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,n){var r,i=t.style;if(!i.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){var a,o=this.globalData.canvasContext,s=t.s.v,c=t.e.v;if(1===e.t)r=o.createLinearGradient(s[0],s[1],c[0],c[1]);else{var l=Math.sqrt(Math.pow(s[0]-c[0],2)+Math.pow(s[1]-c[1],2)),u=Math.atan2(c[1]-s[1],c[0]-s[0]),p=t.h.v;p>=1?p=.99:p<=-1&&(p=-.99);var h=l*p,d=Math.cos(u+t.a.v)*h+s[0],f=Math.sin(u+t.a.v)*h+s[1];r=o.createRadialGradient(d,f,0,s[0],s[1],l)}var g=e.g.p,m=t.g.c,v=1;for(a=0;a<g;a+=1)t.g._hasOpacity&&t.g._collapsable&&(v=t.g.o[2*a+1]),r.addColorStop(m[4*a]/100,"rgba("+m[4*a+1]+","+m[4*a+2]+","+m[4*a+3]+","+v+")");i.grd=r}i.coOp=t.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(e,t,n){var r=t.style,i=t.d;i&&(i._mdf||this._isFirstFrame)&&(r.da=i.dashArray,r.do=i.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*n.opacity),(t.w._mdf||this._isFirstFrame)&&(r.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.fillStyle=this.data.sc,e.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var n=!1;e.sc&&(n=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var r,i,a,o,s,c,l,u,p,h,d,f,g=this.globalData.fontManager.getFontByName(e.f),m=e.l,v=this.mHelper;this.stroke=n,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,i=e.finalText.length;var b=this.data.singleShape,y=.001*e.tr*e.finalSize,x=0,C=0,w=!0,k=0;for(r=0;r<i;r+=1){for(o=(a=this.globalData.fontManager.getCharData(e.finalText[r],g.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&a.data||{},v.reset(),b&&m[r].n&&(x=-y,C+=e.yOffset,C+=w?1:0,w=!1),p=(l=o.shapes?o.shapes[0].it:[]).length,v.scale(e.finalSize/100,e.finalSize/100),b&&this.applyTextPropertiesToMatrix(e,v,m[r].line,x,C),d=createSizedArray(p),u=0;u<p;u+=1){for(c=l[u].ks.k.i.length,h=l[u].ks.k,f=[],s=1;s<c;s+=1)1===s&&f.push(v.applyToX(h.v[0][0],h.v[0][1],0),v.applyToY(h.v[0][0],h.v[0][1],0)),f.push(v.applyToX(h.o[s-1][0],h.o[s-1][1],0),v.applyToY(h.o[s-1][0],h.o[s-1][1],0),v.applyToX(h.i[s][0],h.i[s][1],0),v.applyToY(h.i[s][0],h.i[s][1],0),v.applyToX(h.v[s][0],h.v[s][1],0),v.applyToY(h.v[s][0],h.v[s][1],0));f.push(v.applyToX(h.o[s-1][0],h.o[s-1][1],0),v.applyToY(h.o[s-1][0],h.o[s-1][1],0),v.applyToX(h.i[0][0],h.i[0][1],0),v.applyToY(h.i[0][0],h.i[0][1],0),v.applyToX(h.v[0][0],h.v[0][1],0),v.applyToY(h.v[0][0],h.v[0][1],0)),d[u]=f}b&&(x+=m[r].l,x+=y),this.textSpans[k]?this.textSpans[k].elem=d:this.textSpans[k]={elem:d},k+=1}},CVTextElement.prototype.renderInnerContent=function(){var e,t,n,r,i,a,o=this.canvasContext;o.font=this.values.fValue,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var s,c=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;t=l.length;var u,p,h=null,d=null,f=null;for(e=0;e<t;e+=1)if(!l[e].n){if((s=c[e])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(s.p),this.globalData.renderer.ctxOpacity(s.o)),this.fill){for(s&&s.fc?h!==s.fc&&(h=s.fc,o.fillStyle=s.fc):h!==this.values.fill&&(h=this.values.fill,o.fillStyle=this.values.fill),r=(u=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(a=(p=u[n]).length,this.globalData.canvasContext.moveTo(p[0],p[1]),i=2;i<a;i+=6)this.globalData.canvasContext.bezierCurveTo(p[i],p[i+1],p[i+2],p[i+3],p[i+4],p[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(s&&s.sw?f!==s.sw&&(f=s.sw,o.lineWidth=s.sw):f!==this.values.sWidth&&(f=this.values.sWidth,o.lineWidth=this.values.sWidth),s&&s.sc?d!==s.sc&&(d=s.sc,o.strokeStyle=s.sc):d!==this.values.stroke&&(d=this.values.stroke,o.strokeStyle=this.values.stroke),r=(u=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(a=(p=u[n]).length,this.globalData.canvasContext.moveTo(p[0],p[1]),i=2;i<a;i+=6)this.globalData.canvasContext.bezierCurveTo(p[i],p[i+1],p[i+2],p[i+3],p[i+4],p[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}s&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();e.transform=t,e.webkitTransform=t}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var n,r=0;r<t;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(e,n):this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)t=e[n].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var n,r,i,a,o,s=e.sh.v,c=e.transformers,l=s._length;if(!(l<=1)){for(n=0;n<l-1;n+=1)r=this.getTransformedPoint(c,s.v[n]),i=this.getTransformedPoint(c,s.o[n]),a=this.getTransformedPoint(c,s.i[n+1]),o=this.getTransformedPoint(c,s.v[n+1]),this.checkBounds(r,i,a,o,t);s.c&&(r=this.getTransformedPoint(c,s.v[n]),i=this.getTransformedPoint(c,s.o[n]),a=this.getTransformedPoint(c,s.i[0]),o=this.getTransformedPoint(c,s.v[0]),this.checkBounds(r,i,a,o,t))}},HShapeElement.prototype.checkBounds=function(e,t,n,r,i){this.getBoundsOfCurve(e,t,n,r);var a=this.shapeBoundingBox;i.x=bmMin(a.left,i.x),i.xMax=bmMax(a.right,i.xMax),i.y=bmMin(a.top,i.y),i.yMax=bmMax(a.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,n,r){for(var i,a,o,s,c,l,u,p=[[e[0],r[0]],[e[1],r[1]]],h=0;h<2;++h)a=6*e[h]-12*t[h]+6*n[h],i=-3*e[h]+9*t[h]-9*n[h]+3*r[h],o=3*t[h]-3*e[h],a|=0,o|=0,0==(i|=0)&&0===a||(0===i?(s=-o/a)>0&&s<1&&p[h].push(this.calculateF(s,e,t,n,r,h)):(c=a*a-4*o*i)>=0&&((l=(-a+bmSqrt(c))/(2*i))>0&&l<1&&p[h].push(this.calculateF(l,e,t,n,r,h)),(u=(-a-bmSqrt(c))/(2*i))>0&&u<1&&p[h].push(this.calculateF(u,e,t,n,r,h))));this.shapeBoundingBox.left=bmMin.apply(null,p[0]),this.shapeBoundingBox.top=bmMin.apply(null,p[1]),this.shapeBoundingBox.right=bmMax.apply(null,p[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,p[1])},HShapeElement.prototype.calculateF=function(e,t,n,r,i,a){return bmPow(1-e,3)*t[a]+3*bmPow(1-e,2)*e*n[a]+3*(1-e)*bmPow(e,2)*r[a]+bmPow(e,3)*i[a]},HShapeElement.prototype.calculateBoundingBox=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)e[n]&&e[n].sh?this.calculateShapeBoundingBox(e[n],t):e[n]&&e[n].it&&this.calculateBoundingBox(e[n].it,t)},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var n=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),n=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),n=!0),n||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var r=this.shapeCont.style,i="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=i,r.webkitTransform=i}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style,n=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";t.fill=n,t.color=n,e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var r,i,a=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",a.fClass)this.innerElem.className=a.fClass;else{t.fontFamily=a.fFamily;var o=e.fWeight,s=e.fStyle;t.fontStyle=s,t.fontWeight=o}var c,l,u,p=e.l;i=p.length;var h,d=this.mHelper,f="",g=0;for(r=0;r<i;r+=1){if(this.globalData.fontManager.chars?(this.textPaths[g]?c=this.textPaths[g]:((c=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),c.setAttribute("stroke-linejoin",lineJoinEnum[2]),c.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[g]?u=(l=this.textSpans[g]).children[0]:((l=createTag("div")).style.lineHeight=0,(u=createNS("svg")).appendChild(c),styleDiv(l)))):this.isMasked?c=this.textPaths[g]?this.textPaths[g]:createNS("text"):this.textSpans[g]?(l=this.textSpans[g],c=this.textPaths[g]):(styleDiv(l=createTag("span")),styleDiv(c=createTag("span")),l.appendChild(c)),this.globalData.fontManager.chars){var m,v=this.globalData.fontManager.getCharData(e.finalText[r],a.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(m=v?v.data:null,d.reset(),m&&m.shapes&&(h=m.shapes[0].it,d.scale(e.finalSize/100,e.finalSize/100),f=this.createPathShape(d,h),c.setAttribute("d",f)),this.isMasked)this.innerElem.appendChild(c);else{if(this.innerElem.appendChild(l),m&&m.shapes){document.body.appendChild(u);var b=u.getBBox();u.setAttribute("width",b.width+2),u.setAttribute("height",b.height+2),u.setAttribute("viewBox",b.x-1+" "+(b.y-1)+" "+(b.width+2)+" "+(b.height+2));var y=u.style,x="translate("+(b.x-1)+"px,"+(b.y-1)+"px)";y.transform=x,y.webkitTransform=x,p[r].yOffset=b.y-1}else u.setAttribute("width",1),u.setAttribute("height",1);l.appendChild(u)}}else if(c.textContent=p[r].val,c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(c);else{this.innerElem.appendChild(l);var C=c.style,w="translate3d(0,"+-e.finalSize/1.2+"px,0)";C.transform=w,C.webkitTransform=w}this.isMasked?this.textSpans[g]=c:this.textSpans[g]=l,this.textSpans[g].style.display="block",this.textPaths[g]=c,g+=1}for(;g<this.textSpans.length;)this.textSpans[g].style.display="none",g+=1},HTextElement.prototype.renderInnerContent=function(){var e;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=t,e.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var n,r,i,a,o,s=0,c=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;for(r=l.length,n=0;n<r;n+=1)l[n].n?s+=1:(a=this.textSpans[n],o=this.textPaths[n],i=c[s],s+=1,i._mdf.m&&(this.isMasked?a.setAttribute("transform",i.m):(a.style.webkitTransform=i.m,a.style.transform=i.m)),a.style.opacity=i.o,i.sw&&i._mdf.sw&&o.setAttribute("stroke-width",i.sw),i.sc&&i._mdf.sc&&o.setAttribute("stroke",i.sc),i.fc&&i._mdf.fc&&(o.setAttribute("fill",i.fc),o.style.color=i.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var u=this.innerElem.getBBox();if(this.currentBBox.w!==u.width&&(this.currentBBox.w=u.width,this.svgElement.setAttribute("width",u.width)),this.currentBBox.h!==u.height&&(this.currentBBox.h=u.height,this.svgElement.setAttribute("height",u.height)),this.currentBBox.w!==u.width+2||this.currentBBox.h!==u.height+2||this.currentBBox.x!==u.x-1||this.currentBBox.y!==u.y-1){this.currentBBox.w=u.width+2,this.currentBBox.h=u.height+2,this.currentBBox.x=u.x-1,this.currentBBox.y=u.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var p="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=p,e.webkitTransform=p}}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,t,n,r,i=this.comp.threeDElements.length;for(e=0;e<i;e+=1)if("3d"===(t=this.comp.threeDElements[e]).type){n=t.perspectiveElem.style,r=t.container.style;var a=this.pe.v+"px",o="0px 0px 0px",s="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";n.perspective=a,n.webkitPerspective=a,r.transformOrigin=o,r.mozTransformOrigin=o,r.webkitTransformOrigin=o,n.transform=s,n.webkitTransform=s}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,n=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)n=this.hierarchy[e].finalTransform.mProp._mdf||n;if(n||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(e=t=this.hierarchy.length-1;e>=0;e-=1){var r=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i;i=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var a=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2)),o=[i[0]/a,i[1]/a,i[2]/a],s=Math.sqrt(o[2]*o[2]+o[0]*o[0]),c=Math.atan2(o[1],s),l=Math.atan2(o[0],-o[2]);this.mat.rotateY(l).rotateX(-c)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var u=!this._prevMat.equals(this.mat);if((u||this.pe._mdf)&&this.comp.threeDElements){var p,h,d;for(t=this.comp.threeDElements.length,e=0;e<t;e+=1)if("3d"===(p=this.comp.threeDElements[e]).type){if(u){var f=this.mat.toCSS();(d=p.container.style).transform=f,d.webkitTransform=f}this.pe._mdf&&((h=p.perspectiveElem.style).perspective=this.pe.v+"px",h.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var animationManager=function(){var e={},t=[],n=0,r=0,i=0,a=!0,o=!1;function s(e){for(var n=0,i=e.target;n<r;)t[n].animation===i&&(t.splice(n,1),n-=1,r-=1,i.isPaused||u()),n+=1}function c(e,n){if(!e)return null;for(var i=0;i<r;){if(t[i].elem===e&&null!==t[i].elem)return t[i].animation;i+=1}var a=new AnimationItem;return p(a,e),a.setData(e,n),a}function l(){i+=1,f()}function u(){i-=1}function p(e,n){e.addEventListener("destroy",s),e.addEventListener("_active",l),e.addEventListener("_idle",u),t.push({elem:n,animation:e}),r+=1}function h(e){var s,c=e-n;for(s=0;s<r;s+=1)t[s].animation.advanceTime(c);n=e,i&&!o?window.requestAnimationFrame(h):a=!0}function d(e){n=e,window.requestAnimationFrame(h)}function f(){!o&&i&&a&&(window.requestAnimationFrame(d),a=!1)}return e.registerAnimation=c,e.loadAnimation=function(e){var t=new AnimationItem;return p(t,null),t.setParams(e),t},e.setSpeed=function(e,n){var i;for(i=0;i<r;i+=1)t[i].animation.setSpeed(e,n)},e.setDirection=function(e,n){var i;for(i=0;i<r;i+=1)t[i].animation.setDirection(e,n)},e.play=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.play(e)},e.pause=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.pause(e)},e.stop=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.stop(e)},e.togglePause=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.togglePause(e)},e.searchAnimations=function(e,t,n){var r,i=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),a=i.length;for(r=0;r<a;r+=1)n&&i[r].setAttribute("data-bm-type",n),c(i[r],e);if(t&&0===a){n||(n="svg");var o=document.getElementsByTagName("body")[0];o.innerText="";var s=createTag("div");s.style.width="100%",s.style.height="100%",s.setAttribute("data-bm-type",n),o.appendChild(s),c(s,e)}},e.resize=function(){var e;for(e=0;e<r;e+=1)t[e].animation.resize()},e.goToAndStop=function(e,n,i){var a;for(a=0;a<r;a+=1)t[a].animation.goToAndStop(e,n,i)},e.destroy=function(e){var n;for(n=r-1;n>=0;n-=1)t[n].animation.destroy(e)},e.freeze=function(){o=!0},e.unfreeze=function(){o=!1,f()},e.setVolume=function(e,n){var i;for(i=0;i<r;i+=1)t[i].animation.setVolume(e,n)},e.mute=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.mute(e)},e.unmute=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.unmute(e)},e.getRegisteredAnimations=function(){var e,n=t.length,r=[];for(e=0;e<n;e+=1)r.push(t[e].animation);return r},e}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[]};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t="svg";switch(e.animType?t=e.animType:e.renderer&&(t=e.renderer),t){case"canvas":this.renderer=new CanvasRenderer(this,e.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,e.rendererSettings);break;default:this.renderer=new HybridRenderer(this,e.rendererSettings)}this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===e.loop||null===e.loop||void 0===e.loop||!0===e.loop?this.loop=!0:!1===e.loop?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(e,"autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.configAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(e.path,this.configAnimation.bind(this),(function(){this.trigger("data_failed")}).bind(this)))},AnimationItem.prototype.setData=function(e,t){t&&"object"!=typeof t&&(t=JSON.parse(t));var n={wrapper:e,animationData:t},r=e.attributes;n.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",n.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:"canvas";var i=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";"false"===i?n.loop=!1:"true"===i?n.loop=!0:""!==i&&(n.loop=parseInt(i,10));var a=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;n.autoplay="false"!==a,n.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),this.setParams(n)},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var t,n,r=this.animationData.layers,i=r.length,a=e.layers,o=a.length;for(n=0;n<o;n+=1)for(t=0;t<i;){if(r[t].id===a[n].id){r[t]=a[n];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(i=e.assets.length,t=0;t<i;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(e.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(n,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()&&(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||!0===this.isPaused&&(this.isPaused=!1,this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var t,n=0;n<this.markers.length;n+=1)if((t=this.markers[n]).payload&&t.payload.name===e)return t;return null},AnimationItem.prototype.goToAndStop=function(e,t,n){if(!n||this.name===n){var r=Number(e);if(isNaN(r)){var i=this.getMarkerData(e);i&&this.goToAndStop(i.time,!0)}else t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,t,n){if(!n||this.name===n){var r=Number(e);if(isNaN(r)){var i=this.getMarkerData(e);i&&(i.duration?this.playSegments([i.time,i.time+i.duration],!0):this.goToAndStop(i.time,!0))}else this.goToAndStop(r,t,n);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!0!==this.isPaused&&!1!==this.isLoaded){var t=this.currentRawFrame+e*this.frameModifier,n=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(n=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),n&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?n=e:this.currentRawFrame+this.firstFrame>t&&(n=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"==typeof e[0]){var n,r=e.length;for(n=0;n<r;n+=1)this.segments.push(e[n])}else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(e.e)t=e.p;else if(this.assetsPath){var n=e.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),t=this.assetsPath+n}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,n=this.assets.length;t<n;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var Expressions=function(){var e={initExpressions:function(e){var t=0,n=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){0==(t-=1)&&function(){var e,t=n.length;for(e=0;e<t;e+=1)n[e].release();n.length=0}()},e.renderer.globalData.registerExpressionProperty=function(e){-1===n.indexOf(e)&&n.push(e)}}};return e}();expressionsPlugin=Expressions;var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null;function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return"number"===e||"boolean"===e||"string"===e||t instanceof Number}function $bm_neg(e){var t=typeof e;if("number"===t||"boolean"===t||e instanceof Number)return-e;if($bm_isInstanceOfArray(e)){var n,r=e.length,i=[];for(n=0;n<r;n+=1)i[n]=-e[n];return i}return e.propType?e.v:-e}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var n=typeof e,r=typeof t;if("string"===n||"string"===r)return e+t;if(isNumerable(n,e)&&isNumerable(r,t))return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]+=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var i=0,a=e.length,o=t.length,s=[];i<a||i<o;)("number"==typeof e[i]||e[i]instanceof Number)&&("number"==typeof t[i]||t[i]instanceof Number)?s[i]=e[i]+t[i]:s[i]=void 0===t[i]?e[i]:e[i]||t[i],i+=1;return s}return 0}var add=sum;function sub(e,t){var n=typeof e,r=typeof t;if(isNumerable(n,e)&&isNumerable(r,t))return"string"===n&&(e=parseInt(e,10)),"string"===r&&(t=parseInt(t,10)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]-=t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var i=0,a=e.length,o=t.length,s=[];i<a||i<o;)("number"==typeof e[i]||e[i]instanceof Number)&&("number"==typeof t[i]||t[i]instanceof Number)?s[i]=e[i]-t[i]:s[i]=void 0===t[i]?e[i]:e[i]||t[i],i+=1;return s}return 0}function mul(e,t){var n,r,i,a=typeof e,o=typeof t;if(isNumerable(a,e)&&isNumerable(o,t))return e*t;if($bm_isInstanceOfArray(e)&&isNumerable(o,t)){for(i=e.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e[r]*t;return n}if(isNumerable(a,e)&&$bm_isInstanceOfArray(t)){for(i=t.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e*t[r];return n}return 0}function div(e,t){var n,r,i,a=typeof e,o=typeof t;if(isNumerable(a,e)&&isNumerable(o,t))return e/t;if($bm_isInstanceOfArray(e)&&isNumerable(o,t)){for(i=e.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e[r]/t;return n}if(isNumerable(a,e)&&$bm_isInstanceOfArray(t)){for(i=t.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e/t[r];return n}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e,10)),"string"==typeof t&&(t=parseInt(t,10)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,n){if(t>n){var r=n;n=t,t=r}return Math.min(Math.max(e,t),n)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);var n;t||(t=helperLengthArray);var r=Math.min(e.length,t.length),i=0;for(n=0;n<r;n+=1)i+=Math.pow(t[n]-e[n],2);return Math.sqrt(i)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,n,r=e[0],i=e[1],a=e[2],o=Math.max(r,i,a),s=Math.min(r,i,a),c=(o+s)/2;if(o===s)t=0,n=0;else{var l=o-s;switch(n=c>.5?l/(2-o-s):l/(o+s),o){case r:t=(i-a)/l+(i<a?6:0);break;case i:t=(a-r)/l+2;break;case a:t=(r-i)/l+4}t/=6}return[t,n,c,e[3]]}function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hslToRgb(e){var t,n,r,i=e[0],a=e[1],o=e[2];if(0===a)t=o,r=o,n=o;else{var s=o<.5?o*(1+a):o+a-o*a,c=2*o-s;t=hue2rgb(c,s,i+1/3),n=hue2rgb(c,s,i),r=hue2rgb(c,s,i-1/3)}return[t,n,r,e[3]]}function linear(e,t,n,r,i){if(void 0!==r&&void 0!==i||(r=t,i=n,t=0,n=1),n<t){var a=n;n=t,t=a}if(e<=t)return r;if(e>=n)return i;var o,s=n===t?0:(e-t)/(n-t);if(!r.length)return r+(i-r)*s;var c=r.length,l=createTypedArray("float32",c);for(o=0;o<c;o+=1)l[o]=r[o]+(i[o]-r[o])*s;return l}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var n,r=t.length;e||(e=createTypedArray("float32",r));var i=createTypedArray("float32",r),a=BMMath.random();for(n=0;n<r;n+=1)i[n]=e[n]+a*(t[n]-e[n]);return i}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,n,r){var i,a=e.length,o=shapePool.newElement();o.setPathData(!!r,a);var s,c,l=[0,0];for(i=0;i<a;i+=1)s=t&&t[i]?t[i]:l,c=n&&n[i]?n[i]:l,o.setTripleAt(e[i][0],e[i][1],c[0]+e[i][0],c[1]+e[i][1],s[0]+e[i][0],s[1]+e[i][1],i,!0);return o}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=(function(e,t){var n,r,i=this.pv.length?this.pv.length:1,a=createTypedArray("float32",i),o=Math.floor(5*time);for(n=0,r=0;n<o;){for(r=0;r<i;r+=1)a[r]+=-t+2*t*BMMath.random();n+=1}var s=5*time,c=s-Math.floor(s),l=createTypedArray("float32",i);if(i>1){for(r=0;r<i;r+=1)l[r]=this.pv[r]+a[r]+(-t+2*t*BMMath.random())*c;return l}return this.pv+a[0]+(-t+2*t*BMMath.random())*c}).bind(this);function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(e,t){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],r=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,r,0]}function easeOut(e,t,n,r,i){return applyEase(easeOutBez,e,t,n,r,i)}function easeIn(e,t,n,r,i){return applyEase(easeInBez,e,t,n,r,i)}function ease(e,t,n,r,i){return applyEase(easeInOutBez,e,t,n,r,i)}function applyEase(e,t,n,r,i,a){void 0===i?(i=n,a=r):t=(t-n)/(r-n),t>1?t=1:t<0&&(t=0);var o=e(t);if($bm_isInstanceOfArray(i)){var s,c=i.length,l=createTypedArray("float32",c);for(s=0;s<c;s+=1)l[s]=(a[s]-i[s])*o+i[s];return l}return(a-i)*o+i}function nearestKey(e){var t,n,r,i=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(n=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,r=data.k[0].t;else{for(t=0;t<i-1;t+=1){if(e===data.k[t].t){n=t+1,r=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(n=t+2,r=data.k[t+1].t):(n=t+1,r=data.k[t].t);break}}-1===n&&(n=t+1,r=data.k[t].t)}else n=0,r=0;var a={};return a.index=n,a.time=r/elem.comp.globalData.frameRate,a}function key(e){var t,n,r;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+e);e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var i=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(r=i.length,n=0;n<r;n+=1)t[n]=i[n],t.value[n]=i[n];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return"string"==typeof value?void 0===t?value.substring(e):value.substring(e,t):""}function substr(e,t){return"string"==typeof value?void 0===t?value.substr(e):value.substr(e,t):""}function posterizeTime(e){time=0===e?0:Math.floor(time*e)/e,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return value=e,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,"shape"===scoped_bm_rt.propType&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers={searchExpressions:function(e,t,n){t.x&&(n.k=!0,n.x=!0,n.initiateExpression=ExpressionManager.initiateExpression,n.effectsSequence.push(n.initiateExpression(e,t,n).bind(n)))},getSpeedAtTime:function(e){var t=this.getValueAtTime(e),n=this.getValueAtTime(e+-.01),r=0;if(t.length){var i;for(i=0;i<t.length;i+=1)r+=Math.pow(n[i]-t[i],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t,n,r=-.001,i=this.getValueAtTime(e),a=this.getValueAtTime(e+r);if(i.length)for(t=createTypedArray("float32",i.length),n=0;n<i.length;n+=1)t[n]=(a[n]-i[n])/r;else t=(a-i)/r;return t},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}};!function(){function e(e,t,n){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var r,i,a,o,s,c=this.comp.renderedFrame,l=this.keyframes,u=l[l.length-1].t;if(c<=u)return this.pv;if(n?i=u-(r=t?Math.abs(u-this.elem.comp.globalData.frameRate*t):Math.max(0,u-this.elem.data.ip)):((!t||t>l.length-1)&&(t=l.length-1),r=u-(i=l[l.length-1-t].t)),"pingpong"===e){if(Math.floor((c-i)/r)%2!=0)return this.getValueAtTime((r-(c-i)%r+i)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var p=this.getValueAtTime(i/this.comp.globalData.frameRate,0),h=this.getValueAtTime(u/this.comp.globalData.frameRate,0),d=this.getValueAtTime(((c-i)%r+i)/this.comp.globalData.frameRate,0),f=Math.floor((c-i)/r);if(this.pv.length){for(o=(s=new Array(p.length)).length,a=0;a<o;a+=1)s[a]=(h[a]-p[a])*f+d[a];return s}return(h-p)*f+d}if("continue"===e){var g=this.getValueAtTime(u/this.comp.globalData.frameRate,0),m=this.getValueAtTime((u-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(o=(s=new Array(g.length)).length,a=0;a<o;a+=1)s[a]=g[a]+(g[a]-m[a])*((c-u)/this.comp.globalData.frameRate)/5e-4;return s}return g+(c-u)/.001*(g-m)}}return this.getValueAtTime(((c-i)%r+i)/this.comp.globalData.frameRate,0)}function t(e,t,n){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var r,i,a,o,s,c=this.comp.renderedFrame,l=this.keyframes,u=l[0].t;if(c>=u)return this.pv;if(n?i=u+(r=t?Math.abs(this.elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-u)):((!t||t>l.length-1)&&(t=l.length-1),r=(i=l[t].t)-u),"pingpong"===e){if(Math.floor((u-c)/r)%2==0)return this.getValueAtTime(((u-c)%r+u)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var p=this.getValueAtTime(u/this.comp.globalData.frameRate,0),h=this.getValueAtTime(i/this.comp.globalData.frameRate,0),d=this.getValueAtTime((r-(u-c)%r+u)/this.comp.globalData.frameRate,0),f=Math.floor((u-c)/r)+1;if(this.pv.length){for(o=(s=new Array(p.length)).length,a=0;a<o;a+=1)s[a]=d[a]-(h[a]-p[a])*f;return s}return d-(h-p)*f}if("continue"===e){var g=this.getValueAtTime(u/this.comp.globalData.frameRate,0),m=this.getValueAtTime((u+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(o=(s=new Array(g.length)).length,a=0;a<o;a+=1)s[a]=g[a]+(g[a]-m[a])*(u-c)/.001;return s}return g+(g-m)*(u-c)/.001}}return this.getValueAtTime((r-((u-c)%r+u))/this.comp.globalData.frameRate,0)}function n(e,t){if(!this.k)return this.pv;if(e=.5*(e||.4),(t=Math.floor(t||5))<=1)return this.pv;var n,r,i=this.comp.renderedFrame/this.comp.globalData.frameRate,a=i-e,o=t>1?(i+e-a)/(t-1):1,s=0,c=0;for(n=this.pv.length?createTypedArray("float32",this.pv.length):0;s<t;){if(r=this.getValueAtTime(a+s*o),this.pv.length)for(c=0;c<this.pv.length;c+=1)n[c]+=r[c];else n+=r;s+=1}if(this.pv.length)for(c=0;c<this.pv.length;c+=1)n[c]/=t;else n/=t;return n}function r(e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var t=this._transformCachingAtTime.v;if(t.cloneFromProps(this.pre.props),this.appliedTransformations<1){var n=this.a.getValueAtTime(e);t.translate(-n[0]*this.a.mult,-n[1]*this.a.mult,n[2]*this.a.mult)}if(this.appliedTransformations<2){var r=this.s.getValueAtTime(e);t.scale(r[0]*this.s.mult,r[1]*this.s.mult,r[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var i=this.sk.getValueAtTime(e),a=this.sa.getValueAtTime(e);t.skewFromAxis(-i*this.sk.mult,a*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var o=this.r.getValueAtTime(e);t.rotate(-o*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var s=this.rz.getValueAtTime(e),c=this.ry.getValueAtTime(e),l=this.rx.getValueAtTime(e),u=this.or.getValueAtTime(e);t.rotateZ(-s*this.rz.mult).rotateY(c*this.ry.mult).rotateX(l*this.rx.mult).rotateZ(-u[2]*this.or.mult).rotateY(u[1]*this.or.mult).rotateX(u[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var p=this.px.getValueAtTime(e),h=this.py.getValueAtTime(e);if(this.data.p.z){var d=this.pz.getValueAtTime(e);t.translate(p*this.px.mult,h*this.py.mult,-d*this.pz.mult)}else t.translate(p*this.px.mult,h*this.py.mult,0)}else{var f=this.p.getValueAtTime(e);t.translate(f[0]*this.p.mult,f[1]*this.p.mult,-f[2]*this.p.mult)}return t}function i(){return this.v.clone(new Matrix)}var a=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,n){var o=a(e,t,n);return o.dynamicProperties.length?o.getValueAtTime=r.bind(o):o.getValueAtTime=i.bind(o),o.setGroupProperty=expressionHelpers.setGroupProperty,o};var o=PropertyFactory.getProp;PropertyFactory.getProp=function(r,i,a,s,c){var l=o(r,i,a,s,c);l.kf?l.getValueAtTime=expressionHelpers.getValueAtTime.bind(l):l.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(l),l.setGroupProperty=expressionHelpers.setGroupProperty,l.loopOut=e,l.loopIn=t,l.smooth=n,l.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(l),l.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(l),l.numKeys=1===i.a?i.k.length:0,l.propertyIndex=i.ix;var u=0;return 0!==a&&(u=createTypedArray("float32",1===i.a?i.k[0].s.length:i.k.length)),l._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:u},expressionHelpers.searchExpressions(r,i,l),l.k&&c.addDynamicProperty(l),l};var s=ShapePropertyFactory.getConstructorFunction(),c=ShapePropertyFactory.getKeyframedConstructorFunction();function l(){}l.prototype={vertices:function(e,t){this.k&&this.getValue();var n,r=this.v;void 0!==t&&(r=this.getValueAtTime(t,0));var i=r._length,a=r[e],o=r.v,s=createSizedArray(i);for(n=0;n<i;n+=1)s[n]="i"===e||"o"===e?[a[n][0]-o[n][0],a[n][1]-o[n][1]]:[a[n][0],a[n][1]];return s},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var n=this.v;void 0!==t&&(n=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(n));for(var r,i=this._segmentsLength,a=i.lengths,o=i.totalLength*e,s=0,c=a.length,l=0;s<c;){if(l+a[s].addedLength>o){var u=s,p=n.c&&s===c-1?0:s+1,h=(o-l)/a[s].addedLength;r=bez.getPointInSegment(n.v[u],n.v[p],n.o[u],n.i[p],h,a[s]);break}l+=a[s].addedLength,s+=1}return r||(r=n.c?[n.v[0][0],n.v[0][1]]:[n.v[n._length-1][0],n.v[n._length-1][1]]),r},vectorOnPath:function(e,t,n){1==e?e=this.v.c:0==e&&(e=.999);var r=this.pointOnPath(e,t),i=this.pointOnPath(e+.001,t),a=i[0]-r[0],o=i[1]-r[1],s=Math.sqrt(Math.pow(a,2)+Math.pow(o,2));return 0===s?[0,0]:"tangent"===n?[a/s,o/s]:[-o/s,a/s]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([l],s),extendPrototype([l],c),c.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},c.prototype.initiateExpression=ExpressionManager.initiateExpression;var u=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,n,r,i){var a=u(e,t,n,r,i);return a.propertyIndex=t.ix,a.lock=!1,3===n?expressionHelpers.searchExpressions(e,t.pt,a):4===n&&expressionHelpers.searchExpressions(e,t.ks,a),a.k&&e.addDynamicProperty(a),a}}(),TextProperty.prototype.getExpressionValue=function(e,t){var n=this.calculateExpression(t);if(e.t!==n){var r={};return this.copyData(r,e),r.t=n.toString(),r.__complete=!1,r}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null};var ShapePathInterface=function(e,t,n){var r=t.sh;function i(e){return"Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e?i.path:null}var a=propertyGroupFactory(i,n);return r.setGroupProperty(PropertyInterface("Path",a)),Object.defineProperties(i,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:n}}),i},propertyGroupFactory=function(e,t){return function(n){return(n=void 0===n?1:n)<=0?e:t(n-1)}},PropertyInterface=function(e,t){var n={_name:e};return function(e){return(e=void 0===e?1:e)<=0?n:t(e-1)}},ShapeExpressionInterface=function(){function e(e,o,h){var d,f=[],g=e?e.length:0;for(d=0;d<g;d+=1)"gr"===e[d].ty?f.push(t(e[d],o[d],h)):"fl"===e[d].ty?f.push(n(e[d],o[d],h)):"st"===e[d].ty?f.push(i(e[d],o[d],h)):"tm"===e[d].ty?f.push(a(e[d],o[d],h)):"tr"===e[d].ty||("el"===e[d].ty?f.push(s(e[d],o[d],h)):"sr"===e[d].ty?f.push(c(e[d],o[d],h)):"sh"===e[d].ty?f.push(ShapePathInterface(e[d],o[d],h)):"rc"===e[d].ty?f.push(l(e[d],o[d],h)):"rd"===e[d].ty?f.push(u(e[d],o[d],h)):"rp"===e[d].ty?f.push(p(e[d],o[d],h)):"gf"===e[d].ty?f.push(r(e[d],o[d],h)):f.push((e[d],o[d],function(){return null})));return f}function t(t,n,r){var i=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return i.content;default:return i.transform}};i.propertyGroup=propertyGroupFactory(i,r);var a=function(t,n,r){var i,a=function(e){for(var t=0,n=i.length;t<n;){if(i[t]._name===e||i[t].mn===e||i[t].propertyIndex===e||i[t].ix===e||i[t].ind===e)return i[t];t+=1}return"number"==typeof e?i[e-1]:null};a.propertyGroup=propertyGroupFactory(a,r),i=e(t.it,n.it,a.propertyGroup),a.numProperties=i.length;var s=o(t.it[t.it.length-1],n.it[n.it.length-1],a.propertyGroup);return a.transform=s,a.propertyIndex=t.cix,a._name=t.nm,a}(t,n,i.propertyGroup),s=o(t.it[t.it.length-1],n.it[n.it.length-1],i.propertyGroup);return i.content=a,i.transform=s,Object.defineProperty(i,"_name",{get:function(){return t.nm}}),i.numProperties=t.np,i.propertyIndex=t.ix,i.nm=t.nm,i.mn=t.mn,i}function n(e,t,n){function r(e){return"Color"===e||"color"===e?r.color:"Opacity"===e||"opacity"===e?r.opacity:null}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),r}function r(e,t,n){function r(e){return"Start Point"===e||"start point"===e?r.startPoint:"End Point"===e||"end point"===e?r.endPoint:"Opacity"===e||"opacity"===e?r.opacity:null}return Object.defineProperties(r,{startPoint:{get:ExpressionPropertyInterface(t.s)},endPoint:{get:ExpressionPropertyInterface(t.e)},opacity:{get:ExpressionPropertyInterface(t.o)},type:{get:function(){return"a"}},_name:{value:e.nm},mn:{value:e.mn}}),t.s.setGroupProperty(PropertyInterface("Start Point",n)),t.e.setGroupProperty(PropertyInterface("End Point",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),r}function i(e,t,n){var r,i=propertyGroupFactory(l,n),a=propertyGroupFactory(c,i);function o(n){Object.defineProperty(c,e.d[n].nm,{get:ExpressionPropertyInterface(t.d.dataProps[n].p)})}var s=e.d?e.d.length:0,c={};for(r=0;r<s;r+=1)o(r),t.d.dataProps[r].p.setGroupProperty(a);function l(e){return"Color"===e||"color"===e?l.color:"Opacity"===e||"opacity"===e?l.opacity:"Stroke Width"===e||"stroke width"===e?l.strokeWidth:null}return Object.defineProperties(l,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return c}},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",i)),t.o.setGroupProperty(PropertyInterface("Opacity",i)),t.w.setGroupProperty(PropertyInterface("Stroke Width",i)),l}function a(e,t,n){function r(t){return t===e.e.ix||"End"===t||"end"===t?r.end:t===e.s.ix?r.start:t===e.o.ix?r.offset:null}var i=propertyGroupFactory(r,n);return r.propertyIndex=e.ix,t.s.setGroupProperty(PropertyInterface("Start",i)),t.e.setGroupProperty(PropertyInterface("End",i)),t.o.setGroupProperty(PropertyInterface("Offset",i)),r.propertyIndex=e.ix,r.propertyGroup=n,Object.defineProperties(r,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),r.mn=e.mn,r}function o(e,t,n){function r(t){return e.a.ix===t||"Anchor Point"===t?r.anchorPoint:e.o.ix===t||"Opacity"===t?r.opacity:e.p.ix===t||"Position"===t?r.position:e.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?r.rotation:e.s.ix===t||"Scale"===t?r.scale:e.sk&&e.sk.ix===t||"Skew"===t?r.skew:e.sa&&e.sa.ix===t||"Skew Axis"===t?r.skewAxis:null}var i=propertyGroupFactory(r,n);return t.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",i)),t.transform.mProps.p.setGroupProperty(PropertyInterface("Position",i)),t.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",i)),t.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",i)),t.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",i)),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",i)),t.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",i))),t.transform.op.setGroupProperty(PropertyInterface("Opacity",i)),Object.defineProperties(r,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:e.nm}}),r.ty="tr",r.mn=e.mn,r.propertyGroup=n,r}function s(e,t,n){function r(t){return e.p.ix===t?r.position:e.s.ix===t?r.size:null}var i=propertyGroupFactory(r,n);r.propertyIndex=e.ix;var a="tm"===t.sh.ty?t.sh.prop:t.sh;return a.s.setGroupProperty(PropertyInterface("Size",i)),a.p.setGroupProperty(PropertyInterface("Position",i)),Object.defineProperties(r,{size:{get:ExpressionPropertyInterface(a.s)},position:{get:ExpressionPropertyInterface(a.p)},_name:{value:e.nm}}),r.mn=e.mn,r}function c(e,t,n){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.rotation:e.pt.ix===t?r.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?r.outerRadius:e.os.ix===t?r.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?r.innerRoundness:null:r.innerRadius}var i=propertyGroupFactory(r,n),a="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,a.or.setGroupProperty(PropertyInterface("Outer Radius",i)),a.os.setGroupProperty(PropertyInterface("Outer Roundness",i)),a.pt.setGroupProperty(PropertyInterface("Points",i)),a.p.setGroupProperty(PropertyInterface("Position",i)),a.r.setGroupProperty(PropertyInterface("Rotation",i)),e.ir&&(a.ir.setGroupProperty(PropertyInterface("Inner Radius",i)),a.is.setGroupProperty(PropertyInterface("Inner Roundness",i))),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(a.p)},rotation:{get:ExpressionPropertyInterface(a.r)},points:{get:ExpressionPropertyInterface(a.pt)},outerRadius:{get:ExpressionPropertyInterface(a.or)},outerRoundness:{get:ExpressionPropertyInterface(a.os)},innerRadius:{get:ExpressionPropertyInterface(a.ir)},innerRoundness:{get:ExpressionPropertyInterface(a.is)},_name:{value:e.nm}}),r.mn=e.mn,r}function l(e,t,n){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.roundness:e.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?r.size:null}var i=propertyGroupFactory(r,n),a="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,a.p.setGroupProperty(PropertyInterface("Position",i)),a.s.setGroupProperty(PropertyInterface("Size",i)),a.r.setGroupProperty(PropertyInterface("Rotation",i)),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(a.p)},roundness:{get:ExpressionPropertyInterface(a.r)},size:{get:ExpressionPropertyInterface(a.s)},_name:{value:e.nm}}),r.mn=e.mn,r}function u(e,t,n){function r(t){return e.r.ix===t||"Round Corners 1"===t?r.radius:null}var i=propertyGroupFactory(r,n),a=t;return r.propertyIndex=e.ix,a.rd.setGroupProperty(PropertyInterface("Radius",i)),Object.defineProperties(r,{radius:{get:ExpressionPropertyInterface(a.rd)},_name:{value:e.nm}}),r.mn=e.mn,r}function p(e,t,n){function r(t){return e.c.ix===t||"Copies"===t?r.copies:e.o.ix===t||"Offset"===t?r.offset:null}var i=propertyGroupFactory(r,n),a=t;return r.propertyIndex=e.ix,a.c.setGroupProperty(PropertyInterface("Copies",i)),a.o.setGroupProperty(PropertyInterface("Offset",i)),Object.defineProperties(r,{copies:{get:ExpressionPropertyInterface(a.c)},offset:{get:ExpressionPropertyInterface(a.o)},_name:{value:e.nm}}),r.mn=e.mn,r}return function(t,n,r){var i;function a(e){if("number"==typeof e)return 0===(e=void 0===e?1:e)?r:i[e-1];for(var t=0,n=i.length;t<n;){if(i[t]._name===e)return i[t];t+=1}return null}return a.propertyGroup=propertyGroupFactory(a,(function(){return r})),i=e(t,n,a.propertyGroup),a.numProperties=i.length,a._name="Contents",a}}(),TextExpressionInterface=function(e){var t,n;function r(e){switch(e){case"ADBE Text Document":return r.sourceText;default:return null}}return Object.defineProperty(r,"sourceText",{get:function(){e.textProperty.getValue();var r=e.textProperty.currentData.t;return r!==t&&(e.textProperty.currentData.t=t,(n=new String(r)).value=r||new String(r)),n}}),r},LayerExpressionInterface=function(){function e(e){var t=new Matrix;return void 0!==e?this._elem.finalTransform.mProp.getValueAtTime(e).clone(t):this._elem.finalTransform.mProp.applyToMatrix(t),t}function t(e,t){var n=this.getMatrix(t);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.applyPoint(n,e)}function n(e,t){var n=this.getMatrix(t);return this.applyPoint(n,e)}function r(e,t){var n=this.getMatrix(t);return n.props[12]=0,n.props[13]=0,n.props[14]=0,this.invertPoint(n,e)}function i(e,t){var n=this.getMatrix(t);return this.invertPoint(n,e)}function a(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e)}return e.applyToPointArray(t[0],t[1],t[2]||0)}function o(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e)}return e.inversePoint(t)}function s(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function c(){return[1,1,1,1]}return function(l){var u;function p(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return p.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return u;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return p.effect;case"ADBE Text Properties":return p.textInterface;default:return null}}p.getMatrix=e,p.invertPoint=o,p.applyPoint=a,p.toWorld=n,p.toWorldVec=t,p.fromWorld=i,p.fromWorldVec=r,p.toComp=n,p.fromComp=s,p.sampleImage=c,p.sourceRectAtTime=l.sourceRectAtTime.bind(l),p._elem=l;var h=getDescriptor(u=TransformExpressionInterface(l.finalTransform.mProp),"anchorPoint");return Object.defineProperties(p,{hasParent:{get:function(){return l.hierarchy.length}},parent:{get:function(){return l.hierarchy[0].layerInterface}},rotation:getDescriptor(u,"rotation"),scale:getDescriptor(u,"scale"),position:getDescriptor(u,"position"),opacity:getDescriptor(u,"opacity"),anchorPoint:h,anchor_point:h,transform:{get:function(){return u}},active:{get:function(){return l.isInRange}}}),p.startTime=l.data.st,p.index=l.data.ind,p.source=l.data.refId,p.height=0===l.data.ty?l.data.h:100,p.width=0===l.data.ty?l.data.w:100,p.inPoint=l.data.ip/l.comp.globalData.frameRate,p.outPoint=l.data.op/l.comp.globalData.frameRate,p._name=l.data.nm,p.registerMaskInterface=function(e){p.mask=new MaskManagerInterface(e,l)},p.registerEffectsInterface=function(e){p.effect=e},p}}(),FootageInterface=(dataInterfaceFactory=function(e){function t(e){return"Outline"===e?t.outlineInterface():null}return t._name="Outline",t.outlineInterface=function(e){var t="",n=e.getFootageData();function r(e){if(n[e])return t=e,"object"==typeof(n=n[e])?r:n;var i=e.indexOf(t);if(-1!==i){var a=parseInt(e.substr(i+t.length),10);return"object"==typeof(n=n[a])?r:n}return""}return function(){return t="",n=e.getFootageData(),r}}(e),t},function(e){function t(e){return"Data"===e?t.dataInterface:null}return t._name="Data",t.dataInterface=dataInterfaceFactory(e),t}),dataInterfaceFactory,CompExpressionInterface=function(e){function t(t){for(var n=0,r=e.layers.length;n<r;){if(e.layers[n].nm===t||e.layers[n].ind===t)return e.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.data.h||e.globalData.compSize.h,t.width=e.data.w||e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t.displayStartTime=0,t.numLayers=e.layers.length,t},TransformExpressionInterface=function(e){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}var n,r,i,a;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p?a=ExpressionPropertyInterface(e.p):(n=ExpressionPropertyInterface(e.px),r=ExpressionPropertyInterface(e.py),e.pz&&(i=ExpressionPropertyInterface(e.pz))),Object.defineProperty(t,"position",{get:function(){return e.p?a():[n(),r(),i?i():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t},ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,n=this.compositions.length;t<n;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),EffectsExpressionInterface=function(){function e(n,r,i,a){function o(e){for(var t=n.ef,r=0,i=t.length;r<i;){if(e===t[r].nm||e===t[r].mn||e===t[r].ix)return 5===t[r].ty?l[r]:l[r]();r+=1}throw new Error}var s,c=propertyGroupFactory(o,i),l=[],u=n.ef.length;for(s=0;s<u;s+=1)5===n.ef[s].ty?l.push(e(n.ef[s],r.effectElements[s],r.effectElements[s].propertyGroup,a)):l.push(t(r.effectElements[s],n.ef[s].ty,a,c));return"ADBE Color Control"===n.mn&&Object.defineProperty(o,"color",{get:function(){return l[0]()}}),Object.defineProperties(o,{numProperties:{get:function(){return n.np}},_name:{value:n.nm},propertyGroup:{value:c}}),o.enabled=0!==n.en,o.active=o.enabled,o}function t(e,t,n,r){var i=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(PropertyInterface("",r)),function(){return 10===t?n.comp.compInterface(e.p.v):i()}}return{createEffectsInterface:function(t,n){if(t.effectsManager){var r,i=[],a=t.data.ef,o=t.effectsManager.effectElements.length;for(r=0;r<o;r+=1)i.push(e(a[r],t.effectsManager.effectElements[r],n,t));var s=t.data.ef||[],c=function(e){for(r=0,o=s.length;r<o;){if(e===s[r].nm||e===s[r].mn||e===s[r].ix)return i[r];r+=1}return null};return Object.defineProperty(c,"numProperties",{get:function(){return s.length}}),c}return null}}}(),MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}return Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t){var n,r=createSizedArray(t.viewData.length),i=t.viewData.length;for(n=0;n<i;n+=1)r[n]=new e(t.viewData[n],t.masksProperties[n]);return function(e){for(n=0;n<i;){if(t.masksProperties[n].nm===e)return r[n];n+=1}return null}}}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function n(e,t,n){Object.defineProperty(e,"velocity",{get:function(){return t.getVelocityAtTime(t.comp.currentFrame)}}),e.numKeys=t.keyframes?t.keyframes.length:0,e.key=function(r){if(!e.numKeys)return 0;var i="";i="s"in t.keyframes[r-1]?t.keyframes[r-1].s:"e"in t.keyframes[r-2]?t.keyframes[r-2].e:t.keyframes[r-2].s;var a="unidimensional"===n?new Number(i):Object.assign({},i);return a.time=t.keyframes[r-1].t/t.elem.comp.globalData.frameRate,a.value="unidimensional"===n?i[0]:i,a},e.valueAtTime=t.getValueAtTime,e.speedAtTime=t.getSpeedAtTime,e.velocityAtTime=t.getVelocityAtTime,e.propertyGroup=t.propertyGroup}function r(){return e}return function(i){return i?"unidimensional"===i.propType?function(t){t&&"pv"in t||(t=e);var r=1/t.mult,i=t.pv*r,a=new Number(i);return a.value=i,n(a,t,"unidimensional"),function(){return t.k&&t.getValue(),i=t.v*r,a.value!==i&&((a=new Number(i)).value=i,n(a,t,"unidimensional")),a}}(i):function(e){e&&"pv"in e||(e=t);var r=1/e.mult,i=e.data&&e.data.l||e.pv.length,a=createTypedArray("float32",i),o=createTypedArray("float32",i);return a.value=o,n(a,e,"multidimensional"),function(){e.k&&e.getValue();for(var t=0;t<i;t+=1)o[t]=e.v[t]*r,a[t]=o[t];return a}}(i):r}}(),TextExpressionSelectorPropFactory=function(){function e(e,t){return this.textIndex=e+1,this.textTotal=t,this.v=this.getValue()*this.mult,this.v}return function(t,n){this.pv=1,this.comp=t.comp,this.elem=t,this.mult=.01,this.propType="textSelector",this.textTotal=n.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(t,n,this),this.getMult=e,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.kf?this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this):this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty}}(),propertyGetTextProp=TextSelectorProp.getTextSelectorProp;function SliderEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function AngleEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function ColorEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function PointEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function LayerIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function MaskIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function CheckboxEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(e,t){var n,r=e.ef||[];this.effectElements=[];var i,a=r.length;for(n=0;n<a;n+=1)i=new GroupEffect(r[n],t),this.effectElements.push(i)}function GroupEffect(e,t){this.init(e,t)}TextSelectorProp.getTextSelectorProp=function(e,t,n){return 1===t.t?new TextExpressionSelectorPropFactory(e,t,n):propertyGetTextProp(e,t,n)},extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){var n;this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);var r,i=this.data.ef.length,a=this.data.ef;for(n=0;n<i;n+=1){switch(r=null,a[n].ty){case 0:r=new SliderEffect(a[n],t,this);break;case 1:r=new AngleEffect(a[n],t,this);break;case 2:r=new ColorEffect(a[n],t,this);break;case 3:r=new PointEffect(a[n],t,this);break;case 4:case 7:r=new CheckboxEffect(a[n],t,this);break;case 10:r=new LayerIndexEffect(a[n],t,this);break;case 11:r=new MaskIndexEffect(a[n],t,this);break;case 5:r=new EffectsManager(a[n],t,this);break;default:r=new NoValueEffect(a[n],t,this)}r&&this.effectElements.push(r)}};var lottie={};function setLocationHref(e){locationHref=e}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(e){subframeEnabled=e}function setIDPrefix(e){idPrefix=e}function loadAnimation(e){return!0===standalone&&(e.animationData=JSON.parse(animationData)),animationManager.loadAnimation(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":defaultCurveSegments=200;break;default:case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(e)&&e>1&&(defaultCurveSegments=e);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&(expressionsPlugin=t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),n=0;n<t.length;n+=1){var r=t[n].split("=");if(decodeURIComponent(r[0])==e)return decodeURIComponent(r[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.setIDPrefix=setIDPrefix,lottie.__getFactory=getFactory,lottie.version="5.7.13";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="",queryString;if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src.replace(/^[^\?]+\??/,""),renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return lottie},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return factory(root)}).call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},O6K7:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r,i=n("D57K"),a=n("MvFr");!function(e){e.CreateComment="create-comment"}(r||(r={}));var o=function(e){function t(t,n){var r=e.call(this,t,n,!0,!0)||this;return r.relatedShape=null,r.setRelatedShape(n),r}return Object(i.e)(t,e),t.prototype.getShapeId=function(){return this.relatedShape?this.relatedShape.name:null},t.prototype.getPosition=function(){return{x:this.relatedMouseEvent.stageX,y:this.relatedMouseEvent.stageY}},t}(a.a)},OOUj:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("YtkY"),l=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this;return this.locator.getDiagramOnce().pipe(Object(c.a)((function(n){var i,a,o=t.state.get("Selected"),s=!1;try{for(var c=Object(r.k)(o),l=c.next();!l.done;l=c.next()){var u=l.value;if(!n.shapes[u].isLocked){s=!1;break}s=!0}}catch(p){i={error:p}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return"lockShape"===e?!s:"unlockShape"===e&&s})))},e.prototype.getFeatureData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.prototype.getApplyData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.\u0275fac=function(t){return new(t||e)(l.pc(s.a),l.pc(a.Ib),l.pc(i.a))},e.\u0275prov=l.bc({token:e,factory:e.\u0275fac}),e}()},PGgW:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("D57K"),i=n("hSRu"),a=n("EM62"),o=n("pYIu"),s=n("tG6W"),c=n("2kYt"),l=n("Mb5J");function u(e,t){if(1&e&&a.gc(0,"toolbar-list-dropdown-item",4),2&e){var n=t.$implicit;a.Cc("item",n)}}var p=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return d(e||t)},t.\u0275cmp=a.Zb({type:t,selectors:[["toolbar-list-dropdown"]],features:[a.Pb],decls:7,vars:12,consts:[[3,"settings"],["dd",""],["ddbutton","",3,"props","items"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){if(1&e&&(a.lc(0,"div"),a.lc(1,"abs-dropdown",0,1),a.gc(3,"toolbar-dropdown-button",2),a.yc(4,"async"),a.cd(5,u,1,1,"toolbar-list-dropdown-item",3),a.yc(6,"async"),a.kc(),a.kc()),2&e){var n,r;a.Vb("ftb-item ftb-item-",t.dropdownType,""),a.Sb(1),a.Cc("settings",a.Gc(11,p)),a.Sb(2),a.Cc("props",t.props)("items",null==(n=a.zc(4,7,t._data))?null:n.value),a.Sb(2),a.Cc("ngForOf",null==(r=a.zc(6,9,t._data))?null:r.value)}},directives:[o.a,s.a,c.s,l.a],pipes:[c.b],styles:["toolbar-list-dropdown-item[_ngcontent-%COMP%]{display:block}toolbar-list-dropdown-item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}"],changeDetection:0}),t}(i.a),d=a.nc(h)},PKsm:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),t[0]=i,e.log.apply(e,t)}))},e.exports=t.default},Pj1F:function(e,t,n){var r=n("oFOz"),i=n("sfKy"),a=new Date(Date.UTC(1900,0,1)),o=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],s=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],c=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function l(e){var t=new Date(e);return t.setHours(0,0,0,0),t}function u(e){return 1===new Date(e,1,29).getMonth()}function p(e,t){return Math.ceil((t-e)/1e3/60/60/24)}function h(e){var t=e>-22038912e5?2:1;return Math.ceil((e-a)/864e5)+t}t.DATE=function(e,t,n){var a;return e=i.parseNumber(e),t=i.parseNumber(t),n=i.parseNumber(n),i.anyIsError(e,t,n)?a=r.value:(a=new Date(e,t-1,n)).getFullYear()<0&&(a=r.num),a},t.DATEDIF=function(e,n,r){r=r.toUpperCase(),e=i.parseDate(e),n=i.parseDate(n);var a,o=e.getFullYear(),s=e.getMonth(),c=e.getDate(),l=n.getFullYear(),u=n.getMonth(),p=n.getDate();switch(r){case"Y":a=Math.floor(t.YEARFRAC(e,n));break;case"D":a=t.DAYS(n,e);break;case"M":a=u-s+12*(l-o),p<c&&a--;break;case"MD":c<=p?a=p-c:(0===u?(e.setFullYear(l-1),e.setMonth(12)):(e.setFullYear(l),e.setMonth(u-1)),a=t.DAYS(n,e));break;case"YM":a=u-s+12*(l-o),p<c&&a--,a%=12;break;case"YD":u>s||u===s&&p<c?e.setFullYear(l):e.setFullYear(l-1),a=t.DAYS(n,e)}return a},t.DATEVALUE=function(e){if("string"!=typeof e)return r.value;var t=Date.parse(e);return isNaN(t)?r.value:new Date(e)},t.DAY=function(e){var t=i.parseDate(e);return t instanceof Error?t:t.getDate()},t.DAYS=function(e,t){return e=i.parseDate(e),t=i.parseDate(t),e instanceof Error?e:t instanceof Error?t:h(l(e))-h(l(t))},t.DAYS360=function(e,t,n){if(n=i.parseBool(n||"false"),e=i.parseDate(e),t=i.parseDate(t),e instanceof Error)return e;if(t instanceof Error)return t;if(n instanceof Error)return n;var r,a,o=e.getMonth(),s=t.getMonth();if(n)r=31===e.getDate()?30:e.getDate(),a=31===t.getDate()?30:t.getDate();else{var c=new Date(e.getFullYear(),o+1,0).getDate(),l=new Date(t.getFullYear(),s+1,0).getDate();r=e.getDate()===c?30:e.getDate(),t.getDate()===l?r<30?(s++,a=1):a=30:a=t.getDate()}return 360*(t.getFullYear()-e.getFullYear())+30*(s-o)+(a-r)},t.EDATE=function(e,t){return(e=i.parseDate(e))instanceof Error?e:isNaN(t)?r.value:(t=parseInt(t,10),e.setMonth(e.getMonth()+t),e)},t.EOMONTH=function(e,t){return(e=i.parseDate(e))instanceof Error?e:isNaN(t)?r.value:(t=parseInt(t,10),new Date(e.getFullYear(),e.getMonth()+t+1,0))},t.HOUR=function(e){return(e=i.parseDate(e))instanceof Error?e:e.getHours()},t.INTERVAL=function(e){if("number"!=typeof e&&"string"!=typeof e)return r.value;e=parseInt(e,10);var t=Math.floor(e/94608e4);e%=94608e4;var n=Math.floor(e/2592e3);e%=2592e3;var i=Math.floor(e/86400);e%=86400;var a=Math.floor(e/3600);e%=3600;var o=Math.floor(e/60),s=e%=60;return"P"+(t=t>0?t+"Y":"")+(n=n>0?n+"M":"")+(i=i>0?i+"D":"")+"T"+(a=a>0?a+"H":"")+(o=o>0?o+"M":"")+(s=s>0?s+"S":"")},t.ISOWEEKNUM=function(e){if((e=i.parseDate(e))instanceof Error)return e;(e=l(e)).setDate(e.getDate()+4-(e.getDay()||7));var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+1)/7)},t.MINUTE=function(e){return(e=i.parseDate(e))instanceof Error?e:e.getMinutes()},t.MONTH=function(e){return(e=i.parseDate(e))instanceof Error?e:e.getMonth()+1},t.NETWORKDAYS=function(e,t,n){return this.NETWORKDAYS.INTL(e,t,1,n)},t.NETWORKDAYS.INTL=function(e,t,n,a){if((e=i.parseDate(e))instanceof Error)return e;if((t=i.parseDate(t))instanceof Error)return t;var o=!1,s=[],l=[1,2,3,4,5,6,0],u=new RegExp("^[0|1]{7}$");if(void 0===n)n=c[1];else if("string"==typeof n&&u.test(n))for(o=!0,n=n.split(""),p=0;p<n.length;p++)"1"===n[p]&&s.push(l[p]);else n=c[n];if(!(n instanceof Array))return r.value;void 0===a?a=[]:a instanceof Array||(a=[a]);for(var p=0;p<a.length;p++){var h=i.parseDate(a[p]);if(h instanceof Error)return h;a[p]=h}var d=Math.round((t-e)/864e5)+1,f=d,g=e;for(p=0;p<d;p++){for(var m=(new Date).getTimezoneOffset()>0?g.getUTCDay():g.getDay(),v=o?s.includes(m):m===n[0]||m===n[1],b=0;b<a.length;b++){var y=a[b];if(y.getDate()===g.getDate()&&y.getMonth()===g.getMonth()&&y.getFullYear()===g.getFullYear()){v=!0;break}}v&&f--,g.setDate(g.getDate()+1)}return f},t.NOW=function(){return new Date},t.SECOND=function(e){return(e=i.parseDate(e))instanceof Error?e:e.getSeconds()},t.TIME=function(e,t,n){return e=i.parseNumber(e),t=i.parseNumber(t),n=i.parseNumber(n),i.anyIsError(e,t,n)?r.value:e<0||t<0||n<0?r.num:(3600*e+60*t+n)/86400},t.TIMEVALUE=function(e){return(e=i.parseDate(e))instanceof Error?e:(3600*e.getHours()+60*e.getMinutes()+e.getSeconds())/86400},t.TODAY=function(){return l(new Date)},t.WEEKDAY=function(e,t){if((e=i.parseDate(e))instanceof Error)return e;void 0===t&&(t=1);var n=e.getDay();return s[t][n]},t.WEEKNUM=function(e,t){if((e=i.parseDate(e))instanceof Error)return e;if(void 0===t&&(t=1),21===t)return this.ISOWEEKNUM(e);var n=o[t],r=new Date(e.getFullYear(),0,1),a=r.getDay()<n?1:0;return r-=24*Math.abs(r.getDay()-n)*60*60*1e3,Math.floor((e-r)/864e5/7+1)+a},t.WORKDAY=function(e,t,n){return this.WORKDAY.INTL(e,t,1,n)},t.WORKDAY.INTL=function(e,t,n,a){if((e=i.parseDate(e))instanceof Error)return e;if((t=i.parseNumber(t))instanceof Error)return t;if(t<0)return r.num;if(!((n=void 0===n?c[1]:c[n])instanceof Array))return r.value;void 0===a?a=[]:a instanceof Array||(a=[a]);for(var o=0;o<a.length;o++){var s=i.parseDate(a[o]);if(s instanceof Error)return s;a[o]=s}for(var l=0;l<t;){e.setDate(e.getDate()+1);var u=e.getDay();if(u!==n[0]&&u!==n[1]){for(var p=0;p<a.length;p++){var h=a[p];if(h.getDate()===e.getDate()&&h.getMonth()===e.getMonth()&&h.getFullYear()===e.getFullYear()){l--;break}}l++}}return e},t.YEAR=function(e){return(e=i.parseDate(e))instanceof Error?e:e.getFullYear()},t.YEARFRAC=function(e,t,n){if((e=i.parseDate(e))instanceof Error)return e;if((t=i.parseDate(t))instanceof Error)return t;n=n||0;var r=e.getDate(),a=e.getMonth()+1,o=e.getFullYear(),s=t.getDate(),c=t.getMonth()+1,l=t.getFullYear();switch(n){case 0:return 31===r&&31===s?(r=30,s=30):31===r?r=30:30===r&&31===s&&(s=30),(s+30*c+360*l-(r+30*a+360*o))/360;case 1:var h=365;if(o===l||o+1===l&&(a>c||a===c&&r>=s))return(o===l&&u(o)||function(e,t){var n=e.getFullYear(),r=new Date(n,2,1);if(u(n)&&e<r&&t>=r)return!0;var i=t.getFullYear(),a=new Date(i,2,1);return u(i)&&t>=a&&e<a}(e,t)||1===c&&29===s)&&(h=366),p(e,t)/h;var d=l-o+1,f=(new Date(l+1,0,1)-new Date(o,0,1))/1e3/60/60/24/d;return p(e,t)/f;case 2:return p(e,t)/360;case 3:return p(e,t)/365;case 4:return(s+30*c+360*l-(r+30*a+360*o))/360}}},QCJn:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("D57K"),i=n("hSRu"),a=n("EM62"),o=n("2kYt"),s=n("pYIu"),c=n("XLk1"),l=n("uXwy");function u(e,t){if(1&e&&(a.lc(0,"label"),a.ed(1),a.kc()),2&e){var n=a.xc();a.Sb(1),a.fd(null==n.props?null:n.props.label)}}function p(e,t){if(1&e&&a.gc(0,"sidebar-list-dropdown-item",7),2&e){var n=t.$implicit;a.Cc("item",n)}}function h(e,t){if(1&e&&a.gc(0,"sidebar-list-dropdown-item",8),2&e){var n=t.$implicit;a.Cc("item",n)}}var d=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return g(e||t)},t.\u0275cmp=a.Zb({type:t,selectors:[["sidebar-input-list-dropdown"]],features:[a.Pb],decls:12,vars:19,consts:[[4,"ngIf"],["maxHeight","200px",1,"dropdown-item",3,"autoPosition","settings"],["dd",""],["ddbutton","",3,"readOnly","validation","items","inputChanged"],["class","fx-margin-bottom-10 custom-option","dditem","",3,"item",4,"ngFor","ngForOf"],["dditem",""],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10","custom-option",3,"item"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){if(1&e&&(a.cd(0,u,2,1,"label",0),a.lc(1,"abs-dropdown",1,2),a.lc(3,"sidebar-dropdown-input",3),a.tc("inputChanged",(function(e){return t.change.next(e)})),a.yc(4,"async"),a.yc(5,"async"),a.yc(6,"async"),a.kc(),a.cd(7,p,1,1,"sidebar-list-dropdown-item",4),a.yc(8,"async"),a.gc(9,"hr",5),a.cd(10,h,1,1,"sidebar-list-dropdown-item",6),a.yc(11,"async"),a.kc()),2&e){var n,r,i;a.Cc("ngIf",null==t.props?null:t.props.label),a.Sb(1),a.Cc("autoPosition",!1)("settings",a.Gc(18,d)),a.Sb(2),a.Cc("readOnly",null==(n=a.zc(4,8,t._data))?null:n.readOnly)("validation",null==(r=a.zc(5,10,t._data))?null:r.validation)("items",null==(i=a.zc(6,12,t._data))?null:i.value),a.Sb(4),a.Cc("ngForOf",a.zc(8,14,t.customItems)),a.Sb(3),a.Cc("ngForOf",a.zc(11,16,t.defaultItems))}},directives:[o.t,s.a,c.a,o.s,l.a],pipes:[o.b],styles:[".custom-option[_ngcontent-%COMP%]  li:last-child{border-bottom:1px solid #dcdcdc}.shape-search-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container{width:195px;padding-top:15px}.shape-search-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container .ps-content{padding:0}.shape-search-browse-more-btn[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),t}(i.a),g=a.nc(f)},QSAZ:function(e,t,n){"use strict";t.__esModule=!0;var r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};t.default=r,e.exports=t.default},QuwQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginCommands=void 0,function(e){e.pluginInit="creately:plugin:init",e.pluginUnload="creately:plugin:unload"}(t.PluginCommands||(t.PluginCommands={}))},RMc3:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n("D57K"),i=n("5xGT"),a=n("C05f"),o=n("ZTXN"),s=n("g6G6"),c=n("HM3f"),l=n("ROBh"),u=n("Lrfq"),p=n("i7Dj"),h=n("Ohay"),d=n("TLy2"),f=n("YtkY"),g=n("xVbo"),m=n("wqq/"),v=n("QoSw"),b=n("c7W3"),y=n("cOhl"),x=(n("w5Uk"),n("EM62")),C=n("s2Ay"),w=n("2kYt"),k=n("crdX"),S=n("/g0E"),O=n("ZhQg");function E(e,t){1&e&&x.gc(0,"div",3)}function _(e,t){if(1&e&&(x.lc(0,"div",10),x.lc(1,"label",11),x.ed(2),x.kc(),x.kc()),2&e){var n=x.xc().$implicit;x.Sb(2),x.fd(n.title)}}function I(e,t){if(1&e){var n=x.mc();x.lc(0,"styling-tile",15),x.tc("mouseenter",(function(){x.Pc(n);var e=x.xc().$implicit;return x.xc(3).previewTileStyles(e)}))("click",(function(){x.Pc(n);var e=x.xc().$implicit;return x.xc(3).setTileStyles(e)})),x.yc(1,"async"),x.kc()}if(2&e){var r=x.xc().$implicit,i=x.xc(3);x.Xb("selected",r.styleId===x.zc(1,3,i.selectedStyleId)),x.Cc("data",r)}}function P(e,t){if(1&e){var n=x.mc();x.lc(0,"line-styling-tile",16),x.tc("mouseenter",(function(){x.Pc(n);var e=x.xc().$implicit;return x.xc(3).previewTileStyles(e)}))("click",(function(){x.Pc(n);var e=x.xc().$implicit;return x.xc(3).setTileStyles(e)})),x.yc(1,"async"),x.kc()}if(2&e){var r=x.xc().$implicit,i=x.xc(3);x.Xb("selected",r.styleId===x.zc(1,3,i.selectedStyleId)),x.Cc("data",r)}}function T(e,t){if(1&e&&(x.lc(0,"div",12),x.yc(1,"async"),x.cd(2,I,2,5,"styling-tile",13),x.yc(3,"async"),x.cd(4,P,2,5,"line-styling-tile",14),x.yc(5,"async"),x.kc()),2&e){var n=x.xc(3);x.Xb("style-line","connector"==x.zc(1,4,n.tileStyles).type),x.Sb(2),x.Cc("ngIf","anything"==x.zc(3,6,n.tileStyles).type),x.Sb(2),x.Cc("ngIf","connector"==x.zc(5,8,n.tileStyles).type)}}function A(e,t){if(1&e&&(x.lc(0,"div",7),x.cd(1,_,3,1,"div",8),x.cd(2,T,6,10,"div",9),x.kc()),2&e){var n=t.$implicit;x.Sb(1),x.Cc("ngIf",n.title&&""!==n.title),x.Sb(1),x.Cc("ngForOf",n.styles)}}function M(e,t){if(1&e){var n=x.mc();x.lc(0,"div",4),x.tc("mouseleave",(function(){return x.Pc(n),x.xc().resetTilePreview()})),x.lc(1,"h1",5),x.ed(2,"PANEL_HEADINGS.STYLES"),x.kc(),x.cd(3,A,3,2,"div",6),x.yc(4,"async"),x.kc()}if(2&e){var r=x.xc();x.Sb(3),x.Cc("ngForOf",x.zc(4,1,r.tileStyles).palettes)}}var D=function(){function e(e,t,n,r,i){var s=this;this.loader=e,this.state=t,this.ll=n,this.commandService=r,this.translate=i,this.previewState=!1,this.shapesSelected=new a.a([]),this.subs=[],this.styleChange=new o.a,this.selectedStyleId=this.getSelectedStyleID().pipe(Object(u.a)(1),Object(p.a)());var c=this.selectedUnlockedShapes().pipe(Object(h.a)()).subscribe((function(e){s.shapesSelected.next(e)}));this.subs.push(c)}return Object.defineProperty(e,"openForContextAware",{get:function(){return"atLeastOne"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return"style"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return"styles"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.translate.instant("TOOLTIPS.DIAGRAM_STYLE")},enumerable:!1,configurable:!0}),e.prototype.onActive=function(){i.Kb.track("right.styles.panel.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){i.Kb.track("right.styles.panel.click",{value1Type:"status",value1:"close"})},e.prototype.ngOnInit=function(){this.tileStyles=this.getStylePalette()},e.prototype.previewTileStyles=function(e){this.previewState=!0,this.commandService.dispatch(b.a.resetDiagramPreview),delete e.lineThickness,this.commandService.preview(b.a.applyShapeStyle,{style:e,format:{"*":this.getTextFormat(e.textColor)},reset:!1})},e.prototype.setTileStyles=function(e){var t=this;i.Kb.track("right.styles.swatch.click",{value1Type:"styleId",value1:e.styleId}),delete e.lineThickness,this.commandService.dispatch(b.a.applyShapeStyle,{style:e,format:{"*":this.getTextFormat(e.textColor)},reset:!1}).subscribe((function(n){n.status&&"RunExecutionStep"===n.stepName&&"completed"===n.stepStatus&&t.styleChange.next(e.styleId)}))},e.prototype.resetTilePreview=function(){this.previewState&&(this.commandService.dispatch(b.a.resetDiagramPreview),this.previewState=!1)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.selectedUnlockedShapes=function(){var e=this;return this.state.changes("Selected").pipe(Object(d.a)((function(t){return e.ll.forCurrentObserver(!1).pipe(Object(d.a)((function(e){return e.getDiagramOnce().pipe(Object(f.a)((function(e){var n=[];return t.forEach((function(t){var r=e.shapes[t];r.isLocked||n.push(r.id)})),n})))})))})))},e.prototype.getSelectedStyleID=function(){var e=this;return Object(s.a)(this.shapesSelected.pipe(Object(d.a)((function(t){return e.getDistinctShapeStyles(t).pipe(Object(f.a)((function(t){if(1===t.length&&e.loader.getStyle(t[0]))return t[0]})))}))),this.styleChange)},e.prototype.getDistinctShapeStyles=function(e){var t=this;return e&&e.length>0?c.b.apply(void 0,Object(r.j)(e.map((function(e){return t.ll.forCurrentObserver(!1).pipe(Object(d.a)((function(t){return t.getShapeOnce(e)})))})))).pipe(Object(f.a)((function(e){return e.reduce((function(e,t){if(t&&t.style){var n=t.style.styleId;e.includes(n)||e.push(n)}return e}),[])}))):Object(l.a)([])},e.prototype.getPaletteType=function(){var e=this;return this.shapesSelected.pipe(Object(d.a)((function(t){return e.ll.forCurrentObserver(!1).pipe(Object(d.a)((function(e){return e.getDiagramOnce().pipe(Object(f.a)((function(e){var n=e.getShapeTypes(t);return n&&1===n.length&&"connector"===n[0]?"connector":"anything"})),Object(h.a)())})))})))},e.prototype.getStylePalette=function(){var e=this;return this.getPaletteType().pipe(Object(d.a)((function(t){return"connector"===t?e.loader.getLinePalattes().pipe(Object(g.a)((function(e){return!!e})),Object(f.a)((function(e){return{type:"connector",palettes:e}}))):e.loader.getPalattes().pipe(Object(g.a)((function(e){return!!e})),Object(f.a)((function(e){return{type:"anything",palettes:e}})))})),Object(m.a)(1))},e.prototype.getTextFormat=function(e){return{indexStart:0,indexEnd:void 0,styles:{color:e}}},e.\u0275fac=function(t){return new(t||e)(x.fc(y.a),x.fc(i.Ib),x.fc(v.a),x.fc(i.B),x.fc(C.e))},e.\u0275cmp=x.Zb({type:e,selectors:[["styling-panel"]],decls:5,vars:6,consts:[["class","panel-overlay fx-cover style-panel-overlay",4,"ngIf"],[1,"sidebar-scrollbar"],["class","style-panel panel-container",3,"mouseleave",4,"ngIf"],[1,"panel-overlay","fx-cover","style-panel-overlay"],[1,"style-panel","panel-container",3,"mouseleave"],["translate","",1,"panel-heading"],["class","palette-container panel-item",4,"ngFor","ngForOf"],[1,"palette-container","panel-item"],["class","fx-margin-bottom-5",4,"ngIf"],["class","style-tile-container",3,"style-line",4,"ngFor","ngForOf"],[1,"fx-margin-bottom-5"],["translate",""],[1,"style-tile-container"],["svgType","rect",3,"selected","data","mouseenter","click",4,"ngIf"],[3,"selected","data","mouseenter","click",4,"ngIf"],["svgType","rect",3,"data","mouseenter","click"],[3,"data","mouseenter","click"]],template:function(e,t){1&e&&(x.cd(0,E,1,0,"div",0),x.yc(1,"async"),x.lc(2,"perfect-scrollbar",1),x.cd(3,M,5,3,"div",2),x.yc(4,"async"),x.kc()),2&e&&(x.Cc("ngIf",0===x.zc(1,2,t.shapesSelected).length),x.Sb(3),x.Cc("ngIf",x.zc(4,4,t.tileStyles)))},directives:[w.t,k.b,C.a,w.s,S.a,O.a],pipes:[w.b],styles:[".palette-container[_ngcontent-%COMP%]{margin-bottom:20px}.palette-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]     .style-tile{border:2px solid #ffc648}.style-tile-container[_ngcontent-%COMP%]{width:calc(100% / 4);display:inline-block;margin-bottom:10px;cursor:pointer}.style-tile-container.style-line[_ngcontent-%COMP%]{width:calc(100% / 2)}.style-panel-overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5);z-index:1}"],changeDetection:0}),e}()},Rl48:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},RrMq:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r=n("D57K"),i=n("NNJu"),a=n("5xGT"),o=n("w1VY"),s=n("QoSw"),c=n("EM62"),l=["container"],u=["styles"],p=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n)||this;return o.componentFactoryResolver=t,o.injector=n,o.dtov=r,o.ll=i,o.state=a,o.subs=[],o.tiptapDocParent=document.querySelector("tiptap-documents-manager"),o}return Object(r.e)(t,e),t.prototype.onTabUpdate=function(){this.unMountTiptap(),this.clearSubs(),this.container&&this.mountTiptapDoc()},t.prototype.mountTiptapDoc=function(){var e,t,n='tiptap-editor-component[id="'+this.diagramId+'"].notes';this.state.set("TiptapDocument",{diagramId:this.diagramId,shapeId:this.shapeId,parentName:this.parentName});var r=null===(e=this.container)||void 0===e?void 0:e.nativeElement;if(r&&(this.tiptapDoc=this.tiptapDocParent.querySelector(n),this.tiptapDoc)){r.appendChild(this.tiptapDoc);var i=this.tiptapDoc.querySelector('div[data-type="tiptap-child-editor-node"][shapeid="'+this.shapeId+'"]');if(i){var a=i.getBoundingClientRect();i.style.minHeight=window.innerHeight-a.top+"px"}(null===(t=this.styles)||void 0===t?void 0:t.nativeElement).innerHTML="<style>\n                    "+n+' div[data-type="tiptap-child-editor-node"]{display: none}\n                    '+this.parentName+" "+n+' div[data-type="tiptap-child-editor-node"][shapeid="'+this.shapeId+'"]{ display:block }\n                </style>'}},t.prototype.ngAfterViewInit=function(){this.mountTiptapDoc()},t.prototype.ngOnDestroy=function(){this.unMountTiptap(),this.clearSubs()},t.prototype.unMountTiptap=function(){this.tiptapDocParent&&this.tiptapDoc&&this.tiptapDoc.parentElement.isSameNode(this.container.nativeElement)&&this.tiptapDocParent.appendChild(this.tiptapDoc)},t.prototype.clearSubs=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(c.fc(c.m),c.fc(c.C),c.fc(o.a),c.fc(s.a),c.fc(a.Ib))},t.\u0275cmp=c.Zb({type:t,selectors:[["shape-notes"]],viewQuery:function(e,t){var n;(1&e&&(c.jd(l,!0,c.r),c.jd(u,!0,c.r)),2&e)&&(c.Lc(n=c.uc())&&(t.container=n.first),c.Lc(n=c.uc())&&(t.styles=n.first))},features:[c.Pb],decls:4,vars:0,consts:[[1,"shape-notes-container"],["container",""],["styles",""]],template:function(e,t){1&e&&(c.gc(0,"div",0,1),c.gc(2,"div",null,2))},styles:[""],changeDetection:0}),t}(i.k),h=n("4y1S"),d=n("tLVu"),f=n("okSW"),g=n("c7W3"),m=n("2DR2"),v=n("xVbo"),b=n("Ohay"),y=n("8j5Y"),x=n("TLy2"),C=n("Lrfq"),w=n("J+dc"),k=n("YtkY"),S=n("C05f"),O=n("ROBh"),E=n("HM3f"),_=n("diDk"),I=n("/jjY"),P=n("EePP"),T=n("0jHB"),A=n("X0jn"),M=n("9pEM"),D=n("gZOS"),j=n("6YKU"),N=n("nsO7"),R=n("1pbQ"),L=n("s2Ay"),F=n("bV32"),B=n("2kYt"),V=n("+ZK7"),z=n("pTJA"),U=["tabsCmp"];function G(e,t){1&e&&c.gc(0,"entity-type-manage")}var H=function(){function e(e,t,n,r,i,a,o,s,c,l){this.translate=e,this.ll=t,this.ell=n,this.userLocator=r,this.defLocator=i,this.commandService=a,this.elementRef=o,this.state=s,this.permManager=c,this.notifierController=l,this.hasCustomDbPermission=!1,this.tabs=new S.a([]),this.shapeName=new S.a({value:""}),this.hasCustomDbPermission=this.permManager.check([A.p.CUSTOM_DATABASES])}return e.prototype.init=function(){this.elementRef.nativeElement.hidden=!1,this.initObservable||(this.initObservable=this.initComponent()),this.mainSub=this.initObservable.connect()},e.prototype.unsubscribe=function(){var e;null===(e=this.tabsCmp)||void 0===e||e.clearAll(),this.mainSub&&this.mainSub.unsubscribe()},e.prototype.initComponent=function(){var e=this;return this.state.changes("Selected").pipe(Object(v.a)((function(e){return 1===e.length})),Object(b.a)((function(e,t){return e[0]===t[0]})),Object(y.a)((function(t){var n,r=e.state.get("CommentThreadData");r&&r.visible&&e.state.set("CommentThreadData",{}),e.shapeId=t[0],null===(n=e.tabsCmp)||void 0===n||n.clearAll()})),Object(x.a)((function(t){return e.generateTabs(t[0]).pipe(Object(y.a)((function(t){e.tabs.next(t)})))})),Object(C.a)())},e.prototype.allShapeData=function(e){var t=[];for(var n in e){var r={name:this.ll.forDiagram(n,!1).getDiagramName().pipe(Object(w.a)(1)),count:0,shapes:[],shapesMap:{}};for(var i in t.push(r),e[n])r.shapesMap[e[n][i]]||(r.shapesMap[e[n][i]]=[]),r.shapes.push({docId:n,shapeId:i,name:this.linkShapeName(e[n][i]),link:"shape/"+i}),r.count++,r.shapesMap[e[n][i]].push({docId:n,shapeId:i,name:this.linkShapeName(e[n][i]),link:"shape/"+i})}return t},e.prototype.labelChanged=function(e){var t=this.shapeName.value;"defName"===t.type?this.commandService.dispatch(g.a.renameShape,{shapeId:this.shapeId,name:e}):this.commandService.dispatch(g.a.applyText,{shapeId:this.shapeId,textId:t.id,content:[Object(r.a)(Object(r.a)({},t.format),{text:e})]})},e.prototype.getTabs=function(e,t,n){var r=[this.getInfoTab(e,t,n),this.getDataTab(e,t,n),this.getAttachmentsTab(e,t)];return this.state.get("SmartRulesEnabled")&&r.push(this.getRulesTab(e,t)),r},e.prototype.generateTabs=function(e,t){var n,i=this,a=(t?this.ll.forDiagram(t,!1).getDiagramModel():this.ll.forCurrentObserver(!1).pipe(Object(x.a)((function(e){return e.getDiagramModel()})))).pipe(Object(x.a)((function(t){return i.enitityEditable(t,e).pipe(Object(k.a)((function(e){return{model:t,entityEditable:e}})))})),Object(k.a)((function(t){var n=i.getPanelNameData(t.model.shapes[e]);return n.value!==i.shapeName.value.value&&i.shapeName.next(n),i.getTabs(t.model,e,t.entityEditable).filter((function(e){return!!e}))}))),o=(t?this.ll.forDiagram(t,!1).getShapeModel(e):this.ll.forCurrentObserver(!1).pipe(Object(x.a)((function(t){return t.getShapeModel(e)})))).pipe(Object(k.a)((function(e){return e.eData})),Object(b.a)(N.isEqual),Object(x.a)((function(e){if(e){var t=Object.keys(e);return n=t[0],i.ell.getEntityOnce(t[0],e[t[0]])}return Object(O.a)([])})),Object(k.a)((function(e){return e instanceof I.a?[i.getLinksTab(n,e.id,e.getDisplayLinks(),i.allShapeData(e.shapes)),i.getShapeHistoryTab(n,e.id)]:[]})));return Object(E.b)([a,o]).pipe(Object(k.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return Object(r.j)(n,i)})))},e.prototype.getPanelNameData=function(e){return e.primaryTextModel&&e.primaryTextModel.plainText?{value:e.primaryTextModel.plainText,type:"textModel",id:e.primaryTextModel.id,format:e.primaryTextModel.content[0],shapeType:e.name}:{value:e.name,shapeType:e.name,type:"defName"}},e.prototype.getDataTab=function(e,t,n){var r=this,i=e.shapes[t],a=e.getShapeDataItems(t);return{id:"data",label:this.translate.instant("SHAPE_DATA.TABS.DATA.LABEL"),content:{type:m.b,inputs:{context:"right.data.data",entityEditable:n,dataItems:a,shape:i,diagramId:e.id,onChange:function(t){return r.onShapeDataItemChange(e.id,t,i)}}}}},e.prototype.getInfoTab=function(e,t,n){return{id:"info",label:this.translate.instant("SHAPE_DATA.TABS.INFO.LABEL"),content:{type:p,inputs:{context:"right.data.info",shapeId:t,diagramId:e.id,parentName:this.parentName}}}},e.prototype.enitityEditable=function(e,t){var n=null==e?void 0:e.shapes,r=n?n[t]:null;return r&&r.eDataId&&r.entityDefId?this.ell.getEData(r.eDataId).pipe(Object(w.a)(1),Object(x.a)((function(e){return e.getEDataModel().pipe(Object(w.a)(1),Object(k.a)((function(e){if(e&&e.customEntityDefs[r.entityDefId])return e.customEntityDefs[r.entityDefId].editable})))}))):Object(O.a)(!1)},e.prototype.getEntityTab=function(e,t){var n=this;return{id:"entity",label:e,content:{type:m.b,inputs:{isEntity:!0,dataItems:t,onChange:function(e){return n.onEntityDataItemChange(e)}}}}},e.prototype.getSettingsTab=function(e,t){var n=this,r=e.getShapeDataItems(t);return{id:"settings",label:'<svg width="24" style="zoom: 80%; position: absolute; margin-left: -12px; " width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M12 8.666c-1.838 0-3.333 1.496-3.333 3.334s1.495 3.333 3.333 3.333 3.333-1.495 3.333-3.333-1.495-3.334-3.333-3.334m0 7.667c-2.39 0-4.333-1.943-4.333-4.333s1.943-4.334 4.333-4.334 4.333 1.944 4.333 4.334c0 2.39-1.943 4.333-4.333 4.333m-1.193 6.667h2.386c.379-1.104.668-2.451 2.107-3.05 1.496-.617 2.666.196 3.635.672l1.686-1.688c-.508-1.047-1.266-2.199-.669-3.641.567-1.369 1.739-1.663 3.048-2.099v-2.388c-1.235-.421-2.471-.708-3.047-2.098-.572-1.38.057-2.395.669-3.643l-1.687-1.686c-1.117.547-2.221 1.257-3.642.668-1.374-.571-1.656-1.734-2.1-3.047h-2.386c-.424 1.231-.704 2.468-2.099 3.046-.365.153-.718.226-1.077.226-.843 0-1.539-.392-2.566-.893l-1.687 1.686c.574 1.175 1.251 2.237.669 3.643-.571 1.375-1.734 1.654-3.047 2.098v2.388c1.226.418 2.468.705 3.047 2.098.581 1.403-.075 2.432-.669 3.643l1.687 1.687c1.45-.725 2.355-1.204 3.642-.669 1.378.572 1.655 1.738 2.1 3.047m3.094 1h-3.803c-.681-1.918-.785-2.713-1.773-3.123-1.005-.419-1.731.132-3.466.952l-2.689-2.689c.873-1.837 1.367-2.465.953-3.465-.412-.991-1.192-1.087-3.123-1.773v-3.804c1.906-.678 2.712-.782 3.123-1.773.411-.991-.071-1.613-.953-3.466l2.689-2.688c1.741.828 2.466 1.365 3.465.953.992-.412 1.082-1.185 1.775-3.124h3.802c.682 1.918.788 2.714 1.774 3.123 1.001.416 1.709-.119 3.467-.952l2.687 2.688c-.878 1.847-1.361 2.477-.952 3.465.411.992 1.192 1.087 3.123 1.774v3.805c-1.906.677-2.713.782-3.124 1.773-.403.975.044 1.561.954 3.464l-2.688 2.689c-1.728-.82-2.467-1.37-3.456-.955-.988.41-1.08 1.146-1.785 3.126"/></svg>',content:{type:P.b,inputs:{context:"right.data.settings.dataField",dataItems:r,onChange:function(r){return n.onShapeDataItemChange(e.id,r,e.shapes[t])}}},buttonAlignment:"right"}},e.prototype.getAttachmentsTab=function(e,t){if(e.shapes[t].attachmentIds.length>0){var n=e.shapes[t].attachmentIds.map((function(t){return e.attachments[t]}));return{id:"attachments",label:this.translate.instant("SHAPE_DATA.TABS.ATTACHMENTS.LABEL"),content:{type:d.a,inputs:{shapeAttachments:n}}}}},e.prototype.getRulesTab=function(e,t){var n=this,r=e.shapes[t];if(r.isContainer){var i=r.rules;return{id:"rules",label:this.translate.instant("SHAPE_DATA.TABS.RULES.TITLE"),content:{type:M.a,inputs:{rules:i,onChange:function(t){return n.onShapeRulesChange(e,r.id,t)}}}}}},e.prototype.getLinksTab=function(e,t,n,r){return{id:"links",label:this.translate.instant("SHAPE_DATA.TABS.LINKS.TITLE"),content:{type:f.a,inputs:{eDataId:e,entityId:t,links:n,shapes:r}},buttonAlignment:"left"}},e.prototype.getShapeHistoryTab=function(e,t){return{id:"history",label:this.translate.instant("SHAPE_DATA.TABS.HISTORY.TITLE"),content:{type:R.a,inputs:{eDataId:e,entityId:t}},buttonAlignment:"left"}},e.prototype.linkShapeName=function(e){return this.defLocator.getDefinition(e).pipe(Object(k.a)((function(e){return e.name})))},e.prototype.onShapeDataItemChange=function(e,t,n){var r,i,a=this,o=this.shapeId;if(t.data&&(t.data.labelEditable||t.id===m.a)&&(t.data.isPublic=!0),o){if(t.data&&t.data.__sakota__&&!t.data.__sakota__.hasChanges())return;this.commandService.dispatch(g.a.changeShapeDataItems,e,(r={},r[o]=(i={},i[t.id]=t.data,i),r)).subscribe({error:function(e){if(!(e instanceof j.b))throw e;a.showFormulaUpdateErrorsNotification(e)}})}},e.prototype.showFormulaUpdateErrorsNotification=function(e){var t={inputs:{description:this.translate.instant("SHAPE_DATA.FORMULA_ERROR."+e.message),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("FORMULA_UPDATE_ERROR",a.i,a.jb.Warning,t,!1)},e.prototype.onShapeRulesChange=function(e,t,n){var r=D.Sakota.create(e);r.shapes[t].rules=n;var i=r.__sakota__.getChanges();i.$set&&this.commandService.dispatch(g.a.applyModifierDocument,e.id,{modifier:i})},e.prototype.onEntityDataItemChange=function(e){this.shapeId},e.\u0275fac=function(t){return new(t||e)(c.fc(L.e),c.fc(s.a),c.fc(_.a),c.fc(h.x),c.fc(T.a),c.fc(a.B),c.fc(c.r),c.fc(a.Ib),c.fc(h.m),c.fc(a.kb))},e.\u0275cmp=c.Zb({type:e,selectors:[["shape-data-editor"]],viewQuery:function(e,t){var n;(1&e&&c.jd(U,!0,a.k),2&e)&&(c.Lc(n=c.uc())&&(t.tabsCmp=n.first))},inputs:{parentName:"parentName"},decls:8,vars:2,consts:[[1,"shape-data-editor-container"],["tooltip-tour-step","data-2",1,"shape-data-editor-tabs-section"],[1,"shape-data-editor-header","fx-margin-bottom-15"],[1,"shape-data-editor-buttons-group"],[4,"ngIf"],[1,"shape-data-editor-tabs"],["context","right.data",3,"tabs"],["tabsCmp",""]],template:function(e,t){1&e&&(c.lc(0,"div",0),c.lc(1,"div",1),c.lc(2,"div",2),c.lc(3,"div",3),c.cd(4,G,1,0,"entity-type-manage",4),c.kc(),c.kc(),c.lc(5,"div",5),c.gc(6,"abs-tab",6,7),c.kc(),c.kc(),c.kc()),2&e&&(c.Sb(4),c.Cc("ngIf",t.hasCustomDbPermission&&"home"!==t.state.get("CurrentProject")),c.Sb(2),c.Cc("tabs",t.tabs))},directives:[F.a,B.t,V.a,z.a],styles:[".shape-data-editor-tabs[_ngcontent-%COMP%]{height:calc(100% - 55px);overflow:hidden}.shape-data-editor-buttons-group[_ngcontent-%COMP%]{display:flex;position:absolute;right:0;top:28px}.shape-data-editor-button[_ngcontent-%COMP%]{width:16px;height:16px}abs-tab[_ngcontent-%COMP%]{display:block;height:100%}.shape-data-editor-overlay[_ngcontent-%COMP%]{z-index:100;background-color:hsla(0,0%,40.8%,.8)}.shape-data-editor-container[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;position:relative}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:focus, .shape-data-editor-container[_ngcontent-%COMP%]  .editable-label:hover{background-color:#fff}.shape-data-editor-container[_ngcontent-%COMP%]  .editable-label{margin-right:12px}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-view{position:relative!important;top:0;left:0;z-index:1000;transform:unset!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-container{position:relative;z-index:2;background:unset;border:unset;box-shadow:unset;border-radius:unset;width:100%;transform:unset}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input-user{display:none}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input{border-top:unset!important;margin-top:-16px}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-input.main-comment-input{position:absolute;bottom:8px;left:10px;width:220px}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area{padding-left:15px;padding-right:0;max-height:650px!important}.shape-data-editor-container[_ngcontent-%COMP%]  .temp-resolve-menu{display:block;top:2px;right:-8px}.shape-data-editor-container[_ngcontent-%COMP%]  .temp-resolve-menu .menu-content{top:22px!important;right:-10px!important;width:133px!important;padding:9px 15px!important}.shape-data-editor-container[_ngcontent-%COMP%]  .comment-thread-items-area comment-thread-item:first-child{display:none!important}.shape-data-editor-container[_ngcontent-%COMP%]  .simple-dd-item-container{margin:6px 0}.shape-data-editor-header[_ngcontent-%COMP%]{position:relative;padding-left:20px;padding-right:20px;padding-top:15px;font-size:18px;margin-right:160px}.shape-data-editor-header[_ngcontent-%COMP%]  .editable-label{font-size:18px}.shape-data-editor-header[_ngcontent-%COMP%]  .abs-tab-header{margin-right:10px}.shape-data-editor-header-title[_ngcontent-%COMP%]{width:80%}.shape-data-editor-tabs[_ngcontent-%COMP%]  .abs-tab-header{margin-right:200px;margin-left:10px;border-bottom:none}.shape-data-editor-tabs[_ngcontent-%COMP%]  .abs-tab-header a{margin-left:10px;margin-right:10px}.shape-data-editor-copy-options[_ngcontent-%COMP%]{position:absolute;right:-15px;top:46px;width:50px}.shape-data-editor-copy-options-header[_ngcontent-%COMP%]{font-size:12px;line-height:20px;color:#7e7e7e}.shape-data-editor-container-inner[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:4px;display:flex;flex-direction:column;padding:30px;box-sizing:border-box}.shape-data-editor-icon-container[_ngcontent-%COMP%]{width:100px;margin-right:15px;border-radius:4px 0 0 4px}.shape-data-editor-icon-container.neutral[_ngcontent-%COMP%]{background-color:#40b29e}.shape-data-editor-icon-container.warning[_ngcontent-%COMP%]{background-color:#ffc648}.shape-data-editor-icon-container.success[_ngcontent-%COMP%]{background-color:#61a15e}.shape-data-editor-icon-container.error[_ngcontent-%COMP%]{background-color:#d92626}.shape-data-editor-content[_ngcontent-%COMP%]{flex:1;word-break:break-word;display:flex;flex-direction:column}.shape-data-editor-content-text[_ngcontent-%COMP%]{flex:1}.shape-data-editor-button-container[_ngcontent-%COMP%]{text-align:right}.shape-data-editor-close-btn[_ngcontent-%COMP%]{top:5px;right:5px;position:absolute}.shape-data-editor-external-link-msg[_ngcontent-%COMP%]{background-color:#eceef2;height:80vh;position:relative;display:flex;align-items:center;justify-content:center}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]{display:inline-block;text-align:center;max-width:500px}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px}.shape-data-editor-external-link-msg-inner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7e7e7e}.shape-data-editor-comments-section[_ngcontent-%COMP%]{float:right;width:300px;height:100%;background:#f6f6f9}.shape-data-editor-comments-section[_ngcontent-%COMP%]  perfect-scrollbar{height:calc(100% - 50px)}.shape-data-editor-tabs-section[_ngcontent-%COMP%]{float:left;width:550px;height:100%}.shape-data-editor-comments-header[_ngcontent-%COMP%]{font-size:16px;margin:20px 10px 10px}","[_nghost-%COMP%]  .mat-form-field{width:100%}[_nghost-%COMP%]  .mat-input-element{caret-color:unset!important}[_nghost-%COMP%]  .mat-form-field-underline, [_nghost-%COMP%]  span.mat-form-field-ripple{display:none}[_nghost-%COMP%]  .mat-form-field-infix{padding:4px;margin-top:-10px}[_nghost-%COMP%]  .mat-form-field-wrapper{padding-bottom:2px!important}[_nghost-%COMP%]  .mat-ripple-element{display:none!important}[_nghost-%COMP%]  div[data-abs-tab-id=data] .shape-data-item-desc, [_nghost-%COMP%]  div[data-abs-tab-id=info] .shape-data-item-add, [_nghost-%COMP%]  div[data-abs-tab-id=info] .shape-data-items-container{display:none}[_nghost-%COMP%]  div[data-abs-tab-id=data] .label-editable-data-item-label{display:block!important}"],changeDetection:0}),e}()},Rx0M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FINISHED=t.RUNNING=t.READY=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=p(n("kRQx")),a=p(n("+ITg")),o=p(n("nyhH")),s=p(n("rgVC")),c=p(n("+gXh")),l=p(n("Rz8A")),u=p(n("fX4D"));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=t.READY="READY",g=t.RUNNING="RUNNING",m=t.FINISHED="FINISHED",v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.rules=[],r.allowUndefinedFacts=n.allowUndefinedFacts||!1,r.pathResolver=n.pathResolver,r.operators=new Map,r.facts=new Map,r.status=f,e.map((function(e){return r.addRule(e)})),l.default.map((function(e){return r.addOperator(e)})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"addRule",value:function(e){if(!e)throw new Error("Engine: addRule() requires options");var t=void 0;if(e instanceof a.default)t=e;else{if(!Object.prototype.hasOwnProperty.call(e,"event"))throw new Error('Engine: addRule() argument requires "event" property');if(!Object.prototype.hasOwnProperty.call(e,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');t=new a.default(e)}return t.setEngine(this),this.rules.push(t),this.prioritizedRules=null,this}},{key:"updateRule",value:function(e){var t=this.rules.findIndex((function(t){return t.name===e.name}));if(!(t>-1))throw new Error("Engine: updateRule() rule not found");this.rules.splice(t,1),this.addRule(e),this.prioritizedRules=null}},{key:"removeRule",value:function(e){var t=!1;if(e instanceof a.default){var n=this.rules.indexOf(e);n>-1&&(t=Boolean(this.rules.splice(n,1).length))}else{var r=this.rules.filter((function(t){return t.name!==e}));t=r.length!==this.rules.length,this.rules=r}return t&&(this.prioritizedRules=null),t}},{key:"addOperator",value:function(e,t){var n=void 0;n=e instanceof o.default?e:new o.default(e,t),(0,u.default)("engine::addOperator name:"+n.name),this.operators.set(n.name,n)}},{key:"removeOperator",value:function(e){var t=void 0;return t=e instanceof o.default?e.name:e,this.operators.delete(t)}},{key:"addFact",value:function(e,t,n){var r=e,a=void 0;return e instanceof i.default?(r=e.id,a=e):a=new i.default(e,t,n),(0,u.default)("engine::addFact id:"+r),this.facts.set(r,a),this}},{key:"removeFact",value:function(e){var t=void 0;return t=e instanceof i.default?e.id:e,this.facts.delete(t)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var e=this.rules.reduce((function(e,t){var n=t.priority;return e[n]||(e[n]=[]),e[n].push(t),e}),{});this.prioritizedRules=Object.keys(e).sort((function(e,t){return Number(e)>Number(t)?-1:1})).map((function(t){return e[t]}))}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=m,this}},{key:"getFact",value:function(e){return this.facts.get(e)}},{key:"evaluateRules",value:function(e,t){var n=this;return Promise.all(e.map((function(e){return n.status!==g?((0,u.default)("engine::run status:"+n.status+"; skipping remaining rules"),Promise.resolve()):e.evaluate(t).then((function(e){return(0,u.default)("engine::run ruleResult:"+e.result),t.addResult(e),e.result?(t.addEvent(e.event,"success"),n.emitAsync("success",e.event,t,e).then((function(){return n.emitAsync(e.event.type,e.event.params,t,e)}))):(t.addEvent(e.event,"failure"),n.emitAsync("failure",e.event,t,e))}))})))}},{key:"run",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)("engine::run started"),this.status=g;var n={allowUndefinedFacts:this.allowUndefinedFacts,pathResolver:this.pathResolver},r=new s.default(this.facts,t,n),i=this.prioritizeRules(),a=Promise.resolve();return new Promise((function(t,n){i.map((function(t){return a=a.then((function(){return e.evaluateRules(t,r)})).catch(n)})),a.then((function(){e.status=m,(0,u.default)("engine::run completed");var n=r.getResults().reduce((function(e,t){return e[t.result?"results":"failureResults"].push(t),e}),{results:[],failureResults:[]}),i=n.results,a=n.failureResults;t({almanac:r,results:i,failureResults:a,events:r.getEvents("success"),failureEvents:r.getEvents("failure")})})).catch(n)}))}}]),t}(c.default);t.default=v},Rz8A:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("nyhH"),a=(r=i)&&r.__esModule?r:{default:r};var o=[];function s(e){return"NaN"!==Number.parseFloat(e).toString()}o.push(new a.default("equal",(function(e,t){return e===t}))),o.push(new a.default("notEqual",(function(e,t){return e!==t}))),o.push(new a.default("in",(function(e,t){return t.indexOf(e)>-1}))),o.push(new a.default("notIn",(function(e,t){return-1===t.indexOf(e)}))),o.push(new a.default("contains",(function(e,t){return e.indexOf(t)>-1}),Array.isArray)),o.push(new a.default("doesNotContain",(function(e,t){return-1===e.indexOf(t)}),Array.isArray)),o.push(new a.default("lessThan",(function(e,t){return e<t}),s)),o.push(new a.default("lessThanInclusive",(function(e,t){return e<=t}),s)),o.push(new a.default("greaterThan",(function(e,t){return e>t}),s)),o.push(new a.default("greaterThanInclusive",(function(e,t){return e>=t}),s)),t.default=o},SBjo:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("YtkY"),l=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this;return this.locator.getDiagramOnce().pipe(Object(c.a)((function(e){var n,i,a=t.state.get("Selected"),o=!0;try{for(var s=Object(r.k)(a),c=s.next();!c.done;c=s.next()){var l=c.value;if(!e.shapes[l].isLocked){o=!1;break}}}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return!o})))},e.prototype.getFeatureData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.prototype.getApplyData=function(e,t){return void 0===t&&(t={}),Object(o.a)(t)},e.\u0275fac=function(t){return new(t||e)(l.pc(s.a),l.pc(a.Ib),l.pc(i.a))},e.\u0275prov=l.bc({token:e,factory:e.\u0275fac}),e}()},SKSx:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("h1tj"),a=n("X0jn"),o=n("C0rp"),s=function(e){function t(t,n,r,i,a,o){var s=e.call(this)||this;return s.value=t,s.text=n,s.width=a,s.height=o,s.graphics.clear(),s.graphics.beginFill("rgba(0,0,0,0.01)"),s.graphics.drawRect(0,0,s.width,s.height),s.graphics.endFill(),s.x=r,s.y=i,s}return Object(r.e)(t,e),t.prototype.getCursor=function(e){return{cursor:"pointer",tail:null,type:"css"}},t}(i.Shape),c=function(e){function t(t,n){var r=e.call(this)||this;r.text=t,r.origin=n;var i=o.document(a.b);return i.load(t.content),i.width(t.width),i.getLinksData().forEach((function(e){var t=new s(e.value,e.text,e.x,e.y,e.width,e.height);r.addChild(t)})),r}return Object(r.e)(t,e),t.prototype.destroy=function(){},t}(i.Container)},STWM:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("5xGT"),i=n("6Oco"),a=n("CSUU"),o=n("Oggp"),s=n("19Zn"),c=n("EM62"),l=function(){function e(e){this.smartContainerSvc=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"ContainerChangeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges(),r=e.__sakota__.getTarget();if(n.$set)return this.containerXChange(e,n),this.containerYChange(e,n),this.containerZIndexChage(e,n),this.containerAngleChange(e,n),this.containerAnyChange(e,n),this.containerScaleChange(e,n),this.containerIdentifierChange(e,n,r),this.reScaleToDateFit(e,n,t),Object(i.b)()},e.prototype.containerXChange=function(t,n){for(var r in n.$set){e.regexX.lastIndex=0;var i=e.regexX.exec(r);if(i){var a=i[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.containerScaleChange=function(t,n){for(var r in n.$set){e.regexScaleX.lastIndex=0;var i=e.regexScaleX.exec(r)||e.regexScaleY.exec(r);if(i){var a=i[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.reScaleToDateFit=function(t,n,r){if("Execute"===r)for(var i in n.$set){e.regexScaleX.lastIndex=0;var a=e.regexScaleX.exec(i)||e.regexScaleY.exec(i);if(a){var c=a[1],l=t.shapes[c];if(!(!l.isContainer||l.containerContexts.length<1||l.containerContexts.length>0&&l.containerContexts[0]!==s.B.XWithWidth)){var u=l.data.startDate.value,p=l.data.endDate.value,h=Object(o.a)(p,u),d=Math.floor(l.drawWidth/h)*h;l.scaleX=d/l.defaultBounds.width}}}},e.prototype.containerIdentifierChange=function(t,n,r){var i=this,a=function(a){e.regexDataChanges.lastIndex=0;var o=e.regexDataChanges.exec(a);if(!o)return"continue";if(/data.identifier.value/.test(a)){var s=o[1],c=n.$set[a],l=r.shapes[s].data.identifier.value,u=t.shapes[s];Object.keys(u.children).forEach((function(e){var n=t.shapes[e];i.smartContainerSvc.changeTheIdentifier(t,n,l,c)}))}};for(var o in n.$set)a(o)},e.prototype.containerYChange=function(t,n){for(var r in n.$set){e.regexY.lastIndex=0;var i=e.regexY.exec(r);if(i){var a=i[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.containerAngleChange=function(t,n){for(var r in n.$set){e.regexAngle.lastIndex=0;var i=e.regexAngle.exec(r);if(i){var a=i[1],o=t.shapes[a];this.updateTransform(t,o)}}},e.prototype.updateTransform=function(e,t){if(!t.isConnector()&&Object.keys(t.children).length)for(var n in t.children){var i=e.shapes[n];if(i&&!i.isConnector()){var a=t.children[n].relativeX,o=t.children[n].relativeY,s=t.children[n].relativeAngle,c={x:{value:a,type:"fixed-start"},y:{value:o,type:"fixed-start"}},l=r.ob.onRect(c,t.defaultBounds,t.transform),u=t.angle+s;i.angle!==u&&(i.angle=u),i.x!==l.x&&(i.x=l.x),i.y!==l.y&&(i.y=l.y),this.updateTransform(e,i)}}},e.prototype.containerZIndexChage=function(t,n){for(var r in n.$set){e.regexZindex.lastIndex=0;var i=e.regexZindex.exec(r);if(i){var a=i[1],o=t.shapes[a];this.updateZIndex(t,o)}}},e.prototype.updateZIndex=function(e,t){if(!t.isConnector()&&Object.keys(t.children).length){var n=function(n){var i=e.shapes[n];if(i){var a=t.children[i.id].relativeZIndex,o=t.zIndex+1+a;i.zIndex!==o&&(i.zIndex=o),(i.getConnectors&&i.getConnectors(e)||[]).forEach((function(t){e.shapes[t.connector.id].zIndex!==o&&(e.shapes[t.connector.id].zIndex=o)})),r.updateZIndex(e,i)}},r=this;for(var i in t.children)n(i)}},e.prototype.containerAnyChange=function(t,n){var r=new Set;for(var i in n.$set){e.regexAny.lastIndex=0;var a=e.regexAny.exec(i);if(a){var o=a[1],s=t.shapes[o];r.has(o)||this.callContainerChangeHook(t,s),r.add(o)}}},e.prototype.callContainerChangeHook=function(e,t){if(!t.isConnector()&&Object.keys(t.children).length)for(var n in t.children){var r=e.shapes[n];r&&(r.containerChange&&r.containerChange(r,e.shapes[r.containerId]),this.callContainerChangeHook(e,r))}},e.regexX=/shapes\.([^\.]+)\.x/g,e.regexY=/shapes\.([^\.]+)\.y/g,e.regexScaleX=/shapes\.([^\.]+)\.scaleX/g,e.regexScaleY=/shapes\.([^\.]+)\.scaleY/g,e.regexZindex=/shapes\.([^\.]+)\.zIndex/g,e.regexAngle=/shapes\.([^\.]+)\.angle/g,e.regexAny=/shapes\.([^\.]+)\./g,e.regexDataChanges=/shapes\.([^\.]+)\.data\.([^\.]+)\.value/g,e.\u0275fac=function(t){return new(t||e)(c.pc(a.a))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},"SXG+":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("5xGT"),a=n("6Oco"),o=n("P4Xx"),s=n("ROBh"),c=n("nsO7"),l=n("8j5Y"),u=n("EM62"),p=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"LayoutingBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["containerRegions"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){if(t===i.A.PREVIEW)return a.a;var n=e.__sakota__.getChanges();return Object(o.a)(this.applyLayout(e,n))},e.prototype.applyLayout=function(t,n){var i=this,a=[Object(s.a)({})],c=new Map;for(var l in n.$set){e.regexLayoutIndexChange.lastIndex=0,e.regexRegionChange.lastIndex=0;var u=e.regexLayoutIndexChange.exec(l),p=e.regexRegionChange.exec(l);if(u||p)if(u){var h=u[1],d=(v=t.shapes[h]).containerId,f=v.containerRegionId,g=t.shapes[d],m=void 0;c.has(d)?m=c.get(d):(m=new Set,c.set(d,m)),g&&f&&!m.has(f)&&m.add(f)}else if(p){d=p[1],f=p[2],g=t.shapes[d],m=void 0;c.has(d)?m=c.get(d):(m=new Set,c.set(d,m)),g&&f&&!m.has(f)&&m.add(f)}}for(var l in n.$unset){e.regexLayoutIndexChange.lastIndex=0,e.regexRegionChange.lastIndex=0;u=e.regexLayoutIndexChange.exec(l),p=e.regexRegionChange.exec(l);if(u||p)if(u){var v;h=u[1],d=(v=t.shapes[h]).containerId,f=v.containerRegionId,g=t.shapes[d],m=void 0;c.has(d)?m=c.get(d):(m=new Set,c.set(d,m)),g&&f&&!m.has(f)&&m.add(f)}else if(p){d=p[1],f=p[2],g=t.shapes[d],m=void 0;c.has(d)?m=c.get(d):(m=new Set,c.set(d,m)),g&&f&&!m.has(f)&&m.add(f)}}return c.forEach((function(e,n){var r=t.shapes[n];a.push(i.layoutChildren(t,r,Array.from(e)))})),o.a.apply(void 0,Object(r.j)(a))},e.prototype.layoutChildren=function(e,t,n,a){var u=this;void 0===a&&(a=!0);var p=[Object(s.a)({})],h=[];return n.forEach((function(n){var a=t.containerRegions[n];if(a&&a.shapes&&!Object(c.isEmpty)(a.shapes)){h.push.apply(h,Object(r.j)(Object.keys(a.shapes)));var o=Object.keys(a.shapes).map((function(t){return e.shapes[t]})).filter((function(e){return e})),s={x:a.x+t.x,y:a.y+t.y,width:a.width,height:a.height};p.push(i.Z.apply(e,o,s,a.layoutingData))}})),o.a.apply(void 0,Object(r.j)(p)).pipe(Object(l.a)({complete:function(){var n,i;if(!Object(c.isEmpty)(t.children)&&h.length>0)try{for(var o=Object(r.k)(h),s=o.next();!s.done;s=o.next()){var l=s.value;u.updateRelativeTranslate(t,e.shapes[l])}}catch(p){n={error:p}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}a&&(t.resizeContainerAfterLayouting?t.resizeContainerAfterLayouting(e,t):u.resizeContainerAfterLayouting(e,t))}}))},e.prototype.updateRelativeTranslate=function(e,t){var n=e.defaultBounds.getTransformedPoints(e.transform),r=t,a=r.defaultBounds.getTransformedPoints(r.transform),o=r.angle-e.angle,s=i.ab.from(n.topLeft.x,n.topLeft.y,n.bottomLeft.x,n.bottomLeft.y).perpendicularTo(a.topLeft),c=i.ab.from(s.x,s.y,a.topLeft.x,a.topLeft.y).length(),l=i.ab.from(n.topLeft.x,n.topLeft.y,n.topRight.x,n.topRight.y).perpendicularTo(a.topLeft),u=i.ab.from(l.x,l.y,a.topLeft.x,a.topLeft.y).length();e.children[t.id]&&(e.children[t.id].relativeX=c,e.children[t.id].relativeY=u,e.children[t.id].relativeAngle=o)},e.prototype.resizeContainerAfterLayouting=function(t,n){var i=n.bounds;if(n.children&&Object.keys(n.children).length){var a=t.getBounds(Object(r.j)(Object.keys(n.children)));a.absorb(i);var o=a.width-i.width,s=a.height-i.height;if(o>0){var c=n.width+o+e.containerResizePadding;n.scaleX=c/n.defaultBounds.width}if(s>0){var l=n.height+s+e.containerResizePadding;n.scaleY=l/n.defaultBounds.height}}},e.containerResizePadding=10,e.regexLayoutIndexChange=/shapes\.([^\.]+)\.layoutIndex/g,e.regexRegionChange=/shapes\.([^\.]+)\.containerRegions\.([^\.]+)\.shapes\.([^\.]+)/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.bc({token:e,factory:e.\u0275fac}),e}()},T4Sa:function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var r=n("D57K"),i=n("EM62"),a=n("3+4Q"),o=n("5xGT"),s=n("qMyy"),c=n("yn08"),l=n("C05f"),u=n("ZTXN"),p=n("KTx3"),h=n("HM3f"),d=n("ROBh"),f=n("mWib"),g=n("8j5Y"),m=n("Ohay"),v=n("YtkY"),b=n("kuMc"),y=n("J+dc"),x=n("TLy2"),C=n("xVbo"),w=n("X0jn"),k=n("hX56"),S=n("4y1S"),O=n("nsO7"),E=n("ljsB"),_=n("QoSw"),I=n("lu3Q"),P=n("sXdR"),T=n("NNJu"),A=n("C5+t"),M=n("s2Ay"),D=n("j1Bk"),j=n("2kYt"),N=n("crdX"),R=n("ZFuN"),L=n("K0+f"),F=n("nT0V"),B=["cancelButton"],V=["container"];function z(e,t){1&e&&(i.lc(0,"div",20),i.lc(1,"span",21),i.ed(2,"MESSAGES.NO_COMMENTS"),i.kc(),i.kc())}function U(e,t){1&e&&(i.lc(0,"div",22),i.gc(1,"img",23),i.lc(2,"span",24),i.ed(3,"MESSAGES.COMMENTS_TIP_1"),i.kc(),i.lc(4,"span",25),i.ed(5,"MESSAGES.COMMENTS_TIP_2"),i.kc(),i.kc())}function G(e,t){if(1&e){var n=i.mc();i.lc(0,"div",28),i.lc(1,"comment-thread-item",29),i.tc("click",(function(){i.Pc(n);var e=t.$implicit;return i.xc(2).handleCommentItemClick(e.parentComment)})),i.kc(),i.kc()}if(2&e){var r=t.$implicit;i.Xb("active",r.selected),i.Sb(1),i.Cc("comment",r.latestComment)("commenter",r.threadCommenter)("threadCommentor",r.previousThreadCommenter)("threadCount",r.commentCount)("showControls",!1)}}function H(e,t){if(1&e&&(i.lc(0,"div",26),i.cd(1,G,2,7,"div",27),i.kc()),2&e){var n=t.ngIf;i.Sb(1),i.Cc("ngForOf",n)}}function Y(e,t){if(1&e&&(i.lc(0,"div",33),i.lc(1,"label"),i.ed(2),i.yc(3,"async"),i.kc(),i.kc()),2&e){var n=i.xc(2);i.Sb(2),i.gd(" ",i.zc(3,1,n.resolvedLabel)," ")}}function q(e,t){if(1&e){var n=i.mc();i.lc(0,"div",34),i.lc(1,"comment-thread-item",35),i.tc("click",(function(){i.Pc(n);var e=t.$implicit;return i.xc(2).handleCommentItemClick(e.parentComment)})),i.kc(),i.kc()}if(2&e){var r=t.$implicit;i.Sb(1),i.Cc("comment",r.latestComment)("commenter",r.threadCommenter)("threadCommentor",r.previousThreadCommenter)("resolvedCommentor",r.resolvedCommentor)("threadCount",r.commentCount)("showControls",!1)}}function W(e,t){if(1&e&&(i.lc(0,"div",30),i.cd(1,Y,4,3,"div",31),i.cd(2,q,2,6,"div",32),i.kc()),2&e){var n=t.ngIf;i.Sb(1),i.Cc("ngIf",n.length>0),i.Sb(1),i.Cc("ngForOf",n)}}var X=function(e){return{"fx-hidden":e}},K=function(e){return{cursor:e}},Z=function(e){return{value1:e}},$=function(e){return{event:"right.comment.indicator.toggle",data:e}},Q=function(){function e(e,t,n,r,i,a,o){this.commands=e,this.state=t,this.datastore=n,this.userLocator=r,this.translateService=i,this.ll=a,this.cursorGen=o,this.toggleEnabled=new l.a(!1),this.toggleCommandHandler=new u.a,this.intervalDuration=3e3,this.toggleThrottle=400,this.isCommentMode=new l.a(!1),this.buttonCursor=new u.a,this.subs=[],this.init()}return Object.defineProperty(e,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return"diagramcomments"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return"comment"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.translateService.instant("TOOLTIPS.DIAGRAM_COMMENTS")},enumerable:!1,configurable:!0}),e.prototype.closePanel=function(){this.state.set("OpenRightSidebar",T.r.None)},e.prototype.handleCommentToggle=function(e){this.toggleCommandHandler.next(e)},e.prototype.handleToggleChange=function(){var e=this;return this.toggleCommandHandler.pipe(Object(f.a)(this.toggleThrottle),Object(P.lodashThrottle)(this.toggleThrottle,{leading:!1,trailing:!0}),Object(g.a)((function(t){e.commands.dispatch(S.u.updateUserPreference,{preferenceName:"show_comment_indicator",value:t})})))},e.prototype.handleCommentItemClick=function(e){var t=this;o.Kb.track("right.comment.show",{value1Type:"trigger",value1:"panel"}),this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(g.a)((function(n){n.shapes&&n.shapes[e.shapeId]?t.commands.dispatch(E.a.focusToPoint,{shapeIds:[e.shapeId],coordinates:e.locOnDiagram}):t.commands.dispatch(E.a.focusToPoint,{shapeIds:null,coordinates:e.locOnDiagram})}))).subscribe();var n={visible:!0,threadId:e.id,comments:[e]};this.state.set("CommentThreadData",n)},e.prototype.getCommentToggleState=function(){var e=this;return this.userLocator.getCommentToggleState().pipe(Object(m.a)(),Object(v.a)((function(t){e.toggleEnabled.next(t)})))},e.prototype.onActive=function(){o.Kb.track("right.comments.panel.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){o.Kb.track("right.comments.panel.click",{value1Type:"status",value1:"close"}),this.toggleAddCommentMode(!1)},e.prototype.handleAddButtonClick=function(){var e=this;Object(p.a)(this.cancelButton.nativeElement,"mouseover").pipe(Object(g.a)((function(e){return e.stopPropagation()})),Object(b.a)(Object(p.a)(this.container.nativeElement,"mouseover").pipe(Object(g.a)((function(){return e.buttonCursor.next(e.getButtonCursor())}))))).subscribe(),o.Kb.track("right.comment.add.click",{value1Type:"trigger",value1:"button-click"}),this.toggleAddCommentMode(!0)},e.prototype.handleCancelButtonClick=function(){o.Kb.track("right.comment.cancel",{value1Type:"trigger",value1:"button-click"}),this.toggleAddCommentMode(!1)},e.prototype.toggleAddCommentMode=function(e){var t;t=e?{state:c.b.Comment}:{state:c.b.Normal},this.isCommentMode.next(e),this.commands.dispatch(s.a.changeMouseControlState,null,t)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.init=function(){var e=this;this.subs.push(this.getHideHelpMessageInteraction().subscribe((function(){return e.isCommentMode.next(!1)})),this.state.changes("CurrentDiagram").pipe(Object(g.a)((function(t){e.diagramId=t,e.unresolvedComments=e.getUnresolvedComments(),e.resolvedComments=e.getResolvedComments(),e.showDefaultMessage=e.shouldShowDefaultMessage(),e.resolvedLabel=e.getResolvedLabel()}))).subscribe(),this.checkForNewComments().subscribe(),this.getCommentToggleState().subscribe(),this.handleToggleChange().subscribe(),this.handleCancelKeyboardEvent().subscribe(),this.state.changes("CurrentInteractionHandler").pipe(Object(m.a)((function(e,t){return e.type===t.type})),Object(g.a)((function(t){var n=t.injector.get(t.type).defaultCursor;e.buttonCursor.next(e.getButtonCursor(n))}))).subscribe(),this.listenToConnectionChanges().subscribe())},e.prototype.getButtonCursor=function(e){return e&&"cur"===e.type&&"comment"===e.cursor?this.cursorGen.getCursorIcon(e):"pointer"},e.prototype.updateSelectedProperty=function(e){var t=this;return this.state.changes("CommentThreadData").pipe(Object(v.a)((function(n){return n.visible?e.map((function(e){return e.parentComment.id===n.threadId?(e.selected=!0,t.startMarkSeenByTimer(e.parentComment)):e.selected=!1,e})):e.map((function(e){return e.selected=!1,e}))})))},e.prototype.startMarkSeenByTimer=function(e){var t=this;setTimeout((function(){return Object(r.c)(t,void 0,void 0,(function(){return Object(r.f)(this,(function(t){return this.markSeenBy(e),[2]}))}))}),this.intervalDuration)},e.prototype.markSeenBy=function(e){var t=this;this.datastore.find(a.a,{diagramId:this.diagramId,parentId:e.id}).pipe(Object(y.a)(1),Object(g.a)((function(n){var r=[];t.shouldAddSeenBy(e)&&r.push(e.id),n.forEach((function(e){t.shouldAddSeenBy(e)&&r.push(e.id)})),r.length>0&&t.commands.dispatch(s.a.markCommentSeen,{commentIds:r,userId:t.state.get("CurrentUser")})}))).subscribe()},e.prototype.shouldAddSeenBy=function(e){var t=this.state.get("CurrentUser");return e.userId!==t&&!e.seenBy.includes(t)},e.prototype.checkForNewComments=function(){var e=this;return this.datastore.find(a.a,{diagramId:this.diagramId,$or:[{resolved:null},{resolved:!1}]}).pipe(Object(g.a)((function(t){for(var n=!1,r=0;r<t.length;r++)if(t[r].isNew(e.state.get("CurrentUser"))){n=!0;break}e.state.set("NewCommentsIndicator",n)})))},e.prototype.shouldShowDefaultMessage=function(){return Object(h.b)(this.unresolvedComments,this.resolvedComments).pipe(Object(v.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return 0===n.length&&0===i.length})))},e.prototype.getResolvedComments=function(){var e=this;return this.datastore.find(a.a,{diagramId:this.diagramId,parentId:null,resolved:{$exists:!0}}).pipe(Object(x.a)((function(t){return e.getCommentList(t)})),Object(x.a)((function(t){return t.length>0?e.updateCommentWithResolvedUser(t):Object(d.a)([])})))},e.prototype.updateCommentWithResolvedUser=function(e){var t=this;return h.b.apply(void 0,Object(r.j)(e.map((function(e){return t.userLocator.getUserInfo(e.parentComment.resolvedBy).pipe(Object(C.a)((function(e){return!!e})),Object(y.a)(1),Object(v.a)((function(t){return e.resolvedCommentor=t,e})))}))))},e.prototype.getUnresolvedComments=function(){var e=this;return this.datastore.find(a.a,{diagramId:this.diagramId,parentId:null,$and:[{$or:[{resolved:null},{resolved:!1}]}]}).pipe(Object(x.a)((function(t){return e.getCommentList(t)})),Object(x.a)((function(t){return e.updateSelectedProperty(t)})))},e.prototype.getCommentList=function(e){var t=this;return e&&e.length>0?h.b.apply(void 0,Object(r.j)(e.map((function(e){return t.getCommentItem(e)})))).pipe(Object(v.a)((function(e){return e=e.filter((function(e){return!e.latestComment.deleted})),Object(O.orderBy)(e,["lastUpdatedTime"],["desc"])}))):Object(d.a)([])},e.prototype.getCommentItem=function(e){var t=this;return this.datastore.find(a.a,{diagramId:this.diagramId,$or:[{deleted:null},{deleted:!1}],parentId:e.id},{sort:{lastUpdated:1}}).pipe(Object(x.a)((function(n){n.unshift(e);var i=t.getCommenterIds(n,2);return h.b.apply(void 0,Object(r.j)(i.map((function(e){return t.userLocator.getUserInfo(e).pipe(Object(C.a)((function(e){return!!e})),Object(y.a)(1))})))).pipe(Object(v.a)((function(r){return t.buildCommentItem(r[r.length-1],r[r.length-2],n.length,e,n[n.length-1],n[n.length-1].lastUpdated)})))})))},e.prototype.buildCommentItem=function(e,t,n,r,i,a){var o={threadCommenter:e,commentCount:n,latestComment:i,parentComment:r,lastUpdatedTime:a,selected:!1};return i.parentId||(i.parentId=null),t&&(o.previousThreadCommenter=t),o},e.prototype.getCommenterIds=function(e,t){var n,i,a=[];try{for(var o=Object(r.k)(e),s=o.next();!s.done;s=o.next()){var c=s.value;if(a.includes(c.userId)||a.push(c.userId),a.length>=t)break}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a},e.prototype.handleCancelKeyboardEvent=function(){var e=this;return Object(p.a)(window,"keydown").pipe(Object(C.a)((function(e){return e.keyCode===w.j.Escape})),Object(g.a)((function(){o.Kb.track("right.comment.cancel",{value1Type:"trigger",value1:"esc"}),e.toggleAddCommentMode(!1)})))},e.prototype.getHideHelpMessageInteraction=function(){return this.state.changes("MouseControlState").pipe(Object(C.a)((function(e){return e!==c.b.Comment})))},e.prototype.getResolvedLabel=function(){var e=this;return this.resolvedComments.pipe(Object(x.a)((function(t){return e.translate("COMMENTS.LABELS.RESOLVED",{noOfThreads:t.length})})))},e.prototype.translate=function(e,t){return this.translateService.get(e,t).pipe(Object(y.a)(1))},e.prototype.listenToConnectionChanges=function(){var e=this;return this.state.changes(A.c).pipe(Object(g.a)((function(t){t!==A.c.ONLINE&&"diagramcomments"===e.state.get("RightSidebarPanel")&&e.closePanel()})))},e.\u0275fac=function(t){return new(t||e)(i.fc(o.B),i.fc(o.Ib),i.fc(k.b),i.fc(S.x),i.fc(M.e),i.fc(_.a),i.fc(I.a))},e.\u0275cmp=i.Zb({type:e,selectors:[["comments-panel"]],viewQuery:function(e,t){var n;(1&e&&(i.jd(B,!0,i.r),i.jd(V,!0,i.r)),2&e)&&(i.Lc(n=i.uc())&&(t.cancelButton=n.first),i.Lc(n=i.uc())&&(t.container=n.first))},inputs:{threads:"threads"},decls:35,vars:47,consts:[[1,"comments-panel-wrapper"],[1,"comments-panel-container","panel-section","fx-margin-top-24"],["container",""],[1,"panel-title-close-container"],["mainText","PANEL_HEADINGS.COMMENTS"],[1,"panel-close-btn",3,"click"],[1,"nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"panel-header-buttons","fx-margin-top-5","fx-margin-bottom-10","comments-panel-padding"],["data-testid","add-comment-button","translate","",1,"nu-btn-med","primary","fx-span-width","fx-no-margin",3,"ngClass","ngStyle","click"],["translate","",1,"nu-btn-med","crimson","fx-span-width","fx-no-margin",3,"ngClass","ngStyle","click"],["cancelButton",""],[1,"threads-section"],["class","comments-panel-padding comments-panel-default-msg",4,"ngIf"],["class","comments-panel-padding comments-panel-help-msg fx-margin-top-20 fx-margin-bottom-10",4,"ngIf"],["class","comments-panel-comments-container unresolved-comments",4,"ngIf"],["class","comments-panel-comments-container resolved-comments",4,"ngIf"],[1,"panel-footer"],[1,"comment-panel-toggle-button-container"],["data-testid","comment-show-toggle",3,"label","checked","trackAction","change"],[1,"comments-panel-padding","comments-panel-default-msg"],["translate","",1,"grey"],[1,"comments-panel-padding","comments-panel-help-msg","fx-margin-top-20","fx-margin-bottom-10"],["src","./assets/images/comments-panel/comment.svg",1,"comments-panel-help-image","fx-margin-bottom-10"],["translate","",1,"grey","fx-block","fx-margin-bottom-20"],["translate","",1,"grey","fx-block"],[1,"comments-panel-comments-container","unresolved-comments"],["class","comments-panel-comment-item unresolved-comment",3,"active",4,"ngFor","ngForOf"],[1,"comments-panel-comment-item","unresolved-comment"],[3,"comment","commenter","threadCommentor","threadCount","showControls","click"],[1,"comments-panel-comments-container","resolved-comments"],["class","comments-panel-padding fx-margin-bottom-10",4,"ngIf"],["class","comments-panel-comment-item resolved-comment",4,"ngFor","ngForOf"],[1,"comments-panel-padding","fx-margin-bottom-10"],[1,"comments-panel-comment-item","resolved-comment"],[3,"comment","commenter","threadCommentor","resolvedCommentor","threadCount","showControls","click"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.lc(1,"div",1,2),i.lc(3,"div",3),i.gc(4,"panel-icon-header",4),i.lc(5,"button",5),i.tc("click",(function(){return t.closePanel()})),i.wc(),i.lc(6,"svg",6),i.gc(7,"use",7),i.kc(),i.kc(),i.kc(),i.vc(),i.lc(8,"div",8),i.lc(9,"button",9),i.tc("click",(function(){return t.handleAddButtonClick()})),i.yc(10,"async"),i.yc(11,"async"),i.ed(12," COMMENTS.BUTTONS.ADD_COMMENT "),i.kc(),i.lc(13,"button",10,11),i.tc("click",(function(){return t.handleCancelButtonClick()})),i.yc(15,"async"),i.yc(16,"async"),i.ed(17," BUTTONS.CANCEL "),i.kc(),i.kc(),i.lc(18,"div",12),i.cd(19,z,3,0,"div",13),i.yc(20,"async"),i.yc(21,"async"),i.cd(22,U,6,0,"div",14),i.yc(23,"async"),i.lc(24,"perfect-scrollbar"),i.cd(25,H,2,1,"div",15),i.yc(26,"async"),i.cd(27,W,3,2,"div",16),i.yc(28,"async"),i.kc(),i.kc(),i.kc(),i.lc(29,"div",17),i.lc(30,"div",18),i.lc(31,"toggle-button",19),i.tc("change",(function(e){return t.handleCommentToggle(e)})),i.yc(32,"translate"),i.yc(33,"async"),i.yc(34,"async"),i.kc(),i.kc(),i.kc(),i.kc()),2&e&&(i.Sb(9),i.Cc("ngClass",i.Hc(35,X,i.zc(10,11,t.isCommentMode)))("ngStyle",i.Hc(37,K,i.zc(11,13,t.buttonCursor))),i.Sb(4),i.Cc("ngClass",i.Hc(39,X,!i.zc(15,15,t.isCommentMode)))("ngStyle",i.Hc(41,K,i.zc(16,17,t.buttonCursor))),i.Sb(6),i.Cc("ngIf",i.zc(20,19,t.showDefaultMessage)&&!i.zc(21,21,t.isCommentMode)),i.Sb(3),i.Cc("ngIf",i.zc(23,23,t.isCommentMode)),i.Sb(3),i.Cc("ngIf",i.zc(26,25,t.unresolvedComments)),i.Sb(2),i.Cc("ngIf",i.zc(28,27,t.resolvedComments)),i.Sb(4),i.Dc("label",i.zc(32,29,"LABELS.COMMENT_TOGGLE")),i.Cc("checked",i.zc(33,31,t.toggleEnabled))("trackAction",i.Hc(45,$,i.Hc(43,Z,i.zc(34,33,t.toggleCommandHandler)))))},directives:[D.a,M.a,j.q,j.w,j.t,N.b,R.a,L.a,j.s,F.a],pipes:[j.b,M.d],styles:[".panel-heading[_ngcontent-%COMP%]{margin-bottom:10px}.comments-panel-comment-item[_ngcontent-%COMP%], .comments-panel-padding[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}.comments-panel-container[_ngcontent-%COMP%]{width:320px;flex-grow:1;padding-left:10px;padding-right:10px}.comments-panel-container.panel-section[_ngcontent-%COMP%]{margin-bottom:0}.comments-panel-default-msg[_ngcontent-%COMP%]{line-height:20px}.comments-panel-default-msg[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-bottom:-3px}.comments-panel-comment-item[_ngcontent-%COMP%]{margin-bottom:5px;cursor:pointer}.comments-panel-comment-item[_ngcontent-%COMP%]:hover{background-color:#f2f5fb}.comments-panel-comment-item[_ngcontent-%COMP%]  .cti{padding-left:0;padding-right:0}.comments-panel-comment-item[_ngcontent-%COMP%]  .cti *{cursor:pointer}.comments-panel-comment-item.active[_ngcontent-%COMP%]{background-color:#f2f5fb}.resolved-comment[_ngcontent-%COMP%]  .cti *{color:#9aa0a9}.resolved-comment[_ngcontent-%COMP%]  .user-img-container.active .user-img-inner:after{background:hsla(0,0%,100%,.7)!important}.comments-panel-comments-container[_ngcontent-%COMP%]{margin-bottom:15px}.comment-panel-toggle-button-container[_ngcontent-%COMP%]{padding:10px 15px}.comment-panel-toggle-button-container[_ngcontent-%COMP%]  label{line-height:18px}.comments-panel-help-image[_ngcontent-%COMP%]{max-width:100%}.comments-panel-help-msg[_ngcontent-%COMP%]{line-height:20px}.comments-panel-help-msg[_ngcontent-%COMP%]   .fx-block[_ngcontent-%COMP%]{display:block}.panel-title-close-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-left:15px;padding-right:8px}.panel-close-btn[_ngcontent-%COMP%]{margin-top:10px;background:transparent;margin-left:10px;cursor:pointer}.nu-ic-close[_ngcontent-%COMP%], .panel-close-btn[_ngcontent-%COMP%]{height:35px;width:35px}.comments-panel-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:100%}.threads-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:450px}"],changeDetection:0}),e}()},"T9/7":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=p;var i=n("XVEb"),a=r(n("0KrK")),o=n("svB4"),s=n("3/2H"),c=r(n("UImk")),l=n("hQOw");t.VERSION="4.7.7";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var u="[object Object]";function p(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},o.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}p.prototype={constructor:p,logger:c.default,log:c.default.log,registerHelper:function(e,t){if(i.toString.call(e)===u){if(t)throw new a.default("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(i.toString.call(e)===u)i.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(i.toString.call(e)===u){if(t)throw new a.default("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){l.resetLoggedProperties()}};var h=c.default.log;t.log=h,t.createFrame=i.createFrame,t.logger=c.default},TQyE:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return f}));var r,i=n("mWib"),a=n("ZTXN"),o=n("C05f"),s=n("6Oco"),c=(n("Cupj"),n("nsO7")),l=n("EM62"),u=n("/YfA"),p=n("2kYt"),h=["colorpicker"];function d(e,t){1&e&&(l.lc(0,"div",4),l.ed(1,"-"),l.kc())}!function(e){e.Fill="fill",e.Border="border"}(r||(r={}));var f=function(){function e(){this._change=new a.a,this._isDiffColor=new o.a(!1),this._label=new o.a("")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.pipe(Object(i.a)(100))},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._data=Object(c.clone)(e),void 0!==this._data.params&&(this._data.params.isDiffColor?(this._data.value="#FFFFFF",this._isDiffColor.next(!0)):this._isDiffColor.next(!1))},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){var e=this.colorpicker.nativeElement;void 0!==this._data.params&&this._data.params.type===r.Border?(e.style.borderColor=this._data.value,e.style.borderWidth="2px"):e.style.backgroundColor=this._data.value,this._label.next(this._props.label)},e.prototype.applyAnimated=function(){return this.apply(),s.a},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Zb({type:e,selectors:[["nu-color-picker"]],viewQuery:function(e,t){var n;(1&e&&l.Wc(h,!0),2&e)&&(l.Lc(n=l.uc())&&(t.colorpicker=n.first))},decls:8,vars:14,consts:[[1,"colorpicker-container"],[1,"colorpicker-button","fx-center-all",3,"colorPicker","cpPosition","cpOpenOnHover","cpUseRootViewContainer","colorPickerChange"],["colorpicker",""],["class","colorpicker-empty gray",4,"ngIf"],[1,"colorpicker-empty","gray"]],template:function(e,t){1&e&&(l.lc(0,"div",0),l.lc(1,"div",1,2),l.tc("colorPickerChange",(function(e){return t._data.value=e}))("colorPickerChange",(function(e){return t._change.next({value:e})})),l.cd(3,d,2,0,"div",3),l.yc(4,"async"),l.kc(),l.lc(5,"label"),l.ed(6),l.yc(7,"async"),l.kc(),l.kc()),2&e&&(l.Sb(1),l.Zc("top","0px")("left","0px"),l.Cc("colorPicker",t._data.value)("cpPosition",t._props.cpPosition||"left-top")("cpOpenOnHover",!0)("cpUseRootViewContainer",!0),l.Sb(2),l.Cc("ngIf",l.zc(4,10,t._isDiffColor)),l.Sb(3),l.fd(l.zc(7,12,t._label)))},directives:[u.a,p.t],pipes:[p.b],styles:[".colorpicker-container[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.colorpicker-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:10px}.colorpicker-button[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:25px;border:1px solid #d3d3e7;cursor:pointer}.colorpicker-button[_ngcontent-%COMP%]:hover{border:1px solid #ffc648}.colorpicker-empty[_ngcontent-%COMP%]{font-weight:bolder;font-size:larger}.colorpicker-empty.gray[_ngcontent-%COMP%]{color:#939fab}"],changeDetection:0}),e}()},U8K0:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("5xGT"),a=n("C5+t"),o=n("Lmsv"),s=n("EM62"),c=function(e){function t(t){var n=e.call(this)||this;return n.globalNotificationService=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return!0},t.prototype.executeResult=function(e){return this.globalNotificationService.setGlobalNotifications(e.data.notifications),!0},t.\u0275fac=function(e){return new(e||t)(s.pc(o.a))},t.\u0275prov=s.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(i.v)(),Object(r.g)("design:paramtypes",[o.a])],t)}(a.b);Object.defineProperty(c,"name",{value:"GetGlobalNotifications"});var l=function(e){function t(t){var n=e.call(this)||this;return n.globalNotificationService=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{notificationIds:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return!!(this.data.notificationIds&&this.data.notificationIds.length>0)&&this.globalNotificationService.markGlobalNotificationRead(this.data.notificationIds,!0)},t.prototype.revert=function(){var e=this.data.notificationIds;return this.globalNotificationService.markGlobalNotificationRead(e,!1)},t.\u0275fac=function(e){return new(e||t)(s.pc(o.a))},t.\u0275prov=s.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(i.v)(),Object(r.g)("design:paramtypes",[o.a])],t)}(a.b);Object.defineProperty(l,"name",{value:"MarkGlobalNotificationRead"});var u=function(e){function t(t){var n=e.call(this)||this;return n.globalNotificationService=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return!1},t.prototype.executeResult=function(e){return this.globalNotificationService.addNewGlobalNotification(e.notification),!0},t.\u0275fac=function(e){return new(e||t)(s.pc(o.a))},t.\u0275prov=s.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(i.v)(),Object(r.g)("design:paramtypes",[o.a])],t)}(a.b);Object.defineProperty(u,"name",{value:"NewGlobalNotification"});var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.register=function(e){e.map(t.newGlobalNotification).add(u),e.map(t.getGlobalNotifications).add(c),e.map(t.markGlobalNotificationRead).add(l)},t.newGlobalNotification=new t("NewGlobalNotification"),t.getGlobalNotifications=new t("GetGlobalNotifications"),t.markGlobalNotificationRead=new t("MarkGlobalNotificationRead"),t}(i.y)},"UCH/":function(e,t,n){"use strict";n.d(t,"a",(function(){return Ee}));var r=n("D57K"),i=n("EM62"),a=n("5xGT"),o=n("hX56"),s=n("nsO7"),c=n("C05f"),l=n("g6G6"),u=n("HM3f"),p=n("6Oco"),h=n("ROBh"),d=n("YtkY"),f=n("TLy2"),g=n("8j5Y"),m=n("xVbo"),v=n("QoSw"),b=n("SBw3"),y=n("WydG"),x=n("iV8b"),C=n("iy5+"),w=n("NNJu"),k=n("s2Ay"),S=n("crdX"),O=n("2kYt"),E=n("lQIu"),_=n("j1Bk"),I=["selectionX"],P=["selectionY"],T=["selectionWidth"],A=["selectionHeight"],M=["connectorStartX"],D=["connectorStartY"],j=["connectorEndX"],N=["connectorEndY"],R=["selectionAngle"],L=["sizeAndPosSection"],F=["sizeAndPosPanelItemXY"],B=["sizeAndPosPanelItemWH"],V=["sizeAndPosPanelItemA"],z=["sizeAndPosPanelItemConStartXY"],U=["sizeAndPosPanelItemConEndXY"],G=["textSectionBISUModel"],H=["textSectionBISUText"],Y=["textSectionAlignModel"],q=["textSectionAlignText"],W=["textSectionPanelItemBISUAlign"],X=["textSectionPanelItemFontSize"],K=["textSectionPanelItemColor"],Z=["textSectionPanelTextPosition"],$=["textSectionFontModel"],Q=["textSectionFontText"],J=["textSectionSizeModel"],ee=["textSectionSizeText"],te=["textSectionColorModel"],ne=["textSectionColorText"],re=["textSectionTextPosition"],ie=["textSection"],ae=["styleSectionColors"],oe=["styleSectionLineStyle"],se=["styleSectionLineThickness"],ce=["styleSectionPanelItemColors"],le=["styleSectionPanelItemStyleThickness"],ue=["styleSection"],pe=["customSection"],he=["customControlContainer"];function de(e,t){if(1&e&&i.gc(0,"panel-icon-header",61),2&e){var n=t.ngIf;i.Dc("mainText",n.mainText),i.Dc("subText",n.subText),i.Dc("subTextIcon",n.subTextIcon)}}function fe(e,t){1&e&&i.gc(0,"div",62)}function ge(e,t){}function me(e,t){}function ve(e,t){}function be(e,t){}function ye(e,t){}function xe(e,t){}function Ce(e,t){}function we(e,t){}function ke(e,t){}function Se(e,t){}var Oe=function(e){return{"fx-hidden":e}},Ee=function(e){function t(t,n,r,i,a,o,s,l,u){var p=e.call(this,i,o,r,t,n,a)||this;return p.state=t,p.ll=n,p.commandService=r,p.componentFactoryResolver=i,p.injector=a,p.featureList=o,p.dataStore=s,p.translator=l,p.documentStatusMap=u,p.selectionXFeature=["selectionPositionX"],p.selectionYFeature=["selectionPositionY"],p.selectionWidthFeature=["selectionWidth"],p.selectionHeightFeature=["selectionHeight"],p.connectorStartXFeature=["connectorStartX"],p.connectorStartYFeature=["connectorStartY"],p.connectorEndXFeature=["connectorEndX"],p.connectorEndYFeature=["connectorEndY"],p.selectionAngleFeature=["selectionAngle"],p.textFeaturesBISUModel=["boldModelText","italicModelText","underlineModelText","strikeoutModelText"],p.textFeaturesBISUText=["boldText","italicText","underlineText","strikeoutText"],p.textFeaturesAlignModel=["leftAlignModelText","centerAlignModelText","rightAlignModelText","justifyModelText"],p.textFeaturesAlignText=["leftAlignText","centerAlignText","rightAlignText","justifyText"],p.textFeatureFontModel=["fontModelText"],p.textFeatureFontText=["fontText"],p.textFeatureSizeModel=["sizeModelText"],p.textFeatureSizeText=["sizeText"],p.textFeatureColorModel=["colorModelText"],p.textFeatureColorText=["colorTextAlt"],p.textFeatureTextPosition=["textPosition"],p.styleFeatureColor=["colorFill","colorLine","customShapeStyles"],p.styleFeatureLineStyle=["styleLine"],p.styleFeatureLineThickness=["lineThickness"],p.features=new c.a([]),p.hasUnlockedShapes=new c.a(!0),p.subs=[],p._panelName=p.panelName(),p._selection=p.state.changes("Selected"),p.enableControls=new c.a(!0),p}return Object(r.e)(t,e),Object.defineProperty(t,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return"shapePanel"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return"properties"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.translator.instant("TOOLTIPS.DIAGRAM_INFO")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEditorOpen",{get:function(){return this.state.changes("EditingText").pipe(Object(d.a)((function(e){return!!e.open})))},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(Object(l.a)(this.renderFeatureChanges(this.textFeaturesBISUModel,this.textSectionBISUModel),this.renderFeatureChanges(this.textFeaturesBISUText,this.textSectionBISUText),this.renderFeatureChanges(this.textFeaturesAlignModel,this.textSectionAlignModel),this.renderFeatureChanges(this.textFeaturesAlignText,this.textSectionAlignText),this.renderFeatureChanges(this.textFeatureSizeModel,this.textSectionSizeModel),this.renderFeatureChanges(this.textFeatureSizeText,this.textSectionSizeText),this.renderFeatureChanges(this.textFeatureFontModel,this.textSectionFontModel),this.renderFeatureChanges(this.textFeatureFontText,this.textSectionFontText),this.renderFeatureChanges(this.textFeatureColorModel,this.textSectionColorModel),this.renderFeatureChanges(this.textFeatureColorText,this.textSectionColorText),this.renderFeatureChanges(this.textFeatureTextPosition,this.textSectionTextPosition)).subscribe((function(){return e.manageSectionVisiblity(e.textSection,[{group:e.textSectionPanelItemBISUAlign,items:[e.textSectionBISUModel,e.textSectionBISUText,e.textSectionAlignModel,e.textSectionAlignText]},{group:e.textSectionPanelItemFontSize,items:[e.textSectionSizeModel,e.textSectionSizeText,e.textSectionFontModel,e.textSectionFontText]},{group:e.textSectionPanelItemColor,items:[e.textSectionColorModel,e.textSectionColorText]},{group:e.textSectionPanelTextPosition,items:[e.textSectionTextPosition]}])})),Object(l.a)(this.renderFeatureChanges(this.styleFeatureColor,this.styleSectionColors),this.renderFeatureChanges(this.styleFeatureLineStyle,this.styleSectionLineStyle),this.renderFeatureChanges(this.styleFeatureLineThickness,this.styleSectionLineThickness)).subscribe((function(){return e.manageSectionVisiblity(e.styleSection,[{group:e.styleSectionPanelItemColors,items:[e.styleSectionColors]},{group:e.styleSectionPanelItemStyleThickness,items:[e.styleSectionLineStyle,e.styleSectionLineThickness]}])})),Object(l.a)(this.renderFeatureChanges(this.selectionXFeature,this.selectionX),this.renderFeatureChanges(this.selectionYFeature,this.selectionY),this.renderFeatureChanges(this.selectionWidthFeature,this.selectionWidth),this.renderFeatureChanges(this.selectionHeightFeature,this.selectionHeight),this.renderFeatureChanges(this.selectionAngleFeature,this.selectionAngle),this.renderFeatureChanges(this.connectorStartXFeature,this.connectorStartX),this.renderFeatureChanges(this.connectorStartYFeature,this.connectorStartY),this.renderFeatureChanges(this.connectorEndXFeature,this.connectorEndX),this.renderFeatureChanges(this.connectorEndYFeature,this.connectorEndY)).subscribe((function(){e.manageSectionVisiblity(e.sizeAndPosSection,[{group:e.sizeAndPosPanelItemXY,items:[e.selectionX,e.selectionY]},{group:e.sizeAndPosPanelItemWH,items:[e.selectionWidth,e.selectionHeight]},{group:e.sizeAndPosPanelItemA,items:[e.selectionAngle]},{group:e.sizeAndPosPanelItemConStartXY,items:[e.connectorStartX,e.connectorStartY]},{group:e.sizeAndPosPanelItemConEndXY,items:[e.connectorEndX,e.connectorEndY]}])})),this.renderShapeSpecificFeatures(this.customControlContainer).subscribe((function(t){e.manageSectionVisiblity(e.customSection,[{group:e.customSection,items:t.map((function(e){return e.featureId}))}])})),this.listenToTextEditorChanges().subscribe(),this.state.changes("SidebarControls").subscribe((function(t){t===C.b.ENABLED?e.enableControls.next(!0):t===C.b.DISABLED&&e.enableControls.next(!1)})))},t.prototype.panelName=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(f.a)((function(){return e.state.changes("Selected").pipe(Object(g.a)((function(t){t&&0!==t.length||e.state.set("OpenRightSidebar",w.r.None)})),Object(m.a)((function(t){return!Object(s.isEmpty)(t)||(e.hasUnlockedShapes.next(!0),!1)})),Object(f.a)((function(t){return e.getDocumentChanges(t).pipe(Object(d.a)((function(n){var r,i,a,o=[],s=[],c=[],l=!1;return t.forEach((function(e){var t=n.getShape(e);t.isLocked||(l=!0),t.isConnector()?t.isLine()?s.push(t):o.push(t):c.push(t)})),l?e.hasUnlockedShapes.next(!0):(e.hasUnlockedShapes.next(!1),i=e.translator.instant("LABELS.LOCKED"),a="nu-ic-lock"),s.length>0&&0===c.length&&0===o.length?r=1===s.length?"Line":s.length+" Lines Selected":o.length>0&&0===c.length&&0===s.length?1===o.length?(r="Connector",i=o[0].name):r=o.length+" Connectors Selected":r=c.length>0&&0===o.length&&0===s.length?1===c.length?c[0].name:c.length+" Shapes Selected":o.length+c.length+s.length+" Shapes Selected",{mainText:r,subText:i,subTextIcon:a}})))})))})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.onActive=function(){a.Kb.track("right.info.panel.click",{value1Type:"status",value1:"open"})},t.prototype.onInactive=function(){a.Kb.track("right.info.panel.click",{value1Type:"status",value1:"close"})},t.prototype.onDropdownOpen=function(){a.Kb.track("right.info.status.click")},t.prototype.listenToTextEditorChanges=function(){var e=this;return Object(u.b)([this.state.changes("TextEditorState"),this.features]).pipe(Object(m.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return!!n.styles&&!Object(s.isEmpty)(n.styles)&&!!i.length})),Object(f.a)((function(t){var n,i,a=Object(r.h)(t,2),o=a[0],s=a[1],c=o.styles,u=s.find((function(e){return"sizeText"===e.featureId})),h=s.find((function(e){return"fontText"===e.featureId}));return u&&u.data&&(n=u.data.data,e.handleListData(n,c.size)),h&&h.data&&(i=h.data.data,e.handleListData(i,c.font)),Object(l.a)(e.updateComponent({featureId:"leftAlignText",data:{value:"left"===c.align}}),e.updateComponent({featureId:"rightAlignText",data:{value:"right"===c.align}}),e.updateComponent({featureId:"centerAlignText",data:{value:"center"===c.align}}),e.updateComponent({featureId:"justifyText",data:{value:"justify"===c.align}}),e.updateComponent({featureId:"boldText",data:{value:c.bold}}),e.updateComponent({featureId:"italicText",data:{value:c.italic}}),e.updateComponent({featureId:"underlineText",data:{value:c.underline}}),e.updateComponent({featureId:"strikeoutText",data:{value:c.strikeout}}),e.updateComponent({featureId:"colorTextAlt",data:{value:c.color}}),n?e.updateComponent({featureId:"sizeText",data:{data:n}}):p.a,i?e.updateComponent({featureId:"fontText",data:{data:i}}):p.a)})))},t.prototype.getDocumentChanges=function(e){var t=this.ll.forCurrent(!1);return t.getDiagramOnce().pipe(Object(f.a)((function(n){return 1!==e.length?Object(h.a)(n):Object(l.a)(Object(h.a)(n),t.getDiagramChanges().pipe(Object(d.a)((function(e){return e.model})),Object(m.a)((function(t){var n=t.shapes[e[0]];return n&&n.isConnector()}))))})))},t.prototype.manageSectionVisiblity=function(e,t){var n=e.nativeElement;n.style.display="none",t.forEach((function(e){var t=e.group.nativeElement;e.items.every((function(e){return 0===e.length}))?t.style.display="none":(t.style.display="",n.style.display="")}))},t.prototype.handleListData=function(e,t){if(e.forEach((function(e){return e.selected=!1})),void 0===t||"object"==typeof t&&Object(s.isEmpty)(t))return e;var n=e.find((function(e){return""+e.value==""+t}));if(n)n.selected=!0;else{var r=e.find((function(e){return e.custom}));r?(r.id=t,r.label=t,r.buttonLabel=t,r.value=t,r.selected=!0):e.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}},t.\u0275fac=function(e){return new(e||t)(i.fc(a.Ib),i.fc(v.a),i.fc(a.B),i.fc(i.m),i.fc(i.C),i.fc(b.a),i.fc(o.b),i.fc(k.e),i.fc(x.a))},t.\u0275cmp=i.Zb({type:t,selectors:[["shape-panel"]],viewQuery:function(e,t){var n;(1&e&&(i.jd(I,!0,i.hb),i.jd(P,!0,i.hb),i.jd(T,!0,i.hb),i.jd(A,!0,i.hb),i.jd(M,!0,i.hb),i.jd(D,!0,i.hb),i.jd(j,!0,i.hb),i.jd(N,!0,i.hb),i.jd(R,!0,i.hb),i.jd(L,!0,i.r),i.jd(F,!0,i.r),i.jd(B,!0,i.r),i.jd(V,!0,i.r),i.jd(z,!0,i.r),i.jd(U,!0,i.r),i.jd(G,!0,i.hb),i.jd(H,!0,i.hb),i.jd(Y,!0,i.hb),i.jd(q,!0,i.hb),i.jd(W,!0,i.r),i.jd(X,!0,i.r),i.jd(K,!0,i.r),i.jd(Z,!0,i.r),i.jd($,!0,i.hb),i.jd(Q,!0,i.hb),i.jd(J,!0,i.hb),i.jd(ee,!0,i.hb),i.jd(te,!0,i.hb),i.jd(ne,!0,i.hb),i.jd(re,!0,i.hb),i.jd(ie,!0,i.r),i.jd(ae,!0,i.hb),i.jd(oe,!0,i.hb),i.jd(se,!0,i.hb),i.jd(ce,!0,i.r),i.jd(le,!0,i.r),i.jd(ue,!0,i.r),i.jd(pe,!0,i.r),i.jd(he,!0,i.hb)),2&e)&&(i.Lc(n=i.uc())&&(t.selectionX=n.first),i.Lc(n=i.uc())&&(t.selectionY=n.first),i.Lc(n=i.uc())&&(t.selectionWidth=n.first),i.Lc(n=i.uc())&&(t.selectionHeight=n.first),i.Lc(n=i.uc())&&(t.connectorStartX=n.first),i.Lc(n=i.uc())&&(t.connectorStartY=n.first),i.Lc(n=i.uc())&&(t.connectorEndX=n.first),i.Lc(n=i.uc())&&(t.connectorEndY=n.first),i.Lc(n=i.uc())&&(t.selectionAngle=n.first),i.Lc(n=i.uc())&&(t.sizeAndPosSection=n.first),i.Lc(n=i.uc())&&(t.sizeAndPosPanelItemXY=n.first),i.Lc(n=i.uc())&&(t.sizeAndPosPanelItemWH=n.first),i.Lc(n=i.uc())&&(t.sizeAndPosPanelItemA=n.first),i.Lc(n=i.uc())&&(t.sizeAndPosPanelItemConStartXY=n.first),i.Lc(n=i.uc())&&(t.sizeAndPosPanelItemConEndXY=n.first),i.Lc(n=i.uc())&&(t.textSectionBISUModel=n.first),i.Lc(n=i.uc())&&(t.textSectionBISUText=n.first),i.Lc(n=i.uc())&&(t.textSectionAlignModel=n.first),i.Lc(n=i.uc())&&(t.textSectionAlignText=n.first),i.Lc(n=i.uc())&&(t.textSectionPanelItemBISUAlign=n.first),i.Lc(n=i.uc())&&(t.textSectionPanelItemFontSize=n.first),i.Lc(n=i.uc())&&(t.textSectionPanelItemColor=n.first),i.Lc(n=i.uc())&&(t.textSectionPanelTextPosition=n.first),i.Lc(n=i.uc())&&(t.textSectionFontModel=n.first),i.Lc(n=i.uc())&&(t.textSectionFontText=n.first),i.Lc(n=i.uc())&&(t.textSectionSizeModel=n.first),i.Lc(n=i.uc())&&(t.textSectionSizeText=n.first),i.Lc(n=i.uc())&&(t.textSectionColorModel=n.first),i.Lc(n=i.uc())&&(t.textSectionColorText=n.first),i.Lc(n=i.uc())&&(t.textSectionTextPosition=n.first),i.Lc(n=i.uc())&&(t.textSection=n.first),i.Lc(n=i.uc())&&(t.styleSectionColors=n.first),i.Lc(n=i.uc())&&(t.styleSectionLineStyle=n.first),i.Lc(n=i.uc())&&(t.styleSectionLineThickness=n.first),i.Lc(n=i.uc())&&(t.styleSectionPanelItemColors=n.first),i.Lc(n=i.uc())&&(t.styleSectionPanelItemStyleThickness=n.first),i.Lc(n=i.uc())&&(t.styleSection=n.first),i.Lc(n=i.uc())&&(t.customSection=n.first),i.Lc(n=i.uc())&&(t.customControlContainer=n.first))},features:[i.Pb],decls:134,vars:68,consts:[[1,"sidebar-scrollbar"],[1,"panel-container"],[1,"fx-margin-top-20"],[3,"mainText","subText","subTextIcon",4,"ngIf"],["class","panel-overlay fx-cover shape-panel-overlay",4,"ngIf"],["testId","shape-size-position-panel",3,"heading","open"],["sizeAndPosSection",""],[1,"panel-item"],["sizeAndPosPanelItemXY",""],[1,"row"],[1,"col"],["selectionX",""],["selectionY",""],["sizeAndPosPanelItemWH",""],["selectionWidth",""],["selectionHeight",""],["sizeAndPosPanelItemA",""],["selectionAngle",""],["sizeAndPosPanelItemConStartXY",""],["connectorStartX",""],["connectorStartY",""],["sizeAndPosPanelItemConEndXY",""],["connectorEndX",""],["connectorEndY",""],["testId","text-panel",3,"heading"],["textSection",""],[1,"panel-item","shape-panel-text-formatting"],["textSectionPanelItemBISUAlign",""],[1,"shape-panel-text-bius"],[3,"ngClass"],["textSectionBISUModel",""],["textSectionBISUText",""],[1,"shape-panel-text-align"],["textSectionAlignModel",""],["textSectionAlignText",""],["textSectionPanelItemFontSize",""],[1,"panel-multi-dropdown-container"],[1,"expand"],["textSectionFontModel",""],["textSectionFontText",""],[1,"shrink"],["textSectionSizeModel",""],["textSectionSizeText",""],["textSectionPanelItemColor",""],["textSectionColorModel",""],[1,"panel-section-color-text",3,"ngClass"],["textSectionColorText",""],["textSectionPanelTextPosition",""],["textSectionTextPosition",""],["testId","style-panel",3,"heading"],["styleSection",""],[1,"panel-item","shape-panel-style-color-pickers"],["styleSectionPanelItemColors",""],["styleSectionColors",""],["styleSectionPanelItemStyleThickness",""],[1,"panel-multi-dropdown-container","shape-panel-line-formatting"],["styleSectionLineStyle",""],["styleSectionLineThickness",""],["testId","custom-panel","heading","Custom"],["customSection",""],["customControlContainer",""],[3,"mainText","subText","subTextIcon"],[1,"panel-overlay","fx-cover","shape-panel-overlay"]],template:function(e,t){1&e&&(i.lc(0,"perfect-scrollbar",0),i.lc(1,"div",1),i.lc(2,"div",2),i.cd(3,de,1,3,"panel-icon-header",3),i.yc(4,"async"),i.yc(5,"async"),i.kc(),i.cd(6,fe,1,0,"div",4),i.yc(7,"async"),i.lc(8,"collapsable-panel-item",5,6),i.yc(10,"translate"),i.lc(11,"div",7,8),i.lc(13,"div",9),i.lc(14,"div",10),i.gc(15,"div",null,11),i.kc(),i.lc(17,"div",10),i.gc(18,"div",null,12),i.kc(),i.kc(),i.kc(),i.lc(20,"div",7,13),i.lc(22,"div",9),i.lc(23,"div",10),i.gc(24,"div",null,14),i.kc(),i.lc(26,"div",10),i.gc(27,"div",null,15),i.kc(),i.kc(),i.kc(),i.lc(29,"div",7,16),i.lc(31,"div",9),i.lc(32,"div",10),i.gc(33,"div",null,17),i.kc(),i.gc(35,"div",10),i.kc(),i.kc(),i.lc(36,"div",7,18),i.lc(38,"div",9),i.lc(39,"div",10),i.gc(40,"div",null,19),i.kc(),i.lc(42,"div",10),i.gc(43,"div",null,20),i.kc(),i.kc(),i.kc(),i.lc(45,"div",7,21),i.lc(47,"div",9),i.lc(48,"div",10),i.gc(49,"div",null,22),i.kc(),i.lc(51,"div",10),i.gc(52,"div",null,23),i.kc(),i.kc(),i.kc(),i.kc(),i.lc(54,"collapsable-panel-item",24,25),i.yc(56,"translate"),i.lc(57,"div",26,27),i.lc(59,"div",28),i.lc(60,"div",29),i.yc(61,"async"),i.cd(62,ge,0,0,"ng-template",null,30,i.dd),i.kc(),i.lc(64,"div",29),i.yc(65,"async"),i.cd(66,me,0,0,"ng-template",null,31,i.dd),i.kc(),i.kc(),i.lc(68,"div",32),i.lc(69,"div",29),i.yc(70,"async"),i.cd(71,ve,0,0,"ng-template",null,33,i.dd),i.kc(),i.lc(73,"div",29),i.yc(74,"async"),i.cd(75,be,0,0,"ng-template",null,34,i.dd),i.kc(),i.kc(),i.kc(),i.lc(77,"div",7,35),i.lc(79,"div",36),i.lc(80,"div",37),i.lc(81,"div",29),i.yc(82,"async"),i.cd(83,ye,0,0,"ng-template",null,38,i.dd),i.kc(),i.lc(85,"div",29),i.yc(86,"async"),i.cd(87,xe,0,0,"ng-template",null,39,i.dd),i.kc(),i.kc(),i.lc(89,"div",40),i.lc(90,"div",29),i.yc(91,"async"),i.cd(92,Ce,0,0,"ng-template",null,41,i.dd),i.kc(),i.lc(94,"div",29),i.yc(95,"async"),i.cd(96,we,0,0,"ng-template",null,42,i.dd),i.kc(),i.kc(),i.kc(),i.kc(),i.lc(98,"div",7,43),i.lc(100,"div",36),i.lc(101,"div",29),i.yc(102,"async"),i.cd(103,ke,0,0,"ng-template",null,44,i.dd),i.kc(),i.lc(105,"div",45),i.yc(106,"async"),i.cd(107,Se,0,0,"ng-template",null,46,i.dd),i.kc(),i.kc(),i.kc(),i.lc(109,"div",7,47),i.gc(111,"div",null,48),i.kc(),i.kc(),i.lc(113,"collapsable-panel-item",49,50),i.yc(115,"translate"),i.lc(116,"div",51,52),i.gc(118,"div",null,53),i.kc(),i.lc(120,"div",7,54),i.lc(122,"div",55),i.lc(123,"div",40),i.gc(124,"div",null,56),i.kc(),i.lc(126,"div",37),i.gc(127,"div",null,57),i.kc(),i.kc(),i.kc(),i.kc(),i.lc(129,"collapsable-panel-item",58,59),i.lc(131,"div",7),i.gc(132,"div",null,60),i.kc(),i.kc(),i.kc(),i.kc()),2&e&&(i.Sb(3),i.Cc("ngIf",i.zc(4,16,i.zc(5,18,t._selection).length&&t._panelName)),i.Sb(3),i.Cc("ngIf",!i.zc(7,20,t.hasUnlockedShapes)),i.Sb(2),i.Dc("heading",i.zc(10,22,"PANEL_HEADINGS.SIZE_POSITION")),i.Cc("open",!1),i.Sb(46),i.Dc("heading",i.zc(56,24,"PANEL_HEADINGS.TEXT")),i.Sb(6),i.Cc("ngClass",i.Hc(48,Oe,i.zc(61,26,t.isEditorOpen))),i.Sb(4),i.Cc("ngClass",i.Hc(50,Oe,!i.zc(65,28,t.isEditorOpen))),i.Sb(5),i.Cc("ngClass",i.Hc(52,Oe,i.zc(70,30,t.isEditorOpen))),i.Sb(4),i.Cc("ngClass",i.Hc(54,Oe,!i.zc(74,32,t.isEditorOpen))),i.Sb(8),i.Cc("ngClass",i.Hc(56,Oe,i.zc(82,34,t.isEditorOpen))),i.Sb(4),i.Cc("ngClass",i.Hc(58,Oe,!i.zc(86,36,t.isEditorOpen))),i.Sb(5),i.Cc("ngClass",i.Hc(60,Oe,i.zc(91,38,t.isEditorOpen))),i.Sb(4),i.Cc("ngClass",i.Hc(62,Oe,!i.zc(95,40,t.isEditorOpen))),i.Sb(7),i.Cc("ngClass",i.Hc(64,Oe,i.zc(102,42,t.isEditorOpen))),i.Sb(4),i.Cc("ngClass",i.Hc(66,Oe,!i.zc(106,44,t.isEditorOpen))),i.Sb(8),i.Dc("heading",i.zc(115,46,"PANEL_HEADINGS.STYLE")))},directives:[S.b,O.t,E.b,O.q,_.a],pipes:[O.b,k.d],styles:[".shape-panel-text-formatting[_ngcontent-%COMP%]{display:flex}.shape-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container{display:inline-block;width:22px}.shape-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container button{padding:0;margin:0}.shape-panel-text-formatting[_ngcontent-%COMP%]  .icon-button-container .nu-icon{width:24px;height:24px}.shape-panel-text-formatting[_ngcontent-%COMP%]   .shape-panel-text-bius[_ngcontent-%COMP%]{flex:1}.shape-panel-text-formatting[_ngcontent-%COMP%]   .shape-panel-text-align[_ngcontent-%COMP%]{margin-right:15px}.shape-panel-line-formatting[_ngcontent-%COMP%]   .shrink[_ngcontent-%COMP%]{width:calc(54% - 10px)}.shape-panel-line-formatting[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]{width:46%}.shape-panel-style-color-pickers[_ngcontent-%COMP%]  .colorpicker-container{margin-bottom:20px}.shape-panel-user-time-stamp[_ngcontent-%COMP%]{text-transform:lowercase}.shape-panel-overlay[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.5);z-index:1}.panel-section-color-text[_ngcontent-%COMP%]{margin-left:0}.document-status-dropdown-container[_ngcontent-%COMP%]{background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;background-color:#fff;border-radius:4px;border:1px solid #d3d3e7;margin-top:5px;display:flex;align-items:center;padding:4px;height:36px}.document-status-dropdown-container[_ngcontent-%COMP%]:hover{border:1px solid #80c6b9}.document-status-dd-item-list[_ngcontent-%COMP%]{position:absolute;border:1px solid #d3d3e7;border-radius:4px;width:100%;background-color:#fff;padding-right:10px;padding-left:10px;right:0;min-width:130px;z-index:1;overflow:hidden;box-shadow:0 2px 2px #c3c3de;opacity:0;transform:translateY(-5px)}.document-status-dd-item[_ngcontent-%COMP%]{display:flex;align-items:center}.document-status-list-item[_ngcontent-%COMP%]{padding:6px 0}.document-status-label[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #d3d3e7;margin-top:5px;padding:8px;box-shadow:0 2px 2px rgba(195,195,222,.25)}.document-status-dropdown-icon[_ngcontent-%COMP%]{margin-right:10px;height:12px;width:12px}.document-status-dd-item-dot[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%;margin:10px}.document-status-dd-item-text[_ngcontent-%COMP%]{color:#04263d;font-weight:400;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}.dropdown-idle[_ngcontent-%COMP%]{display:flex;align-items:center}.dropdown-idle[_ngcontent-%COMP%]   .document-status-dd-item[_ngcontent-%COMP%]{flex-grow:1}.chevron[_ngcontent-%COMP%]{width:24px;height:24px}.document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-inner, .document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-inner-wrapper, .document-status-dropdown[_ngcontent-%COMP%]  .abs-dropdown-items-container, .document-status-dropdown[_ngcontent-%COMP%]  .simple-dd-btn-container{width:100%;max-width:100%}.shape-panel-main-title[_ngcontent-%COMP%]{font-family:Lato,sans-serif;font-size:18px;font-style:normal;font-weight:400;line-height:22px;letter-spacing:0;text-align:left}.shape-panel-text-input[_ngcontent-%COMP%]    , .shape-panel-text-input[_ngcontent-%COMP%]     .text-input{height:36px}.panel-title-close-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:40px}.panel-close-btn[_ngcontent-%COMP%]{margin-top:10px;background:transparent;margin-right:-10px;cursor:pointer}.nu-ic-close[_ngcontent-%COMP%], .panel-close-btn[_ngcontent-%COMP%]{height:35px;width:35px}"],changeDetection:0}),t}(y.a)},UImk:function(e,t,n){"use strict";t.__esModule=!0;var r=n("XVEb"),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];console[t].apply(console,r)}}};t.default=i,e.exports=t.default},UaQO:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("XVEb"),a=n("0KrK"),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:i.blockParams([e],[r&&r.contextPath])})}))},e.exports=t.default},V4YE:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("0KrK"),a=(r=i)&&r.__esModule?r:{default:r};function o(){this.parents=[]}function s(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function c(e){s.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function l(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}o.prototype={constructor:o,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&!o.prototype[n.type])throw new a.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new a.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new a.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:s,Decorator:s,BlockStatement:c,DecoratorBlock:c,PartialStatement:l,PartialBlockStatement:function(e){l.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:s,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=o,e.exports=t.default},VTm5:function(e,t,n){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},W0Mc:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("5xGT"),a=n("nsO7"),o=n("blAi"),s=n("EM62"),c=function(){function e(){this.gpBottomId="BRZfYLOPiRa",this.gpLeftId="pbnadF9Wirq",this.gpRightId="P9d4172UDLb",this.gpTopId="0FUuJlNPewl"}return Object.defineProperty(e,"SHAPE_TEXT_PADDING",{get:function(){return 10},enumerable:!1,configurable:!0}),e.prototype.reconnect=function(e,t,n){var r=this,i=t.shapes[e],a=this.getConnectorEndpoints(i,n),o=a.map((function(e){return r.getConnectedShape(e,t)}));return this.reconnectEndpoints(t,i,a,o)},e.prototype.reconnectEndpoints=function(e,t,n,i){var a=this,o=Object(r.h)(n,2),s=o[0],c=o[1];return i.some((function(e){return!e}))||!s.shapeId||s.gluepointLocked||!c.shapeId||c.gluepointLocked?n.map((function(e,t){return e.shapeId?e:a.clearEndpointGluepoint(e)})).map((function(e,t){var n=!(!i[t]||!i[t].gluepoints[e.gluepointId]);return e.shapeId&&i[t]&&e.gluepointId&&n&&e.gluepointLocked?a.setEndpointPosition(e,i[t]):e})).map((function(r,o){var s=!(!i[o]||!i[o].gluepoints[r.gluepointId]);if(r.shapeId&&i[o]&&(!r.gluepointLocked||!s)){var c=n[0===o?1:0],l=0===o?"from":"to";return a.setEndpointGluepoint(e,t,r,c,i[o],l)}return r})):this.selectClosestGluepointPair(e,t,n,i)},e.prototype.selectClosestGluepointPair=function(t,n,a,o){var s=this,c=Object(r.h)(a,2),l=c[0],u=c[1],p=Object(r.h)(o,2),h=p[0],d=p[1],f=e.SHAPE_TEXT_PADDING,g=h.getAvailableGluepoints(t,[n.id],"from"),m=h.getStickyGluePoints(l.gluepointId);g.push.apply(g,Object(r.j)(m));var v=d.getAvailableGluepoints(t,[n.id],"to"),b=d.getStickyGluePoints(u.gluepointId);v.push.apply(v,Object(r.j)(b));var y=h.primaryTextModel,x=d.primaryTextModel;y&&(g=g.filter((function(e){return!e.id.startsWith(s.getLowPriorityStickyGP(y))}))),x&&(v=v.filter((function(e){return!e.id.startsWith(s.getLowPriorityStickyGP(x))})));for(var C,w=g.map((function(e){return s.getGluepointPosition(e,h)})),k=v.map((function(e){return s.getGluepointPosition(e,d)})),S=1/0,O=0;O<g.length;++O){var E=g[O],_=w[O],I=i.mb.from(_),P=Object.keys(d.texts);if(!(d.texts&&1===P.length&&d.texts[P[0]]&&d.texts[P[0]].isPositionable()?d.getBoundsWithTexts().pad(f).toPolygon().isInside(_):d.bounds.pad(f).toPolygon().isInside(_))||h===d)for(var T=0;T<v.length;++T){var A=v[T];if(l.shapeId!==u.shapeId||E.id!==A.id){var M=k[T],D=I.distanceTo(M),j=Object.keys(h.texts),N=void 0;N=h.texts&&1===j.length&&h.texts[j[0]]&&h.texts[j[0]].isPositionable()?h.getBoundsWithTexts().pad(f).toPolygon().isInside(M):h.bounds.pad(f).toPolygon().isInside(M),D<S&&(!N||l.shapeId===u.shapeId)&&(C=[E,A],S=D)}}}return C&&C.length>0?(l.gluepointId=C[0].id.split("-stickyGP")[0],l.gluepointLocked=!1,u.gluepointId=C[1].id.split("-stickyGP")[0],u.gluepointLocked=!1,[this.setEndpointPosition(l,h),this.setEndpointPosition(u,d)]):a},e.prototype.getLowPriorityStickyGP=function(e){return e.x<0&&"fixed-end"===e.xType&&(!e.yType||"relative"===e.yType)&&.5===e.y?this.gpRightId.concat("-stickyGP"):e.x<0&&"fixed-start"===e.xType&&(!e.yType||"relative"===e.yType)&&.5===e.y?this.gpLeftId.concat("-stickyGP"):e.y<0&&"fixed-start"===e.yType&&(!e.xType||"relative"===e.xType)&&.5===e.x?this.gpTopId.concat("-stickyGP"):e.y<0&&"fixed-end"===e.yType&&(!e.xType||"relative"===e.xType)&&.5===e.x?this.gpBottomId.concat("-stickyGP"):void 0},e.prototype.getGluepointPosition=function(e,t){return o.a.getPosition(e,t.defaultBounds,t.transform)},e.prototype.getConnectorEndpoints=function(e,t){var n,i,o=e.getPoints(),s=[o[0],Object(a.last)(o)],c=function(e){var t=s.findIndex((function(t){return e.id===t.id}));s[t]=Object(r.a)(Object(r.a)({},s[t]),e)};try{for(var l=Object(r.k)(t),u=l.next();!u.done;u=l.next()){c(u.value)}}catch(p){n={error:p}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return Object(a.cloneDeep)(s)},e.prototype.getConnectedShape=function(e,t){return e.shapeId?t.shapes[e.shapeId]:null},e.prototype.setEndpointPosition=function(e,t){var n=t.getGluepointPosition(e.gluepointId);return e.x=n.x,e.y=n.y,e},e.prototype.setEndpointGluepoint=function(e,t,n,r,i,a){var o=i.getAvailableGluepointsByPos(e,r,[t.id],a),s=n.shapeId===r.shapeId?o.filter((function(e){return e.gluepoint.id!==r.gluepointId})):o;return s.length>0&&(n.gluepointId=s[0].gluepoint.id,n.gluepointLocked=!1),this.setEndpointPosition(n,i)},e.prototype.clearEndpointGluepoint=function(e){return e.shapeId=null,e.gluepointId=null,e.gluepointLocked=null,e},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},Wwqo:function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e.Github="github.com",e.GoogleSheets="google/sheets"}(r||(r={})),function(e){e.Issue="issue",e.PullRequest="pullRequest"}(i||(i={}))},WydG:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n("D57K"),i=n("AaYA"),a=n("yhNa"),o=n("LC7v"),s=n("QCJn"),c=n("TQyE"),l=n("nsO7"),u=n("IGWl"),p=n("X0jn"),h=n("5xGT"),d=n("SBw3"),f=n("ZTXN"),g=n("ROBh"),m=n("P4Xx"),v=n("g6G6"),b=n("NNJu"),y=n("TLy2"),x=n("YtkY"),C=n("7SLS"),w=n("8j5Y"),k=n("J+dc"),S=n("myrl"),O=n("y0dT"),E=n("QoSw"),_=n("EM62"),I=function(e){function t(t,n,r,i,a,o){var s=e.call(this,t,o)||this;return s.componentFactoryResolver=t,s.featureList=n,s.commandService=r,s.state=i,s.ll=a,s.injector=o,s.items={},s.changeSubs={},s._change=new f.a,s.change.subscribe((function(e){return s.handleFeatureChange(e)})),s.resetOperations(),s}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemIds",{get:function(){return Object.keys(this.items)},enumerable:!1,configurable:!0}),t.prototype.getItem=function(e){if(this.items&&this.items[e]){var t=this.items[e].item;if(t)return t.instance}},t.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.changeSubs).forEach((function(t){e.changeSubs[t].unsubscribe()})),this._change.complete(),this.changeSubs=null,this.items=null,this.operations=null},t.prototype.renderShapeSpecificFeatures=function(e){var t=this;return this.features.pipe(Object(y.a)((function(e){var n=t.state.get("Selected");if(n&&1===n.length){var r=n[0];return t.ll.forCurrentObserver(!0).pipe(Object(y.a)((function(e){return e.getShapeOnce(r)})),Object(x.a)((function(t){return e.filter((function(e){return e.shapeDefId===t.defId}))})))}return Object(g.a)([])})),Object(y.a)((function(n){return t.manageCustomShapeComponents(n,e).pipe(Object(C.a)(n))})),Object(y.a)((function(e){return t.apply(!0).pipe(Object(C.a)(e))})))},t.prototype.addItem=function(e,t,n,r,i){var a=this.makeComponent(n);Object(l.isEmpty)(i)||a.instance.setProperties(i),a.instance.id=e,a.instance.setData(r),a.instance.apply(),this.operations.add.push({item:a,container:t})},t.prototype.removeItem=function(e){this.items[e]&&this.items[e].item&&this.operations.remove.push(e)},t.prototype.updateItem=function(e,t,n){if(this.items[e]&&this.items[e].item){var r=this.items[e].item;Object(l.isEmpty)(n)||r.instance.setProperties(n),r.instance.setData(t),r.instance.apply(),this.operations.update.push(e)}},t.prototype.apply=function(e){var t=this,n=this.getPendingOperations(e);return n.length>0?m.a.apply(void 0,Object(r.j)(n)).pipe(Object(w.a)({complete:function(){t.resetOperations()}})):(this.resetOperations(),Object(g.a)({}))},t.prototype.insertFeatureItem=function(e,t,n){if(!this.items[e.instance.id]){if(this.items[e.instance.id]={item:e,container:t},this.subscribeToItemChange(e.instance),n){var r=this.getAddItemAnimation(e);return this.insert(t,e),e.changeDetectorRef.detectChanges(),r.start()}this.insert(t,e),e.changeDetectorRef.detectChanges()}return Object(g.a)({})},t.prototype.removeFeatureItem=function(e,t){var n=this;if(!this.items[e])return Object(g.a)({});var r=this.items[e].item,i=this.items[e].container;if(r){if(this.unsubscribeFromItemChange(e),t)return this.getRemoveItemAnimation(r).start().pipe(Object(w.a)({complete:function(){n.remove(i,r),delete n.items[e]}}));this.remove(i,r),delete this.items[e]}return Object(g.a)({})},t.prototype.updateFeatureItem=function(e,t){if(this.items[e]&&this.items[e].item){var n=this.items[e].item;if(t)return n.instance.applyAnimated();n.instance.apply()}return Object(g.a)({})},t.prototype.resetOperations=function(){this.operations={add:[],remove:[],update:[]}},t.prototype.subscribeToItemChange=function(e){var t=this,n=e.change.subscribe((function(n){return t._change.next({id:e.id,data:n})}));this.changeSubs[e.id]=n},t.prototype.unsubscribeFromItemChange=function(e){this.changeSubs[e]&&(this.changeSubs[e].unsubscribe(),delete this.changeSubs[e])},t.prototype.getAddItemAnimation=function(e){var t=new b.e({});return t.element=e.location.nativeElement,t},t.prototype.getRemoveItemAnimation=function(e){var t=new b.e({});return t.element=e.location.nativeElement,t},t.prototype.renderFeatureChanges=function(e,t){var n=this;return this.features.pipe(Object(x.a)((function(t){return t.filter((function(t){return e.includes(t.featureId)}))})),Object(y.a)((function(r){return n.manage(e,r,t).pipe(Object(C.a)(r))})),Object(y.a)((function(e){return n.apply(!0).pipe(Object(C.a)(e))})))},t.prototype.updateComponent=function(e){var t=this,n=this.featureList.getFeature(e.featureId),r=this.getUIControlProperties(n);return this.getItemData(n,e.data).pipe(Object(x.a)((function(n){return t.updateItem(e.featureId,n,r)})))},t.prototype.addComponent=function(e,t){var n=this,r=this.featureList.getFeature(e.featureId),i=this.getUIControlType(r.dataType),a=this.getUIControlProperties(r);return this.getItemData(r,e.data).pipe(Object(x.a)((function(r){return n.addItem(e.featureId,t,i,r,a)})))},t.prototype.getUIControlProperties=function(e){return{id:e.id,icon:e.icon,label:e.label,labelPosition:e.labelPosition,dropdownDirection:e.dropdownDirection,tooltip:e.tooltip}},t.prototype.getUIControlType=function(e){if(!e||e===p.c.BINARY)return u.a;if(e===p.c.TEXT_POSITION)return i.a;if(e===p.c.OPTION_LIST_COMBO)return s.a;if(e===p.c.COLOR)return c.a;if(e===p.c.NUMBER)return a.a;if(e===p.c.OPTION_LIST)return o.a;if(e===p.c.CUSTOM_SHAPE_STYLE)return S.a;if(e===p.c.NUMBER_OPTIONS)return O.a;throw new Error("UI control is not available for "+e)},t.prototype.getItemData=function(e,t){return e.transformer?this.injector.get(e.transformer).getFeatureData(e.id,t):t?Object(g.a)(h.s.mergeInstances({},e.data,t)):Object(g.a)(e.data)},t.prototype.handleFeatureChange=function(e){var t=this,n=this.featureList.getFeature(e.id);if(n.transformer){this.injector.get(n.transformer).getApplyData(n.id,e.data).subscribe((function(e){t.commandService.dispatch(n.commandEvent,e)}))}else{var r=h.s.mergeInstances({},this.getCommandData(e.id),e.data);this.commandService.dispatch(n.commandEvent,r)}},t.prototype.getCommandData=function(e){var t={},n=this.getItem(e);return n&&n.data&&(n.data.dataItemId&&(t.dataItems=[{id:n.data.dataItemId,value:n.data.value}]),n.data.alterFunction&&(t.alterFunction=n.data.alterFunction)),t},t.prototype.getPendingOperations=function(e){var t=this,n=[];return this.operations.remove.length>0&&(n=n.concat(this.operations.remove.map((function(n){return t.removeFeatureItem(n,e)})))),this.operations.add.length>0&&(n=n.concat(this.operations.add.map((function(n){return t.insertFeatureItem(n.item,n.container,e)})))),this.operations.update.length>0&&(n=n.concat(this.operations.update.map((function(n){return t.updateFeatureItem(n,e)})))),n},t.prototype.manageCustomShapeComponents=function(e,t){var n=this,r=e.map((function(e){return e.featureId}));return this.itemIds.filter((function(e){return e.includes("creately")})).filter((function(e){return!r.includes(e)})).forEach((function(e){return n.removeItem(e)})),Object(m.a)(this.updateComponents(e),this.addComponents(e,t)).pipe(Object(k.a)(1))},t.prototype.manage=function(e,t,n){return Object(m.a)(this.removeComponents(e,t),this.updateComponents(t),this.addComponents(t,n)).pipe(Object(k.a)(1))},t.prototype.removeComponents=function(e,t){var n=this;return e.filter((function(e){return-1===t.map((function(e){return e.featureId})).indexOf(e)})).forEach((function(e){return n.removeItem(e)})),Object(g.a)({})},t.prototype.addComponents=function(e,t){var n=this,i=[];return e.forEach((function(e,r){-1===n.itemIds.indexOf(e.featureId)&&i.push(n.addComponent(e,t))})),Object(l.isEmpty)(i)?Object(g.a)({}):v.a.apply(void 0,Object(r.j)(i))},t.prototype.updateComponents=function(e){var t=this,n=[];return e.forEach((function(e,r){t.itemIds.includes(e.featureId)&&n.push(t.updateComponent(e))})),Object(l.isEmpty)(n)?Object(g.a)({}):v.a.apply(void 0,Object(r.j)(n))},t.\u0275fac=function(e){return new(e||t)(_.fc(_.m),_.fc(d.a),_.fc(h.B),_.fc(h.Ib),_.fc(E.a),_.fc(_.C))},t.\u0275dir=_.ac({type:t,outputs:{change:"change"},features:[_.Pb]}),t}(b.k)},X1A4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=t.Operator=t.Rule=t.Fact=void 0,t.default=function(e,t){return new r.default(e,t)};var r=s(n("Rx0M")),i=s(n("kRQx")),a=s(n("+ITg")),o=s(n("nyhH"));function s(e){return e&&e.__esModule?e:{default:e}}t.Fact=i.default,t.Rule=a.default,t.Operator=o.default,t.Engine=r.default},X5Q9:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("C05f"),i=n("ZTXN"),a=n("6Oco"),o=n("ROBh"),s=(n("Cupj"),n("NNJu")),c=n("EM62"),l=n("pYIu"),u=n("tG6W"),p=n("2kYt"),h=n("vdZD");function d(e,t){if(1&e&&c.gc(0,"toolbar-shape-style-dropdown-item",11),2&e){var n=t.$implicit;c.Cc("isSelected",n.selected)("item",n.style)}}function f(e,t){if(1&e&&(c.lc(0,"div",9),c.cd(1,d,1,2,"toolbar-shape-style-dropdown-item",10),c.yc(2,"async"),c.kc()),2&e){var n=c.xc();c.Sb(1),c.Cc("ngForOf",c.zc(2,1,n._data).documentStyles)}}function g(e,t){if(1&e){var n=c.mc();c.lc(0,"div",12),c.tc("click",(function(){c.Pc(n);var e=t.$implicit;return c.xc().handleOnclickIcon(e.id)}))("mouseenter",(function(){c.Pc(n);var e=t.$implicit;return c.xc().handleOnclickIcon(e.id)})),c.yc(1,"async"),c.wc(),c.lc(2,"svg",13),c.gc(3,"use"),c.kc(),c.kc()}if(2&e){var r=t.$implicit,i=c.xc();c.Xb("selected",r.id===c.zc(1,3,i.getStyleType())),c.Sb(3),c.Tb("href",i.getIconHref(r.icon),null,"xlink")}}function m(e,t){if(1&e&&c.gc(0,"toolbar-shape-style-dropdown-item",16),2&e){var n=t.$implicit;c.Cc("item",n)}}function v(e,t){if(1&e&&(c.lc(0,"div",14),c.cd(1,m,1,1,"toolbar-shape-style-dropdown-item",15),c.yc(2,"async"),c.kc()),2&e){var n=c.xc();c.Sb(1),c.Cc("ngForOf",c.zc(2,1,n.styles))}}var b=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,delayToDrop:100}},y=function(){function e(){this._data=new r.a(null),this.styleType=new r.a(null),this.styles=new r.a(null),this.change=new i.a}return e.prototype.ngAfterViewInit=function(){var e=this;this.absDropdown.changed.subscribe((function(t){var n=e.data.documentStyles.find((function(e){return e.style.id===t[0]}));if(n)delete n.style.lineThickness,e.change.next(n.style);else{var r=e.styles.getValue().find((function(e){return e.id===t[0]}));delete r.lineThickness,e.change.next(r)}}))},e.prototype.setData=function(e){this.data=e,this._data.next(e),this.styles.next(this.data.palettes[0].palette.styles),this.styleType.next(null)},e.prototype.apply=function(){},e.prototype.applyAnimated=function(){return Object(a.b)()},e.prototype.setProperties=function(e){this.props=e},e.prototype.getIconHref=function(e){return"./assets/icons/symbol-defs.svg#nu-ic-"+e},e.prototype.handleOnclickIcon=function(e){this.styleType.next(e),this.styles.next(this.data.palettes.find((function(t){return t.id===e})).palette.styles)},e.prototype.getStyleType=function(){return this.styleType.getValue()||2!==this.data.palettes.length?this.styleType.getValue()||3!==this.data.palettes.length?this.styleType:Object(o.a)("fillColor"):Object(o.a)("lineColor")},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Zb({type:e,selectors:[["toolbar-shape-style-dropdown"]],viewQuery:function(e,t){var n;(1&e&&c.jd(s.b,!0),2&e)&&(c.Lc(n=c.uc())&&(t.absDropdown=n.first))},decls:13,vars:12,consts:[[1,"ftb-item","tss-dd-container"],[3,"settings"],["dd",""],["ddbutton","",3,"props"],["dditem",""],["class","tss-dd-styles-container tss-dd-custom",4,"ngIf"],[1,"tss-dd-tab-header"],["class","tss-dd-tab-icon",3,"selected","click","mouseenter",4,"ngFor","ngForOf"],["class","tss-dd-styles-container",4,"ngIf"],[1,"tss-dd-styles-container","tss-dd-custom"],[3,"isSelected","item",4,"ngFor","ngForOf"],[3,"isSelected","item"],[1,"tss-dd-tab-icon",3,"click","mouseenter"],[1,"nu-icon","xmedium-grey"],[1,"tss-dd-styles-container"],[3,"item",4,"ngFor","ngForOf"],[3,"item"]],template:function(e,t){1&e&&(c.lc(0,"div",0),c.lc(1,"abs-dropdown",1,2),c.gc(3,"toolbar-dropdown-button",3),c.lc(4,"div",4),c.cd(5,f,3,3,"div",5),c.yc(6,"async"),c.gc(7,"hr"),c.lc(8,"div",6),c.cd(9,g,4,5,"div",7),c.yc(10,"async"),c.kc(),c.cd(11,v,3,3,"div",8),c.yc(12,"async"),c.kc(),c.kc(),c.kc()),2&e&&(c.Sb(1),c.Cc("settings",c.Gc(11,b)),c.Sb(2),c.Cc("props",t.props),c.Sb(2),c.Cc("ngIf",c.zc(6,5,t._data).documentStyles),c.Sb(4),c.Cc("ngForOf",c.zc(10,7,t._data).palettes),c.Sb(2),c.Cc("ngIf",c.zc(12,9,t.styles)))},directives:[l.a,u.a,p.t,p.s,h.a],pipes:[p.b],styles:[".tss-dd-container[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:230px}.tss-dd-container[_ngcontent-%COMP%]  .ps-content{padding:0}.tss-dd-styles-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-wrap:wrap;padding-left:10px;padding-right:10px;padding-bottom:10px}.tss-dd-styles-container[_ngcontent-%COMP%]  .tss-dd-item-container, .tss-dd-tab-icon[_ngcontent-%COMP%]{display:inline-block}.tss-dd-tab-icon[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.tss-dd-tab-icon.selected[_ngcontent-%COMP%]{border-bottom:2px solid #ffc648}.tss-dd-tab-icon.selected[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], .tss-dd-tab-icon.selected[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#aaa}.tss-dd-tab-header[_ngcontent-%COMP%]{margin-bottom:10px}.tss-dd-tab-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px}.tss-dd-custom[_ngcontent-%COMP%]{margin-bottom:10px;border-bottom:1px solid #d3d3e7;padding-bottom:5px;padding-top:10px}"],changeDetection:0}),e}()},XLk1:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("ZTXN"),a=n("NNJu"),o=n("EM62"),s=n("19Zn"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.validation={},n.inputChanged=new i.a,n}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"inputValue",{get:function(){return this.item?this.item.buttonLabel:" - "},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.dataItem=s.i.instance.create({type:this.validation.type,validationRules:this.validation.rules})},t.prototype.handleChange=function(e,t){if(!this.dataItem||null===this.dataItem.validate(e)){var n=this.items.find((function(t){return t.label===e}));n?this.inputChanged.next({value:n.value,takeFocus:t}):this.inputChanged.next({value:e,takeFocus:t})}},t.\u0275fac=function(e){return new(e||t)(o.fc(o.r))},t.\u0275cmp=o.Zb({type:t,selectors:[["sidebar-dropdown-input"]],inputs:{readOnly:"readOnly",validation:"validation"},outputs:{inputChanged:"inputChanged"},features:[o.Rb([{provide:a.i,useExisting:Object(o.lb)((function(){return t}))}]),o.Pb],decls:4,vars:3,consts:[[1,"sidebar-dd-button-container","nu-dropdown-container"],[1,"dropdown-selection","text-input",3,"value","focusout","input"],["inputElement",""],["src","./assets/icon-hovers/arrow-down-extra-small-thick.svg",1,"nu-dropdown-arrow"]],template:function(e,t){1&e&&(o.lc(0,"a",0),o.lc(1,"input",1,2),o.tc("focusout",(function(e){return t.handleChange(e.target.value,!0)}))("input",(function(e){return t.handleChange(e.target.value,!1)})),o.kc(),o.gc(3,"img",3),o.kc()),2&e&&(o.Sb(1),o.Xb("uneditable",t.readOnly),o.Cc("value",t.inputValue))},styles:[".nu-dropdown-arrow[_ngcontent-%COMP%] { margin-top: 10px; height: 21px; width: 21px; margin-right: 5px; }"]}),t}(a.i)},XRvk:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("JPqQ"),a=n("6Oco"),o=n("EM62"),s=function(){function e(e){this.drs=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"DataDefCodeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t=this,n=e.__sakota__.getChanges(),r=this.modifiedDataDef(n);return Object.keys(r).forEach((function(n){t.processShape(e,n,r[n])})),Object(a.b)()},e.prototype.processShape=function(e,t,n){var r=this;Object.values(e.shapes).forEach((function(i){(i.dataSetId===t||i.eData&&(i.entityDefId===t||i.entityId===t))&&(i&&i.dataChange&&i.dataChange(i,e),n.forEach((function(t){r.drs.buildRuleMapOnDataDefChange(e),r.drs.evalRules(t,i)})))}))},e.prototype.modifiedDataDef=function(t){var n,i,a={};try{for(var o=Object(r.k)(["$set","$unset"]),s=o.next();!s.done;s=o.next()){var c=s.value;if(t[c])for(var l in t[c]){e.regexDataDefs.lastIndex=0;var u=e.regexDataDefs.exec(l);if(u){var p=u[1],h=u.input.split(".")[2];a[p]||(a[p]=[]),h&&a[p].push(h)}}}}catch(d){n={error:d}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a},e.regexDataDefs=/dataDefs\.([^\.]+)\./g,e.\u0275fac=function(t){return new(t||e)(o.pc(i.a))},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},XVEb:function(e,t,n){"use strict";t.__esModule=!0,t.extend=s,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!a.test(e))return e;return e.replace(i,o)},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=s({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,a=/[&<>"'`=]/;function o(e){return r[e]}function s(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var c=Object.prototype.toString;t.toString=c;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===c.call(e)}),t.isFunction=l;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===c.call(e)};t.isArray=u},XfZi:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("19Zn"),i=n("nsO7"),a=n("6Oco"),o=n("X0jn"),s=n("C0rp"),c=n("EM62"),l=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"ShapeBoundsBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts","scaleX","scaleY"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t=e.__sakota__.getChanges();if(t.$set)return this.shapeScaleChange(e,t),this.shapeTextsValueChange(e,t),Object(a.b)()},e.prototype.shapeTextsValueChange=function(t,n){var a=this,s=function(n){e.regexTexts.lastIndex=0;var s=e.regexTexts.exec(n);if(!s)return"continue";var c=s[1],l=t.shapes[c],u=(l.transformSettings||{}).fixAspectRatio;if(l.isConnector()||u)return"continue";Object(i.forEach)(l.texts,(function(e,t){var n=l.texts[t];if(!r.G.isInside(n))return!1;var i=l.defaultBounds.width*l.scaleX,s=l.defaultBounds.height*l.scaleY;if(l.isAutoResizeable()){if(!l.autoResizeHeight&&l.bounds.rotate(l.angle).height<=n.height+2*o.x&&(l.autoResizeHeight=!0),l.autoResizeWidth){var c=Math.max(n.width+2*o.w,l.userSetWidth),u=a.roundUpToNearest20px(c)/l.defaultBounds.width;l.scaleX!==u&&(l.scaleX=u)}if(l.autoResizeHeight){var p=Math.max(n.height+2*o.x,l.userSetHeight),h=a.roundUpToNearest20px(p)/l.defaultBounds.height;l.scaleY!==h&&(l.scaleY=h)}}if(l.autoResizeToMinTextWidth){var d=n.minWidth+2*o.w;d>l.bounds.rotate(l.angle).width&&(l.scaleX=a.roundUpToNearest20px(d)/l.defaultBounds.width)}var f=l.defaultBounds.width*l.scaleX-i;l.x=l.x-f/2;var g=l.defaultBounds.height*l.scaleY-s;l.y=l.y-g/2}))};for(var c in n.$set)s(c)},e.prototype.roundUpToNearest20px=function(e){return 20*Math.ceil(e/20)},e.prototype.setTextMinWidth=function(e){if(!e.minWidth&&""!==e.plainText){var t=s.bounds(e.content,1e4,o.b).minWidth;e.minWidth=t}},e.prototype.shapeScaleChange=function(t,n){var a=this,s=function(n){e.regexScale.lastIndex=0;var s=e.regexScale.exec(n);if(!s)return"continue";var c=s[2]?s[2]:s[4],l=t.shapes[c],u=(l.transformSettings||{}).fixAspectRatio;if(l.isConnector()||u)return"continue";Object(i.forEach)(l.texts,(function(e,t){var n=l.texts[t];if(!r.G.isInside(n))return!1;a.setTextMinWidth(n);var i=n.minWidth+2*o.w;l.autoResizeToMinTextWidth&&i>l.bounds.rotate(l.angle).width&&(l.scaleX=a.roundUpToNearest20px(i)/l.defaultBounds.width);var s=n.height+2*o.w;l.autoResizeHeight&&s>l.bounds.rotate(l.angle).height&&(l.scaleY=a.roundUpToNearest20px(s)/l.defaultBounds.height)}))};for(var c in n.$set)s(c)},e.regexScale=/(shapes\.([^\.]+)\.scaleX)|(shapes\.([^\.]+)\.scaleY)/g,e.regexTexts=/shapes\.([^\.]+)\.texts\.([^\.]+)\.content/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},Y6vQ:function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("VrFO")),a=r(n("Y9Ll")),o=n("ppab"),s=n("tfzy"),c=n("B1sc"),l=n("iTOv"),u=function(){function e(t,n){(0,i.default)(this,e),this._grammar=t,this._exprStr=n,this._ast=null}return(0,a.default)(e,[{key:"compile",value:function(){var e=new s(this._grammar),t=new c(this._grammar),n=e.tokenize(this._exprStr);return t.addTokens(n),this._ast=t.complete(),this}},{key:"eval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._eval(e,Promise)}},{key:"evalSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._eval(e,l);if(t.error)throw t.error;return t.value}},{key:"_eval",value:function(e,t){var n=this;return t.resolve().then((function(){var r=n._getAst();return new o(n._grammar,e,void 0,t).eval(r)}))}},{key:"_getAst",value:function(){return this._ast||this.compile(),this._ast}}]),e}();e.exports=u},YNec:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return p}));var r,i=n("D57K"),a=n("EM62"),o=n("NNJu"),s=n("C05f"),c=n("TQyE"),l=n("Yr08"),u=["InputRef"];!function(e){e.FILLCOLOR="fillColor",e.LINECOLOR="lineColor",e.LINETHICKNESS="lineThickness",e.DATE="date",e.DATE_RANGE="date_range",e.PEOPLE="people",e.DEFAULT="default"}(r||(r={}));var p=function(e){function t(t,n){var i,a=e.call(this,t,n)||this;return a.componentFactoryResolver=t,a.injector=n,a.typeToInputMap=((i={})[r.FILLCOLOR]=c.a,i[r.LINECOLOR]=c.a,i[r.LINETHICKNESS]=o.s,i[r.DATE]=l.a,i[r.DEFAULT]=o.s,i[r.PEOPLE]=o.s,i),a.value=new s.a(""),a}return Object(i.e)(t,e),t.prototype.morphInput=function(e,t){this.inputContainer&&(!t||this.type!==e&&""!==this.value.value&&void 0!==this.type?this.value.next(""):this.value.next(t),this.type=e,this.inputRef&&this.sub&&(this.remove(this.inputContainer,this.inputRef),this.sub.unsubscribe(),this.sub=null),this.inputRef=this.createComponent(this.typeToInputMap[e],this.inputContainer),this.typeToInputMap[e]===c.a?this.setColorPickerProps():this.typeToInputMap[e]===o.s?this.setTextInputProps():this.typeToInputMap[e]===l.a&&this.setDatePickerProps(),this.insert(this.inputContainer,this.inputRef))},t.prototype.setColorPickerProps=function(){var e=this,t=this.inputRef.instance;t.setProperties({color:{fillColor:this.value.value},label:this.getInputLabel(),cpPosition:"right-top"}),t.setData({value:this.value.value}),t.apply(),this.sub=t.change.subscribe((function(n){e.value.next(n.value),t.apply()}))},t.prototype.setTextInputProps=function(){var e=this,t=this.inputRef.instance;t.value=this.value.value,t.placeholder=this.getInputLabel(),this.sub=t.inputChange.subscribe((function(t){e.value.next(t)}))},t.prototype.setDatePickerProps=function(){var e=this,t=this.inputRef.instance;t.dateSubject.next(new Date(Number(this.value.value))),this.sub=t.change.subscribe((function(t){e.value.next(t)}))},t.prototype.getInputLabel=function(){switch(this.type){case r.FILLCOLOR:return"Fill Color";case r.LINECOLOR:return"Line Color";case r.LINETHICKNESS:return"Line Thickness";case r.DATE:return"Date";case r.DATE_RANGE:return"Date Range";case r.PEOPLE:return"User Email";default:return"Value"}},t.\u0275fac=function(e){return new(e||t)(a.fc(a.m),a.fc(a.C))},t.\u0275cmp=a.Zb({type:t,selectors:[["cformat-value-input"]],viewQuery:function(e,t){var n;(1&e&&a.jd(u,!0,a.hb),2&e)&&(a.Lc(n=a.uc())&&(t.inputContainer=n.first))},features:[a.Pb],decls:2,vars:0,consts:[["InputRef",""]],template:function(e,t){1&e&&a.gc(0,"div",null,0)},encapsulation:2}),t}(o.k)},YSjj:function(e,t,n){var r=[n("K07p"),n("KFbB"),n("ipv5"),n("90bW"),n("1NHC"),n("a+rc"),n("Pj1F"),n("pJBp"),n("7B5I"),n("ktVY"),n("eQvJ"),n("j0Im")];for(var i in r){var a=r[i];for(var o in a)t[o]=t[o]||a[o]}t.utils={errors:n("oFOz")}},YsaH:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("C05f"),i=function(){function e(){this.limitCount=0,this.collabHover=new r.a(null)}return e.prototype.getCollabTrackingId=function(e,t){return t.collab?t.collab.id:"collabCount"},e.prototype.getCollabViews=function(e,t){var n,r,i=this,a=[],o=0,s=0;if(r=void 0!==this.showActiveOnly?e.filter((function(e){return e.online===i.showActiveOnly})):e.sort((function(e,t){return e.online===t.online?0:e.online?-1:1})),this.limitCount>0&&this.limitCount<r.length){var c=r.splice(this.limitCount,r.length),l=c.length>100?99:c.length;n={index:this.limitCount+1,position:-10,remainingCount:l,onlineStaus:this.showActiveOnly}}return r.forEach((function(e,t){o=0===t?0:n?-10:-2,s+=1,a.push({position:o,index:s,collab:e})})),n&&a.push(n),a},e}()},ZZOX:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("D57K"),i=n("NNJu"),a=n("5xGT"),o=n("C05f"),s=n("o9on"),c=n("EM62"),l=n("s2Ay"),u=n("crdX"),p=n("2kYt"),h=n("qtZD"),d=["window"],f=["windowInner"];function g(e,t){if(1&e){var n=c.mc();c.lc(0,"nu-check-box",28),c.tc("valueChanged",(function(e){return c.Pc(n),c.xc().toggleSelect(e)})),c.kc()}if(2&e){var r=t.$implicit;c.Dc("label",r.name),c.Dc("value",r.id),c.Cc("checked",r.checked)}}var m=function(e){function t(t,n,r){var i=e.call(this)||this;return i.modalController=t,i.commandService=n,i.translate=r,i.allFolderId="all",i.allFolderName="All Folders",i.subs=[],i.folderList=new o.a(null),i.selectedFolders=new o.a(0),i.showImportStartMessage=new o.a(!1),i}return Object(r.e)(t,e),t.prototype.ngOnInit=function(){var e=this,t=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(t),this.commandService.dispatch(s.a.getClassicProjects,{callBack:function(t){e.populateProjects(t)}})},t.prototype.closeOnOverlayClick=function(e){var t=e.target.className;t&&"string"===typeof t&&t.includes("modal-window-container")&&this.closeWindow()},t.prototype.closeWindow=function(){var e=this,t=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}});this.subs.push(t)},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.toggleSelect=function(e){var t=this,n=this.folderList.value;e.value===this.allFolderId?e.checked?n.forEach((function(e){e.checked=!0})):n.forEach((function(e){e.checked=!1})):e.checked?n.filter((function(t){return t.id===e.value})).forEach((function(e){e.checked=!0})):n.filter((function(n){return n.id===e.value||n.id===t.allFolderId})).forEach((function(e){e.checked=!1}));var r=n.filter((function(e){return e.id!==t.allFolderId&&e.checked})).length;this.selectedFolders.next(r)},t.prototype.startImport=function(){var e=this,t=this.folderList.value.filter((function(t){return t.id!==e.allFolderId&&t.checked})).map((function(e){return e.id}));this.commandService.dispatch(s.a.importClassicProjects,{rid:t.join(",")}),this.showImportStartMessage.next(!0)},t.prototype.populateProjects=function(e){var t=[{id:this.allFolderId,name:this.allFolderName,checked:!1}],n=e.map((function(e){return{id:e.id,name:e.name,checked:!1}}));t.push.apply(t,Object(r.j)(n)),this.folderList.next(t)},t.\u0275fac=function(e){return new(e||t)(c.fc(a.gb),c.fc(a.B),c.fc(l.e))},t.\u0275cmp=c.Zb({type:t,selectors:[["classic-import-dialog"]],viewQuery:function(e,t){var n;(1&e&&(c.Wc(d,!0),c.Wc(f,!0)),2&e)&&(c.Lc(n=c.uc())&&(t.container=n.first),c.Lc(n=c.uc())&&(t.containerInner=n.first))},features:[c.Pb],decls:45,vars:16,consts:[[1,"classic-import-container","modal-window-container","fx-cover","fx-center-all",3,"click"],["window",""],[1,"modal-window-inner"],["windowInner",""],[1,"modal-window-heading"],["translate",""],["translate","",1,"classic-import-beta-tag"],[1,"nu-btn-small","nu-btn-icon",3,"click"],[1,"nu-icon","nu-icon-med","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"classic-import-screen-1"],[1,"classic-import-content"],["translate","",1,"grey","fx-margin-bottom-15"],[1,"classic-import-scrollable"],[1,"classic-import-projectlist","fx-margin-bottom-20"],[3,"label","value","checked","valueChanged",4,"ngFor","ngForOf"],[1,"classic-import-footer"],[1,"classic-import-footer-folder-num"],["translate","",1,"nu-btn-med","primary",3,"disabled","click"],["translate","",1,"nu-btn-med","secondary",3,"click"],[1,"classic-import-screen-2"],["translate","",1,"grey"],[1,"classic-import-footer","primary"],[1,"spinner-container"],["id","spinner",1,"spinner"],[1,"bounce1","white"],[1,"bounce2","white"],[1,"bounce3","white"],[3,"label","value","checked","valueChanged"]],template:function(e,t){1&e&&(c.lc(0,"div",0,1),c.tc("click",(function(e){return t.closeOnOverlayClick(e)})),c.lc(2,"div",2,3),c.yc(4,"async"),c.lc(5,"div",4),c.lc(6,"h1",5),c.ed(7,"CLASSIC_IMPORT.TEXT.HEADER "),c.lc(8,"label",6),c.ed(9,"LABELS.BETA"),c.kc(),c.kc(),c.lc(10,"button",7),c.tc("click",(function(){return t.closeWindow()})),c.wc(),c.lc(11,"svg",8),c.gc(12,"use",9),c.kc(),c.kc(),c.kc(),c.vc(),c.lc(13,"div",10),c.lc(14,"div",11),c.lc(15,"p",12),c.ed(16," CLASSIC_IMPORT.TEXT.SELECT_FOLDER "),c.kc(),c.lc(17,"div",13),c.lc(18,"perfect-scrollbar"),c.lc(19,"div",14),c.cd(20,g,1,3,"nu-check-box",15),c.yc(21,"async"),c.kc(),c.kc(),c.kc(),c.kc(),c.lc(22,"div",16),c.lc(23,"div",17),c.ed(24),c.yc(25,"async"),c.yc(26,"translate"),c.kc(),c.lc(27,"div"),c.lc(28,"button",18),c.tc("click",(function(){return t.startImport()})),c.yc(29,"async"),c.ed(30,"CLASSIC_IMPORT.BUTTON.IMPORT"),c.kc(),c.lc(31,"button",19),c.tc("click",(function(){return t.closeWindow()})),c.ed(32,"CLASSIC_IMPORT.BUTTON.CANCEL"),c.kc(),c.kc(),c.kc(),c.kc(),c.lc(33,"div",20),c.lc(34,"div",11),c.lc(35,"p",21),c.ed(36," CLASSIC_IMPORT.TEXT.IMPORT_PROGRESS "),c.gc(37,"br"),c.ed(38," CLASSIC_IMPORT.TEXT.CLOSE_DIALOG "),c.kc(),c.lc(39,"div",22),c.lc(40,"div",23),c.lc(41,"div",24),c.gc(42,"div",25),c.gc(43,"div",26),c.gc(44,"div",27),c.kc(),c.kc(),c.kc(),c.kc(),c.kc(),c.kc(),c.kc()),2&e&&(c.Sb(2),c.Xb("screen-2",c.zc(4,6,t.showImportStartMessage)),c.Sb(18),c.Cc("ngForOf",c.zc(21,8,t.folderList)),c.Sb(4),c.hd(" ",c.zc(25,10,t.selectedFolders)," ",c.zc(26,12,"CLASSIC_IMPORT.TEXT.SELECTED_FOLDERS")," "),c.Sb(4),c.Cc("disabled",!c.zc(29,14,t.selectedFolders)))},directives:[l.a,u.b,p.s,h.a],pipes:[p.b,l.d],styles:[".spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]   .bounce[_ngcontent-%COMP%]{width:15px;height:15px;margin-left:4px;margin-right:4px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}.spinner[_ngcontent-%COMP%]   .bounce-1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner[_ngcontent-%COMP%]   .bounce-2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}.bounce[_ngcontent-%COMP%]   .paused[_ngcontent-%COMP%]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.modal-window-inner[_ngcontent-%COMP%]{height:80%;max-height:660px;width:460px}.modal-window-inner.screen-2[_ngcontent-%COMP%]{height:250px}.modal-window-inner.screen-2[_ngcontent-%COMP%]   .classic-import-screen-1[_ngcontent-%COMP%]{display:none}.modal-window-inner.screen-2[_ngcontent-%COMP%]   .classic-import-screen-2[_ngcontent-%COMP%]{display:block}.classic-import-content[_ngcontent-%COMP%]{height:calc(100% - 40px)}.classic-import-scrollable[_ngcontent-%COMP%]{margin-top:5px;height:calc(100% - 70px)}.classic-import-footer[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:5px}.classic-import-footer-folder-num[_ngcontent-%COMP%]{flex:1;margin-top:5px}.classic-import-screen-1[_ngcontent-%COMP%]{height:calc(100% - 70px)}.classic-import-screen-2[_ngcontent-%COMP%]{display:none}.classic-import-screen-2[_ngcontent-%COMP%]   .classic-import-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;height:55px;width:100%}.classic-import-screen-2[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{margin:0 auto}.classic-import-beta-tag[_ngcontent-%COMP%]{padding:2px 3px;background-color:#ced9e3;color:#4dbfab;border-radius:2px;font-size:11px;position:absolute;margin-top:3px;margin-left:5px}"],changeDetection:0}),t}(i.p)},ZcxV:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n("T9/7"),a=r(n("0KrK")),o=n("XVEb"),s=r(n("Fvkh"));function c(e){this.value=e}function l(){}l.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=i.COMPILER_REVISION;return[e,i.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return o.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var i=e.opcodes,o=void 0,s=void 0,c=void 0,l=void 0;for(c=0,l=i.length;c<l;c++)o=i[c],this.source.currentLocation=o.loc,s=s||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=s,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),r?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(r);if(this.isChild)return u;var p={compiler:this.compilerInfo(),main:u};this.decorators&&(p.main_d=this.decorators,p.useDecorators=!0);var h=this.context,d=h.programs,f=h.decorators;for(c=0,l=d.length;c<l;c++)d[c]&&(p[c]=d[c],f[c]&&(p[c+"_d"]=f[c],p.useDecorators=!0));return this.environment.usePartial&&(p.usePartial=!0),this.options.data&&(p.useData=!0),this.useDepths&&(p.useDepths=!0),this.useBlockParams&&(p.useBlockParams=!0),this.options.compat&&(p.compat=!0),r?p.compilerOptions=this.options:(p.compiler=JSON.stringify(p.compiler),this.source.currentLocation={start:{line:1,column:0}},p=this.objectLiteral(p),t.srcName?(p=p.toStringWithSourceMap({file:t.destName})).map=p.map&&p.map.toString():p=p.toString()),p},preamble:function(){this.lastContext=0,this.source=new s.default(this.options.srcName),this.decorators=new s.default(this.options.srcName)},createFunctionContext:function(e){var t=this,n="",r=this.stackVars.concat(this.registers.list);r.length>0&&(n+=", "+r.join(", "));var i=0;Object.keys(this.aliases).forEach((function(e){var r=t.aliases[e];r.children&&r.referenceCount>1&&(n+=", alias"+ ++i+"="+e,r.children[0]="alias"+i)})),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var o=this.mergeSource(n);return e?(a.push(o),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",o,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,r=void 0,i=void 0,a=void 0,o=void 0;return this.source.each((function(e){e.appendToBuffer?(a?e.prepend("  + "):a=e,o=e):(a&&(i?a.prepend("buffer += "):r=!0,o.add(";"),a=o=void 0),i=!0,t||(n=!1))})),n?a?(a.prepend("return "),o.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(r?"":this.initializeBuffer()),a?(a.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(r?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var r=this.popStack();n.splice(1,0,r),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack((function(e){return[" != null ? ",e,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,r){var i=0;r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++])),this.resolvePath("context",e,i,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(e,t,n,r,i){var a=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,r){var i=t.popStack(),a=0,o=n.length;e&&o--;for(;a<o;a++)i=t.nameLookup(i,n[a],r);return e?[t.aliasable("container.strict"),"(",i,", ",t.quotedString(n[a]),", ",JSON.stringify(t.source.currentLocation)," )"]:i}(this.options.strict&&i,this,t,e));else for(var o=t.length;n<o;n++)this.replaceStack((function(i){var o=a.nameLookup(i,t[n],e);return r?[" && ",o]:[" != null ? ",o," : ",i]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),r=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",r])," || fn;"])},invokeHelper:function(e,t,n){var r=this.popStack(),i=this.setupHelper(e,t),a=[];n&&a.push(i.name),a.push(r),this.options.strict||a.push(this.aliasable("container.hooks.helperMissing"));var o=["(",this.itemsSeparatedBy(a,"||"),")"],s=this.source.functionCall(o,"call",i.callParams);this.push(s)},itemsSeparatedBy:function(e,t){var n=[];n.push(e[0]);for(var r=1;r<e.length;r++)n.push(t,e[r]);return n},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(e,t,n){var r=[],i=this.setupParams(t,1,r);e&&(t=this.popStack(),delete i.name),n&&(i.indent=JSON.stringify(n)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",e?r.unshift(t):r.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),r.push(i),this.push(this.source.functionCall("container.invokePartial","",r))},assignToHash:function(e){var t=this.popStack(),n=void 0,r=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(r=this.popStack(),n=this.popStack());var a=this.hash;n&&(a.contexts[e]=n),r&&(a.types[e]=r),i&&(a.ids[e]=i),a.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:l,compileChildren:function(e,t){for(var n=e.children,r=void 0,i=void 0,a=0,o=n.length;a<o;a++){r=n[a],i=new this.compiler;var s=this.matchExistingProgram(r);if(null==s){this.context.programs.push("");var c=this.context.programs.length;r.index=c,r.name="program"+c,this.context.programs[c]=i.compile(r,t,this.context,!this.precompile),this.context.decorators[c]=i.decorators,this.context.environments[c]=r,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,r.useDepths=this.useDepths,r.useBlockParams=this.useBlockParams}else r.index=s.index,r.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return r}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof c||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new c(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,r=void 0,i=void 0;if(!this.isInline())throw new a.default("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof c)t=["(",n=[o.value]],i=!0;else{r=!0;var s=this.incrStack();t=["((",this.push(s)," = ",o,")"],n=this.topStack()}var l=e.call(this,n);i||this.popStack(),r&&this.stackSlot--,this.push(t.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof c)this.compileStack.push(r);else{var i=this.incrStack();this.pushSource([i," = ",r,";"]),this.compileStack.push(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof c)return n.value;if(!t){if(!this.stackSlot)throw new a.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof c?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var r=[];return{params:r,paramsInit:this.setupHelperArgs(t,e,r,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(r)}},setupParams:function(e,t,n){var r={},i=[],a=[],o=[],s=!n,c=void 0;s&&(n=[]),r.name=this.quotedString(e),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack());var l=this.popStack(),u=this.popStack();(u||l)&&(r.fn=u||"container.noop",r.inverse=l||"container.noop");for(var p=t;p--;)c=this.popStack(),n[p]=c,this.trackIds&&(o[p]=this.popStack()),this.stringParams&&(a[p]=this.popStack(),i[p]=this.popStack());return s&&(r.args=this.source.generateArray(n)),this.trackIds&&(r.ids=this.source.generateArray(o)),this.stringParams&&(r.types=this.source.generateArray(a),r.contexts=this.source.generateArray(i)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(e,t,n,r){var i=this.setupParams(e,t,n);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),r?(this.useRegister("options"),n.push("options"),["options=",i]):n?(n.push(i),""):i}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=l.RESERVED_WORDS={},n=0,r=e.length;n<r;n++)t[e[n]]=!0}(),l.isValidJavaScriptVariableName=function(e){return!l.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=l,e.exports=t.default},ZeiE:function(e,t,n){"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.extend.apply(void 0,[Object.create(null)].concat(t))};var r=n("XVEb")},ZhQg:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("DL1I");var r=n("X0jn"),i=n("EM62"),a=n("2kYt"),o=function(){function e(){}return Object.defineProperty(e.prototype,"tileStyles",{get:function(){return{fill:"#FFFFFF","fill-opacity":this.data.fillAlpha,stroke:this.data.lineColor,"stroke-opacity":this.data.lineAlpha,"stroke-width":r.a,"stroke-dasharray":this.data.lineStyle,"stroke-linecap":"round","stroke-miterlimit":10,"stroke-linejoin":"round"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyles",{get:function(){return{"font-size":16,fill:this.data.textColor,"font-weight":"normal","font-style":"normal","text-decoration":"none"}},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Zb({type:e,selectors:[["line-styling-tile"]],inputs:{data:"data"},decls:6,vars:2,consts:[[1,"line-style-tile-wrapper","style-tile"],["xmlns","http://www.w3.org/2000/svg","width","66","height","15.22","viewBox","0 0 66 15.22"],["x1","0.5","y1","7.61","x2","65.5","y2","7.61",3,"ngStyle"],["x","20.5","y","0.11","width","25","height","15",2,"fill","white"],["transform","translate(25.31 11.72)",3,"ngStyle"]],template:function(e,t){1&e&&(i.lc(0,"div",0),i.wc(),i.lc(1,"svg",1),i.gc(2,"line",2),i.gc(3,"rect",3),i.lc(4,"text",4),i.ed(5,"Aa"),i.kc(),i.kc(),i.kc()),2&e&&(i.Sb(2),i.Cc("ngStyle",t.tileStyles),i.Sb(2),i.Cc("ngStyle",t.fontStyles))},directives:[a.w],styles:[".style-tile[_ngcontent-%COMP%]{border:2px solid #fff;border-radius:4px}.line-style-tile-wrapper[_ngcontent-%COMP%]{height:25px;width:80px;text-align:center;line-height:27px}"],changeDetection:0}),e}()},"Zuf/":function(e,t,n){"use strict";e.exports=n("X1A4")},ZyLw:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("EM62"),i=function(){function e(){this._textStyles=[],this.createTextStyles()}return e.prototype.createTextStyles=function(){this._textStyles=[{size:10},{size:13},{size:10,bold:!0},{size:13,bold:!0},{size:10,font:"open_sansitalic"},{size:13,font:"open_sansitalic"},{size:10,font:"courier_prime"},{size:10,font:"lt-hairline",bold:!0},{size:22,font:"champagne"},{size:13,font:"indie"},{size:18,font:"indie"},{size:12,font:"open_sanscondensed"},{size:14,font:"open_sanscondensed"},{size:10,font:"playfair"},{size:12,font:"bree"},{size:13,font:"bree"},{size:18,font:"bebas"},{size:10,font:"montserrat"},{size:10,font:"raleway"},{size:12,font:"spartan"},{size:12,font:"droid_serifregular"},{size:12,font:"abhaya_libreregular"},{size:12,font:"gandhi_serifregular"}]},e.prototype.getTextStyles=function(){return this._textStyles},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac}),e}()},"a+rc":function(e,t,n){var r=n("sfKy"),i=n("oFOz");t.ASC=function(){throw new Error("ASC is not implemented")},t.BAHTTEXT=function(){throw new Error("BAHTTEXT is not implemented")},t.CHAR=function(e){return 0===(e=r.parseNumber(e))?i.value:e instanceof Error?e:String.fromCharCode(e)},t.CLEAN=function(e){if(r.anyIsError(e))return e;return(e=e||"").replace(/[\0-\x1F]/g,"")},t.CODE=function(e){if(r.anyIsError(e))return e;var t=(e=e||"").charCodeAt(0);return isNaN(t)&&(t=i.value),t},t.CONCATENATE=function(){var e=r.flatten(arguments),t=r.anyError.apply(void 0,e);if(t)return t;for(var n=0;(n=e.indexOf(!0))>-1;)e[n]="TRUE";for(var i=0;(i=e.indexOf(!1))>-1;)e[i]="FALSE";return e.join("")},t.CONCAT=t.CONCATENATE,t.DBCS=function(){throw new Error("DBCS is not implemented")},t.DOLLAR=function(){throw new Error("DOLLAR is not implemented")},t.EXACT=function(e,t){if(2!==arguments.length)return i.na;var n=r.anyError(e,t);return n||(e=r.parseString(e))===(t=r.parseString(t))},t.FIND=function(e,t,n){if(arguments.length<2)return i.na;e=r.parseString(e),n=void 0===n?0:n;var a=(t=r.parseString(t)).indexOf(e,n-1);return-1===a?i.value:a+1},t.FIXED=function(){throw new Error("FIXED is not implemented")},t.HTML2TEXT=function(e){if(r.anyIsError(e))return e;var t="";return e&&(e instanceof Array?e.forEach((function(e){""!==t&&(t+="\n"),t+=e.replace(/<(?:.|\n)*?>/gm,"")})):t=e.replace(/<(?:.|\n)*?>/gm,"")),t},t.LEFT=function(e,t){var n=r.anyError(e,t);return n||(e=r.parseString(e),t=void 0===t?1:t,(t=r.parseNumber(t))instanceof Error||"string"!=typeof e?i.value:e.substring(0,t))},t.LEN=function(e){if(0===arguments.length)return i.error;if(e instanceof Error)return e;if(Array.isArray(e))return i.value;var t=r.parseString(e);return t.length},t.LOWER=function(e){return 1!==arguments.length?i.value:(e=r.parseString(e),r.anyIsError(e)?e:e.toLowerCase())},t.MID=function(e,t,n){if(null==t)return i.value;if(t=r.parseNumber(t),n=r.parseNumber(n),r.anyIsError(t,n)||"string"!=typeof e)return n;var a=t-1,o=a+n;return e.substring(a,o)},t.NUMBERVALUE=function(e,t,n){return t=void 0===t?".":t,n=void 0===n?",":n,Number(e.replace(t,".").replace(n,""))},t.PRONETIC=function(){throw new Error("PRONETIC is not implemented")},t.PROPER=function(e){return r.anyIsError(e)?e:isNaN(e)&&"number"==typeof e?i.value:(e=r.parseString(e)).replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},t.REGEXEXTRACT=function(e,t){if(arguments.length<2)return i.na;var n=e.match(new RegExp(t));return n?n[n.length>1?n.length-1:0]:null},t.REGEXMATCH=function(e,t,n){if(arguments.length<2)return i.na;var r=e.match(new RegExp(t));return n?r:!!r},t.REGEXREPLACE=function(e,t,n){return arguments.length<3?i.na:e.replace(new RegExp(t),n)},t.REPLACE=function(e,t,n,a){return t=r.parseNumber(t),n=r.parseNumber(n),r.anyIsError(t,n)||"string"!=typeof e||"string"!=typeof a?i.value:e.substr(0,t-1)+a+e.substr(t-1+n)},t.REPT=function(e,t){var n=r.anyError(e,t);return n||(e=r.parseString(e),(t=r.parseNumber(t))instanceof Error?t:new Array(t+1).join(e))},t.RIGHT=function(e,t){var n=r.anyError(e,t);return n||(e=r.parseString(e),t=void 0===t?1:t,(t=r.parseNumber(t))instanceof Error?t:e.substring(e.length-t))},t.SEARCH=function(e,t,n){var r;return"string"!=typeof e||"string"!=typeof t?i.value:(n=void 0===n?0:n,0===(r=t.toLowerCase().indexOf(e.toLowerCase(),n-1)+1)?i.value:r)},t.SPLIT=function(e,t){return e.split(t)},t.SUBSTITUTE=function(e,t,n,r){if(arguments.length<3)return i.na;if(e&&t){if(void 0===r)return e.split(t).join(n);if(r=Math.floor(Number(r)),Number.isNaN(r)||r<=0)return i.value;for(var a=0,o=0;a>-1&&e.indexOf(t,a)>-1;)if(o++,(a=e.indexOf(t,a+1))>-1&&o===r)return e.substring(0,a)+n+e.substring(a+t.length);return e}return e},t.T=function(e){return e instanceof Error||"string"==typeof e?e:""},t.TEXT=function(){throw new Error("TEXT is not implemented")},t.TRIM=function(e){return(e=r.parseString(e))instanceof Error?e:e.replace(/\s+/g," ").trim()},t.UNICHAR=t.CHAR,t.UNICODE=t.CODE,t.UPPER=function(e){return(e=r.parseString(e))instanceof Error?e:e.toUpperCase()},t.VALUE=function(e){var t=r.anyError(e);if(t)return t;if("string"!=typeof e)return i.value;var n=/(%)$/.test(e)||/^(%)/.test(e);if(""===(e=(e=(e=e.replace(/^[^0-9-]{0,3}/,"")).replace(/[^0-9]{0,3}$/,"")).replace(/[\ ,]/g,"")))return i.value;var a=Number(e);return isNaN(a)?i.value:(a=a||0,n&&(a*=.01),a)}},aSB4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("ROBh"),i=n("5xGT"),a=n("SBw3"),o=n("EM62"),s=function(){function e(e,t){this.state=e,this.featureList=t}return e.prototype.getFeatureData=function(e){var t=this.featureList.getFeature(e);return Object(r.a)(t)},e.prototype.getApplyData=function(e){return Object(r.a)({connectorIds:[this.state.get("Selected")[0]]})},e.\u0275fac=function(t){return new(t||e)(o.pc(i.Ib),o.pc(a.a))},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},aSzn:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var r=n("D57K"),i=n("EM62"),a=n("5xGT"),o=n("X0jn"),s=n("nsO7"),c=n("g6G6"),l=n("ROBh"),u=n("P4Xx"),p=n("6Oco"),h=n("TLy2"),d=n("YtkY"),f=n("jIqt"),g=n("mWib"),m=n("8j5Y"),v=n("xVbo"),b=n("BwBJ"),y=n("Ohay"),x=n("7SLS"),C=n("3mST"),w=n("w1VY"),k=n("QoSw"),S=n("flPR"),O=n("SBw3"),E=n("0fSw"),_=n("IGWl"),I=n("PGgW"),P=n("X5Q9"),T=n("eIBf"),A=n("s9Xn"),M=function(e){function t(t,n,r,i,a,o,s){var c=e.call(this,i)||this;return c.injector=t,c.commandService=n,c.featureList=r,c.state=i,c.ll=a,c.toolbarManager=o,c.coordinate=s,c.modelChangeDebounce=100,c.subs=[],c}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"indicators",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toolbar",{get:function(){return this.toolbarManager.get("contextual-toolbar")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this;this.subs.push(this.listenToChanges().pipe(Object(h.a)((function(t){return e.getItemsForContextChange(t)})),Object(d.a)((function(t){return e.updateShowMethod(t)})),Object(h.a)((function(t){return e.handleContextChange(t)}))).subscribe(),this.toolbar.change.subscribe((function(t){return e.handleToolbarChange(t)})))},t.prototype.destroy=function(){this.toolbar&&this.toolbar.hide().subscribe(),this.subs.forEach((function(e){e.unsubscribe()}))},t.prototype.listenToChanges=function(){var e=this;return this.listenToContextChange().pipe(Object(h.a)((function(t){return e.isShowAction(t.action)?Object(c.a)(e.listenToModelChange(),e.listenToGroupChanges()).pipe(Object(f.a)(t),Object(g.a)(e.modelChangeDebounce)):Object(l.a)(t)})))},t.prototype.listenToContextChange=function(){var e=this;return this.duringSelection().pipe(Object(h.a)((function(t){var n;return"show"===t.action?Object(c.a)(e.duringSelectionInteraction({action:"quickshow"},{action:"quickhide"}).pipe(Object(m.a)((function(t){return n=!e.isShowAction(t.action)}))),e.duringTextEdit({action:"show"},{action:"hide"}).pipe(Object(m.a)((function(t){return n=!e.isShowAction(t.action)}))),e.duringPan({action:"quickshow"},{action:"quickhide"}).pipe(Object(v.a)((function(){return!n})))):Object(l.a)(t)})),Object(b.a)(1),Object(y.a)(s.isEqual))},t.prototype.listenToGroupChanges=function(){return this.locator.getDiagramChanges().pipe(Object(v.a)((function(e){return a.hb.hasChanges(e.modifier,"groups")})),Object(x.a)({action:"show"}))},t.prototype.checkSelectedShapesHasUnlocked=function(){var e=this;return this.state.changes("Selected").pipe(Object(y.a)(s.isEqual),Object(h.a)((function(t){return e.locator.getDiagramOnce().pipe(Object(d.a)((function(e){var n,i;try{for(var a=Object(r.k)(t),o=a.next();!o.done;o=a.next()){var s=o.value;if(!e.shapes[s].isLocked)return!0}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1})))})))},t.prototype.listenToModelChange=function(){var e=this,t=this.state.get("Selected").map((function(t){return e.locator.getShapeModel(t).pipe(Object(C.a)(1),Object(x.a)({action:"quickshow"}))}));return c.a.apply(void 0,Object(r.j)(t))},t.prototype.duringSelection=function(){return this.checkSelectedShapesHasUnlocked().pipe(Object(d.a)((function(e){return e?{action:"show"}:{action:"hide"}})))},t.prototype.getItemsForContextChange=function(e){return this.isShowAction(e.action)?this.getToolbarItems().pipe(Object(d.a)((function(t){return e.items=t,e}))):Object(l.a)(e)},t.prototype.handleContextChange=function(e){var t=this;switch(e.action){case"show":case"quickshow":return this.setToolbarItems(e.items).pipe(Object(h.a)((function(){return t.positionToolbar()})),Object(h.a)((function(){return t.toolbar.show()})));case"reshow":return this.setToolbarItems(e.items).pipe(Object(h.a)((function(){return t.toolbar.hide()})),Object(h.a)((function(){return t.positionToolbar()})),Object(h.a)((function(){return t.toolbar.show()})));case"hide":case"quickhide":return this.toolbar.hide()}return Object(l.a)({})},t.prototype.isShowAction=function(e){return"show"===e||"reshow"===e||"quickshow"===e},t.prototype.updateShowMethod=function(e){if(this.isShowAction(e.action)){if(!e.items||e.items&&0===e.items.length)return e.action="hide",e;"show"===e.action&&(e.action="reshow")}return e},t.prototype.setToolbarItems=function(e){var t=this,n=this.toolbar.itemIds,i=e?e.map((function(e){return e.featureId})):[],a=[];return n.filter((function(e){return-1===i.indexOf(e)})).forEach((function(e){t.toolbar.removeItem(e)})),n.filter((function(e){return i.indexOf(e)>-1})).forEach((function(n){var r=Object(s.find)(e,{featureId:n});a.push(t.updateToolbarItem(r))})),i.forEach((function(r,i){if(-1===n.indexOf(r)){var o=Object(s.find)(e,{featureId:r});a.push(t.addToolbarItem(o,i))}})),a.length>0?u.a.apply(void 0,Object(r.j)(a)):Object(l.a)({})},t.prototype.addToolbarItem=function(e,t){var n=this,r=this.featureList.getFeature(e.featureId),i=this.getUIControlType(r.dataType,e.visibility?e.visibility.level:null),a=e.visibility?e.visibility.level:null;return this.getItemDataAndProperties(r,e.data).pipe(Object(d.a)((function(r){var o=r.data,s=r.controlProps;n.toolbar.addItem(e.featureId,i,o,s,t,a)})))},t.prototype.updateToolbarItem=function(e){var t=this,n=this.featureList.getFeature(e.featureId);return this.getItemDataAndProperties(n,e.data).pipe(Object(d.a)((function(n){var r=n.data,i=n.controlProps;t.toolbar.updateItem(e.featureId,r,i)})))},t.prototype.positionToolbar=function(){var e=this;return this.locator.getDiagramOnce().pipe(Object(d.a)((function(t){var n=e.state.get("Selected"),r=t.getBounds(n),i=e.coordinate.x(r.x)+e.coordinate.width(r.width)/2,a=e.coordinate.y(r.y);a-=e.isPlusCreateAvailable(t,n)||e.checkTransformAngle(t,n)?90:75,e.toolbar.position({x:i,y:a},"bottomcenter")})))},t.prototype.handleToolbarChange=function(e){var t=this,n=this.featureList.getFeature(e.id);if(n.transformer){this.handleFeatureTrack(n,e.data);var r=this.injector.get(n.transformer),i=Object(a.Rb)((function(e){return t.commandService.dispatch(n.commandEvent,e)}));r.getApplyData(n.id,e.data).subscribe(i)}else{var o=a.s.mergeInstances({},this.getCommandData(e.id),e.data);this.commandService.dispatch(n.commandEvent,o)}},t.prototype.handleFeatureTrack=function(e,t){if(e.label&&t&&t.label){var n={value1:t.label.trim()?t.label:t.id};t.subLabel&&(n.value2=t.subLabel),a.Kb.track("canvas.toolbar."+e.label.replace(/\s/g,"")+".change",n)}},t.prototype.getCommandData=function(e){var t={},n=this.toolbar.getItem(e);return n&&n.data&&(n.data.dataItemId&&(t.dataItems=[{id:n.data.dataItemId,value:n.data.value}]),n.data.alterFunction&&(t.alterFunction=n.data.alterFunction)),t},t.prototype.getToolbarItems=function(){var e=this,t=this.state.get("Selected");return t.length?(1===t.length?this.getToolbarItemsForSingleShape(t[0]):this.getToolbarItemsForMultiShape(t)).pipe(Object(d.a)((function(t){var n=e.state.get("InnerShapeSelection");return Object.keys(n).length>0?t.filter((function(e){return"openShapelinkEditor"!==e.featureId})):t})),Object(h.a)((function(t){var n;return n=t.map((function(t){return e.isFeatureEnabled(t.featureId)})),u.a.apply(void 0,Object(r.j)(n)).pipe(Object(d.a)((function(e){return t.filter((function(t,n){return e[n]}))})))}))):Object(l.a)([])},t.prototype.isFeatureEnabled=function(e){var t=this.featureList.getFeature(e);if(t.transformer){var n=this.injector.get(t.transformer);if(n.isEnabled)return n.isEnabled(t.id)}return Object(l.a)(!0)},t.prototype.getToolbarItemsForSingleShape=function(e){return this.locator.getDiagramOnce().pipe(Object(v.a)((function(t){return null!==t.shapes[e]})),Object(d.a)((function(t){return t.shapes[e].getContextualToolbarItems(t)})))},t.prototype.getToolbarItemsForMultiShape=function(e){return this.locator.getDiagramOnce().pipe(Object(d.a)((function(t){var n=Object(s.filter)(t.shapes,(function(t){return e.includes(t.id)}));if(t.sameType(e)){var i=n.map((function(e){return e.getContextualToolbarItemsForSameType()}));return s.intersectionBy.apply(void 0,Object(r.j)(i,["featureId"]))}i=n.map((function(e){return e.getContextualToolbarItemsForMultipleTypes()}));return s.intersectionBy.apply(void 0,Object(r.j)(i,["featureId"]))})))},t.prototype.getToolbarItemsForTextEdit=function(e){return Object(p.b)()},t.prototype.getItemDataAndProperties=function(e,t){var n=this.getUIControlProperties(e);if(e.transformer){var r=this.injector.get(e.transformer);return(r.transformProperties?r.transformProperties(e.id,n):Object(l.a)(n)).pipe(Object(h.a)((function(n){return r.getFeatureData(e.id,t).pipe(Object(d.a)((function(e){return{data:e,controlProps:n}})))})))}if(t){var i=a.s.mergeInstances({},e.data,t);return Object(l.a)({data:i,controlProps:n})}return Object(l.a)({data:e.data,controlProps:n})},t.prototype.getUIControlProperties=function(e){return{id:e.id,icon:e.icon,label:e.label,tooltip:e.tooltip,updateToolbarIcon:e.updateToolbarIcon}},t.prototype.getUIControlType=function(e,t){if(void 0===t&&(t="primary"),"secondary"===t)return T.a;if(!e||e===o.c.BINARY)return _.a;if(e===o.c.OPTION_IMAGES||e===o.c.OPTION_LIST)return I.a;if(e===o.c.CUSTOM_STYLE_PALETTES)return P.a;if(e===o.c.GRID_IMAGES)return A.a;throw new Error("A contextual toolbar UI control is not available for "+e)},t.prototype.createAddSource=function(){return Object(p.b)()},t.prototype.createRemoveSource=function(){return Object(p.b)()},t.prototype.createChangeSource=function(){return Object(p.b)()},t.prototype.isPlusCreateAvailable=function(e,t){return 1===t.length},t.prototype.checkTransformAngle=function(e,t){if(1===t.length&&!e.shapes[t[0]].isConnector()){var n=e.shapes[t[0]].transform.angle;if(n>85||n<-175)return!0}return!1},t.\u0275fac=function(e){return new(e||t)(i.pc(i.C),i.pc(a.B),i.pc(O.a),i.pc(a.Ib),i.pc(k.a),i.pc(E.a),i.pc(w.a))},t.\u0275prov=i.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(S.a)(),Object(r.g)("design:paramtypes",[i.C,a.B,O.a,a.Ib,k.a,E.a,w.a])],t)}(S.b);Object.defineProperty(M,"name",{value:"ContextualToolbarHandler"})},bL7E:function(e,t,n){"use strict";n.d(t,"a",(function(){return ce}));var r=n("D57K"),i=n("Xpu5"),a=n("G3/p"),o=n("5xGT"),s=n("NNJu"),c=n("X0jn"),l=n("nsO7"),u=n("C05f"),p=n("ROBh"),h=n("47ST"),d=n("HsO4"),f=n("YtkY"),g=n("wqq/"),m=n("J+dc"),v=n("8j5Y"),b=n("TLy2"),y=n("4e/d"),x=n("ruxD"),C=n("Fuvo"),w=(n("unyx"),n("qlkn")),k=n("Wwqo"),S=n("EM62"),O=n("s2Ay"),E=n("2kYt"),_=n("k/7B"),I=n("r7/9"),P=n("Wrqg"),T=n("xEGh"),A=n("pYIu"),M=n("XwbL"),D=n("uXwy"),j=n("crdX"),N=n("/ege"),R=["window"],L=["windowInner"],F=["mappingsSelector"],B=["mappingsContainer"];function V(e,t){1&e&&(S.lc(0,"span",3),S.ed(1,"GOOGLE_SHEET_IMPORT.HEADING.SUB_TITLE_ENTER_SHEET_ID"),S.kc())}function z(e,t){1&e&&(S.lc(0,"span",3),S.ed(1,"GOOGLE_SHEET_IMPORT.HEADING.SUB_TITLE_SELECT_FROM_DROPDOWN"),S.kc())}function U(e,t){1&e&&S.gc(0,"loading-bubbles",31)}var G=function(){return["Enter"]};function H(e,t){if(1&e){var n=S.mc();S.lc(0,"div",24),S.lc(1,"div",25),S.lc(2,"label",26),S.ed(3,"GOOGLE_SHEET_IMPORT.LABEL.SPREADSHEET_ID"),S.kc(),S.lc(4,"text-input",27,28),S.tc("updateText",(function(e){return S.Pc(n),S.xc().onSpreadsheetInputChanged(e)}))("submit",(function(e){return S.Pc(n),S.xc().fetchSpreadsheet(e)})),S.kc(),S.kc(),S.lc(6,"div"),S.lc(7,"button",29),S.tc("click",(function(){return S.Pc(n),S.xc().fetchSpreadsheet()})),S.ed(8,"LABELS.CONTINUE"),S.kc(),S.kc(),S.cd(9,U,1,0,"loading-bubbles",30),S.yc(10,"async"),S.kc()}if(2&e){var r=S.xc();S.Sb(4),S.Cc("showClearButton",!0)("submitOnCode",S.Gc(5,G)),S.Sb(5),S.Cc("ngIf",S.zc(10,3,r.isLoading))}}function Y(e,t){if(1&e&&S.gc(0,"sidebar-list-dropdown-item",37),2&e){var n=t.$implicit;S.Cc("item",n)}}var q=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0}};function W(e,t){if(1&e){var n=S.mc();S.lc(0,"abs-dropdown",33,34),S.tc("changed",(function(e){return S.Pc(n),S.xc(2).onSheetSelected(e)})),S.gc(2,"sidebar-dropdown-button",35),S.cd(3,Y,1,1,"sidebar-list-dropdown-item",36),S.kc()}if(2&e){var r=S.xc(2);S.Cc("settings",S.Gc(5,q))("autoPosition",!1),S.Sb(2),S.Cc("items",r.sheetOptions)("placeholderText","Select the sheet"),S.Sb(1),S.Cc("ngForOf",r.sheetOptions)}}function X(e,t){1&e&&S.gc(0,"loading-bubbles",31)}function K(e,t){if(1&e){var n=S.mc();S.lc(0,"div",24),S.lc(1,"div",25),S.lc(2,"label",12),S.ed(3,"GOOGLE_SHEET_IMPORT.LABEL.SELECT_SHEET_PROCEED"),S.kc(),S.cd(4,W,4,6,"abs-dropdown",21),S.kc(),S.lc(5,"button",32),S.tc("click",(function(){return S.Pc(n),S.xc().proceedToMappings()})),S.yc(6,"async"),S.ed(7,"LABELS.CONTINUE"),S.kc(),S.cd(8,X,1,0,"loading-bubbles",30),S.yc(9,"async"),S.kc()}if(2&e){var r=S.xc();S.Sb(4),S.Cc("ngIf",r.sheetOptions),S.Sb(1),S.Cc("disabled",S.zc(6,3,r.isLoading)),S.Sb(3),S.Cc("ngIf",S.zc(9,5,r.isLoading))}}function Z(e,t){1&e&&S.gc(0,"loading-bubbles",38)}function $(e,t){if(1&e){var n=S.mc();S.lc(0,"button",32),S.tc("click",(function(){return S.Pc(n),S.xc().authenticate()})),S.yc(1,"async"),S.ed(2,"LABELS.AUTHENTICATE "),S.kc()}if(2&e){var r=S.xc();S.Cc("disabled",S.zc(1,1,r.isLoading))}}function Q(e,t){if(1&e&&S.gc(0,"sidebar-list-dropdown-item",37),2&e){var n=t.$implicit;S.Cc("item",n)}}function J(e,t){if(1&e){var n=S.mc();S.lc(0,"abs-dropdown",33,39),S.tc("changed",(function(e){return S.Pc(n),S.xc().onRowIdentifierChanged(e)})),S.gc(2,"sidebar-dropdown-button",35),S.cd(3,Q,1,1,"sidebar-list-dropdown-item",36),S.kc()}if(2&e){var r=S.xc();S.Cc("settings",S.Gc(5,q))("autoPosition",!1),S.Sb(2),S.Cc("items",r.rowIdentifierOptions)("placeholderText","Select the field"),S.Sb(1),S.Cc("ngForOf",r.rowIdentifierOptions)}}function ee(e,t){if(1&e&&S.gc(0,"sidebar-list-dropdown-item",37),2&e){var n=t.$implicit;S.Cc("item",n)}}var te=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!1}};function ne(e,t){if(1&e){var n=S.mc();S.lc(0,"abs-dropdown",33,49),S.tc("changed",(function(e){S.Pc(n);var t=S.xc().index;return S.xc(2).onMappingChanged(t,e)})),S.gc(2,"sidebar-dropdown-button",50),S.cd(3,ee,1,1,"sidebar-list-dropdown-item",36),S.kc()}if(2&e){var r=t.ngIf;S.Cc("settings",S.Gc(4,te))("autoPosition",!1),S.Sb(2),S.Cc("items",r),S.Sb(1),S.Cc("ngForOf",r)}}function re(e,t){if(1&e&&(S.lc(0,"tr"),S.lc(1,"td",47),S.ed(2),S.kc(),S.lc(3,"td",47),S.ed(4),S.kc(),S.lc(5,"td",48),S.cd(6,ne,4,5,"abs-dropdown",21),S.yc(7,"async"),S.kc(),S.kc()),2&e){var n=t.$implicit,r=t.index,i=S.xc(2);S.Sb(2),S.fd(n),S.Sb(2),S.fd(i.sampleValues[r]),S.Sb(2),S.Cc("ngIf",S.zc(7,3,i.getMappingOptions(r)))}}function ie(e,t){if(1&e&&(S.lc(0,"table",53),S.lc(1,"thead"),S.lc(2,"tr"),S.lc(3,"th",54),S.ed(4,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_ROW"),S.kc(),S.lc(5,"th",54),S.ed(6,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_CSV_FIELD"),S.kc(),S.lc(7,"th",54),S.ed(8,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_VALUE"),S.kc(),S.lc(9,"th",54),S.ed(10,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_PARSED_VALUE"),S.kc(),S.lc(11,"th",54),S.ed(12,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_ERROR"),S.kc(),S.kc(),S.kc(),S.lc(13,"tbody"),S.lc(14,"tr"),S.lc(15,"td"),S.ed(16),S.kc(),S.lc(17,"td"),S.ed(18),S.kc(),S.lc(19,"td"),S.ed(20),S.kc(),S.lc(21,"td"),S.ed(22),S.kc(),S.lc(23,"td"),S.ed(24),S.kc(),S.kc(),S.kc(),S.kc()),2&e){var n=t.ngLet,r=S.xc(3);S.Sb(16),S.fd(n[0].rowIndex+1),S.Sb(2),S.fd(r.csvFields[n[0].columnIndex]),S.Sb(2),S.fd(n[0].value),S.Sb(2),S.fd(r.displayParsedValue(n[0].parsedValue)),S.Sb(2),S.fd(n[0].error.message)}}function ae(e,t){if(1&e&&(S.lc(0,"div",51),S.lc(1,"span",12),S.ed(2," CSV_DATA_IMPORT.MAPPINGS_ERROR.MESSAGE "),S.kc(),S.cd(3,ie,25,5,"table",52),S.yc(4,"async"),S.kc()),2&e){var n=S.xc(2);S.Sb(3),S.Cc("ngLet",S.zc(4,1,n.mappingErrors))}}function oe(e,t){if(1&e&&(S.lc(0,"div"),S.lc(1,"table",40),S.lc(2,"thead"),S.lc(3,"tr"),S.lc(4,"th",41),S.ed(5,"CSV_DATA_IMPORT.MAPPINGS.COLUMN"),S.kc(),S.lc(6,"th",41),S.ed(7,"CSV_DATA_IMPORT.MAPPINGS.SAMPLE_VALUE"),S.kc(),S.lc(8,"th",42),S.ed(9,"CSV_DATA_IMPORT.MAPPINGS.DATA_ITEM"),S.kc(),S.kc(),S.kc(),S.kc(),S.lc(10,"perfect-scrollbar",43,44),S.yc(12,"async"),S.lc(13,"table",15),S.lc(14,"tbody"),S.cd(15,re,8,5,"tr",45),S.kc(),S.kc(),S.kc(),S.cd(16,ae,5,3,"div",46),S.yc(17,"async"),S.kc()),2&e){var n=S.xc();S.Sb(10),S.Xb("has-errors",S.zc(12,4,n.hasMappingErrors)),S.Sb(5),S.Cc("ngForOf",n.csvFields),S.Sb(1),S.Cc("ngIf",S.zc(17,6,n.hasMappingErrors))}}function se(e,t){if(1&e){var n=S.mc();S.lc(0,"div",55),S.lc(1,"div",56),S.lc(2,"input",57),S.tc("click",(function(){S.Pc(n);var e=S.xc();return e.ignoreErrors.next(!e.ignoreErrors.value)})),S.yc(3,"async"),S.kc(),S.lc(4,"label"),S.ed(5,"Ignore Errors"),S.kc(),S.kc(),S.lc(6,"button",58),S.tc("click",(function(){return S.Pc(n),S.xc().importCSVData()})),S.yc(7,"async"),S.ed(8,"CSV_DATA_IMPORT.IMPORT_BUTTON"),S.kc(),S.kc()}if(2&e){var r=S.xc();S.Sb(2),S.Cc("checked",S.zc(3,2,r.ignoreErrors)),S.Sb(4),S.Cc("disabled",!0!==S.zc(7,4,r.canImport))}}var ce=function(e){function t(t,n,r,i,a,o){var s,l=e.call(this)||this;return l.modalController=t,l.dataImporter=n,l.translate=r,l.notifierController=i,l.cyclrSvc=a,l.commandSvc=o,l.selectedDb=new u.a(null),l.selectedEntityType=new u.a(null),l.csvFileSelected=new u.a(!1),l.ignoreErrors=new u.a(!1),l.importing=new u.a(!1),l.hasMappingErrors=new u.a(!1),l.mappingErrors=new u.a([]),l.canImport=new u.a(!1),l.isAuthenticated=new u.a(!1),l.isLoading=new u.a(!1),l.spreadsheetProvided=new u.a(!1),l.sheetSelected=new u.a(!1),l.subs=[],l.selectedMappings=[],l.authWaitTime=120,l.spreadsheetId="",l.dataTypes=((s={})[c.c.NUMBER]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.NUMBER.LABEL"),s[c.c.STRING]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.STRING.LABEL"),s[c.c.STRING_HTML]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.STRING_HTML.LABEL"),s[c.c.BINARY]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.CHECKBOX.LABEL"),s[c.c.OPTION_LIST]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.SINGLE_SELECT_COMBO.LABEL"),s[c.c.TAGS]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.TAGS.LABEL"),s[c.c.DATE]=l.translate.instant("SHAPE_DATA.DATA_ITEMS.DATE.LABEL"),s),l.appendedDropdowns=[],l}return Object(r.e)(t,e),t.prototype.ngOnInit=function(){var e=this;this.isLoading.next(!0),this.authenticated().subscribe((function(t){e.isAuthenticated.next(t),e.isLoading.next(!1)})),this.importingInto&&this.selectedDb.next(this.importingInto),this.dataItemOptions=this.selectedEntityType.pipe(Object(f.a)((function(t){if(t){var n=Object.values(t.dataItems);return[{id:"__IGNORE__",label:e.translate.instant("CSV_DATA_IMPORT.LABELS.IGNORE"),buttonLabel:e.translate.instant("CSV_DATA_IMPORT.LABELS.IGNORE"),selected:!0}].concat(n.filter((function(t){return e.dataTypes[t.type]&&(t.label||t.primaryTextBound)})).map((function(t){var n=t.primaryTextBound?e.translate.instant("CSV_DATA_IMPORT.LABELS.PRIMARY_TEXT"):t.label+" ("+e.dataTypes[t.type]+")";return{id:t.id,label:n,buttonLabel:n,selected:!1}})))}return[]})),Object(g.a)(1))},t.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.selectedDb.subscribe((function(){return e.selectedEntityType.next(null)})),this.selectedEntityType.subscribe((function(){return e.selectedMappings.forEach((function(t,n){return e.selectedMappings[n]="__IGNORE__"}))})),this.listenToScroll(),this.listenToDropdownChildrenChanges())},t.prototype.onSheetSelected=function(e){var t=Number(e[0].slice(6)),n=this.availableSheets.findIndex((function(e){return e.sheetId===t}));this.selectedSheet=this.availableSheets[n],this.sheetOptions=this.sheetOptions.map((function(e,t){return Object(r.a)(Object(r.a)({},e),{selected:t===n})}))},t.prototype.onRowIdentifierChanged=function(e){var t=this;this.rowIdentifierField=e[0],this.rowIdentifierOptions=this.rowIdentifierOptions.map((function(e){return Object(r.a)(Object(r.a)({},e),{selected:e.id===t.rowIdentifierField})})),this.canImport.next(this.selectedMappings.filter((function(e){return"__IGNORE__"!==e})).length>0)},t.prototype.onMappingChanged=function(e,t){var n=Object(r.h)(t,1)[0];this.selectedMappings[e]=n,this.canImport.next(this.rowIdentifierField&&this.selectedMappings.filter((function(e){return"__IGNORE__"!==e})).length>0)},t.prototype.getMappingOptions=function(e){var t=this;return this.dataItemOptions.pipe(Object(f.a)((function(n){var i=t.selectedMappings[e];return n.map((function(e){return Object(r.a)(Object(r.a)({},e),{selected:e.id===i})}))})))},t.prototype.onSpreadsheetInputChanged=function(e){this.spreadsheetId=e},t.prototype.fetchSpreadsheet=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t,n;return Object(r.f)(this,(function(r){switch(r.label){case 0:return this.isLoading.next(!0),t=e||this.spreadsheetId,[4,this.cyclrSvc.fetchPost({dataSource:k.a.GoogleSheets,method:"listSpreadsheetSheets",params:{spreadsheetId:t}})];case 1:return n=r.sent(),this.isLoading.next(!1),Array.isArray(n)&&0!==n.length&&(1===n.length?(this.selectedSheet=n[0],this.proceedToMappings()):(this.availableSheets=n,this.sheetOptions=n.map((function(e){return{id:"sheet_"+e.sheetId,label:e.title,buttonLabel:e.title,selected:!1}})),this.spreadsheetProvided.next(!0))),[2]}}))}))},t.prototype.proceedToMappings=function(){return Object(r.c)(this,void 0,void 0,(function(){var e,t,n,i,a=this;return Object(r.f)(this,(function(r){switch(r.label){case 0:return this.selectedSheet?(this.isLoading.next(!0),e=this.selectedSheet.title,[4,this.cyclrSvc.fetchPost({dataSource:k.a.GoogleSheets,method:"listRows",params:{startRow:1,endRow:2,spreadsheetId:this.spreadsheetId,sheetName:e}})]):[2];case 1:return t=r.sent(),this.isLoading.next(!1),n=Object(l.omit)(t[0],["RowNumber"]),i=Object(l.omit)(t[1],["RowNumber"]),this.mappingKeys=Object(l.keys)(n),this.csvFields=this.mappingKeys.map((function(e){return n[e]})),this.sampleValues=this.mappingKeys.map((function(e){return i[e]})),this.selectedMappings=new Array(this.csvFields.length),this.selectedMappings.fill("__IGNORE__"),this.rowIdentifierOptions=this.csvFields.map((function(e,t){return{id:a.mappingKeys[t],label:e,buttonLabel:e,selected:!1}})),this.showSidebar.next(!1),this.sheetSelected.next(!0),[2]}}))}))},t.prototype.importCSVData=function(){var e=this;try{var t=this.ignoreErrors.value,n={mappings:[],eDefId:this.selectedEntityType.value.id,ignoreMappingErrors:t,spreadsheetId:this.spreadsheetId,sheet:this.selectedSheet,rowIdentifierField:this.rowIdentifierField};this.selectedMappings.forEach((function(t,r){"__IGNORE__"!==t&&n.mappings.push({columnIndex:e.mappingKeys[r],dataItemId:t})})),this.importing.next(!0),this.hasMappingErrors.next(!1),this.selectedDb.pipe(Object(m.a)(1),Object(v.a)((function(){return e.canImport.next(!1)})),Object(b.a)((function(t){return e.dataImporter.importData(t,n)})),Object(y.a)((function(e){return e instanceof C.a?Object(p.a)({entities:[],errors:e.errors}):Object(h.a)(e)})),Object(v.a)((function(a){var o=a.entities,s=a.errors;if(e.importing.next(!1),0===s.length||t&&o.length>0){e.showImportSuccessNotification(o.length),s.length>0&&e.showImportErrorsNotification();var c=n.spreadsheetId,l=Object(r.i)(n,["spreadsheetId"]);e.commandSvc.dispatch(i.a.updateDataSourceMappings,e.selectedDb.value.id,{dataSource:{domain:k.a.GoogleSheets,id:c},mappingConfig:l}).pipe(Object(x.a)((function(){return e.closeWindow.next(!0)}))).subscribe()}else e.hasMappingErrors.next(!0),e.mappingErrors.next(s)}))).subscribe()}catch(a){}},t.prototype.displayParsedValue=function(e){return void 0===e?"undefined":Number.isNaN(e)||e instanceof Date?e.toString():JSON.stringify(e)},t.prototype.authenticate=function(){var e=this;this.isLoading.next(!0),this.cyclrSvc.authenticate(k.a.GoogleSheets,this.authWaitTime).subscribe((function(t){"done"===t&&(e.isAuthenticated.next(!0),e.isLoading.next(!1))}),(function(){e.isAuthenticated.next(!1),e.isLoading.next(!1)}))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.authenticated=function(){var e=this.cyclrSvc.isAuthenticated(k.a.GoogleSheets);return Object(d.a)(e)},t.prototype.showImportSuccessNotification=function(e){var t={inputs:{description:this.translate.instant("CSV_DATA_IMPORT.NOTIFICATION.SUCCESS",{rowCount:e}),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("CSV_DATA_IMPORT",o.i,o.jb.Success,t)},t.prototype.showImportErrorsNotification=function(){var e={inputs:{description:this.translate.instant("CSV_DATA_IMPORT.NOTIFICATION.ERROR"),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("CSV_DATA_IMPORT_ERROR",o.i,o.jb.Warning,e)},t.prototype.appendMappingsSelectorToBody=function(e){var t=this;e.dropdownContainer.addEventListener("click",(function(){t.removeAppendedDropdowns();var n=window.document.createElement("div");n.append(e.innerContainer),n.style.position="absolute";var r=n.getElementsByTagName("ul").item(0);r.style.width=e.dropdownContainer.offsetWidth+"px",r.style.maxWidth=e.dropdownContainer.offsetWidth+"px",t.appendedDropdowns.push(n),window.document.body.append(n);var i=function(e){var t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:n}}(e.dropdownContainer),a=i.top,o=i.left,s=t.perfectScroll.first.directiveRef.position(!0).y,c=0;"start"!==s&&"end"!==s&&(c=s),n.getBoundingClientRect().bottom>window.innerHeight?n.style.bottom=e.dropdownContainer.offsetHeight-35+c+"px":n.style.top=a+33-c+"px",n.style.left=o+"px"}))},t.prototype.removeAppendedDropdowns=function(){this.appendedDropdowns.forEach((function(e){e.remove()})),this.appendedDropdowns=[]},t.prototype.listenToScroll=function(){var e=this;return this.perfectScroll.changes.subscribe((function(){e.perfectScroll.first.psScrollY.pipe(Object(v.a)((function(t){e.removeAppendedDropdowns()}))).subscribe()}))},t.prototype.listenToDropdownChildrenChanges=function(){var e=this;return this.mappingsSelector.changes.pipe(Object(v.a)((function(){e.mappingsSelector.map((function(t){e.appendMappingsSelectorToBody(t)}))}))).subscribe()},t.\u0275fac=function(e){return new(e||t)(S.fc(o.gb),S.fc(a.a),S.fc(O.e),S.fc(o.kb),S.fc(w.a),S.fc(o.B))},t.\u0275cmp=S.Zb({type:t,selectors:[["google-sheets-data-import-window"]],viewQuery:function(e,t){var n;(1&e&&(S.jd(R,!0),S.jd(L,!0),S.jd(F,!0,s.b),S.jd(B,!0)),2&e)&&(S.Lc(n=S.uc())&&(t.container=n.first),S.Lc(n=S.uc())&&(t.containerInner=n.first),S.Lc(n=S.uc())&&(t.mappingsSelector=n),S.Lc(n=S.uc())&&(t.perfectScroll=n))},inputs:{importingInto:"importingInto",showSidebar:"showSidebar",closeWindow:"closeWindow"},features:[S.Pb],decls:77,vars:68,consts:[[1,"google-sheets-data-import-panel"],[1,"container-heading","fx-margin-bottom-20"],["translate","",1,"nu2-heading-5","fx-margin-bottom-15"],["translate","",1,"nu2-body-small"],["class","nu2-body-small","translate","",4,"ngIf"],[1,"vertical-container"],["class","vertical-container-right-align",4,"ngIf"],[1,"info-container"],[1,"info-heading"],["translate","",1,"nu2-heading-6"],["src","./assets/images/data-import/data-source.svg"],[1,"nu2-body-small"],["translate",""],["class","fx-center fx-margin-bottom-10","color","xmedium-grey",4,"ngIf"],["class","auth-btn nu-btn-med primary fx-span-width fx-no-padding fx-no-margin","translate","",3,"disabled","click",4,"ngIf"],[2,"width","100%"],[2,"width","60%"],["translate","",1,"grey"],[2,"width","40%"],[3,"selectedDb","placeholderText","dbChanged"],[3,"selectedDb","selectedType","placeholderText","typeChanged"],["class","dropdown-item",3,"settings","autoPosition","changed",4,"ngIf"],[4,"ngIf"],["class","modal-window-footer fx-margin-top-20",4,"ngIf"],[1,"vertical-container-right-align"],[1,"container-space-between"],["translate","",1,"nu2-caption-large-regular"],["testId","google-spreadsheet-input","placeholder","Paste the Spreadsheet ID",3,"showClearButton","submitOnCode","updateText","submit"],["textInput",""],["translate","",1,"auth-btn","nu-btn-med","primary","fx-span-width","fx-no-padding","fx-no-margin",3,"click"],["class","fx-center fx-margin-top-20 fx-margin-bottom-10","color","xmedium-grey",4,"ngIf"],["color","xmedium-grey",1,"fx-center","fx-margin-top-20","fx-margin-bottom-10"],["translate","",1,"auth-btn","nu-btn-med","primary","fx-span-width","fx-no-padding","fx-no-margin",3,"disabled","click"],[1,"dropdown-item",3,"settings","autoPosition","changed"],["sheetSelector",""],["ddbutton","",3,"items","placeholderText"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"],["color","xmedium-grey",1,"fx-center","fx-margin-bottom-10"],["rowIdentifier",""],[1,"fx-margin-bottom-10",2,"width","100%","margin-top","20px"],["align","left","translate","",2,"width","30%"],["align","left","translate","",2,"width","40%"],[1,"mappings-container"],["mappingsContainer",""],[4,"ngFor","ngForOf"],["style","margin-top: 10px",4,"ngIf"],["align","left",2,"width","30%"],["align","left",2,"width","40%"],["mappingsSelector",""],["ddbutton","",3,"items"],[2,"margin-top","10px"],["style","width: 100%; margin-top: 10px;",4,"ngLet"],[2,"width","100%","margin-top","10px"],["align","left","translate",""],[1,"modal-window-footer","fx-margin-top-20"],[1,"container-align-middle"],["type","checkbox",2,"margin","5px 10px",3,"checked","click"],["translate","",1,"nu2-btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(S.lc(0,"div",0),S.lc(1,"div",1),S.yc(2,"async"),S.lc(3,"h1",2),S.ed(4,"GOOGLE_SHEET_IMPORT.HEADING.TITLE"),S.kc(),S.lc(5,"span",3),S.yc(6,"async"),S.ed(7,"GOOGLE_SHEET_IMPORT.HEADING.SUB_TITLE"),S.kc(),S.lc(8,"div"),S.yc(9,"async"),S.cd(10,V,2,0,"span",4),S.yc(11,"async"),S.cd(12,z,2,0,"span",4),S.yc(13,"async"),S.kc(),S.kc(),S.lc(14,"div"),S.yc(15,"async"),S.lc(16,"div",5),S.yc(17,"async"),S.cd(18,H,11,6,"div",6),S.yc(19,"async"),S.cd(20,K,10,7,"div",6),S.yc(21,"async"),S.kc(),S.lc(22,"div",5),S.yc(23,"async"),S.lc(24,"div",7),S.lc(25,"div",8),S.lc(26,"h1",9),S.ed(27,"GOOGLE_SHEET_IMPORT.INFO.TITLE"),S.kc(),S.gc(28,"img",10),S.kc(),S.lc(29,"ul",11),S.lc(30,"li"),S.lc(31,"span",12),S.ed(32,"GOOGLE_SHEET_IMPORT.INFO.LIST_ITEM_1"),S.kc(),S.kc(),S.lc(33,"li"),S.lc(34,"span",12),S.ed(35,"GOOGLE_SHEET_IMPORT.INFO.LIST_ITEM_2"),S.kc(),S.kc(),S.lc(36,"li"),S.lc(37,"span",12),S.ed(38,"GOOGLE_SHEET_IMPORT.INFO.LIST_ITEM_3"),S.kc(),S.kc(),S.lc(39,"li"),S.lc(40,"span",12),S.ed(41,"GOOGLE_SHEET_IMPORT.INFO.LIST_ITEM_4"),S.kc(),S.kc(),S.kc(),S.kc(),S.cd(42,Z,1,0,"loading-bubbles",13),S.yc(43,"async"),S.cd(44,$,3,3,"button",14),S.yc(45,"async"),S.kc(),S.kc(),S.lc(46,"div"),S.yc(47,"async"),S.lc(48,"table",15),S.lc(49,"tbody"),S.lc(50,"tr"),S.lc(51,"td",16),S.lc(52,"label",17),S.ed(53,"CSV_DATA_IMPORT.SELECT_DATABASE"),S.kc(),S.kc(),S.lc(54,"td",18),S.lc(55,"custom-database-selector",19),S.tc("dbChanged",(function(e){return t.selectedDb.next(e)})),S.yc(56,"async"),S.yc(57,"translate"),S.kc(),S.kc(),S.kc(),S.lc(58,"tr"),S.lc(59,"td"),S.lc(60,"label",17),S.ed(61,"CSV_DATA_IMPORT.SELECT_ENTITY_TYPE"),S.kc(),S.kc(),S.lc(62,"td"),S.lc(63,"entity-type-selector",20),S.tc("typeChanged",(function(e){return t.selectedEntityType.next(e)})),S.yc(64,"async"),S.yc(65,"async"),S.yc(66,"translate"),S.kc(),S.kc(),S.kc(),S.lc(67,"tr"),S.lc(68,"td"),S.lc(69,"label",17),S.ed(70,"GOOGLE_SHEET_IMPORT.LABEL.SELECT_ROW_IDENTIFIER"),S.kc(),S.kc(),S.lc(71,"td"),S.cd(72,J,4,6,"abs-dropdown",21),S.kc(),S.kc(),S.kc(),S.kc(),S.cd(73,oe,18,8,"div",22),S.yc(74,"async"),S.kc(),S.cd(75,se,9,6,"div",23),S.yc(76,"async"),S.kc()),2&e&&(S.Sb(1),S.Xb("fx-hidden",S.zc(2,28,t.sheetSelected)),S.Sb(4),S.Xb("fx-hidden",S.zc(6,30,t.isAuthenticated)),S.Sb(3),S.Xb("fx-hidden",0==S.zc(9,32,t.isAuthenticated)),S.Sb(2),S.Cc("ngIf",0==S.zc(11,34,t.spreadsheetProvided)),S.Sb(2),S.Cc("ngIf",S.zc(13,36,t.spreadsheetProvided)),S.Sb(2),S.Xb("fx-hidden",S.zc(15,38,t.sheetSelected)),S.Sb(2),S.Xb("fx-hidden",0==S.zc(17,40,t.isAuthenticated)),S.Sb(2),S.Cc("ngIf",0==S.zc(19,42,t.spreadsheetProvided)),S.Sb(2),S.Cc("ngIf",S.zc(21,44,t.spreadsheetProvided)),S.Sb(2),S.Xb("fx-hidden",S.zc(23,46,t.isAuthenticated)),S.Sb(20),S.Cc("ngIf",S.zc(43,48,t.isLoading)),S.Sb(2),S.Cc("ngIf",!S.zc(45,50,t.isLoading)),S.Sb(2),S.Xb("fx-hidden",0==S.zc(47,52,t.sheetSelected)),S.Sb(9),S.Cc("selectedDb",S.zc(56,54,t.selectedDb))("placeholderText",S.zc(57,56,"SHAPE_DATA.DATA_ITEMS.ENTITY_LOOKUP.DB_PLACEHOLDER")),S.Sb(8),S.Cc("selectedDb",S.zc(64,58,t.selectedDb))("selectedType",S.zc(65,60,t.selectedEntityType))("placeholderText",S.zc(66,62,"SHAPE_DATA.DATA_ITEMS.ENTITY_LOOKUP.TYPE_PLACEHOLDER")),S.Sb(9),S.Cc("ngIf",t.rowIdentifierOptions),S.Sb(1),S.Cc("ngIf",S.zc(74,64,t.selectedEntityType)),S.Sb(2),S.Cc("ngIf",S.zc(76,66,t.selectedEntityType)))},directives:[O.a,E.t,_.a,I.a,P.a,T.a,A.a,M.a,E.s,D.a,j.b,N.a],pipes:[E.b,O.d],styles:[".modal-window-inner[_ngcontent-%COMP%]{width:600px;min-height:600px;padding:0}  .modal-window-content{height:calc(100% - 110px);padding-left:20px;padding-right:20px}  .modal-window-content button.nu2-btn-secondary{padding:5px 10px}  .mappings-container{height:320px}  .mappings-container.has-errors{height:250px}.modal-window-heading[_ngcontent-%COMP%]{padding-top:25px}.modal-window-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.vertical-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;height:100%;align-content:center;flex-direction:column;align-items:center}.vertical-container[_ngcontent-%COMP%]   .auth-btn[_ngcontent-%COMP%]{width:148px}.horizontal-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.modal-window-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 0 10px;align-items:center;align-content:center}.modal-window-footer[_ngcontent-%COMP%]   button.nu2-btn-primary[_ngcontent-%COMP%]{padding:5px 10px}.modal-window-inner[_ngcontent-%COMP%]  .abs-dropdown-inner, .modal-window-inner[_ngcontent-%COMP%]  .abs-dropdown-items-container{width:100%;max-width:100%}.info-container[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65);width:100%;padding:20px;margin-top:-12px;margin-bottom:8px}.info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-position:outside;margin-left:10px}.info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.container-space-between[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:center;justify-content:space-between;align-items:center;padding-bottom:24px;width:100%}.container-space-between[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;white-space:nowrap;margin-right:15px}.container-space-between[_ngcontent-%COMP%]   text-input[_ngcontent-%COMP%]{width:100%}.container-space-between[_ngcontent-%COMP%]   abs-dropdown[_ngcontent-%COMP%]{min-width:260px}.container-align-middle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:center;align-items:center}.vertical-container-right-align[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-content:flex-end;align-items:flex-end}.info-heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),t}(o.nb)},bnd4:function(e,t,n){!function(e){e.parser=function(e,t){return new i(e,t)},e.SAXParser=i,e.SAXStream=o,e.createStream=function(e,t){return new o(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(t,n){if(!(this instanceof i))return new i(t,n);var a=this;!function(e){for(var t=0,n=r.length;t<n;t++)e[r[t]]=""}(a),a.q=a.c="",a.bufferCheckPosition=e.MAX_BUFFER_LENGTH,a.opt=n||{},a.opt.lowercase=a.opt.lowercase||a.opt.lowercasetags,a.looseCase=a.opt.lowercase?"toLowerCase":"toUpperCase",a.tags=[],a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.strict=!!t,a.noscript=!(!t&&!a.opt.noscript),a.state=w.BEGIN,a.strictEntities=a.opt.strictEntities,a.ENTITIES=a.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),a.attribList=[],a.opt.xmlns&&(a.ns=Object.create(l)),a.trackPosition=!1!==a.opt.position,a.trackPosition&&(a.position=a.line=a.column=0),S(a,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),i.prototype={end:function(){P(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return I(n,"Cannot write after close. Assign an onready handler.");if(null===t)return P(n);"object"==typeof t&&(t=t.toString());var i=0,a="";for(;a=F(t,i++),n.c=a,a;)switch(n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++),n.state){case w.BEGIN:if(n.state=w.BEGIN_WHITESPACE,"\ufeff"===a)continue;L(n,a);continue;case w.BEGIN_WHITESPACE:L(n,a);continue;case w.TEXT:if(n.sawRoot&&!n.closedRoot){for(var o=i-1;a&&"<"!==a&&"&"!==a;)(a=F(t,i++))&&n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(o,i-1)}"<"!==a||n.sawRoot&&n.closedRoot&&!n.strict?(f(a)||n.sawRoot&&!n.closedRoot||T(n,"Text data outside of root node."),"&"===a?n.state=w.TEXT_ENTITY:n.textNode+=a):(n.state=w.OPEN_WAKA,n.startTagPosition=n.position);continue;case w.SCRIPT:"<"===a?n.state=w.SCRIPT_ENDING:n.script+=a;continue;case w.SCRIPT_ENDING:"/"===a?n.state=w.CLOSE_TAG:(n.script+="<"+a,n.state=w.SCRIPT);continue;case w.OPEN_WAKA:if("!"===a)n.state=w.SGML_DECL,n.sgmlDecl="";else if(f(a));else if(v(u,a))n.state=w.OPEN_TAG,n.tagName=a;else if("/"===a)n.state=w.CLOSE_TAG,n.tagName="";else if("?"===a)n.state=w.PROC_INST,n.procInstName=n.procInstBody="";else{if(T(n,"Unencoded <"),n.startTagPosition+1<n.position){var s=n.position-n.startTagPosition;a=new Array(s).join(" ")+a}n.textNode+="<"+a,n.state=w.TEXT}continue;case w.SGML_DECL:"[CDATA["===(n.sgmlDecl+a).toUpperCase()?(O(n,"onopencdata"),n.state=w.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+a==="--"?(n.state=w.COMMENT,n.comment="",n.sgmlDecl=""):"DOCTYPE"===(n.sgmlDecl+a).toUpperCase()?(n.state=w.DOCTYPE,(n.doctype||n.sawRoot)&&T(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===a?(O(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=w.TEXT):g(a)?(n.state=w.SGML_DECL_QUOTED,n.sgmlDecl+=a):n.sgmlDecl+=a;continue;case w.SGML_DECL_QUOTED:a===n.q&&(n.state=w.SGML_DECL,n.q=""),n.sgmlDecl+=a;continue;case w.DOCTYPE:">"===a?(n.state=w.TEXT,O(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=a,"["===a?n.state=w.DOCTYPE_DTD:g(a)&&(n.state=w.DOCTYPE_QUOTED,n.q=a));continue;case w.DOCTYPE_QUOTED:n.doctype+=a,a===n.q&&(n.q="",n.state=w.DOCTYPE);continue;case w.DOCTYPE_DTD:n.doctype+=a,"]"===a?n.state=w.DOCTYPE:g(a)&&(n.state=w.DOCTYPE_DTD_QUOTED,n.q=a);continue;case w.DOCTYPE_DTD_QUOTED:n.doctype+=a,a===n.q&&(n.state=w.DOCTYPE_DTD,n.q="");continue;case w.COMMENT:"-"===a?n.state=w.COMMENT_ENDING:n.comment+=a;continue;case w.COMMENT_ENDING:"-"===a?(n.state=w.COMMENT_ENDED,n.comment=_(n.opt,n.comment),n.comment&&O(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+a,n.state=w.COMMENT);continue;case w.COMMENT_ENDED:">"!==a?(T(n,"Malformed comment"),n.comment+="--"+a,n.state=w.COMMENT):n.state=w.TEXT;continue;case w.CDATA:"]"===a?n.state=w.CDATA_ENDING:n.cdata+=a;continue;case w.CDATA_ENDING:"]"===a?n.state=w.CDATA_ENDING_2:(n.cdata+="]"+a,n.state=w.CDATA);continue;case w.CDATA_ENDING_2:">"===a?(n.cdata&&O(n,"oncdata",n.cdata),O(n,"onclosecdata"),n.cdata="",n.state=w.TEXT):"]"===a?n.cdata+="]":(n.cdata+="]]"+a,n.state=w.CDATA);continue;case w.PROC_INST:"?"===a?n.state=w.PROC_INST_ENDING:f(a)?n.state=w.PROC_INST_BODY:n.procInstName+=a;continue;case w.PROC_INST_BODY:if(!n.procInstBody&&f(a))continue;"?"===a?n.state=w.PROC_INST_ENDING:n.procInstBody+=a;continue;case w.PROC_INST_ENDING:">"===a?(O(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=w.TEXT):(n.procInstBody+="?"+a,n.state=w.PROC_INST_BODY);continue;case w.OPEN_TAG:v(p,a)?n.tagName+=a:(A(n),">"===a?j(n):"/"===a?n.state=w.OPEN_TAG_SLASH:(f(a)||T(n,"Invalid character in tag name"),n.state=w.ATTRIB));continue;case w.OPEN_TAG_SLASH:">"===a?(j(n,!0),N(n)):(T(n,"Forward-slash in opening tag not followed by >"),n.state=w.ATTRIB);continue;case w.ATTRIB:if(f(a))continue;">"===a?j(n):"/"===a?n.state=w.OPEN_TAG_SLASH:v(u,a)?(n.attribName=a,n.attribValue="",n.state=w.ATTRIB_NAME):T(n,"Invalid attribute name");continue;case w.ATTRIB_NAME:"="===a?n.state=w.ATTRIB_VALUE:">"===a?(T(n,"Attribute without value"),n.attribValue=n.attribName,D(n),j(n)):f(a)?n.state=w.ATTRIB_NAME_SAW_WHITE:v(p,a)?n.attribName+=a:T(n,"Invalid attribute name");continue;case w.ATTRIB_NAME_SAW_WHITE:if("="===a)n.state=w.ATTRIB_VALUE;else{if(f(a))continue;T(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",O(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===a?j(n):v(u,a)?(n.attribName=a,n.state=w.ATTRIB_NAME):(T(n,"Invalid attribute name"),n.state=w.ATTRIB)}continue;case w.ATTRIB_VALUE:if(f(a))continue;g(a)?(n.q=a,n.state=w.ATTRIB_VALUE_QUOTED):(T(n,"Unquoted attribute value"),n.state=w.ATTRIB_VALUE_UNQUOTED,n.attribValue=a);continue;case w.ATTRIB_VALUE_QUOTED:if(a!==n.q){"&"===a?n.state=w.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=a;continue}D(n),n.q="",n.state=w.ATTRIB_VALUE_CLOSED;continue;case w.ATTRIB_VALUE_CLOSED:f(a)?n.state=w.ATTRIB:">"===a?j(n):"/"===a?n.state=w.OPEN_TAG_SLASH:v(u,a)?(T(n,"No whitespace between attributes"),n.attribName=a,n.attribValue="",n.state=w.ATTRIB_NAME):T(n,"Invalid attribute name");continue;case w.ATTRIB_VALUE_UNQUOTED:if(!m(a)){"&"===a?n.state=w.ATTRIB_VALUE_ENTITY_U:n.attribValue+=a;continue}D(n),">"===a?j(n):n.state=w.ATTRIB;continue;case w.CLOSE_TAG:if(n.tagName)">"===a?N(n):v(p,a)?n.tagName+=a:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=w.SCRIPT):(f(a)||T(n,"Invalid tagname in closing tag"),n.state=w.CLOSE_TAG_SAW_WHITE);else{if(f(a))continue;b(u,a)?n.script?(n.script+="</"+a,n.state=w.SCRIPT):T(n,"Invalid tagname in closing tag."):n.tagName=a}continue;case w.CLOSE_TAG_SAW_WHITE:if(f(a))continue;">"===a?N(n):T(n,"Invalid characters in closing tag");continue;case w.TEXT_ENTITY:case w.ATTRIB_VALUE_ENTITY_Q:case w.ATTRIB_VALUE_ENTITY_U:var c,l;switch(n.state){case w.TEXT_ENTITY:c=w.TEXT,l="textNode";break;case w.ATTRIB_VALUE_ENTITY_Q:c=w.ATTRIB_VALUE_QUOTED,l="attribValue";break;case w.ATTRIB_VALUE_ENTITY_U:c=w.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===a?(n[l]+=R(n),n.entity="",n.state=c):v(n.entity.length?d:h,a)?n.entity+=a:(T(n,"Invalid character in entity name"),n[l]+="&"+n.entity+a,n.entity="",n.state=c);continue;default:throw new Error(n,"Unknown state: "+n.state)}n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,a=0,o=r.length;a<o;a++){var s=t[r[a]].length;if(s>n)switch(r[a]){case"textNode":E(t);break;case"cdata":O(t,"oncdata",t.cdata),t.cdata="";break;case"script":O(t,"onscript",t.script),t.script="";break;default:I(t,"Max buffer length exceeded: "+r[a])}i=Math.max(i,s)}var c=e.MAX_BUFFER_LENGTH-i;t.bufferCheckPosition=c+t.position}(n);return n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;E(e=this),""!==e.cdata&&(O(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(O(e,"onscript",e.script),e.script="")}};try{t=n(!function(){var e=new Error("Cannot find module 'stream'");throw e.code="MODULE_NOT_FOUND",e}()).Stream}catch(B){t=function(){}}var a=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function o(e,n){if(!(this instanceof o))return new o(e,n);t.apply(this),this._parser=new i(e,n),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,a.forEach((function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})}))}o.prototype=Object.create(t.prototype,{constructor:{value:o}}),o.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=n("4j/0").StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(e,n){var r=this;return r._parser["on"+e]||-1===a.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),t.prototype.on.call(r,e,n)};var s="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",l={xml:s,xmlns:c},u=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function g(e){return'"'===e||"'"===e}function m(e){return">"===e||f(e)}function v(e,t){return e.test(t)}function b(e,t){return!v(e,t)}var y,x,C,w=0;for(var k in e.STATE={BEGIN:w++,BEGIN_WHITESPACE:w++,TEXT:w++,TEXT_ENTITY:w++,OPEN_WAKA:w++,SGML_DECL:w++,SGML_DECL_QUOTED:w++,DOCTYPE:w++,DOCTYPE_QUOTED:w++,DOCTYPE_DTD:w++,DOCTYPE_DTD_QUOTED:w++,COMMENT_STARTING:w++,COMMENT:w++,COMMENT_ENDING:w++,COMMENT_ENDED:w++,CDATA:w++,CDATA_ENDING:w++,CDATA_ENDING_2:w++,PROC_INST:w++,PROC_INST_BODY:w++,PROC_INST_ENDING:w++,OPEN_TAG:w++,OPEN_TAG_SLASH:w++,ATTRIB:w++,ATTRIB_NAME:w++,ATTRIB_NAME_SAW_WHITE:w++,ATTRIB_VALUE:w++,ATTRIB_VALUE_QUOTED:w++,ATTRIB_VALUE_CLOSED:w++,ATTRIB_VALUE_UNQUOTED:w++,ATTRIB_VALUE_ENTITY_Q:w++,ATTRIB_VALUE_ENTITY_U:w++,CLOSE_TAG:w++,CLOSE_TAG_SAW_WHITE:w++,SCRIPT:w++,SCRIPT_ENDING:w++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],r="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=r})),e.STATE)e.STATE[e.STATE[k]]=k;function S(e,t,n){e[t]&&e[t](n)}function O(e,t,n){e.textNode&&E(e),S(e,t,n)}function E(e){e.textNode=_(e.opt,e.textNode),e.textNode&&S(e,"ontext",e.textNode),e.textNode=""}function _(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function I(e,t){return E(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,S(e,"onerror",t),e}function P(e){return e.sawRoot&&!e.closedRoot&&T(e,"Unclosed root tag"),e.state!==w.BEGIN&&e.state!==w.BEGIN_WHITESPACE&&e.state!==w.TEXT&&I(e,"Unexpected end"),E(e),e.c="",e.closed=!0,S(e,"onend"),i.call(e,e.strict,e.opt),e}function T(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&I(e,t)}function A(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,O(e,"onopentagstart",n)}function M(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function D(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=M(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==s)T(e,"xml: prefix must be bound to "+s+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==c)T(e,"xmlns: prefix must be bound to "+c+"\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,O(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function j(e,t){if(e.opt.xmlns){var n=e.tag,r=M(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(T(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){O(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var a=0,o=e.attribList.length;a<o;a++){var s=e.attribList[a],c=s[0],l=s[1],u=M(c,!0),p=u.prefix,h=u.local,d=""===p?"":n.ns[p]||"",f={name:c,value:l,prefix:p,local:h,uri:d};p&&"xmlns"!==p&&!d&&(T(e,"Unbound namespace prefix: "+JSON.stringify(p)),f.uri=p),e.tag.attributes[c]=f,O(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),O(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=w.TEXT:e.state=w.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function N(e){if(!e.tagName)return T(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=w.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=w.SCRIPT);O(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){if(e.tags[t].name===r)break;T(e,"Unexpected close tag")}if(t<0)return T(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=w.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,O(e,"onclosetag",e.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==c.ns&&Object.keys(a.ns).forEach((function(t){var n=a.ns[t];O(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=w.TEXT}function R(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(T(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function L(e,t){"<"===t?(e.state=w.OPEN_WAKA,e.startTagPosition=e.position):f(t)||(T(e,"Non-whitespace before first tag."),e.textNode=t,e.state=w.TEXT)}function F(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}w=e.STATE,String.fromCodePoint||(y=String.fromCharCode,x=Math.floor,C=function(){var e,t,n=16384,r=[],i=-1,a=arguments.length;if(!a)return"";for(var o="";++i<a;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||x(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,r.push(e,t)),(i+1===a||r.length>n)&&(o+=y.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:C,configurable:!0,writable:!0}):String.fromCodePoint=C)}(t)},c3EF:function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},c6sW:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("C5+t"),a=n("5xGT"),o=n("xnGY"),s=n("i9xl"),c=n("6Oco"),l=n("P4Xx"),u=n("J+dc"),p=n("TLy2"),h=n("EM62"),d=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.logger=t,o.messageFactory=n,o.authentication=r,o.commandService=i,o.neutrinoConnection=a,o}return Object(r.e)(t,e),t.prototype.startSubscription=function(e){var t=this;return this.logger.debug("SubscriptionService: starting subscription: "+e.resourceId),Object(s.a)((function(){return e.getLatestSyncedTime().pipe(Object(u.a)(1))})).pipe(Object(p.a)((function(n){return t.sendSubStartRequest(e,n)})),Object(p.a)((function(n){return t.handleSubStartResponse(e,n)})))},t.prototype.closeSubscription=function(e){return this.logger.debug("SubscriptionService: closing subscription: "+e.resourceId),this.sendSubEndRequest(e)},t.prototype.sendSubStartRequest=function(e,t){var n=this.messageFactory.createSubscriptionMessage("start",e.subscription,e.resourceId);return n.authToken=this.authentication.token,n.payload=t?{latestTaskTimestamp:t}:{},this.neutrinoConnection.send(n)},t.prototype.sendSubEndRequest=function(e){var t=this.messageFactory.createSubscriptionMessage("end",e.subscription,e.resourceId);return t.authToken=this.authentication.token,t.payload={},this.neutrinoConnection.send(t)},t.prototype.handleSubStartResponse=function(e,t){var n=t.ppld,r=[];if(n.tasks){var i={type:e.modelType,data:{model:n.tasks}};r.push(this.commandService.collab("SubStoreModels",t.rid,null,i))}return r.length?Object(l.a)(r):Object(c.b)()},t.\u0275fac=function(e){return new(e||t)(h.pc(a.db),h.pc(i.f),h.pc(i.a),h.pc(a.B),h.pc(i.g))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t}(o.c)},cOhl:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("D57K"),i=n("5xGT"),a=n("X0jn"),o=n("C05f"),s=n("g6G6"),c=n("TLy2"),l=n("xVbo"),u=n("YtkY"),p=n("8j5Y"),h=n("QoSw"),d=n("bNPW"),f=function(){function e(e,t,n){this.name=e,this.styles=t,this.title=n}return Object.defineProperty(e.prototype,"paletteId",{get:function(){return(this.name+JSON.stringify(this.styles)).replace(/['"]+/g,"")},enumerable:!1,configurable:!0}),e}(),g=n("DL1I"),m=n("EM62"),v=function(){function e(e){this.ll=e,this._documentPalette=new f("document",[],"PANEL_HEADINGS.DOCUMENT_STYLES"),this._documentLinePalettes=new f("document-line",[],"PANEL_HEADINGS.DOCUMENT_STYLES"),this._palettes=new o.a([]),this._linePalettes=new o.a([]),this.subs=[],this._palettes.getValue().push(this._documentPalette),this._linePalettes.getValue().push(this._documentLinePalettes),this.createPalettes(),this.subs.push(this.getDocumentShapeStyles().subscribe())}return e.prototype.getDocumentPalette=function(){return this._documentPalette},e.prototype.getDocumentLinePalette=function(){return this._documentLinePalettes},e.prototype.getPalattes=function(){return this._palettes},e.prototype.getLinePalattes=function(){return this._linePalettes},e.prototype.createPalettes=function(){this._palettes.getValue().push(this.createMetroPalette()),this._palettes.getValue().push(this.createMetroLinedPalette()),this._palettes.getValue().push(this.createModernMashPalette()),this._palettes.getValue().push(this.createLightPalette()),this._palettes.getValue().push(this.createOutlinedPalette()),this._palettes.getValue().push(this.createDottedPalette()),this._palettes.getValue().push(this.createRetroGradientsPalette()),this._palettes.getValue().push(this.createOfficePalette()),this._palettes.getValue().push(this.createPastelPalette()),this._palettes.getValue().push(this.createTriadPalette()),this._palettes.getValue().push(this.createVintageGradientsPalette()),this._linePalettes.getValue().push(this.createLinesMetroLinedPalette()),this._linePalettes.getValue().push(this.createLinesDottedPalette())},e.prototype.createMetroPalette=function(){var e=[new g.a(2,"#023350",[0,0],1,"#37627A",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#062F44",[0,0],1,"#325364",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#2F8CAE",[0,0],1,"#83C4DC",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#0979A7",[0,0],1,"#5FB2D4",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#54A5AE",[0,0],1,"#6FCFDA",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#2EA3B0",[0,0],1,"#5CCEDB",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#749032",[0,0],1,"#B1C585",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#63712D",[0,0],1,"#9AAC51",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#2F7939",[0,0],1,"#55AA61",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#1F5927",[0,0],1,"#41834A",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#BF9841",[0,0],1,"#F0D18D",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#BB881A",[0,0],1,"#FEBE32",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#4B0C23",[0,0],1,"#A4617A",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#530920",[0,0],1,"#83304A",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#843138",[0,0],1,"#E0626C",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#65171B",[0,0],1,"#CA454D",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#AD6520",[0,0],1,"#F8A85C",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#AC5116",[0,0],1,"#FA8A42",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#B25E72",[0,0],1,"#FA9AB1",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#AE2647",[0,0],1,"#FC6A8D",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#995BA4",[0,0],1,"#D88CE4",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#4D1357",[0,0],1,"#B963C8",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#B9B6B8",[0,0],1,"#E9E4E8",a.h.Solid,void 0,1,"#606060"),new g.a(2,"#585757",[0,0],1,"#BEB4B4",a.h.Solid,void 0,1,"#ffffff"),new g.a(2,"#000000",[0,0],1,"#4D4C4C",a.h.Solid,void 0,1,"#ffffff")];return new f("metro",e,"PANEL_HEADINGS.CREATELY_STYLES")},e.prototype.createMetroLinedPalette=function(){var e=[new g.a(2,"#054F7A",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#054F7A"),new g.a(2,"#08415F",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#08415F"),new g.a(2,"#36ABD6",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#36ABD6"),new g.a(2,"#0995CE",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#0995CE"),new g.a(2,"#63C9D5",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#63C9D5"),new g.a(2,"#34BDCC",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#34BDCC"),new g.a(2,"#92B73E",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#92B73E"),new g.a(2,"#8DA13B",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#8DA13B"),new g.a(2,"#43A047",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#43A047"),new g.a(2,"#2E7D32",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#2E7D32"),new g.a(2,"#F5C457",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#F5C457"),new g.a(2,"#F2AF1D",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#F2AF1D"),new g.a(2,"#83153D",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#83153D"),new g.a(2,"#700C2B",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#700C2B"),new g.a(2,"#D94753",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#D94753"),new g.a(2,"#C0232C",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#C0232C"),new g.a(2,"#F68C27",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#F68C27"),new g.a(2,"#F47421",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#F47421"),new g.a(2,"#ED809A",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#ED809A"),new g.a(2,"#FA4772",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#FA4772"),new g.a(2,"#CC7ADA",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#CC7ADA"),new g.a(2,"#AD3CC1",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#AD3CC1"),new g.a(2,"#E9E4E8",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#606060"),new g.a(2,"#8B8B8B",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#8B8B8B"),new g.a(2,"#2F2F2F",[0,0],1,"#ffffff",a.h.Solid,void 0,1,"#2F2F2F")];return new f("metro-lined",e)},e.prototype.createLightPalette=function(){var e=[new g.a(2,"#EC4A42",[0,0],1,"#FFF1F0",a.h.Solid,void 0,1,"#EC4A42"),new g.a(2,"#FDA906",[0,0],1,"#FFF4DF",a.h.Solid,void 0,1,"#FDA906"),new g.a(2,"#DEB307",[0,0],1,"#FFF6D0",a.h.Solid,void 0,1,"#DEB307"),new g.a(2,"#71BF85",[0,0],1,"#E2FFEA",a.h.Solid,void 0,1,"#71BF85"),new g.a(2,"#2BBC9E",[0,0],1,"#DBFFF8",a.h.Solid,void 0,1,"#2BBC9E"),new g.a(2,"#2D94E4",[0,0],1,"#D8EBFA",a.h.Solid,void 0,1,"#2D94E4"),new g.a(2,"#A275CD",[0,0],1,"#F2E4FF",a.h.Solid,void 0,1,"#A275CD"),new g.a(2,"#BAA88C",[0,0],1,"#FFF6E8",a.h.Solid,void 0,1,"#BAA88C"),new g.a(2,"#CD8B6A",[0,0],1,"#FFEAE0",a.h.Solid,void 0,1,"#CD8B6A"),new g.a(2,"#3D5C83",[0,0],1,"#E3EFFF",a.h.Solid,void 0,1,"#3D5C83"),new g.a(2,"#B2B3B3",[0,0],1,"#F3F3F3",a.h.Solid,void 0,1,"#B2B3B3"),new g.a(2,"#FFE365",[0,0],1,"#FAF6DF",a.h.Solid,void 0,1,"#FFE365")];return new f("light",e)},e.prototype.createOutlinedPalette=function(){var e=[new g.a(2,"#5B0902",[0,0],1,"#EC4A42",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#865903",[0,0],1,"#FDA906",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#995417",[0,0],1,"#FF8C27",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#9E8319",[0,0],1,"#F7CA18",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#417C50",[0,0],1,"#71BF85",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#1C7764",[0,0],1,"#2BBC9E",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#7B8B02",[0,0],1,"#B4CB00",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#145384",[0,0],1,"#2D94E4",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#62477D",[0,0],1,"#A275CD",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#7A6A50",[0,0],1,"#BAA88C",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#834729",[0,0],1,"#CD8B6A",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#516263",[0,0],1,"#94A5A6",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#3E606D",[0,0],1,"#8ED2EB",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#7D5740",[0,0],1,"#F8B48C",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#1C2E44",[0,0],1,"#3D5C83",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#022048",[0,0],1,"#004291",a.h.Solid,void 0,1,"#FFFFFF")];return new f("outlined",e)},e.prototype.createDottedPalette=function(){var e=[new g.a(2,"#054F7A",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#054F7A"),new g.a(2,"#08415F",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#08415F"),new g.a(2,"#36ABD6",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#36ABD6"),new g.a(2,"#0995CE",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#0995CE"),new g.a(2,"#63C9D5",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#63C9D5"),new g.a(2,"#34BDCC",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#34BDCC"),new g.a(2,"#92B73E",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#92B73E"),new g.a(2,"#8DA13B",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#8DA13B"),new g.a(2,"#43A047",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#43A047"),new g.a(2,"#2E7D32",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#2E7D32"),new g.a(2,"#F5C457",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#F5C457"),new g.a(2,"#F2AF1D",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#F2AF1D"),new g.a(2,"#83153D",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#83153D"),new g.a(2,"#700C2B",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#700C2B"),new g.a(2,"#D94753",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#D94753"),new g.a(2,"#C0232C",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#C0232C"),new g.a(2,"#F68C27",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#F68C27"),new g.a(2,"#F47421",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#F47421"),new g.a(2,"#ED809A",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#ED809A"),new g.a(2,"#FA4772",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#FA4772"),new g.a(2,"#CC7ADA",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#CC7ADA"),new g.a(2,"#AD3CC1",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#AD3CC1"),new g.a(2,"#E9E4E8",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#606060"),new g.a(2,"#8B8B8B",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#8B8B8B"),new g.a(2,"#2F2F2F",[3,3],1,"#ffffff",a.h.Solid,void 0,1,"#2F2F2F")];return new f("dotted",e)},e.prototype.createOfficePalette=function(){var e=[new g.a(2,"#0067A0",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#0067A0"),new g.a(2,"#BC2621",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#BC2621"),new g.a(2,"#FF8C27",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#FF8C27"),new g.a(2,"#359B4F",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#359B4F"),new g.a(2,"#AD1A98",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#AD1A98"),new g.a(2,"#AD613B",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#AD613B"),new g.a(2,"#3D5C83",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#3D5C83"),new g.a(2,"#7E8C8D",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#7E8C8D"),new g.a(2,"#8C9B15",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#8C9B15"),new g.a(2,"#23A087",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#23A087"),new g.a(2,"#BBA88A",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#BBA88A"),new g.a(2,"#F7CA18",[0,0],1,"#F2F2F2",a.h.Solid,void 0,1,"#F7CA18")];return new f("office",e)},e.prototype.createPastelPalette=function(){var e=[new g.a(2,"#D58186",[0,0],1,"#EC9FA4",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#6E56AB",[0,0],1,"#9988C4",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#62B7E2",[0,0],1,"#8FD1F3",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#6F8FCD",[0,0],1,"#93ADE1",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#B7C56D",[0,0],1,"#D6E298",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#75B777",[0,0],1,"#96CB97",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#DEB56C",[0,0],1,"#F7CE84",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#D38256",[0,0],1,"#EA9E76",a.h.Solid,void 0,1,"#FFFFFF")];return new f("pastel",e)},e.prototype.createTriadPalette=function(){var e=[new g.a(2,"#355085",[0,0],1,"#FC7563",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#1D8DDB",[0,0],1,"#FDA906",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#9466B0",[0,0],1,"#F5D76E",a.h.Solid,void 0,1,"#9466B0"),new g.a(2,"#866B3E",[0,0],1,"#96C300",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#EA6C00",[0,0],1,"#CEEAD9",a.h.Solid,void 0,1,"#EA6C00"),new g.a(2,"#A606BB",[0,0],1,"#FFCE42",a.h.Solid,void 0,1,"#A606BB"),new g.a(2,"#C96A73",[0,0],1,"#71BF85",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#EA8C75",[0,0],1,"#1C355A",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#DE424D",[0,0],1,"#1053B2",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#4E4E4E",[0,0],1,"#FFE637",a.h.Solid,void 0,1,"#4E4E4E"),new g.a(2,"#FFAB00",[0,0],1,"#A274D0",a.h.Solid,void 0,1,"#FFFFFF"),new g.a(2,"#DE424D",[0,0],1,"#F7D865",a.h.Solid,void 0,1,"#395B84")];return new f("triad",e)},e.prototype.createModernMashPalette=function(){var e=[new g.a(2,"#3D9E53",[0,0],1,void 0,a.h.LinearGradient,{colors:["#46B4B9","#52C36C"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#8235D0",[0,0],1,void 0,a.h.LinearGradient,{colors:["#8317DB","#E05F64"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#F29A53",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FDDE7B","#F0867F"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#5C96D8",[0,0],1,void 0,a.h.LinearGradient,{colors:["#3EE6DD","#5D7BF1"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#BA1027",[0,0],1,void 0,a.h.LinearGradient,{colors:["#D172D3","#E63B63"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#8839CC",[0,0],1,void 0,a.h.LinearGradient,{colors:["#E430CB","#658FF1"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#4496A5",[0,0],1,void 0,a.h.LinearGradient,{colors:["#4AB8A4","#658FF1"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#F8831D",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FACB00","#F04D43","#FACB00"],ratios:[0,.5,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff")];return new f("modern-mash",e)},e.prototype.createRetroGradientsPalette=function(){var e=[new g.a(2,"#EC4A42",[0,0],1,void 0,a.h.LinearGradient,{colors:["#F78177","#EC4A42"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#C43731",[0,0],1,void 0,a.h.LinearGradient,{colors:["#E4685F","#C43731"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#FDA906",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFD40E","#FDA906"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#FF8C27",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFC050","#FF8C27"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#F7CA18",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FCE735","#F7CA18"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#71BF85",[0,0],1,void 0,a.h.LinearGradient,{colors:["#A9E1BB","#71BF85"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#359B4F",[0,0],1,void 0,a.h.LinearGradient,{colors:["#5EBA76","#359B4F"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#2BBC9E",[0,0],1,void 0,a.h.LinearGradient,{colors:["#56DFCD","#2BBC9E"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#23A087",[0,0],1,void 0,a.h.LinearGradient,{colors:["#49CEBC","#23A087"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#B4CB00",[0,0],1,void 0,a.h.LinearGradient,{colors:["#DBE700","#B4CB00"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#8C9B15",[0,0],1,void 0,a.h.LinearGradient,{colors:["#C0CB2E","#8C9B15"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#2D94E4",[0,0],1,void 0,a.h.LinearGradient,{colors:["#59C6F3","#2D94E4"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#004291",[0,0],1,void 0,a.h.LinearGradient,{colors:["#5C8FCC","#004291"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#A275CD",[0,0],1,void 0,a.h.LinearGradient,{colors:["#CFADE8","#A275CD"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#AD1A98",[0,0],1,void 0,a.h.LinearGradient,{colors:["#DE61CC","#AD1A98"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#BAA88C",[0,0],1,void 0,a.h.LinearGradient,{colors:["#DED3C0","#BAA88C"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#AD613B",[0,0],1,void 0,a.h.LinearGradient,{colors:["#D69A6D","#AD613B"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#3D5C83",[0,0],1,void 0,a.h.LinearGradient,{colors:["#7095B9","#3D5C83"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#354860",[0,0],1,void 0,a.h.LinearGradient,{colors:["#657E99","#354860"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff"),new g.a(2,"#7E8C8D",[0,0],1,void 0,a.h.LinearGradient,{colors:["#B5C0C1","#7E8C8D"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#ffffff")];return new f("retro-gradients",e)},e.prototype.createVintageGradientsPalette=function(){var e=[new g.a(2,"#EC4A42",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#FFB3AF"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#EC4A42"),new g.a(2,"#FDA906",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#FFDB96"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#FDA906"),new g.a(2,"#FF8C27",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#FFC898"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#FF8C27"),new g.a(2,"#F7CA18",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#FFE684"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#F7CA18"),new g.a(2,"#71BF85",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#A4E1B4"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#71BF85"),new g.a(2,"#359B4F",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#72D98C"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#359B4F"),new g.a(2,"#2BBC9E",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#6AE4CB"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#2BBC9E"),new g.a(2,"#B4CB00",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#DEED6A"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#B4CB00"),new g.a(2,"#8C9B15",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#C2CE64"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#8C9B15"),new g.a(2,"#2D94E4",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#98C6EA"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#2D94E4"),new g.a(2,"#004291",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#84ACDD"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#004291"),new g.a(2,"#A275CD",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#C9ABE7"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#A275CD"),new g.a(2,"#AD1A98",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#E1A6D8"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#AD1A98"),new g.a(2,"#FFADAC",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#FFE0E1"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#FFADAC"),new g.a(2,"#BAA88C",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#D5CBBA"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#BAA88C"),new g.a(2,"#AD613B",[0,0],1,void 0,a.h.LinearGradient,{colors:["#FFFFFF","#D9AC96"],ratios:[0,1],x0:.5,y0:0,x1:.5,y1:.9},1,"#AD613B")];return new f("vintage-gradients",e)},e.prototype.createLinesMetroLinedPalette=function(){var e=[new d.a(2,"#C43731",[0,0],1),new d.a(2,"#FF8C27",[0,0],1),new d.a(2,"#F7CA18",[0,0],1),new d.a(2,"#359B4F",[0,0],1),new d.a(2,"#2BBC9E",[0,0],1),new d.a(2,"#23A087",[0,0],1),new d.a(2,"#B4CB00",[0,0],1),new d.a(2,"#8C9B15",[0,0],1),new d.a(2,"#2D94E4",[0,0],1),new d.a(2,"#004291",[0,0],1),new d.a(2,"#A275CD",[0,0],1),new d.a(2,"#AD1A98",[0,0],1),new d.a(2,"#D4C6B2",[0,0],1),new d.a(2,"#BAA88C",[0,0],1),new d.a(2,"#354860",[0,0],1),new d.a(2,"#BCC3C6",[0,0],1)];return new f("lines-metro-lined",e,"PANEL_HEADINGS.CREATELY_STYLES")},e.prototype.createLinesDottedPalette=function(){var e=[new d.a(2,"#C43731",[3,3],1),new d.a(2,"#FF8C27",[3,3],1),new d.a(2,"#F7CA18",[3,3],1),new d.a(2,"#359B4F",[3,3],1),new d.a(2,"#2BBC9E",[3,3],1),new d.a(2,"#23A087",[3,3],1),new d.a(2,"#B4CB00",[3,3],1),new d.a(2,"#8C9B15",[3,3],1),new d.a(2,"#2D94E4",[3,3],1),new d.a(2,"#004291",[3,3],1),new d.a(2,"#A275CD",[3,3],1),new d.a(2,"#AD1A98",[3,3],1),new d.a(2,"#BAA88C",[3,3],1),new d.a(2,"#AD613B",[3,3],1),new d.a(2,"#3D5C83",[3,3],1),new d.a(2,"#7E8C8D",[3,3],1)];return new f("lines-dotted",e)},e.prototype.getPalatte=function(e){return this._palettes.getValue().find((function(t){return t.paletteId===e}))},e.prototype.getPalatteByName=function(e){return this._palettes.getValue().find((function(t){return t.name===e}))},e.prototype.getStyle=function(e){var t,n,i=this._palettes.getValue().concat(this._linePalettes.getValue());try{for(var a=Object(r.k)(i),o=a.next();!o.done;o=a.next()){var s=o.value.styles.find((function(t){return t.styleId===e}));if(s)return s}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e.prototype.getDiagramDistinctStyles=function(e){var t=[],n=[];return e.forEach((function(e){if(e.style){var r=e.previewTextModel;r&&(e.style.textColor=r.content[0].color),n.includes(e.style.styleId)||(n.push(e.style.styleId),t.push(e.style))}})),t},e.prototype.getDocumentChanges=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(c.a)((function(t){return Object(s.a)(t.getDiagramOnce(),t.getDiagramChanges().pipe(Object(l.a)((function(t){return e.hasStyleChanges(t)})),Object(u.a)((function(e){return e.model}))))})))},e.prototype.hasStyleChanges=function(e){if(e.added&&e.added.length)return!0;if(e.split.shapes&&Object.keys(e.split.shapes).length)for(var t in e.split.shapes)if(e.split.shapes.hasOwnProperty(t)){if(e.modifier.$unset&&e.modifier.$unset["shapes."+t])return!0;var n=e.split.shapes[t];if(i.hb.hasChanges(n,"style"))return!0;if(i.hb.hasChanges(n,"texts"))return!0}return!1},e.prototype.getDocumentShapeStyles=function(){var e=this;return this.getDocumentChanges().pipe(Object(p.a)((function(t){var n=t.getShapes([a.r.Basic]);n=n.filter((function(e){return e.isStyleEnabledShape()}));var r=e.getDiagramDistinctStyles(n);e._documentPalette.styles=r,e._palettes.next(e._palettes.getValue());var i=t.getShapes([a.r.Connector]);e._documentLinePalettes.styles=e.getDiagramDistinctStyles(i),e._linePalettes.next(e._linePalettes.getValue())})))},e.\u0275fac=function(t){return new(t||e)(m.pc(h.a))},e.\u0275prov=m.bc({token:e,factory:e.\u0275fac}),e}()},cs9O:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("X0jn"),a=function(e){function t(t,n){var r=e.call(this,t,n)||this;if(n!==i.r.Basic&&n!==i.r.Dynamic&&n!==i.r.Image&&n!==i.r.Freehand&&n!==i.r.EData)throw new Error("ShapeDisplayView cannot be created with "+n+" shape type.");return r}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"isShapeView",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnectorView",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getCursor=function(e){return{cursor:"default",tail:null,type:"css",viewingArea:"app"}},t}(n("deqJ").a)},"d+30":function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e?n.lookupProperty(e,t):e}))},e.exports=t.default},dFmy:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("19Zn"),i=n("YtkY"),a=n("xVbo"),o=n("J+dc"),s=n("SBw3"),c=n("5xGT"),l=n("ROBh"),u=n("QoSw"),p=n("EM62"),h=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n,this.toogleableStyles=["bold","italic","underline","strikeout","align"],this.sanSerifFonts=["arial","helvetica","sans-serif"],this.serifFonts=["Times New Roman","Courier New","Courier","Georgia","serif"],this.textFormatter=new r.F}return e.prototype.getFeatureData=function(e,t){var n=this,r=this.featureList.getFeature(e),a=this.state.get("Selected"),o=this.state.get("InnerShapeSelection");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(i.a)((function(e){var i=e.getCommonTextStyles(a,o),s=n.getUIData(r.data,t,i);return s.validation=r.data.validation,s.readOnly=r.data.readOnly,s})))},e.prototype.getApplyData=function(e,t){var n=this.featureList.getFeature(e),r={};this.toogleableStyles.includes(n.data.style)?r[n.data.style]=n.data.value:r[n.data.style]=t.value;var s={format:{"*":{indexStart:0,styles:r}}};return this.state.get("EditingText").open?this.state.changes("EditingText").pipe(Object(a.a)((function(e){return!e.open})),Object(o.a)(1),Object(i.a)((function(){return s}))):Object(l.a)(s)},e.prototype.getUIData=function(e,t,n){if("align"===e.style)t.value=n.align===e.value;else if("font"===e.style){var r=n[e.style];this.sanSerifFonts.includes(r)?r="sans_serif":this.serifFonts.includes(r)&&(r="serif"),t=this.updateOptionData(t,r)}else t=this.updateOptionData(t,n[e.style])||{value:n[e.style]};return t},e.prototype.updateOptionData=function(e,t){if(e&&e.data){var n=e.data;n.forEach((function(e){return e.selected=!1}));var r=n.find((function(e){return""+e.id==""+t}));if(r||void 0===t)r&&(r.selected=!0);else{var i=n.find((function(e){return e.custom}));i?(i.id=t,i.label=t,i.buttonLabel=t,i.value=t,i.selected=!0):n.push({id:t,label:t,buttonLabel:t,value:t,custom:!0,selected:!0})}return{value:n}}},e.\u0275fac=function(t){return new(t||e)(p.pc(u.a),p.pc(c.Ib),p.pc(s.a))},e.\u0275prov=p.bc({token:e,factory:e.\u0275fac}),e}()},deqJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("h1tj"),a=function(e){function t(t,n){var r=e.call(this)||this;return r._type=n,r.name=t,r}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.prototype.getCursor=function(e){return null},t.prototype.convertToCursorDrawable=function(e){var t=this;e.getCursor=function(e){return t.getCursor(e)}},t}(i.Container)},dnLt:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("XVEb"),a=n("0KrK"),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new o.default("Must pass iterator to #each");var n,r=t.fn,a=t.inverse,s=0,c="",l=void 0,u=void 0;function p(t,n,a){l&&(l.key=t,l.index=n,l.first=0===n,l.last=!!a,u&&(l.contextPath=u+t)),c+=r(e[t],{data:l,blockParams:i.blockParams([e[t],t],[u+t,null])})}if(t.data&&t.ids&&(u=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(l=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var h=e.length;s<h;s++)s in e&&p(s,s,s===e.length-1);else if(global.Symbol&&e[global.Symbol.iterator]){for(var d=[],f=e[global.Symbol.iterator](),g=f.next();!g.done;g=f.next())d.push(g.value);for(h=(e=d).length;s<h;s++)p(s,s,s===e.length-1)}else n=void 0,Object.keys(e).forEach((function(e){void 0!==n&&p(n,s-1),n=e,s++})),void 0!==n&&p(n,s-1,!0);return 0===s&&(c=a(this)),c}))},e.exports=t.default},eIBf:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("C05f"),a=n("IGWl"),o=n("EM62"),s=n("2kYt"),c=n("g5Ym");function l(e,t){if(1&e&&(o.wc(),o.lc(0,"svg",7),o.gc(1,"use"),o.kc()),2&e){var n=o.xc().ngIf;o.Sb(1),o.Tb("href",n,null,"xlink")}}function u(e,t){if(1&e&&o.gc(0,"static-image",8),2&e){var n=o.xc().ngIf;o.Cc("enableHover",!0)("value",n)("width",70)("height",20)}}function p(e,t){if(1&e){var n=o.mc();o.lc(0,"button",3,4),o.tc("click",(function(){o.Pc(n);var e=o.xc();return e._change.next(e._data)})),o.cd(2,l,2,1,"svg",5),o.cd(3,u,1,4,"static-image",6),o.kc()}if(2&e){var r=t.ngIf;o.Sb(2),o.Cc("ngIf",r),o.Sb(1),o.Cc("ngIf",r)}}function h(e,t){if(1&e){var n=o.mc();o.lc(0,"a",9),o.tc("click",(function(){o.Pc(n);var e=o.xc();return e._change.next(e._data)})),o.ed(1),o.yc(2,"async"),o.kc()}if(2&e){var r=o.xc();o.Sb(1),o.gd(" ",o.zc(2,1,r.labelSource)," ")}}var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelSource=new i.a(""),t}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return this._props?this._props.label:null},enumerable:!1,configurable:!0}),t.prototype.apply=function(){e.prototype.apply.call(this),this._props.label&&this.labelSource.next(this._props.label)},t.\u0275fac=function(e){return f(e||t)},t.\u0275cmp=o.Zb({type:t,selectors:[["rich-button"]],features:[o.Pb],decls:4,vars:4,consts:[[1,"rich-button-container"],["class","nu-btn-icon",3,"click",4,"ngIf"],["class","toolbar-dd-item-label",3,"click",4,"ngIf"],[1,"nu-btn-icon",3,"click"],["btn",""],["class","nu-icon nu-ic-text",4,"ngIf"],["type","svg",3,"enableHover","value","width","height",4,"ngIf"],[1,"nu-icon","nu-ic-text"],["type","svg",3,"enableHover","value","width","height"],[1,"toolbar-dd-item-label",3,"click"]],template:function(e,t){1&e&&(o.lc(0,"div",0),o.cd(1,p,4,2,"button",1),o.yc(2,"async"),o.cd(3,h,3,3,"a",2),o.kc()),2&e&&(o.Sb(1),o.Cc("ngIf",o.zc(2,2,t.iconSource)),o.Sb(2),o.Cc("ngIf",t.label))},directives:[s.t,c.a],pipes:[s.b],styles:[""],changeDetection:0}),t}(a.a),f=o.nc(d)},eJth:function(e,t,n){e.exports=n.p+"0.42917592df223145c95e.worker.js"},eQvJ:function(e,t,n){var r=n("1NHC"),i=n("a+rc"),a=n("/J21"),o=n("sfKy"),s=n("39iF"),c=n("oFOz"),l=n("j0Im");t.AVEDEV=function(){var e=o.flatten(arguments),t=e.filter(o.isDefined);if(0===t.length)return c.num;var n=o.parseNumberArray(t);return n instanceof Error?n:a.sum(a(n).subtract(a.mean(n)).abs()[0])/n.length},t.AVERAGE=function(){var e=o.flatten(arguments),t=e.filter(o.isDefined);if(0===t.length)return c.div0;var n=o.anyError.apply(void 0,t);if(n)return n;for(var r,i=o.numbers(t),a=i.length,s=0,l=0,u=0;u<a;u++)s+=i[u],l+=1;return r=s/l,isNaN(r)&&(r=c.num),r},t.AVERAGEA=function(){var e=o.flatten(arguments),t=e.filter(o.isDefined);if(0===t.length)return c.div0;var n=o.anyError.apply(void 0,t);if(n)return n;for(var r,i=t,a=i.length,s=0,l=0,u=0;u<a;u++){var p=i[u];"number"==typeof p&&(s+=p),!0===p&&s++,null!==p&&l++}return r=s/l,isNaN(r)&&(r=c.num),r},t.AVERAGEIF=function(e,t,n){if(arguments.length<=1)return c.na;n=n||e;var r=o.flatten(n),i=r.filter(o.isDefined);if(n=o.parseNumberArray(i),e=o.flatten(e),n instanceof Error)return n;for(var a=0,l=0,u=void 0===t||"*"===t,p=u?null:s.parse(t+""),h=0;h<e.length;h++){var d=e[h];if(u)l+=n[h],a++;else{var f=[s.createToken(d,s.TOKEN_TYPE_LITERAL)].concat(p);s.compute(f)&&(l+=n[h],a++)}}return l/a},t.AVERAGEIFS=function(){for(var e=o.argsToArray(arguments),t=(e.length-1)/2,n=o.flatten(e[0]),r=0,i=0,a=0;a<n.length;a++){for(var c=!1,l=0;l<t;l++){var u=e[2*l+1][a],p=e[2*l+2],h=void 0===p||"*"===p,d=!1;if(h)d=!0;else{var f=s.parse(p+""),g=[s.createToken(u,s.TOKEN_TYPE_LITERAL)].concat(f);d=s.compute(g)}if(!d){c=!1;break}c=!0}c&&(i+=n[a],r++)}var m=i/r;return isNaN(m)?0:m},t.BETA={},t.BETA.DIST=function(e,t,n,r,i,s){return arguments.length<4?c.value:(i=void 0===i?0:i,s=void 0===s?1:s,e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),i=o.parseNumber(i),s=o.parseNumber(s),o.anyIsError(e,t,n,i,s)?c.value:(e=(e-i)/(s-i),r?a.beta.cdf(e,t,n):a.beta.pdf(e,t,n)))},t.BETA.INV=function(e,t,n,r,i){return r=void 0===r?0:r,i=void 0===i?1:i,e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),r=o.parseNumber(r),i=o.parseNumber(i),o.anyIsError(e,t,n,r,i)?c.value:a.beta.inv(e,t,n)*(i-r)+r},t.BINOM={},t.BINOM.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),r=o.parseNumber(r),o.anyIsError(e,t,n,r)?c.value:r?a.binomial.cdf(e,t,n):a.binomial.pdf(e,t,n)},t.BINOM.DIST.RANGE=function(e,t,n,i){if(i=void 0===i?n:i,e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),i=o.parseNumber(i),o.anyIsError(e,t,n,i))return c.value;for(var a=0,s=n;s<=i;s++)a+=r.COMBIN(e,s)*Math.pow(t,s)*Math.pow(1-t,e-s);return a},t.BINOM.INV=function(e,t,n){if(e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n))return c.value;for(var r=0;r<=e;){if(a.binomial.cdf(r,e,t)>=n)return r;r++}},t.CHISQ={},t.CHISQ.DIST=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:n?a.chisquare.cdf(e,t):a.chisquare.pdf(e,t)},t.CHISQ.DIST.RT=function(e,t){return!e|!t?c.na:e<1||t>Math.pow(10,10)?c.num:"number"!=typeof e||"number"!=typeof t?c.value:1-a.chisquare.cdf(e,t)},t.CHISQ.INV=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:a.chisquare.inv(e,t)},t.CHISQ.INV.RT=function(e,t){return!e|!t?c.na:e<0||e>1||t<1||t>Math.pow(10,10)?c.num:"number"!=typeof e||"number"!=typeof t?c.value:a.chisquare.inv(1-e,t)},t.CHISQ.TEST=function(e,t){if(2!==arguments.length)return c.na;if(!(e instanceof Array&&t instanceof Array))return c.value;if(e.length!==t.length)return c.value;if(e[0]&&t[0]&&e[0].length!==t[0].length)return c.value;var n,r,i,a=e.length;for(r=0;r<a;r++)e[r]instanceof Array||(n=e[r],e[r]=[],e[r].push(n)),t[r]instanceof Array||(n=t[r],t[r]=[],t[r].push(n));var o=e[0].length,s=1===o?a-1:(a-1)*(o-1),l=0,u=Math.PI;for(r=0;r<a;r++)for(i=0;i<o;i++)l+=Math.pow(e[r][i]-t[r][i],2)/t[r][i];function p(e,t){var n=Math.exp(-.5*e);t%2==1&&(n*=Math.sqrt(2*e/u));for(var r=t;r>=2;)n=n*e/r,r-=2;for(var i=n,a=t;i>1e-10*n;)n+=i=i*e/(a+=2);return 1-n}return Math.round(1e6*p(l,s))/1e6},t.COLUMN=function(e,t){return 2!==arguments.length?c.na:t<0?c.num:e instanceof Array&&"number"==typeof t?0!==e.length?a.col(e,t):void 0:c.value},t.COLUMNS=function(e){return 1!==arguments.length?c.na:e instanceof Array?0===e.length?0:a.cols(e):c.value},t.CONFIDENCE={},t.CONFIDENCE.NORM=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:a.normalci(1,e,t,n)[1]-1},t.CONFIDENCE.T=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:a.tci(1,e,t,n)[1]-1},t.CORREL=function(e,t){return e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t)?c.value:a.corrcoeff(e,t)},t.COUNT=function(){var e=o.flatten(arguments);return o.numbers(e).length},t.COUNTA=function(){var e=o.flatten(arguments);return e.length-t.COUNTBLANK(e)},t.COUNTIN=function(e,t){var n=0;e=o.flatten(e);for(var r=0;r<e.length;r++)e[r]===t&&n++;return n},t.COUNTBLANK=function(){for(var e,t=o.flatten(arguments),n=0,r=0;r<t.length;r++)null!=(e=t[r])&&""!==e||n++;return n},t.COUNTIF=function(e,t){if(e=o.flatten(e),void 0===t||"*"===t)return e.length;for(var n=0,r=s.parse(t+""),i=0;i<e.length;i++){var a=e[i],c=[s.createToken(a,s.TOKEN_TYPE_LITERAL)].concat(r);s.compute(c)&&n++}return n},t.COUNTIFS=function(){for(var e=o.argsToArray(arguments),t=new Array(o.flatten(e[0]).length),n=0;n<t.length;n++)t[n]=!0;for(n=0;n<e.length;n+=2){var r=o.flatten(e[n]),i=e[n+1],a=void 0===i||"*"===i;if(!a)for(var c=s.parse(i+""),l=0;l<r.length;l++){var u=r[l],p=[s.createToken(u,s.TOKEN_TYPE_LITERAL)].concat(c);t[l]=t[l]&&s.compute(p)}}var h=0;for(n=0;n<t.length;n++)t[n]&&h++;return h},t.COUNTUNIQUE=function(){return l.UNIQUE.apply(null,o.flatten(arguments)).length},t.COVARIANCE={},t.COVARIANCE.P=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var n=a.mean(e),r=a.mean(t),i=0,s=e.length,l=0;l<s;l++)i+=(e[l]-n)*(t[l]-r);return i/s},t.COVARIANCE.S=function(e,t){return e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t)?c.value:a.covariance(e,t)},t.DEVSQ=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t=a.mean(e),n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},t.EXPON={},t.EXPON.DIST=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:n?a.exponential.cdf(e,t):a.exponential.pdf(e,t)},t.F={},t.F.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:r?a.centralF.cdf(e,t,n):a.centralF.pdf(e,t,n)},t.F.DIST.RT=function(e,t,n){return 3!==arguments.length?c.na:e<0||t<1||n<1?c.num:"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?c.value:1-a.centralF.cdf(e,t,n)},t.F.INV=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:e<=0||e>1?c.num:a.centralF.inv(e,t,n)},t.F.INV.RT=function(e,t,n){return 3!==arguments.length?c.na:e<0||e>1||t<1||t>Math.pow(10,10)||n<1||n>Math.pow(10,10)?c.num:"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?c.value:a.centralF.inv(1-e,t,n)},t.F.TEST=function(e,t){if(!e||!t)return c.na;if(!(e instanceof Array&&t instanceof Array))return c.na;if(e.length<2||t.length<2)return c.div0;var n=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t,2);return n},i=r.SUM(e)/e.length,a=r.SUM(t)/t.length;return n(e,i)/(e.length-1)/(n(t,a)/(t.length-1))},t.FISHER=function(e){return(e=o.parseNumber(e))instanceof Error?e:Math.log((1+e)/(1-e))/2},t.FISHERINV=function(e){if((e=o.parseNumber(e))instanceof Error)return e;var t=Math.exp(2*e);return(t-1)/(t+1)},t.FORECAST=function(e,t,n){if(e=o.parseNumber(e),t=o.parseNumberArray(o.flatten(t)),n=o.parseNumberArray(o.flatten(n)),o.anyIsError(e,t,n))return c.value;for(var r=a.mean(n),i=a.mean(t),s=n.length,l=0,u=0,p=0;p<s;p++)l+=(n[p]-r)*(t[p]-i),u+=Math.pow(n[p]-r,2);var h=l/u;return i-h*r+h*e},t.FREQUENCY=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var n=e.length,r=t.length,i=[],a=0;a<=r;a++){i[a]=0;for(var s=0;s<n;s++)0===a?e[s]<=t[0]&&(i[0]+=1):a<r?e[s]>t[a-1]&&e[s]<=t[a]&&(i[a]+=1):a===r&&e[s]>t[r-1]&&(i[r]+=1)}return i},t.GAMMA=function(e){return(e=o.parseNumber(e))instanceof Error?e:0===e||parseInt(e,10)===e&&e<0?c.num:a.gammafn(e)},t.GAMMA.DIST=function(e,t,n,r){return 4!==arguments.length?c.na:e<0||t<=0||n<=0||"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?c.value:r?a.gamma.cdf(e,t,n,!0):a.gamma.pdf(e,t,n,!1)},t.GAMMA.INV=function(e,t,n){return 3!==arguments.length?c.na:e<0||e>1||t<=0||n<=0?c.num:"number"!=typeof e||"number"!=typeof t||"number"!=typeof n?c.value:a.gamma.inv(e,t,n)},t.GAMMALN=function(e){return(e=o.parseNumber(e))instanceof Error?e:a.gammaln(e)},t.GAMMALN.PRECISE=function(e){return 1!==arguments.length?c.na:e<=0?c.num:"number"!=typeof e?c.value:a.gammaln(e)},t.GAUSS=function(e){return(e=o.parseNumber(e))instanceof Error?e:a.normal.cdf(e,0,1)-.5},t.GEOMEAN=function(){var e=o.parseNumberArray(o.flatten(arguments));return e instanceof Error?e:a.geomean(e)},t.GROWTH=function(e,t,n,r){if((e=o.parseNumberArray(e))instanceof Error)return e;var i;if(void 0===t)for(t=[],i=1;i<=e.length;i++)t.push(i);if(void 0===n)for(n=[],i=1;i<=e.length;i++)n.push(i);if(t=o.parseNumberArray(t),n=o.parseNumberArray(n),o.anyIsError(t,n))return c.value;void 0===r&&(r=!0);var a,s,l=e.length,u=0,p=0,h=0,d=0;for(i=0;i<l;i++){var f=t[i],g=Math.log(e[i]);u+=f,p+=g,h+=f*g,d+=f*f}u/=l,p/=l,h/=l,d/=l,r?s=p-(a=(h-u*p)/(d-u*u))*u:(a=h/d,s=0);var m=[];for(i=0;i<n.length;i++)m.push(Math.exp(s+a*n[i]));return m},t.HARMEAN=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t=e.length,n=0,r=0;r<t;r++)n+=1/e[r];return t/n},t.HYPGEOM={},t.HYPGEOM.DIST=function(e,t,n,i,a){if(e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),i=o.parseNumber(i),o.anyIsError(e,t,n,i))return c.value;function s(e,t,n,i){return r.COMBIN(n,e)*r.COMBIN(i-n,t-e)/r.COMBIN(i,t)}return a?function(e,t,n,r){for(var i=0,a=0;a<=e;a++)i+=s(a,t,n,r);return i}(e,t,n,i):s(e,t,n,i)},t.INTERCEPT=function(e,n){return e=o.parseNumberArray(e),n=o.parseNumberArray(n),o.anyIsError(e,n)?c.value:e.length!==n.length?c.na:t.FORECAST(0,e,n)},t.KURT=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t=a.mean(e),n=e.length,r=0,i=0;i<n;i++)r+=Math.pow(e[i]-t,4);return n*(n+1)/((n-1)*(n-2)*(n-3))*(r/=Math.pow(a.stdev(e,!0),4))-3*(n-1)*(n-1)/((n-2)*(n-3))},t.LARGE=function(e,t){return e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),o.anyIsError(e,t)?e:t<0||e.length<t?c.value:e.sort((function(e,t){return t-e}))[t-1]},t.LINEST=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var n=a.mean(e),r=a.mean(t),i=t.length,s=0,l=0,u=0;u<i;u++)s+=(t[u]-r)*(e[u]-n),l+=Math.pow(t[u]-r,2);var p=s/l;return[p,n-p*r]},t.LOGEST=function(e,n){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumberArray(o.flatten(n)),o.anyIsError(e,n))return c.value;for(var r=0;r<e.length;r++)e[r]=Math.log(e[r]);var i=t.LINEST(e,n);return i[0]=Math.round(1e6*Math.exp(i[0]))/1e6,i[1]=Math.round(1e6*Math.exp(i[1]))/1e6,i},t.LOGNORM={},t.LOGNORM.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:r?a.lognormal.cdf(e,t,n):a.lognormal.pdf(e,t,n)},t.LOGNORM.INV=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:a.lognormal.inv(e,t,n)},t.MAX=function(){var e=o.flatten(arguments),t=o.anyError.apply(void 0,e);if(t)return t;var n=o.numbers(e);return 0===n.length?0:Math.max.apply(Math,n)},t.MAXA=function(){var e=o.flatten(arguments),t=o.anyError.apply(void 0,e);if(t)return t;var n=o.arrayValuesToNumbers(e);return 0===(n=n.map((function(e){return null==e?0:e}))).length?0:Math.max.apply(Math,n)},t.MEDIAN=function(){var e=o.flatten(arguments),t=o.anyError.apply(void 0,e);if(t)return t;var n=o.arrayValuesToNumbers(e),r=a.median(n);return isNaN(r)&&(r=c.num),r},t.MIN=function(){var e=o.flatten(arguments),t=o.anyError.apply(void 0,e);if(t)return t;var n=o.numbers(e);return 0===n.length?0:Math.min.apply(Math,n)},t.MINA=function(){var e=o.flatten(arguments),t=o.anyError.apply(void 0,e);if(t)return t;var n=o.arrayValuesToNumbers(e);return 0===(n=n.map((function(e){return null==e?0:e}))).length?0:Math.min.apply(Math,n)},t.MODE={},t.MODE.MULT=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t,n=e.length,r={},i=[],a=0,s=0;s<n;s++)r[t=e[s]]=r[t]?r[t]+1:1,r[t]>a&&(a=r[t],i=[]),r[t]===a&&(i[i.length]=t);return i},t.MODE.SNGL=function(){var e=o.parseNumberArray(o.flatten(arguments));return e instanceof Error?e:t.MODE.MULT(e).sort((function(e,t){return e-t}))[0]},t.NEGBINOM={},t.NEGBINOM.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:r?a.negbin.cdf(e,t,n):a.negbin.pdf(e,t,n)},t.NORM={},t.NORM.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:n<=0?c.num:r?a.normal.cdf(e,t,n):a.normal.pdf(e,t,n)},t.NORM.INV=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:a.normal.inv(e,t,n)},t.NORM.S={},t.NORM.S.DIST=function(e,t){return(e=o.parseNumber(e))instanceof Error?c.value:t?a.normal.cdf(e,0,1):a.normal.pdf(e,0,1)},t.NORM.S.INV=function(e){return(e=o.parseNumber(e))instanceof Error?c.value:a.normal.inv(e,0,1)},t.PEARSON=function(e,t){if(t=o.parseNumberArray(o.flatten(t)),e=o.parseNumberArray(o.flatten(e)),o.anyIsError(t,e))return c.value;for(var n=a.mean(e),r=a.mean(t),i=e.length,s=0,l=0,u=0,p=0;p<i;p++)s+=(e[p]-n)*(t[p]-r),l+=Math.pow(e[p]-n,2),u+=Math.pow(t[p]-r,2);return s/Math.sqrt(l*u)},t.PERCENTILE={},t.PERCENTILE.EXC=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),o.anyIsError(e,t))return c.value;var n=(e=e.sort((function(e,t){return e-t}))).length;if(t<1/(n+1)||t>1-1/(n+1))return c.num;var r=t*(n+1)-1,i=Math.floor(r);return o.cleanFloat(r===i?e[r]:e[i]+(r-i)*(e[i+1]-e[i]))},t.PERCENTILE.INC=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),o.anyIsError(e,t))return c.value;var n=t*((e=e.sort((function(e,t){return e-t}))).length-1),r=Math.floor(n);return o.cleanFloat(n===r?e[n]:e[r]+(n-r)*(e[r+1]-e[r]))},t.PERCENTRANK={},t.PERCENTRANK.EXC=function(e,t,n){if(n=void 0===n?3:n,e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n))return c.value;e=e.sort((function(e,t){return e-t}));for(var r=l.UNIQUE.apply(null,e),i=e.length,a=r.length,s=Math.pow(10,n),u=0,p=!1,h=0;!p&&h<a;)t===r[h]?(u=(e.indexOf(r[h])+1)/(i+1),p=!0):t>=r[h]&&(t<r[h+1]||h===a-1)&&(u=(e.indexOf(r[h])+1+(t-r[h])/(r[h+1]-r[h]))/(i+1),p=!0),h++;return Math.floor(u*s)/s},t.PERCENTRANK.INC=function(e,t,n){if(n=void 0===n?3:n,e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n))return c.value;e=e.sort((function(e,t){return e-t}));for(var r=l.UNIQUE.apply(null,e),i=e.length,a=r.length,s=Math.pow(10,n),u=0,p=!1,h=0;!p&&h<a;)t===r[h]?(u=e.indexOf(r[h])/(i-1),p=!0):t>=r[h]&&(t<r[h+1]||h===a-1)&&(u=(e.indexOf(r[h])+(t-r[h])/(r[h+1]-r[h]))/(i-1),p=!0),h++;return Math.floor(u*s)/s},t.PERMUT=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:r.FACT(e)/r.FACT(e-t)},t.PERMUTATIONA=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:Math.pow(e,t)},t.PHI=function(e){return(e=o.parseNumber(e))instanceof Error?c.value:Math.exp(-.5*e*e)/2.5066282746310002},t.POISSON={},t.POISSON.DIST=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:n?a.poisson.cdf(e,t):a.poisson.pdf(e,t)},t.PROB=function(e,t,n,r){if(void 0===n)return 0;if(r=void 0===r?n:r,e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),n=o.parseNumber(n),r=o.parseNumber(r),o.anyIsError(e,t,n,r))return c.value;if(n===r)return e.indexOf(n)>=0?t[e.indexOf(n)]:0;for(var i=e.sort((function(e,t){return e-t})),a=i.length,s=0,l=0;l<a;l++)i[l]>=n&&i[l]<=r&&(s+=t[e.indexOf(i[l])]);return s},t.QUARTILE={},t.QUARTILE.EXC=function(e,n){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumber(n),o.anyIsError(e,n))return c.value;switch(n){case 1:return t.PERCENTILE.EXC(e,.25);case 2:return t.PERCENTILE.EXC(e,.5);case 3:return t.PERCENTILE.EXC(e,.75);default:return c.num}},t.QUARTILE.INC=function(e,n){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumber(n),o.anyIsError(e,n))return c.value;switch(n){case 1:return t.PERCENTILE.INC(e,.25);case 2:return t.PERCENTILE.INC(e,.5);case 3:return t.PERCENTILE.INC(e,.75);default:return c.num}},t.RANK={},t.RANK.AVG=function(e,t,n){if(e=o.parseNumber(e),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var r=(n=n||!1)?function(e,t){return e-t}:function(e,t){return t-e},i=(t=(t=o.flatten(t)).sort(r)).length,a=0,s=0;s<i;s++)t[s]===e&&a++;return a>1?(2*t.indexOf(e)+a+1)/2:t.indexOf(e)+1},t.RANK.EQ=function(e,t,n){if(e=o.parseNumber(e),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;var r=(n=n||!1)?function(e,t){return e-t}:function(e,t){return t-e};return(t=t.sort(r)).indexOf(e)+1},t.ROW=function(e,t){return 2!==arguments.length?c.na:t<0?c.num:e instanceof Array&&"number"==typeof t?0!==e.length?a.row(e,t):void 0:c.value},t.ROWS=function(e){return 1!==arguments.length?c.na:e instanceof Array?0===e.length?0:a.rows(e):c.value},t.RSQ=function(e,n){return e=o.parseNumberArray(o.flatten(e)),n=o.parseNumberArray(o.flatten(n)),o.anyIsError(e,n)?c.value:Math.pow(t.PEARSON(e,n),2)},t.SKEW=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t=a.mean(e),n=e.length,r=0,i=0;i<n;i++)r+=Math.pow(e[i]-t,3);return n*r/((n-1)*(n-2)*Math.pow(a.stdev(e,!0),3))},t.SKEW.P=function(){var e=o.parseNumberArray(o.flatten(arguments));if(e instanceof Error)return e;for(var t=a.mean(e),n=e.length,r=0,i=0,s=0;s<n;s++)i+=Math.pow(e[s]-t,3),r+=Math.pow(e[s]-t,2);return r/=n,(i/=n)/Math.pow(r,1.5)},t.SLOPE=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var n=a.mean(t),r=a.mean(e),i=t.length,s=0,l=0,u=0;u<i;u++)s+=(t[u]-n)*(e[u]-r),l+=Math.pow(t[u]-n,2);return s/l},t.SMALL=function(e,t){return e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),o.anyIsError(e,t)?e:e.sort((function(e,t){return e-t}))[t-1]},t.STANDARDIZE=function(e,t,n){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:(e-t)/n},t.STDEV={},t.STDEV.P=function(){var e=t.VAR.P.apply(this,arguments),n=Math.sqrt(e);return isNaN(n)&&(n=c.num),n},t.STDEV.S=function(){var e=t.VAR.S.apply(this,arguments),n=Math.sqrt(e);return n},t.STDEVA=function(){var e=t.VARA.apply(this,arguments),n=Math.sqrt(e);return n},t.STDEVPA=function(){var e=t.VARPA.apply(this,arguments),n=Math.sqrt(e);return isNaN(n)&&(n=c.num),n},t.STEYX=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumberArray(o.flatten(t)),o.anyIsError(e,t))return c.value;for(var n=a.mean(t),r=a.mean(e),i=t.length,s=0,l=0,u=0,p=0;p<i;p++)s+=Math.pow(e[p]-r,2),l+=(t[p]-n)*(e[p]-r),u+=Math.pow(t[p]-n,2);return Math.sqrt((s-l*l/u)/(i-2))},t.TRANSPOSE=function(e){return e?a.transpose(e):c.na},t.T=i.T,t.T.DIST=function(e,n,r){return 1!==r&&2!==r?c.num:1===r?t.T.DIST.RT(e,n):t.T.DIST["2T"](e,n)},t.T.DIST["2T"]=function(e,t){return 2!==arguments.length?c.na:e<0||t<1?c.num:"number"!=typeof e||"number"!=typeof t?c.value:2*(1-a.studentt.cdf(e,t))},t.T.DIST.RT=function(e,t){return 2!==arguments.length?c.na:e<0||t<1?c.num:"number"!=typeof e||"number"!=typeof t?c.value:1-a.studentt.cdf(e,t)},t.T.INV=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?c.value:a.studentt.inv(e,t)},t.T.INV["2T"]=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),e<=0||e>1||t<1?c.num:o.anyIsError(e,t)?c.value:Math.abs(a.studentt.inv(e/2,t))},t.T.TEST=function(e,n){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumberArray(o.flatten(n)),o.anyIsError(e,n))return c.value;var r,i=a.mean(e),s=a.mean(n),l=0,u=0;for(r=0;r<e.length;r++)l+=Math.pow(e[r]-i,2);for(r=0;r<n.length;r++)u+=Math.pow(n[r]-s,2);l/=e.length-1,u/=n.length-1;var p=Math.abs(i-s)/Math.sqrt(l/e.length+u/n.length);return t.T.DIST["2T"](p,e.length+n.length-2)},t.TREND=function(e,n,r){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumberArray(o.flatten(n)),r=o.parseNumberArray(o.flatten(r)),o.anyIsError(e,n,r))return c.value;var i=t.LINEST(e,n),a=i[0],s=i[1],l=[];return r.forEach((function(e){l.push(a*e+s)})),l},t.TRIMMEAN=function(e,t){if(e=o.parseNumberArray(o.flatten(e)),t=o.parseNumber(t),o.anyIsError(e,t))return c.value;var n=r.FLOOR(e.length*t,2)/2;return a.mean(o.initial(o.rest(e.sort((function(e,t){return e-t})),n),n))},t.VAR={},t.VAR.P=function(){for(var e,n=o.numbers(o.flatten(arguments)),r=n.length,i=0,a=t.AVERAGE(n),s=0;s<r;s++)i+=Math.pow(n[s]-a,2);return e=i/r,isNaN(e)&&(e=c.num),e},t.VAR.S=function(){for(var e=o.numbers(o.flatten(arguments)),n=e.length,r=0,i=t.AVERAGE(e),a=0;a<n;a++)r+=Math.pow(e[a]-i,2);return r/(n-1)},t.VARA=function(){for(var e=o.flatten(arguments),n=e.length,r=0,i=0,a=t.AVERAGEA(e),s=0;s<n;s++){var c=e[s];r+="number"==typeof c?Math.pow(c-a,2):!0===c?Math.pow(1-a,2):Math.pow(0-a,2),null!==c&&i++}return r/(i-1)},t.VARPA=function(){for(var e,n=o.flatten(arguments),r=n.length,i=0,a=0,s=t.AVERAGEA(n),l=0;l<r;l++){var u=n[l];i+="number"==typeof u?Math.pow(u-s,2):!0===u?Math.pow(1-s,2):Math.pow(0-s,2),null!==u&&a++}return e=i/a,isNaN(e)&&(e=c.num),e},t.WEIBULL={},t.WEIBULL.DIST=function(e,t,n,r){return e=o.parseNumber(e),t=o.parseNumber(t),n=o.parseNumber(n),o.anyIsError(e,t,n)?c.value:r?1-Math.exp(-Math.pow(e/n,t)):Math.pow(e,t-1)*Math.exp(-Math.pow(e/n,t))*t/Math.pow(n,t)},t.Z={},t.Z.TEST=function(e,n,r){if(e=o.parseNumberArray(o.flatten(e)),n=o.parseNumber(n),o.anyIsError(e,n))return c.value;r=r||t.STDEV.S(e);var i=e.length;return 1-t.NORM.S.DIST((t.AVERAGE(e)-n)/(r/Math.sqrt(i)),!0)}},elRR:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("D57K"),i=n("SKSx"),a=n("Wpmq"),o=n("8j5Y"),s=n("4e/d"),c=n("Wg7D"),l=n("jIqt"),u=n("YtkY"),p=n("Ohay"),h=n("KTx3"),d=n("6Oco"),f=n("g6G6"),g=n("5xGT"),m=n("LLEj"),v=n("sXdR"),b=n("7zx0"),y=n("EM62"),x=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r)||this;return o.commandService=t,o.vToDcoordinate=n,o.state=r,o.postmsg=i,o.realtimeStates=a,o.pointerThrottle=120,o}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"defaultCursor",{get:function(){return{cursor:"move",tail:null,type:"css"}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t,n,r){var i=this,a=e.prototype.initialize.call(this,t,n,r),c=this.getStageDrag(n).pipe(Object(o.a)((function(e){return i.updatePan(e.nativeEvent.movementX,e.nativeEvent.movementY)}))),l=this.getStageMouseDown(t).pipe(Object(o.a)((function(e){i.hideComments()}))),u=this.getShapeTouch().pipe(Object(o.a)((function(e){i.postmsg.sendToParent("shape:touch",{shapeId:e.currentTarget.name})}))),p=this.interactionCanvas.canvas,m=Object(h.a)(p,"mousemove").pipe(Object(v.lodashThrottle)(this.pointerThrottle,{leading:!0,trailing:!0}),Object(o.a)((function(e){if(g.P.get("DEBUG_PHOTON_POINTER_MOVE")){var t=i.vToDcoordinate.x(e.x),n=i.vToDcoordinate.y(e.y),r=JSON.stringify([t,n]);i.realtimeStates.set("pointer",r)}})),Object(s.a)((function(e){return Object(d.b)()})));return Object(f.a)(a,u,c,l,m)},t.prototype.getCursor=function(){var e=this;return this.pointerMove().pipe(Object(c.a)(100),Object(l.a)({x:this.interactionCanvas.getMouseX(),y:this.interactionCanvas.getMouseY()}),Object(u.a)((function(t){var n=e.getObjectsUnderPoint(t).filter((function(e){return e instanceof i.b}));return e.getCursorByContext(n,[])})),Object(p.a)((function(e,t){return e.cursor===t.cursor&&e.tail===t.tail})))},t.prototype.getStageMouseDown=function(e){return Object(h.a)(e,"stagemousedown")},t.prototype.hideComments=function(){this.state.set("CommentThreadData",{visible:!1})},t.prototype.shapeTouched=function(e){},t.\u0275fac=function(e){return new(e||t)(y.pc(g.B),y.pc(a.a),y.pc(g.Ib),y.pc(g.pb),y.pc(b.b))},t.\u0275prov=y.bc({token:t,factory:t.\u0275fac}),t}(m.a);Object.defineProperty(x,"name",{value:"ViewerInteractionHandler"})},euU2:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("5xGT"),i=n("ROBh"),a=n("YtkY"),o=n("QoSw"),s=n("SBw3"),c=n("EM62"),l=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return this.locator.getDiagramOnce().pipe(Object(a.a)((function(n){var r=n.isShapeInGroup(n.filterShapeIdsByLockedState(t,!1));return"groupShapes"===e&&n.filterShapeIdsByLockedState(t,!1).length>1?!r:"ungroupShapes"===e&&r})))},e.prototype.getFeatureData=function(e,t){return void 0===t&&(t={}),Object(i.a)(t)},e.prototype.getApplyData=function(e,t){return Object(i.a)({})},e.\u0275fac=function(t){return new(t||e)(c.pc(o.a),c.pc(r.Ib),c.pc(s.a))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},f0nv:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("6Oco"),a=n("JPqQ"),o=n("EM62"),s=function(){function e(e){this.drs=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"DisplayRuleBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t=e.__sakota__.getChanges(),n=this.modifiedShapeData(t);for(var r in n){var a=n[r];this.processShape(e,a.shapeId,a.dataItemId,a.value)}return Object(i.b)()},e.prototype.processShape=function(e,t,n,r){this.drs.evalRules(n,e.shapes[t],r)},e.prototype.modifiedShapeData=function(t){var n,i,a={};try{for(var o=Object(r.k)(["$set","$unset"]),s=o.next();!s.done;s=o.next()){var c=s.value;if(t[c])for(var l in t[c]){e.regexDataItems.lastIndex=0;var u=e.regexDataItems.exec(l);if(u){var p=u[1],h=u[2],d=p+"."+h;a[d]||(a[d]={shapeId:p,dataItemId:h,value:t[c][l]})}}}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a},e.regexDataItems=/shapes\.([^\.]+)\.data\.([^\.]+)/g,e.\u0275fac=function(t){return new(t||e)(o.pc(a.a))},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},"fRR/":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("yZNT");var r=n("GoAz"),i=n("XWWj"),a=n("6qzS"),o=n("J+dc"),s=n("YtkY"),c=n("EM62"),l=function(){function e(e){this.libraryList=e,this.subLibraryList=[],this.type="libs",this.loadAllSubLibraries()}return e.prototype.search=function(e,t){return Object(r.a)(Object(i.goAsync)(e,this.subLibraryList,t)).pipe(Object(o.a)(1),Object(s.a)((function(e){return e.map((function(e){return{id:e.obj.id,title:e.obj.label,type:"libs",score:e.score}}))})))},e.prototype.loadAllSubLibraries=function(){var e=this;this.libraryList.getAllGroups().forEach((function(t){e.libraryList.getLibrariesInGroup(t).map((function(t){e.subLibraryList.push({id:t.id,label:t.label,groups:[],libGroup:""})}))}))},e.\u0275fac=function(t){return new(t||e)(c.pc(a.a))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},fX4D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){try{("undefined"!=typeof process&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||"undefined"!=typeof window&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}catch(t){}}},flPR:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return w}));var r=n("D57K"),i=n("h1tj"),a=n("5xGT"),o=n("KTx3"),s=n("GoAz"),c=n("ROBh"),l=n("g6G6"),u=n("wk5G"),p=n("CfqY"),h=n("7SLS"),d=n("J+dc"),f=n("YtkY"),g=n("3mST"),m=n("Wg7D"),v=n("TLy2"),b=n("5uDM"),y=n("BwBJ"),x=n("jIqt");function C(){return function(e){}}var w=function(){function e(e){this.state=e,this.subs=[],this.container=new i.Container,this.container.name=this.constructor.name}return e.prototype.add=function(){var e=this.createAddSource().pipe(Object(p.a)());return this.subs.push(e.connect()),e},e.prototype.remove=function(){var e=this.createRemoveSource().pipe(Object(p.a)());return this.subs.push(e.connect()),e},e.prototype.change=function(){var e=this.createChangeSource().pipe(Object(p.a)());return this.subs.push(e.connect()),e},e.prototype.destroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe();this.indicatorLayer=void 0},e.prototype.duringInteractions=function(e,t){return Object(l.a)(this.duringSelectionInteraction(e,t),this.duringPan(e,t),this.duringTextEdit(e,t))},e.prototype.duringSelectionInteraction=function(e,t){return Object(l.a)(Object(o.a)(this.indicatorLayer,u.b.interactionStart).pipe(Object(h.a)(t)),Object(l.a)(Object(o.a)(this.indicatorLayer,u.b.interactionEnd),Object(o.a)(this.indicatorLayer,u.b.interactionCancel)).pipe(Object(h.a)(e)))},e.prototype.duringSelectionInteractionInProgress=function(e,t){return Object(l.a)(Object(o.a)(this.indicatorLayer,u.b.interaction).pipe(Object(d.a)(1),Object(h.a)(t)),Object(l.a)(Object(o.a)(this.indicatorLayer,u.b.interactionEnd),Object(o.a)(this.indicatorLayer,u.b.interactionCancel)).pipe(Object(h.a)(e)))},e.prototype.duringTextEdit=function(e,t){return this.state.changes("EditingText").pipe(Object(f.a)((function(n){return!1===n.open?e:t})))},e.prototype.duringPan=function(e,t){return this.state.changes("DiagramPan").pipe(Object(g.a)(1)).pipe(Object(m.a)(200),Object(v.a)((function(){return Object(s.a)([e]).pipe(Object(b.a)((function(e){return Object(c.a)(e).pipe(Object(y.a)(200),Object(x.a)(t))})))})))},e.prototype.duringPanMouseControlState=function(e,t){return this.state.changes("MouseControlState").pipe(Object(f.a)((function(n){return"pan"===n?t:e})))},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.e)(t,e)}(a.Ib)},fxI9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentCommands=t.DocumentEvents=void 0,function(e){e.documentLoad="document:load",e.documentData="document:data"}(t.DocumentEvents||(t.DocumentEvents={})),function(e){e.documentDataSubscribe="document:data:subscribe",e.documentModify="document:modify"}(t.DocumentCommands||(t.DocumentCommands={}))},g5wR:function(e,t,n){"use strict";var r=n("xEF+");t.states={expectOperand:{tokenTypes:{literal:{toState:"expectBinOp"},identifier:{toState:"identifier"},unaryOp:{},openParen:{toState:"subExpression"},openCurl:{toState:"expectObjKey",handler:r.objStart},dot:{toState:"traverse"},openBracket:{toState:"arrayVal",handler:r.arrayStart}}},expectBinOp:{tokenTypes:{binaryOp:{toState:"expectOperand"},pipe:{toState:"expectTransform"},dot:{toState:"traverse"},question:{toState:"ternaryMid",handler:r.ternaryStart}},completable:!0},expectTransform:{tokenTypes:{identifier:{toState:"postTransform",handler:r.transform}}},expectObjKey:{tokenTypes:{identifier:{toState:"expectKeyValSep",handler:r.objKey},closeCurl:{toState:"expectBinOp"}}},expectKeyValSep:{tokenTypes:{colon:{toState:"objVal"}}},postTransform:{tokenTypes:{openParen:{toState:"argVal"},binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},pipe:{toState:"expectTransform"}},completable:!0},postArgs:{tokenTypes:{binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},pipe:{toState:"expectTransform"}},completable:!0},identifier:{tokenTypes:{binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},openParen:{toState:"argVal",handler:r.functionCall},pipe:{toState:"expectTransform"},question:{toState:"ternaryMid",handler:r.ternaryStart}},completable:!0},traverse:{tokenTypes:{identifier:{toState:"identifier"}}},filter:{subHandler:r.filter,endStates:{closeBracket:"identifier"}},subExpression:{subHandler:r.subExpression,endStates:{closeParen:"expectBinOp"}},argVal:{subHandler:r.argVal,endStates:{comma:"argVal",closeParen:"postArgs"}},objVal:{subHandler:r.objVal,endStates:{comma:"expectObjKey",closeCurl:"expectBinOp"}},arrayVal:{subHandler:r.arrayVal,endStates:{comma:"arrayVal",closeBracket:"expectBinOp"}},ternaryMid:{subHandler:r.ternaryMid,endStates:{colon:"ternaryEnd"}},ternaryEnd:{subHandler:r.ternaryEnd,completable:!0}}},gCml:function(e,t,n){"use strict";n.d(t,"a",(function(){return oe}));var r=n("D57K"),i=n("5xGT"),a=n("ROBh"),o=n("C05f"),s=n("QQZH"),c=n("ZTXN"),l=n("4y1S"),u=n("QoSw"),p=n("W9bu"),h=n("nsO7"),d=n("kuMc"),f=n("8j5Y"),g=n("Ohay"),m=n("TLy2"),v=n("xVbo"),b=n("Jzy8"),y=n("NNJu"),x=n("nIj0"),C=n("JPqQ"),w=n("diDk"),k=n("X0jn"),S=n("YNec"),O=n("EM62"),E=n("crdX"),_=n("s2Ay"),I=n("K0+f"),P=n("2kYt"),T=n("R7+U"),A=n("mFH5"),M=n("TMvu"),D=n("pYIu"),j=n("TdEb"),N=n("pVzg"),R=["dbSelector"],L=["styleInput"],F=["valueInput"];function B(e,t){1&e&&(O.lc(0,"h2",7),O.ed(1,"CFORMAT_PANEL.LABELS.NEW_RULE"),O.kc())}function V(e,t){1&e&&(O.lc(0,"h2",7),O.ed(1,"CFORMAT_PANEL.LABELS.UPDATE_RULE"),O.kc())}function z(e,t){if(1&e&&(O.lc(0,"mat-option",29),O.ed(1),O.kc()),2&e){var n=t.$implicit;O.Cc("value",n),O.Sb(1),O.gd(" ",n.label," ")}}function U(e,t){if(1&e&&(O.lc(0,"mat-option",29),O.lc(1,"label",7),O.ed(2),O.kc(),O.kc()),2&e){var n=t.$implicit;O.Cc("value",n.value),O.Sb(2),O.fd(n.label)}}function G(e,t){if(1&e&&(O.lc(0,"div"),O.lc(1,"mat-select",30),O.cd(2,U,3,2,"mat-option",18),O.kc(),O.kc()),2&e){var n=O.xc().$implicit,r=O.xc(2);O.Sb(1),O.Cc("formControl",r.condOpCtrl),O.Sb(1),O.Cc("ngForOf",n.availableOperators)}}var H=function(e){return{visibility:e}};function Y(e,t){if(1&e&&(O.lc(0,"div",24),O.lc(1,"mat-select",25),O.lc(2,"mat-option"),O.gc(3,"ngx-mat-select-search",26),O.kc(),O.cd(4,z,2,2,"mat-option",18),O.yc(5,"async"),O.kc(),O.cd(6,G,3,2,"div",8),O.gc(7,"cformat-value-input",27,28),O.yc(9,"async"),O.kc()),2&e){var n=t.$implicit,r=O.xc(2);O.Sb(1),O.Cc("formControl",r.dataItemCtrl),O.Sb(2),O.Cc("formControl",r.dataItemFilterCtrl),O.Sb(1),O.Cc("ngForOf",O.zc(5,5,r.filteredDataItems)),O.Sb(2),O.Cc("ngIf",n&&n.availableOperators),O.Sb(1),O.Cc("ngStyle",O.Hc(9,H,O.zc(9,7,r.allowNoCustomValue)?"hidden":"visible"))}}function q(e,t){if(1&e&&(O.lc(0,"mat-option",29),O.lc(1,"label",7),O.ed(2),O.kc(),O.kc()),2&e){var n=t.$implicit;O.Cc("value",n.value),O.Sb(2),O.fd(n.label)}}var W=function(){return{event:"rules.newRule.complete.click"}};function X(e,t){if(1&e){var n=O.mc();O.lc(0,"button",31),O.tc("click",(function(){return O.Pc(n),O.xc(2).saveRule()})),O.yc(1,"async"),O.ed(2," CFORMAT_PANEL.BUTTONS.ADD_RULE "),O.kc()}if(2&e){var r=O.xc(2);O.Cc("trackAction",O.Gc(4,W))("disabled",!O.zc(1,2,r.allowSaveAction))}}function K(e,t){if(1&e){var n=O.mc();O.lc(0,"button",31),O.tc("click",(function(){return O.Pc(n),O.xc(2).saveRule()})),O.yc(1,"async"),O.ed(2," CFORMAT_PANEL.BUTTONS.UPDATE_RULE "),O.kc()}if(2&e){var r=O.xc(2);O.Cc("trackAction",O.Gc(4,W))("disabled",!O.zc(1,2,r.allowSaveAction))}}var Z=function(){return{event:"rules.newRule.cancel.click"}};function $(e,t){if(1&e){var n=O.mc();O.jc(0),O.lc(1,"div",11),O.lc(2,"div",12),O.cd(3,B,2,0,"h2",13),O.yc(4,"async"),O.cd(5,V,2,0,"h2",13),O.yc(6,"async"),O.gc(7,"input",14),O.kc(),O.lc(8,"h2",7),O.ed(9,"CFORMAT_PANEL.LABELS.WHICH_HAS"),O.kc(),O.lc(10,"perfect-scrollbar",15),O.cd(11,Y,10,11,"div",16),O.kc(),O.lc(12,"div",17),O.lc(13,"h2",7),O.ed(14,"CFORMAT_PANEL.LABELS.DO"),O.kc(),O.lc(15,"mat-select",14),O.cd(16,q,3,2,"mat-option",18),O.kc(),O.gc(17,"cformat-value-input",19,20),O.kc(),O.kc(),O.lc(19,"div",21),O.cd(20,X,3,5,"button",22),O.yc(21,"async"),O.cd(22,K,3,5,"button",22),O.yc(23,"async"),O.lc(24,"button",23),O.tc("click",(function(){return O.Pc(n),O.xc().setShowForm(!1)})),O.ed(25," CFORMAT_PANEL.BUTTONS.CANCEL "),O.kc(),O.kc(),O.ic()}if(2&e){var r=O.xc();O.Sb(3),O.Cc("ngIf",!O.zc(4,9,r.isEditing)),O.Sb(2),O.Cc("ngIf",O.zc(6,11,r.isEditing)),O.Sb(2),O.Cc("formControl",r.ruleNameCtrl),O.Sb(4),O.Cc("ngForOf",r.ruleConditions),O.Sb(4),O.Cc("formControl",r.ruleActionKeyCtrl),O.Sb(1),O.Cc("ngForOf",r.styleTypes),O.Sb(4),O.Cc("ngIf",!O.zc(21,13,r.isEditing)),O.Sb(2),O.Cc("ngIf",O.zc(23,15,r.isEditing)),O.Sb(2),O.Cc("trackAction",O.Gc(17,Z))}}function Q(e,t){if(1&e){var n=O.mc();O.jc(0),O.lc(1,"div",42),O.tc("click",(function(){O.Pc(n);var e=O.xc().$implicit,t=O.xc().$implicit;return O.xc().onRuleOptionClick(t,e)})),O.ed(2),O.kc(),O.ic()}if(2&e){var r=O.xc().$implicit;O.Sb(2),O.gd(" ",r.label," ")}}function J(e,t){1&e&&O.gc(0,"div",43)}function ee(e,t){if(1&e&&(O.wc(),O.vc(),O.lc(0,"simple-dropdown-item",40),O.cd(1,Q,3,1,"ng-container",8),O.cd(2,J,1,0,"div",41),O.kc()),2&e){var n=t.$implicit;O.Cc("item",n),O.Sb(1),O.Cc("ngIf",!n.isSeparator),O.Sb(1),O.Cc("ngIf",n.isSeparator)}}var te=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0,multiselectable:!1}},ne=function(e){return{"cformat-rules-rule-icon-container-active":e}};function re(e,t){if(1&e&&(O.lc(0,"div",32),O.lc(1,"abs-dropdown",33,34),O.lc(3,"simple-dropdown-button",35),O.lc(4,"button",36),O.wc(),O.lc(5,"svg",37),O.gc(6,"use",38),O.kc(),O.kc(),O.kc(),O.cd(7,ee,3,3,"simple-dropdown-item",39),O.kc(),O.vc(),O.lc(8,"p"),O.ed(9),O.kc(),O.kc()),2&e){var n=t.$implicit,r=O.xc();O.Sb(1),O.Cc("settings",O.Gc(6,te)),O.Sb(3),O.Cc("ngClass",O.Hc(7,ne,n.isActive)),O.Sb(3),O.Cc("ngForOf",r.ruleOptions),O.Sb(1),O.Xb("disabled",!n.isActive),O.Sb(1),O.fd(n.name)}}var ie,ae=function(){return{event:"rules.panel.new.click"}};!function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"}(ie||(ie={}));var oe=function(){function e(e,t,n,r,i,l,u,p,h){this.state=e,this.modalController=t,this.dll=n,this.ell=r,this.commandService=i,this.linkSvc=l,this.permManger=u,this.drs=p,this.changeDetectorRef=h,this.dataItemOptions=Object(a.a)([]),this.selectedDef=new o.a(null),this.dbControl=new x.h,this.dataItemCtrl=new x.h,this.dataItemFilterCtrl=new x.h,this.condOpCtrl=new x.h,this.condValCtrl=new x.h,this.filteredDataItems=new s.a(1),this.ruleActionKeyCtrl=new x.h,this.ruleNameCtrl=new x.h,this._onDestroy=new c.a,this.panelId="cformat",this.operatorMap={equals:b.I.Equals," > ":b.I.GreaterThan," < ":b.I.LesserThan,contains:b.I.Contains,subtext:b.I.SubText,isTrue:b.I.IsTrue,isFalse:b.I.IsFalse,true:b.I.IsTrue,false:b.I.IsFalse},this.dataDefs=[],this.subs=[],this.formCtrlSubs=[],this.isEditing=new o.a(!1),this.showRuleForm=new o.a(!1),this.ruleTargetOpts=[],this.dataItemOptions=Object(a.a)([]),this.ruleConditions=[],this.ruleList=new o.a([]),this.ruleOptions=[],this.styleTypes=[],this.allowSaveAction=new o.a(!1),this.allowNoCustomValue=new o.a(!1)}return e.prototype.displayFn=function(e){return e&&e.label?e.label:""},e.prototype.ngOnInit=function(){this.addRuleOptions(),this.addStyleOptions(),this.subs.push(this.activateObservers())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.saveRule=function(){var e,t,n=this.ruleConditions[0].dataItem.label,r=this.ruleConditions[0].dataItem.type,a=this.groupedDataDefs[n+"."+r],o=this.isEditing.value?this.currentRuleId:i.sb.ruleId(),s=new b.J(o);s.priorityScore=this.isEditing.value?this.newRulePriority:((null===(t=this.ruleList.value[0])||void 0===t?void 0:t.priorityScore)||0)+1,s.dataItemLabel=n,s.name=this.newRuleName,a.diList.forEach((function(e){s.targets.push({dataItemId:e.id})})),s.comparison=this.ruleConditions[0].operator,s.value=this.ruleConditions[0].value,s.action=b.H.Style,s.isActive=!0,s.actionData=((e={})[this.ruleActionKeyCtrl.value]=this.ruleActionValue,e),this.drs.addRule(s),this.setShowForm(!1)},e.prototype.getAllDataItems=function(){return Object(a.a)([])},e.prototype.getAvailableOperators=function(e){return[{label:"CFORMAT_PANEL.OPERATORS.EQUALS",value:b.I.Equals,dTypes:[k.c.NUMBER,k.c.STRING,k.c.STRING_HTML,k.c.STRING_LONG,k.c.OPTION,k.c.OPTION_LIST,k.c.DATE]},{label:"CFORMAT_PANEL.OPERATORS.GREATER_THAN",value:b.I.GreaterThan,dTypes:[k.c.NUMBER]},{label:"CFORMAT_PANEL.OPERATORS.LESSER_THAN",value:b.I.LesserThan,dTypes:[k.c.NUMBER]},{label:"CFORMAT_PANEL.OPERATORS.CONTAINS",value:b.I.Contains,dTypes:[k.c.STRING,k.c.STRING_HTML,k.c.STRING_LONG,k.c.TAGS,k.c.USERS]},{label:"Subtext",value:b.I.SubText,dTypes:[k.c.STRING,k.c.STRING_HTML,k.c.STRING_LONG]},{label:"Is True",value:b.I.IsTrue,dTypes:[k.c.BINARY]},{label:"Is False",value:b.I.IsFalse,dTypes:[k.c.BINARY]}].filter((function(t){return!!(e&&e.dataItem&&e.dataItem.type)&&t.dTypes.includes(e.dataItem.type)}))},e.prototype.setShowForm=function(e){var t,n,r=this;this.showRuleForm.next(e),e?(this.determineShouldAllowSaveAction(),this.ruleConditions.length||this.ruleConditions.push({index:0,dataItem:null,operator:null,value:null,nextCombinator:null,nextIsLast:!1,availableOperators:[]}),this.dataItemFilterCtrl.valueChanges.pipe(Object(d.a)(this._onDestroy)).subscribe((function(){r.filterDataItems()})),this.formCtrlSubs.push(this.ruleNameCtrl.valueChanges.pipe().subscribe((function(e){r.newRuleName=e,r.determineShouldAllowSaveAction()})),this.dataItemCtrl.valueChanges.pipe(Object(f.a)((function(e){i.Kb.track("rules.condition.dataItem.click",{value1:e,value1Type:"data-field-type"}),r.ruleConditions[0].dataItem=e,r.ruleConditions[0].availableOperators=r.getAvailableOperators(r.ruleConditions[0]),r.determineShouldAllowSaveAction(),r.valueInput.first.morphInput(r.getRuleValueInputType(e.type),r.ruleConditions[0].value)}))).subscribe(),this.condOpCtrl.valueChanges.pipe().subscribe((function(e){i.Kb.track("rules.condition.operator.click",{value1:r.operatorMap[e],value1Type:"operator-type"}),r.ruleConditions[0].operator=r.operatorMap[e],r.determineShouldAllowSaveAction(),r.determineShouldAllowCustomValue(e)})),this.condValCtrl.valueChanges.pipe().subscribe((function(e){r.ruleConditions[0].value=e,r.determineShouldAllowSaveAction()})),this.ruleActionKeyCtrl.valueChanges.pipe().subscribe((function(e){var t;i.Kb.track("rules.condition.action.click",{value1:e,value1Type:"action-type"}),null===(t=r.styleInput)||void 0===t||t.first.morphInput(e,r.ruleActionValue),r.determineShouldAllowSaveAction()})),null===(t=this.valueInput)||void 0===t?void 0:t.changes.subscribe((function(e){var t;e.first&&e.first.morphInput(r.getRuleValueInputType(null===(t=r.ruleConditions[0].dataItem)||void 0===t?void 0:t.type),r.ruleConditions[0].value),r.formCtrlSubs.push(e.first.value.pipe(Object(f.a)((function(e){r.ruleConditions[0].value=e,r.determineShouldAllowSaveAction()}))).subscribe())})),null===(n=this.styleInput)||void 0===n?void 0:n.changes.subscribe((function(e){r.ruleActionKeyCtrl.value&&e.first.morphInput(r.ruleActionKeyCtrl.value,r.ruleActionValue),r.formCtrlSubs.push(e.first.value.pipe(Object(f.a)((function(e){r.ruleActionValue=e,r.determineShouldAllowSaveAction()}))).subscribe())})))):(this.formCtrlSubs.forEach((function(e){return e.unsubscribe()})),this.isEditing.next(!1),this.newRuleName="",this.ruleConditions=[],this.dataItemCtrl.reset(),this.condOpCtrl.reset(),this.condValCtrl.reset(),this.ruleActionKeyCtrl.reset(),this.ruleActionValue="",this.ruleNameCtrl.reset())},e.prototype.onRuleOptionClick=function(e,t){switch(t.value){case"active_for_all":i.Kb.track("rules.rulesMenu.active.click"),this.toggleRuleStatus(e,!0);break;case"inactive_for_all":i.Kb.track("rules.rulesMenu.inactive.click"),this.toggleRuleStatus(e,!1);break;case"update":i.Kb.track("rules.rulesMenu.update.click"),this.initEditMode(e);break;case"duplicate":i.Kb.track("rules.rulesMenu.duplicate.click"),this.duplicateRule(e);break;case"delete":i.Kb.track("rules.rulesMenu.delete.click"),this.deleteRule(e);break;case"move_up":i.Kb.track("rules.rulesMenu.move.click"),this.moveRuleOrder(e,ie.UP);break;case"move_down":i.Kb.track("rules.rulesMenu.move.click"),this.moveRuleOrder(e,ie.DOWN)}},e.prototype.addStyleOptions=function(){this.styleTypes.push({label:"COMMANDS.FILL_COLOR",value:S.b.FILLCOLOR},{label:"COMMANDS.LINE_COLOR",value:S.b.LINECOLOR},{label:"COMMANDS.LINE_THICKNESS",value:S.b.LINETHICKNESS})},e.prototype.toggleRuleStatus=function(e,t){e.isActive=t;var n=new b.J(e.id);Object.assign(n,Object(r.a)({},e)),this.drs.deleteRule(e),this.drs.addRule(n)},e.prototype.deleteRule=function(e){this.drs.deleteRule(e)},e.prototype.duplicateRule=function(e){var t=new b.J(i.sb.ruleId()),n=this.ruleList.value.length?Object(r.j)(this.ruleList.value).reverse().pop().priorityScore:1;Object.assign(t,Object(r.a)(Object(r.a)({},e),{id:t.id,name:e.name+" - copy",priorityScore:n+1})),this.drs.addRule(t)},e.prototype.moveRuleOrder=function(e,t){var n,i,a=this.ruleList.value.indexOf(e),o=this.ruleList.value.length?Object(r.j)(this.ruleList.value).pop().priorityScore:1,s=this.ruleList.value.length?Object(r.j)(this.ruleList.value).reverse().pop().priorityScore:1;if(t===ie.UP)1===a?e.priorityScore=s+1:a>1&&(n=this.ruleList.value[a-2].priorityScore,i=this.ruleList.value[a-1].priorityScore,e.priorityScore=i+(n-i)/2);else{var c=this.ruleList.value.length-1;a===c-1?e.priorityScore=o-1e-15:a<c-1&&(n=this.ruleList.value[a+1].priorityScore,i=this.ruleList.value[a+2].priorityScore,e.priorityScore=n-(n-i)/2)}this.drs.deleteRule(e),this.drs.addRule(e)},e.prototype.initEditMode=function(e){this.isEditing&&this.setShowForm(!1),this.currentRuleId=e.id,this.ruleNameCtrl.setValue(e.name),this.newRuleName=this.ruleNameCtrl.value;var t=this.dataDefs.find((function(t){return t.label===e.dataItemLabel}));this.ruleConditions.push({index:0,dataItem:t,operator:e.comparison,value:e.value,availableOperators:[]}),this.dataItemCtrl.setValue(t),this.condOpCtrl.setValue(e.comparison),this.determineShouldAllowCustomValue(e.comparison),this.condValCtrl.setValue(e.value),this.ruleActionKeyCtrl.setValue(Object.keys(e.actionData)[0]||"fillColor"),this.ruleActionValue=e.actionData[this.ruleActionKeyCtrl.value],this.ruleConditions[0].availableOperators=this.getAvailableOperators(this.ruleConditions[0]),this.newRulePriority=e.priorityScore,this.isEditing.next(!0),this.setShowForm(!0)},e.prototype.filterDataItems=function(){if(this.dataDefs){var e=this.dataItemFilterCtrl.value;e?(e=e.toLowerCase(),this.filteredDataItems.next(this.dataDefs.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1})))):this.filteredDataItems.next(this.dataDefs.slice())}},e.prototype.activateObservers=function(){var e,t,n,r=this;return this.state.changes("SelectedLeftPanel").pipe(Object(g.a)(),Object(f.a)((function(i){i===r.panelId?(e=r.listenToDataDefChanges(),t=r.listenToRuleChanges(),n=r.listenToDiagramChanges(),r.subs.push(e,t,n),r.dll.forCurrentObserver(!1).pipe(Object(m.a)((function(e){return e.getDiagramOnce()})),Object(f.a)((function(e){r.processDataDefChange(e.dataDefs),r.ruleList.next(r.sortRuleList(Object.values(e.rules)))}))).subscribe()):(e&&(e.unsubscribe(),e=void 0),t&&(t.unsubscribe(),t=void 0),n&&(n.unsubscribe(),n=void 0))}))).subscribe()},e.prototype.listenToRuleChanges=function(){var e=this;return this.dll.forCurrentObserver(!1).pipe(Object(m.a)((function(e){return e.getDiagramRuleChanges().pipe(Object(m.a)((function(t){return e.getDiagramOnce()})))})),Object(f.a)((function(t){e.ruleList.next(e.sortRuleList(Object.values(t.rules)))}))).subscribe()},e.prototype.listenToDataDefChanges=function(){var e=this;return this.dll.forCurrentObserver(!1).pipe(Object(m.a)((function(e){return e.getDiagramDataDefChanges().pipe(Object(m.a)((function(t){return e.getDiagramOnce()})))})),Object(f.a)((function(t){e.processDataDefChange(t.dataDefs)}))).subscribe()},e.prototype.listenToDiagramChanges=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(v.a)((function(e){return Boolean(e)})),Object(g.a)(),Object(f.a)((function(){e.setShowForm(!1)}))).subscribe()},e.prototype.processDataDefChange=function(t){var n,r=this,i={};for(var a in t)Object(h.assign)(i,t[a]);var o=Object.values(i);this.groupedDataDefs={};for(var s=0;s<o.length;s++){var c=o[s],l=c.label&&c.label.length>0?c.label:c.id;if(null===(n=c.visibility)||void 0===n?void 0:n.some((function(e){return"editor"===e.type}))){c.systemType&&-1===l.indexOf(c.systemType.toString())&&(l+=" ("+c.systemType+")");var u=l+"."+c.type;this.groupedDataDefs[u]||(this.groupedDataDefs[u]={id:l,label:l,diList:[],type:c.type}),c.type&&e.supportedDITypes.includes(c.type)&&this.groupedDataDefs[u].diList.push({id:c.id})}}return this.dataDefs=Object.values(this.groupedDataDefs),this.filteredDataItems.next(this.dataDefs.slice()),this.ruleConditions[0]&&this.ruleConditions[0].dataItem&&this.dataItemCtrl.setValue(this.dataDefs.find((function(e){return e.id===r.ruleConditions[0].dataItem.id}))),this.dataDefs},e.prototype.addRuleOptions=function(){this.ruleOptions.push({id:1,label:"CFORMAT_PANEL.LABELS.ACTIVE_FOR_ALL",value:"active_for_all"},{id:1.1,label:"CFORMAT_PANEL.LABELS.INACTIVE_FOR_ALL",value:"inactive_for_all"}),this.ruleOptions.push({id:.1,label:"",value:"",isSeparator:!0}),this.ruleOptions.push({id:2,label:"CFORMAT_PANEL.LABELS.UPDATE",value:"update"},{id:2.1,label:"CFORMAT_PANEL.LABELS.DUPLICATE",value:"duplicate"},{id:2.2,label:"CFORMAT_PANEL.LABELS.DELETE",value:"delete"}),this.ruleOptions.push({id:.1,label:"",value:"",isSeparator:!0}),this.ruleOptions.push({id:3,label:"Move Up",value:"move_up"},{id:3.1,label:"Move Down",value:"move_down"})},e.prototype.determineShouldAllowSaveAction=function(){var e;this.allowSaveAction.next(!!((null===(e=this.newRuleName)||void 0===e?void 0:e.length)&&this.ruleActionValue&&this.ruleConditions[0].dataItem&&this.ruleConditions[0].operator&&this.ruleConditions[0].value))},e.prototype.determineShouldAllowCustomValue=function(e){[b.I.IsFalse,b.I.IsTrue].includes(e)?(this.allowNoCustomValue.next(!0),this.ruleConditions[0].value=e):this.allowNoCustomValue.next(!1)},e.prototype.getRuleValueInputType=function(e,t){return"string"===e||"number"===e?S.b.DEFAULT:"date"===e?S.b.DATE:"users"===e?S.b.PEOPLE:S.b.DEFAULT},e.prototype.sortRuleList=function(e){return e.sort((function(e,t){return t.priorityScore-e.priorityScore}))},e.supportedDITypes=[k.c.NUMBER,k.c.STRING,k.c.STRING_HTML,k.c.STRING_LONG,k.c.OPTION,k.c.OPTION_LIST,k.c.TAGS,k.c.DATE,k.c.PEOPLE,k.c.BINARY,k.c.USERS],e.\u0275fac=function(t){return new(t||e)(O.fc(i.Ib),O.fc(i.gb),O.fc(u.a),O.fc(w.a),O.fc(i.B),O.fc(p.a),O.fc(l.m),O.fc(C.a),O.fc(O.j))},e.\u0275cmp=O.Zb({type:e,selectors:[["cformat-container"]],viewQuery:function(e,t){var n;(1&e&&(O.jd(R,!0,y.b),O.jd(L,!0,S.a),O.jd(F,!0,S.a)),2&e)&&(O.Lc(n=O.uc())&&(t.dbSelector=n.first),O.Lc(n=O.uc())&&(t.styleInput=n),O.Lc(n=O.uc())&&(t.valueInput=n))},decls:18,vars:8,consts:[[1,"cformat-container"],[1,"cformat-menu-scrollbar"],[1,"cformat-container-header-container"],["translate","",1,"cformat-container-header"],[1,"cformat-container-add-rule-btn",3,"trackAction","click"],[1,"nu-icon","nu-ic-plus"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-plus"],["translate",""],[4,"ngIf"],[1,"cformat-rules-container"],["class","cformat-rule-item-container",4,"ngFor","ngForOf"],[1,"cformat-new-rule-container"],[1,"cformat-new-rule-target-selection"],["translate","",4,"ngIf"],[1,"form-control",3,"formControl"],[1,"cformat-new-rule-condition-container"],["class","cformat-new-rule-condition-item",4,"ngFor","ngForOf"],[1,"cformat-rule-action-conatinar"],["class","form-control-select-option",3,"value",4,"ngFor","ngForOf"],[1,"cformat-style-value-input"],["styleInput",""],[1,"cformat-buttons-container"],["class","cformat-buttons-save","translate","",3,"trackAction","disabled","click",4,"ngIf"],["translate","",1,"cformat-buttons-cancel",3,"trackAction","click"],[1,"cformat-new-rule-condition-item"],["placeholder","Data Item","panelClass","form-control-select-panel",1,"form-control",3,"formControl"],["placeholderLabel","Select Data Item","noEntriesFoundLabel","No Entries Found",3,"formControl"],[1,"cformat-style-value-input",3,"ngStyle"],["valueInput",""],[1,"form-control-select-option",3,"value"],["placeholder","Operator",1,"form-control",3,"formControl"],["translate","",1,"cformat-buttons-save",3,"trackAction","disabled","click"],[1,"cformat-rule-item-container"],["direction","top","alignment","left",3,"settings"],["dropdown",""],["ddbutton",""],[1,"cformat-rules-rule-icon-container",3,"ngClass"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-globe"],["dditem","",3,"item",4,"ngFor","ngForOf"],["dditem","",3,"item"],["class","cformat-rule-rule-option-separator",4,"ngIf"],["translate","",1,"cformat-rules-rule-option-item",3,"click"],[1,"cformat-rule-rule-option-separator"]],template:function(e,t){1&e&&(O.lc(0,"div",0),O.lc(1,"perfect-scrollbar",1),O.lc(2,"div",2),O.lc(3,"div"),O.lc(4,"h2",3),O.ed(5," CFORMAT_PANEL.LABELS.HEADER "),O.kc(),O.lc(6,"div",4),O.tc("click",(function(){return t.setShowForm(!0)})),O.wc(),O.lc(7,"svg",5),O.gc(8,"use",6),O.kc(),O.vc(),O.lc(9,"a",7),O.ed(10,"CFORMAT_PANEL.BUTTONS.ADD_NEW_RULE"),O.kc(),O.kc(),O.kc(),O.kc(),O.lc(11,"div"),O.cd(12,$,26,18,"ng-container",8),O.yc(13,"async"),O.jc(14),O.lc(15,"perfect-scrollbar",9),O.cd(16,re,10,9,"div",10),O.yc(17,"async"),O.kc(),O.ic(),O.kc(),O.kc(),O.kc()),2&e&&(O.Sb(6),O.Cc("trackAction",O.Gc(7,ae)),O.Sb(6),O.Cc("ngIf",O.zc(13,3,t.showRuleForm)),O.Sb(4),O.Cc("ngForOf",O.zc(17,5,t.ruleList)))},directives:[E.b,_.a,I.a,P.t,P.s,x.d,x.s,x.i,T.a,S.a,A.k,M.a,P.w,D.a,j.a,P.q,N.a],pipes:[P.b],styles:['[class*=nu-btn]{border-radius:4px;padding-left:10px;padding-right:10px}.nu-btn-large{height:40px;font-size:18px;margin-left:5px;margin-right:5px;font-family:Open Sans,sans-serif;cursor:pointer;border:none}.nu-btn-large.primary:hover:enabled{background-color:#40b29e;color:#fff}.nu-btn-large.primary:hover:enabled .nu-icon{color:#fff}.nu-btn-large.primary:active{background-color:#338c7d}.nu-btn-large.primary.nu-btn-icon{border:0}.nu-btn-large.primary.nu-btn-icon:active,.nu-btn-large.primary.nu-btn-icon:hover{background-color:transparent}.nu-btn-large.dark-blue{border:0}.nu-btn-large.secondary{border:1px solid #d3d3e7;color:#04263d}.nu-btn-large.secondary .nu-icon{color:#04263d}.nu-btn-large.secondary:hover:enabled{background-color:#e6e6f1}.nu-btn-large.secondary:active{background-color:#d5d5e8}.nu-btn-large.secondary.nu-btn-icon:active,.nu-btn-large.secondary.nu-btn-icon:hover{background-color:transparent}.nu-btn-large:focus{outline:none}.nu-btn-large.active .nu-icon{color:#61a15e}.nu-btn-large.nu-btn-icon{background:transparent;margin:0}.nu-btn-large.nu-btn-icon .nu-icon{color:#04263d}.nu-btn-large.nu-btn-icon.active .nu-icon,.nu-btn-large.nu-btn-icon:hover:enabled .nu-icon{color:#61a15e}.nu-btn-large.nu-btn-icon-text{padding-left:5px}.nu-btn-large.nu-btn-icon-text .nu-icon{width:25px;height:25px;display:inline-block;vertical-align:middle}.nu-btn-large.nu-btn-icon-text label{margin-left:5px;cursor:pointer;-webkit-user-select:0;-moz-user-select:0;user-select:0;vertical-align:middle}.nu-btn-large:disabled,.nu-btn-large[disabled]{cursor:auto;background-color:#f2f5fb;color:#9fa9bc;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu-btn-large:disabled .nu-icon,.nu-btn-large[disabled] .nu-icon{color:#9fa9bc}.nu-btn-large:disabled.nu-btn-icon,.nu-btn-large[disabled].nu-btn-icon{background-color:transparent}.nu-btn-large:disabled.nu-btn-icon .nu-icon,.nu-btn-large:disabled.nu-btn-icon:hover .nu-icon,.nu-btn-large[disabled].nu-btn-icon .nu-icon,.nu-btn-large[disabled].nu-btn-icon:hover .nu-icon{color:#9fa9bc}.nu-btn-med{height:35px;font-size:14px;margin-left:5px;margin-right:5px;font-family:Open Sans,sans-serif;cursor:pointer;border:none}.nu-btn-med.primary:hover:enabled{background-color:#40b29e;color:#fff}.nu-btn-med.primary:hover:enabled .nu-icon{color:#fff}.nu-btn-med.primary:active{background-color:#338c7d}.nu-btn-med.primary.nu-btn-icon{border:0}.nu-btn-med.primary.nu-btn-icon:active,.nu-btn-med.primary.nu-btn-icon:hover{background-color:transparent}.nu-btn-med.dark-blue{border:0}.nu-btn-med.secondary{border:1px solid #d3d3e7;color:#04263d}.nu-btn-med.secondary .nu-icon{color:#04263d}.nu-btn-med.secondary:hover:enabled{background-color:#e6e6f1}.nu-btn-med.secondary:active{background-color:#d5d5e8}.nu-btn-med.secondary.nu-btn-icon:active,.nu-btn-med.secondary.nu-btn-icon:hover{background-color:transparent}.nu-btn-med:focus{outline:none}.nu-btn-med.active .nu-icon{color:#61a15e}.nu-btn-med.nu-btn-icon{background:transparent;margin:0}.nu-btn-med.nu-btn-icon .nu-icon{color:#04263d}.nu-btn-med.nu-btn-icon.active .nu-icon,.nu-btn-med.nu-btn-icon:hover:enabled .nu-icon{color:#61a15e}.nu-btn-med.nu-btn-icon-text{padding-left:5px}.nu-btn-med.nu-btn-icon-text .nu-icon{width:25px;height:25px;display:inline-block;vertical-align:middle}.nu-btn-med.nu-btn-icon-text label{margin-left:5px;cursor:pointer;-webkit-user-select:0;-moz-user-select:0;user-select:0;vertical-align:middle}.nu-btn-med:disabled,.nu-btn-med[disabled]{cursor:auto;background-color:#f2f5fb;color:#9fa9bc;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu-btn-med:disabled .nu-icon,.nu-btn-med[disabled] .nu-icon{color:#9fa9bc}.nu-btn-med:disabled.nu-btn-icon,.nu-btn-med[disabled].nu-btn-icon{background-color:transparent}.nu-btn-med:disabled.nu-btn-icon .nu-icon,.nu-btn-med:disabled.nu-btn-icon:hover .nu-icon,.nu-btn-med[disabled].nu-btn-icon .nu-icon,.nu-btn-med[disabled].nu-btn-icon:hover .nu-icon{color:#9fa9bc}.nu-btn-small{height:30px;font-size:14px;margin-left:5px;margin-right:5px;font-family:Open Sans,sans-serif;cursor:pointer;border:none}.nu-btn-small.primary:hover:enabled{background-color:#40b29e;color:#fff}.nu-btn-small.primary:hover:enabled .nu-icon{color:#fff}.nu-btn-small.primary:active{background-color:#338c7d}.nu-btn-small.primary.nu-btn-icon{border:0}.nu-btn-small.primary.nu-btn-icon:active,.nu-btn-small.primary.nu-btn-icon:hover{background-color:transparent}.nu-btn-small.dark-blue{border:0}.nu-btn-small.secondary{border:1px solid #d3d3e7;color:#04263d}.nu-btn-small.secondary .nu-icon{color:#04263d}.nu-btn-small.secondary:hover:enabled{background-color:#e6e6f1}.nu-btn-small.secondary:active{background-color:#d5d5e8}.nu-btn-small.secondary.nu-btn-icon:active,.nu-btn-small.secondary.nu-btn-icon:hover{background-color:transparent}.nu-btn-small:focus{outline:none}.nu-btn-small.active .nu-icon{color:#61a15e}.nu-btn-small.nu-btn-icon{background:transparent;margin:0}.nu-btn-small.nu-btn-icon .nu-icon{color:#04263d}.nu-btn-small.nu-btn-icon.active .nu-icon,.nu-btn-small.nu-btn-icon:hover:enabled .nu-icon{color:#61a15e}.nu-btn-small.nu-btn-icon-text{padding-left:5px}.nu-btn-small.nu-btn-icon-text .nu-icon{width:25px;height:25px;display:inline-block;vertical-align:middle}.nu-btn-small.nu-btn-icon-text label{margin-left:5px;cursor:pointer;-webkit-user-select:0;-moz-user-select:0;user-select:0;vertical-align:middle}.nu-btn-small:disabled,.nu-btn-small[disabled]{cursor:auto;background-color:#f2f5fb;color:#9fa9bc;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu-btn-small:disabled .nu-icon,.nu-btn-small[disabled] .nu-icon{color:#9fa9bc}.nu-btn-small:disabled.nu-btn-icon,.nu-btn-small[disabled].nu-btn-icon{background-color:transparent}.nu-btn-small:disabled.nu-btn-icon .nu-icon,.nu-btn-small:disabled.nu-btn-icon:hover .nu-icon,.nu-btn-small[disabled].nu-btn-icon .nu-icon,.nu-btn-small[disabled].nu-btn-icon:hover .nu-icon{color:#9fa9bc}.nu-btn-on-grey{background-color:#fff;color:#04263d;border:1px solid #d3d3e7;display:flex;align-items:center}.nu-btn-on-grey:hover{background-color:#f4fcfa}.nu-btn-on-grey:active{background-color:#ecfaf6}.nu-btn-on-grey .nu-icon{color:#40b29e;margin-right:5px}a.disabled{pointer-events:none;color:#dcdcdc;background-color:transparent}.nu-btn-icon.primary .nu-icon{color:#40b29e}.nu-btn-icon.secondary .nu-icon{color:#f6f6fa}.nu-btn-icon.dark-blue .nu-icon{color:#04263d}.nu-btn-icon.light-purple .nu-icon{color:#c3c3de}.nu-btn-icon.xlight-grey .nu-icon{color:#f0f0f0}.nu-btn-icon.light-grey .nu-icon{color:#ececec}.nu-btn-icon.xmedium-grey .nu-icon{color:#dcdcdc}.nu-btn-icon.medium-grey .nu-icon{color:#aaa}.nu-btn-icon.grey .nu-icon{color:#7e7e7e}.nu-btn-icon.blueish-grey .nu-icon{color:#f3f5fa}.nu-btn-icon.light-nv-blue .nu-icon{color:#627281}.nu-btn-icon.navy-blue .nu-icon{color:#415a71}.nu-btn-icon.navy-blue-off .nu-icon{color:#414b61}.nu-btn-icon.white .nu-icon{color:#fff}.nu-btn-icon.beige .nu-icon{color:#f9f8f7}.nu-btn-icon.orange .nu-icon{color:#f6aa00}.nu-btn-icon.light-orange .nu-icon{color:#f5ab1c}.nu-btn-icon.dark-orange .nu-icon{color:#fab638}.nu-btn-icon.crimson .nu-icon{color:#f36c67}.nu-btn-icon.black .nu-icon{color:#686868}.nu-btn-icon.green .nu-icon{color:#61a15e}.nu-btn-icon.yellow .nu-icon{color:#ffc648}.nu-btn-icon.purple .nu-icon{color:#5d3eaa}.nu-btn-icon.light-red .nu-icon{color:#f05252}.nu-btn-icon.peachy-white .nu-icon{color:#fae8e5}.nu-btn-icon.charade .nu-icon{color:#3d4242}.nu-btn-icon.light-green .nu-icon{color:#dcf2ee}.nu-btn-icon.dark-grey .nu-icon{color:#14282e}.nu-btn-icon.dark-red .nu-icon{color:#d92626}.nu-btn-icon.mlight-grey .nu-icon{color:#caccce}.nu-btn-icon.mint-cream .nu-icon{color:#f4fcfa}.nu-btn-icon.ne-red .nu-icon{color:#f05151}.nu-btn-icon.ne-grey .nu-icon{color:#a0a0a0}.nu-btn-icon.ne-blue .nu-icon{color:#06263d}[class*=nu2-btn]{border-radius:4px;border:1px solid;font-family:Open Sans,sans-serif;font-weight:600;margin-left:5px;margin-right:5px;line-height:1;cursor:pointer}.nu2-btn-primary{color:#fff;background-color:#29947f;border-color:#29947f}.nu2-btn-primary:hover{color:#fff;background-color:#51c0aa;border-color:#51c0aa}.nu2-btn-primary:disabled,.nu2-btn-primary[disabled]{color:rgba(98,104,106,.5);background-color:#caccce;border-color:#caccce;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu2-btn-secondary{color:#195249;background-color:rgba(81,192,170,.2);border-color:#195249}.nu2-btn-secondary:hover{color:#fff;background-color:#51c0aa;border-color:#51c0aa}.nu2-btn-secondary:disabled,.nu2-btn-secondary[disabled]{color:rgba(98,104,106,.5);background-color:#caccce;border-color:#caccce;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu2-btn-outline{color:#04263d;background-color:#fff;border-color:rgba(42,82,94,.3)}.nu2-btn-outline:hover{color:#fff;background-color:#51c0aa;border-color:#51c0aa}.nu2-btn-outline:disabled,.nu2-btn-outline[disabled]{color:rgba(98,104,106,.5);background-color:#fff;border-color:#caccce;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu2-btn-warning{color:#6f5425;background-color:rgba(255,198,72,.2);border-color:#c8931f}.nu2-btn-warning:hover{color:#6f5425;background-color:rgba(255,198,72,.4);border-color:#c8931f}.nu2-btn-warning:disabled,.nu2-btn-warning[disabled]{color:rgba(98,104,106,.5);background-color:#caccce;border-color:#caccce;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu2-btn-error{color:#a02222;background-color:rgba(240,106,82,.1);border-color:#d92626}.nu2-btn-error:hover{color:#a02222;background-color:rgba(240,103,82,.3);border-color:#d92626}.nu2-btn-error:disabled,.nu2-btn-error[disabled]{color:rgba(98,104,106,.5);background-color:#caccce;border-color:#caccce;cursor:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}.nu2-btn-small{height:30px;font-size:14px;padding:7px 16px}.nu2-btn-medium{height:36px;font-size:14px;padding:10px 32px}.nu2-btn-large{height:44px;font-size:16px;padding:12px 40px}.nu-icon{display:inline-block;width:30px;height:30px;stroke-width:0;stroke:currentColor;fill:currentColor;color:#04263d}.nu-icon.primary{color:#40b29e}.nu-icon.secondary{color:#f6f6fa}.nu-icon.dark-blue{color:#04263d}.nu-icon.light-purple{color:#c3c3de}.nu-icon.xlight-grey{color:#f0f0f0}.nu-icon.light-grey{color:#ececec}.nu-icon.xmedium-grey{color:#dcdcdc}.nu-icon.medium-grey{color:#aaa}.nu-icon.grey{color:#7e7e7e}.nu-icon.blueish-grey{color:#f3f5fa}.nu-icon.light-nv-blue{color:#627281}.nu-icon.navy-blue{color:#415a71}.nu-icon.navy-blue-off{color:#414b61}.nu-icon.white{color:#fff}.nu-icon.beige{color:#f9f8f7}.nu-icon.orange{color:#f6aa00}.nu-icon.light-orange{color:#f5ab1c}.nu-icon.dark-orange{color:#fab638}.nu-icon.crimson{color:#f36c67}.nu-icon.black{color:#686868}.nu-icon.green{color:#61a15e}.nu-icon.yellow{color:#ffc648}.nu-icon.purple{color:#5d3eaa}.nu-icon.light-red{color:#f05252}.nu-icon.peachy-white{color:#fae8e5}.nu-icon.charade{color:#3d4242}.nu-icon.light-green{color:#dcf2ee}.nu-icon.dark-grey{color:#14282e}.nu-icon.dark-red{color:#d92626}.nu-icon.mlight-grey{color:#caccce}.nu-icon.mint-cream{color:#f4fcfa}.nu-icon.ne-red{color:#f05151}.nu-icon.ne-grey{color:#a0a0a0}.nu-icon.ne-blue{color:#06263d}.nu-icon-xsmall{width:15px;height:15px}.nu-icon-small{width:20px;height:20px}.nu-icon-med{width:25px;height:25px}.nu-icon-large{width:45px;height:45px}.nu-loader-shimmer{width:inherit;height:inherit;top:0;left:0;background:#dcdcdc;background:linear-gradient(90deg,#eee 8%,#ddd 18%,#eee 33%);background-size:300px 75px;-webkit-animation-duration:2s;animation-duration:2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:shimmer;animation-name:shimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear}@-webkit-keyframes shimmer{0%{background-position:-80px 0}to{background-position:80px 0}}@keyframes shimmer{0%{background-position:-80px 0}to{background-position:80px 0}}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn{-webkit-animation-name:fadeIn;animation-name:fadeIn}@-webkit-keyframes fadeInUp{0%{opacity:0;transform:translate3d(0,20px,0)}to{opacity:1;transform:translateZ(0)}}@keyframes fadeInUp{0%{opacity:0;transform:translate3d(0,20px,0)}to{opacity:1;transform:translateZ(0)}}.fadeInUp{-webkit-animation-name:fadeInUp;animation-name:fadeInUp}@-webkit-keyframes slideInRight{0%{transform:translate3d(100%,0,0);visibility:visible}to{transform:translateZ(0)}}@keyframes slideInRight{0%{transform:translate3d(100%,0,0);visibility:visible}to{transform:translateZ(0)}}.slideInRight{-webkit-animation-name:slideInRight;animation-name:slideInRight}.animated{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.animated.infinite{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.animated.delay-1s{-webkit-animation-delay:1s;animation-delay:1s}.animated.delay-2s{-webkit-animation-delay:2s;animation-delay:2s}.animated.delay-3s{-webkit-animation-delay:3s;animation-delay:3s}.animated.delay-4s{-webkit-animation-delay:4s;animation-delay:4s}.animated.delay-5s{-webkit-animation-delay:5s;animation-delay:5s}.animated.fast{-webkit-animation-duration:.8s;animation-duration:.8s}.animated.faster{-webkit-animation-duration:.5s;animation-duration:.5s}.animated.slow{-webkit-animation-duration:2s;animation-duration:2s}.animated.slower{-webkit-animation-duration:3s;animation-duration:3s}@media (prefers-reduced-motion){.animated{-webkit-animation:unset!important;animation:unset!important;transition:none!important}}.modal-window-container{z-index:1000;background-color:hsla(0,0%,40.8%,.8)}.modal-window-container-no-bg{z-index:1000;background-color:transparent}.modal-window-inner{border-radius:4px;position:relative;background-color:#fff;padding:15px}.modal-window-heading{display:flex;align-items:center;padding-top:10px;padding-bottom:20px;text-align:left}.modal-window-heading h1{flex:1;font-size:18px}.modal-window-heading button{position:absolute;top:10px;right:5px}.text-input,.text-input-multilined{width:100%;padding:8px;outline:none;white-space:pre-wrap;background-color:#fff;border-radius:4px;margin-top:5px;-webkit-user-select:text;-moz-user-select:text;user-select:text;border:1px solid #d3d3e7}input.text-input:focus{border:1px solid #80c6b9}input.text-input::-moz-placeholder{color:#9aa0a9}input.text-input::placeholder{color:#9aa0a9}.text-input-multilined:focus{border:1px solid #80c6b9}.text-input-multilined:empty:before{content:attr(data-placeholder);color:#9aa0a9}.text-input-multilined,div.text-input,input.text-input{cursor:text}.text-input-multilined:hover,div.text-input:hover,input.text-input:hover{border:1px solid #80c6b9}.text-item-inline{display:flex;flex-direction:row;align-items:center}.text-item-inline label{flex:1;margin-right:10px}.dropdown-item .abs-dropdown-container{position:relative}.dropdown-item .uneditable{pointer-events:none}.dropdown-item:hover .dropdown-selection{border:1px solid #80c6b9}.dropdown-selection{padding-right:30px}.nu-dropdown-container{position:relative;display:block}.nu-dropdown-arrow{position:absolute;right:0;top:0}.nu2-title{font-family:Montserrat,sans-serif;font-size:96px;font-style:normal;font-weight:600;line-height:104px;letter-spacing:-1.5px}.nu2-subtitle{font-size:48px;font-weight:300;line-height:64px}.n2-heading-1,.nu2-subtitle{font-family:Montserrat,sans-serif;font-style:normal;letter-spacing:-.5px}.n2-heading-1{font-size:60px;font-weight:400;line-height:72px}.nu2-heading-2{font-size:48px;line-height:56px}.nu2-heading-2,.nu2-heading-3{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;letter-spacing:0}.nu2-heading-3{font-size:36px;line-height:48px}.nu2-heading-4{font-size:24px;line-height:36px;letter-spacing:-.4px}.nu2-heading-4,.nu2-heading-5{font-family:Montserrat,sans-serif;font-style:normal;font-weight:600}.nu2-heading-5{font-size:20px;line-height:24px;letter-spacing:.15px}.nu2-heading-6{font-size:18px;font-weight:400;line-height:24px;letter-spacing:0}.nu2-heading-6,.nu2-subheading-1{font-family:Montserrat,sans-serif;font-style:normal}.nu2-subheading-1{font-size:30px;font-weight:300;line-height:40px;letter-spacing:-.5px}.nu2-subheading-2{font-family:Montserrat,sans-serif;font-size:24px;font-style:normal;font-weight:400;line-height:32px;letter-spacing:0}.nu2-subheading-3{font-size:20px}.nu2-subheading-3,.nu2-subheading-4{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;line-height:24px;letter-spacing:0}.nu2-subheading-4{font-size:18px}.nu2-subheading-5{font-family:Montserrat,sans-serif;font-size:16px;font-style:normal;font-weight:400;line-height:20px;letter-spacing:0}.nu2-body-large{font-size:18px}.nu2-body-large,.nu2-body-regular{font-family:Open Sans,sans-serif;font-style:normal;font-weight:400;line-height:24px;letter-spacing:0}.nu2-body-regular{font-size:16px}.nu2-body-small-semibold{font-family:Open Sans;font-size:12px;font-weight:600;line-height:17px;letter-spacing:0}.nu2-body-small{font-size:14px}.nu2-body-small,.nu2-body-smaller{font-family:Open Sans,sans-serif;font-style:normal;font-weight:400;line-height:20px;letter-spacing:0}.nu2-body-smaller{font-size:13px}.nu2-body-smallest{font-family:Open Sans,sans-serif;font-size:12px;font-style:normal;font-weight:400;line-height:16px;letter-spacing:0}.nu2-button-large{font-size:16px;line-height:20px}.nu2-button-large,.nu2-button-regular{font-family:Open Sans,sans-serif;font-style:normal;font-weight:600;letter-spacing:0}.nu2-button-regular{font-size:14px;line-height:16px}.nu2-caption-1{font-size:14px;font-weight:400}.nu2-caption-1,.nu2-caption-2{font-family:Open Sans,sans-serif;font-style:normal;line-height:20px;letter-spacing:0}.nu2-caption-2{font-size:13px;font-weight:700}.nu2-caption-3{font-size:13px;line-height:20px}.nu2-caption-3,.nu2-caption-4{font-family:Open Sans,sans-serif;font-style:normal;font-weight:600;letter-spacing:0}.nu2-caption-4{font-size:12px;line-height:16px}.nu2-caption-5{font-weight:600}.nu2-caption-5,.nu2-caption-6{font-family:Open Sans,sans-serif;font-size:11px;font-style:normal;line-height:16px;letter-spacing:0}.nu2-caption-6{font-weight:400}.nu2-overline{font-weight:600;letter-spacing:1.5px}.nu2-caption-overline,.nu2-overline{font-family:Open Sans,sans-serif;font-size:10px;font-style:normal;line-height:16px}.nu2-caption-overline{font-weight:400;letter-spacing:1.2px}.nu2-caption-small-regular{font-size:12px}.nu2-caption-large-regular,.nu2-caption-small-regular{font-family:Open Sans,sans-serif;font-style:normal;font-weight:400;line-height:16px}.nu2-caption-large-regular{font-size:14px}.nu2-caption-large-bold{font-family:Open Sans,sans-serif;font-size:14px;font-style:normal;font-weight:700;line-height:20px;letter-spacing:0;text-align:left}.nu2-link,.nu2-link:hover{color:#195249}.tooltip{position:absolute;z-index:1001;max-width:250px;background-color:#14282e;border-radius:4px;color:#fff;padding:10px}.tooltip>*{display:block;padding:8px}.tooltip-arrow{position:absolute;z-index:1001}.tooltip-arrow.bottom{border-bottom:5px solid #14282e}.tooltip-arrow.bottom,.tooltip-arrow.top{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent}.tooltip-arrow.top{border-top:5px solid #14282e}.tooltip-arrow.left{border-left:5px solid #14282e}.tooltip-arrow.left,.tooltip-arrow.right{width:0;height:0;border-top:5px solid transparent;border-bottom:5px solid transparent}.tooltip-arrow.right{border-right:5px solid #14282e}.tooltip-header{font-size:14px}.tooltip-body{font-size:12px}.coming-soon-tooltip-container{min-width:200px;padding:0}.coming-soon-tooltip-container .coming-soon-feature-text{padding:10px;line-height:18px;font-size:13px}.coming-soon-header{display:flex;background-color:#404652;border-radius:5px 5px 0 0}.coming-soon-header span{flex:1;padding:5px 5px 5px 10px;font-weight:700}.coming-soon-header .coming-soon-header-ribbon{position:relative;border-radius:0 5px 0 0;padding:5px 10px;background-color:#131519;color:#faa72d;font-size:13px}.coming-soon-header .coming-soon-header-ribbon:before{content:"";width:10px;position:absolute;background:#131519;top:0;left:-5px;bottom:0;transform:skew(-20deg)}*{margin:0;padding:0;border:0;outline:none}h2{font-size:18px}h2,h3{font-weight:400}h3{font-size:16px}a.fx-underline{font-weight:700;font-size:inherit}a.fx-underline:hover{color:inherit;text-decoration:underline}a.primary[disabled],a.primary[disabled]:hover{background:hsla(0,0%,67.8%,.2)!important;color:#b9b9b9!important;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:unset;pointer-events:none}.fx-center-all{display:flex;-moz-justify-content:center;-ms-justify-content:center;justify-content:center;-ms-flex-pack:center;-moz-align-items:center;-ms-align-items:center;align-items:center}.fx-center-horizontal-without-flex{top:0;left:0;right:0;margin:0 auto;position:absolute}.fx-center-vertical{display:flex;-moz-flex-direction:row;flex-direction:row;-moz-align-items:center;-ms-align-items:center;align-items:center}.fx-center-vertical-without-flex{position:absolute;margin:0 auto;left:0;right:0}.fx-center-column{display:flex;-moz-flex-direction:column;flex-direction:column;-moz-align-items:center;-ms-align-items:center;align-items:center}.fx-center-without-flex{transform:translate(-50%,-50%);left:50%;top:50%;position:absolute}.fx-justify-space-between{display:flex;-moz-justify-content:space-between;-ms-justify-content:space-between;justify-content:space-between;-ms-flex-pack:space-between}.fx-left{float:left;text-align:left}.fx-right{float:right}.fx-right,.fx-text-right{text-align:right}.fx-center{margin:0 auto;text-align:center}.fx-hidden{display:none!important}.fx-invisible-hidden{position:absolute;visibility:hidden}.fx-invisible{visibility:hidden}.fx-round{border-radius:100%}.fx-not-round{border-radius:0}.fx-floating{position:absolute;z-index:1}.fx-no-padding{padding:0}.fx-no-margin{margin:0}.fx-padding{padding:10px}.fx-margin{margin:10px}.fx-margin-top-5{margin-top:5px}.fx-margin-top-10{margin-top:10px}.fx-margin-top-12{margin-top:12px}.fx-margin-top-20{margin-top:20px}.fx-margin-top-24{margin-top:24px}.fx-margin-top-30{margin-top:30px}.fx-margin-right-5{margin-right:5px}.fx-margin-right-50{margin-right:50px}.fx-padding-top-5{padding-top:5px}.fx-padding-top-10{padding-top:10px}.fx-padding-top-20{padding-top:20px}.fx-padding-bottom-20{padding-bottom:20px}.fx-margin-bottom-5{margin-bottom:5px}.fx-margin-bottom-10{margin-bottom:10px}.fx-margin-bottom-15{margin-bottom:15px}.fx-margin-bottom-20{margin-bottom:20px}.fx-margin-bottom-25{margin-bottom:25px}.fx-margin-bottom-30{margin-bottom:30px}.fx-padding-bottom-5{padding-bottom:5px}.fx-padding-bottom-10{padding-bottom:10px}.fx-no-float{float:none}.fx-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.fx-whitespace-nowrap{white-space:nowrap!important}.fx-cover,.fx-span-both{height:100%;width:100%}.fx-span-width{width:100%}.fx-span-height{height:100%}.fx-span-height-100vh{height:100vh}.fx-height-auto{height:auto}.fx-height-inherit{height:inherit}.fx-cover{position:absolute;overflow:hidden;z-index:1}.fx-fix-top{top:0}.fx-fix-bottom{bottom:0}.fx-fix-right{right:0}.fx-fix-left{left:0}.fx-fix-top-left{top:0;left:0}.fx-fix-top-right{top:0;right:0}.fx-overflow-hidden{overflow:hidden}.fx-overflow-y{overflow-y:auto}.fx-overflow-x{overflow-x:auto}.fx-overflow-y-hidden{overflow-y:hidden}.fx-overflow-x-hidden{overflow-x:hidden}.fx-invisible-item{position:absolute;visibility:hidden;height:0}.fx-no-selection{-webkit-user-select:none;-moz-user-select:none;user-select:none}.fx-fill-screen-height{height:100vh}.fx-pointer-events-none{pointer-events:none}.fx-pointer-events-auto{pointer-events:auto}.fx-fade-out{opacity:.3}.fx-capitalize{text-transform:capitalize}.fx-display-inline-block{display:inline-block}.fx-flex-expand{flex:1}.fx-flex{display:flex}.fx-align-center{-moz-align-items:center;-ms-align-items:center;align-items:center}.fx-justify-center{-moz-justify-content:center;-ms-justify-content:center;justify-content:center;-ms-flex-pack:center}div.extra-light-grey{background-color:#f2f2f2}button.extra-light-grey{background-color:#fff;color:#f2f2f2}a.extra-light-grey,button.extra-light-grey .nu-icon,h1.extra-light-grey,h2.extra-light-grey,h3.extra-light-grey,i.extra-light-grey,label.extra-light-grey,p.extra-light-grey,span.extra-light-grey{color:#f2f2f2}div.light-grey{background-color:#e4e4e4}button.light-grey{background-color:#fefefe;color:#e4e4e4}a.light-grey,button.light-grey .nu-icon,h1.light-grey,h2.light-grey,h3.light-grey,i.light-grey,label.light-grey,p.light-grey,span.light-grey{color:#e4e4e4}div.medium-grey{background-color:#d8d8d8}button.medium-grey{background-color:#f2f2f2;color:#d8d8d8}a.medium-grey,button.medium-grey .nu-icon,h1.medium-grey,h2.medium-grey,h3.medium-grey,i.medium-grey,label.medium-grey,p.medium-grey,span.medium-grey{color:#d8d8d8}div.grey{background-color:#a09f9f}button.grey{background-color:#b9b9b9}a.grey,button.grey,button.grey .nu-icon,h1.grey,h2.grey,h3.grey,i.grey,label.grey,p.grey,span.grey{color:#a09f9f}div.dark-grey{background-color:#696969}button.dark-grey{background-color:#838383;color:#696969}a.dark-grey,button.dark-grey .nu-icon,h1.dark-grey,h2.dark-grey,h3.dark-grey,i.dark-grey,label.dark-grey,p.dark-grey,span.dark-grey{color:#696969}div.crimson{background-color:#f05758}button.crimson{background-color:#f48687;color:#f05758}a.crimson,button.crimson .nu-icon,h1.crimson,h2.crimson,h3.crimson,i.crimson,label.crimson,p.crimson,span.crimson{color:#f05758}div.black{background-color:#141414}button.black{background-color:#2e2e2e}a.black,button.black,button.black .nu-icon,h1.black,h2.black,h3.black,i.black,label.black,p.black,span.black{color:#141414}div.yellow{background-color:#faa72d}button.yellow{background-color:#fbbc5f;color:#faa72d}a.yellow,button.yellow .nu-icon,h1.yellow,h2.yellow,h3.yellow,i.yellow,label.yellow,p.yellow,span.yellow{color:#faa72d}div.light-yellow{background-color:#fdc977}button.light-yellow{background-color:#fedda9;color:#fdc977}a.light-yellow,button.light-yellow .nu-icon,h1.light-yellow,h2.light-yellow,h3.light-yellow,i.light-yellow,label.light-yellow,p.light-yellow,span.light-yellow{color:#fdc977}div.blue{background-color:#1a7bb9}button.blue{background-color:#2698e0}a.blue,button.blue,button.blue .nu-icon,h1.blue,h2.blue,h3.blue,i.blue,label.blue,p.blue,span.blue{color:#1a7bb9}div.green{background-color:#6da067}button.green{background-color:#8bb486}a.green,button.green,button.green .nu-icon,h1.green,h2.green,h3.green,i.green,label.green,p.green,span.green{color:#6da067}button.white,div.white{background-color:#fff}a.white,button.white,button.white .nu-icon,h1.white,h2.white,h3.white,i.white,label.white,p.white,span.white{color:#fff}div.facebook{background-color:#324b7f}button.facebook{background-color:#4061a4;color:#324b7f}a.facebook,button.facebook .nu-icon,h1.facebook,h2.facebook,h3.facebook,i.facebook,label.facebook,p.facebook,span.facebook{color:#324b7f}div.twitter{background-color:#339dc3}button.twitter{background-color:#56b2d3;color:#339dc3}a.twitter,button.twitter .nu-icon,h1.twitter,h2.twitter,h3.twitter,i.twitter,label.twitter,p.twitter,span.twitter{color:#339dc3}div.google{background-color:#dc4535}button.google{background-color:#e46d60;color:#dc4535}a.google,button.google .nu-icon,h1.google,h2.google,h3.google,i.google,label.google,p.google,span.google{color:#dc4535}div.linkedin{background-color:#025a84}button.linkedin{background-color:#037cb6;color:#025a84}a.linkedin,button.linkedin .nu-icon,h1.linkedin,h2.linkedin,h3.linkedin,i.linkedin,label.linkedin,p.linkedin,span.linkedin{color:#025a84}.ps__thumb-x,.ps__thumb-y{background-color:rgba(42,82,94,.3)!important}.ps__rail-x,.ps__rail-y{background-color:unset!important}.fx-button{transition:background-color .5s ease;border:none;text-align:center;padding-left:5px;padding-right:5px;cursor:pointer}.fx-button.fx-block{border-radius:5px;display:block}.fx-button.fx-outline{background-color:transparent}.fx-button:focus{outline:none}.fx-button.fx-icon{height:100%;background-color:transparent}.fx-button img{border:none}.fx-button.fx-floating{text-align:center}.fx-button.fx-floating.top{top:10px}.fx-button.fx-floating.fx-right{right:15px}.fx-button.fx-floating.fx-left{left:15px}.fx-button.fx-round{width:45px;height:45px}.fx-text-reset *{font-family:initial;font-size:medium;color:initial;font:initial;font-style:normal;font-variant:normal;font-weight:400;letter-spacing:normal;line-height:normal;text-align:initial;-moz-text-align-last:initial;text-align-last:auto;text-decoration:initial;-webkit-text-decoration-line:initial;text-decoration-line:none;-webkit-text-decoration-style:initial;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;vertical-align:initial;white-space:normal;word-spacing:normal;-webkit-font-smoothing:initial}.fx-text-reset em,.fx-text-reset i{font-style:italic}.fx-text-reset sup{vertical-align:super;font-size:smaller}.fx-text-reset sub{vertical-align:sub;font-size:smaller}.fx-text-reset b{font-weight:700}.fx-text-reset del,.fx-text-reset s,.fx-text-reset strike{text-decoration:line-through}.switch.switch-small{min-width:33px}.switch.switch-medium{min-width:50px}.switch.switch-large{min-width:60px}.switch.switch-small>.switch-pane>span{font-size:9px}.switch.switch-large>.switch-pane>span,.switch.switch-medium>.switch-pane>span{font-size:16px}.switch{border:1px solid #dfdfdf;position:relative;display:inline-block;box-sizing:content-box;padding:0;margin:0;cursor:pointer;box-shadow:inset 0 0 0 0 #dfdfdf;white-space:nowrap}.switch,.switch small{transition:all .3s ease-out;-webkit-transition:all .3s ease-out}.switch small{border-radius:100%;box-shadow:0 1px 3px rgba(0,0,0,.4);position:absolute;top:0;right:calc(100% - 30px);background:#fff;display:flex;align-items:center;justify-content:center}.switch.switch-small{height:20px;border-radius:20px}.switch.switch-small small{width:20px;height:20px;right:calc(100% - 20px)}.switch.switch-small>.switch-pane>span{line-height:20px}.switch.switch-small>.switch-pane .switch-label-checked{padding-right:25px;padding-left:10px}.switch.switch-small>.switch-pane .switch-label-unchecked{padding-left:25px;padding-right:10px}.switch.switch-medium{height:30px;border-radius:30px}.switch.switch-medium small{width:30px;height:30px;right:calc(100% - 30px)}.switch.switch-medium>.switch-pane>span{line-height:30px}.switch.switch-medium>.switch-pane .switch-label-checked{padding-right:35px;padding-left:15px}.switch.switch-medium>.switch-pane .switch-label-unchecked{padding-left:35px;padding-right:15px}.switch.switch-large{height:40px;border-radius:40px}.switch.switch-large small{width:40px;height:40px;right:calc(100% - 40px)}.switch.switch-large>.switch-pane>span{line-height:40px}.switch.switch-large>.switch-pane .switch-label-checked{padding-right:45px;padding-left:20px}.switch.switch-large>.switch-pane .switch-label-unchecked{padding-left:45px;padding-right:20px}.switch.checked{background:#64bd63}.switch.checked small{right:0;left:auto}.switch.checked .switch-pane{top:0}.switch.checked .switch-pane .switch-label-checked{opacity:1}.switch.checked .switch-pane .switch-label-unchecked{opacity:0}.switch.disabled{opacity:.5;cursor:not-allowed}.switch .switch-pane{display:flex;flex-direction:column;height:100%;min-height:100%;justify-content:flex-start;align-items:center;top:-100%;position:relative;pointer-events:none}.switch .switch-pane>span{display:block;min-height:100%}.switch .switch-pane .switch-label{color:#000}.switch .switch-pane .switch-label-checked{opacity:0}.switch .switch-pane .switch-label-unchecked{opacity:1}.switch.loading{background-color:#f1f1f1}.switch.loading small{background-color:transparent;border:none;box-shadow:none;right:50%;transform:translateX(50%)}*{font-family:Open Sans,sans-serif;font-size:14px;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}body{color:#04263d;overflow:hidden}body div.primary{background-color:#40b29e}body button.primary{background-color:#eef9f7;color:#25675b;border:1px solid #40b29e}body a.primary,body button.primary .nu-icon,body h1.primary,body h2.primary,body h3.primary,body i.primary,body label.primary,body p.primary,body span.primary{color:#40b29e}body div.secondary{background-color:#f6f6fa}body button.secondary{background-color:#fff;color:#b4b4d6;border:1px solid #f6f6fa}body a.secondary,body button.secondary .nu-icon,body h1.secondary,body h2.secondary,body h3.secondary,body i.secondary,body label.secondary,body p.secondary,body span.secondary{color:#f6f6fa}body div.dark-blue{background-color:#04263d}body button.dark-blue{background-color:#43acf3;color:#000;border:1px solid #04263d}body a.dark-blue,body button.dark-blue .nu-icon,body h1.dark-blue,body h2.dark-blue,body h3.dark-blue,body i.dark-blue,body label.dark-blue,body p.dark-blue,body span.dark-blue{color:#04263d}body div.light-purple{background-color:#c3c3de}body button.light-purple{background-color:#fff;color:#8181ba;border:1px solid #c3c3de}body a.light-purple,body button.light-purple .nu-icon,body h1.light-purple,body h2.light-purple,body h3.light-purple,body i.light-purple,body label.light-purple,body p.light-purple,body span.light-purple{color:#c3c3de}body div.xlight-grey{background-color:#f0f0f0}body button.xlight-grey{background-color:#fff;color:#bdbdbd;border:1px solid #f0f0f0}body a.xlight-grey,body button.xlight-grey .nu-icon,body h1.xlight-grey,body h2.xlight-grey,body h3.xlight-grey,body i.xlight-grey,body label.xlight-grey,body p.xlight-grey,body span.xlight-grey{color:#f0f0f0}body div.light-grey{background-color:#ececec}body button.light-grey{background-color:#fff;color:#b9b9b9;border:1px solid #ececec}body a.light-grey,body button.light-grey .nu-icon,body h1.light-grey,body h2.light-grey,body h3.light-grey,body i.light-grey,body label.light-grey,body p.light-grey,body span.light-grey{color:#ececec}body div.xmedium-grey{background-color:#dcdcdc}body button.xmedium-grey{background-color:#fff;color:#a9a9a9;border:1px solid #dcdcdc}body a.xmedium-grey,body button.xmedium-grey .nu-icon,body h1.xmedium-grey,body h2.xmedium-grey,body h3.xmedium-grey,body i.xmedium-grey,body label.xmedium-grey,body p.xmedium-grey,body span.xmedium-grey{color:#dcdcdc}body div.medium-grey{background-color:#aaa}body button.medium-grey{background-color:#fff;color:#777;border:1px solid #aaa}body a.medium-grey,body button.medium-grey .nu-icon,body h1.medium-grey,body h2.medium-grey,body h3.medium-grey,body i.medium-grey,body label.medium-grey,body p.medium-grey,body span.medium-grey{color:#aaa}body div.grey{background-color:#7e7e7e}body button.grey{background-color:#f8f8f8;color:#4b4b4b;border:1px solid #7e7e7e}body a.grey,body button.grey .nu-icon,body h1.grey,body h2.grey,body h3.grey,body i.grey,body label.grey,body p.grey,body span.grey{color:#7e7e7e}body div.blueish-grey{background-color:#f3f5fa}body button.blueish-grey{background-color:#fff;color:#abb9dc;border:1px solid #f3f5fa}body a.blueish-grey,body button.blueish-grey .nu-icon,body h1.blueish-grey,body h2.blueish-grey,body h3.blueish-grey,body i.blueish-grey,body label.blueish-grey,body p.blueish-grey,body span.blueish-grey{color:#f3f5fa}body div.light-nv-blue{background-color:#627281}body button.light-nv-blue{background-color:#e9ecef;color:#363f47;border:1px solid #627281}body a.light-nv-blue,body button.light-nv-blue .nu-icon,body h1.light-nv-blue,body h2.light-nv-blue,body h3.light-nv-blue,body i.light-nv-blue,body label.light-nv-blue,body p.light-nv-blue,body span.light-nv-blue{color:#627281}body div.navy-blue{background-color:#415a71}body button.navy-blue{background-color:#c8d4df;color:#1c2630;border:1px solid #415a71}body a.navy-blue,body button.navy-blue .nu-icon,body h1.navy-blue,body h2.navy-blue,body h3.navy-blue,body i.navy-blue,body label.navy-blue,body p.navy-blue,body span.navy-blue{color:#415a71}body div.navy-blue-off{background-color:#414b61}body button.navy-blue-off{background-color:#c1c8d6;color:#181c24;border:1px solid #414b61}body a.navy-blue-off,body button.navy-blue-off .nu-icon,body h1.navy-blue-off,body h2.navy-blue-off,body h3.navy-blue-off,body i.navy-blue-off,body label.navy-blue-off,body p.navy-blue-off,body span.navy-blue-off{color:#414b61}body button.white,body div.white{background-color:#fff}body button.white{color:#ccc;border:1px solid #fff}body a.white,body button.white .nu-icon,body h1.white,body h2.white,body h3.white,body i.white,body label.white,body p.white,body span.white{color:#fff}body div.beige{background-color:#f9f8f7}body button.beige{background-color:#fff;color:#cdc5bd;border:1px solid #f9f8f7}body a.beige,body button.beige .nu-icon,body h1.beige,body h2.beige,body h3.beige,body i.beige,body label.beige,body p.beige,body span.beige{color:#f9f8f7}body div.orange{background-color:#f6aa00}body button.orange{background-color:#fff9ec;color:#906400;border:1px solid #f6aa00}body a.orange,body button.orange .nu-icon,body h1.orange,body h2.orange,body h3.orange,body i.orange,body label.orange,body p.orange,body span.orange{color:#f6aa00}body div.light-orange{background-color:#f5ab1c}body button.light-orange{background-color:#fff;color:#a46e07;border:1px solid #f5ab1c}body a.light-orange,body button.light-orange .nu-icon,body h1.light-orange,body h2.light-orange,body h3.light-orange,body i.light-orange,body label.light-orange,body p.light-orange,body span.light-orange{color:#f5ab1c}body div.dark-orange{background-color:#fab638}body button.dark-orange{background-color:#fff;color:#c78305;border:1px solid #fab638}body a.dark-orange,body button.dark-orange .nu-icon,body h1.dark-orange,body h2.dark-orange,body h3.dark-orange,body i.dark-orange,body label.dark-orange,body p.dark-orange,body span.dark-orange{color:#fab638}body div.crimson{background-color:#f36c67}body button.crimson{background-color:#fff;color:#e21912;border:1px solid #f36c67}body a.crimson,body button.crimson .nu-icon,body h1.crimson,body h2.crimson,body h3.crimson,body i.crimson,body label.crimson,body p.crimson,body span.crimson{color:#f36c67}body div.black{background-color:#686868}body button.black{background-color:#e2e2e2;color:#353535;border:1px solid #686868}body a.black,body button.black .nu-icon,body h1.black,body h2.black,body h3.black,body i.black,body label.black,body p.black,body span.black{color:#686868}body div.green{background-color:#61a15e}body button.green{background-color:#f9fbf9;color:#3a6138;border:1px solid #61a15e}body a.green,body button.green .nu-icon,body h1.green,body h2.green,body h3.green,body i.green,body label.green,body p.green,body span.green{color:#61a15e}body div.yellow{background-color:#ffc648}body button.yellow{background-color:#fff;color:#e19b00;border:1px solid #ffc648}body a.yellow,body button.yellow .nu-icon,body h1.yellow,body h2.yellow,body h3.yellow,body i.yellow,body label.yellow,body p.yellow,body span.yellow{color:#ffc648}body div.purple{background-color:#5d3eaa}body button.purple{background-color:#ebe7f6;color:#34235f;border:1px solid #5d3eaa}body a.purple,body button.purple .nu-icon,body h1.purple,body h2.purple,body h3.purple,body i.purple,body label.purple,body p.purple,body span.purple{color:#5d3eaa}body div.light-red{background-color:#f05252}body button.light-red{background-color:#fff;color:#ca1212;border:1px solid #f05252}body a.light-red,body button.light-red .nu-icon,body h1.light-red,body h2.light-red,body h3.light-red,body i.light-red,body label.light-red,body p.light-red,body span.light-red{color:#f05252}body div.peachy-white{background-color:#fae8e5}body button.peachy-white{background-color:#fff;color:#ea9c8f;border:1px solid #fae8e5}body a.peachy-white,body button.peachy-white .nu-icon,body h1.peachy-white,body h2.peachy-white,body h3.peachy-white,body i.peachy-white,body label.peachy-white,body p.peachy-white,body span.peachy-white{color:#fae8e5}body div.charade{background-color:#3d4242}body button.charade{background-color:#b7bdbd;color:#0c0d0d;border:1px solid #3d4242}body a.charade,body button.charade .nu-icon,body h1.charade,body h2.charade,body h3.charade,body i.charade,body label.charade,body p.charade,body span.charade{color:#3d4242}body div.light-green{background-color:#dcf2ee}body button.light-green{background-color:#fff;color:#92d6ca;border:1px solid #dcf2ee}body a.light-green,body button.light-green .nu-icon,body h1.light-green,body h2.light-green,body h3.light-green,body i.light-green,body label.light-green,body p.light-green,body span.light-green{color:#dcf2ee}body div.dark-grey{background-color:#14282e}body button.dark-grey{background-color:#74b1c3;color:#000;border:1px solid #14282e}body a.dark-grey,body button.dark-grey .nu-icon,body h1.dark-grey,body h2.dark-grey,body h3.dark-grey,body i.dark-grey,body label.dark-grey,body p.dark-grey,body span.dark-grey{color:#14282e}body div.dark-red{background-color:#d92626}body button.dark-red{background-color:#fdf6f6;color:#821717;border:1px solid #d92626}body a.dark-red,body button.dark-red .nu-icon,body h1.dark-red,body h2.dark-red,body h3.dark-red,body i.dark-red,body label.dark-red,body p.dark-red,body span.dark-red{color:#d92626}body div.mlight-grey{background-color:#caccce}body button.mlight-grey{background-color:#fff;color:#95999d;border:1px solid #caccce}body a.mlight-grey,body button.mlight-grey .nu-icon,body h1.mlight-grey,body h2.mlight-grey,body h3.mlight-grey,body i.mlight-grey,body label.mlight-grey,body p.mlight-grey,body span.mlight-grey{color:#caccce}body div.mint-cream{background-color:#f4fcfa}body button.mint-cream{background-color:#fff;color:#a4e6d6;border:1px solid #f4fcfa}body a.mint-cream,body button.mint-cream .nu-icon,body h1.mint-cream,body h2.mint-cream,body h3.mint-cream,body i.mint-cream,body label.mint-cream,body p.mint-cream,body span.mint-cream{color:#f4fcfa}body div.ne-red{background-color:#f05151}body button.ne-red{background-color:#fff;color:#ca1111;border:1px solid #f05151}body a.ne-red,body button.ne-red .nu-icon,body h1.ne-red,body h2.ne-red,body h3.ne-red,body i.ne-red,body label.ne-red,body p.ne-red,body span.ne-red{color:#f05151}body div.ne-grey{background-color:#a0a0a0}body button.ne-grey{background-color:#fff;color:#6d6d6d;border:1px solid #a0a0a0}body a.ne-grey,body button.ne-grey .nu-icon,body h1.ne-grey,body h2.ne-grey,body h3.ne-grey,body i.ne-grey,body label.ne-grey,body p.ne-grey,body span.ne-grey{color:#a0a0a0}body div.ne-blue{background-color:#06263d}body button.ne-blue{background-color:#4ba9ed;color:#000;border:1px solid #06263d}body a.ne-blue,body button.ne-blue .nu-icon,body h1.ne-blue,body h2.ne-blue,body h3.ne-blue,body i.ne-blue,body label.ne-blue,body p.ne-blue,body span.ne-blue{color:#06263d}h1{font-size:14px;margin:0}h1,h2,h3,h4{font-weight:400;font-family:Open Sans,sans-serif}label{font-size:13px}a{cursor:pointer;text-decoration:none}a:hover,a:hover .nu-icon{color:#61a15e}p{line-height:20px}a,div[contenteditable=true],h1,h2,h3,h4,input,label,p,span,textarea{-webkit-user-select:text;-moz-user-select:text;user-select:text}.heading-font{font-family:Questrial,sans-serif}.invalid-email,.invalid-text{color:#d92626;font-size:inherit}a.beige:hover,a.beige:hover .nu-icon,a.black:hover,a.black:hover .nu-icon,a.blueish-grey:hover,a.blueish-grey:hover .nu-icon,a.charade:hover,a.charade:hover .nu-icon,a.crimson:hover,a.crimson:hover .nu-icon,a.dark-blue:hover,a.dark-blue:hover .nu-icon,a.dark-grey:hover,a.dark-grey:hover .nu-icon,a.dark-orange:hover,a.dark-orange:hover .nu-icon,a.dark-red:hover,a.dark-red:hover .nu-icon,a.green:hover,a.green:hover .nu-icon,a.grey:hover,a.grey:hover .nu-icon,a.light-green:hover,a.light-green:hover .nu-icon,a.light-grey:hover,a.light-grey:hover .nu-icon,a.light-nv-blue:hover,a.light-nv-blue:hover .nu-icon,a.light-orange:hover,a.light-orange:hover .nu-icon,a.light-purple:hover,a.light-purple:hover .nu-icon,a.light-red:hover,a.light-red:hover .nu-icon,a.medium-grey:hover,a.medium-grey:hover .nu-icon,a.mint-cream:hover,a.mint-cream:hover .nu-icon,a.mlight-grey:hover,a.mlight-grey:hover .nu-icon,a.navy-blue-off:hover,a.navy-blue-off:hover .nu-icon,a.navy-blue:hover,a.navy-blue:hover .nu-icon,a.ne-blue:hover,a.ne-blue:hover .nu-icon,a.ne-grey:hover,a.ne-grey:hover .nu-icon,a.ne-red:hover,a.ne-red:hover .nu-icon,a.orange:hover,a.orange:hover .nu-icon,a.peachy-white:hover,a.peachy-white:hover .nu-icon,a.primary:hover,a.primary:hover .nu-icon,a.purple:hover,a.purple:hover .nu-icon,a.secondary:hover,a.secondary:hover .nu-icon,a.white:hover,a.white:hover .nu-icon,a.xlight-grey:hover,a.xlight-grey:hover .nu-icon,a.xmedium-grey:hover,a.xmedium-grey:hover .nu-icon,a.yellow:hover,a.yellow:hover .nu-icon{color:#61a15e}#facebook-jssdk-iframe{display:none}.nu-overlay-blur,router-outlet.nu-overlay-blur:first-of-type+*{filter:blur(5px);transform:translateZ(0)}.nu-text-primary{font-size:14px}.nu-text-xsmall{font-size:12px}.nu-text-small{font-size:13px}.nu-text-medium{font-size:16px}.nu-text-bold{font-family:lt_bold,Open Sans,sans-serif}.has-shadow{box-shadow:0 2px 2px #c3c3de}.nu-beta-tag{padding:2px 3px;background-color:#ffc648;color:#04263d;border-radius:2px;font-size:11px;display:inline-block}.left-sidebar-panel{width:264px}.left-sidebar-panel.collapsing,.left-sidebar-panel.expanded,.left-sidebar-panel.shrinking{width:890px}.left-sidebar-panel.closed{transform:translateX(-215px);width:0}.left-sidebar-panel-padding{padding-left:10px;padding-right:10px}.cformat-container{height:100vh;width:264px;padding-right:20px}.cformat-container h2{padding-top:10px;min-width:190px;font-family:Open Sans;font-style:normal;font-weight:700;font-size:14px;line-height:20px}.cformat-container-header-container{padding:6px 6px 6px 0;display:flex;flex-direction:row;align-content:space-between}.cformat-container-header-container .cformat-container-header{font-family:Open Sans;font-style:normal;font-weight:700;font-size:14px;line-height:20px}.cformat-container-add-rule-btn{color:#04263d;display:flex;flex-direction:row;align-items:center;margin-top:18px;border:1px solid rgba(42,82,94,.3);box-sizing:border-box;border-radius:4px;width:143px;height:30px;cursor:pointer}.cformat-container-add-rule-btn:hover,.cformat-container-add-rule-btn:hover .nu-icon{color:#29947f}.cformat-container-add-rule-btn .nu-icon{color:#04263d;width:30px;height:30px;cursor:pointer}.cformat-container-add-rule-btn label{cursor:pointer;font-family:Open Sans;font-style:normal;font-weight:600;font-size:14px;line-height:16px}.cformat-new-rule-container{padding-right:20px}.cformat-new-rule-container .form-control{border:.5px solid rgba(42,82,94,.3);padding:8px;height:36px;margin-top:8px;border-radius:4px;width:100%}.cformat-new-rule-container .cformat-new-rule-condition-container,.cformat-new-rule-container .cformat-new-rule-target-selection{margin-bottom:32px}.cformat-new-rule-container .cformat-new-rule-condition-container .cformat-new-rule-condition-item .cformat-new-rule-condition-item-combinator{display:flex;flex-direction:row;align-items:flex-start;margin-right:8px}.cformat-new-rule-container .cformat-new-rule-condition-container .cformat-new-rule-condition-item .cformat-new-rule-condition-item-combinator button{border-radius:4px;padding:4px}.cformat-new-rule-container .cformat-new-rule-condition-container .cformat-new-rule-condition-item .cformat-new-rule-condition-item-combinator buttonactive{background:rgba(81,192,170,.2)}.cformat-buttons-container{margin-top:32px;display:flex;flex-direction:row}.cformat-buttons-container button{cursor:pointer;width:74px;height:30px;color:#fff;border-radius:4px;margin-right:16px}.cformat-buttons-container button:disabled{cursor:auto;background:#caccce}.cformat-buttons-container .cformat-buttons-save{background:#29947f}.cformat-buttons-container .cformat-buttons-cancel{border:1px solid rgba(42,82,94,.3);background:none;color:#000}.cformat-rules-container{margin-top:18px;width:230px;height:100vh}.cformat-rules-container .cformat-rule-item-container{display:flex;flex-direction:row;align-items:center;padding:0;width:100%;margin-bottom:18px}.cformat-rules-container .cformat-rule-item-container .rule-options-dd{max-width:40px;margin-right:8px}.cformat-rules-container .cformat-rule-item-container p.disabled{color:#caccce}.mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#29947f!important}.cformat-rules-rule-icon-container{display:flex;align-items:center;justify-content:center;background:#f1f4fa;border:.5px solid rgba(202,204,206,.5);box-sizing:border-box;border-radius:4px;margin-right:8px;width:24px;height:24px}.cformat-rules-rule-icon-container .nu-icon{width:16px;height:16px;color:#caccce}.cformat-rules-rule-icon-container-active{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65);border:.5px solid #51c0aa}.cformat-rules-rule-icon-container-active .nu-icon{color:#40b29e}.cformat-rules-rule-option-item{height:28px;padding:4px;border-radius:4px}.cformat-rules-rule-option-item:hover{background:#dcf2ee}.cformat-rule-rule-option-separator{position:absolute;width:600px;height:0;margin-top:0;opacity:1%;border:1px solid #dcf2ee}.cformat-style-value-input{display:block;margin-top:8px}.form-control-select-option{border-radius:4px;margin:4px}.form-control-select-option:hover{background:#dcf2ee!important}.form-control-select-option.mat-active{background:rgba(81,192,170,.2)!important}.mat-select-search-input{padding-right:0!important}.mat-select-search-inner{width:239px!important}.mat-form-field-wrapper{padding-bottom:0!important}.mat-form-field-underline{display:none}'],encapsulation:2,changeDetection:0}),e}()},"h/AH":function(e,t,n){e.exports=function(){"use strict";function e(e){for(var t,n=e.length,r=5381,i=52711;n--;)r=33*r^(t=e.charCodeAt(n)),i=33*i^t;return 4096*(r>>>0)+(i>>>0)}var t=function(e,t){return e.reduce((function(e,n){var r="[object "+n+"]";return t?e[r]=n:e[n]=r,e}),{})},n=function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})},r=["Array","Arguments","Object","RegExp","Symbol","Map","Set","Date","Error","Event","Generator","Promise","WeakMap","WeakSet","DocumentFragment","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","ArrayBuffer","DataView","DocumentFragment","Window","String","Number","Boolean","Function","Undefined","GeneratorFunction","BigInt","Null"],i=t(r,!1),a=t(r,!0),o=n([i.Generator,i.Promise,i.WeakMap,i.WeakSet]),s=n([i.Map,i.Set]),c=n([i.Date,i.RegExp]),l=n(["bigint","boolean","function","number","string","undefined"]),u=n([i.Arguments,i.Array]),p=n([i.RegExp,i.Symbol]),h=n([i.Float32Array,i.Float64Array,i.Int8Array,i.Int16Array,i.Int32Array,i.Uint8Array,i.Uint8ClampedArray,i.Uint16Array,i.Uint32Array]),d="undefined"!=typeof Buffer&&"function"==typeof Buffer.from,f="function"==typeof Uint16Array;function g(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function m(e){return Buffer.from(e).toString("utf8")}function v(e){return""}var b=d?m:f?g:v,y=/\[object ([HTML|SVG](.*)Element)\]/,x=Object.prototype.toString,C=Object.keys;function w(e){return{bubbles:e.bubbles,cancelBubble:e.cancelBubble,cancelable:e.cancelable,composed:e.composed,currentTarget:e.currentTarget,defaultPrevented:e.defaultPrevented,eventPhase:e.eventPhase,isTrusted:e.isTrusted,returnValue:e.returnValue,target:e.target,type:e.type}}function k(e,t){return e>t}function S(e,t){return e[0]>t[0]}function O(e,t){for(var n,r,i=0;i<e.length;++i){for(r=e[i],n=i-1;~n&&t(e[n],r);--n)e[n+1]=e[n];e[n+1]=r}return e}function E(e,t,n){var r=[];e.forEach((function(e,i){r.push([D(i,t,n),D(e,t,n)])})),O(r,S);for(var i,a=0;a<r.length;++a)i=r[a],r[a]="["+i[0]+","+i[1]+"]";return"Map|["+r.join(",")+"]"}function _(e,t,n){var r=[];return e.forEach((function(e){r.push(D(e,t,n))})),O(r,k),"Set|["+r.join(",")+"]"}function I(e){for(var t,n=O(C(e),k),r={},i=0;i<n.length;++i)r[t=n[i]]=e[t];return r}function P(e){for(var t=e.children,n=[],r=0;r<t.length;++r)n.push(t[r].outerHTML);return n.join(",")}function T(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n+1;return 0}function A(e,t,n,r){if(!r){var c=typeof e;if(l[c])return c+"|"+e;if(null===e)return e+"|"+e}var d=r||x.call(e);return u[d]?e:d===i.Object?I(e):p[d]?a[d]+"|"+e.toString():s[d]?e instanceof Map?E(e,t,n):_(e,t,n):d===i.Date?a[d]+"|"+e.getTime():d===i.Error?a[d]+"|"+e.stack:d===i.Event?w(e):o[d]?a[d]+"|NOT_ENUMERABLE":y.test(d)?d.slice(8,-1)+"|"+e.outerHTML:d===i.DocumentFragment?a[d]+"|"+P(e):h[d]?a[d]+"|"+e.join(","):d===i.ArrayBuffer?a[d]+"|"+b(e):d===i.DataView?a[d]+"|"+b(e.buffer):e}function M(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),function(n,r){if("object"==typeof r)if(e.length){var a=T(e,this);0===a?e.push(this):(e.splice(a),t.splice(a)),t.push(n);var o=T(e,r);if(0!==o)return"[~"+(t.slice(0,o).join(".")||".")+"]";e.push(r)}else e[0]=r,t[0]=n;return n&&this[n]instanceof Date?A(this[n],e,t,i.Date):A(r,e,t)}}function D(e,t,n){if(!e||"object"!=typeof e)return A(e,t,n);var r=x.call(e);return c[r]?A(e,t,n,r):JSON.stringify(e,M(t,n))}function j(t){return e(D(t))}function N(e,t){return j(e)===j(t)}function R(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);++t)if(!N(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]))return!1;return!0}function L(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);++t)if(N(e,t+1<1||arguments.length<=t+1?void 0:arguments[t+1]))return!0;return!1}function F(e,t){return j(e)!==j(t)}return N.all=R,N.any=L,N.not=F,j.is=N,j}()},hKez:function(e,t,n){var r=n("GmLw"),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},hQOw:function(e,t,n){"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:r.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:r.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return o("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(a).forEach((function(e){delete a[e]}))};var r=n("ZeiE"),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("UImk")),a=Object.create(null);function o(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==a[e]&&(a[e]=!0,i.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}},hSRu:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("YtkY"),i=n("C05f"),a=n("6Oco"),o=n("ZTXN"),s=n("NNJu"),c=n("/AMt"),l=n("EM62"),u=function(){function e(){this._data=new i.a(null),this.change=new o.a}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data.value},set:function(e){this._data.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropdownType",{get:function(){var e=Object(c.a)(this.data.value).find((function(e){return e.selected}));return e?e.buttonIcon?"icon":"text":this.props.icon?"icon":"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultItems",{get:function(){return this._data.pipe(Object(r.a)((function(e){return e.value.filter((function(e){return!e.custom}))})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customItems",{get:function(){return this._data.pipe(Object(r.a)((function(e){return e.value.filter((function(e){return e.custom}))})))},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this.data=e},e.prototype.setProperties=function(e){this.props=e},e.prototype.ngAfterViewInit=function(){var e=this;this.sub=this.absDropdown.changed.subscribe((function(t){var n=Object(c.a)(e.data.value).find((function(e){return e.id===t[0]}));e.change.next(n)}))},e.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},e.prototype.select=function(e){},e.prototype.apply=function(){},e.prototype.applyAnimated=function(){return Object(a.b)()},e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=l.ac({type:e,viewQuery:function(e,t){var n;(1&e&&l.jd(s.b,!0),2&e)&&(l.Lc(n=l.uc())&&(t.absDropdown=n.first))}}),e}()},"i+Vu":function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n("D57K"),i=n("iim9"),a=n("gZOS"),o=n("5xGT"),s=n("6Oco"),c=n("P4Xx"),l=n("g6G6"),u=n("ROBh"),p=n("J+dc"),h=n("TLy2"),d=n("xVbo"),f=n("Ohay"),g=n("YtkY"),m=n("8j5Y"),v=n("QoSw"),b=n("nsO7"),y=n("c7W3"),x=n("Xpu5"),C=n("diDk"),w=n("X0jn"),k=n("19Zn"),S=n("Jzy8"),O=n("qMyy"),E=n("xnGY"),_=n("EM62"),I=function(){function e(e,t,n,r,i,a){this.state=e,this.ll=t,this.commandService=n,this.ell=r,this.pl=i,this.subManager=a,this.projectEDataModels={}}return e.prototype.initialize=function(){this.listenToDiagramChange().subscribe(),this.listenToProjectEDataChanges().subscribe()},e.prototype.getEdataForCurrentDiagram=function(){var e=this;return this.ll.forCurrentObserver(!1).pipe(Object(p.a)(1),Object(h.a)((function(t){return t.getDiagramEData().pipe(Object(p.a)(1),Object(h.a)((function(t){return t?Object(c.a)(t.map((function(t){return e.ell.getEData(t).pipe(Object(h.a)((function(e){return e.getEDataModelOnce()})))}))):s.a})))})))},e.prototype.updateShapeLibrary=function(e){var t=this,n=Object(r.j)(this.state.get("CurrentLibraries")),a=i.b;n.filter((function(e){return e.id.includes(a)})).map((function(e){return e.id.split(a)[1]})).filter((function(t){return!e.find((function(e){return e===t}))})).forEach((function(e){var r=n.findIndex((function(t){return t.id===a+e}));r>-1&&(n.splice(r,1),t.state.set("CurrentLibraries",n))}))},e.prototype.listenToDiagramChange=function(){var e=this;return this.state.changes("CurrentDiagram").pipe(Object(d.a)((function(e){return Boolean(e)})),Object(f.a)(),Object(h.a)((function(t){return e.onDiagramChange(t)})))},e.prototype.listenToProjectEDataChanges=function(){var e=this;return this.pl.getCurrentProjectObservable().pipe(Object(g.a)((function(e){return e.eData})),Object(d.a)((function(e){return!!e&&e.length>0})),Object(f.a)(b.isEqual),Object(m.a)((function(){return e.commandService.dispatch(O.a.startEDataSubscription)})))},e.prototype.onDiagramChange=function(e){return this.migrateDataDefs(e),this.listenToDiagramEDataChanges(e)},e.prototype.migrateDataDefs=function(e){var t=this;this.subManager.getFutureSub(e).pipe(Object(h.a)((function(e){return e.status})),Object(d.a)((function(e){return e.subStatus===E.f.started})),Object(p.a)(1),Object(m.a)((function(){return t.commandService.dispatch(y.a.migrateDataDefs)}))).subscribe()},e.prototype.listenToDiagramEDataChanges=function(e){var t=this;return this.ll.forCurrentObserver(!1).pipe(Object(p.a)(1),Object(h.a)((function(e){var n=e.getDiagramEData().pipe(Object(h.a)((function(e){if(!e)return s.a;t.updateShapeLibrary(e);var n=[];return e.forEach((function(e){var r=t.ell.getEData(e).pipe(Object(h.a)((function(e){return e.getEDataModel().pipe(Object(m.a)((function(e){t.projectEDataModels[e.id]=e,t.state.set("projectEDataModels",t.projectEDataModels)})))})));n.push(r)})),l.a.apply(void 0,Object(r.j)(n))}))),i=e.getDiagramLinkChanges().pipe(Object(h.a)((function(t){return e.getDiagramOnce().pipe(Object(g.a)((function(e){return{diagram:e,change:t}})))})),Object(h.a)((function(e){var n=e.diagram,r=e.change;return t.updateConnectorLink(n,r.connector,r.modifier,!1,r.fromShape,r.toShape)})));return Object(l.a)(i,n)})))},e.prototype.getDocumentChangeModel=function(e){return this.ll.forDiagram(e,!1).getDiagramOnce().pipe(Object(g.a)((function(e){return a.Sakota.create(e)})))},e.prototype.addEDataRefToShape=function(e,t,n,r){return this.commandService.dispatch(y.a.addEDataRefToShape,{shapeId:e.id,eDataId:t,entityId:n,isSet:r})},e.prototype.updateConnectorLink=function(e,t,n,i,a,c,u){var p=this;if(void 0===u&&(u=!1),!u&&n.$set&&0===Object.keys(n.$set).filter((function(e){return/defId/.test(e)})).length)return s.a;a||(t&&t.getFromEndpoint(e)&&t.getFromEndpoint(e).shape?a=t.getFromEndpoint(e).shape:o.db.error("malformed link update request",t.id)),c||(t&&t.getToEndpoint(e)&&t.getToEndpoint(e).shape?c=t.getToEndpoint(e).shape:o.db.error("malformed link update request",t.id)),t.handshake&&!n.$unset||(i=!1);var h=[];if(a.eData&&c.eData){var d=function(n){var r=a.eData[n],o=function(o){var s=c.eData[o],l=f.getMatchingHandshake(n,r,o,s,t.handshake).pipe(Object(m.a)((function(l){p.commandService.dispatch(x.a.updateEntityLinks,n,{diagramId:e.id,fromEntityId:r,toEDataId:o,toEntityId:s,type:w.f.CONNECTOR_BI,isSet:i,handshake:l,connectorId:t.id,connectorDefId:t.defId,shapeId:c.id}),p.commandService.dispatch(x.a.updateEntityLinks,o,{diagramId:e.id,fromEntityId:s,toEDataId:n,toEntityId:r,type:w.f.CONNECTOR_BI,isSet:i,handshake:l,connectorId:t.id,connectorDefId:t.defId,shapeId:a.id})})));h.push(l)};for(var s in c.eData)o(s)},f=this;for(var g in a.eData)d(g)}else{var v=a.eData?a:c;if(!v.eData)return s.a;var b=a.eData?c:a;for(var g in v.eData){var y=v.eData[g],C=this.getIdentifier(b);this.addEDataRefToShape(b,g,y,i),this.commandService.dispatch(x.a.updateEntityLinks,g,{diagramId:e.id,fromEntityId:y,type:w.f.REFERENCE,isSet:i,handshake:k.n.handshake[0],connectorId:t.id,connectorDefId:t.defId,shapeId:b.id,shapeDefId:b.defId,identifier:C})}}return h.length?l.a.apply(void 0,Object(r.j)(h)):s.a},e.prototype.getIdentifier=function(e){if(e.primaryTextModel&&e.primaryTextModel.plainText)return e.primaryTextModel.plainText},e.prototype.getMatchingHandshake=function(e,t,n,r,i){return Object(c.a)({fromEntity:this.ell.getEntityOnce(e,t),toEntity:this.ell.getEntityOnce(n,r)}).pipe(Object(h.a)((function(e){if(e.fromEntity&&e.toEntity&&i){var t=e.fromEntity.getDef().ports,n=e.toEntity.getDef().ports;if(t&&n)for(var r=Object.keys(t),a=Object.keys(n),o=0;o<i.length;o++)if(r.indexOf(i[o])>-1&&a.indexOf(i[o])>-1)return Object(u.a)(i[o])}return Object(u.a)(void 0)})))},e.\u0275fac=function(t){return new(t||e)(_.pc(o.Ib),_.pc(v.a),_.pc(o.B),_.pc(C.a),_.pc(S.x),_.pc(E.d))},e.\u0275prov=_.bc({token:e,factory:e.\u0275fac}),e}()},i9EC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConferenceCommands=t.ConferenceEvents=void 0,function(e){e.conferenceConnectionSuccess="creately:conference:connnectionSuccess",e.conferenceStarted="creately:conference:started",e.conferenceError="creately:conference:error",e.conferenceDisconected="creately:conference:disconnected",e.conferenceUserListChanged="creately:conference:userListChanged"}(t.ConferenceEvents||(t.ConferenceEvents={})),function(e){e.conferenceStart="creately:conference:start",e.conferenceStop="creately:conference:stop",e.conferenceMuteAudio="creately:conference:muteAudio",e.conferenceMuteVideo="creately:conference:muteVideo",e.conferenceRequestFocus="creately:conference:requestFocus"}(t.ConferenceCommands||(t.ConferenceCommands={}))},iRGy:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("5xGT"),i=n("X0jn"),a=n("nsO7"),o=n("6Oco"),s=n("EM62"),c=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"GluepointsBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(n.$set||n.$unset)return this.shapeChange(e,n,t),Object(o.b)()},e.prototype.displaceDefaultGluePoints=function(t,n){if(n.gluepoints[e.gpBottomId]&&t.y<0&&"fixed-end"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x)(r=n.gluepoints[e.gpBottomId]).yType=t.yType,r.y=-1*(t.height+2*i.w);else if(n.gluepoints[e.gpTopId]&&t.y<0&&"fixed-start"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x){(r=n.gluepoints[e.gpTopId]).yType=t.yType,r.y=-1*(t.height+2*i.w)}if(n.gluepoints[e.gpLeftId]&&t.x<0&&"fixed-start"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y)(r=n.gluepoints[e.gpLeftId]).xType=t.xType,r.x=-1*(t.width+2*i.w);else if(n.gluepoints[e.gpRightId]&&t.x<0&&"fixed-end"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y){var r;(r=n.gluepoints[e.gpRightId]).xType=t.xType,r.x=-1*(t.width+2*i.w)}},e.prototype.displaceDefaultStickyGluePoints=function(t,n){if(n.stickyGluePoints[e.gpBottomId]&&t.y<0&&"fixed-end"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x)(r=n.stickyGluePoints[e.gpBottomId].slice()).map((function(e){e.yType=t.yType,e.y=-1*(t.height+2*i.w)})),n.stickyGluePoints[e.gpBottomId]=r;else if(n.stickyGluePoints[e.gpTopId]&&t.y<0&&"fixed-start"===t.yType&&(!t.xType||"relative"===t.xType)&&.5===t.x){(r=n.stickyGluePoints[e.gpTopId].slice()).map((function(e){e.yType=t.yType,e.y=-1*(t.height+2*i.w)})),n.stickyGluePoints[e.gpTopId]=r}if(n.stickyGluePoints[e.gpLeftId]&&t.x<0&&"fixed-start"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y)(r=n.stickyGluePoints[e.gpLeftId].slice()).map((function(e){e.xType=t.xType,e.x=-1*(t.width+2*i.w)})),n.stickyGluePoints[e.gpLeftId]=r;else if(n.stickyGluePoints[e.gpRightId]&&t.x<0&&"fixed-end"===t.xType&&(!t.yType||"relative"===t.yType)&&.5===t.y){var r;(r=n.stickyGluePoints[e.gpRightId].slice()).map((function(e){e.xType=t.xType,e.x=-1*(t.width+2*i.w)})),n.stickyGluePoints[e.gpRightId]=r}},e.prototype.shapeChange=function(t,n,i){var o=this,s=new Set,c=function(n){e.regexTexts.lastIndex=0;var c=e.regexTexts.exec(n);if(!c)return"continue";var u=c[1],p=t.shapes[u];if(p.isConnector())return"continue";s.has(u)||(l.resetAllDefaultGluePoints(p),i===r.A.EXECUTE&&l.resetAllDefaultStickyGluePoints(p),p.hasAnyText&&!Object(a.isEmpty)(p.gluepoints)&&Object(a.forEach)(p.texts,(function(e,t){var n=p.texts[t];n.plainText&&(o.displaceDefaultGluePoints(n,p),i===r.A.EXECUTE&&o.displaceDefaultStickyGluePoints(n,p))}))),s.add(u)},l=this;for(var u in n.$set||n.$unset)c(u)},e.prototype.resetAllDefaultGluePoints=function(t){var n=t.gluepoints[e.gpBottomId];n&&(n.yType&&"relative"!==n.yType&&(n.yType="relative"),1!==n.y&&(n.y=1));var r=t.gluepoints[e.gpTopId];r&&(r.yType&&"relative"!==r.yType&&(r.yType="relative"),0!==r.y&&(r.y=0));var i=t.gluepoints[e.gpLeftId];i&&(i.xType&&"relative"!==i.xType&&(i.xType="relative"),0!==i.x&&(i.x=0));var a=t.gluepoints[e.gpRightId];a&&(a.xType&&"relative"!==a.xType&&(a.xType="relative"),1!==a.x&&(a.x=1))},e.prototype.resetAllDefaultStickyGluePoints=function(t){if(t.stickyGluePoints[e.gpBottomId]){var n=t.stickyGluePoints[e.gpBottomId].slice();n.map((function(e){e.yType&&"relative"!==e.yType&&(e.yType="relative"),1!==e.y&&(e.y=1)})),t.stickyGluePoints[e.gpBottomId]=n}if(t.stickyGluePoints[e.gpTopId]){var r=t.stickyGluePoints[e.gpTopId].slice();r.map((function(e){e.yType&&"relative"!==e.yType&&(e.yType="relative"),0!==e.y&&(e.y=0)})),t.stickyGluePoints[e.gpTopId]=r}if(t.stickyGluePoints[e.gpLeftId]){var i=t.stickyGluePoints[e.gpLeftId].slice();i.map((function(e){e.xType&&"relative"!==e.xType&&(e.xType="relative"),0!==e.x&&(e.x=0)})),t.stickyGluePoints[e.gpLeftId]=i}if(t.stickyGluePoints[e.gpRightId]){var a=t.stickyGluePoints[e.gpRightId].slice();a.map((function(e){e.xType&&"relative"!==e.xType&&(e.xType="relative"),1!==e.x&&(e.x=1)})),t.stickyGluePoints[e.gpRightId]=a}},e.gpBottomId="BRZfYLOPiRa",e.gpLeftId="pbnadF9Wirq",e.gpRightId="P9d4172UDLb",e.gpTopId="0FUuJlNPewl",e.regexTexts=/shapes\.([^\.]+)\.texts/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},iTOv:function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("VrFO")),a=r(n("Y9Ll")),o=function(){function e(t){(0,i.default)(this,e),t(this._resolve.bind(this),this._reject.bind(this))}return(0,a.default)(e,[{key:"catch",value:function(e){if(this.error)try{this._resolve(e(this.error))}catch(t){this._reject(t)}return this}},{key:"then",value:function(e,t){if(!this.error)try{this._resolve(e(this.value))}catch(n){this._reject(n)}return t&&this.catch(t),this}},{key:"_reject",value:function(e){this.value=void 0,this.error=e}},{key:"_resolve",value:function(t){t instanceof e?t.error?this._reject(t.error):this._resolve(t.value):(this.value=t,this.error=void 0)}}]),e}();o.all=function(e){return new o((function(t){t(e.map((function(e){for(;e instanceof o;){if(e.error)throw Error(e.error);e=e.value}return e})))}))},o.resolve=function(e){return new o((function(t){return t(e)}))},o.reject=function(e){return new o((function(t,n){return n(e)}))},e.exports=o},iV8b:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("EM62"),i=n("s2Ay"),a=function(){function e(e){this.translate=e,this.documentStatusMap={none:{label:"NO_STATUS",id:"none",bgColor:"transparent",textColor:"black",selected:!1},draft:{label:"DRAFT",id:"draft",bgColor:"#BABABA",textColor:"white",selected:!1},"in-progress":{label:"IN_PROGRESS",id:"in-progress",bgColor:"#657FB5",textColor:"white",selected:!1},"in-review":{label:"IN_REVIEW",id:"in-review",bgColor:"#FFC648",textColor:"white",selected:!1},approved:{label:"APPROVED",id:"approved",bgColor:"#51C0AA",textColor:"white",selected:!1},final:{label:"FINAL",id:"final",bgColor:"#415A71",textColor:"white",selected:!1},archived:{label:"ARCHIVED",id:"archived",bgColor:"#F05252",textColor:"white",selected:!1}}}return e.prototype.getDocumentStatus=function(e){var t=this.documentStatusMap[e]||this.documentStatusMap.none;return{id:t.id,label:this.translate.instant("LABELS.DOCUMENT_STATUS."+t.label),bgColor:t.bgColor,textColor:t.textColor}},e.prototype.getAllStatuses=function(){var e=this;return Object.values(this.documentStatusMap).map((function(t){return{id:t.id,label:e.translate.instant("LABELS.DOCUMENT_STATUS."+t.label),bgColor:t.bgColor,textColor:t.textColor}}))},e.\u0275fac=function(t){return new(t||e)(r.pc(i.e))},e.\u0275prov=r.bc({token:e,factory:e.\u0275fac}),e}()},iesc:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n("D57K"),i=n("EM62"),a=n("5xGT"),o=n("NNJu"),s=n("ZTXN"),c=n("6Oco"),l=n("g6G6"),u=n("GoAz"),p=n("KTx3"),h=n("ROBh"),d=n("YtkY"),f=n("3lSR"),g=n("8j5Y"),m=n("TLy2"),v=n("xVbo"),b=n("vRBZ"),y=["sidePanel"],x=["itemContainer"],C=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i.componentFactoryResolver=t,i.stateSvc=n,i.injector=r,i.indicatorHeight=48,i.panelWidth=320,i.buttonContainerWidth=0,i.items=new Array,i.resetOperations(),i.clickSubscriptions={},i.panelActivated=new s.a,i.subs=[],i.subs.push(i.listenToOpenRightSidebarState().subscribe()),i.subs.push(i.listenToDiagramChange().subscribe()),i}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"itemIds",{get:function(){return this.items.map((function(e){return e.id}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSelected",{get:function(){return void 0!==this.activeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedId",{get:function(){return this.activeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){var e=this;return this.items.findIndex((function(t){return t.id===e.activeId}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){var e=this,t=this.items.find((function(t){return t.id===e.activeId}));if(t)return t.panel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemContainerHeight",{get:function(){return this.itemContainer.element.nativeElement.getBoundingClientRect().height},enumerable:!1,configurable:!0}),t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.add=function(e,t,n){var r=this.createPanel(e,n),i=this.createButton(r.instance),a=this.createItem(r.instance.id,i,r);return void 0===t&&(t=this.items.length+Object.keys(this.operations.add).length),this.operations.add[t]=a,this},t.prototype.updatePanelFeatures=function(e){var t=this.items.find((function(t){return t.id===e.id}));t||(t=Object.values(this.operations.add).find((function(t){return t.id===e.id}))),t&&t.panel.instance.features&&t.panel.instance.features.next(e.features)},t.prototype.removeById=function(e){return this.operations.remove.push(e),this},t.prototype.removeByIndex=function(e){return this.removeById(this.items[e].id),this},t.prototype.addSpace=function(e,t){return this},t.prototype.removeSpace=function(e){return this},t.prototype.apply=function(e){var t=this,n=[];n.push.apply(n,Object(r.j)(this.insertItems())),n.push.apply(n,Object(r.j)(this.removeItems()));var i=Object(c.b)();return e&&this.isSelected&&this.selectedId!==e&&(this.panelActivated.next({id:e,data:"default"}),i=this.open(e)),Object(l.a)(Object(u.a)(n).pipe(Object(d.a)((function(e){return e.start()})),Object(f.a)()),i).pipe(Object(g.a)({complete:function(){t.clearItems(),t.resetOperations()}}))},t.prototype.createPanel=function(e,t){var n=this.makeComponent(e);return this.setInputs(n.instance,t),n},t.prototype.findIndex=function(e){},t.prototype.open=function(e){var t=0;return void 0!==e&&(t=this.items.findIndex((function(t){return t.id===e}))),t<0?Object(c.b)():(this.stateSvc.set("RightSidebarPanel",o.r.Opening),this.stateSvc.set("RightSidebarPanel",this.items[t].id),this.openByIndex(t))},t.prototype.openByIndex=function(e){var t=this;if(this.selectedIndex===e)return Object(c.b)();if(e>=this.items.length)return this.close();var n=this.items[e].panel;if(n.instance.onActive(),this.isSelected){var r=this.selected,i=e<this.selectedIndex;return this.insertPanel(n,i),Object(l.a)(this.slideOutPanel(r,!i),this.slideInPanel(n,!i)).pipe(Object(g.a)({complete:function(){t.detachPanel(r)}}),Object(g.a)({complete:function(){r.instance.onInactive()}}),Object(m.a)((function(){return t.switchBetweenSidePanels(r.instance,n.instance).start()})))}return this.insertPanel(n),this.toggleSidePanel(!1,n.instance.width).start()},t.prototype.close=function(){var e=this;return this.activeId?(this.stateSvc.set("RightSidebarPanel",o.r.Closing),Object(l.a)(this.toggleSidePanel(!0).start()).pipe(Object(g.a)({complete:function(){e.selected.instance.onInactive(),e.detachPanel(e.selected),e.activeId=void 0,e.stateSvc.set("RightSidebarPanel",o.r.None)}}))):Object(c.b)()},t.prototype.setButtonIndicator=function(e,t){var n=this.items.findIndex((function(t){return t.id===e}));n>-1&&this.items[n].button.instance.setIndicator(t)},t.prototype.resetOperations=function(){this.operations={add:{},space:{},remove:[]}},t.prototype.insertItems=function(){var e=[],t=this.operations.add;for(var n in t)t.hasOwnProperty(n)&&e.push.apply(e,Object(r.j)(this.insertItemAt(t[n],Number(n))));return e},t.prototype.removeItems=function(){var e=this,t=[];return this.operations.remove.forEach((function(n){return t.push.apply(t,Object(r.j)(e.removeItemById(n)))})),t},t.prototype.createButton=function(e){var t={id:e.id,icon:e.icon,tooltip:e.tooltip},n=this.makeComponent(b.a);return this.setInputs(n.instance,t),this.listenToButtonClick(n),n},t.prototype.createItem=function(e,t,n){return{id:e,button:t,panel:n}},t.prototype.listenToButtonClick=function(e){var t=this,n=Object(p.a)(e.location.nativeElement,"click").subscribe((function(){return t.clickHandler(e.instance)}));this.clickSubscriptions[e.instance.id]=n},t.prototype.clickHandler=function(e){this.selectedId===e.id?this.close().subscribe():(this.panelActivated.next({id:e.id,data:"sidebarButton"}),this.open(e.id).subscribe())},t.prototype.insertItemAt=function(e,t){return this.items.splice(t,0,e),[e.button.instance.toggleZoom()]},t.prototype.insertSpaceAt=function(e,t){},t.prototype.insertPanel=function(e,t){void 0===t&&(t=!1),!0===t?this.insert(this.itemContainer,e,0):this.insert(this.itemContainer,e),this.activeId=e.instance.id},t.prototype.slideOutPanel=function(e,t){void 0===t&&(t=!1);var n=this.itemContainerHeight;return!0===t&&(n*=-1),this.slidePanel(0,n,e.location.nativeElement)},t.prototype.slideInPanel=function(e,t){void 0===t&&(t=!1);var n=this.itemContainerHeight;return!1===t&&(n*=-1),this.slidePanel(n,0,e.location.nativeElement)},t.prototype.removeItemById=function(e){return[this.items.find((function(t){return t.id===e})).button.instance.toggleZoom(!0)]},t.prototype.removePanel=function(e){e.location.nativeElement.removeAttribute("style"),this.remove(this.itemContainer,e)},t.prototype.detachPanel=function(e){e.location.nativeElement.removeAttribute("style"),this.detachComponent(this.itemContainer,e)},t.prototype.clearItems=function(){var e=this;this.operations.remove.forEach((function(t){var n=e.items.find((function(e){return e.id===t}));n.panel.instance.disableAutoOpen&&e.panelActivated.next({id:t,data:"remove"}),e.removePanel(n.panel);var r=e.items.findIndex((function(e){return e.id===t}));e.items.splice(r,1)}))},t.prototype.slidePanel=function(e,t,n){return Object(h.a)(n)},t.prototype.toggleSidePanel=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=this.panelWidth);var n={width:this.buttonContainerWidth+"px"},r={width:Number(t+this.buttonContainerWidth)+"px"},i=n,a=r;!0===e&&(i=r,a=n);var s=new o.e({from:i,to:a,transitionProperty:"width",duration:300,easing:"ease-in-out"});return s.element=this.sidePanel.nativeElement,s},t.prototype.switchBetweenSidePanels=function(e,t){var n={width:Number((e.width||this.panelWidth)+this.buttonContainerWidth)+"px"},r={width:Number((t.width||this.panelWidth)+this.buttonContainerWidth)+"px"},i=new o.e({from:n,to:r,transitionProperty:"width",duration:300,easing:"ease-in-out"});return i.element=this.sidePanel.nativeElement,i},t.prototype.listenToOpenRightSidebarState=function(){var e=this;return this.stateSvc.changes("OpenRightSidebar").pipe(Object(m.a)((function(t){return t!==o.r.None?("shapePanel"!==t&&"shapeData"!==t&&"diagramcomments"!==t&&e.stateSvc.set("Selected",[]),e.open(t)):e.close()})))},t.prototype.listenToDiagramChange=function(){var e=this;return this.stateSvc.changes("CurrentDiagram").pipe(Object(v.a)((function(e){return!!e})),Object(g.a)((function(){return e.stateSvc.set("OpenRightSidebar",o.r.None)})))},t.\u0275fac=function(e){return new(e||t)(i.fc(i.m),i.fc(a.Ib),i.fc(i.C))},t.\u0275cmp=i.Zb({type:t,selectors:[["sidebar"]],viewQuery:function(e,t){var n;(1&e&&(i.jd(y,!0),i.jd(x,!0,i.hb)),2&e)&&(i.Lc(n=i.uc())&&(t.sidePanel=n.first),i.Lc(n=i.uc())&&(t.itemContainer=n.first))},features:[i.Pb],decls:5,vars:0,consts:[[1,"sidebar","fx-pointer-events-auto","fx-span-height-100vh","white"],["sidePanel",""],[1,"sidebar-container"],["itemContainer",""]],template:function(e,t){1&e&&(i.lc(0,"div",0,1),i.lc(2,"div",2),i.gc(3,"div",null,3),i.kc(),i.kc())},styles:[".sidebar[_ngcontent-%COMP%]{background:rgba(255,0,0,0);pointer-events:none;position:relative;float:right;will-change:width;z-index:2}.sidebar-buttons[_ngcontent-%COMP%], .sidebar-buttons-container[_ngcontent-%COMP%]{pointer-events:none!important}.sidebar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto}.sidebar-container[_ngcontent-%COMP%]{height:inherit;width:100%;float:right;overflow:hidden;position:absolute;top:0;background-color:#fff;box-shadow:0 4px 16px rgba(0,0,0,.05),0 2px 6px rgba(0,0,0,.05),0 1px 2px rgba(0,0,0,.05)}.sidebar-buttons[_ngcontent-%COMP%]{height:inherit;width:50px;border-right:1px solid #d3d3e7;display:inline-block;background-color:rgba(255,0,0,0)}.sidebar-buttons[_ngcontent-%COMP%]   .fx-icon[_ngcontent-%COMP%]{height:33px;display:block}.sidebar-container[_ngcontent-%COMP%]    >*{position:absolute;height:100%;width:100%}.sidebar-container[_ngcontent-%COMP%]     .ps-content{height:100%}.sidebar-buttons-container[_ngcontent-%COMP%]{height:inherit;display:flex;flex-direction:column;justify-content:center}.sidebar-buttons-container-inner[_ngcontent-%COMP%]{position:relative;background:#fff;border:.5px solid #c3c3de;box-sizing:border-box;box-shadow:0 2px 2px rgba(195,195,222,.25);border-radius:5px 0 0 5px;border-right:0}.sidebar-btn-indicator[_ngcontent-%COMP%]{background-color:#f6aa00;width:2px;height:30px;position:absolute;z-index:1;opacity:0;top:0}.sidebar-buttons-container[_ngcontent-%COMP%]     sidebar-button{display:block;margin-right:5px;padding-bottom:5px;padding-top:5px}.sidebar-buttons-container[_ngcontent-%COMP%]     sidebar-button button{will-change:transform}"],changeDetection:0}),t}(o.k)},ioBB:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("5xGT"),i=n("EM62"),a=function(){function t(){this.workers={}}return Object.defineProperty(t.prototype,"isWebWorkerSupported",{get:function(){return"undefined"!=typeof Worker},enumerable:!1,configurable:!0}),t.prototype.register=function(t,n){this.fetch(t)||(this.isWebWorkerSupported?this.workers[t]=new Worker(e,void 0):r.db.warning("This browser does not support web workers"))},t.prototype.fetch=function(e){return this.workers[e]},t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.bc({token:t,factory:t.\u0275fac}),t}()}).call(this,n("eJth"))},ipv5:function(e,t,n){var r=n("oFOz"),i=n("/J21"),a=n("a+rc"),o=n("sfKy"),s=n("Gf1k");function c(e){return/^[01]{1,10}$/.test(e)}t.BESSELI=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:s.besseli(e,t)},t.BESSELJ=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:s.besselj(e,t)},t.BESSELK=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:s.besselk(e,t)},t.BESSELY=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:s.bessely(e,t)},t.BIN2DEC=function(e){if(!c(e))return r.num;var t=parseInt(e,2),n=e.toString();return 10===n.length&&"1"===n.substring(0,1)?parseInt(n.substring(1),2)-512:t},t.BIN2HEX=function(e,t){if(!c(e))return r.num;var n=e.toString();if(10===n.length&&"1"===n.substring(0,1))return(0xfffffffe00+parseInt(n.substring(1),2)).toString(16);var i=parseInt(e,2).toString(16);return void 0===t?i:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=i.length?a.REPT("0",t-i.length)+i:r.num},t.BIN2OCT=function(e,t){if(!c(e))return r.num;var n=e.toString();if(10===n.length&&"1"===n.substring(0,1))return(1073741312+parseInt(n.substring(1),2)).toString(8);var i=parseInt(e,2).toString(8);return void 0===t?i:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=i.length?a.REPT("0",t-i.length)+i:r.num},t.BITAND=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?r.num:e&t},t.BITLSHIFT=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e<0||Math.floor(e)!==e||e>0xffffffffffff||Math.abs(t)>53?r.num:t>=0?e<<t:e>>-t},t.BITOR=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?r.num:e|t},t.BITRSHIFT=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e<0||Math.floor(e)!==e||e>0xffffffffffff||Math.abs(t)>53?r.num:t>=0?e>>t:e<<-t},t.BITXOR=function(e,t){return e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e<0||t<0||Math.floor(e)!==e||Math.floor(t)!==t||e>0xffffffffffff||t>0xffffffffffff?r.num:e^t},t.COMPLEX=function(e,t,n){if(e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t))return e;if("i"!==(n=void 0===n?"i":n)&&"j"!==n)return r.value;if(0===e&&0===t)return 0;if(0===e)return 1===t?n:t.toString()+n;if(0===t)return e.toString();var i=t>0?"+":"";return e.toString()+i+(1===t?n:t.toString()+n)},t.CONVERT=function(e,t,n){if((e=o.parseNumber(e))instanceof Error)return e;for(var i,a=[["a.u. of action","?",null,"action",!1,!1,105457168181818e-48],["a.u. of charge","e",null,"electric_charge",!1,!1,160217653141414e-33],["a.u. of energy","Eh",null,"energy",!1,!1,435974417757576e-32],["a.u. of length","a?",null,"length",!1,!1,529177210818182e-25],["a.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["a.u. of time","?/Eh",null,"time",!1,!1,241888432650516e-31],["admiralty knot","admkn",null,"speed",!1,!0,.514773333],["ampere","A",null,"electric_current",!0,!1,1],["ampere per meter","A/m",null,"magnetic_field_intensity",!0,!1,1],["\xe5ngstr\xf6m","\xc5",["ang"],"length",!1,!0,1e-10],["are","ar",null,"area",!1,!0,100],["astronomical unit","ua",null,"length",!1,!1,149597870691667e-25],["bar","bar",null,"pressure",!1,!1,1e5],["barn","b",null,"area",!1,!1,1e-28],["becquerel","Bq",null,"radioactivity",!0,!1,1],["bit","bit",["b"],"information",!1,!0,1],["btu","BTU",["btu"],"energy",!1,!0,1055.05585262],["byte","byte",null,"information",!1,!0,8],["candela","cd",null,"luminous_intensity",!0,!1,1],["candela per square metre","cd/m?",null,"luminance",!0,!1,1],["coulomb","C",null,"electric_charge",!0,!1,1],["cubic \xe5ngstr\xf6m","ang3",["ang^3"],"volume",!1,!0,1e-30],["cubic foot","ft3",["ft^3"],"volume",!1,!0,.028316846592],["cubic inch","in3",["in^3"],"volume",!1,!0,16387064e-12],["cubic light-year","ly3",["ly^3"],"volume",!1,!0,846786664623715e-61],["cubic metre","m?",null,"volume",!0,!0,1],["cubic mile","mi3",["mi^3"],"volume",!1,!0,4168181825.44058],["cubic nautical mile","Nmi3",["Nmi^3"],"volume",!1,!0,6352182208],["cubic Pica","Pica3",["Picapt3","Pica^3","Picapt^3"],"volume",!1,!0,7.58660370370369e-8],["cubic yard","yd3",["yd^3"],"volume",!1,!0,.764554857984],["cup","cup",null,"volume",!1,!0,.0002365882365],["dalton","Da",["u"],"mass",!1,!1,166053886282828e-41],["day","d",["day"],"time",!1,!0,86400],["degree","\xb0",null,"angle",!1,!1,.0174532925199433],["degrees Rankine","Rank",null,"temperature",!1,!0,.555555555555556],["dyne","dyn",["dy"],"force",!1,!0,1e-5],["electronvolt","eV",["ev"],"energy",!1,!0,1.60217656514141],["ell","ell",null,"length",!1,!0,1.143],["erg","erg",["e"],"energy",!1,!0,1e-7],["farad","F",null,"electric_capacitance",!0,!1,1],["fluid ounce","oz",null,"volume",!1,!0,295735295625e-16],["foot","ft",null,"length",!1,!0,.3048],["foot-pound","flb",null,"energy",!1,!0,1.3558179483314],["gal","Gal",null,"acceleration",!1,!1,.01],["gallon","gal",null,"volume",!1,!0,.003785411784],["gauss","G",["ga"],"magnetic_flux_density",!1,!0,1],["grain","grain",null,"mass",!1,!0,647989e-10],["gram","g",null,"mass",!1,!0,.001],["gray","Gy",null,"absorbed_dose",!0,!1,1],["gross registered ton","GRT",["regton"],"volume",!1,!0,2.8316846592],["hectare","ha",null,"area",!1,!0,1e4],["henry","H",null,"inductance",!0,!1,1],["hertz","Hz",null,"frequency",!0,!1,1],["horsepower","HP",["h"],"power",!1,!0,745.69987158227],["horsepower-hour","HPh",["hh","hph"],"energy",!1,!0,2684519.538],["hour","h",["hr"],"time",!1,!0,3600],["imperial gallon (U.K.)","uk_gal",null,"volume",!1,!0,.00454609],["imperial hundredweight","lcwt",["uk_cwt","hweight"],"mass",!1,!0,50.802345],["imperial quart (U.K)","uk_qt",null,"volume",!1,!0,.0011365225],["imperial ton","brton",["uk_ton","LTON"],"mass",!1,!0,1016.046909],["inch","in",null,"length",!1,!0,.0254],["international acre","uk_acre",null,"area",!1,!0,4046.8564224],["IT calorie","cal",null,"energy",!1,!0,4.1868],["joule","J",null,"energy",!0,!0,1],["katal","kat",null,"catalytic_activity",!0,!1,1],["kelvin","K",["kel"],"temperature",!0,!0,1],["kilogram","kg",null,"mass",!0,!0,1],["knot","kn",null,"speed",!1,!0,.514444444444444],["light-year","ly",null,"length",!1,!0,9460730472580800],["litre","L",["l","lt"],"volume",!1,!0,.001],["lumen","lm",null,"luminous_flux",!0,!1,1],["lux","lx",null,"illuminance",!0,!1,1],["maxwell","Mx",null,"magnetic_flux",!1,!1,1e-18],["measurement ton","MTON",null,"volume",!1,!0,1.13267386368],["meter per hour","m/h",["m/hr"],"speed",!1,!0,.00027777777777778],["meter per second","m/s",["m/sec"],"speed",!0,!0,1],["meter per second squared","m?s??",null,"acceleration",!0,!1,1],["parsec","pc",["parsec"],"length",!1,!0,0x6da012f958ee1c],["meter squared per second","m?/s",null,"kinematic_viscosity",!0,!1,1],["metre","m",null,"length",!0,!0,1],["miles per hour","mph",null,"speed",!1,!0,.44704],["millimetre of mercury","mmHg",null,"pressure",!1,!1,133.322],["minute","?",null,"angle",!1,!1,.000290888208665722],["minute","min",["mn"],"time",!1,!0,60],["modern teaspoon","tspm",null,"volume",!1,!0,5e-6],["mole","mol",null,"amount_of_substance",!0,!1,1],["morgen","Morgen",null,"area",!1,!0,2500],["n.u. of action","?",null,"action",!1,!1,105457168181818e-48],["n.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["n.u. of speed","c?",null,"speed",!1,!1,299792458],["n.u. of time","?/(me?c??)",null,"time",!1,!1,128808866778687e-35],["nautical mile","M",["Nmi"],"length",!1,!0,1852],["newton","N",null,"force",!0,!0,1],["\u0153rsted","Oe ",null,"magnetic_field_intensity",!1,!1,79.5774715459477],["ohm","\u03a9",null,"electric_resistance",!0,!1,1],["ounce mass","ozm",null,"mass",!1,!0,.028349523125],["pascal","Pa",null,"pressure",!0,!1,1],["pascal second","Pa?s",null,"dynamic_viscosity",!0,!1,1],["pferdest\xe4rke","PS",null,"power",!1,!0,735.49875],["phot","ph",null,"illuminance",!1,!1,1e-4],["pica (1/6 inch)","pica",null,"length",!1,!0,.00035277777777778],["pica (1/72 inch)","Pica",["Picapt"],"length",!1,!0,.00423333333333333],["poise","P",null,"dynamic_viscosity",!1,!1,.1],["pond","pond",null,"force",!1,!0,.00980665],["pound force","lbf",null,"force",!1,!0,4.4482216152605],["pound mass","lbm",null,"mass",!1,!0,.45359237],["quart","qt",null,"volume",!1,!0,.000946352946],["radian","rad",null,"angle",!0,!1,1],["second","?",null,"angle",!1,!1,484813681109536e-20],["second","s",["sec"],"time",!0,!0,1],["short hundredweight","cwt",["shweight"],"mass",!1,!0,45.359237],["siemens","S",null,"electrical_conductance",!0,!1,1],["sievert","Sv",null,"equivalent_dose",!0,!1,1],["slug","sg",null,"mass",!1,!0,14.59390294],["square \xe5ngstr\xf6m","ang2",["ang^2"],"area",!1,!0,1e-20],["square foot","ft2",["ft^2"],"area",!1,!0,.09290304],["square inch","in2",["in^2"],"area",!1,!0,64516e-8],["square light-year","ly2",["ly^2"],"area",!1,!0,895054210748189e17],["square meter","m?",null,"area",!0,!0,1],["square mile","mi2",["mi^2"],"area",!1,!0,2589988.110336],["square nautical mile","Nmi2",["Nmi^2"],"area",!1,!0,3429904],["square Pica","Pica2",["Picapt2","Pica^2","Picapt^2"],"area",!1,!0,1792111111111e-17],["square yard","yd2",["yd^2"],"area",!1,!0,.83612736],["statute mile","mi",null,"length",!1,!0,1609.344],["steradian","sr",null,"solid_angle",!0,!1,1],["stilb","sb",null,"luminance",!1,!1,1e-4],["stokes","St",null,"kinematic_viscosity",!1,!1,1e-4],["stone","stone",null,"mass",!1,!0,6.35029318],["tablespoon","tbs",null,"volume",!1,!0,147868e-10],["teaspoon","tsp",null,"volume",!1,!0,492892e-11],["tesla","T",null,"magnetic_flux_density",!0,!0,1],["thermodynamic calorie","c",null,"energy",!1,!0,4.184],["ton","ton",null,"mass",!1,!0,907.18474],["tonne","t",null,"mass",!1,!1,1e3],["U.K. pint","uk_pt",null,"volume",!1,!0,.00056826125],["U.S. bushel","bushel",null,"volume",!1,!0,.03523907],["U.S. oil barrel","barrel",null,"volume",!1,!0,.158987295],["U.S. pint","pt",["us_pt"],"volume",!1,!0,.000473176473],["U.S. survey mile","survey_mi",null,"length",!1,!0,1609.347219],["U.S. survey/statute acre","us_acre",null,"area",!1,!0,4046.87261],["volt","V",null,"voltage",!0,!1,1],["watt","W",null,"power",!0,!0,1],["watt-hour","Wh",["wh"],"energy",!1,!0,3600],["weber","Wb",null,"magnetic_flux",!0,!1,1],["yard","yd",null,"length",!1,!0,.9144],["year","yr",null,"time",!1,!0,31557600]],s={Yi:["yobi",80,12089258196146292e8,"Yi","yotta"],Zi:["zebi",70,11805916207174113e5,"Zi","zetta"],Ei:["exbi",60,0x1000000000000000,"Ei","exa"],Pi:["pebi",50,0x4000000000000,"Pi","peta"],Ti:["tebi",40,1099511627776,"Ti","tera"],Gi:["gibi",30,1073741824,"Gi","giga"],Mi:["mebi",20,1048576,"Mi","mega"],ki:["kibi",10,1024,"ki","kilo"]},c={Y:["yotta",1e24,"Y"],Z:["zetta",1e21,"Z"],E:["exa",1e18,"E"],P:["peta",1e15,"P"],T:["tera",1e12,"T"],G:["giga",1e9,"G"],M:["mega",1e6,"M"],k:["kilo",1e3,"k"],h:["hecto",100,"h"],e:["dekao",10,"e"],d:["deci",.1,"d"],c:["centi",.01,"c"],m:["milli",.001,"m"],u:["micro",1e-6,"u"],n:["nano",1e-9,"n"],p:["pico",1e-12,"p"],f:["femto",1e-15,"f"],a:["atto",1e-18,"a"],z:["zepto",1e-21,"z"],y:["yocto",1e-24,"y"]},l=null,u=null,p=t,h=n,d=1,f=1,g=0;g<a.length;g++)i=null===a[g][2]?[]:a[g][2],(a[g][1]===p||i.indexOf(p)>=0)&&(l=a[g]),(a[g][1]===h||i.indexOf(h)>=0)&&(u=a[g]);if(null===l){var m=s[t.substring(0,2)],v=c[t.substring(0,1)];"da"===t.substring(0,2)&&(v=["dekao",10,"da"]),m?(d=m[2],p=t.substring(2)):v&&(d=v[1],p=t.substring(v[2].length));for(var b=0;b<a.length;b++)i=null===a[b][2]?[]:a[b][2],(a[b][1]===p||i.indexOf(p)>=0)&&(l=a[b])}if(null===u){var y=s[n.substring(0,2)],x=c[n.substring(0,1)];"da"===n.substring(0,2)&&(x=["dekao",10,"da"]),y?(f=y[2],h=n.substring(2)):x&&(f=x[1],h=n.substring(x[2].length));for(var C=0;C<a.length;C++)i=null===a[C][2]?[]:a[C][2],(a[C][1]===h||i.indexOf(h)>=0)&&(u=a[C])}return null===l||null===u||l[3]!==u[3]?r.na:e*l[6]*d/(u[6]*f)},t.DEC2BIN=function(e,t){if((e=o.parseNumber(e))instanceof Error)return e;if(!/^-?[0-9]{1,3}$/.test(e)||e<-512||e>511)return r.num;if(e<0)return"1"+a.REPT("0",9-(512+e).toString(2).length)+(512+e).toString(2);var n=parseInt(e,10).toString(2);return void 0===t?n:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=n.length?a.REPT("0",t-n.length)+n:r.num},t.DEC2HEX=function(e,t){if((e=o.parseNumber(e))instanceof Error)return e;if(!/^-?[0-9]{1,12}$/.test(e)||e<-549755813888||e>549755813887)return r.num;if(e<0)return(1099511627776+e).toString(16);var n=parseInt(e,10).toString(16);return void 0===t?n:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=n.length?a.REPT("0",t-n.length)+n:r.num},t.DEC2OCT=function(e,t){if((e=o.parseNumber(e))instanceof Error)return e;if(!/^-?[0-9]{1,9}$/.test(e)||e<-536870912||e>536870911)return r.num;if(e<0)return(1073741824+e).toString(8);var n=parseInt(e,10).toString(8);return void 0===t?n:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=n.length?a.REPT("0",t-n.length)+n:r.num},t.DELTA=function(e,t){return t=void 0===t?0:t,e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:e===t?1:0},t.ERF=function(e,t){return t=void 0===t?0:t,e=o.parseNumber(e),t=o.parseNumber(t),o.anyIsError(e,t)?r.value:i.erf(e)},t.ERF.PRECISE=function(){throw new Error("ERF.PRECISE is not implemented")},t.ERFC=function(e){return isNaN(e)?r.value:i.erfc(e)},t.ERFC.PRECISE=function(){throw new Error("ERFC.PRECISE is not implemented")},t.GESTEP=function(e,t){return t=t||0,e=o.parseNumber(e),o.anyIsError(t,e)?e:e>=t?1:0},t.HEX2BIN=function(e,t){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return r.num;var n=10===e.length&&"f"===e.substring(0,1).toLowerCase(),i=n?parseInt(e,16)-1099511627776:parseInt(e,16);if(i<-512||i>511)return r.num;if(n)return"1"+a.REPT("0",9-(512+i).toString(2).length)+(512+i).toString(2);var o=i.toString(2);return void 0===t?o:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=o.length?a.REPT("0",t-o.length)+o:r.num},t.HEX2DEC=function(e){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return r.num;var t=parseInt(e,16);return t>=549755813888?t-1099511627776:t},t.HEX2OCT=function(e,t){if(!/^[0-9A-Fa-f]{1,10}$/.test(e))return r.num;var n=parseInt(e,16);if(n>536870911&&n<0xffe0000000)return r.num;if(n>=0xffe0000000)return(n-0xffc0000000).toString(8);var i=n.toString(8);return void 0===t?i:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=i.length?a.REPT("0",t-i.length)+i:r.num},t.IMABS=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:Math.sqrt(Math.pow(n,2)+Math.pow(i,2))},t.IMAGINARY=function(e){if(void 0===e||!0===e||!1===e)return r.value;if(0===e||"0"===e)return 0;if(["i","j"].indexOf(e)>=0)return 1;var t=(e=(e+="").replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j")).indexOf("+"),n=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===n&&(n=e.indexOf("-",1));var i=e.substring(e.length-1,e.length),a="i"===i||"j"===i;return t>=0||n>=0?a?t>=0?isNaN(e.substring(0,t))||isNaN(e.substring(t+1,e.length-1))?r.num:Number(e.substring(t+1,e.length-1)):isNaN(e.substring(0,n))||isNaN(e.substring(n+1,e.length-1))?r.num:-Number(e.substring(n+1,e.length-1)):r.num:a?isNaN(e.substring(0,e.length-1))?r.num:e.substring(0,e.length-1):isNaN(e)?r.num:0},t.IMARGUMENT=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:0===n&&0===i?r.div0:0===n&&i>0?Math.PI/2:0===n&&i<0?-Math.PI/2:0===i&&n>0?0:0===i&&n<0?-Math.PI:n>0?Math.atan(i/n):n<0&&i>=0?Math.atan(i/n)+Math.PI:Math.atan(i/n)-Math.PI},t.IMCONJUGATE=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",0!==i?t.COMPLEX(n,-i,a):e},t.IMCOS=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.cos(n)*(Math.exp(i)+Math.exp(-i))/2,-Math.sin(n)*(Math.exp(i)-Math.exp(-i))/2,a)},t.IMCOSH=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.cos(i)*(Math.exp(n)+Math.exp(-n))/2,Math.sin(i)*(Math.exp(n)-Math.exp(-n))/2,a)},t.IMCOT=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:t.IMDIV(t.IMCOS(e),t.IMSIN(e))},t.IMDIV=function(e,n){var i=t.IMREAL(e),a=t.IMAGINARY(e),s=t.IMREAL(n),c=t.IMAGINARY(n);if(o.anyIsError(i,a,s,c))return r.value;var l=e.substring(e.length-1),u=n.substring(n.length-1),p="i";if(("j"===l||"j"===u)&&(p="j"),0===s&&0===c)return r.num;var h=s*s+c*c;return t.COMPLEX((i*s+a*c)/h,(a*s-i*c)/h,p)},t.IMEXP=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);a="i"===a||"j"===a?a:"i";var s=Math.exp(n);return t.COMPLEX(s*Math.cos(i),s*Math.sin(i),a)},t.IMLN=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.log(Math.sqrt(n*n+i*i)),Math.atan(i/n),a)},t.IMLOG10=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.log(Math.sqrt(n*n+i*i))/Math.log(10),Math.atan(i/n)/Math.log(10),a)},t.IMLOG2=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.log(Math.sqrt(n*n+i*i))/Math.log(2),Math.atan(i/n)/Math.log(2),a)},t.IMPOWER=function(e,n){n=o.parseNumber(n);var i=t.IMREAL(e),a=t.IMAGINARY(e);if(o.anyIsError(n,i,a))return r.value;var s=e.substring(e.length-1);s="i"===s||"j"===s?s:"i";var c=Math.pow(t.IMABS(e),n),l=t.IMARGUMENT(e);return t.COMPLEX(c*Math.cos(n*l),c*Math.sin(n*l),s)},t.IMPRODUCT=function(){var e=arguments[0];if(!arguments.length)return r.value;for(var n=1;n<arguments.length;n++){var i=t.IMREAL(e),a=t.IMAGINARY(e),s=t.IMREAL(arguments[n]),c=t.IMAGINARY(arguments[n]);if(o.anyIsError(i,a,s,c))return r.value;e=t.COMPLEX(i*s-a*c,i*c+a*s)}return e},t.IMREAL=function(e){if(void 0===e||!0===e||!1===e)return r.value;if(0===e||"0"===e)return 0;if(["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(e)>=0)return 0;var t=(e+="").indexOf("+"),n=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===n&&(n=e.indexOf("-",1));var i=e.substring(e.length-1,e.length),a="i"===i||"j"===i;return t>=0||n>=0?a?t>=0?isNaN(e.substring(0,t))||isNaN(e.substring(t+1,e.length-1))?r.num:Number(e.substring(0,t)):isNaN(e.substring(0,n))||isNaN(e.substring(n+1,e.length-1))?r.num:Number(e.substring(0,n)):r.num:a?isNaN(e.substring(0,e.length-1))?r.num:0:isNaN(e)?r.num:e},t.IMSEC=function(e){if(!0===e||!1===e)return r.value;var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:t.IMDIV("1",t.IMCOS(e))},t.IMSECH=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:t.IMDIV("1",t.IMCOSH(e))},t.IMSIN=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.sin(n)*(Math.exp(i)+Math.exp(-i))/2,Math.cos(n)*(Math.exp(i)-Math.exp(-i))/2,a)},t.IMSINH=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);return a="i"===a||"j"===a?a:"i",t.COMPLEX(Math.cos(i)*(Math.exp(n)-Math.exp(-n))/2,Math.sin(i)*(Math.exp(n)+Math.exp(-n))/2,a)},t.IMSQRT=function(e){var n=t.IMREAL(e),i=t.IMAGINARY(e);if(o.anyIsError(n,i))return r.value;var a=e.substring(e.length-1);a="i"===a||"j"===a?a:"i";var s=Math.sqrt(t.IMABS(e)),c=t.IMARGUMENT(e);return t.COMPLEX(s*Math.cos(c/2),s*Math.sin(c/2),a)},t.IMCSC=function(e){if(!0===e||!1===e)return r.value;var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.num:t.IMDIV("1",t.IMSIN(e))},t.IMCSCH=function(e){if(!0===e||!1===e)return r.value;var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.num:t.IMDIV("1",t.IMSINH(e))},t.IMSUB=function(e,t){var n=this.IMREAL(e),i=this.IMAGINARY(e),a=this.IMREAL(t),s=this.IMAGINARY(t);if(o.anyIsError(n,i,a,s))return r.value;var c=e.substring(e.length-1),l=t.substring(t.length-1),u="i";return("j"===c||"j"===l)&&(u="j"),this.COMPLEX(n-a,i-s,u)},t.IMSUM=function(){if(!arguments.length)return r.value;for(var e=o.flatten(arguments),t=e[0],n=1;n<e.length;n++){var i=this.IMREAL(t),a=this.IMAGINARY(t),s=this.IMREAL(e[n]),c=this.IMAGINARY(e[n]);if(o.anyIsError(i,a,s,c))return r.value;t=this.COMPLEX(i+s,a+c)}return t},t.IMTAN=function(e){if(!0===e||!1===e)return r.value;var n=t.IMREAL(e),i=t.IMAGINARY(e);return o.anyIsError(n,i)?r.value:this.IMDIV(this.IMSIN(e),this.IMCOS(e))},t.OCT2BIN=function(e,t){if(!/^[0-7]{1,10}$/.test(e))return r.num;var n=10===e.length&&"7"===e.substring(0,1),i=n?parseInt(e,8)-1073741824:parseInt(e,8);if(i<-512||i>511)return r.num;if(n)return"1"+a.REPT("0",9-(512+i).toString(2).length)+(512+i).toString(2);var o=i.toString(2);return void 0===t?o:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=o.length?a.REPT("0",t-o.length)+o:r.num},t.OCT2DEC=function(e){if(!/^[0-7]{1,10}$/.test(e))return r.num;var t=parseInt(e,8);return t>=536870912?t-1073741824:t},t.OCT2HEX=function(e,t){if(!/^[0-7]{1,10}$/.test(e))return r.num;var n=parseInt(e,8);if(n>=536870912)return"ff"+(n+3221225472).toString(16);var i=n.toString(16);return void 0===t?i:isNaN(t)?r.value:t<0?r.num:(t=Math.floor(t))>=i.length?a.REPT("0",t-i.length)+i:r.num}},"iy5+":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return k}));var r,i=n("D57K"),a=n("5xGT"),o=n("nsO7"),s=n("ROBh"),c=n("6Oco"),l=n("HM3f"),u=n("TLy2"),p=n("YtkY"),h=n("8j5Y"),d=n("J+dc"),f=n("mWib"),g=n("Ohay"),m=n("QoSw"),v=n("iesc"),b=n("oyCe"),y=n("wkcE"),x=n("Jzy8"),C=n("EM62"),w=["sb"];!function(e){e.ENABLED="enabled",e.DISABLED="disabled"}(r||(r={}));var k=function(){function e(e,t,n){this.ll=e,this.collabLocator=t,this.state=n}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.subs=[],this.subs.push(this.state.changes("InterfaceControlState").pipe(Object(u.a)((function(t){return"edit"===t?e.selectionChanged():Object(s.a)([{id:"diagraminfo",features:[]}])})),Object(u.a)((function(t){return e.getPanelsBasedOnRole().pipe(Object(p.a)((function(e){return t.concat(e)})))}))).pipe(Object(h.a)((function(t){var n=t.map((function(e){return e.id}));e.removePanels(n),e.addPanels(t),e.updatePanels(t),e.sideBar.apply()}))).subscribe())},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getPanelsBasedOnRole=function(){var e=this;return this.state.changes("CurrentUser").pipe(Object(u.a)((function(t){if(t){var n=e.state.get("CurrentDiagram");if(n)return e.collabLocator.getCollabsSortedIgnoringOnline(n).pipe(Object(u.a)((function(t){var n=t.find((function(t){return t.id===e.state.get("CurrentUser")}));return e.getPrivacyLevel().pipe(Object(p.a)((function(e){return e&&e.level>=3||void 0!==n&&n.roleSortOrderWithoutOnline<x.G.UNREG_EDITOR?!!n&&n.isRegistered&&[x.g.OWNER,x.g.EDITOR].includes(n.role)?[{id:"diagramcomments",features:[]},{id:"historyPanel",features:[{featureId:"RESTORE",data:{enabled:!0}}]}]:[{id:"diagramcomments",features:[]}]:[]})))})))}return Object(s.a)([])})))},e.prototype.getPrivacyLevel=function(){return this.ll.forCurrent(!1).getDiagramModel().pipe(Object(d.a)(1),Object(p.a)((function(e){return e.privacy})))},e.prototype.selectionChanged=function(){var e=this;return this.state.changes("Selected").pipe(Object(f.a)(100),Object(u.a)((function(t){if(!t||!t.length)return e.getPanelsForDiagram();var n=t.slice();return 1===n.length?e.getPanelsForSingleShape(n[0]):e.getPanelsForMultiShape(n)})))},e.prototype.getPanelsForDiagram=function(){return this.state.get("CurrentDiagram")?this.ll.forCurrentObserver(!1).pipe(Object(u.a)((function(e){return e.getDiagramOnce().pipe(Object(p.a)((function(e){return e.getSidebarPanels()})))}))):Object(c.b)()},e.prototype.getPanelsForSingleShape=function(e){return this.locator.getShapeModel(e).pipe(Object(p.a)((function(e){return e.getSidebarPanels()})),Object(g.a)(o.isEqual))},e.prototype.getPanelsForMultiShape=function(e){var t=this,n=e.map((function(e){return t.locator.getShapeModel(e)}));return l.b.apply(void 0,Object(i.j)(n)).pipe(Object(f.a)(100),Object(p.a)((function(e){return b.a.sameType(e)?e.map((function(e){return e.getSidebarPanelsForSameType()})):e.map((function(e){return e.getSidebarPanelsForMultiTypes()}))})),Object(g.a)(o.isEqual),Object(p.a)((function(e){var n={},r=e.map((function(e){return e.map((function(e){return n[e.id]=e,e.id}))})),i=t.getLeastPanels(r).map((function(e){return n[e.id]=e,e.id})),a=r.reduce((function(e,t){return Object(o.intersection)(e,t)}));return Object(o.union)(a,i).map((function(e){return n[e]}))})))},e.prototype.getLeastPanels=function(e){var t=this;return o.union.apply(void 0,Object(i.j)(e)).filter((function(e){var n=t.getPanelType(e);return!!n&&"atLeastOne"===n.openForContextAware})).map((function(e){return{id:e,features:{}}}))},e.prototype.removePanels=function(e){var t=this;this.sideBar.itemIds.filter((function(t){return-1===e.indexOf(t)})).forEach((function(e){return t.sideBar.removeById(e)}))},e.prototype.addPanels=function(e){var t=this;e.forEach((function(e,n){if(-1===t.sideBar.itemIds.indexOf(e.id)){var r=t.getPanelType(e.id);r&&t.sideBar.add(r,n)}}))},e.prototype.updatePanels=function(e){var t=this;e.forEach((function(e,n){t.sideBar.updatePanelFeatures(e)}))},e.prototype.getPanelType=function(e){return this.state.get("AvailableSideBarPanels")[e]},e.\u0275fac=function(t){return new(t||e)(C.fc(m.a),C.fc(y.a),C.fc(a.Ib))},e.\u0275cmp=C.Zb({type:e,selectors:[["sidebar-container"]],viewQuery:function(e,t){var n;(1&e&&C.Wc(w,!0),2&e)&&(C.Lc(n=C.uc())&&(t.sideBar=n.first))},decls:2,vars:0,consts:[["sb",""]],template:function(e,t){1&e&&C.gc(0,"sidebar",null,0)},directives:[v.a],encapsulation:2,changeDetection:0}),e}()},"izw+":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("QoSw"),i=n("nsO7"),a=n("wx9+"),o=n("8a+/"),s=n("YtkY"),c=n("5xGT"),l=n("ROBh"),u=n("EM62"),p=n("s2Ay"),h=function(){function e(e,t,n,r,i){this.state=e,this.ll=t,this.shapeBoundsLocator=n,this.viewport=r,this.translate=i}return e.prototype.getFeatureData=function(e,t){return Object(l.a)(t)},e.prototype.transformProperties=function(e,t){var n=this,r=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(s.a)((function(e){var a=Object(i.values)(e.shapes).filter((function(e){return!e.isConnector()&&r.includes(e.id)})).every((function(e){return e.isContainer}));return t.label=a?n.translate.instant("COMMANDS.UNDO_CONTAINERIZING"):n.translate.instant("COMMANDS.CONTAINERIZE"),t})))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(s.a)((function(e){return!!t.find((function(t){return e.shapes[t].isContainerable}))})))},e.prototype.getApplyData=function(e,t){var n=this,r=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(s.a)((function(e){var t=r.map((function(t){return e.shapes[t]})),i=t.filter((function(e){return!e.isConnector()&&e.isContainerable&&!e.isContainer})),a={containerData:{},childrenData:{}};return i.length?n.containerize(e,i,a):n.decontainerize(t,a),a})))},e.prototype.containerize=function(e,t,n){var r=this;t.forEach((function(t){var i=t.bounds;r.shapeBoundsLocator.searchShapes(i.left,i.right,i.top,i.bottom,[t.id],!0).filter((function(n){return!!(n.zIndex>=t.zIndex)&&(e.shapes[n.id].containerId||null)===(e.shapes[t.id].containerId||null)})).forEach((function(e){n.childrenData[e.id]={action:"enter",containerId:t.id}})),n.containerData[t.id]={isContainer:!0}}))},e.prototype.decontainerize=function(e,t){Object(i.values)(e).filter((function(e){return!e.isConnector()&&e.isContainerable&&e.isContainer})).forEach((function(e){for(var n in e.children)t.childrenData[n]={action:"leave",containerId:e.id};t.containerData[e.id]={isContainer:!1}}))},e.\u0275fac=function(t){return new(t||e)(u.pc(c.Ib),u.pc(r.a),u.pc(o.a),u.pc(a.a),u.pc(p.e))},e.\u0275prov=u.bc({token:e,factory:e.\u0275fac}),e}()},j0Im:function(e,t,n){var r=n("sfKy"),i=n("oFOz");t.UNIQUE=function(){for(var e=[],t=0;t<arguments.length;++t){for(var n=!1,r=arguments[t],i=0;i<e.length&&!(n=e[i]===r);++i);n||e.push(r)}return e},t.FLATTEN=r.flatten,t.ARGS2ARRAY=function(){return Array.prototype.slice.call(arguments,0)},t.REFERENCE=function(e,t){if(!arguments.length)return i.error;try{for(var n=t.split("."),r=e,a=0;a<n.length;++a){var o=n[a];if("]"===o[o.length-1]){var s=o.indexOf("["),c=o.substring(s+1,o.length-1);r=r[o.substring(0,s)][c]}else r=r[o]}return r}catch(i){}},t.JOIN=function(e,t){return e.join(t)},t.NUMBERS=function(){var e=r.flatten(arguments);return e.filter((function(e){return"number"==typeof e}))}},j1Bk:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("EM62"),i=n("2kYt"),a=n("s2Ay");function o(e,t){if(1&e&&(r.lc(0,"span",7),r.wc(),r.lc(1,"svg",8),r.gc(2,"use"),r.kc(),r.kc()),2&e){var n=r.xc(2);r.Sb(2),r.Tb("href",n.subTextIconHref,null,"xlink")}}function s(e,t){if(1&e&&(r.lc(0,"label",5),r.cd(1,o,3,1,"span",6),r.ed(2),r.kc()),2&e){var n=r.xc();r.Sb(1),r.Cc("ngIf",n.subTextIcon),r.Sb(1),r.gd(" ",n.subText," ")}}var c=function(){function e(){this.icon="generic",this.reverse=!1}return Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/common/panels/diagram-type-icons/"+this.icon+".svg"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subTextIconHref",{get:function(){return"./assets/icons/symbol-defs.svg#"+this.subTextIcon},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Zb({type:e,selectors:[["panel-icon-header"]],inputs:{icon:"icon",reverse:"reverse",mainText:"mainText",subText:"subText",subTextIcon:"subTextIcon"},decls:6,vars:4,consts:[[1,"panel-item"],[1,"panel-icon-header","fx-center-vertical"],[1,"panel-icon-header-text"],["class","sub","translate","",4,"ngIf"],["translate","",1,"main"],["translate","",1,"sub"],["class","lock-icon",4,"ngIf"],[1,"lock-icon"],[1,"nu-icon","nu-icon-xsmall"]],template:function(e,t){1&e&&(r.lc(0,"div",0),r.lc(1,"div",1),r.lc(2,"div",2),r.cd(3,s,3,2,"label",3),r.lc(4,"h2",4),r.ed(5),r.kc(),r.kc(),r.kc(),r.kc()),2&e&&(r.Sb(2),r.Xb("reverse",t.reverse),r.Sb(1),r.Cc("ngIf",t.subText),r.Sb(2),r.fd(t.mainText))},directives:[i.t,a.a],styles:[".panel-icon-header[_ngcontent-%COMP%]{padding-top:15px}.panel-icon-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;margin-right:15px;margin-top:-5px;pointer-events:none}.panel-icon-header-text[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.panel-icon-header-text[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{font-family:Lato,sans-serif;font-style:normal;font-weight:400;line-height:22px;letter-spacing:0;text-align:left;font-size:18px;order:1;margin-bottom:5px}.panel-icon-header-text[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-size:12px;color:#7e7e7e;order:2}.panel-icon-header-text[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-top}.panel-icon-header-text.reverse[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{order:2}.panel-icon-header-text.reverse[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{order:1;margin-bottom:5px}"],changeDetection:0}),e}()},jw4I:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("EM62"),i=n("2kYt"),a=function(){function e(){}return e.prototype.ngAfterViewInit=function(){document.querySelector("."+this.styleID).innerHTML=this.styleSpan},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Zb({type:e,selectors:[["text-styling-tile"]],inputs:{styleSpan:"styleSpan",styleID:"styleID",style:"style"},decls:5,vars:1,consts:[[1,"text-style-tile-container","fx-no-selection"],[1,"tick"],[1,"nu-icon","nu-ic-tick-thin"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-tick-thin"],[1,"fx-ellipsis",3,"ngClass"]],template:function(e,t){1&e&&(r.lc(0,"div",0),r.lc(1,"div",1),r.wc(),r.lc(2,"svg",2),r.gc(3,"use",3),r.kc(),r.kc(),r.vc(),r.gc(4,"div",4),r.kc()),2&e&&(r.Sb(4),r.Cc("ngClass",t.styleID))},directives:[i.q],styles:[".text-style-tile-container[_ngcontent-%COMP%]{text-align:center;border-radius:4px;border:1px solid #d3d3e7;color:#04263d;margin-bottom:20px;height:40px;line-height:30px;padding:5px 10px;cursor:pointer}.text-style-tile-container[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]{width:0;visibility:hidden;float:left;transition:width .3s ease-in-out;height:25px}.text-style-tile-container[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:opacity .1s ease-in-out;opacity:0}.text-style-tile-container.selected[_ngcontent-%COMP%]{border:1px solid #ffc648}.text-style-tile-container.selected[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]{width:25px;visibility:visible}.text-style-tile-container.selected[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1;transition-delay:.2s}.text-style-tile-container[_ngcontent-%COMP%]:hover{border:1px solid #ffc648}"],changeDetection:0}),e}()},"k/7B":function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("QoSw"),i=n("diDk"),a=(n("unyx"),n("NNJu")),o=n("ZTXN"),s=n("C05f"),c=n("ROBh"),l=n("P4Xx"),u=n("TLy2"),p=n("8j5Y"),h=n("YtkY"),d=n("Ohay"),f=n("EM62"),g=n("2kYt"),m=n("pYIu"),v=n("XwbL"),b=n("uXwy"),y=["dbSelector"];function x(e,t){if(1&e&&f.gc(0,"sidebar-list-dropdown-item",5),2&e){var n=t.$implicit;f.Cc("item",n)}}var C=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0}};function w(e,t){if(1&e&&(f.lc(0,"abs-dropdown",1,2),f.gc(2,"sidebar-dropdown-button",3),f.cd(3,x,1,1,"sidebar-list-dropdown-item",4),f.kc()),2&e){var n=t.ngIf,r=f.xc();f.Cc("settings",f.Gc(5,C))("autoPosition",!1),f.Sb(2),f.Cc("items",n)("placeholderText",r.placeholderText),f.Sb(1),f.Cc("ngForOf",n)}}var k=function(){function e(e,t){var n=this;this.ll=e,this.ell=t,this.dbChanged=new o.a,this.subs=[],this.databases=[],this._selectedDb=new s.a(null),this.databaseOptions=this.ll.forCurrentObserver(!1).pipe(Object(u.a)((function(e){return e.getDiagramEData().pipe(Object(u.a)((function(e){if(!e)return Object(c.a)([]);var t=e.map((function(e){return n.ell.getEData(e).pipe(Object(u.a)((function(e){return e.getEDataModelOnce()})))}));return Object(l.a)(t)})))})),Object(p.a)((function(e){return n.databases=e})),Object(u.a)((function(e){return n._selectedDb.pipe(Object(h.a)((function(t){return e.map((function(e){return{id:e.id,label:e.name,buttonLabel:e.name,selected:!!t&&t.id===e.id}}))})))})))}return e.prototype.ngOnChanges=function(e){this._selectedDb.next(e.selectedDb.currentValue)},e.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.dbSelector.changed.pipe(Object(d.a)((function(e,t){return e.length===t.length&&e[0]===t[0]}))).subscribe((function(t){e.dbChanged.next(e.databases.find((function(e){return e.id===t[0]})))})))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.\u0275fac=function(t){return new(t||e)(f.fc(r.a),f.fc(i.a))},e.\u0275cmp=f.Zb({type:e,selectors:[["custom-database-selector"]],viewQuery:function(e,t){var n;(1&e&&f.jd(y,!0,a.b),2&e)&&(f.Lc(n=f.uc())&&(t.dbSelector=n.first))},inputs:{selectedDb:"selectedDb",placeholderText:"placeholderText"},outputs:{dbChanged:"dbChanged"},features:[f.Qb],decls:2,vars:3,consts:[["class","dropdown-item",3,"settings","autoPosition",4,"ngIf"],[1,"dropdown-item",3,"settings","autoPosition"],["dbSelector",""],["ddbutton","",3,"items","placeholderText"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){1&e&&(f.cd(0,w,4,6,"abs-dropdown",0),f.yc(1,"async")),2&e&&f.Cc("ngIf",f.zc(1,1,t.databaseOptions))},directives:[g.t,m.a,v.a,g.s,b.a],pipes:[g.b],encapsulation:2,changeDetection:0}),e}()},k0Sg:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("nsO7"),i=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("YtkY"),c=n("QoSw"),l=n("EM62"),u=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return e.prototype.getFeatureData=function(e,t){var n=this,i=this.featureList.getFeature(e);return t.params={readOnly:i.data.readOnly,isDiffColor:!1,type:i.data.type},"lineStyle"===i.data.style?(t.data.forEach((function(e){e.buttonIcon=n.getDrawableIcon(e.value,60,20),e.itemIcon=n.getDrawableIcon(e.value,50,20),e.selected=Object(r.isEqual)(t.value,e.value)})),Object(o.a)({value:t.data})):"fillColor"===i.data.style||"lineColor"===i.data.style?this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(s.a)((function(e){return n.getColorMismatch(e,t,i.data.style)}))):Object(o.a)(t)},e.prototype.getApplyData=function(e,t){var n=this.featureList.getFeature(e);"lineThickness"===n.data.style&&(t.value=parseInt(t.value,10));var r={};return r[n.data.style]=t.value,"colorFill"===e&&(r.fillStyle="solid"),Object(o.a)({style:r})},e.prototype.getColorMismatch=function(e,t,n){var r=this.state.get("Selected"),i=[],a=!1;r.forEach((function(t){var r=e.getShape(t);switch(n){case"fillColor":i.push(r.style.fillColor);break;case"lineColor":i.push(r.style.lineColor)}}));for(var o=1;o<i.length;o++)if(i[o-1]!==i[o]){a=!0;break}return a&&(t.params.isDiffColor=!0),t},e.prototype.getDrawableIcon=function(e,t,n){return{type:"canvas",value:function(r,i){r.setStrokeDash(e),r.beginStroke("navy-blue"),r.moveTo(0,n/2),r.lineTo(t,n/2),r.endStroke()},width:t,height:n}},e.\u0275fac=function(t){return new(t||e)(l.pc(c.a),l.pc(a.Ib),l.pc(i.a))},e.\u0275prov=l.bc({token:e,factory:e.\u0275fac}),e}()},kRQx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("h/AH"),o=(r=a)&&r.__esModule?r:{default:r};var s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t;var i={cache:!0};if(void 0===r&&(r=i),"function"!=typeof n?(this.value=n,this.type=this.constructor.CONSTANT):(this.calculationMethod=n,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(r.priority||1,10),this.options=Object.assign({},i,r),this.cacheKeyMethod=this.defaultCacheKeys,this}return i(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(e,t){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(e,t)}},{key:"defaultCacheKeys",value:function(e,t){return{params:t,id:e}}},{key:"getCacheKey",value:function(t){if(!0===this.options.cache){var n=this.cacheKeyMethod(this.id,t);return e.hashFromObject(n)}}}],[{key:"hashFromObject",value:function(e){return(0,o.default)(e)}}]),e}();s.CONSTANT="CONSTANT",s.DYNAMIC="DYNAMIC",t.default=s},kWt5:function(e,t,n){},kgBD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserCommands=void 0,function(e){e.userSetToken="user:setToken"}(t.UserCommands||(t.UserCommands={}))},ktVY:function(e,t,n){var r=n("oFOz"),i=n("sfKy");t.MATCH=function(e,t,n){if(!e&&!t)return r.na;if(2===arguments.length&&(n=1),!(t instanceof Array))return r.na;if(t=i.flatten(t),-1!==n&&0!==n&&1!==n)return r.na;for(var a,o,s=0;s<t.length;s++)if(1===n){if(t[s]===e)return s+1;t[s]<e&&(o?t[s]>o&&(a=s+1,o=t[s]):(a=s+1,o=t[s]))}else if(0===n){if("string"==typeof e){if(e=e.replace(/\?/g,"."),t[s].toLowerCase().match(e.toLowerCase()))return s+1}else if(t[s]===e)return s+1}else if(-1===n){if(t[s]===e)return s+1;t[s]>e&&(o?t[s]<o&&(a=s+1,o=t[s]):(a=s+1,o=t[s]))}return a||r.na},t.VLOOKUP=function(e,t,n,i){if(!t||!n)return r.na;i=!(0===i||!1===i);for(var a=r.na,o="number"==typeof e,s=!1,c=0;c<t.length;c++){var l=t[c];if(l[0]===e){a=n<l.length+1?l[n-1]:r.ref;break}!s&&(o&&i&&l[0]<=e||i&&"string"==typeof l[0]&&l[0].localeCompare(e)<0)&&(a=n<l.length+1?l[n-1]:r.ref),o&&l[0]>e&&(s=!0)}return a},t.HLOOKUP=function(e,n,r,a){return t.VLOOKUP(e,i.transpose(n),r,a)},t.LOOKUP=function(e,t,n){t=i.flatten(t),n=i.flatten(n);for(var a="number"==typeof e,o=r.na,s=0;s<t.length;s++){if(t[s]===e)return n[s];if(a&&t[s]<=e||"string"==typeof t[s]&&t[s].localeCompare(e)<0)o=n[s];else if(a&&t[s]>e)return o}return o},t.INDEX=function(e,t,n){var a=i.anyError(e,t,n);if(a)return a;if(!Array.isArray(e))return r.value;var o=e.length>0&&!Array.isArray(e[0]);return o&&!n?(n=t,t=1):(n=n||1,t=t||1),n<0||t<0?r.value:o&&1===t&&n<=e.length?e[n-1]:t<=e.length&&n<=e[t-1].length?e[t-1][n-1]:r.ref}},lCA4:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t="undefined"!=typeof global?global:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t.default},lP4r:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("6Oco"),a=n("EM62"),o=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"ShapeCodeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["*"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t,n,a=e.__sakota__.getChanges(),o=this.modifiedShapes(a);try{for(var s=Object(r.k)(o),c=s.next();!c.done;c=s.next()){var l=c.value;this.processShape(e,l)}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.a},e.prototype.processShape=function(e,t){var n=e.shapes[t],r=n.__sakota__.getChanges(),i=r.$set&&!!r.$set.defId;if(n&&n.dataChange&&!i&&n.dataChange(n,e),n&&n.containerId){var a=e.shapes[n.containerId];a&&a.childChange&&a.childChange(a,n)}},e.prototype.modifiedShapes=function(t){var n,i,a=[];try{for(var o=Object(r.k)(["$set","$unset"]),s=o.next();!s.done;s=o.next()){var c=s.value;if(t[c])for(var l in t[c]){e.regexShape.lastIndex=0;var u=e.regexShape.exec(l);if(u){var p=u[1];-1===a.indexOf(p)&&a.push(p)}}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a},e.regexShape=/shapes\.([^\.]+)\./g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},lu3Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("nsO7"),i=n("EM62"),a=function(){function e(){}return e.prototype.addCursors=function(e){this.cursors?this.cursors=Object(r.merge)(this.cursors,e):this.cursors=e},e.prototype.getCursorCSS=function(e){var t,n;if(e.tail){var r=this.getCompactCursor(this.getCursor(e.cursor||"normal"),this.getTail(e.tail));t=r.content,n=r.origin}else{if(!e.cursor||e.tail)throw new Error("At least one of cursor or tail should be defined to generate the cursor CSS.");t=this.getCursor(e.cursor),n=this.getSvgData(t).origin}return("url('data:image/svg+xml;utf8,"+t+"') "+n.x+" "+n.y+", auto").replace(/\n|\r/g,"")},e.prototype.getCursorIcon=function(e){return"url("+this.getCursor(e.cursor)+"), auto"},e.prototype.getCursor=function(e){if(this.cursors.cursors[e])return this.cursors.cursors[e];throw new Error(e+" cursor is not found in the cursors ICursorMap")},e.prototype.getTail=function(e){if(this.cursors.tails[e])return this.cursors.tails[e];throw new Error(e+" cursor tail is not found in the cursors ICursorMap")},e.prototype.getCompactCursor=function(e,t){var n=this.getSvgData(e),r=this.getSvgData(t);return{content:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+(n.width+r.width)+'" height="'+(n.height+r.height)+'" ><g>'+n.content+'</g><g transform="translate('+n.width+" "+n.height+')">'+r.content+"</g></svg>",origin:n.origin}},e.prototype.getSvgData=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelector("svg");return{content:n.innerHTML,width:Number(n.getAttribute("width")),height:Number(n.getAttribute("height")),origin:{x:Number(n.getAttribute("data-ox")||0),y:Number(n.getAttribute("data-oy")||0)}}},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.bc({token:e,factory:e.\u0275fac}),e}()},"mG+b":function(e,t,n){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=s.COMPILER_REVISION;if(t>=s.LAST_COMPATIBLE_COMPILER_REVISION&&t<=s.COMPILER_REVISION)return;if(t<s.LAST_COMPATIBLE_COMPILER_REVISION){var r=s.REVISION_CHANGES[n],i=s.REVISION_CHANGES[t];throw new o.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new o.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new o.default("No environment passed to template");if(!e||!e.main)throw new o.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0];var r={strict:function(e,t,n){if(!e||!(t in e))throw new o.default('"'+t+'" not defined in '+e,{loc:n});return r.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||u.resultIsAllowed(n,r.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++){if(null!=(e[i]&&r.lookupProperty(e[i],t)))return e[i][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:i.escapeExpression,invokePartial:function(n,r,a){a.hash&&(r=i.extend({},r,a.hash),a.ids&&(a.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,a);var s=i.extend({},a,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),c=t.VM.invokePartial.call(this,n,r,s);if(null==c&&t.compile&&(a.partials[a.name]=t.compile(n,e.compilerOptions,t),c=a.partials[a.name](r,s)),null!=c){if(a.indent){for(var l=c.split("\n"),u=0,p=l.length;u<p&&(l[u]||u+1!==p);u++)l[u]=a.indent+l[u];c=l.join("\n")}return c}throw new o.default("The partial "+a.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,i){var a=this.programs[e],o=this.fn(e);return t||i||r||n?a=p(this,e,o,t,n,r,i):a||(a=this.programs[e]=p(this,e,o)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=i.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function a(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.data;a._setup(n),!n.partial&&e.useData&&(i=d(t,i));var o=void 0,s=e.useBlockParams?[]:void 0;function c(t){return""+e.main(r,t,r.helpers,r.partials,i,s,o)}return e.useDepths&&(o=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(c=f(e.main,c,r,n.depths||[],i,s))(t,n)}return a.isTop=!0,a._setup=function(a){if(a.partial)r.protoAccessControl=a.protoAccessControl,r.helpers=a.helpers,r.partials=a.partials,r.decorators=a.decorators,r.hooks=a.hooks;else{var o=i.extend({},t.helpers,a.helpers);!function(e,t){Object.keys(e).forEach((function(n){var r=e[n];e[n]=function(e,t){var n=t.lookupProperty;return l.wrapHelper(e,(function(e){return i.extend({lookupProperty:n},e)}))}(r,t)}))}(o,r),r.helpers=o,e.usePartial&&(r.partials=r.mergeIfNeeded(a.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=i.extend({},t.decorators,a.decorators)),r.hooks={},r.protoAccessControl=u.createProtoAccessControl(a);var s=a.allowCallsToHelperMissing||n;c.moveHelperToHooks(r,"helperMissing",s),c.moveHelperToHooks(r,"blockHelperMissing",s)}},a._child=function(t,n,i,a){if(e.useBlockParams&&!i)throw new o.default("must pass block params");if(e.useDepths&&!a)throw new o.default("must pass parent depths");return p(r,t,e[t],n,0,i,a)},a},t.wrapProgram=p,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var a=void 0;n.fn&&n.fn!==h&&function(){n.data=s.createFrame(n.data);var e=n.fn;a=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=s.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=i.extend({},n.partials,e.partials))}();void 0===e&&a&&(e=a);if(void 0===e)throw new o.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=h;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("XVEb")),a=n("0KrK"),o=(r=a)&&r.__esModule?r:{default:r},s=n("T9/7"),c=n("svB4"),l=n("ML8A"),u=n("hQOw");function p(e,t,n,r,i,a,o){function s(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return!o||t==o[0]||t===e.nullContext&&null===o[0]||(s=[t].concat(o)),n(e,t,e.helpers,e.partials,i.data||r,a&&[i.blockParams].concat(a),s)}return(s=f(n,s,e,o,r,a)).program=t,s.depth=o?o.length:0,s.blockParams=i||0,s}function h(){return""}function d(e,t){return t&&"root"in t||((t=t?s.createFrame(t):{}).root=e),t}function f(e,t,n,r,a,o){if(e.decorator){var s={};t=e.decorator(t,s,n,r&&r[0],a,o,r),i.extend(t,s)}return t}},myrl:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("TQyE"),i=(n("Cupj"),n("EM62")),a=n("ZTXN"),o=n("C05f"),s=n("6Oco"),c=n("nsO7"),l=["singleColorPickerSection"],u=function(){function e(e,t){this.resolver=e,this.injector=t,this.currentColorPickerComponents={},this.currentDataItemIds=[],this.componentRefreshRequired=!1,this.colorPickerSubscriptions=[],this._change=new a.a,this.valueSource=new o.a("")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){var t=e.map((function(e){return e.id}));this.currentDataItemIds.length>0?Object(c.isEqual)(this.currentDataItemIds.sort(),t.sort())?this.componentRefreshRequired=!1:(this.componentRefreshRequired=!0,this.currentDataItemIds=t):(this.currentDataItemIds=t,this.componentRefreshRequired=!0),this._data=e},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){var e=this;this.componentRefreshRequired?(this.currentColorPickerComponents={},this.colorPickerSubscriptions.forEach((function(e){e.unsubscribe()})),this.colorPickerSubscriptions=[],this.singleColorPickerSection.clear(),this._data.forEach((function(t){var n=e.getColorPicker(t);n.instance.apply(),n.changeDetectorRef.markForCheck();var r=n.instance.change.subscribe((function(n){e._change.next({item:t,change:n})}));e.colorPickerSubscriptions.push(r)}))):this._data.forEach((function(t){e.getColorPicker(t).instance.apply()}))},e.prototype.applyAnimated=function(){return this.apply(),Object(s.b)()},e.prototype.createColorPicker=function(e){var t=this.resolver.resolveComponentFactory(r.a);return this.singleColorPickerSection.createComponent(t)},e.prototype.getColorPicker=function(e){this.currentColorPickerComponents[e.id]||(this.currentColorPickerComponents[e.id]=this.createColorPicker(e.id));var t=this.currentColorPickerComponents[e.id];t.instance.setProperties({label:e.label});var n={value:e.style.fillColor?e.style.fillColor:e.style.lineColor,params:void 0};return e.id.includes("diff")&&(n.params={isDiffColor:!0}),t.instance.setData(n),t},e.\u0275fac=function(t){return new(t||e)(i.fc(i.m),i.fc(i.C))},e.\u0275cmp=i.Zb({type:e,selectors:[["sidebar-style"]],viewQuery:function(e,t){var n;(1&e&&i.Wc(l,!0,i.hb),2&e)&&(i.Lc(n=i.uc())&&(t.singleColorPickerSection=n.first))},decls:2,vars:0,consts:[["singleColorPickerSection",""]],template:function(e,t){1&e&&i.gc(0,"div",null,0)},encapsulation:2,changeDetection:0}),e}()},nKku:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("X0jn"),i=n("8PfW"),a=function(){function e(){}return e.getEscaped=function(e){var t=[",","\n"].some((function(t){return e.includes(t)}));return e.includes('"')&&(e=e.replace(/"/g,'""')),t?'"'+e+'"':e},e.getFormatter=function(e){return e===r.c.STRING_HTML?function(e){return e.value?e.value.replace(/<[^>]*>/g,""):""}:e===r.c.BINARY?function(e){return(!!e.value).toString()}:e===r.c.DATE?function(e){return e.value?new Date(e.value).toUTCString():""}:e===r.c.TAGS?function(e){return e.value&&e.value.length>0?e.value.map((function(e){return e.name})).join(","):""}:e===r.c.USERS?function(e){return e.value&&e.value.people&&e.value.people.length>0?e.value.people.map((function(e){return e.fullName})).join(","):""}:function(e){return null===e.value||void 0===e.value?"":e.value.toString()}},e.getParser=function(t){if(t===r.c.BINARY){var n=["0","false","FALSE",""];return function(e){return-1===n.indexOf(e)}}return t===r.c.NUMBER?function(e){return Number(e)}:t===r.c.STRING_HTML?(e.converter||(e.converter=new i.Converter,e.converter.setFlavor("github")),function(t){return/<\/?[a-z][\s\S]*>/i.test(t)?t:e.converter.makeHtml(t)}):t===r.c.DATE?function(e){return parseFloat(e).toString()===e?Number(e):Date.parse(e)}:t===r.c.TAGS?function(e){return e&&e.length>0?e.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})).map((function(e){return{name:e}})):[]}:null},e}()},nT0V:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var r=n("hX56"),i=n("3+4Q"),a=n("qMyy"),o=n("5xGT"),s=n("TLy2"),c=n("J+dc"),l=n("YtkY"),u=n("8j5Y"),p=n("xVbo"),h=n("4y1S"),d=n("NNJu"),f=n("C05f"),g=n("ZTXN"),m=n("8lHc"),v=n("KTx3"),b=n("X0jn"),y=n("EM62"),x=n("2kYt"),C=n("rwb9"),w=n("s2Ay"),k=n("Wrqg"),S=["textInput"];function O(e,t){if(1&e&&y.gc(0,"user-image",17),2&e){var n=y.xc();y.Cc("hasImage",n.commenter.hasImage)("imagePath",n.commenter.image)("userColor",n.commenter.displayColor)("userInitials",n.commenter.initial)("userRegistered",n.commenter.isRegistered)("userOnlineStatus",!0)}}function E(e,t){if(1&e&&y.gc(0,"user-image",18),2&e){var n=y.xc();y.Cc("hasImage",n.threadCommentor.hasImage)("imagePath",n.threadCommentor.image)("userColor",n.threadCommentor.displayColor)("userInitials",n.threadCommentor.initial)("userRegistered",n.threadCommentor.isRegistered)("userOnlineStatus",!0)}}function _(e,t){if(1&e&&(y.lc(0,"label",19),y.ed(1),y.kc()),2&e){var n=y.xc();y.Sb(1),y.fd(n.commenter.fullName)}}function I(e,t){if(1&e){var n=y.mc();y.lc(0,"div",20),y.lc(1,"a"),y.wc(),y.lc(2,"svg",21),y.gc(3,"use",22),y.kc(),y.kc(),y.vc(),y.lc(4,"div",23),y.lc(5,"a",24),y.tc("click",(function(){return y.Pc(n),y.xc().resolveComment()})),y.ed(6,"COMMENTS.LABELS.RESOLVE_THREAD"),y.kc(),y.kc(),y.kc()}}function P(e,t){1&e&&(y.lc(0,"label",25),y.ed(1,"COMMENTS.LABELS.EDITED"),y.kc())}function T(e,t){if(1&e&&(y.lc(0,"label",26),y.wc(),y.lc(1,"svg",27),y.gc(2,"use",28),y.kc(),y.ed(3),y.kc()),2&e){var n=y.xc();y.Sb(3),y.gd(" ",n.threadCount," ")}}function A(e,t){if(1&e&&(y.lc(0,"div"),y.lc(1,"label",29),y.ed(2,"COMMENTS.LABELS.RESOLVED_BY"),y.kc(),y.ed(3,"\xa0 "),y.lc(4,"span",30),y.ed(5),y.kc(),y.kc()),2&e){var n=y.xc();y.Sb(5),y.fd(n.resolvedCommentor.fullName)}}function M(e,t){if(1&e&&(y.lc(0,"p",32),y.ed(1),y.kc()),2&e){var n=y.xc(2);y.Sb(1),y.fd(n.comment.comment)}}function D(e,t){1&e&&(y.lc(0,"p",19),y.lc(1,"i",29),y.ed(2,"COMMENTS.LABELS.DELETED_COMMENT"),y.kc(),y.kc())}function j(e,t){if(1&e&&(y.lc(0,"div"),y.cd(1,M,2,1,"p",31),y.yc(2,"async"),y.cd(3,D,3,0,"p",6),y.kc()),2&e){var n=y.xc();y.Sb(1),y.Cc("ngIf",!y.zc(2,2,n.isEditMode)&&!n.isDeleted),y.Sb(2),y.Cc("ngIf",n.isDeleted)}}var N=function(){return["Enter"]};function R(e,t){if(1&e){var n=y.mc();y.lc(0,"div",33),y.lc(1,"text-input",34,35),y.tc("submit",(function(e){return y.Pc(n),y.xc().updateComment(e)})),y.yc(3,"translate"),y.kc(),y.kc()}if(2&e){var r=y.xc();y.Sb(1),y.Dc("placeholder",y.zc(3,6,"PLACEHOLDERS.EDIT_COMMENT")),y.Cc("value",r.comment.comment)("clearOnSubmit",!0)("submitOnCode",y.Gc(8,N))("autoFocus",!0)("multiLined",!0)}}function L(e,t){if(1&e){var n=y.mc();y.lc(0,"a",39),y.tc("click",(function(e){return y.Pc(n),y.xc(2).replyClicked.next(e)})),y.ed(1,"Reply"),y.kc()}}function F(e,t){if(1&e){var n=y.mc();y.lc(0,"div",36),y.lc(1,"a",37),y.tc("click",(function(){return y.Pc(n),y.xc().toggleEditCommentMode(!0)})),y.ed(2,"COMMENTS.LABELS.EDIT"),y.kc(),y.lc(3,"a",37),y.tc("click",(function(){return y.Pc(n),y.xc().deleteComment()})),y.ed(4,"COMMENTS.LABELS.DELETE"),y.kc(),y.cd(5,L,2,0,"a",38),y.kc()}if(2&e){var r=y.xc();y.Sb(5),y.Cc("ngIf",r.showReplayControl)}}function B(e,t){if(1&e){var n=y.mc();y.lc(0,"a",39),y.tc("click",(function(e){return y.Pc(n),y.xc(2).replyClicked.next(e)})),y.ed(1,"Reply"),y.kc()}}function V(e,t){if(1&e){var n=y.mc();y.lc(0,"div",36),y.lc(1,"a",37),y.tc("click",(function(){return y.Pc(n),y.xc().updateComment()})),y.ed(2,"COMMENTS.LABELS.UPDATE"),y.kc(),y.lc(3,"a",37),y.tc("click",(function(){return y.Pc(n),y.xc().toggleEditCommentMode(!1)})),y.ed(4,"COMMENTS.LABELS.CANCEL"),y.kc(),y.cd(5,B,2,0,"a",38),y.kc()}if(2&e){var r=y.xc();y.Sb(5),y.Cc("ngIf",r.showReplayControl)}}function z(e,t){1&e&&y.gc(0,"div",40)}var U=function(){function e(e,t,n,r){var i=this;this.datastore=e,this.commandService=t,this.state=n,this.userLocator=r,this.threadCount=1,this.showControls=!1,this.showReplayControl=!1,this.isEditMode=new f.a(!1),this.commentTime=new f.a(""),this.replyClicked=new g.a,this.itemClicked=new g.a,this.timeRefreshInterval=6e4,this.subs=[],this.subs.push(this.getCancelEditInteraction().subscribe((function(){return i.isEditMode.next(!1)})))}return Object.defineProperty(e.prototype,"isNew",{get:function(){return this.comment.isNew(this.state.get("CurrentUser"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDeleted",{get:function(){return this.comment.isDeleted()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEdited",{get:function(){return this.comment.isEdited()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableBasicControls",{get:function(){return this.showControls&&this.commenter&&this.commenter.id===this.state.get("CurrentUser")&&!this.isDeleted&&!this.isEditMode.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableEditControls",{get:function(){return this.showControls&&this.commenter&&this.commenter.id===this.state.get("CurrentUser")&&this.isEditMode.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showResolveButton",{get:function(){return!this.comment.parentId&&!this.comment.resolved},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t=this.state.get("CurrentDiagram");this.subs.push(Object(m.a)(0,this.timeRefreshInterval).pipe(Object(s.a)((function(){return e.datastore.findOne(i.a,{diagramId:t,id:e.comment.id}).pipe(Object(c.a)(1),Object(l.a)((function(t){return e.commentTime.next(t.getTime())})))}))).subscribe())},e.prototype.deleteComment=function(){o.Kb.track("canvas.comment.existing.delete"),this.commandService.dispatch(a.a.deleteComment,{commentId:this.comment.id})},e.prototype.updateComment=function(e){this.isEditMode.next(!1),e||(e=this.textInput.text),e&&0!==e.trim().length?this.commandService.dispatch(a.a.editComment,{commentId:this.comment.id,diagramId:this.comment.diagramId,comment:e}):this.isEditMode.next(!1)},e.prototype.resolveComment=function(){var e=this;o.Kb.track("canvas.comment.resolve-thread.click"),this.userLocator.getUserData().pipe(Object(c.a)(1),Object(u.a)((function(t){e.commandService.dispatch(a.a.resolveComment,{commentId:e.comment.id,userId:t.id})}))).subscribe()},e.prototype.toggleEditCommentMode=function(e){this.isEditMode.next(e),e&&o.Kb.track("right.comment.existing.edit")},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.getCancelEditInteraction=function(){var e=this;return Object(v.a)(window,"keydown").pipe(Object(p.a)((function(t){return t.keyCode===b.j.Escape&&e.isEditMode.value})))},e.\u0275fac=function(t){return new(t||e)(y.fc(r.b),y.fc(o.B),y.fc(o.Ib),y.fc(h.x))},e.\u0275cmp=y.Zb({type:e,selectors:[["comment-thread-item"]],viewQuery:function(e,t){var n;(1&e&&y.jd(S,!0,d.s),2&e)&&(y.Lc(n=y.uc())&&(t.textInput=n.first))},inputs:{comment:"comment",commenter:"commenter",resolvedCommentor:"resolvedCommentor",threadCommentor:"threadCommentor",threadCount:"threadCount",showControls:"showControls",showReplayControl:"showReplayControl"},outputs:{replyClicked:"replyClicked",itemClicked:"itemClicked"},decls:23,vars:19,consts:[[1,"cti"],[1,"cti-header","fx-center-vertical",3,"click"],[1,"cti-user-img"],["class","cti-last-user-img","imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus",4,"ngIf"],["class","cti-prev-user-img","imageSize","small",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus",4,"ngIf"],[1,"cti-header-info","fx-flex-expand"],["class","grey",4,"ngIf"],["class","temp-resolve-menu",4,"ngIf"],[1,"cti-header-info-lbls"],[1,"cti-header-time","grey"],["class","cti-header-edited grey","translate","",4,"ngIf"],["class","cti-header-count grey",4,"ngIf"],[1,"cti-content","fx-margin-top-5","fx-margin-bottom-5",3,"click"],[4,"ngIf"],["class","cti-edit-comment",4,"ngIf"],["class","cti-buttons",4,"ngIf"],["class","cti-new-comment-indicator",4,"ngIf"],["imageSize","small",1,"cti-last-user-img",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"],["imageSize","small",1,"cti-prev-user-img",3,"hasImage","imagePath","userColor","userInitials","userRegistered","userOnlineStatus"],[1,"grey"],[1,"temp-resolve-menu"],[1,"nu-icon","nu-icon-med"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],[1,"menu-content"],["translate","",1,"dark-blue",3,"click"],["translate","",1,"cti-header-edited","grey"],[1,"cti-header-count","grey"],[1,"nu-icon","nu-icon-xsmall"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-comment"],["translate",""],[1,"cti-content-commenter-name"],["class","cti-content-text",4,"ngIf"],[1,"cti-content-text"],[1,"cti-edit-comment"],[3,"placeholder","value","clearOnSubmit","submitOnCode","autoFocus","multiLined","submit"],["textInput",""],[1,"cti-buttons"],["translate","",1,"primary",3,"click"],["class","primary",3,"click",4,"ngIf"],[1,"primary",3,"click"],[1,"cti-new-comment-indicator"]],template:function(e,t){1&e&&(y.lc(0,"div",0),y.lc(1,"div",1),y.tc("click",(function(e){return t.itemClicked.next(e)})),y.lc(2,"div",2),y.cd(3,O,1,6,"user-image",3),y.cd(4,E,1,6,"user-image",4),y.kc(),y.lc(5,"div",5),y.lc(6,"div"),y.cd(7,_,2,1,"label",6),y.cd(8,I,7,0,"div",7),y.kc(),y.lc(9,"div",8),y.lc(10,"label",9),y.ed(11),y.yc(12,"async"),y.kc(),y.cd(13,P,2,0,"label",10),y.cd(14,T,4,1,"label",11),y.kc(),y.kc(),y.kc(),y.lc(15,"div",12),y.tc("click",(function(e){return t.itemClicked.next(e)})),y.cd(16,A,6,1,"div",13),y.cd(17,j,4,4,"div",13),y.kc(),y.cd(18,R,4,9,"div",14),y.yc(19,"async"),y.cd(20,F,6,1,"div",15),y.cd(21,V,6,1,"div",15),y.cd(22,z,1,0,"div",16),y.kc()),2&e&&(y.Sb(1),y.Xb("has-prev-user",t.threadCommentor),y.Sb(2),y.Cc("ngIf",t.commenter),y.Sb(1),y.Cc("ngIf",t.threadCommentor),y.Sb(3),y.Cc("ngIf",t.commenter),y.Sb(1),y.Cc("ngIf",t.showResolveButton),y.Sb(3),y.fd(y.zc(12,15,t.commentTime)),y.Sb(2),y.Cc("ngIf",t.isEdited),y.Sb(1),y.Cc("ngIf",t.threadCount>1),y.Sb(2),y.Cc("ngIf",t.resolvedCommentor),y.Sb(1),y.Cc("ngIf",!t.resolvedCommentor),y.Sb(1),y.Cc("ngIf",y.zc(19,17,t.isEditMode)),y.Sb(2),y.Cc("ngIf",t.enableBasicControls),y.Sb(1),y.Cc("ngIf",t.enableEditControls),y.Sb(1),y.Cc("ngIf",t.isNew))},directives:[x.t,C.a,w.a,k.a],pipes:[x.b,w.d],styles:[".cti[_ngcontent-%COMP%]{padding:5px;position:relative}.cti.selected[_ngcontent-%COMP%]{background-color:#f2f5fb}.cti-user-img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:10px;position:relative;margin-left:-2px}.cti-user-img[_ngcontent-%COMP%]   user-image[_ngcontent-%COMP%]{border:2px solid #fff;border-radius:100%;position:absolute}.cti-last-user-img[_ngcontent-%COMP%]{z-index:1;display:inline-block}.cti-prev-user-img[_ngcontent-%COMP%]{display:none;right:-15px}.cti-header.has-prev-user[_ngcontent-%COMP%]   .cti-prev-user-img[_ngcontent-%COMP%]{display:inline-block}.cti-header.has-prev-user[_ngcontent-%COMP%]   .cti-header-info[_ngcontent-%COMP%]{padding-left:10px}.cti-header-info[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:5px;font-size:12px}.cti-buttons[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-right:10px;font-size:12px}.cti-header-count[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-bottom:2px}.cti-new-comment-indicator[_ngcontent-%COMP%]{width:10px;height:10px;background-color:#f36c67;position:absolute;right:5px;top:7px;border-radius:100%}.cti-content-commenter-name[_ngcontent-%COMP%], .cti-content-text[_ngcontent-%COMP%]{word-wrap:break-word}.cti-content-text[_ngcontent-%COMP%]{white-space:pre-line}.temp-resolve-menu[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.temp-resolve-menu[_ngcontent-%COMP%]   .menu-content[_ngcontent-%COMP%]{display:none;position:absolute;z-index:inherit;top:25px;right:0;width:128px;border:1px solid #d3d3e7;padding:15px;border-radius:4px;background:#fff}.temp-resolve-menu[_ngcontent-%COMP%]:hover   .menu-content[_ngcontent-%COMP%]{display:inline-block}.cti-edit-comment[_ngcontent-%COMP%]{margin-bottom:5px}"],changeDetection:0}),e}()},nwI5:function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));var r=n("D57K"),i=n("5xGT"),a=n("NNJu"),o=n("X0jn"),s=n("KOB3"),c=n.n(s),l=n("C05f"),u=n("g6G6"),p=n("ROBh"),h=n("47ST"),d=n("YtkY"),f=n("wqq/"),g=n("8j5Y"),m=n("TLy2"),v=n("J+dc"),b=n("4e/d"),y=n("xYNC"),x=n("Fuvo"),C=(n("unyx"),n("EM62")),w=n("s2Ay"),k=n("k/7B"),S=n("r7/9"),O=n("2kYt"),E=n("crdX"),_=n("pYIu"),I=n("XwbL"),P=n("uXwy"),T=n("/ege"),A=["window"],M=["windowInner"],D=["mappingsSelector"],j=["mappingsContainer"];function N(e,t){if(1&e&&C.gc(0,"sidebar-list-dropdown-item",38),2&e){var n=t.$implicit;C.Cc("item",n)}}var R=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!1}};function L(e,t){if(1&e&&(C.lc(0,"abs-dropdown",34,35),C.gc(2,"sidebar-dropdown-button",36),C.cd(3,N,1,1,"sidebar-list-dropdown-item",37),C.kc()),2&e){var n=t.ngIf;C.Cc("settings",C.Gc(4,R))("autoPosition",!1),C.Sb(2),C.Cc("items",n),C.Sb(1),C.Cc("ngForOf",n)}}function F(e,t){if(1&e&&(C.lc(0,"tr"),C.lc(1,"td",31),C.ed(2),C.kc(),C.lc(3,"td",31),C.ed(4),C.kc(),C.lc(5,"td",32),C.cd(6,L,4,5,"abs-dropdown",33),C.yc(7,"async"),C.kc(),C.kc()),2&e){var n=t.$implicit,r=t.index,i=C.xc(2);C.Sb(2),C.fd(n),C.Sb(2),C.fd(i.sampleValues[r]),C.Sb(2),C.Cc("ngIf",C.zc(7,3,i.getMappingOptions(r)))}}function B(e,t){if(1&e&&(C.lc(0,"table",41),C.lc(1,"thead"),C.lc(2,"tr"),C.lc(3,"th",42),C.ed(4,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_ROW"),C.kc(),C.lc(5,"th",42),C.ed(6,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_CSV_FIELD"),C.kc(),C.lc(7,"th",42),C.ed(8,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_VALUE"),C.kc(),C.lc(9,"th",42),C.ed(10,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_PARSED_VALUE"),C.kc(),C.lc(11,"th",42),C.ed(12,"CSV_DATA_IMPORT.MAPPINGS_ERROR.HEADER_ERROR"),C.kc(),C.kc(),C.kc(),C.lc(13,"tbody"),C.lc(14,"tr"),C.lc(15,"td"),C.ed(16),C.kc(),C.lc(17,"td"),C.ed(18),C.kc(),C.lc(19,"td"),C.ed(20),C.kc(),C.lc(21,"td"),C.ed(22),C.kc(),C.lc(23,"td"),C.ed(24),C.kc(),C.kc(),C.kc(),C.kc()),2&e){var n=t.ngLet,r=C.xc(3);C.Sb(16),C.fd(n[0].rowIndex+1),C.Sb(2),C.fd(r.csvFields[n[0].columnIndex]),C.Sb(2),C.fd(n[0].value),C.Sb(2),C.fd(r.displayParsedValue(n[0].parsedValue)),C.Sb(2),C.fd(n[0].error.message)}}function V(e,t){if(1&e&&(C.lc(0,"div",39),C.lc(1,"span",9),C.ed(2," CSV_DATA_IMPORT.MAPPINGS_ERROR.MESSAGE "),C.kc(),C.cd(3,B,25,5,"table",40),C.yc(4,"async"),C.kc()),2&e){var n=C.xc(2);C.Sb(3),C.Cc("ngLet",C.zc(4,1,n.mappingErrors))}}function z(e,t){if(1&e){var n=C.mc();C.lc(0,"div"),C.lc(1,"table",23),C.lc(2,"thead"),C.lc(3,"tr"),C.lc(4,"th",24),C.ed(5,"CSV_DATA_IMPORT.MAPPINGS.COLUMN"),C.kc(),C.lc(6,"th",24),C.ed(7,"CSV_DATA_IMPORT.MAPPINGS.SAMPLE_VALUE"),C.kc(),C.lc(8,"th",25),C.ed(9,"CSV_DATA_IMPORT.MAPPINGS.DATA_ITEM"),C.kc(),C.kc(),C.kc(),C.kc(),C.lc(10,"perfect-scrollbar",26,27),C.yc(12,"async"),C.lc(13,"table",15),C.lc(14,"tbody"),C.cd(15,F,8,5,"tr",28),C.kc(),C.kc(),C.kc(),C.cd(16,V,5,3,"div",29),C.yc(17,"async"),C.lc(18,"input",30),C.tc("click",(function(){C.Pc(n);var e=C.xc();return e.ignoreErrors.next(!e.ignoreErrors.value)})),C.yc(19,"async"),C.kc(),C.lc(20,"label"),C.ed(21,"Ignore Errors"),C.kc(),C.kc()}if(2&e){var r=C.xc();C.Sb(10),C.Xb("has-errors",C.zc(12,5,r.hasMappingErrors)),C.Sb(5),C.Cc("ngForOf",r.csvFields),C.Sb(1),C.Cc("ngIf",C.zc(17,7,r.hasMappingErrors)),C.Sb(2),C.Cc("checked",C.zc(19,9,r.ignoreErrors))}}function U(e,t){if(1&e){var n=C.mc();C.lc(0,"div",43),C.lc(1,"button",44),C.tc("click",(function(){return C.Pc(n),C.xc().importCSVData()})),C.yc(2,"async"),C.ed(3,"CSV_DATA_IMPORT.IMPORT_BUTTON"),C.kc(),C.kc()}if(2&e){var r=C.xc();C.Sb(1),C.Cc("disabled",!1===C.zc(2,1,r.canImport))}}var G=function(){function e(e,t,n,r){var i;this.modalController=e,this.csvDataImporter=t,this.translate=n,this.notifierController=r,this.selectedDb=new l.a(null),this.selectedEntityType=new l.a(null),this.csvFileSelected=new l.a(!1),this.ignoreErrors=new l.a(!1),this.importing=new l.a(!1),this.hasMappingErrors=new l.a(!1),this.mappingErrors=new l.a([]),this.canImport=new l.a(!1),this.subs=[],this.selectedMappings=[],this.csvData=[],this.dataTypes=((i={})[o.c.NUMBER]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.NUMBER.LABEL"),i[o.c.STRING]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.STRING.LABEL"),i[o.c.STRING_HTML]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.STRING_HTML.LABEL"),i[o.c.BINARY]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.CHECKBOX.LABEL"),i[o.c.OPTION_LIST]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.SINGLE_SELECT_COMBO.LABEL"),i[o.c.TAGS]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.TAGS.LABEL"),i[o.c.DATE]=this.translate.instant("SHAPE_DATA.DATA_ITEMS.DATE.LABEL"),i),this.appendedDropdowns=[]}return e.prototype.ngOnInit=function(){var e=this;this.importingInto&&this.selectedDb.next(this.importingInto),this.dataItemOptions=this.selectedEntityType.pipe(Object(d.a)((function(t){if(t){var n=Object.values(t.dataItems);return[{id:"__IGNORE__",label:e.translate.instant("CSV_DATA_IMPORT.LABELS.IGNORE"),buttonLabel:e.translate.instant("CSV_DATA_IMPORT.LABELS.IGNORE"),selected:!0}].concat(n.filter((function(t){return e.dataTypes[t.type]&&(t.label||t.primaryTextBound)})).map((function(t){var n=t.primaryTextBound?e.translate.instant("CSV_DATA_IMPORT.LABELS.PRIMARY_TEXT"):t.label+" ("+e.dataTypes[t.type]+")";return{id:t.id,label:n,buttonLabel:n,selected:!1}})))}return[]})),Object(f.a)(1))},e.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.selectedDb.subscribe((function(){return e.selectedEntityType.next(null)})),this.selectedEntityType.subscribe((function(){return e.selectedMappings.forEach((function(t,n){return e.selectedMappings[n]="__IGNORE__"}))})),this.mappingsSelector.changes.pipe(Object(g.a)((function(){e.mappingsSelector.map((function(t){e.appendMappingsSelectorToBody(t)}))})),Object(m.a)((function(){return u.a.apply(void 0,Object(r.j)(e.mappingsSelector.map((function(t,n){return t.changed.pipe(Object(g.a)((function(t){var i=Object(r.h)(t,1)[0];e.selectedMappings[n]=i,e.canImport.next(e.selectedMappings.filter((function(e){return"__IGNORE__"!==e})).length>0)})))}))))}))).subscribe(),this.listenToScroll())},e.prototype.onFileChange=function(e){var t=e.target;if(t.files&&t.files.length){var n=t.files[0];this.readCsvFile(n)}},e.prototype.dropHandler=function(e){var t;e.preventDefault();var n=[];if(e.dataTransfer.items){for(var r=0;r<e.dataTransfer.items.length;r++)if("file"===e.dataTransfer.items[r].kind){var i=e.dataTransfer.items[r].getAsFile();n.push(i)}}else for(r=0;r<e.dataTransfer.files.length;r++)n.push(e.dataTransfer.files[r]);"csv"===(null===(t=n[0])||void 0===t?void 0:t.name.split(".").pop())&&this.readCsvFile(n[0])},e.prototype.dragOverHandler=function(e){e.preventDefault()},e.prototype.getMappingOptions=function(e){var t=this;return this.dataItemOptions.pipe(Object(d.a)((function(n){var i=t.selectedMappings[e];return n.map((function(e){return Object(r.a)(Object(r.a)({},e),{selected:e.id===i})}))})))},e.prototype.importCSVData=function(){var e=this;try{var t=this.ignoreErrors.value,n={mappings:[],eDefId:this.selectedEntityType.value.id,ignoreMappingErrors:t};this.selectedMappings.forEach((function(e,t){"__IGNORE__"!==e&&n.mappings.push({csvIndex:t,dataItemId:e})})),this.importing.next(!0),this.hasMappingErrors.next(!1),this.selectedDb.pipe(Object(v.a)(1),Object(g.a)((function(){return e.canImport.next(!1)})),Object(m.a)((function(t){return e.csvDataImporter.importData(t,e.csvData,n)})),Object(b.a)((function(e){return e instanceof x.a?Object(p.a)({entities:[],errors:e.errors}):Object(h.a)(e)})),Object(g.a)((function(n){var r=n.entities,i=n.errors;e.importing.next(!1),0===i.length||t&&r.length>0?(e.closeWindow.next(!0),e.showImportSuccessNotification(r.length),i.length>0&&e.showImportErrorsNotification()):(e.hasMappingErrors.next(!0),e.mappingErrors.next(i))}))).subscribe()}catch(r){}},e.prototype.displayParsedValue=function(e){return void 0===e?"undefined":Number.isNaN(e)||e instanceof Date?e.toString():JSON.stringify(e)},e.prototype.ngOnDestroy=function(){for(this.removeAppendedDropdowns();this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.readCsvFile=function(e){var t=this,n=new FileReader;n.readAsText(e),n.onload=function(){var e;t.csvData=c.a.parse(n.result,{skipEmptyLines:!0}).data,e=Object(r.h)(t.csvData,2),t.csvFields=e[0],t.sampleValues=e[1],t.selectedMappings=new Array(t.csvFields.length),t.selectedMappings.fill("__IGNORE__"),t.csvFileSelected.next(!0),t.showSidebar.next(!1)}},e.prototype.showImportSuccessNotification=function(e){var t={inputs:{description:this.translate.instant("CSV_DATA_IMPORT.NOTIFICATION.SUCCESS",{rowCount:e}),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("CSV_DATA_IMPORT",i.i,i.jb.Success,t)},e.prototype.showImportErrorsNotification=function(){var e={inputs:{description:this.translate.instant("CSV_DATA_IMPORT.NOTIFICATION.ERROR"),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("CSV_DATA_IMPORT_ERROR",i.i,i.jb.Warning,e)},e.prototype.appendMappingsSelectorToBody=function(e){var t=this;e.dropdownContainer.addEventListener("click",(function(){t.removeAppendedDropdowns();var n=window.document.createElement("div");n.append(e.innerContainer),n.style.position="absolute";var r=n.getElementsByTagName("ul").item(0);r.style.width=e.dropdownContainer.offsetWidth+"px",r.style.maxWidth=e.dropdownContainer.offsetWidth+"px",t.appendedDropdowns.push(n),window.document.body.append(n);var i=function(e){var t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:n}}(e.dropdownContainer),a=i.top,o=i.left,s=t.perfectScroll.first.directiveRef.position(!0).y,c=0;"start"!==s&&"end"!==s&&(c=s),n.getBoundingClientRect().bottom>window.innerHeight?n.style.bottom=e.dropdownContainer.offsetHeight-35+c+"px":n.style.top=a+33-c+"px",n.style.left=o+"px"}))},e.prototype.removeAppendedDropdowns=function(){this.appendedDropdowns.forEach((function(e){e.remove()})),this.appendedDropdowns=[]},e.prototype.listenToScroll=function(){var e=this;return this.perfectScroll.changes.subscribe((function(){e.perfectScroll.first.psScrollY.pipe(Object(g.a)((function(t){e.removeAppendedDropdowns()}))).subscribe()}))},e.\u0275fac=function(t){return new(t||e)(C.fc(i.gb),C.fc(y.a),C.fc(w.e),C.fc(i.kb))},e.\u0275cmp=C.Zb({type:e,selectors:[["csv-data-import-panel"]],viewQuery:function(e,t){var n;(1&e&&(C.jd(A,!0),C.jd(M,!0),C.jd(D,!0,a.b),C.jd(j,!0)),2&e)&&(C.Lc(n=C.uc())&&(t.container=n.first),C.Lc(n=C.uc())&&(t.containerInner=n.first),C.Lc(n=C.uc())&&(t.mappingsSelector=n),C.Lc(n=C.uc())&&(t.perfectScroll=n))},inputs:{importingInto:"importingInto",showSidebar:"showSidebar",closeWindow:"closeWindow"},decls:54,vars:36,consts:[[1,"csv-data-import-panel"],[1,"vertical-container","drop-zone",3,"drop","dragover"],["translate","",1,"nu2-heading-5"],["translate","",1,"nu2-body-small","fx-margin-bottom-15"],[1,"info-container","fx-margin-bottom-15"],[1,"info-heading"],["translate","",1,"nu2-heading-6","fx-margin-bottom-15"],["src","./assets/images/data-import/data-source.svg"],[1,"nu2-body-small"],["translate",""],[3,"innerHTML"],[1,"horizontal-container"],["translate","",1,"nu-btn-med","primary",3,"click"],["type","file","accept",".csv",1,"fx-hidden",3,"multiple","change"],["file",""],[2,"width","100%"],[2,"width","60%"],["translate","",1,"grey"],[2,"width","40%"],[3,"selectedDb","placeholderText","dbChanged"],[3,"selectedDb","selectedType","placeholderText","typeChanged"],[4,"ngIf"],["class","modal-window-footer",4,"ngIf"],[2,"width","100%","margin-top","20px"],["align","left","translate","",2,"width","30%"],["align","left","translate","",2,"width","40%"],[1,"mappings-container"],["mappingsContainer",""],[4,"ngFor","ngForOf"],["style","margin-top: 10px",4,"ngIf"],["type","checkbox",2,"margin","5px 10px",3,"checked","click"],["align","left",2,"width","30%"],["align","left",2,"width","40%"],["class","dropdown-item",3,"settings","autoPosition",4,"ngIf"],[1,"dropdown-item",3,"settings","autoPosition"],["mappingsSelector",""],["ddbutton","",3,"items"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"],[2,"margin-top","10px"],["style","width: 100%; margin-top: 10px;",4,"ngLet"],[2,"width","100%","margin-top","10px"],["align","left","translate",""],[1,"modal-window-footer"],["translate","",1,"nu2-btn-primary",3,"disabled","click"]],template:function(e,t){if(1&e){var n=C.mc();C.lc(0,"div",0),C.lc(1,"div",1),C.tc("drop",(function(e){return t.dropHandler(e)}))("dragover",(function(e){return t.dragOverHandler(e)})),C.yc(2,"async"),C.lc(3,"h1",2),C.ed(4,"CSV_DATA_IMPORT.HEADING.TITLE"),C.kc(),C.lc(5,"span",3),C.ed(6,"CSV_DATA_IMPORT.HEADING.SUB_TITLE"),C.kc(),C.lc(7,"div",4),C.lc(8,"div",5),C.lc(9,"h1",6),C.ed(10,"CSV_DATA_IMPORT.INFO.TITLE"),C.kc(),C.gc(11,"img",7),C.kc(),C.lc(12,"ul",8),C.lc(13,"li"),C.lc(14,"span",9),C.ed(15,"CSV_DATA_IMPORT.INFO.LIST_ITEM_1"),C.kc(),C.kc(),C.lc(16,"li"),C.gc(17,"span",10),C.yc(18,"translate"),C.kc(),C.lc(19,"li"),C.lc(20,"span",9),C.ed(21,"CSV_DATA_IMPORT.INFO.LIST_ITEM_3"),C.kc(),C.kc(),C.kc(),C.kc(),C.lc(22,"div",11),C.ed(23),C.yc(24,"translate"),C.lc(25,"button",12),C.tc("click",(function(){return C.Pc(n),C.Mc(28).click()})),C.ed(26," CSV_DATA_IMPORT.SELECT_CSV_FILE "),C.kc(),C.lc(27,"input",13,14),C.tc("change",(function(e){return t.onFileChange(e)})),C.kc(),C.kc(),C.kc(),C.lc(29,"div"),C.yc(30,"async"),C.lc(31,"table",15),C.lc(32,"tbody"),C.lc(33,"tr"),C.lc(34,"td",16),C.lc(35,"label",17),C.ed(36,"CSV_DATA_IMPORT.SELECT_DATABASE"),C.kc(),C.kc(),C.lc(37,"td",18),C.lc(38,"custom-database-selector",19),C.tc("dbChanged",(function(e){return t.selectedDb.next(e)})),C.yc(39,"async"),C.yc(40,"translate"),C.kc(),C.kc(),C.kc(),C.lc(41,"tr"),C.lc(42,"td"),C.lc(43,"label",17),C.ed(44,"CSV_DATA_IMPORT.SELECT_ENTITY_TYPE"),C.kc(),C.kc(),C.lc(45,"td"),C.lc(46,"entity-type-selector",20),C.tc("typeChanged",(function(e){return t.selectedEntityType.next(e)})),C.yc(47,"async"),C.yc(48,"async"),C.yc(49,"translate"),C.kc(),C.kc(),C.kc(),C.kc(),C.kc(),C.cd(50,z,22,11,"div",21),C.yc(51,"async"),C.kc(),C.cd(52,U,4,3,"div",22),C.yc(53,"async"),C.kc()}2&e&&(C.Sb(1),C.Xb("fx-hidden",C.zc(2,14,t.csvFileSelected)),C.Sb(16),C.Cc("innerHTML",C.zc(18,16,"CSV_DATA_IMPORT.INFO.LIST_ITEM_2"),C.Qc),C.Sb(6),C.gd(" ",C.zc(24,18,"CSV_DATA_IMPORT.DROP_CSV_FILE")," "),C.Sb(4),C.Cc("multiple",!1),C.Sb(2),C.Xb("fx-hidden",0==C.zc(30,20,t.csvFileSelected)),C.Sb(9),C.Cc("selectedDb",C.zc(39,22,t.selectedDb))("placeholderText",C.zc(40,24,"SHAPE_DATA.DATA_ITEMS.ENTITY_LOOKUP.DB_PLACEHOLDER")),C.Sb(8),C.Cc("selectedDb",C.zc(47,26,t.selectedDb))("selectedType",C.zc(48,28,t.selectedEntityType))("placeholderText",C.zc(49,30,"SHAPE_DATA.DATA_ITEMS.ENTITY_LOOKUP.TYPE_PLACEHOLDER")),C.Sb(4),C.Cc("ngIf",C.zc(51,32,t.selectedEntityType)),C.Sb(2),C.Cc("ngIf",C.zc(53,34,t.selectedEntityType)))},directives:[w.a,k.a,S.a,O.t,E.b,O.s,_.a,I.a,P.a,T.a],pipes:[O.b,w.d],styles:[".csv-data-import-panel[_ngcontent-%COMP%]{height:100%}  .mappings-container{height:350px}  .mappings-container.has-errors{height:280px}  h1{margin-bottom:8px}.info-container[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65);width:100%;padding:20px}.info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-position:outside;margin-left:10px}.info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.vertical-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.horizontal-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;color:#899092}.modal-window-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:0 20px}.modal-window-footer[_ngcontent-%COMP%]   button.nu2-btn-primary[_ngcontent-%COMP%]{padding:5px 10px}.info-heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:16px}"],changeDetection:0}),e}()},nyhH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=String(t),!t)throw new Error("Missing operator name");if("function"!=typeof n)throw new Error("Missing operator callback");this.cb=n,this.factValueValidator=r,this.factValueValidator||(this.factValueValidator=function(){return!0})}return r(e,[{key:"evaluate",value:function(e,t){return this.factValueValidator(e)&&this.cb(e,t)}}]),e}();t.default=i},o5Kk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n("fX4D")),a=o(n("43qC"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("Condition: constructor options required");var n=e.booleanOperator(t);if(Object.assign(this,t),n){var r=t[n];if(!Array.isArray(r))throw new Error('"'+n+'" must be an array');this.operator=n,this.priority=parseInt(t.priority,10)||1,this[n]=r.map((function(t){return new e(t)}))}else{if(!Object.prototype.hasOwnProperty.call(t,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(t,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(t,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(t,"priority")&&(t.priority=parseInt(t.priority,10))}}return r(e,[{key:"toJSON",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n={};this.priority&&(n.priority=this.priority);var r=e.booleanOperator(this);return r?n[r]=this[r].map((function(e){return e.toJSON(t)})):(n.operator=this.operator,n.value=this.value,n.fact=this.fact,void 0!==this.factResult&&(n.factResult=this.factResult),void 0!==this.result&&(n.result=this.result),this.params&&(n.params=this.params),this.path&&(n.path=this.path)),t?JSON.stringify(n):n}},{key:"_getValue",value:function(e){var t=this.value;return(0,a.default)(t)&&Object.prototype.hasOwnProperty.call(t,"fact")?e.factValue(t.fact,t.params,t.path):Promise.resolve(t)}},{key:"evaluate",value:function(e,t){var n=this;if(!e)return Promise.reject(new Error("almanac required"));if(!t)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var r=t.get(this.operator);return r?this._getValue(e).then((function(t){return e.factValue(n.fact,n.params,n.path).then((function(e){var a=r.evaluate(e,t);return(0,i.default)("condition::evaluate <"+JSON.stringify(e)+" "+n.operator+" "+JSON.stringify(t)+"?> ("+a+")"),{result:a,leftHandSideValue:e,rightHandSideValue:t,operator:n.operator}}))})):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==e.booleanOperator(this)}}],[{key:"booleanOperator",value:function(e){return Object.prototype.hasOwnProperty.call(e,"any")?"any":Object.prototype.hasOwnProperty.call(e,"all")?"all":void 0}}]),e}();t.default=s},o9on:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("5xGT"),a=n("4y1S"),o=n("6Oco"),s=n("EM62"),c=function(e){function t(t){var n=e.call(this)||this;return n.auth=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["INeutrinoRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"resultType",{get:function(){return{result:Object}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return i.m.get("REST_API_BASE_URL")+"/"+i.m.get("MESSAGE_PROTOCOL_VERSION")+"/1/user/get-projects"},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.auth=this.auth.token},t.prototype.execute=function(){return o.a},t.prototype.executeResult=function(e){return this.data.callBack(e.result),!0},t.\u0275fac=function(e){return new(e||t)(s.pc(a.a))},t.\u0275prov=s.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(i.v)(),Object(r.g)("design:paramtypes",[a.a])],t)}(i.f);Object.defineProperty(c,"name",{value:"GetClassicProjects"});var l=function(e){function t(t){var n=e.call(this)||this;return n.auth=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["INeutrinoRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"resultType",{get:function(){return{result:Object}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return i.m.get("REST_API_BASE_URL")+"/"+i.m.get("MESSAGE_PROTOCOL_VERSION")+"/1/user/migrate-classic-projects"},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.auth=this.auth.token},t.prototype.execute=function(){return o.a},t.\u0275fac=function(e){return new(e||t)(s.pc(a.a))},t.\u0275prov=s.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(i.v)(),Object(r.g)("design:paramtypes",[a.a])],t)}(i.f);Object.defineProperty(l,"name",{value:"ImportClassicProjects"});var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.registerGetClassicProjects=function(e){e.map(t.getClassicProjects).add(c)},t.registerImportClassicProjects=function(e){e.map(t.importClassicProjects).add(l)},t.getClassicProjects=new t("GetClassicProjects"),t.importClassicProjects=new t("ImportClassicProjects"),t}(i.y)},oFOz:function(e,t){t.nil=new Error("#NULL!"),t.div0=new Error("#DIV/0!"),t.value=new Error("#VALUE!"),t.ref=new Error("#REF!"),t.name=new Error("#NAME?"),t.num=new Error("#NUM!"),t.na=new Error("#N/A"),t.error=new Error("#ERROR!"),t.data=new Error("#GETTING_DATA")},oK6n:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("D57K"),i=n("ROBh"),a=n("cOhl"),o=n("TLy2"),s=n("J+dc"),c=n("YtkY"),l=n("5xGT"),u=n("QoSw"),p=n("EM62"),h=function(){function e(e,t,n){this.styleLoader=e,this.state=t,this.ll=n,this.documentStylesArraySize=14}return Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!1)},enumerable:!1,configurable:!0}),e.prototype.getFeatureData=function(e,t){var n=this,i=this.state.get("Selected");return this.locator.getDiagramOnce().pipe(Object(o.a)((function(e){return n.styleLoader.getPalattes().pipe(Object(s.a)(1),Object(c.a)((function(t){var a,o,s={palettes:[]},c=!0;try{for(var l=Object(r.k)(i),u=l.next();!u.done;u=l.next()){var p=u.value;if(!e.shapes[p].isConnector()){c=!1;break}}}catch(d){a={error:d}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}var h=[];return c?h=n.styleLoader.getDocumentLinePalette().styles.slice():(h=n.styleLoader.getDocumentPalette().styles.slice(),s.palettes.push({id:"fillColor",title:"Fill Color",icon:"fill-solid",palette:t.find((function(e){return"metro"===e.name}))})),s.documentStyles=[],n.sortAndSliceStyles(i,e,h).forEach((function(e){s.documentStyles.push({style:e,selected:!1})})),1===i.length&&s.documentStyles.length>0&&(s.documentStyles[0].selected=!0),s.palettes.push({id:"lineColor",title:"Line Color",icon:"fill-line",palette:t.find((function(e){return"metro-lined"===e.name}))}),s.palettes.push({id:"lineStyle",title:"Line Style",icon:"fill-dotted",palette:t.find((function(e){return"dotted"===e.name}))}),s})))})))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return this.locator.getDiagramOnce().pipe(Object(c.a)((function(e){var n,i;try{for(var a=Object(r.k)(t),o=a.next();!o.done;o=a.next()){var s=o.value,c=e.shapes[s];if(c&&(c.isConnector()||c.isStyleEnabledShape()))return!0}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1})))},e.prototype.getApplyData=function(e,t){return Object(i.a)({style:t,format:{"*":{indexStart:0,styles:{color:t.textColor}}}})},e.prototype.sortAndSliceStyles=function(e,t,n){var i,a,o=[],s=function(e){var r=t.shapes[e],i=n.findIndex((function(e){return e.id===r.style.id}));if(!(o.length<c.documentStylesArraySize&&n.length>0))return"break";o.push(n.splice(i,1)[0])},c=this;try{for(var l=Object(r.k)(e),u=l.next();!u.done;u=l.next()){if("break"===s(u.value))break}}catch(p){i={error:p}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return o.concat(n).slice(0,this.documentStylesArraySize)},e.\u0275fac=function(t){return new(t||e)(p.pc(a.a),p.pc(l.Ib),p.pc(u.a))},e.\u0275prov=p.bc({token:e,factory:e.\u0275fac}),e}()},okSW:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("nsO7"),a=n("NNJu"),o=n("QoSw"),s=n("5xGT"),c=n("EM62"),l=n("pWGo"),u=n("2aGL"),p=["linksContainer"],h=["shapesContainer"],d=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n)||this;return o.componentFactoryResolver=t,o.injector=n,o.ll=r,o.commandService=i,o.state=a,o.subs=[],o.linkItems={},o}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"linkItemIds",{get:function(){return Object.keys(this.linkItems)},enumerable:!1,configurable:!0}),t.prototype.onTabUpdate=function(){this.manage()},t.prototype.ngAfterViewInit=function(){this.manage()},t.prototype.manage=function(){this.links||(this.links={}),this.manageLinks(Object(i.cloneDeep)(this.links)),this.addShapeSection(this.shapes)},t.prototype.ngOnDestroy=function(){this.clearSubs()},t.prototype.addLinkItem=function(e){var t=this.makeComponent(l.a);t.instance.connectors=e.items,t.instance.eDataId=this.eDataId,t.instance.entityId=this.entityId,this.linkItems[e.id]={item:t,container:this.linksContainer},this.insert(this.linksContainer,t),t.changeDetectorRef.detectChanges()},t.prototype.clearSubs=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.addShapeSection=function(e){if(!this.shapeSectionItem&&this.shapesContainer){var t=this.makeComponent(u.a);this.shapeSectionItem=t,this.insert(this.shapesContainer,this.shapeSectionItem)}this.shapeSectionItem&&(this.shapeSectionItem.instance.shapes=e,this.shapeSectionItem.changeDetectorRef.detectChanges())},t.prototype.manageLinks=function(e){var t=this,n={};Object(i.values)(e).forEach((function(e){Object.keys(e.connectors).forEach((function(t){var r=Object.keys(e.connectors[t]).map((function(n){var r=e.connectors[t][n];return r.id=n,r}));n[t]||(n[t]=[]),r.forEach((function(r){r.docId=t,r.link=e,n[t].push(r)}))}))}));var r=[],a=[];for(var o in n){var s=n[o];this.linkItemIds.includes(o)?a.push({id:o,items:s}):r.push({id:o,items:s})}this.linkItemIds.filter((function(e){return!Object.keys(n).includes(e)})).forEach((function(e){return t.removeLinkItem(e)})),a.forEach((function(e,n){return t.updateLinkItem(e)})),r.forEach((function(e,n){return t.addLinkItem(e)}))},t.prototype.updateLinkItem=function(e){var t=this.linkItems[e.id].item;t.instance.connectors=e.items,t.instance.eDataId=this.eDataId,t.instance.entityId=this.entityId,t.changeDetectorRef.detectChanges()},t.prototype.removeLinkItem=function(e){if(this.linkItems[e]){var t=this.linkItems[e].item,n=this.linkItems[e].container;t&&n&&(this.remove(n,t),delete this.linkItems[e])}},t.\u0275fac=function(e){return new(e||t)(c.fc(c.m),c.fc(c.C),c.fc(o.a),c.fc(s.B),c.fc(s.Ib))},t.\u0275cmp=c.Zb({type:t,selectors:[["links-renderer"]],viewQuery:function(e,t){var n;(1&e&&(c.jd(p,!0,c.hb),c.jd(h,!0,c.hb)),2&e)&&(c.Lc(n=c.uc())&&(t.linksContainer=n.first),c.Lc(n=c.uc())&&(t.shapesContainer=n.first))},inputs:{eDataId:"eDataId",entityId:"entityId",links:"links",shapes:"shapes"},features:[c.Pb],decls:10,vars:0,consts:[[1,"links-renderer-section"],["shapesContainer",""],["linksContainer",""]],template:function(e,t){1&e&&(c.lc(0,"div",0),c.lc(1,"h4"),c.ed(2,"Shape Occurrences"),c.kc(),c.gc(3,"div",null,1),c.kc(),c.lc(5,"div",0),c.lc(6,"h4"),c.ed(7,"Connections"),c.kc(),c.gc(8,"div",null,2),c.kc())},styles:["h4[_ngcontent-%COMP%]{font-size:14px;color:#7e7e7e}.links-renderer-shape-item-doc[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-bottom:5px}.links-renderer-shape-item-doc[_ngcontent-%COMP%]   .links-renderer-shape-item-doc-count[_ngcontent-%COMP%]{background-color:#04263d;padding:5px;font-size:12px;text-align:center;color:#fff;border-radius:5px;margin-left:10px}.links-renderer-section[_ngcontent-%COMP%]{margin-bottom:40px}.links-renderer-section[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.links-renderer-section[_ngcontent-%COMP%]  .links-renderer-item-doc-name{color:rgba(20,40,46,.8);margin-bottom:5px}.links-renderer-section[_ngcontent-%COMP%]  .panel-content{margin-left:12px;border-left:1px solid #d6d6d6;padding-left:15px}.links-renderer-section[_ngcontent-%COMP%]  .col{padding-left:0}.links-renderer-section[_ngcontent-%COMP%]  .row{padding:10px 0}.links-renderer-item-connections[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:25px}.links-renderer-item-connections[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{width:20px;height:20px}.links-renderer-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px;color:#04263d;font-weight:700;margin-bottom:16px}"],changeDetection:0}),t}(a.k)},pJBp:function(e,t,n){var r=n("oFOz"),i=n("Pj1F"),a=n("sfKy");function o(e){return e&&e.getTime&&!isNaN(e.getTime())}function s(e){return e instanceof Date?e:new Date(e)}t.ACCRINT=function(e,t,n,a,c,l,u){return e=s(e),t=s(t),n=s(n),o(e)&&o(t)&&o(n)?a<=0||c<=0||-1===[1,2,4].indexOf(l)||-1===[0,1,2,3,4].indexOf(u)||n<=e?r.num:(u=u||0,(c=c||0)*a*i.YEARFRAC(e,n,u)):r.value},t.ACCRINTM=function(){throw new Error("ACCRINTM is not implemented")},t.AMORDEGRC=function(){throw new Error("AMORDEGRC is not implemented")},t.AMORLINC=function(){throw new Error("AMORLINC is not implemented")},t.COUPDAYBS=function(){throw new Error("COUPDAYBS is not implemented")},t.COUPDAYS=function(){throw new Error("COUPDAYS is not implemented")},t.COUPDAYSNC=function(){throw new Error("COUPDAYSNC is not implemented")},t.COUPNCD=function(){throw new Error("COUPNCD is not implemented")},t.COUPNUM=function(){throw new Error("COUPNUM is not implemented")},t.COUPPCD=function(){throw new Error("COUPPCD is not implemented")},t.CUMIPMT=function(e,n,i,o,s,c){if(e=a.parseNumber(e),n=a.parseNumber(n),i=a.parseNumber(i),a.anyIsError(e,n,i))return r.value;if(e<=0||n<=0||i<=0)return r.num;if(o<1||s<1||o>s)return r.num;if(0!==c&&1!==c)return r.num;var l=t.PMT(e,n,i,0,c),u=0;1===o&&(0===c&&(u=-i),o++);for(var p=o;p<=s;p++)u+=1===c?t.FV(e,p-2,l,i,1)-l:t.FV(e,p-1,l,i,0);return u*=e},t.CUMPRINC=function(e,n,i,o,s,c){if(e=a.parseNumber(e),n=a.parseNumber(n),i=a.parseNumber(i),a.anyIsError(e,n,i))return r.value;if(e<=0||n<=0||i<=0)return r.num;if(o<1||s<1||o>s)return r.num;if(0!==c&&1!==c)return r.num;var l=t.PMT(e,n,i,0,c),u=0;1===o&&(u=0===c?l+i*e:l,o++);for(var p=o;p<=s;p++)u+=c>0?l-(t.FV(e,p-2,l,i,1)-l)*e:l-t.FV(e,p-1,l,i,0)*e;return u},t.DB=function(e,t,n,i,o){if(o=void 0===o?12:o,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o))return r.value;if(e<0||t<0||n<0||i<0)return r.num;if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(o))return r.num;if(i>n)return r.num;if(t>=e)return 0;for(var s=(1-Math.pow(t/e,1/n)).toFixed(3),c=e*s*o/12,l=c,u=0,p=i===n?n-1:i,h=2;h<=p;h++)l+=u=(e-l)*s;return 1===i?c:i===n?(e-l)*s:u},t.DDB=function(e,t,n,i,o){if(o=void 0===o?2:o,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o))return r.value;if(e<0||t<0||n<0||i<0||o<=0)return r.num;if(i>n)return r.num;if(t>=e)return 0;for(var s=0,c=0,l=1;l<=i;l++)s+=c=Math.min(o/n*(e-s),e-t-s);return c},t.DISC=function(){throw new Error("DISC is not implemented")},t.DOLLARDE=function(e,t){if(e=a.parseNumber(e),t=a.parseNumber(t),a.anyIsError(e,t))return r.value;if(t<0)return r.num;if(t>=0&&t<1)return r.div0;t=parseInt(t,10);var n=parseInt(e,10);n+=e%1*Math.pow(10,Math.ceil(Math.log(t)/Math.LN10))/t;var i=Math.pow(10,Math.ceil(Math.log(t)/Math.LN2)+1);return n=Math.round(n*i)/i},t.DOLLARFR=function(e,t){if(e=a.parseNumber(e),t=a.parseNumber(t),a.anyIsError(e,t))return r.value;if(t<0)return r.num;if(t>=0&&t<1)return r.div0;t=parseInt(t,10);var n=parseInt(e,10);return n+=e%1*Math.pow(10,-Math.ceil(Math.log(t)/Math.LN10))*t},t.DURATION=function(){throw new Error("DURATION is not implemented")},t.EFFECT=function(e,t){return e=a.parseNumber(e),t=a.parseNumber(t),a.anyIsError(e,t)?r.value:e<=0||t<1?r.num:(t=parseInt(t,10),Math.pow(1+e/t,t)-1)},t.FV=function(e,t,n,i,o){if(i=i||0,o=o||0,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o))return r.value;var s;if(0===e)s=i+n*t;else{var c=Math.pow(1+e,t);s=1===o?i*c+n*(1+e)*(c-1)/e:i*c+n*(c-1)/e}return-s},t.FVSCHEDULE=function(e,t){if(e=a.parseNumber(e),t=a.parseNumberArray(a.flatten(t)),a.anyIsError(e,t))return r.value;for(var n=t.length,i=e,o=0;o<n;o++)i*=1+t[o];return i},t.INTRATE=function(){throw new Error("INTRATE is not implemented")},t.IPMT=function(e,n,i,o,s,c){if(s=s||0,c=c||0,e=a.parseNumber(e),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),s=a.parseNumber(s),c=a.parseNumber(c),a.anyIsError(e,n,i,o,s,c))return r.value;var l=t.PMT(e,i,o,s,c);return(1===n?1===c?0:-o:1===c?t.FV(e,n-2,l,o,1)-l:t.FV(e,n-1,l,o,0))*e},t.IRR=function(e,t){if(t=t||0,e=a.parseNumberArray(a.flatten(e)),t=a.parseNumber(t),a.anyIsError(e,t))return r.value;for(var n=function(e,t,n){for(var r=n+1,i=e[0],a=1;a<e.length;a++)i+=e[a]/Math.pow(r,(t[a]-t[0])/365);return i},i=function(e,t,n){for(var r=n+1,i=0,a=1;a<e.length;a++){var o=(t[a]-t[0])/365;i-=o*e[a]/Math.pow(r,o+1)}return i},o=[],s=!1,c=!1,l=0;l<e.length;l++)o[l]=0===l?0:o[l-1]+365,e[l]>0&&(s=!0),e[l]<0&&(c=!0);if(!s||!c)return r.num;var u,p,h,d=t=void 0===t?.1:t,f=!0;do{u=d-(h=n(e,o,d))/i(e,o,d),p=Math.abs(u-d),d=u,f=p>1e-10&&Math.abs(h)>1e-10}while(f);return d},t.ISPMT=function(e,t,n,i){return e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),a.anyIsError(e,t,n,i)?r.value:i*e*(t/n-1)},t.MDURATION=function(){throw new Error("MDURATION is not implemented")},t.MIRR=function(e,n,i){if(e=a.parseNumberArray(a.flatten(e)),n=a.parseNumber(n),i=a.parseNumber(i),a.anyIsError(e,n,i))return r.value;for(var o=e.length,s=[],c=[],l=0;l<o;l++)e[l]<0?s.push(e[l]):c.push(e[l]);var u=-t.NPV(i,c)*Math.pow(1+i,o-1),p=t.NPV(n,s)*(1+n);return Math.pow(u/p,1/(o-1))-1},t.NOMINAL=function(e,t){return e=a.parseNumber(e),t=a.parseNumber(t),a.anyIsError(e,t)?r.value:e<=0||t<1?r.num:(t=parseInt(t,10),(Math.pow(e+1,1/t)-1)*t)},t.NPER=function(e,t,n,i,o){if(o=void 0===o?0:o,i=void 0===i?0:i,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o))return r.value;if(0===e)return-(n+i)/t;var s=t*(1+e*o)-i*e,c=n*e+t*(1+e*o);return Math.log(s/c)/Math.log(1+e)},t.NPV=function(){var e=a.parseNumberArray(a.flatten(arguments));if(e instanceof Error)return e;for(var t=e[0],n=0,r=1;r<e.length;r++)n+=e[r]/Math.pow(1+t,r);return n},t.ODDFPRICE=function(){throw new Error("ODDFPRICE is not implemented")},t.ODDFYIELD=function(){throw new Error("ODDFYIELD is not implemented")},t.ODDLPRICE=function(){throw new Error("ODDLPRICE is not implemented")},t.ODDLYIELD=function(){throw new Error("ODDLYIELD is not implemented")},t.PDURATION=function(e,t,n){return e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:e<=0?r.num:(Math.log(n)-Math.log(t))/Math.log(1+e)},t.PMT=function(e,t,n,i,o){if(i=i||0,o=o||0,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o))return r.value;var s;if(0===e)s=(n+i)/t;else{var c=Math.pow(1+e,t);s=1===o?(i*e/(c-1)+n*e/(1-1/c))/(1+e):i*e/(c-1)+n*e/(1-1/c)}return-s},t.PPMT=function(e,n,i,o,s,c){return s=s||0,c=c||0,e=a.parseNumber(e),i=a.parseNumber(i),o=a.parseNumber(o),s=a.parseNumber(s),c=a.parseNumber(c),a.anyIsError(e,i,o,s,c)?r.value:t.PMT(e,i,o,s,c)-t.IPMT(e,n,i,o,s,c)},t.PRICE=function(){throw new Error("PRICE is not implemented")},t.PRICEDISC=function(){throw new Error("PRICEDISC is not implemented")},t.PRICEMAT=function(){throw new Error("PRICEMAT is not implemented")},t.PV=function(e,t,n,i,o){return i=i||0,o=o||0,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),a.anyIsError(e,t,n,i,o)?r.value:0===e?-n*t-i:((1-Math.pow(1+e,t))/e*n*(1+e*o)-i)/Math.pow(1+e,t)},t.RATE=function(e,t,n,i,o,s){if(s=void 0===s?.01:s,i=void 0===i?0:i,o=void 0===o?0:o,e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),o=a.parseNumber(o),s=a.parseNumber(s),a.anyIsError(e,t,n,i,o,s))return r.value;var c=1e-10,l=s;o=o?1:0;for(var u=0;u<20;u++){if(l<=-1)return r.num;var p,h,d;if(p=Math.abs(l)<c?n*(1+e*l)+t*(1+l*o)*e+i:n*(h=Math.pow(1+l,e))+t*(1/l+o)*(h-1)+i,Math.abs(p)<c)return l;if(Math.abs(l)<c)d=n*e+t*o*e;else{h=Math.pow(1+l,e);var f=e*Math.pow(1+l,e-1);d=n*f+t*(1/l+o)*f+t*(-1/(l*l))*(h-1)}l-=p/d}return l},t.RECEIVED=function(){throw new Error("RECEIVED is not implemented")},t.RRI=function(e,t,n){return e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:0===e||0===t?r.num:Math.pow(n/t,1/e)-1},t.SLN=function(e,t,n){return e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:0===n?r.num:(e-t)/n},t.SYD=function(e,t,n,i){return e=a.parseNumber(e),t=a.parseNumber(t),n=a.parseNumber(n),i=a.parseNumber(i),a.anyIsError(e,t,n,i)?r.value:0===n||i<1||i>n?r.num:(e-t)*(n-(i=parseInt(i,10))+1)*2/(n*(n+1))},t.TBILLEQ=function(e,t,n){return e=a.parseDate(e),t=a.parseDate(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:n<=0||e>t||t-e>31536e6?r.num:365*n/(360-n*i.DAYS360(e,t,!1))},t.TBILLPRICE=function(e,t,n){return e=a.parseDate(e),t=a.parseDate(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:n<=0||e>t||t-e>31536e6?r.num:100*(1-n*i.DAYS360(e,t,!1)/360)},t.TBILLYIELD=function(e,t,n){return e=a.parseDate(e),t=a.parseDate(t),n=a.parseNumber(n),a.anyIsError(e,t,n)?r.value:n<=0||e>t||t-e>31536e6?r.num:360*(100-n)/(n*i.DAYS360(e,t,!1))},t.VDB=function(){throw new Error("VDB is not implemented")},t.XIRR=function(e,t,n){if(e=a.parseNumberArray(a.flatten(e)),t=a.parseDateArray(a.flatten(t)),n=a.parseNumber(n),a.anyIsError(e,t,n))return r.value;for(var o=function(e,t,n){for(var r=n+1,a=e[0],o=1;o<e.length;o++)a+=e[o]/Math.pow(r,i.DAYS(t[o],t[0])/365);return a},s=function(e,t,n){for(var r=n+1,a=0,o=1;o<e.length;o++){var s=i.DAYS(t[o],t[0])/365;a-=s*e[o]/Math.pow(r,s+1)}return a},c=!1,l=!1,u=0;u<e.length;u++)e[u]>0&&(c=!0),e[u]<0&&(l=!0);if(!c||!l)return r.num;var p,h,d,f=n=n||.1,g=!0;do{p=f-(d=o(e,t,f))/s(e,t,f),h=Math.abs(p-f),f=p,g=h>1e-10&&Math.abs(d)>1e-10}while(g);return f},t.XNPV=function(e,t,n){if(e=a.parseNumber(e),t=a.parseNumberArray(a.flatten(t)),n=a.parseDateArray(a.flatten(n)),a.anyIsError(e,t,n))return r.value;for(var o=0,s=0;s<t.length;s++)o+=t[s]/Math.pow(1+e,i.DAYS(n[s],n[0])/365);return o},t.YIELD=function(){throw new Error("YIELD is not implemented")},t.YIELDDISC=function(){throw new Error("YIELDDISC is not implemented")},t.YIELDMAT=function(){throw new Error("YIELDMAT is not implemented")}},pTJA:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n("5xGT"),i=n("nsO7"),a=n("I4UX"),o=n("diDk"),s=n("QoSw"),c=n("xVbo"),l=n("TLy2"),u=n("J+dc"),p=n("B8NW"),h=n("YtkY"),d=n("jIqt"),f=n("7SLS"),g=n("nIj0"),m=n("C05f"),v=n("ROBh"),b=n("HM3f"),y=n("X0jn"),x=n("xnGY"),C=n("B5wR"),w=n("EM62"),k=n("pYIu"),S=n("TdEb"),O=n("pVzg"),E=n("29Wa"),_=n("Cd2c"),I=n("ulve"),P=n("2kYt"),T=n("mFH5");function A(e,t){if(1&e&&(w.lc(0,"mat-option",28),w.ed(1),w.kc()),2&e){var n=t.$implicit;w.Cc("value",n),w.Sb(1),w.gd(" ",n.name," ")}}function M(e,t){if(1&e&&(w.lc(0,"mat-option",28),w.ed(1),w.kc()),2&e){var n=t.$implicit;w.Cc("value",n),w.Sb(1),w.gd(" ",n.name," ")}}var D=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},j=function(){function e(e,t,n,r){var a=this;this.ll=e,this.ell=t,this.eDataManage=n,this.state=r,this.dbControl=new g.h,this.defControl=new g.h,this.subs=[],this.edataModels=[],this.isDefValid=new m.a(!1),this.isDBValid=new m.a(!1),this.editData=new m.a(!1),this.syncType=this.state.changes("Selected").pipe(Object(c.a)((function(e){return 1===e.length})),Object(l.a)((function(e){return a.ll.forCurrentObserver(!1).pipe(Object(u.a)(1),Object(l.a)((function(t){return t.getDiagramModel().pipe(Object(p.a)((function(t){return!!t.shapes[e[0]]})),Object(h.a)((function(t){return{diagram:t,model:t.shapes[e[0]]}})))})))})),Object(l.a)((function(e){var t=e.diagram,n=e.model,r=n.entityDefId;return n.eDataId&&r?a.ell.getEData(n.eDataId).pipe(Object(l.a)((function(e){return e.getEDataModel()})),Object(h.a)((function(e){var o=e.getEntityDef(r),s=e.customEntityDefs[r],c={};o?(a.editData.next(!!s),c=o.dataItems||{},s&&(c=Object.assign({},c,s.dataItems))):a.editData.next(!1);var l=!1;if(o&&Object.keys(c).length>0){var u=Object(i.values)(n.getDataItems(t)||{}).filter((function(e){return e.isPublic&&!e.primaryTextBound}));u.length>0?a.editData.next(!!s):a.editData.next(!1),l=u.some((function(e){return!c[e.id]||a.isDataItemDefChanged(e,c[e.id])}))}return l}))):(a.editData.next(!1),Object(v.a)(!1))})))}return e.prototype.displayFn=function(e){return e&&e.name?e.name:""},e.prototype.displayDef=function(e){return e&&e.name?e.name:""},e.prototype._filter=function(e,t){var n=t.toLowerCase();return e.filter((function(e){return!!e.isCustom&&(e.name||"").toLowerCase().includes(n)}))},e.prototype._filterDefs=function(e,t){var n=t.toLowerCase();return e.filter((function(e){return(e.name||"").toLowerCase().includes(n)}))},e.prototype.ngAfterViewInit=function(){var e=this;this.filteredOptions=this.dbControl.valueChanges.pipe(Object(d.a)(""),Object(l.a)((function(t){return e.ll.forCurrentObserver(!1).pipe(Object(l.a)((function(t){return t.getDiagramEData().pipe(Object(l.a)((function(t){if(!t)return Object(v.a)([]);var n=[];return t.forEach((function(t){var r=e.ell.getEData(t).pipe(Object(l.a)((function(e){return e.getEDataModel()})),Object(u.a)(1));n.push(r)})),Object(b.b)(n)})))})),Object(h.a)((function(e){return{eDataModels:e,value:t}})))})),Object(h.a)((function(t){var n="string"==typeof t.value?t.value:t.value.name;return e.edataModels=t.eDataModels,n?e._filter(t.eDataModels,n):t.eDataModels.filter((function(e){return e&&!!e.isCustom})).slice()}))),this.filteredDefs=this.defControl.valueChanges.pipe(Object(d.a)(""),Object(h.a)((function(t){if(e.selectedDatabase){var n=t&&t.name?t.name:t,r=Object(i.toArray)(e.selectedDatabase.customEntityDefs).map((function(e){return{id:e.id,name:e.name}}));return n&&"string"==typeof n?e._filterDefs(r,n):r}return[]}))),this.hideCreater()},e.prototype.showCreater=function(){document.querySelector(".entity-type-manage-add-new").style.display="block",document.querySelector(".entity-type-manage-add-new-name").style.display="block"},e.prototype.hideCreater=function(){this.selectedDatabase=void 0;var e=document.querySelector(".entity-type-manage-add-new");document.querySelector(".entity-type-manage-add-new-db input").value="",this.selectedDef=void 0;var t=document.querySelector(".entity-type-manage-add-new-name");document.querySelector(".entity-type-manage-add-new-name input").value="",e.style.display="none",t.style.display="none",this.isDBValid.next(!1),this.isDefValid.next(!1)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.handleSaveClick=function(){var e,t=this,n=this.state.get("Selected"),i=document.querySelector(".entity-type-manage-add-new-name input").value,a=Object(v.a)({});if(i||this.selectedDef){if(this.selectedDatabase)e=this.selectedDatabase.id;else{var o=document.querySelector(".entity-type-manage-add-new-db input").value.trim();if(!o)return;var s=this.edataModels.find((function(e){return e.name===o}));s?e=s.id:(e=r.sb.eDataId(),a=this.eDataManage.createCustomDB(e,o).pipe(Object(l.a)((function(e){return e.status})),Object(c.a)((function(e){return e.subStatus===x.f.started})),Object(u.a)(1)))}this.selectedDef?this.eDataManage.bindNewEntityToShape(e,n[0],this.selectedDef.id).pipe(Object(u.a)(1)).subscribe():a.pipe(Object(l.a)((function(){return t.eDataManage.createType(e,i).pipe(Object(l.a)((function(e){return C.a.instance.customEntityDefUpdated(e).pipe(Object(f.a)(e))})),Object(l.a)((function(r){return t.eDataManage.bindNewEntityToShape(e,n[0],r)})))}))).subscribe(),this.hideCreater()}},e.prototype.isDataItemDefChanged=function(e,t){return!![y.c.OPTION_LIST,y.c.FORMULA].includes(e.type)&&!Object(i.isEqual)(e.options,t.options)},e.\u0275fac=function(t){return new(t||e)(w.fc(s.a),w.fc(o.a),w.fc(a.a),w.fc(r.Ib))},e.\u0275cmp=w.Zb({type:e,selectors:[["entity-type-manage"]],decls:57,vars:25,consts:[[1,"entity-type-manage-container"],["alignment","right",3,"settings"],["dd",""],["ddbutton",""],[1,"nu-btn-small","nu-btn-icon"],[1,"settings-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-more"],["dditem","",3,"hidden","click"],[1,"dropdown-item-icon"],[1,""],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-refresh"],[1,"dropdown-item-text"],["dditem","",1,"new-data",3,"click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-database-small"],["dditem","",1,"edit-data",3,"hidden","click"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-pencil"],[1,"entity-type-manage-add-new"],["typeCreator",""],[1,"entity-type-manage-add-new-db"],[1,"grey"],["type","text","matInput","",1,"text-input",3,"formControl","matAutocomplete","change","keyup"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"entity-type-manage-add-new-name"],["autoDef","matAutocomplete"],[1,"entity-type-manage-add-new-btns"],[1,"primary",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(w.lc(0,"div",0),w.lc(1,"abs-dropdown",1,2),w.lc(3,"simple-dropdown-button",3),w.lc(4,"button",4),w.wc(),w.lc(5,"svg",5),w.gc(6,"use",6),w.kc(),w.kc(),w.kc(),w.vc(),w.lc(7,"simple-dropdown-item",7),w.tc("click",(function(){return t.eDataManage.updateType().subscribe()})),w.yc(8,"async"),w.lc(9,"div",8),w.wc(),w.lc(10,"svg",9),w.gc(11,"use",10),w.kc(),w.kc(),w.vc(),w.lc(12,"div",11),w.lc(13,"a"),w.ed(14,"Sync changes to Type"),w.kc(),w.kc(),w.kc(),w.lc(15,"simple-dropdown-item",12),w.tc("click",(function(){return t.showCreater()})),w.lc(16,"div",8),w.wc(),w.lc(17,"svg",9),w.gc(18,"use",13),w.kc(),w.kc(),w.vc(),w.lc(19,"div",11),w.lc(20,"a"),w.ed(21,"Save as a new Entity Type"),w.kc(),w.kc(),w.kc(),w.lc(22,"simple-dropdown-item",14),w.tc("click",(function(){return t.eDataManage.makeTypeEditable(!0).subscribe()})),w.yc(23,"async"),w.lc(24,"div",8),w.wc(),w.lc(25,"svg",9),w.gc(26,"use",15),w.kc(),w.kc(),w.vc(),w.lc(27,"div",11),w.lc(28,"a"),w.ed(29,"Edit Entity Type"),w.kc(),w.kc(),w.kc(),w.kc(),w.kc(),w.lc(30,"div",16,17),w.lc(32,"div",18),w.lc(33,"label",19),w.ed(34,"Create / Choose Database"),w.kc(),w.lc(35,"mat-form-field",9),w.lc(36,"input",20),w.tc("change",(function(){return t.selectedDatabase=void 0}))("keyup",(function(e){return t.isDBValid.next(!!e.target.value.trim())})),w.kc(),w.lc(37,"mat-autocomplete",21,22),w.tc("optionSelected",(function(e){return t.selectedDatabase=e.option.value,t.isDBValid.next(!!e.option.value)})),w.cd(39,A,2,2,"mat-option",23),w.yc(40,"async"),w.kc(),w.kc(),w.kc(),w.lc(41,"div",24),w.lc(42,"label",19),w.ed(43,"Create / Choose Item Type"),w.kc(),w.lc(44,"mat-form-field",9),w.lc(45,"input",20),w.tc("change",(function(){return t.selectedDef=void 0}))("keyup",(function(e){return t.isDefValid.next(!!e.target.value.trim())})),w.kc(),w.lc(46,"mat-autocomplete",21,25),w.tc("optionSelected",(function(e){return t.selectedDef=e.option.value,t.isDefValid.next(!!e.option.value)})),w.cd(48,M,2,2,"mat-option",23),w.yc(49,"async"),w.kc(),w.kc(),w.kc(),w.lc(50,"div",26),w.lc(51,"a",27),w.tc("click",(function(){return t.handleSaveClick()})),w.yc(52,"async"),w.yc(53,"async"),w.ed(54,"Save"),w.kc(),w.lc(55,"a",27),w.tc("click",(function(){return t.hideCreater()})),w.ed(56,"Cancel"),w.kc(),w.kc(),w.kc()),2&e){var n=w.Mc(38),r=w.Mc(47);w.Sb(1),w.Cc("settings",w.Gc(24,D)),w.Sb(6),w.Cc("hidden",!w.zc(8,12,t.syncType)),w.Sb(15),w.Cc("hidden",!w.zc(23,14,t.editData)),w.Sb(14),w.Cc("formControl",t.dbControl)("matAutocomplete",n),w.Sb(1),w.Cc("displayWith",t.displayFn),w.Sb(2),w.Cc("ngForOf",w.zc(40,16,t.filteredOptions)),w.Sb(6),w.Cc("formControl",t.defControl)("matAutocomplete",r),w.Sb(1),w.Cc("displayWith",t.displayDef),w.Sb(2),w.Cc("ngForOf",w.zc(49,18,t.filteredDefs)),w.Sb(3),w.Tb("disabled",w.zc(52,20,t.isDefValid)&&w.zc(53,22,t.isDBValid)?null:"")}},directives:[k.a,S.a,O.a,E.c,_.b,g.d,I.d,g.s,g.i,I.a,P.s,T.k],pipes:[P.b],styles:["[_nghost-%COMP%]  a.primary{border:1px solid;height:30px;border-radius:4px;padding:4px 12px;background:rgba(81,192,170,.2)}[_nghost-%COMP%]  .dropdown-item-icon{width:20px;height:15px;float:left}[_nghost-%COMP%]  .dropdown-item-icon svg{width:20px;height:20px}[_nghost-%COMP%]  ul.abs-dropdown-items-container{min-width:254px}[_nghost-%COMP%]  .dropdown-item-text{font-size:14px;margin-left:24px}[_nghost-%COMP%]  .mat-form-field-infix{padding:4px 0}[_nghost-%COMP%]  .mat-input-element{padding:8px;border:1px solid #d3d3e7}[_nghost-%COMP%]  .abs-dropdown-inner{top:-15px!important}[_nghost-%COMP%]  .abs-dropdown-inner-wrapper{margin-top:10px}.settings-icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-top:2px}.entity-type-manage-add-new[_ngcontent-%COMP%]{position:absolute;z-index:10;padding:10px;box-shadow:0 0 2px grey;margin-top:10px;width:260px;background:#fff;right:0;top:15px}.entity-type-manage-add-new-name[_ngcontent-%COMP%]{margin-bottom:15px}.entity-type-manage-add-new-btns[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:7px}.entity-type-manage-add-new-btns[_ngcontent-%COMP%]{margin-bottom:10px}.entity-type-manage-add-new-db[_ngcontent-%COMP%]{margin-bottom:18px}"],changeDetection:0}),e}()},pWGo:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("D57K"),i=n("NNJu"),a=n("5xGT"),o=n("X0jn"),s=n("0jHB"),c=n("YtkY"),l=n("J+dc"),u=n("diDk"),p=n("W9bu"),h=n("QoSw"),d=n("Xpu5"),f=n("EM62"),g=n("lQIu"),m=n("2kYt");function v(e,t){1&e&&(f.jc(0),f.ed(1,"s"),f.ic())}function b(e,t){if(1&e){var n=f.mc();f.lc(0,"div",16),f.lc(1,"a",17),f.tc("click",(function(){f.Pc(n);var e=f.xc(2);return e.resolveChanges(e.linkData.id)})),f.ed(2),f.cd(3,v,2,0,"ng-container",18),f.kc(),f.kc()}if(2&e){var r=f.xc(2);f.Sb(2),f.gd(" Resolve ",r.linkData.refChangeCount," change"),f.Sb(1),f.Cc("ngIf",r.linkData.refChangeCount>1)}}function y(e,t){if(1&e){var n=f.mc();f.lc(0,"div"),f.lc(1,"div",4),f.lc(2,"div",5),f.lc(3,"div",6),f.lc(4,"div",7),f.lc(5,"a",8),f.tc("click",(function(){f.Pc(n);var e=t.$implicit;return f.xc().navigateToItem(e.diagId,e.connId)})),f.ed(6),f.yc(7,"async"),f.kc(),f.kc(),f.cd(8,b,4,2,"div",9),f.kc(),f.lc(9,"div",10),f.lc(10,"div",11),f.wc(),f.lc(11,"svg",12),f.gc(12,"use",13),f.kc(),f.kc(),f.kc(),f.vc(),f.lc(13,"div",6),f.lc(14,"div",14),f.tc("click",(function(){f.Pc(n);var e=t.$implicit;return f.xc().navigateToItem(e.diagId,e.shapeId)})),f.lc(15,"a"),f.ed(16),f.kc(),f.lc(17,"a",15),f.ed(18),f.yc(19,"async"),f.kc(),f.kc(),f.kc(),f.kc(),f.kc(),f.kc()}if(2&e){var r=t.$implicit,i=f.xc();f.Sb(6),f.fd(f.zc(7,4,r.cType)),f.Sb(2),f.Cc("ngIf",i.linkData.refChangeCount>0),f.Sb(8),f.fd(r.entityName),f.Sb(2),f.gd(" ",f.zc(19,6,i.getEntityShapeType(r,i.linkData)),"")}}var x=function(e){function t(t,n,r,i,a,o,s,c){var l=e.call(this,t,n)||this;return l.componentFactoryResolver=t,l.injector=n,l.defLocator=r,l.ell=i,l.ll=a,l.linkSvc=o,l.state=s,l.commandService=c,l.connectors=[],l.subs=[],l}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"linkData",{get:function(){var e=this,t={conns:[]};return this.connectors.forEach((function(n,r){if(t.docId=n.docId,t.conns.push({cType:e.defName(n.defId),diagId:n.docId,diagName:e.diagName(n.docId),connId:n.id,shapeId:n.shapeId,shapeDefName:e.defName(n.shapeDefId),entityName:n.link.identifier}),0===r){var i=n.link;t.id=i.id,t.entityType=e.entityType(i),t.refChangeCount=0,i.type===o.f.REFERENCE&&i.refChanges&&(t.refChangeCount=i.refChanges.length),t.diagName=e.diagName(n.docId)}})),t.count=t.conns.length,t},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.apply=function(){this.itemRef.instance.apply()},t.prototype.navigateToItem=function(e,t){this.state.get("CurrentDiagram")!==e?this.linkSvc.navigateToDiagram(e,["s",t]).subscribe():this.linkSvc.navigateToShape(t)},t.prototype.getPlural=function(e,t){return t>1?e+"s":e},t.prototype.getEntityShapeType=function(e,t){return t.entityType?t.entityType:e.shapeDefName},t.prototype.resolveChanges=function(e){this.commandService.dispatch(d.a.updateEDateRefChanges,this.eDataId,{entityIds:[this.entityId],linkId:e,markResolved:!0})},t.prototype.defName=function(e){return this.defLocator.getDefinition(e).pipe(Object(c.a)((function(e){return e.name})))},t.prototype.diagName=function(e){return this.ll.forDiagram(e,!1).getDiagramName().pipe(Object(l.a)(1))},t.prototype.entityType=function(e){if(e.eDataId&&e.entityId)return this.ell.getEntityOnce(e.eDataId,e.entityId).pipe(Object(c.a)((function(e){return e.getDefName()})))},t.\u0275fac=function(e){return new(e||t)(f.fc(f.m),f.fc(f.C),f.fc(s.a),f.fc(u.a),f.fc(h.a),f.fc(p.a),f.fc(a.Ib),f.fc(a.B))},t.\u0275cmp=f.Zb({type:t,selectors:[["link-info-item"]],inputs:{connectors:"connectors",eDataId:"eDataId",entityId:"entityId"},outputs:{change:"change",removed:"removed"},features:[f.Pb],decls:6,vars:6,consts:[[1,"links-renderer-item","links-renderer-item-connections"],[1,"links-renderer-item-doc-name"],[3,"heading"],[4,"ngFor","ngForOf"],[1,"container"],[1,"row"],[1,"col","my-auto"],[1,"links-renderer-item-ctype"],[3,"click"],["class","links-renderer-item-changes",4,"ngIf"],[1,"col-2","my-auto"],[1,"links-renderer-item-arrow"],[1,"nu-icon"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-arrow-right"],[1,"links-renderer-item-entity",3,"click"],[1,"links-renderer-item-shape-type"],[1,"links-renderer-item-changes"],[1,"primary",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(f.lc(0,"div",0),f.lc(1,"div",1),f.ed(2),f.yc(3,"async"),f.kc(),f.lc(4,"collapsable-panel-item",2),f.cd(5,y,20,8,"div",3),f.kc(),f.kc()),2&e&&(f.Sb(2),f.fd(f.zc(3,4,t.linkData.diagName)),f.Sb(2),f.Fc("heading","",t.linkData.count," ",t.getPlural("Connection",t.linkData.count),""),f.Sb(1),f.Cc("ngForOf",t.linkData.conns))},directives:[g.b,m.s,m.t],pipes:[m.b],styles:[".links-renderer-item[_ngcontent-%COMP%]  .panel-section{margin-bottom:15px}.links-renderer-item-connections[_ngcontent-%COMP%]{align-items:center}.links-renderer-item-ctype[_ngcontent-%COMP%]{color:rgba(20,40,46,.8)}.links-renderer-item-shape-type[_ngcontent-%COMP%]{color:rgba(61,66,66,.6);font-size:12px;line-height:20px}.links-renderer-item-entity[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t}(i.k)},pi4j:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("D57K"),i=n("ZtqW"),a=n("nsO7"),o=n("6Oco"),s=n("X0jn"),c=n("EM62"),l=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"ConnectionChangeBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e,t){var n=e.__sakota__.getChanges();if(!Object(a.isEmpty)(n)&&"Preview"!==t){for(var r in n.$set){if((c=/shapes\.([^\.]+)$/g).lastIndex=0,l=c.exec(r)){var i=e.shapes[l[1]];i.type===s.r.Connector||i.connectorIds||(i.connectorIds=[]),i.type===s.r.Connector&&this.updateShapeConnectorIds(e,i)}if((c=/shapes\.([^\.]+)\.path/g).lastIndex=0,l=c.exec(r))(u=e.shapes[l[1]]).type===s.r.Connector&&this.updateShapeConnectorIds(e,u)}for(var r in n.$unset){var c,l,u;if((c=/shapes\.([^\.]+)$/g).lastIndex=0,l=c.exec(r))(u=e.__sakota__.getTarget().shapes[l[1]]).type===s.r.Connector&&this.removeShapeConnectorIds(e,u)}}return o.a},e.prototype.updateShapeConnectorIds=function(e,t){var n=t.__sakota__?t.__sakota__.getTarget():null;["headId","tailId"].forEach((function(o){var s=Object(a.get)(t,"path."+o),c=Object(a.get)(t,"path."+s+".shapeId");if(n){var l=Object(a.get)(n,"path."+s+".shapeId");if(l!==c){var u=e.shapes[l];u&&u.connectorIds&&(u.connectorIds=u.connectorIds.filter((function(e){return e!==t.id})))}}var p=e.shapes[c];p&&!p.connectorIds?p.connectorIds=i.a.getConnectedConnectors(e,p.id).map((function(e){return e.connector.id})):p&&!p.connectorIds.includes(t.id)&&(p.connectorIds=Object(r.j)(p.connectorIds,[t.id]))}))},e.prototype.removeShapeConnectorIds=function(e,t){var n=Object(a.get)(t,"path.headId"),r=Object(a.get)(t,"path.tailId");[Object(a.get)(t,"path."+n+".shapeId"),Object(a.get)(t,"path."+r+".shapeId")].filter((function(e){return!!e})).forEach((function(n){var r=e.shapes[n];r&&r.connectorIds&&(r.connectorIds=r.connectorIds.filter((function(e){return e!==t.id})))}))},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()},ppab:function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("VrFO")),a=r(n("Y9Ll")),o=n("xfVB"),s=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Promise;(0,i.default)(this,e),this._grammar=t,this._context=n||{},this._relContext=r||this._context,this.Promise=a}return(0,a.default)(e,[{key:"eval",value:function(e){var t=this;return this.Promise.resolve().then((function(){return o[e.type].call(t,e)}))}},{key:"evalArray",value:function(e){var t=this;return this.Promise.all(e.map((function(e){return t.eval(e)})))}},{key:"evalMap",value:function(e){var t=this,n=Object.keys(e),r={},i=n.map((function(n){return t.eval(e[n])}));return this.Promise.all(i).then((function(e){return e.forEach((function(e,t){r[n[t]]=e})),r}))}},{key:"_filterRelative",value:function(t,n){var r=this,i=[];return Array.isArray(t)||(t=void 0===t?[]:[t]),t.forEach((function(t){var a=new e(r._grammar,r._context,t,r.Promise);i.push(a.eval(n))})),this.Promise.all(i).then((function(e){var n=[];return e.forEach((function(e,r){e&&n.push(t[r])})),n}))}},{key:"_filterStatic",value:function(e,t){return this.eval(t).then((function(t){return"boolean"==typeof t?t?e:void 0:e[t]}))}}]),e}();e.exports=s},"pt/I":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("D57K"),i=n("g6G6"),a=n("KTx3"),o=n("8j5Y"),s=n("cJ9h"),c=n("TLy2"),l=n("kuMc"),u=n("xVbo"),p=n("LLEj"),h=n("O6K7"),d=n("5xGT"),f=n("EM62"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"defaultCursor",{get:function(){return{cursor:"comment",tail:null,type:"cur",viewingArea:"app"}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t,n,r){var a=this,s=e.prototype.initialize.call(this,t,n,r),c=this.getStagePressUp(this.gridCanvas).pipe(Object(o.a)((function(e){return a.addComment(e)}))),l=this.getClickOnShape().pipe(Object(o.a)((function(e){return a.addComment(e)})));return Object(i.a)(s,c,l)},t.prototype.getClickOnShape=function(){var e=this;return this.getShapes().pipe(Object(s.a)((function(t){return Object(a.a)(t,"mousedown").pipe(Object(c.a)((function(){return Object(a.a)(t,"pressup").pipe(Object(l.a)(Object(a.a)(t,"pressmove")))})),Object(l.a)(Object(a.a)(e.diagramCanvas,"childRemoved").pipe(Object(u.a)((function(e){return e.child===t})))))})))},t.prototype.addComment=function(e){d.Kb.track("canvas.comment.add.canvas.click");var t=new h.a(h.b.CreateComment,e);this.interactionCanvas.dispatchEvent(t)},t.\u0275fac=function(e){return m(e||t)},t.\u0275prov=f.bc({token:t,factory:t.\u0275fac}),t}(p.a),m=f.nc(g)},"q+iX":function(e,t,n){(function(){"use strict";var r=this._;r||(r=n("6WTZ"));var i={create:function(e,t){var n;if(t?(n=t).eClass=t.eClass||e:e instanceof o?(n={}).eClass=e:n=e,!n.eClass||n.eClass.get("abstract"))throw new Error("Cannot create EObject from undefined or abstract EClass");return new o(n)}};e.exports&&(t=e.exports=i),t.Ecore=i;var a={on:function(e,t,n){var r,i;if(!t)return this;for(e=e.split(/\s+/),r=this._callbacks||(this._callbacks={});i=e.shift();)(r[i]||(r[i]=[])).push(t,n);return this},off:function(e,t,n){var i,a,o,s;if(!(a=this._callbacks))return this;if(!(e||t||n))return delete this._callbacks,this;for(e=e?e.split(/\s+/):r.keys(a);i=e.shift();)if((o=a[i])&&(t||n))for(s=o.length-2;s>=0;s-=2)t&&o[s]!==t||n&&o[s+1]!==n||o.splice(s,2);else delete a[i];return this},trigger:function(e){var t,n,r,i,a,o,s,c;if(!(n=this._callbacks))return this;for(c=[],e=e.split(/\s+/),i=1,a=arguments.length;i<a;i++)c[i-1]=arguments[i];for(;t=e.shift();){if((s=n.all)&&(s=s.slice()),(r=n[t])&&(r=r.slice()),r)for(i=0,a=r.length;i<a;i+=2)r[i].apply(r[i+1]||this,c);if(s)for(o=[t].concat(c),i=0,a=s.length;i<a;i+=2)s[i].apply(s[i+1]||this,o)}return this}},o=function(e){return e||(e={}),this.eClass=e.eClass,this.values={},e._&&(this._=e._),s(this),u(this,e),p(this),this};function s(e){var t=e.eClass;if(t){var n=t.get("eAllStructuralFeatures");r.each(n,(function(t){c(e,t)}))}}function c(e,t){if(e&&t){var n=t.get("name"),r=t.values.defaultValue,a=t.get("upperBound"),o=!0===t.values.derived,s=(t.values.containment,e.values[n]);null==s&&(o?e.values[n]=t.values._:1!==a&&a?s instanceof i.EList?s._setFeature(t):t.isTypeOf("EAttribute")?e.values[n]=[]:e.values[n]=new i.EList(e,t):e.values[n]=null==r?null:0===r?0:!1!==r&&r)}}function l(e,t){return r.find(e.get("eAllStructuralFeatures"),(function(e){return e.values.name===t}))}function u(e,t){if(e.eClass){var n=function(e,t){return"function"==typeof t||t instanceof o?t:i.create(e,t)};r.each(t,(function(t,a){var o=l(this.eClass,a);o&&void 0!==t&&(1===o.get("upperBound")?function(t,r,i,a){i?e.set(t,n(a,r)):e.set(t,r)}(a,t,o.eClass===i.EReference,o.get("eType")):function(t,i,a,o){var s=r.isArray(i)?i:[i];r.each(s,(function(r){a?e.get(t).add(n(o,r)):e.get(t).push(r)}))}(a,t,o.eClass===$,o.get("eType")))}),e)}}function p(e){if(e&&e.eClass){var t=function e(t){var n=t.get("eOperations").array(),i=t.get("eAllSuperTypes");return r.flatten(r.union(n||[],r.map(i||[],(function(t){return e(t)}))))}(e.eClass);t&&r.each(t,(function(t){e[t.get("name")]=t._}))}}i.EObjectPrototype={setEClass:function(e){return this.eClass=e,s(this),u(this,this.values),p(this),this},create:function(e){if("EClass"===this.eClass.get("name"))return i.create(this,e)},has:function(e){return this.values.hasOwnProperty(e)||l(this.eClass,e)},isSet:function(e){if(!this.has(e))return!1;if(!this.eClass)return!1;var t=this.get(e);return t instanceof h?t.size()>0:null!=t},set:function(e,t){var n,i,a,o;if(null===e)return this;e.eClass&&(e=e.get("name")),r.isObject(e)||(i=e,(e={})[i]=t);var s=this.eResource();for(n in e)if(void 0!==(a=e[n])&&this.has(n)){this.isSet(n)&&this.unset(n);var c=l(this.eClass,n),u=c.get("containment");"containment"===n&&"string"==typeof a&&"EReference"===this.eClass.values.name&&(a="true"===a.toLowerCase()),this.values[n]=a,u&&(a.eContainingFeature=c,a.eContainer=this),o="change:"+n,this.trigger("change "+o,n),s&&s.trigger("change",this)}return this},unset:function(e,t){var n,i,a;if(null===e)return this;e.eClass&&(e=e.get("name")),r.isObject(e)||(i=e,(e={})[i]=void 0);var o=this.eResource();for(n in e)if(this.has(n)&&this.isSet(n)){var s=l(this.eClass,n),c=!0===Boolean(s.get("containment")),u=this.values[n];c&&(u.eContainingFeature=void 0,u.eContainer=void 0),this.values[n]=void 0,a="unset:"+n,this.trigger("unset "+a,n),o&&o.trigger("change",this)}return this},get:function(e){if(!e)return null;var t=e.eClass?e.get("name"):e;!r.has(this.values,t)&&this.has(t)&&c(this,l(this.eClass,t));var n=this.values[t];return"function"==typeof n?n.apply(this):n},isTypeOf:function(e){if(!e||!this.eClass)return!1;var t=e.eClass?e.get("name"):e;return this.eClass.get("name")===t},isKindOf:function(e){if(!e||!this.eClass)return!1;if(this.isTypeOf(e))return!0;var t=e.eClass?e.get("name"):e,n=this.eClass.get("eAllSuperTypes");return r.any(n,(function(e){return e.get("name")===t}))},eResource:function(){return this.isKindOf("Resource")?this:this.eContainer?this.eContainer.isKindOf("Resource")?this.eContainer:this.eContainer.eResource():null},eContents:function(){if(!this.eClass)return[];if(r.isUndefined(this.__updateContents)){this.__updateContents=!0;var e=this.eResource();if(e){var t=this;e.on("add remove",(function(){t.__updateContents=!0}))}}if(this.__updateContents){var n=this.eClass.get("eAllStructuralFeatures"),i=r.filter(n,(function(e){return e.isTypeOf("EReference")&&e.get("containment")&&this.isSet(e.get("name"))}),this),a=null;this.__eContents=r.flatten(r.map(i,(function(e){return(a=this.get(e.get("name")))?a.array?a.array():a:[]}),this)),this.__updateContents=!1}return this.__eContents},eURI:function(){var e=this.eResource();return(e?e.get("uri"):"")+"#"+this.fragment()},fragment:function(){var e,t,n,r=this.eContainer,i=this.eClass.get("eIDAttribute");return r?i?this.get(i.get("name")):this._id?this._id:this.isKindOf("EModelElement")?r?r.isKindOf("Resource")?(t=r.get("contents")).size()>1?"/"+t.indexOf(this):"/":r.fragment()+"/"+this.get("name"):"/":(r.isKindOf("Resource")?n=(t=r.get("contents")).size()>1?"/"+t.indexOf(this):"/":(e=this.eContainingFeature)&&(n=r.fragment()+"/@"+e.get("name"),1!==e.get("upperBound")&&(n+="."+r.get(e.get("name")).indexOf(this))),n):null}},r.extend(o.prototype,i.EObjectPrototype,a);var h=i.EList=function(e,t){return this._internal=[],this._owner=e,this._size=0,this._setFeature(t),this};h.prototype={_setFeature:function(e){e&&(this._feature=e,this._isContainment=this._feature.get("containment"),r.each(this._internal,(function(e){this._isContainment&&(e.eContainer=this._owner,e.eContainingFeature=this._feature)}),this))},add:function(e){if(!e||!e instanceof o)return this;this._isContainment&&(e.eContainingFeature=this._feature,e.eContainer=this._owner),this._size++,this._internal.push(e);var t=this._owner.eResource(),n="add";return this._feature&&(n+=":"+this._feature.get("name")),this._owner.trigger(n,e),t&&t.trigger("add",this),this},addAll:function(){return r.each(r.flatten(arguments||[]),(function(e){this.add(e)}),this),this},remove:function(e){var t="remove",n=this._owner.eResource();return this._internal=r.without(this._internal,e),this._size=this._size-1,this._feature&&(t+=":"+this._feature.get("name")),this._owner.trigger(t,e),n&&n.trigger("remove",this),this},clear:function(){for(var e=this.array(),t=0;t<e.length;t++)this.remove(e[t]);return this},size:function(){return this._size},at:function(e){if(this._size<e)throw new Error("Index Out Of Range");return this._internal[e]},array:function(){return this._internal},first:function(){return r.first(this._internal)},last:function(){return r.last(this._internal)},rest:function(e){return r.rest(this._internal,e)},each:function(e,t){return r.each(this._internal,e,t)},filter:function(e,t){return r.filter(this._internal,e,t)},find:function(e,t){return r.find(this._internal,e,t)},map:function(e,t){return r.map(this._internal,e,t)},reject:function(e,t){return r.reject(this._internal,e,t)},contains:function(e){return r.contains(this._internal,e)},indexOf:function(e){return r.indexOf(this._internal,e)}};var d=new o,f=new o,g=new o,m=new o,v=new o,b=new o,y=new o,x=new o,C=new o,w=new o,k=new o,S=new o,O=new o,E=new o,_=new o,I=new o,P=new o;d.eClass=d,d.values={name:"EClass",abstract:!1,interface:!1,eStructuralFeatures:new i.EList(d),eOperations:new i.EList(d),eSuperTypes:new i.EList(d),eAllSuperTypes:function(){if(!this._eAllSuperTypes){var e=function(e){var t=e.get("eSuperTypes").array(),n=r.flatten(r.map(t,(function(e){return e.get("eAllSuperTypes")})));return r.union(n,t)};this.on("add:eSuperTypes remove:eSuperTypes",(function(){this._eAllSuperTypes=e(this)}),this),this._eAllSuperTypes=e(this)}return this._eAllSuperTypes},eAllSubTypes:function(){var e,t,n;return e=(n=this.eResource().get("resourceSet"))?n.elements("EClass"):i.EPackage.Registry.elements("EClass"),t=r.filter(e,(function(e){return r.contains(e.get("eAllSuperTypes"),this)}),this),r.isArray(t)?t:[]},eReferences:function(){var e;return e=this.get("eStructuralFeatures").filter((function(e){return e.isTypeOf("EReference")})),e},eAttributes:function(){var e;return e=this.get("eStructuralFeatures").filter((function(e){return e.isTypeOf("EAttribute")})),e},eIDAttribute:function(){var e,t;return e=this.get("eAllAttributes"),t=r.filter(e,(function(e){return!0===e.get("iD")})),r.isArray(t)?t[0]:null},eAllStructuralFeatures:function(){var e,t,n,i;return i=(e=this).get("eAllSuperTypes"),n=e.values.eStructuralFeatures.array(),t=r.flatten(r.map(i||[],(function(e){return e.values.eStructuralFeatures.array()}))),r.union(t||[],n||[])},eAllAttributes:function(){var e=this.get("eAllStructuralFeatures"),t=r.filter(e||[],(function(e){return e.eClass===i.EAttribute}));return t},eAllContainments:function(){var e=this.get("eAllStructuralFeatures"),t=r.filter(e,(function(e){return e.eClass===i.EReference&&e.get("containment")}));return t},eAllReferences:function(){var e=this.get("eAllStructuralFeatures"),t=r.filter(e,(function(e){return e.eClass===i.EReference&&!e.get("containment")}));return t}},O.values={name:"abstract",lowerBound:0,upperBound:1,defaultValueLiteral:"false",defaultValue:!1,eType:m},E.values={name:"interface",lowerBound:0,upperBound:1,defaultValueLiteral:"false",defaultValue:!1,eType:m},_.values={name:"eStructuralFeatures",lowerBound:0,upperBound:-1,containment:!0},P.values={name:"eSuperTypes",lowerBound:0,upperBound:-1,containment:!1},I.values={name:"eOperations",lowerBound:0,upperBound:-1,containment:!0},d.get("eStructuralFeatures").add(O).add(E).add(P).add(_).add(I);var T=new o;T.values={name:"eAllStructuralFeatures",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllStructuralFeatures};var A=new o;A.values={name:"eAllSuperTypes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllSuperTypes};var M=new o;M.values={name:"eAllSubTypes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllSubTypes};var D=new o;D.values={name:"eAllAttributes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllAttributes};var j=new o;j.values={name:"eAllContainments",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllContainments};var N=new o;N.values={name:"eAllReferences",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAllReferences};var R=new o;R.values={name:"eReferences",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eReferences};var L=new o;L.values={name:"eAttributes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:d.values.eAttributes};var F=new o;F.values={name:"eIDAttribute",lowerBound:0,upperBound:1,derived:!0,containment:!1,_:d.values.eIDAttribute},d.get("eStructuralFeatures").add(T).add(A).add(M).add(D).add(N).add(j).add(L).add(R).add(F),d.getEStructuralFeature=function(e){var t;return t=e.eClass?e.get("name"):e,r.find(this.get("eAllStructuralFeatures"),(function(e){return e.get("name")===t}))};var B=new o;B.values={name:"getEStructuralFeature",lowerBound:0,upperBound:1,eParameters:new i.EList(this)},B._=d.getEStructuralFeature,d.get("eOperations").add(B),d.values.eStructuralFeatures._setFeature(_),d.values.eSuperTypes._setFeature(P),d.values.eOperations._setFeature(I);var V=d.create(),z=d.create(),U=d.create(),G=d.create(),H=d.create(),Y=d.create(),q=d.create(),W=d.create(),X=d.create(),K=d.create(),Z=d.create(),$=d.create(),Q=d.create(),J=d.create(),ee=d.create(),te=d.create(),ne=d.create();O.eClass=Z,E.eClass=Z,_.eClass=$,_.values.eType=K,P.eClass=$,P.values.eType=d,I.eClass=$,I.values.eType=Q,T.eClass=$,T.values.eType=K,A.eClass=$,A.values.eType=d,M.eClass=$,M.values.eType=d,D.eClass=$,D.values.eType=Z,N.eClass=$,N.values.eType=$,j.eClass=$,j.values.eType=$,L.eClass=$,L.values.eType=Z,R.eClass=$,R.values.eType=$,F.eClass=$,F.values.eType=Z,B.eClass=Q,B.values.eType=K,z.get("eSuperTypes").add(V),U.get("eSuperTypes").add(z),G.get("eSuperTypes").add(z),H.get("eSuperTypes").add(G),Y.get("eSuperTypes").add(G),d.get("eSuperTypes").add(Y),q.get("eSuperTypes").add(Y),W.get("eSuperTypes").add(q),ee.get("eSuperTypes").add(G),X.get("eSuperTypes").add(G),K.get("eSuperTypes").add(X),Z.get("eSuperTypes").add(K),$.get("eSuperTypes").add(K),Q.get("eSuperTypes").add(X),J.get("eSuperTypes").add(X),ne.get("eSuperTypes").add(G),te.get("eSuperTypes").add(V);var re=new o,ie=new o,ae=new o,oe=new o,se=new o,ce=new o,le=new o;re.eClass=$,re.values={name:"eType",lowerBound:0,upperBound:1,containment:!1,eType:Y},ie.eClass=Z,ie.values={name:"ordered",lowerBound:0,upperBound:1,defaultValueLiteral:"true",defaultValue:!0,eType:m},ae.eClass=Z,ae.values={name:"unique",lowerBound:0,upperBound:1,defaultValueLiteral:"true",defaultValue:!0,eType:m},oe.eClass=Z,oe.values={name:"lowerBound",lowerBound:0,upperBound:1,defaultValueLiteral:"0",defaultValue:0,eType:g},se.eClass=Z,se.values={name:"upperBound",lowerBound:0,upperBound:1,defaultValueLiteral:"1",defaultValue:1,eType:g},ce.eClass=Z,ce.values={name:"many",lowerBound:0,upperBound:1,eType:m,derived:!0,_:function(){return 1!==this.get("upperBound")}},le.eClass=Z,le.values={name:"required",lowerBound:0,upperBound:1,eType:m,derived:!0,_:function(){return 1===this.get("lowerBound")}},X.get("eStructuralFeatures").add(re).add(ie).add(ae).add(oe).add(se).add(ce).add(le);var ue=new o;ue.eClass=$,ue.values={name:"eAnnotations",eType:U,lowerBound:0,upperBound:-1,containment:!0},z.get("eStructuralFeatures").add(ue);var pe=new o;pe.eClass=Z,pe.values={name:"name",lowerBound:0,upperBound:1,eType:f},G.get("eStructuralFeatures").add(pe);var he=Z.create({name:"changeable",eType:m}),de=Z.create({name:"volatile",eType:m}),fe=Z.create({name:"transient",eType:m}),ge=Z.create({name:"defaultValueLiteral",eType:f}),me=Z.create({name:"defaultValue",eType:S,derived:!0}),ve=Z.create({name:"unsettable",eType:m}),be=Z.create({name:"derived",eType:m});K.get("eStructuralFeatures").add(he).add(de).add(fe).add(ge).add(me).add(ve).add(be),me.set({derived:!0});var ye=Z.create({name:"containment",eType:m}),xe=Z.create({name:"container",eType:m}),Ce=Z.create({name:"resolveProxies",eType:m}),we=$.create({name:"eOpposite",eType:$});$.get("eStructuralFeatures").add(ye).add(xe).add(Ce).add(we);var ke=Z.create({name:"iD",eType:m});Z.get("eStructuralFeatures").add(ke),V.set({name:"EObject"}),z.set({name:"EModelElement",abstract:!0}),U.set({name:"EAnnotation"}),G.set({name:"ENamedElement",abstract:!0}),H.set({name:"EPackage"}),Y.set({name:"EClassifier",abstract:!0}),q.set({name:"EDataType"}),W.set({name:"EEnum"}),X.set({name:"ETypedElement",abstract:!0}),K.set({name:"EStructuralFeature",abstract:!0}),Z.set({name:"EAttribute"}),$.set({name:"EReference"}),Q.set({name:"EOperation"}),J.set({name:"EParameter"}),ee.set({name:"EEnumLiteral"}),ne.set({name:"ETypeParameter"}),te.set({name:"EGenericType"});var Se=$.create({name:"eParameters",eType:J,containment:!0,lowerBound:0,upperBound:-1});Q.get("eStructuralFeatures").add(Se);var Oe=$.create({name:"eLiterals",eType:ee,containment:!0,lowerBound:0,upperBound:-1});W.get("eStructuralFeatures").add(Oe),ee.get("eStructuralFeatures").add(Z.create({name:"literal",eType:f})).add(Z.create({name:"value",eType:g}));var Ee=d.create({name:"EStringToStringMapEntry"}),_e=Z.create({name:"key",lowerBound:0,upperBound:1,eType:f}),Ie=Z.create({name:"value",lowerBound:0,upperBound:1,eType:f});Ee.get("eStructuralFeatures").add(_e).add(Ie);var Pe=Z.create({name:"source",upperBound:1,lowerBound:0,eType:f}),Te=$.create({name:"details",upperBound:-1,lowerBound:0,containment:!0,eType:Ee});U.get("eStructuralFeatures").add(Pe).add(Te);var Ae=$.create({name:"eTypeParameter",eType:ne,containment:!1,lowerBound:0,upperBound:1}),Me=$.create({name:"eUpperBound",containment:!0,eType:te}),De=$.create({name:"eLowerBound",containment:!0,eType:te}),je=$.create({name:"eTypeArguments",containment:!0,upperBound:-1,eType:te}),Ne=$.create({name:"eClassifier",eType:Y});te.get("eStructuralFeatures").add(Ae).add(Me).add(De).add(je).add(Ne);var Re=$.create({name:"eGenericType",upperBound:1,containment:!0,eType:te});X.get("eStructuralFeatures").add(Re);var Le=$.create({name:"eGenericSuperTypes",upperBound:-1,containment:!0,eType:te});d.get("eStructuralFeatures").add(Le);var Fe=$.create({name:"eGenericExceptions",upperBound:-1,containment:!0,eType:te});Q.get("eStructuralFeatures").add(Fe);var Be=$.create({name:"eBounds",containment:!0,upperBound:-1,eType:te}),Ve=$.create({name:"eGenericTypes",containment:!1,upperBound:-1,eType:te});ne.get("eStructuralFeatures").add(Be).add(Ve);var ze=$.create({name:"eTypeParameters",upperBound:-1,containment:!0,eType:ne});Y.get("eStructuralFeatures").add(ze);var Ue=$.create({name:"eTypeParameters",upperBound:-1,containment:!0,eType:ne});Q.get("eStructuralFeatures").add(Ue),f.eClass=q,f.set({name:"EString"}),g.eClass=q,g.set({name:"EInt"}),m.eClass=q,m.set({name:"EBoolean"}),b.eClass=q,b.set({name:"EDate"}),v.eClass=q,v.set({name:"EDouble"}),y.eClass=q,y.set({name:"EIntegerObject"}),x.eClass=q,x.set({name:"EFloatObject"}),C.eClass=q,C.set({name:"ELongObject"}),w.eClass=q,w.set({name:"EMap"}),k.eClass=q,k.set({name:"EDiagnosticChain"}),S.eClass=q,S.set({name:"JSObject"}),i.ELong=q.create({name:"ELong"}),i.EFloat=q.create({name:"EFloat"}),i.EShort=q.create({name:"EShort"}),i.EDoubleObject=q.create({name:"EDoubleObject"});var Ge=$.create({name:"eClassifiers",lowerBound:0,upperBound:-1,containment:!0,eType:Y}),He=$.create({name:"eSubPackages",lowerBound:0,upperBound:-1,containment:!0,eType:H});H.get("eStructuralFeatures").add(Z.create({name:"nsURI",eType:f})).add(Z.create({name:"nsPrefix",eType:f})).add(Ge).add(He),i.EcorePackage=H.create({name:"ecore",nsPrefix:"ecore",nsURI:"http://www.eclipse.org/emf/2002/Ecore"}),i.EcorePackage.get("eClassifiers").add(V).add(z).add(U).add(G).add(H).add(Y).add(d).add(q).add(X).add(K).add(Z).add($).add(Q).add(J).add(W).add(ee).add(ne).add(te).add(Ee).add(f).add(m).add(g).add(v).add(y).add(x).add(C).add(w).add(k).add(b).add(i.EShort).add(i.EFloat).add(i.ELong).add(i.EDoubleObject).add(S),i.EObject=V,i.EModelElement=z,i.EClass=d,i.EClassifier=Y,i.EAnnotation=U,i.EStringToStringMapEntry=Ee,i.EPackage=H,i.ETypedElement=X,i.ENamedElement=G,i.EStructuralFeature=K,i.EAttribute=Z,i.EReference=$,i.EEnum=W,i.EEnumLiteral=ee,i.EDataType=q,i.EOperation=Q,i.EParameter=J,i.ETypeParameter=ne,i.EGenericType=te,i.EString=f,i.EBoolean=m,i.EInt=g,i.EDouble=v,i.EIntegerObject=y,i.EFloatObject=x,i.ELongObject=C,i.EMap=w,i.EDiagnosticChain=k,i.EDate=b,i.JSObject=S,i.EPackage.Registry={_ePackages:{},getEPackage:function(e){return this._ePackages[e]},register:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if(!e.isSet("nsURI"))throw new Error("Cannot register EPackage without nsURI");e.get("eSubPackages").each((function(e){register(e)})),this._ePackages[e.get("nsURI")]=e})),ePackages:function(){return r.values(this._ePackages)},elements:function(e){var t=this.ePackages(),n=[t,r.map(t,(function(e){return function e(t){return r.map(t.eContents(),(function(t){return[t,e(t)]}))}(e)}))];return n=r.flatten(n),n=r.filter(n,(function(t){return!e||(e.eClass?t.eClass===e:t.eClass.get("name")===e)}))}},i.EPackage.Registry.register(i.EcorePackage),i.JSON={dataType:"json",contentType:"application/json",parse:function(e,t){r.isString(t)&&(t=JSON.parse(t));var n=[],a=e.get("resourceSet")||i.ResourceSet.create();function o(e,t){var s;if(e&&(t||e.eClass)){e.eClass&&(t=a.getEObject(e.eClass));try{s=i.create(t)}catch(c){throw new Error("Cannot parse or cannot find EClass for object"+JSON.stringify(e))}s&&(e._id&&(s._id=e._id),t===i.EAnnotation?function(e,t){if(e.source&&t.set("source",e.source),e.details)if(r.isArray(e.details));else{var n=t.get("details");r.each(e.details,(function(e,t){n.add(i.EStringToStringMapEntry.create({key:t,value:e}))}))}}(e,s):r.each(t.get("eAllStructuralFeatures"),function(e,t){return e&&t?function(i){if(i&&!i.get("derived")){var a=i.get("name"),s=e[a];if(void 0!==s)if(i.isTypeOf("EAttribute"))t.set(a,s);else if(i.get("containment")){var c=i.get("eType");1===i.get("upperBound")?t.set(a,o(s,c)):r.each(s||[],(function(e){t.get(a).add(o(e,c))}))}else n.push({parent:t,feature:i,value:s})}}:function(){}}(e,s)))}return s}r.isArray(t)?r.each(t,(function(t){e.add(o(t))})):e.add(o(t)),function(){var t=Ke(e);function i(e,n,r,i){var o=r.$ref,s=t[o];s||(s=a.getEObject(o)),s&&(i?e.get(n.get("name")).add(s):e.set(n.get("name"),s))}r.each(n,(function(e){var t=e.parent,n=e.feature,a=e.value;1===n.get("upperBound")?i(t,n,a,!1):r.each(r.isArray(a)?a:[a],(function(e){i(t,n,e,!0)}))}))}()},to:function(e){var t,n=e.get("contents").array(),a={};function o(e,t){var n=t.eResource(),r=e.eResource(),i=n!==r;if(n&&r){a[n.get("uri")]||(a[n.get("uri")]=Ke(n));var o=a[n.get("uri")];for(var s in o)if(o[s]===t)return i?n.get("uri")+"#"+s:s;return null}}function s(e,t,n){return!0===n?c(t):{$ref:o(e,t),eClass:t.eClass.eURI()}}function c(e){var t=e.eClass,n=e.values,a={eClass:t.eURI()};return e._id&&(a._id=e._id),t===i.EAnnotation?function(e,t){e.values.source&&(t.source=e.values.source),e.values.details&&e.values.details.size()>0&&(t.details={},e.values.details.each((function(e){var n=e.get("key"),r=e.get("value");n&&(t.details[n]=r)})))}(e,a):r.each(n,function(e,t){return e&&t?function(n,r){if("_"!==r[0]){var i=e.eClass.getEStructuralFeature(r),a=e.isSet(r);if(i&&a&&!i.get("derived")){var o=n,c=i.get("name"),l=1!==i.get("upperBound"),u=i.get("containment");i.isTypeOf("EAttribute")?t[c]=o:l?(t[c]=[],o.each((function(n){t[c].push(s(e,n,u))}))):t[c]=s(e,o,u)}}}:function(){}}(e,a)),a}if(a[e.get("uri")]=Ke(e),1===n.length){t=c(n[0])}else{t=[];for(var l=0;l<n.length;l++)t.push(c(n[l]))}return t}};var Ye=i.Resource=i.EClass.create({name:"Resource",eSuperTypes:[i.EObject],eStructuralFeatures:[{eClass:i.EAttribute,name:"uri",lowerBound:1,upperBound:1,eType:i.EString},{eClass:i.EReference,name:"contents",upperBound:-1,containment:!0,eType:i.EObject},{eClass:i.EReference,name:"resourceSet",upperBound:1,lowerBound:0,eType:i.ResourceSet}],eOperations:[{eClass:i.EOperation,name:"add",_:function(e){return e||e.eClass?(e.eContainer=this,this.get("contents").add(e),this):this}},{eClass:i.EOperation,name:"clear",_:function(){return this.get("contents").clear(),this}},{eClass:i.EOperation,name:"addAll",_:function(e){return r.isArray(e)&&r.each(e,(function(e){this.add(e)}),this),this}},{eClass:i.EOperation,name:"getEObject",eType:i.EObject,_:function(e){return e?this._index()[e]?this._index()[e]:void 0:null}},{eClass:i.EOperation,name:"each",_:function(e,t){return this.get("contents").each(e,t)}},{eClass:i.EOperation,name:"to",_:function(e,t){return e&&"function"==typeof e.to?e.to(this,t):i.JSON.to(this)}},{eClass:i.EOperation,name:"parse",_:function(e,t){return t&&"function"==typeof t.parse?t.parse(this,e):i.JSON.parse(this,e),this}},{eClass:i.EOperation,name:"save",_:function(e,t){t||(t={});var n,r=t.format?t.format:i.JSON;try{n=this.to(r)}catch(a){e(null,a)}e(n,null)}},{eClass:i.EOperation,name:"load",_:function(e,t,n){n||(n={});var r=n.format||i.JSON;this.get("resourceSet");try{this.parse(e,r)}catch(a){t(null,a)}this.trigger("change"),"function"==typeof t&&t(this,null)}},{eClass:i.EOperation,name:"remove",_:function(){var e=this.get("resourceSet");e&&e.get("resources").remove(this),this.clear()}},{eClass:i.EOperation,name:"_index",eType:S,_:function(){if(r.isUndefined(this.__updateIndex)){var e=this;e.__updateIndex=!0,e.on("add remove",(function(){e.__updateIndex=!0}))}return this.__updateIndex&&(this.__index=Ke(this),this.__updateIndex=!1),this.__index}}]}),qe=function(){this.uriMap={}};qe.prototype={map:function(e,t){this.uriMap[e]=t},normalize:function(e){var t=e.split("#")[0],n=this.uriMap[t];if(n)return n;var r,i,a=t.lastIndexOf("/")+1;return(r=t.slice(0,a))===t?e:(i=t.slice(a,t.length),this.normalize(r)+i)}};var We=i.ResourceSet=i.EClass.create({name:"ResourceSet",eSuperTypes:[i.EObject],eStructuralFeatures:[{eClass:i.EAttribute,name:"uri",upperBound:1,lowerBound:0,eType:i.EString},{eClass:i.EReference,name:"resources",upperBound:-1,containment:!0,eType:Ye}],eOperations:[{eClass:i.EOperation,eType:i.Resource,upperBound:1,name:"create",_:function(e){var t=r.isObject(e)?e:{uri:e};if(!t.uri)throw new Error("Cannot create Resource, missing URI parameter");var n=this.get("resources").find((function(e){return e.get("uri")===t.uri}));return n||((n=i.Resource.create(t)).set("resourceSet",this),this.get("resources").add(n),this.trigger("add",n),n)}},{eClass:i.EOperation,eType:i.EObject,upperBound:1,name:"getEObject",_:function(e){var t,n=e.split("#"),r=n[0],a=n[1];if(!a)return null;var o=i.EPackage.Registry.getEPackage(r);return o&&((t=o.eResource())||((t=this.create({uri:r})).add(o),this.get("resources").add(t),t.set("resourceSet",this))),t||(t=this.get("resources").find((function(e){return e.get("uri")===r})))?t.getEObject(a):null}},{eClass:i.EOperation,eType:i.EObject,upperBound:-1,name:"elements",_:function(e){var t=function(t){return!e||t.isKindOf(e)},n=this.get("resources").map((function(e){return r.filter(r.values(e._index()),t)}));return r.flatten(n)}},{eClass:i.EOperation,eType:i.JSObject,upperBound:1,name:"uriConverter",_:function(){return this._converter||(this._converter=new qe),this._converter}},{eClass:i.EOperation,eType:i.JSObject,upperBound:1,name:"toJSON",_:function(){var e={total:this.get("resources").size(),resources:[]};return this.get("resources").each((function(t){e.resources.push({uri:t.get("uri"),length:t.get("contents").size(),contents:t.get("contents").map((function(e){return{eURI:e.eURI(),eClass:e.eClass.eURI()}}))})})),e}},{eClass:i.EOperation,name:"parse",_:function(e){e&&e.resources&&r.each(e.resources,(function(e){e.uri&&resourceSet.create({uri:e.uri})}),this)}}]});Ye.getEStructuralFeature("resourceSet").set("eType",We);var Xe=i.EPackage.create({name:"resources",nsPrefix:"resources",nsURI:"http://www.eclipselabs.org/ecore/2012/resources",eClassifiers:[We,Ye]});function Ke(e){var t={},n=e.get("contents").array();if(n.length){var i,a,o=function e(n,i){var a=n.eContents();t[i]=n,r.each(a,(function(t){e(t,t.fragment())}))};if(1===n.length)(i=n[0])._id?o(i,i._id):(a=i.eClass.get("eIDAttribute")||null,o(i,a?i.get(a.get("name")):"/"));else for(var s=0;s<n.length;s++)(i=n[s])._id?o(i,i._id):(a=i.eClass.get("eIDAttribute")||null,o(i,a?i.get(a.get("name")):"/"+s))}return t}function Ze(e){return!e.get("abstract")}function $e(e,t){if(!e)return[];var n=e.eClass.get("eAllContainments");return r.flatten(r.map(n,(function(n){var i=function(e){if(!e||!e.eClass)return[];var t=e.get("eAllSubTypes");return r.filter(r.union([e],t),Ze)}(n.get("eType"));return t&&"function"==typeof t?t(e,n,i):i})))}function Qe(e,t){return e?$e(e.eContainer,t):[]}function Je(e,t,n){return r.map(n,(function(n){return{label:"New "+n.get("name"),owner:e,feature:t,type:n}}))}function et(e){return e.get("name")||""}function tt(e){var t=e.get("eType"),n=e.eClass===i.EOperation,r=t?t.get("name"):null;return e.get("name")+(n?"()":"")+(r?" : "+r:"")}i.Resource.create({uri:i.EcorePackage.get("nsURI")}).add(i.EcorePackage),i.Resource.create({uri:Xe.get("nsURI")}).add(Xe),i.EPackage.Registry.register(Xe),i.Edit={childTypes:$e,siblingTypes:Qe,childDescriptors:function(e){return $e(e,Je)},siblingDescriptors:function(e){return Qe(e,Je)},choiceOfValues:function(e,t){if(null==e||null==e.eResource()||null==e.eResource().get("resourceSet"))throw new Error("Bad argument");var n=t.get("eType"),i=e.eResource().get("resourceSet").elements();return r.filter(i,(function(e){return e.isKindOf(n)}))},_get:function(e,t){if(!t||!t.eClass)return null;var n=t.eClass.get("name");return this[n]?"function"==typeof this[n][e]?this[n][e](t):this[n][e]:t.eClass.get("name")},text:function(e){return this._get("text",e)},icon:function(e){return this._get("icon",e)},label:function(e){return this._get("label",e)},EClass:{text:et,label:et,icon:"icon-EClass"},EDataType:{text:et,label:et,icon:"icon-EDataType"},EEnum:{text:et,label:et,icon:"icon-EEnum"},EEnumLiteral:{text:function(e){return e.get("name")+" = "+e.get("value")},label:et,icon:"icon-EEnumLiteral"},EAttribute:{text:tt,label:et,icon:"icon-EAttribute"},EReference:{text:tt,label:et,icon:"icon-EReference"},EOperation:{text:tt,label:et,icon:"icon-EOperation"},EPackage:{text:et,label:et,icon:"icon-EPackage"},EAnnotation:{text:function(e){return e.get("source")},label:function(e){return e.get("source")},icon:"icon-EAnnotation"},EStringToStringMapEntry:{text:function(e){return e.get("key")+" -> "+e.get("value")},label:function(e){return e.get("key")},icon:"icon-EStringToStringMapEntry"},ResourceSet:{text:"resourceSet",label:"",icon:"icon-EObject"},Resource:{text:function(e){return e.get("uri")},label:function(e){return e.get("uri")},icon:"icon-EObject"}},i.sax=n("bnd4"),i.XMI={dataType:"xml",contentType:"application/xml",parse:function(e,t){if(!i.sax)throw new Error("Sax is missing.");var n=i.sax.parser(!0),a=e.get("resourceSet")||i.ResourceSet.create(),o=[];function s(e){var t=e.split(":"),n=t[0],i=t[1];return function(e){var t=r.find(o,(function(t){return t.prefix===e}));return t?t.uri:null}(n)+"#//"+i}function c(e){return function(e){return-1!==e.name.indexOf(":")}(e)?a.getEObject(s(e.name)):function(e){var t;if(e.parent&&e.parent.eObject){var n,r=l.parent.eObject,i=e.name,o=r.eClass.getEStructuralFeature(i);if(o&&o.get){n=o.get("eType");var c=e.attributes["xsi:type"];t=c?a.getEObject(s(c)):n}}return t}(e)}var l,u,p,h=[];n.ontext=function(e){l&&l.waitingForAttributeText&&l.parent.eObject.set(l.name,e)},n.onopentag=function(t){var n,a,s,p,d;if((d=t.attributes)&&r.each(d,(function(e,t){if(-1!==t.indexOf(":")){var n=t.split(":");"xmlns"===n[0]&&o.push({prefix:n[1],uri:e})}})),t.children=[],t.parent=l,t.parent&&t.parent.children.push(t),l=t,n=c(t)){if(l.parent&&l.parent.eObject&&l.parent.eObject.eClass.getEStructuralFeature(t.name).isTypeOf("EAttribute"))t.waitingForAttributeText=!0;else if(a=l.eObject=i.create(n),u||(u=a),r.each(t.attributes,(function(e,t){a.has(t)&&((s=a.eClass.getEStructuralFeature(t)).isTypeOf("EAttribute")?a.set(t,e):h.push({parent:a,feature:s,value:e})),"xmi:id"===t&&(a._id=e)})),t.parent)if((p=t.parent.eObject)&&p.has(t.name))if((s=p.eClass.getEStructuralFeature(t.name)).get("containment"))1===s.get("upperBound")?p.set(t.name,a):p.get(t.name).add(a);else{var f=t.attributes,g=f?f.href:null;g&&h.push({parent:p,feature:s,value:g})}else u&&u!==a&&(e.add(u),u=a)}else if(void 0===n)throw new Error(t.name+" has undefined/invalid eClass.")},n.onclosetag=function(e){var t;l&&l.parent&&(t=l.parent,delete l.parent,l=t)},n.write(t).close(),e.add(u),p=e._index(),r.each(h,(function(e){!function(e,t,n){var i,o=n.split(/\s/),s=1!==t.get("upperBound");"ecore:EDataType"===o[0]&&o.shift(),r.each(o,(function(n){if("#"===n[0]&&(n=n.substring(1,n.length)),"/"===n.substring(0,1)?i=p[n]:null===(i=a.getEObject(n))&&console.log("Warning: "+n+" is an unresolved reference"),i)s?e.get(t.get("name")).add(i):e.set(t.get("name"),i);else if(void 0===i)throw new Error("Undefined reference: "+n)}))}(e.parent,e.feature,e.value)}))},to:function(e,t){var n,a,o="",s=e.get("contents").array(),c=i.Resource.getEStructuralFeature("contents");function l(e,t){var s;o+="<",s=e.eContainingFeature&&e.eContainingFeature!==c?e.eContainingFeature.get("name"):n+":"+e.eClass.get("name"),o+=s,e.eContainer.isKindOf("Resource")?t&&(o+=' xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI"',o+=' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"',o+=" xmlns:"+n+'="'+a+'"'):e.eContainingFeature.get("eType")!==e.eClass&&(o+=' xsi:type="',o+=n+":"+e.eClass.get("name")+'"');var u=e.eClass.get("eAllStructuralFeatures"),p=r.filter(u,(function(t){return!t.get("derived")&&t.isTypeOf("EAttribute")&&e.isSet(t.get("name"))})),h=r.filter(u,(function(t){return!t.get("derived")&&t.isTypeOf("EReference")&&!t.get("containment")&&e.isSet(t.get("name"))}));e._id&&(o+=' xmi:id="'+e._id+'"'),r.each(p,(function(t){var n,r=t.get("name"),i=e.get(r);void 0!==i&&"false"!==i&&(o+=" "+r+'="',o+="string"==typeof i?(n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},i.replace(/[&<>"']/g,(function(e){return n[e]}))):i,o+='"')}));var d=[];if(r.each(h,(function(t){var n=e.get(t.get("name")),a=n instanceof i.EList?n.array():n?[n]:[],s=r.filter(a,(function(t){return t.eResource()!==e.eResource()}));s.length&&d.push({feature:t,refs:s});var c=r.difference(a,s),l=r.map(c,(function(e){return e.fragment()}));l.length&&(o+=" "+t.get("name")+'="'+l.join(" ")+'"')})),0===e.eContents().length&&0===d.length)o+="/>";else{o+=">",r.each(d,(function(e){var t,n=e.feature,i=e.refs,a=n.get("eType").get("abstract");r.each(i,(function(e){o+="<"+n.get("name"),a&&(t=e.eClass.eContainer.get("nsPrefix"),o+=' xsi:type="'+(t?t+":":"")+e.eClass.get("name")+'"'),o+=' href="'+e.eURI()+'" />'}))}));var f=r.filter(u,(function(t){return t.isTypeOf("EReference")&&t.get("containment")&&e.isSet(t.get("name"))}));r.each(f,(function(t){var n=e.get(t.get("name"));1!==t.get("upperBound")?n.each((function(e){l(e)})):l(n)})),o+="</"+s+">"}return o}if(1===s.length)n=s[0].eClass.eContainer.get("nsPrefix"),a=s[0].eClass.eContainer.get("nsURI"),l(s[0],!0);else{var u={};for(var p in s)n=s[p].eClass.eContainer.get("nsPrefix"),a=s[p].eClass.eContainer.get("nsURI"),u[n]=a,l(s[p]);var h="";for(var d in u)h+=" xmlns:"+d+'="'+u[d]+'"';o='<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"'+h+">"+o+"</xmi:XMI>"}return o='<?xml version="1.0" encoding="UTF-8"?>\n'+(o=t?function(e){var t=/(>)(<)(\/*)/g,n=/ *([^ ].*[^ ]) *\n/g,r=/(<.+>)(.+\n)/g;e=e.replace(t,"$1\n$2$3").replace(n,"$1\n").replace(r,"$1\n$2");for(var i="",a=e.split("\n"),o=0,s="other",c={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},l=0;l<a.length;l++){var u=a[l],p=Boolean(u.match(/<.+\/>/)),h=Boolean(u.match(/<\/.+>/)),d=Boolean(u.match(/<[^!].*>/)),f=p?"single":h?"closing":d?"opening":"other",g=s+"->"+f;s=f;var m="";o+=c[g];for(var v=0;v<o;v++)m+="    ";i+=m+u+"\n"}return i}(o):o)}}}).call(this)},qMyy:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ue}));var r=n("D57K"),i=n("Jzy8"),a=n("5xGT"),o=n("xnGY"),s=n("hX56"),c=n("J+dc"),l=n("xVbo"),u=n("TLy2"),p=n("oyCe"),h=n("EM62"),d=function(e){function t(t,n){var r=e.call(this)||this;return r.modelSubManager=t,r.dataStore=n,r}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var e=this;return this.dataStore.findOneRaw(p.a,{id:this.resourceId}).pipe(Object(c.a)(1),Object(l.a)((function(e){return e&&e.project&&"home"!==e.project})),Object(u.a)((function(t){return e.resultData={projectId:t.project},e.modelSubManager.start(i.D,t.project)})))},t.\u0275fac=function(e){return new(e||t)(h.pc(o.d),h.pc(s.b))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[o.d,s.b])],t)}(a.b);Object.defineProperty(d,"name",{value:"StartDiagramProjectSubscription"});var f=n("ktZS"),g=n("sEIs"),m=n("8j5Y"),v=function(e){function t(t,n){var r=e.call(this,n)||this;return r.modelSubManager=t,r.router=n,r}return Object(r.e)(t,e),t.prototype.execute=function(){var e=this;return this.resultData=this.data,this.modelSubManager.start(f.a,this.data.status.input.resourceId).pipe(Object(u.a)((function(e){return e.status})),Object(l.a)((function(e){return e.subStatus!==o.f.created})),Object(c.a)(1),Object(m.a)((function(t){e.navigateToRoute(e.data.status),t.subStatus===o.f.errored&&e.log.error("There was an error starting the diagram subscription : "+t.error)})))},t.\u0275fac=function(e){return new(e||t)(h.pc(o.d),h.pc(g.d))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[o.d,g.d])],t)}(a.g);Object.defineProperty(v,"name",{value:"StartDiagramSubscription"});var b=n("yn08"),y=n("C5+t"),x=function(e){function t(t){var n=e.call(this)||this;return n.state=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{status:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return a.m.get("DISABLE_WEBSOCKET_CONNECTION")?["IStateChangeCommand"]:["IStateChangeCommand","IMessageCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return this.data},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var e=this,t=this.data.status.input.action;return this.data={Realtime:{action:""}},t===b.a.Edit&&(this.data.Realtime.action="ACTIVITIES.EDITING"),t===b.a.View&&(this.data.Realtime.action="ACTIVITIES.VIEWING"),this.state.getShared().forEach((function(t){return e.data[t]=e.state.get(t)})),!0},t.\u0275fac=function(e){return new(e||t)(h.pc(a.Ib))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[a.Ib])],t)}(y.b);Object.defineProperty(x,"name",{value:"BeginStateSync"});var C=n("qZtG"),w=n("g6G6"),k=n("i9xl"),S=n("6Oco"),O=n("4y1S"),E=function(e){function t(t,n){var r=e.call(this)||this;return r.dataStore=t,r.modelSubManager=n,r}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{collabs:!0,diagramId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.collabs.forEach((function(e){e.addedStatus="pending",e.email=e.email.toLowerCase()}))},t.prototype.execute=function(){return this.dataStore.getModelStore(i.j).storageMergeCollabs(this.data.diagramId,this.data.collabs)},t.prototype.executeResult=function(e){var t=this,n=this.dataStore.getModelStore(i.j),a=[],s=e.collabs;return s.forEach((function(e,n){e&&(a.push(t.modelSubManager.start(O.w,e.id).pipe(Object(u.a)((function(e){return e.status})),Object(l.a)((function(e){return e.subStatus!==o.f.created})),Object(c.a)(1))),t.data&&(s[n].email=t.data.collabs[n].email))})),s.length>0?Object(C.a)(w.a.apply(void 0,Object(r.j)(a)),Object(k.a)((function(){return n.storageMergeCollabs(t.resourceId,s.filter((function(e){return null!==e})))})),Object(k.a)((function(){return t.removePendingCollabs()}))):S.a},t.prototype.revert=function(){return this.removePendingCollabs()},t.prototype.onError=function(e){if(e.code)throw e},t.prototype.removePendingCollabs=function(){return this.dataStore.getModelStore(i.j).storageFilterCollabs(this.resourceId,(function(e){return"pending"===e.addedStatus}))},t.\u0275fac=function(e){return new(e||t)(h.pc(s.b),h.pc(o.d))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[s.b,o.d])],t)}(y.b);Object.defineProperty(E,"name",{value:"AddDiagramCollaborators"});var _=n("ROBh"),I=n("YtkY"),P=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{collabs:!0,diagramId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.previousData={},this.dataStore.getModelStore(i.j).getCollabs(this.data.diagramId).pipe(Object(m.a)((function(t){e.previousData.collabs=t.filter((function(t){return-1!==e.data.collabs.map((function(e){return e.id})).indexOf(t.id)}))})))},t.prototype.execute=function(){var e=this,t=this.dataStore.getModelStore(i.j);return Object(_.a)(this.previousData.collabs).pipe(Object(I.a)((function(t){var n=[];return e.data.collabs.forEach((function(e){var r=t.filter((function(t){return t.id===e.id}))[0];r.role=e.role,n.push(r)})),n})),Object(u.a)((function(n){return t.storageMergeCollabs(e.data.diagramId,n)})))},t.prototype.executeResult=function(e){return this.dataStore.getModelStore(i.j).storageMergeCollabs(this.resourceId,e.collabs)},t.prototype.revert=function(){return this.dataStore.getModelStore(i.j).storageMergeCollabs(this.data.diagramId,this.previousData.collabs)},t.\u0275fac=function(e){return new(e||t)(h.pc(s.b))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(P,"name",{value:"ChangeDiagramCollaborators"});var T=function(e){function t(t,n){var r=e.call(this)||this;return r.dataStore=t,r.modelSubManager=n,r}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{diagramId:!0,collabIds:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.previousData={},this.dataStore.getModelStore(i.j).getCollabs(this.data.diagramId).pipe(Object(m.a)((function(t){e.previousData.collabs=t.filter((function(t){return-1!==e.data.collabIds.indexOf(t.id)}))})))},t.prototype.execute=function(){var e=this;return this.dataStore.getModelStore(i.j).storageFilterCollabs(this.data.diagramId,(function(t){return e.data.collabIds.indexOf(t.id)>-1}))},t.prototype.executeResult=function(e){var t=this.dataStore.getModelStore(i.j),n=[];this.previousData&&(n=this.previousData.collabs.filter((function(t){return-1===e.collabIds.indexOf(t.id)})));var r=Object(S.b)();n.length>0&&(r=t.storageMergeCollabs(this.data.diagramId,n));var a=t.storageFilterCollabs(this.resourceId,(function(t){return e.collabIds.indexOf(t.id)>-1})),o=this.stopSubscriptions(e.collabIds);return Object(w.a)(r,a,o)},t.prototype.revert=function(){return this.dataStore.getModelStore(i.j).storageMergeCollabs(this.data.diagramId,this.previousData.collabs)},t.prototype.stopSubscriptions=function(e){var t=this;return Object(_.a)(e).pipe(Object(u.a)((function(e){var n=[];return e.forEach((function(e){e&&n.push(t.modelSubManager.stop(e))})),w.a.apply(void 0,Object(r.j)(n))})))},t.\u0275fac=function(e){return new(e||t)(h.pc(s.b),h.pc(o.d))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[s.b,o.d])],t)}(y.b);Object.defineProperty(T,"name",{value:"RemoveDiagramCollaborators"});var A=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{diagramId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return!0},t.prototype.executeResult=function(e){return this.dataStore.getModelStore(i.j).replaceOwner(this.resourceId,e.owner)},t.\u0275fac=function(e){return new(e||t)(h.pc(s.b))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(A,"name",{value:"TransferDiagramOwnership"});var M=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{diagramId:!0,lastChangeId:!1,name:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return!0},t.prototype.executeResult=function(e){var t=this.dataStore.getModelStore(i.j);return e.snapshot?t.insertHistoryItem(this.resourceId,e.snapshot):t.renameHistoryItem(this.resourceId,this.data.lastChangeId,this.data.name)},t.\u0275fac=function(e){return new(e||t)(h.pc(s.b))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(M,"name",{value:"CreateDiagramSnapshot"});var D=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{privacy:!0,diagramId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.previousData={},this.dataStore.getModelStore(i.j).getPrivacy(this.data.diagramId).pipe(Object(m.a)((function(t){return e.previousData.privacy=t})))},t.prototype.execute=function(){var e=this,t=this.dataStore.getModelStore(i.j);return Object(_.a)(this.previousData.privacy).pipe(Object(I.a)((function(t){return t.role=e.data.privacy.role,t.level=e.data.privacy.level,t})),Object(u.a)((function(n){return t.storgaeUpdatePrivacy(e.data.diagramId,n)})))},t.prototype.executeResult=function(e){return this.dataStore.getModelStore(i.j).storgaeUpdatePrivacy(this.resourceId,e.privacy)},t.prototype.revert=function(){return this.dataStore.getModelStore(i.j).storgaeUpdatePrivacy(this.data.diagramId,this.previousData.privacy)},t.\u0275fac=function(e){return new(e||t)(h.pc(s.b))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(D,"name",{value:"ChangeDiagramPrivacy"});var j=function(e){function t(t,n,r){var i=e.call(this)||this;return i.modelSubManager=t,i.dataStore=n,i.state=r,i}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var e=this;return this.dataStore.findOneRaw(p.a,{id:this.resourceId}).pipe(Object(c.a)(1),Object(l.a)((function(e){return!!(e&&e.collabs&&e.collabs.length>0)})),Object(u.a)((function(t){return w.a.apply(void 0,Object(r.j)(t.collabs.map((function(t){return t.role===i.g.OWNER&&t.id!==e.state.get("CurrentUser")?e.modelSubManager.start(O.z,t.id):e.modelSubManager.start(O.w,t.id)}))))})))},t.\u0275fac=function(e){return new(e||t)(h.pc(o.d),h.pc(s.b),h.pc(a.Ib))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[o.d,s.b,a.Ib])],t)}(a.b);Object.defineProperty(j,"name",{value:"StartDiagramCollabSubscriptions"});var N=n("s2Ay"),R=n("QoSw"),L=n("GoAz"),F=n("etrl"),B=n.n(F),V=n("19Zn"),z=n("Bbfy"),U=function(e){function t(t,n,r,i,a){var o=e.call(this)||this;return o.ll=t,o.resources=n,o.notifierController=r,o.translate=i,o.state=a,o.maxClientExportWidthOrHeight=6e3,o.maxServerExportWidth=32e3,o.notificationMessages=new z.a(o.translate),o}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"isOffline",{get:function(){return this.state.get(y.c)===y.c.OFFLINE},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return this.triggerDownload()},t.prototype.prepareSvgData=function(){var e=this,t=this.ll.forCurrentObserver(this.eventData.scenario===a.A.PREVIEW),n=this.createDiagramSVGView(t);return t.pipe(Object(c.a)(1),Object(u.a)((function(e){return e.getDiagramOnce()})),Object(u.a)((function(t){return Object(C.a)(Object(k.a)((function(){return n.populateDiagram()})),Object(k.a)((function(){var r=0===e.state.get("Selected").length?void 0:e.state.get("Selected");return n.toSvg(r).pipe(Object(c.a)(1),Object(I.a)((function(e){return{svg:e,name:t.name,id:t.id}})))})))})))},t.prototype.createDiagramSVGView=function(e){return new V.m(e,this.resources,this.state)},t.prototype.triggerDownload=function(){if("file"===this.data.format){var e=new Blob([this.data.content],{type:this.data.type});return B()(e,this.data.name),Object(_.a)(!0)}if("blob"===this.data.format)return B()(this.data.content,this.data.name),Object(_.a)(!0)},t.prototype.isDiagramExceededMaxClientExport=function(e,t){return e>this.maxClientExportWidthOrHeight||t>this.maxClientExportWidthOrHeight},t.prototype.showExportNotification=function(){var e=this.notificationMessages.getNotificationMessage(z.b.IMAGE_EXPORT_STARTED);this.notifierController.show(z.b.IMAGE_EXPORT_STARTED,e.component,e.type,e.options,e.collapsed)},t.prototype.showLargeExportNeedInternetNotification=function(){var e=this.notificationMessages.getNotificationMessage(z.b.IMAGE_EXPORT_OFFLINE);this.notifierController.show(z.b.IMAGE_EXPORT_OFFLINE,e.component,e.type,e.options,e.collapsed)},t.prototype.showErrorNotification=function(){var e=this.notificationMessages.getNotificationMessage(z.b.IMAGE_EXPORT_FAILED);this.notifierController.show(z.b.IMAGE_EXPORT_FAILED,e.component,e.type,e.options,e.collapsed)},t.prototype.hideExportNotification=function(){this.notifierController.hide(z.b.IMAGE_EXPORT_STARTED)},t.prototype.fetchDiagramFromServer=function(e,t){var n=this,r=Math.min(this.maxServerExportWidth,Math.round(t));return Object(_.a)(this.isOffline).pipe(Object(l.a)((function(e){return e&&n.showLargeExportNeedInternetNotification(),!e})),Object(u.a)((function(){return n.prepareSvgData().pipe(Object(m.a)((function(){return n.showExportNotification()})),Object(u.a)((function(t){return Object(L.a)(fetch(a.m.get("SVG_TO_RASTER_URL"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({type:e,width:r,svg:t.svg,id:t.id})}))})),Object(u.a)((function(e){return Object(L.a)(e.blob())})))})))},t.\u0275fac=function(e){return new(e||t)(h.pc(R.a),h.pc(a.W),h.pc(a.kb),h.pc(N.e),h.pc(a.Ib))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[R.a,a.W,a.kb,N.e,a.Ib])],t)}(a.b);Object.defineProperty(U,"name",{value:"AbstractDiagramExportCommand"});var G=n("nsO7"),H=function(e){function t(t,n,r,i,a){var o=e.call(this,t,r,i,a,n)||this;return o.state=n,o}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var t=this;return this.ll.forCurrent(this.eventData.scenario===a.A.PREVIEW).getDiagramOnce().pipe(Object(u.a)((function(e){var n=0===t.state.get("Selected").length?e.getBounds():e.getBounds(t.state.get("Selected")),r=n.width+40,i=n.height+40;if(t.isDiagramExceededMaxClientExport(r,i))return t.fetchDiagramFromServer("png",2*r).pipe(Object(I.a)((function(t){return{name:e.name,blob:t}})));var a=t.state.get("Selected"),o=t.state.get("ShapeViews"),s=t.state.get("DiagramCanvas");s.removeAllChildren(),o.filter((function(e){return!!Object(G.isEmpty)(a)||a.includes(e.name)})).forEach((function(e){e.visible=!0,s.addChild(e)})),s.cache(n.x-20,n.y-20,r,i,2);var c=s.getCacheDataURL();s.uncache();var l=t.state.get("ActiveShapes");return s.removeAllChildren(),o.filter((function(e){return l.includes(e.name)})).forEach((function(e){e.visible=!0,s.addChild(e)})),s.update(),Object(_.a)({name:e.name,blob:c})})),Object(m.a)((function(e){t.data={content:e.blob,name:e.name+".png",type:"image/png",format:"blob"}})),Object(u.a)((function(){return e.prototype.execute.call(t)}))).subscribe({complete:function(){return t.hideExportNotification()},error:function(){t.hideExportNotification(),t.showErrorNotification()}}),Object(_.a)({})},t.\u0275fac=function(e){return new(e||t)(h.pc(R.a),h.pc(a.Ib),h.pc(a.W),h.pc(a.kb),h.pc(N.e))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[R.a,a.Ib,a.W,a.kb,N.e])],t)}(U);Object.defineProperty(H,"name",{value:"ExportAsPng"});var Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.prepareSvgData().pipe(Object(m.a)((function(t){return e.data={content:t.svg,name:t.name+".svg",type:"image/svg+xml",format:"file"}})))},t.\u0275fac=function(e){return q(e||t)},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)()],t)}(U),q=h.nc(Y);Object.defineProperty(Y,"name",{value:"ExportAsSvg"});var W=n("P1E4"),X=function(e){function t(t,n,r,i){var a=e.call(this,n,r)||this;return a.state=t,a.dataStore=n,a.modelSubManager=r,a.router=i,a}return Object(r.e)(t,e),t.prototype.executeResult=function(t){var n=this;return e.prototype.executeResult.call(this,t).pipe(Object(m.a)((function(){n.resourceId===n.state.get("CurrentDiagram")&&n.router.navigateByUrl("/")})))},t.\u0275fac=function(e){return new(e||t)(h.pc(a.Ib),h.pc(s.b),h.pc(o.d),h.pc(g.d))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[a.Ib,s.b,o.d,g.d])],t)}(i.a);Object.defineProperty(X,"name",{value:"DeleteDiagram"});var K=n("d9KY"),Z=function(e){function t(t,n,r,i,a){var o=e.call(this,t,r,i,a,n)||this;return o.state=n,o}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var t=this;return this.ll.forCurrent(this.eventData.scenario===a.A.PREVIEW).getDiagramOnce().pipe(Object(u.a)((function(e){var n=0===t.state.get("Selected").length?e.getBounds():e.getBounds(t.state.get("Selected")),r=n.width+40,i=n.height+40;if(t.isDiagramExceededMaxClientExport(r,i))return t.fetchDiagramFromServer("jpg",2*r).pipe(Object(I.a)((function(t){return{name:e.name,blob:t}})));var a=t.state.get("Selected"),o=t.state.get("ShapeViews"),s=t.state.get("DiagramCanvas");s.removeAllChildren(),o.filter((function(e){return!!Object(G.isEmpty)(a)||a.includes(e.name)})).forEach((function(e){e.visible=!0,s.addChild(e)})),s.cache(n.x-20,n.y-20,r,i,2);var c=s.cacheCanvas,l=c.cloneNode(!0),u=l.getContext("2d");u.fillStyle="#FFF",u.fillRect(0,0,l.width,l.height),u.drawImage(c,0,0);var p=l.toDataURL("image/jpg",1);s.uncache();var h=t.state.get("ActiveShapes");return s.removeAllChildren(),o.filter((function(e){return h.includes(e.name)})).forEach((function(e){e.visible=!0,s.addChild(e)})),s.update(),Object(_.a)({name:e.name,blob:p})})),Object(m.a)((function(e){t.data={content:e.blob,name:e.name+".jpg",type:"image/jpg",format:"blob"}})),Object(u.a)((function(){return e.prototype.execute.call(t)}))).subscribe({complete:function(){return t.hideExportNotification()},error:function(){t.hideExportNotification(),t.showErrorNotification()}}),Object(_.a)({})},t.\u0275fac=function(e){return new(e||t)(h.pc(R.a),h.pc(a.Ib),h.pc(a.W),h.pc(a.kb),h.pc(N.e))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[R.a,a.Ib,a.W,a.kb,N.e])],t)}(U);Object.defineProperty(Z,"name",{value:"ExportAsJpeg"});var $=n("fqe/"),Q=n("vobO"),J=function(e){function t(t){var n=e.call(this)||this;return n.auth=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IGraphqlRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpHeaders",{get:function(){return new Q.c({"creately-gravity-token":this.auth.token})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return a.m.get("GRAPHQL_API_BASE_URL")},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return Object(S.b)()},t.prototype.prepareData=function(){var e='{\n            document(id:"'+this.data.resourceId+'"){\n            image{\n              svg\n            }\n        }}';this.data.query=e},t.\u0275fac=function(e){return new(e||t)(h.pc($.a))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[$.a])],t)}(a.f);Object.defineProperty(J,"name",{value:"FetchEmbedImageUrl"});var ee=n("X0jn"),te=n("Wpmq"),ne=n("3+4Q"),re=n("HM3f"),ie=function(e){function t(t,n,r,i,a,o,s){var c=e.call(this)||this;return c.userLocator=t,c.notifierController=n,c.translate=r,c.ll=i,c.v2d=a,c.dataStore=o,c.state=s,c}var n;return Object(r.e)(t,e),n=t,Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),t.handleNotificationClick=function(e,t,n){if(e.parentId)n.findOneLatest(ne.a,{id:e.parentId}).pipe(Object(m.a)((function(e){var n={visible:!0,threadId:e.id,comments:[e]};t.set("CommentThreadData",n)}))).subscribe();else{var r={visible:!0,threadId:e.id,comments:[e]};t.set("CommentThreadData",r)}},Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.data.comment.diagramId=this.resourceId,this.data.comment.userId=this.state.get("CurrentUser"),this.data.comment.added=Date.now(),this.data.comment.parentId?(delete this.data.comment.shapeId,delete this.data.comment.locOnDiagram,Object(S.b)()):this.data.comment.shapeId?this.ll.forCurrent(!1).getShapeOnce(this.data.comment.shapeId).pipe(Object(m.a)((function(t){if(t.type!==ee.r.Connector){if(!e.data.comment.locOnDiagram){var n=t.bounds;e.data.comment.locOnDiagram={x:n.centerX,y:n.centerY}}var r=t.getPositionOnShape(e.data.comment.locOnDiagram,5);e.data.comment.locOnShape=r}else delete e.data.comment.shapeId}))):Object(S.b)()},t.prototype.execute=function(){var e=this;return Object(C.a)(this.dataStore.insert(ne.a,this.data.comment),Object(k.a)((function(){return e.dataStore.findOne(ne.a,e.data.comment).pipe(Object(c.a)(1),Object(m.a)((function(t){if(!t.parentId){var n=e.state.get("CommentThreadData").parentSelector,r={visible:!e.data.close,threadId:t.id,parentSelector:n,comments:[t]};e.state.set("CommentThreadData",r)}})))})))},t.prototype.executeResult=function(){var e=Object(r.a)(Object(r.a)({},this.resultData.comment),{diagramId:this.resourceId,comitted:!0});return Object(re.b)(this.handleNotification(),this.dataStore.insert(ne.a,e))},t.prototype.revert=function(){return this.dataStore.remove(ne.a,{id:this.data.comment.id,diagramId:this.resourceId})},t.prototype.handleNotification=function(){var e=this;return this.state.get("CurrentUser")!==this.resultData.comment.userId&&this.state.get("CurrentDiagram")===this.resultData.comment.diagramId?this.userLocator.getUserInfo(this.resultData.comment.userId).pipe(Object(c.a)(1),Object(m.a)((function(t){var r=e.resultData.comment.parentId?"REPLIED":"ADDED",i={inputs:{heading:t.firstName+" "+e.translate.instant("NOTIFICATIONS.COMMENT."+r),description:e.resultData.comment.comment,user:t,notificationAction:{action:n.handleNotificationClick,args:[e.resultData.comment,e.state,e.dataStore]},autoDismiss:!0,dismissAfter:3e3}};e.notifierController.show(z.b.COMMENT_ADDED,a.i,a.jb.Success,i)}))):Object(_.a)({})},t.\u0275fac=function(e){return new(e||t)(h.pc(O.x),h.pc(a.kb),h.pc(N.e),h.pc(R.a),h.pc(te.a),h.pc(s.b),h.pc(a.Ib))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=n=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[O.x,a.kb,N.e,R.a,te.a,s.b,a.Ib])],t)}(y.b);Object.defineProperty(ie,"name",{value:"AddComment"});var ae=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{commentId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.previousData={},this.dataStore.findOne(ne.a,{id:this.data.commentId,diagramId:this.resourceId}).pipe(Object(c.a)(1),Object(m.a)((function(t){return e.previousData.comment=t.comment})))},t.prototype.execute=function(){return this.dataStore.update(ne.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{deleted:(new Date).getTime(),comitted:!1},$unset:{comment:""}})},t.prototype.executeResult=function(e){return this.dataStore.update(ne.a,{id:this.resultData.comment.id,diagramId:this.resourceId},{$set:{deleted:e.comment.deleted,comitted:!0},$unset:{comment:""}})},t.prototype.revert=function(){return this.dataStore.update(ne.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{comment:this.previousData.comment},$unset:{deleted:""}})},t.\u0275fac=function(e){return new(e||t)(h.pc(s.b))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(ae,"name",{value:"DeleteComment"});var oe=n("zd2y"),se=function(e){function t(t,n){var r=e.call(this)||this;return r.resourceId=t,r.datastore=n,r}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"subscription",{get:function(){return"Comment"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelType",{get:function(){return ne.a},enumerable:!1,configurable:!0}),t.prototype.getLatestSyncedTime=function(){var e={id:this.resourceId};return this.datastore.findOneLatest(ne.a,e,{sort:{lastUpdated:-1}}).pipe(Object(I.a)((function(e){return e?e.lastUpdated:null})))},t}(o.b),ce=function(e){function t(t,n){var r=e.call(this)||this;return r.commentSub=t,r.datastore=n,r}return Object(r.e)(t,e),t.prototype.execute=function(){var e=new se(this.resourceId,this.datastore);return this.commentSub.start(e),!0},t.\u0275fac=function(e){return new(e||t)(h.pc(oe.a),h.pc(s.b))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[oe.a,s.b])],t)}(a.b);Object.defineProperty(ce,"name",{value:"StartDiagramCommentSubscription"});var le=function(e){function t(t,n,r,i,a){var o=e.call(this)||this;return o.userLocator=t,o.notifierController=n,o.translate=r,o.state=i,o.dataStore=a,o}var n;return Object(r.e)(t,e),n=t,Object.defineProperty(t,"dataDefinition",{get:function(){return{commentId:!0,userId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),t.handleNotificationClick=function(e,t,n){if(e.parentId)n.findOneLatest(ne.a,{id:e.parentId}).pipe(Object(m.a)((function(e){var n={visible:!0,threadId:e.id,comments:[e]};t.set("CommentThreadData",n)}))).subscribe();else{var r={visible:!0,threadId:e.id,comments:[e]};t.set("CommentThreadData",r)}},Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return this.dataStore.update(ne.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{resolved:(new Date).getTime(),resolvedBy:this.data.userId,comitted:!1}})},t.prototype.executeResult=function(e){return Object(re.b)(this.handleNotification(),this.dataStore.update(ne.a,{id:this.resultData.comment.id,diagramId:this.resourceId},{$set:{resolved:this.resultData.comment.resolved,resolvedBy:this.resultData.comment.resolvedBy,comitted:!0}}))},t.prototype.revert=function(){return this.dataStore.update(ne.a,{id:this.data.commentId,diagramId:this.resourceId},{$unset:{resolved:"",resolvedBy:""}})},t.prototype.handleNotification=function(){var e=this;return this.state.get("CurrentUser")!==this.resultData.comment.resolvedBy&&this.state.get("CurrentDiagram")===this.resultData.comment.diagramId?this.userLocator.getUserInfo(this.resultData.comment.resolvedBy).pipe(Object(c.a)(1),Object(m.a)((function(t){var r={inputs:{heading:t.firstName,description:e.translate.instant("NOTIFICATIONS.COMMENT.RESOLVED"),user:t,notificationAction:{action:n.handleNotificationClick,args:[e.resultData.comment,e.state,e.dataStore]},autoDismiss:!0,dismissAfter:3e3}};e.notifierController.show(z.b.COMMENT_RESOLVED,a.i,a.jb.Success,r)}))):Object(_.a)({})},t.\u0275fac=function(e){return new(e||t)(h.pc(O.x),h.pc(a.kb),h.pc(N.e),h.pc(a.Ib),h.pc(s.b))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=n=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[O.x,a.kb,N.e,a.Ib,s.b])],t)}(y.b);Object.defineProperty(le,"name",{value:"ResolveComment"});var ue=function(e){function t(t,n,r){var i=e.call(this)||this;return i.ll=t,i.resources=n,i.state=r,i}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IHttpCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"resultType",{get:function(){return{result:Object}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return a.m.get("PDF_EXPORT_URL")},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;this.data={};var t=this.ll.forCurrent(this.eventData.scenario===a.A.PREVIEW),n=this.createDiagramSVGView(t);return t.getDiagramOnce().pipe(Object(u.a)((function(t){return Object(C.a)(Object(k.a)((function(){return n.populateDiagram()})),Object(k.a)((function(){return n.toSvgFrames().pipe(Object(c.a)(1),Object(m.a)((function(n){e.data.data=n,e.data.id=t.id})))})))})))},t.prototype.execute=function(){return Object(S.b)()},t.prototype.createDiagramSVGView=function(e){return new V.m(Object(_.a)(e),this.resources,this.state)},t.\u0275fac=function(e){return new(e||t)(h.pc(R.a),h.pc(a.W),h.pc(a.Ib))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[R.a,a.W,a.Ib])],t)}(a.f);Object.defineProperty(ue,"name",{value:"GeneratePdf"});var pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.ll.forCurrent(this.eventData.scenario===a.A.PREVIEW).getDiagramOnce().pipe(Object(m.a)((function(t){e.data={content:e.data.data,name:t.name+".pdf",type:"application/pdf",format:"blob"}})))},t.\u0275fac=function(e){return he(e||t)},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)()],t)}(U),he=h.nc(pe);Object.defineProperty(pe,"name",{value:"ExportAsPdf"});var de=n("EmgI"),fe=function(e){function t(t,n,r,i,a,o){var s=e.call(this,t,n,r,i,a)||this;return s.csvExporter=o,s}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.csvExporter.exportCSV().pipe(Object(m.a)((function(t){return e.data={content:t.data,name:t.name+".csv",type:"text/csv",format:"file"}})))},t.\u0275fac=function(e){return new(e||t)(h.pc(R.a),h.pc(a.W),h.pc(a.kb),h.pc(N.e),h.pc(a.Ib),h.pc(de.a))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[R.a,a.W,a.kb,N.e,a.Ib,de.a])],t)}(U);Object.defineProperty(fe,"name",{value:"ExportAsCsv"});var ge=n("4t+C"),me=function(e){function t(t,n,r,i,a,o){var s=e.call(this,t,n,r,i,a)||this;return s.ecoreExporter=o,s}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["ICommand"]},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.ecoreExporter.exportEcoreModel(!0).pipe(Object(m.a)((function(t){return e.data={content:t.data,name:t.name+".xmi",type:"application/xml",format:"file"}})))},t.\u0275fac=function(e){return new(e||t)(h.pc(R.a),h.pc(a.W),h.pc(a.kb),h.pc(N.e),h.pc(a.Ib),h.pc(ge.a))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[R.a,a.W,a.kb,N.e,a.Ib,ge.a])],t)}(U);Object.defineProperty(me,"name",{value:"ExportAsXmi"});var ve=function(e){function t(t,n,r,i,a,o){var s=e.call(this,t,n,r,i,a)||this;return s.ecoreExporter=o,s}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{type:!0}},enumerable:!1,configurable:!0}),t.prototype.execute=function(){var t=this;return this.fetchCodeFromServer(this.data.type).pipe(Object(m.a)((function(e){return t.data={content:e.blob,name:e.name+".zip",type:"application/zip",format:"blob"}})),Object(u.a)((function(){return e.prototype.execute.call(t)})))},t.prototype.fetchCodeFromServer=function(e){return this.ecoreExporter.exportEcoreModel(!0).pipe(Object(u.a)((function(t){return Object(L.a)(fetch(a.m.get("CODE_GENERATOR_URL"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({type:e,model:t.data})})).pipe(Object(u.a)((function(e){return Object(L.a)(e.blob())})),Object(I.a)((function(e){return{blob:e,name:t.name}})))})))},t.\u0275fac=function(e){return new(e||t)(h.pc(R.a),h.pc(a.W),h.pc(a.kb),h.pc(N.e),h.pc(a.Ib),h.pc(ge.a))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[R.a,a.W,a.kb,N.e,a.Ib,ge.a])],t)}(U);Object.defineProperty(ve,"name",{value:"ExportAsCode"});var be=function(e){function t(t){var n=e.call(this)||this;return n.state=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{state:!1,keyboardEvent:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return{MouseControlState:this.data.state}},enumerable:!1,configurable:!0}),t.prototype.execute=function(){if(!this.data)return!1;if(this.data.keyboardEvent&&"keydown"===this.data.keyboardEvent.type){var e=this.state.get("CommentThreadData");this.data.keyboardEvent.keyCode===ee.j.C&&e&&!e.visible?(this.data={state:b.b.Comment},a.Kb.track("right.comment.add.click",{value1Type:"trigger",value1:"c"})):this.data.keyboardEvent.keyCode===ee.j.Space?this.data={state:b.b.Pan}:this.data.keyboardEvent.keyCode===ee.j.A&&(this.data={state:b.b.Pen})}else this.data.keyboardEvent&&"keyup"===this.data.keyboardEvent.type&&(this.data={state:b.b.Normal});return!!this.data.state},t.\u0275fac=function(e){return new(e||t)(h.pc(a.Ib))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[a.Ib])],t)}(a.b);Object.defineProperty(be,"name",{value:"ChangeMouseControlState"});var ye=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{commentIds:!0,userId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return this.dataStore.update(ne.a,{id:{$in:this.data.commentIds},diagramId:this.resourceId},{$set:{seenBy:[this.data.userId],comitted:!1}})},t.prototype.executeResult=function(){return this.dataStore.update(ne.a,{id:{$in:this.data.commentIds},diagramId:this.resourceId},{$set:{comitted:!0}})},t.\u0275fac=function(e){return new(e||t)(h.pc(s.b))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(ye,"name",{value:"MarkCommentSeen"});var xe=function(e){function t(t){var n=e.call(this)||this;return n.dataStore=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{commentId:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return 2},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){var e=this;return this.previousData={},this.dataStore.findOne(ne.a,{id:this.data.commentId,diagramId:this.resourceId}).pipe(Object(c.a)(1),Object(m.a)((function(t){return e.previousData.comment=t.comment})))},t.prototype.execute=function(){return this.dataStore.update(ne.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{comment:this.data.comment,edited:(new Date).getTime(),comitted:!1}})},t.prototype.executeResult=function(e){return this.dataStore.update(ne.a,{id:this.resultData.comment.id,diagramId:this.resourceId},{$set:{comment:e.comment.comment,edited:e.comment.edited,comitted:!0}})},t.prototype.revert=function(){return this.dataStore.update(ne.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{comment:this.previousData.comment},$unset:{edited:""}})},t.\u0275fac=function(e){return new(e||t)(h.pc(s.b))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[s.b])],t)}(y.b);Object.defineProperty(xe,"name",{value:"EditComment"});var Ce=function(e){function t(t){var n=e.call(this)||this;return n.auth=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IGraphqlRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpHeaders",{get:function(){return new Q.c({"creately-gravity-token":this.auth.token})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return a.m.get("GRAPHQL_API_BASE_URL")},enumerable:!1,configurable:!0}),t.prototype.execute=function(){return Object(S.b)()},t.prototype.prepareData=function(){var e='mutation{\n            documentResetEmbed(id:"'+this.data.resourceId+'")\n        }';this.data.query=e},t.\u0275fac=function(e){return new(e||t)(h.pc($.a))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[$.a])],t)}(a.f);Object.defineProperty(Ce,"name",{value:"ResetEmbedImageToken"});var we=function(e){function t(t,n){var r=e.call(this)||this;return r.auth=t,r.state=n,r}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IGraphqlRestCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpHeaders",{get:function(){return new Q.c({"creately-gravity-token":this.auth.token})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return a.m.get("GRAPHQL_API_BASE_URL")},enumerable:!1,configurable:!0}),t.prototype.execute=function(){if(this.state.get("CurrentUser"))return S.a},t.prototype.prepareData=function(){this.data={};this.data.query="{\n            user{\n              organization{\n                subscription{\n                    cancelScheduled,\n                    cancelled,\n                    extendSubOfferStart,\n                    extendSubOfferExpired,\n                    extendSubOfferClaim,\n                    paymentFailedCount,\n                    planId,\n                }\n              }\n            }\n        }"},t.\u0275fac=function(e){return new(e||t)(h.pc($.a),h.pc(a.Ib))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[$.a,a.Ib])],t)}(a.f);Object.defineProperty(we,"name",{value:"FetchUserSubscriptionData"});var ke=n("zuHe"),Se=n("icO7"),Oe=n("NNJu"),Ee=n("dKf+"),_e=n("5Jpj"),Ie=n("z3n9"),Pe=n("3vL/"),Te=function(e){function t(t,n,r,i,a,o,s,c,l){var u=e.call(this,t,n,r,i,a,o)||this;return u.userLocator=s,u.translate=c,u.notifierController=l,u}return Object(r.e)(t,e),t.prototype.executeResult=function(){return Object(re.b)(e.prototype.executeResult.call(this),this.handleNotification())},t.prototype.handleNotification=function(){var e=this;if(this.state.get("CurrentDiagram")===this.resourceId){if(this.state.get("CurrentUser")!==this.resultData.change.userId)return this.userLocator.getUserInfo(this.resultData.change.userId).pipe(Object(c.a)(1),Object(m.a)((function(t){var n={inputs:{description:e.translate.instant("NOTIFICATIONS.DIAGRAM.RESTORED",{username:t.firstName}),user:t,autoDismiss:!0,dismissAfter:3e3}};e.notifierController.show("DIAGRAM_RESTORED",Oe.d,a.jb.Neutral,n)})));var t={inputs:{description:this.translate.instant("NOTIFICATIONS.DIAGRAM.RESTORE_SUCCESS"),autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("DIAGRAM_RESTORED",Oe.d,a.jb.Success,t)}return Object(_.a)({})},t.\u0275fac=function(e){return new(e||t)(h.pc(Pe.a),h.pc(R.a),h.pc(Ee.a),h.pc(_e.a),h.pc(Ie.a),h.pc(a.Ib),h.pc(O.x),h.pc(N.e),h.pc(a.kb))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[Pe.a,R.a,Ee.a,_e.a,Ie.a,a.Ib,O.x,N.e,a.kb])],t)}(Se.a);Object.defineProperty(Te,"name",{value:"RestoreDocumentChange"});var Ae=n("8l7v"),Me=n("xATe"),De=n("3QsU"),je=function(e){function t(t){var n=e.call(this)||this;return n.state=t,n}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{scope:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return{GlobalSearch:{scope:this.data.scope,state:De.c.OPEN}}},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.keyboardEvent&&this.data.keyboardEvent.preventDefault()},t.prototype.execute=function(){return!0},t.\u0275fac=function(e){return new(e||t)(h.pc(a.Ib))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[a.Ib])],t)}(a.b);Object.defineProperty(je,"name",{value:"OpenGlobalSearch"});var Ne=function(e){function t(){return e.call(this)||this}return Object(r.e)(t,e),Object.defineProperty(t,"dataDefinition",{get:function(){return{searchQuery:!0,numberOfArticle:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"implements",{get:function(){return["IHttpCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"resultType",{get:function(){return{result:Object}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpMethod",{get:function(){return a.xb.Get},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){var e="?query="+this.data.searchQuery+"&page=1&per_page="+this.data.numberOfArticle;return a.m.get("ZENDESK_HELP_CENTER_URL")+e},enumerable:!1,configurable:!0}),t.prototype.prepareData=function(){this.data.searchQuery=encodeURI(this.data.searchQuery)},t.prototype.execute=function(){return Object(S.b)()},t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[])],t)}(a.f);Object.defineProperty(Ne,"name",{value:"GetHelpCenterArticles"});var Re=n("zmc3"),Le=n("c6sW"),Fe=function(e){function t(t,n){var r=e.call(this)||this;return r.resourceId=t,r.datastore=n,r}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"subscription",{get:function(){return"Task"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelType",{get:function(){return i.N},enumerable:!1,configurable:!0}),t.prototype.getLatestSyncedTime=function(){var e={id:this.resourceId};return this.datastore.findOneLatest(i.N,e,{sort:{lastUpdated:-1}}).pipe(Object(I.a)((function(e){return e?e.lastUpdated:null})))},t.prototype.isActive=function(){return this.status.value.subStatus===o.f.started||this.status.value.subStatus===o.f.created},t}(o.b),Be=function(e){function t(t,n,r){var i=e.call(this)||this;return i.taskSub=t,i.datastore=n,i.state=r,i}var n;return Object(r.e)(t,e),n=t,t.prototype.execute=function(){if(!n.currentSub||!n.currentSub.isActive()){var e=new Fe(this.state.get("CurrentUser"),this.datastore);this.taskSub.start(e),n.currentSub=e}return!0},t.\u0275fac=function(e){return new(e||t)(h.pc(Le.a),h.pc(s.b),h.pc(a.Ib))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=n=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[Le.a,s.b,a.Ib])],t)}(a.b);Object.defineProperty(Be,"name",{value:"StartTaskSubscription"});var Ve=function(e){function t(t,n){var r=e.call(this)||this;return r.auth=t,r.state=n,r}return Object(r.e)(t,e),Object.defineProperty(t,"implements",{get:function(){return["IHttpCommand"]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpHeaders",{get:function(){return new Q.c({"creately-gravity-token":this.auth.token})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpMethod",{get:function(){return a.xb.Get},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"httpUrl",{get:function(){return a.m.get("CREATELY_SEARCH_BASE_URL")+"/search"},enumerable:!1,configurable:!0}),t.prototype.execute=function(){if(this.state.get("CurrentUser"))return S.a},t.\u0275fac=function(e){return new(e||t)(h.pc($.a),h.pc(a.Ib))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t=Object(r.d)([Object(a.v)(),Object(r.g)("design:paramtypes",[$.a,a.Ib])],t)}(a.f);Object.defineProperty(Ve,"name",{value:"SearchDiagram"});var ze=n("opmH"),Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.register=function(e){e.mapSequence(t.startDiagramSubscription).add(v),e.mapSequence(t.startDiagramSubscriptionAndDeps).add(v).add(x,{alter:function(e){return!0}}).add(j).add(ce).add(d).add(ke.a,{transform:function(e){var t,n,r,i;return{projectId:null===(t=e.resultData[4])||void 0===t?void 0:t.projectId,diagramId:null===(i=null===(r=null===(n=e.resultData[0])||void 0===n?void 0:n.status)||void 0===r?void 0:r.input)||void 0===i?void 0:i.resourceId}}}).add(Be),e.mapSequence(t.startEDataSubscription).add(ke.a),e.mapSequence(t.startTaskSubscription).add(Be),e.mapSequence(t.addDiagramCollaborators).add(E),e.map(t.removeDiagramCollaborators).add(T),e.map(t.changeDiagramCollaborators).add(P),e.map(t.transferDiagramOwnership).add(A),e.map(t.createDiagramSnapshot).add(M),e.mapSequence(t.changeDiagramPrivacy).add(D),e.mapSequence(t.exportAsPng).add(H),e.mapSequence(t.exportAsJpeg).add(Z),e.mapSequence(t.fetchUserSubscriptionData).add(we),e.mapSequence(t.fetchEmbedImageUrl).add(J),e.mapSequence(t.resetEmbedImageToken).add(Ce),e.mapSequence(t.exportAsSvg).add(Y),e.mapSequence(t.exportAsPdf).add(ue).add(pe),e.mapSequence(t.exportAsCsv).add(fe),e.mapSequence(t.exportAsXmi).add(me),e.mapSequence(t.exportAsCode).add(ve),e.map(t.deleteDiagram).add(X),e.map(t.selectShapes).add(K.a),e.map(t.addComment).add(ie),e.map(t.editComment).add(xe),e.map(t.deleteComment).add(ae),e.map(t.resolveComment).add(le),e.map(t.markCommentSeen).add(ye),e.map(t.addTask).add(Re.a),e.mapSequence(t.changeMouseControlState).add(ze.a).add(be,{transform:function(e){return e.eventData}}),e.map(t.documentChange).add(Se.a),e.map(t.resetSnapshotPreview).add(Ae.a),e.map(t.restoreSnapshot).add(Me.a).add(Te),e.map(t.openGlobalSearch).add(je),e.map(t.helpCenterArticles).add(Ne),e.mapSequence(t.searchDiagram).add(Ve)},t.startDiagramSubscription=new t("StartDiagramSubscription"),t.startDiagramSubscriptionAndDeps=new t("StartDiagramSubscriptionAndDeps"),t.addDiagramCollaborators=new t("AddDiagramCollaborators"),t.changeDiagramCollaborators=new t("ChangeDiagramCollaborators"),t.removeDiagramCollaborators=new t("RemoveDiagramCollaborators"),t.transferDiagramOwnership=new t("TransferDiagramOwnership"),t.createDiagramSnapshot=new t("CreateDiagramSnapshot"),t.changeDiagramPrivacy=new t("ChangeDiagramPrivacy"),t.startEDataSubscription=new t("StartEDataSubscription"),t.startTaskSubscription=new t("StartTaskSubscription"),t.fetchUserSubscriptionData=new t("FetchUserSubscriptionData"),t.exportAsPng=new t("ExportAsPng"),t.fetchEmbedImageUrl=new t("FetchEmbedImageUrl"),t.resetEmbedImageToken=new t("ResetEmbedImageToken"),t.exportAsJpeg=new t("ExportAsJpeg"),t.exportAsSvg=new t("ExportAsSvg"),t.exportAsPdf=new t("ExportAsPdf"),t.exportAsCsv=new t("ExportAsCsv"),t.exportAsXmi=new t("ExportAsXmi"),t.exportAsCode=new t("ExportAsCode"),t.selectShapes=new t("SelectShapes"),t.addComment=new t("AddComment"),t.editComment=new t("EditComment"),t.deleteComment=new t("DeleteComment"),t.resolveComment=new t("ResolveComment"),t.markCommentSeen=new t("MarkCommentSeen"),t.addTask=new t("AddTask"),t.deleteDiagram=new W.a("DeleteDiagram"),t.searchDiagram=new t("SearchDiagram"),t.documentChange=new t("DocumentChange"),t.resetSnapshotPreview=new t("ResetSnapshotPreview"),t.restoreSnapshot=new t("RestoreDiagramSnapshot"),t.changeMouseControlState=new t("ChangeMouseControlState"),t.openGlobalSearch=new t("OpenGlobalSearch"),t.helpCenterArticles=new t("HelpCenterArticles"),t}(a.d)},qlkn:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("5xGT"),a=n("fqe/"),o=n("HsO4"),s=n("8j5Y"),c=n("CsoK"),l=n("iT4G"),u=n("EM62"),p=function(){function e(e,t){this.auth=e,this.postMessage=t}return Object.defineProperty(e.prototype,"httpUrl",{get:function(){return i.m.get("CYCLR_API_COMMANDS_URL")},enumerable:!1,configurable:!0}),e.prototype.fetchPost=function(e){return void 0===e&&(e={}),Object(r.c)(this,void 0,void 0,(function(){var t;return Object(r.f)(this,(function(n){switch(n.label){case 0:return[4,fetch(""+this.httpUrl,{method:"POST",headers:{"Content-Type":"application/json","creately-gravity-token":this.auth.token},body:JSON.stringify(e)})];case 1:if((t=n.sent()).status>=400&&t.status<600)throw new Error("Internal server error");return[2,t.json()]}}))}))},e.prototype.isAuthenticated=function(e){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(t){return[2,this.fetchPost({dataSource:e,method:"isAuthenticated"})]}))}))},e.prototype.authenticate=function(e,t){void 0===t&&(t=300);var n,r=[i.m.get("CYCLR_AUTH_DOMAIN")];return Object(o.a)(this.fetchPost({dataSource:e,method:"getOAuthUrl",params:{target:window.location.href}})).pipe(Object(s.a)((function(e){return n=window.open(e.toString())})),Object(c.a)(this.postMessage.recvCyclerEvents(r)),Object(s.a)((function(){return n.close()})),Object(l.a)(1e3*t))},e.\u0275fac=function(t){return new(t||e)(u.pc(a.a),u.pc(i.pb))},e.\u0275prov=u.bc({token:e,factory:e.\u0275fac}),e}()},qonV:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("5xGT"),a=n("nsO7"),o=n("EM62"),s=function(){function e(e,t){this.state=e,this.postMessage=t,this._fetch=window.fetch.bind(window),this._document=window.document,this.frames={}}return e.prototype.initialize=function(){this.state.initialize("EnabledPlugins",[]),this.manifests={},this.identifiers={},this.prepareContainerElement()},e.prototype.load=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t,n;return Object(r.f)(this,(function(r){switch(r.label){case 0:if(!this.isAllowedPlugin(e))throw new Error("Plugin error: please add "+e+" to the whitelist");return this.frames[e]?[2]:[4,this.loadPluginManifest(e)];case 1:return t=r.sent(),this.manifests[e]=t,this.identifiers[e]||(n=this.getRandomIdentifier(),this.identifiers[e]=n),[4,this.loadPluginMainIframe(t)];case 2:return r.sent(),this.state.set("EnabledPlugins",this.state.get("EnabledPlugins").concat([t])),[2]}}))}))},e.prototype.unload=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t,n;return Object(r.f)(this,(function(r){return i.db.debug("Unload plugin",e),(t=this.manifests[e])&&(delete this.frames[e],n=Object(a.remove)(this.state.get("EnabledPlugins"),(function(e){return e.url===t._url})),this.state.set("EnabledPlugins",n)),[2]}))}))},e.prototype.burrowMainIframe=function(e){return this.frames[e]},e.prototype.returnMainIframe=function(e,t){this.container.appendChild(t)},e.prototype.recieveMessages=function(e){if(!this.manifests[e])throw new Error("Plugin error: invalid message subscription request for "+e);var t=this.getHostFromUrl(e);return this.postMessage.recv([t],this.identifiers[e])},e.prototype.sendMessage=function(e,t,n){var r=this.frames[n];r&&this.postMessage.sendToWindow(e,t,r.contentWindow)},e.prototype.prepareContainerElement=function(){this._document.getElementById(e.CONTAINER_ELEMENT_ID)||(this.container=document.createElement("div"),this.container.id=e.CONTAINER_ELEMENT_ID,this._document.body.appendChild(this.container))},e.prototype.isAllowedPlugin=function(e){return!0},e.prototype.loadPluginManifest=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t;return Object(r.f)(this,(function(n){switch(n.label){case 0:return[4,this.fetchPluginManifestFromCache(e)];case 1:return(t=n.sent())?[3,5]:[4,this.fetchPluginManifestFromSource(e)];case 2:return t=n.sent(),[4,this.checkPluginManifest(e,t)];case 3:return n.sent(),[4,this.cachePluginManifest(e,t)];case 4:n.sent(),n.label=5;case 5:return[2,t]}}))}))},e.prototype.fetchPluginManifestFromCache=function(e){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(t){return[2,this.manifests[e]]}))}))},e.prototype.fetchPluginManifestFromSource=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t;return Object(r.f)(this,(function(n){switch(n.label){case 0:return[4,this._fetch(e)];case 1:return[4,n.sent().json()];case 2:return(t=n.sent())._url=e,[2,t]}}))}))},e.prototype.checkPluginManifest=function(e,t){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(e){return[2]}))}))},e.prototype.cachePluginManifest=function(e,t){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.f)(this,(function(e){return[2]}))}))},e.prototype.loadPluginMainIframe=function(e){var t=this;return new Promise((function(n,r){var a=document.createElement("iframe");a.setAttribute("allow","camera; microphone"),a.onload=function(r){t.sendMessage(i.qb.pluginInit,{id:t.identifiers[e._url]},e._url),n()},a.src=e.main,t.container.appendChild(a),t.frames[e._url]=a}))},e.prototype.getHostFromUrl=function(e){var t=e.match(/^https?\:\/\/[^\/?#]+/i);if(t&&t.length>-1)return t[0]},e.prototype.getRandomIdentifier=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},e.CONTAINER_ELEMENT_ID="creately-plugin-container",e.\u0275fac=function(t){return new(t||e)(o.pc(i.Ib),o.pc(i.pb))},e.\u0275prov=o.bc({token:e,factory:e.\u0275fac}),e}()},"r7/9":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("D57K"),i=(n("unyx"),n("NNJu")),a=n("ZTXN"),o=n("C05f"),s=n("HM3f"),c=n("YtkY"),l=n("EM62"),u=n("2kYt"),p=n("pYIu"),h=n("XwbL"),d=n("uXwy"),f=["typeSelector"];function g(e,t){if(1&e&&l.gc(0,"sidebar-list-dropdown-item",5),2&e){var n=t.$implicit;l.Cc("item",n)}}var m=function(){return{closeOnItemClicked:!0,openOnHover:!1,closeOnBlur:!0}};function v(e,t){if(1&e&&(l.lc(0,"abs-dropdown",1,2),l.gc(2,"sidebar-dropdown-button",3),l.cd(3,g,1,1,"sidebar-list-dropdown-item",4),l.kc()),2&e){var n=t.ngIf,r=l.xc();l.Cc("settings",l.Gc(5,m))("autoPosition",!1),l.Sb(2),l.Cc("items",n)("placeholderText",r.placeholderText),l.Sb(1),l.Cc("ngForOf",n)}}var b=function(){function e(){this.typeChanged=new a.a,this.subs=[],this.dbSelected=new o.a(null),this._selectedType=new o.a(null),this.entityTypeOptions=Object(s.b)([this.dbSelected,this._selectedType]).pipe(Object(c.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return n?(n.isCustom?n.getActiveCustomEntityDefs():Object.values(n.getDefinition().entityDefs)).map((function(e){return{id:e.id,label:e.grouping?e.grouping:e.name,buttonLabel:e.grouping?e.grouping:e.name,selected:!!i&&i.id===e.id}})):[]})))}return e.prototype.ngOnChanges=function(e){e.selectedDb&&(this.dbSelected.next(e.selectedDb.currentValue),e.selectedDb.firstChange||this._selectedType.next(null)),e.selectedType&&this._selectedType.next(e.selectedType.currentValue)},e.prototype.ngAfterViewInit=function(){var e=this;this.subs.push(this.entityTypeSelector.changed.subscribe((function(t){e.typeChanged.next(e.selectedDb.isCustom?e.selectedDb.getActiveCustomEntityDefs().find((function(e){return e.id===t[0]})):e.selectedDb.getEntityDef(t[0]))})))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Zb({type:e,selectors:[["entity-type-selector"]],viewQuery:function(e,t){var n;(1&e&&l.jd(f,!0,i.b),2&e)&&(l.Lc(n=l.uc())&&(t.entityTypeSelector=n.first))},inputs:{selectedDb:"selectedDb",selectedType:"selectedType",placeholderText:"placeholderText"},outputs:{typeChanged:"typeChanged"},features:[l.Qb],decls:2,vars:3,consts:[["class","dropdown-item",3,"settings","autoPosition",4,"ngIf"],[1,"dropdown-item",3,"settings","autoPosition"],["typeSelector",""],["ddbutton","",3,"items","placeholderText"],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){1&e&&(l.cd(0,v,4,6,"abs-dropdown",0),l.yc(1,"async")),2&e&&l.Cc("ngIf",l.zc(1,1,t.entityTypeOptions))},directives:[u.t,p.a,h.a,u.s,d.a],pipes:[u.b],encapsulation:2,changeDetection:0}),e}()},rgVC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n("kRQx")),o=n("It4u"),s=u(n("fX4D")),c=n("GR9c"),l=u(n("43qC"));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(0,c.JSONPath)({path:t,json:e,wrap:!1})}var d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var o in p(this,e),this.factMap=new Map(t),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(i.allowUndefinedFacts),this.pathResolver=i.pathResolver||h,this.events={success:[],failure:[]},this.ruleResults=[],n){var c=void 0;c=n[o]instanceof a.default?n[o]:new a.default(o,n[o]),this._addConstantFact(c),(0,s.default)("almanac::constructor initialized runtime fact:"+c.id+" with "+c.value+"<"+r(c.value)+">")}}return i(e,[{key:"addEvent",value:function(e,t){if(!t)throw new Error('outcome required: "success" | "failure"]');this.events[t].push(e)}},{key:"getEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?this.events[e]:this.events.success.concat(this.events.failure)}},{key:"addResult",value:function(e){this.ruleResults.push(e)}},{key:"getResults",value:function(){return this.ruleResults}},{key:"_getFact",value:function(e){return this.factMap.get(e)}},{key:"_addConstantFact",value:function(e){this.factMap.set(e.id,e),this._setFactValue(e,{},e.value)}},{key:"_setFactValue",value:function(e,t,n){var r=e.getCacheKey(t),i=Promise.resolve(n);return r&&this.factResultsCache.set(r,i),i}},{key:"addRuntimeFact",value:function(e,t){(0,s.default)("almanac::addRuntimeFact id:"+e);var n=new a.default(e,t);return this._addConstantFact(n)}},{key:"factValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=void 0,c=this._getFact(e);if(void 0===c)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new o.UndefinedFactError("Undefined fact: "+e));if(c.isConstant())a=Promise.resolve(c.calculate(n,this));else{var u=c.getCacheKey(n),p=u&&this.factResultsCache.get(u);p?(a=Promise.resolve(p),(0,s.default)("almanac::factValue cache hit for fact:"+e)):((0,s.default)("almanac::factValue cache miss for fact:"+e+"; calculating"),a=this._setFactValue(c,n,c.calculate(n,this)))}return i?((0,s.default)("condition::evaluate extracting object property "+i),a.then((function(e){if((0,l.default)(e)){var n=t.pathResolver(e,i);return(0,s.default)("condition::evaluate extracting object property "+i+", received: "+JSON.stringify(n)),n}return(0,s.default)("condition::evaluate could not compute object path("+i+") of non-object: "+e+" <"+(void 0===e?"undefined":r(e))+">; continuing with "+e),e}))):a}}]),e}();t.default=d},s9Xn:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("D57K"),i=n("hSRu"),a=n("YtkY"),o=n("/AMt"),s=n("EM62"),c=n("pYIu"),l=n("tG6W"),u=n("2kYt"),p=n("LA+B");function h(e,t){if(1&e&&s.gc(0,"toolbar-grid-dropdown-item",6),2&e){var n=t.$implicit;s.Cc("item",n)}}function d(e,t){1&e&&s.gc(0,"div",7)}function f(e,t){if(1&e&&s.gc(0,"toolbar-grid-dropdown-item",6),2&e){var n=t.$implicit;s.Cc("item",n)}}function g(e,t){if(1&e&&(s.lc(0,"div",8),s.cd(1,f,1,1,"toolbar-grid-dropdown-item",3),s.kc()),2&e){var n=t.$implicit;s.Sb(1),s.Cc("ngForOf",n)}}var m=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"defaultItems",{get:function(){return this._data.pipe(Object(a.a)((function(e){var t=[];return e.value.forEach((function(e){return t.push(e.filter((function(e){return e&&!e.custom})))})),t})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customItems",{get:function(){return this._data.pipe(Object(a.a)((function(e){var t=[];return e.value.forEach((function(e){return t.push(e.filter((function(e){return e&&e.custom})))})),Object(o.a)(t)})))},enumerable:!1,configurable:!0}),t.prototype.setData=function(e){e.value&&e.value[0]&&!Array.isArray(e.value[0])&&(e.value=[e.value]),this.data=e},t.\u0275fac=function(e){return b(e||t)},t.\u0275cmp=s.Zb({type:t,selectors:[["toolbar-grid-dropdown"]],features:[s.Pb],decls:10,vars:15,consts:[[1,"toolbar-grid-dropdown-container",3,"settings"],["dd",""],["ddbutton","",3,"items","props"],["dditem","",3,"item",4,"ngFor","ngForOf"],["dditem","","class","separator",4,"ngIf"],["dditem","","class","toolbar-grid-row-container",4,"ngFor","ngForOf"],["dditem","",3,"item"],["dditem","",1,"separator"],["dditem","",1,"toolbar-grid-row-container"]],template:function(e,t){if(1&e&&(s.lc(0,"abs-dropdown",0,1),s.gc(2,"toolbar-dropdown-button",2),s.yc(3,"async"),s.cd(4,h,1,1,"toolbar-grid-dropdown-item",3),s.yc(5,"async"),s.cd(6,d,1,0,"div",4),s.yc(7,"async"),s.cd(8,g,2,1,"div",5),s.yc(9,"async"),s.kc()),2&e){var n,r;s.Cc("settings",s.Gc(14,m)),s.Sb(2),s.Cc("items",null==(n=s.zc(3,6,t._data))?null:n.value[0])("props",t.props),s.Sb(2),s.Cc("ngForOf",s.zc(5,8,t.customItems)),s.Sb(2),s.Cc("ngIf",(null==(r=s.zc(7,10,t.customItems))?null:r.length)>0),s.Sb(2),s.Cc("ngForOf",s.zc(9,12,t.defaultItems))}},directives:[c.a,l.a,u.s,u.t,p.a],pipes:[u.b],styles:[".separator[_ngcontent-%COMP%]{height:1px;width:100%;background:#e7e6e6;margin:3px 0 7px}.toolbar-grid-dropdown-container[_ngcontent-%COMP%]{display:inline-block;width:35px;margin-left:10px}.toolbar-grid-dropdown-container[_ngcontent-%COMP%]  .abs-dropdown-items-container{min-width:120px}.toolbar-grid-row-container[_ngcontent-%COMP%]:not(:last-child){display:flex;margin-bottom:2px}toolbar-grid-dropdown-item[_ngcontent-%COMP%]{display:inline-grid}toolbar-grid-dropdown-item[_ngcontent-%COMP%]:not(:last-child){margin-right:5px}"],changeDetection:0}),t}(i.a),b=s.nc(v)},sKtG:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("hSRu"),a=n("EM62"),o=n("pYIu"),s=n("Gjo4"),c=n("2kYt"),l=n("Mb5J");function u(e,t){if(1&e&&a.gc(0,"toolbar-list-dropdown-item",7),2&e){var n=t.$implicit;a.Cc("item",n)}}function p(e,t){if(1&e&&a.gc(0,"toolbar-list-dropdown-item",8),2&e){var n=t.$implicit;a.Cc("item",n)}}var h=function(){return{closeOnItemClicked:!0,openOnHover:!0,closeOnBlur:!0}},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.e)(t,e),t.\u0275fac=function(e){return f(e||t)},t.\u0275cmp=a.Zb({type:t,selectors:[["toolbar-input-list-dropdown"]],features:[a.Pb],decls:11,vars:14,consts:[[1,"ftb-item","ftb-item-text"],[3,"settings"],["dd",""],["ddbutton","",3,"validation","items","inputChanged"],["class","fx-margin-bottom-10 custom-option","dditem","",3,"item",4,"ngFor","ngForOf"],["dditem",""],["dditem","","class","fx-margin-bottom-10",3,"item",4,"ngFor","ngForOf"],["dditem","",1,"fx-margin-bottom-10","custom-option",3,"item"],["dditem","",1,"fx-margin-bottom-10",3,"item"]],template:function(e,t){if(1&e&&(a.lc(0,"div",0),a.lc(1,"abs-dropdown",1,2),a.lc(3,"toolbar-dropdown-input",3),a.tc("inputChanged",(function(e){return t.change.next(e)})),a.yc(4,"async"),a.yc(5,"async"),a.kc(),a.cd(6,u,1,1,"toolbar-list-dropdown-item",4),a.yc(7,"async"),a.gc(8,"hr",5),a.cd(9,p,1,1,"toolbar-list-dropdown-item",6),a.yc(10,"async"),a.kc(),a.kc()),2&e){var n,r;a.Sb(1),a.Cc("settings",a.Gc(13,h)),a.Sb(2),a.Cc("validation",null==(n=a.zc(4,5,t._data))?null:n.validation)("items",null==(r=a.zc(5,7,t._data))?null:r.value),a.Sb(3),a.Cc("ngForOf",a.zc(7,9,t.customItems)),a.Sb(3),a.Cc("ngForOf",a.zc(10,11,t.defaultItems))}},directives:[o.a,s.a,c.s,l.a],pipes:[c.b],styles:[".custom-option[_ngcontent-%COMP%]  li:last-child{border-bottom:1px solid #dcdcdc}"],changeDetection:0}),t}(i.a),f=a.nc(d)},sfKy:function(e,t,n){var r=n("oFOz");t.flattenShallow=function(e){return e&&e.reduce?e.reduce((function(e,t){var n=Array.isArray(e),r=Array.isArray(t);return n&&r?e.concat(t):n?(e.push(t),e):r?[e].concat(t):[e,t]})):e},t.isFlat=function(e){if(!e)return!1;for(var t=0;t<e.length;++t)if(Array.isArray(e[t]))return!1;return!0},t.flatten=function(){for(var e=t.argsToArray.apply(null,arguments);!t.isFlat(e);)e=t.flattenShallow(e);return e},t.argsToArray=function(e){var n=[];return t.arrayEach(e,(function(e){n.push(e)})),n},t.numbers=function(){var e=this.flatten.apply(null,arguments);return e.filter((function(e){return"number"==typeof e}))},t.cleanFloat=function(e){var t=1e14;return Math.round(e*t)/t},t.parseBool=function(e){if("boolean"==typeof e)return e;if(e instanceof Error)return e;if("number"==typeof e)return 0!==e;if("string"==typeof e){var t=e.toUpperCase();if("TRUE"===t)return!0;if("FALSE"===t)return!1}return e instanceof Date&&!isNaN(e)||r.value},t.parseNumber=function(e){return e instanceof Error?e:null==e||""===e?0:("boolean"==typeof e&&(e=+e),isNaN(e)?r.value:parseFloat(e))},t.parseString=function(e){return e instanceof Error?e:null==e?"":e.toString()},t.parseNumberArray=function(e){var n,i;if(!e||0===(n=e.length))return r.value;for(;n--;){if(e[n]instanceof Error)return e[n];if((i=t.parseNumber(e[n]))instanceof Error)return i;e[n]=i}return e},t.parseMatrix=function(e){var n;if(!e||0===e.length)return r.value;for(var i=0;i<e.length;i++)if(n=t.parseNumberArray(e[i]),e[i]=n,n instanceof Error)return n;return e},t.parseDate=function(e){if(!isNaN(e)){if(e instanceof Date)return new Date(e);var t=parseFloat(e);return t<0||t>=2958466?r.num:function(e){e<60&&(e+=1);var t=Math.floor(e-25569),n=new Date(86400*t*1e3),r=e-Math.floor(e)+1e-7,i=Math.floor(86400*r),a=i%60;i-=a;var o=Math.floor(i/3600),s=Math.floor(i/60)%60,c=n.getDate(),l=n.getMonth();e>=60&&e<61&&(c=29,l=1);return new Date(n.getFullYear(),l,c,o,s,a)}(t)}return"string"!=typeof e||(e=new Date(e),isNaN(e))?r.value:e},t.parseDateArray=function(e){for(var t,n=e.length;n--;){if((t=this.parseDate(e[n]))===r.value)return t;e[n]=t}return e},t.anyError=function(){for(var e=0;e<arguments.length;e++)if(arguments[e]instanceof Error)return arguments[e]},t.isDefined=function(e){return null!=e},t.anyIsError=function(){for(var e=arguments.length;e--;)if(arguments[e]instanceof Error)return!0;return!1},t.anyIsString=function(){for(var e=arguments.length;e--;)if("string"==typeof arguments[e])return!0;return!1},t.arrayValuesToNumbers=function(e){for(var t,n=e.length;n--;)if("number"!=typeof(t=e[n]))if(!0!==t)if(!1!==t){if("string"==typeof t){var r=this.parseNumber(t);r instanceof Error?e[n]=0:e[n]=r}}else e[n]=0;else e[n]=1;return e},t.rest=function(e,t){return t=t||1,e&&"function"==typeof e.slice?e.slice(t):e},t.initial=function(e,t){return t=t||1,e&&"function"==typeof e.slice?e.slice(0,e.length-t):e},t.arrayEach=function(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e},t.transpose=function(e){return e?e[0].map((function(t,n){return e.map((function(e){return e[n]}))})):r.value}},svB4:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){i.default(e),a.default(e),o.default(e),s.default(e),c.default(e),l.default(e),u.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var i=r(n("tH/t")),a=r(n("dnLt")),o=r(n("LDpk")),s=r(n("FeJI")),c=r(n("PKsm")),l=r(n("d+30")),u=r(n("UaQO"))},tG6W:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("EM62"),a=n("NNJu"),o=n("jHi0"),s=n("2kYt"),c=n("g5Ym");function l(e,t){if(1&e&&(i.lc(0,"div",4),i.gc(1,"static-image",5),i.gc(2,"img",6),i.kc()),2&e){var n=i.xc();i.Sb(1),i.Cc("enableHover",!0)("type",n.buttonIcon.type)("value",n.buttonIcon.value)("width",n.buttonIcon.width||35)("height",n.buttonIcon.height||20)}}function u(e,t){if(1&e&&(i.lc(0,"div",7),i.lc(1,"span",8),i.ed(2),i.kc(),i.gc(3,"img",9),i.kc()),2&e){var n=i.xc();i.Sb(2),i.gd(" ",n.buttonLabel," ")}}var p=function(e){function t(t){return e.call(this,t)||this}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"tooltipValue",{get:function(){return this.props?this.props.tooltip:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonIcon",{get:function(){return this.item?this.item.buttonIcon:{type:"svg",value:this.props?this.props.icon:void 0}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buttonLabel",{get:function(){return this.item?this.item.buttonLabel:this.props.label?this.props.label:void 0},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(i.fc(i.r))},t.\u0275cmp=i.Zb({type:t,selectors:[["toolbar-dropdown-button"]],inputs:{props:"props"},features:[i.Rb([{provide:a.i,useExisting:Object(i.lb)((function(){return t}))}]),i.Pb],decls:5,vars:4,consts:[["tooltip","","placement","top",1,"toolbar-dd-button-container",3,"deactivated"],["class","toolbar-dd-button-icon",4,"ngIf"],["class","toolbar-dd-button-text nu-dropdown-container",4,"ngIf"],[1,"tooltip-content"],[1,"toolbar-dd-button-icon"],[3,"enableHover","type","value","width","height"],["width","8","src","./assets/images/decoratives/triangle.svg",1,"toolbar-dd-button-arrow"],[1,"toolbar-dd-button-text","nu-dropdown-container"],[1,"toolbar-dd-button-text-inner","fx-ellipsis"],["src","./assets/icon-hovers/arrow-down-extra-small-thick.svg",1,"nu-dropdown-arrow"]],template:function(e,t){1&e&&(i.lc(0,"a",0),i.cd(1,l,3,5,"div",1),i.cd(2,u,4,1,"div",2),i.lc(3,"span",3),i.ed(4),i.kc(),i.kc()),2&e&&(i.Cc("deactivated",!t.tooltipValue),i.Sb(1),i.Cc("ngIf",t.buttonIcon),i.Sb(1),i.Cc("ngIf",!t.buttonIcon),i.Sb(2),i.fd(t.tooltipValue))},directives:[o.a,s.t,c.a],styles:[".toolbar-dd-button-icon[_ngcontent-%COMP%]{display:inline-block;width:100%;position:relative}.toolbar-dd-button-icon[_ngcontent-%COMP%]  .static-image-container{height:45px}.toolbar-dd-button-icon[_ngcontent-%COMP%]  .nu-icon{margin-left:-5px;margin-top:-3px}.toolbar-dd-button-text[_ngcontent-%COMP%]{min-width:55px}.toolbar-dd-button-text[_ngcontent-%COMP%]   .nu-dropdown-arrow[_ngcontent-%COMP%]{transform:translate(4px,7px);top:-6px}.toolbar-dd-button-container[_ngcontent-%COMP%]{display:inline-block}.toolbar-dd-button-container[_ngcontent-%COMP%]   .nu-dropdown-container[_ngcontent-%COMP%]{height:32px}.toolbar-dd-button-text-inner[_ngcontent-%COMP%]{padding:8px 25px 8px 10px;background-color:#fff;border-radius:4px;height:32px;display:flex;align-items:center}.toolbar-dd-button-arrow[_ngcontent-%COMP%]{position:absolute;right:-5px;bottom:10px}"],changeDetection:0}),t}(a.i)},"tH/t":function(e,t,n){"use strict";t.__esModule=!0;var r=n("XVEb");t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var i=n.inverse,a=n.fn;if(!0===t)return a(this);if(!1===t||null==t)return i(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var o=r.createFrame(n.data);o.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:o}}return a(t,n)}))},e.exports=t.default},tLVu:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("Q9lH"),a=n("c7W3"),o=n("NNJu"),s=n("5xGT"),c=n("EM62"),l=n("s2Ay"),u=["richTextArea"],p=function(e){function t(t,n,r,i,a){var o=e.call(this,n,r)||this;return o.translate=t,o.componentFactoryResolver=n,o.injector=r,o.commandService=i,o.state=a,o.textStyles={color:"#7E7E7E"},o.subs=[],o}return Object(r.e)(t,e),t.prototype.onTabUpdate=function(){this.clearSubs(),this.manage()},t.prototype.ngAfterViewInit=function(){this.manage()},t.prototype.manage=function(){var e=this;this.richTextEditorUIC||this.createTextArea();var t=[],n=[];this.shapeAttachments.forEach((function(e){e&&e.type.includes("image")?t.push(e):e&&n.push(e)})),setTimeout((function(){e.insertData(t,n)}),300)},t.prototype.ngOnDestroy=function(){this.clearSubs()},t.prototype.insertData=function(e,t){var n=this;this.richTextEditorUIC.quill.enable(!0),this.richTextEditorUIC.quill.setText("");var r=0;if(t.length>0){var i=this.translate.instant("SHAPE_DATA.TABS.ATTACHMENTS.FILES_SECTION_TITLE");this.richTextEditorUIC.quill.insertText(r,i,this.textStyles,"api"),r=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.insertText(r,"\n",this.textStyles,"api"),r=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.setSelection({index:r,length:0},"api"),t.forEach((function(e){return n.richTextEditorUIC.insertToEditor(e)})),r=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.insertText(r,"\n",this.textStyles,"api"),r=this.richTextEditorUIC.quill.getLength()}if(e.length>0){i=this.translate.instant("SHAPE_DATA.TABS.ATTACHMENTS.IMAGES_SECTION_TITLE");this.richTextEditorUIC.quill.insertText(r,i,this.textStyles,"api"),r=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.insertText(r,"\n",this.textStyles,"api"),r=this.richTextEditorUIC.quill.getLength(),this.richTextEditorUIC.quill.setSelection({index:r,length:0},"api"),e.forEach((function(e){return n.richTextEditorUIC.insertToEditor(e,!0)}))}this.richTextEditorUIC.quill.enable(!1)},t.prototype.removeAttachment=function(e){var t,n=this.state.get("Selected")[0];this.commandService.dispatch(a.a.changeAttachments,((t={})[e.id]={action:"remove",shapeId:n},t))},t.prototype.createTextArea=function(){var e=this,t=this.makeComponent(i.a);this.item=t,this.richTextEditorUIC=t.instance,this.richTextEditorUIC.enableUploadOptions=!1,this.richTextEditorUIC.blotOptionCallbacks={remove:function(t){return e.removeAttachment(t)}},this.insert(this.richTextArea,t),t.changeDetectorRef.detectChanges()},t.prototype.clearSubs=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(c.fc(l.e),c.fc(c.m),c.fc(c.C),c.fc(s.B),c.fc(s.Ib))},t.\u0275cmp=c.Zb({type:t,selectors:[["attachments-renderer"]],viewQuery:function(e,t){var n;(1&e&&c.jd(u,!0,c.hb),2&e)&&(c.Lc(n=c.uc())&&(t.richTextArea=n.first))},inputs:{shapeAttachments:"shapeAttachments"},features:[c.Pb],decls:2,vars:0,consts:[["richTextArea",""]],template:function(e,t){1&e&&c.gc(0,"div",null,0)},styles:["[_nghost-%COMP%]  .ql-editor{min-height:500px}"],changeDetection:0}),t}(o.k)},tfzy:function(e,t,n){"use strict";var r=n("IGGJ"),i=r(n("VrFO")),a=r(n("Y9Ll")),o=/^-?(?:(?:[0-9]*\.[0-9]+)|[0-9]+)$/,s=/^[a-zA-Z\u0430-\u044f\u0410-\u042f_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$][a-zA-Z\u0430-\u044f\u0410-\u042f0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$]*$/,c=/\\\\/,l=/^\s*$/,u=["'(?:(?:\\\\')|[^'])*'",'"(?:(?:\\\\")|[^"])*"',"\\s+","\\btrue\\b","\\bfalse\\b"],p=["[a-zA-Z\u0430-\u044f\u0410-\u042f_\xc0-\xd6\xd8-\xf6\xf8-\xff\\$][a-zA-Z0-9\u0430-\u044f\u0410-\u042f_\xc0-\xd6\xd8-\xf6\xf8-\xff\\$]*","(?:(?:[0-9]*\\.[0-9]+)|[0-9]+)"],h=["binaryOp","unaryOp","openParen","openBracket","question","colon"],d=function(){function e(t){(0,i.default)(this,e),this._grammar=t}return(0,a.default)(e,[{key:"getElements",value:function(e){var t=this._getSplitRegex();return e.split(t).filter((function(e){return e}))}},{key:"getTokens",value:function(e){for(var t=[],n=!1,r=0;r<e.length;r++)this._isWhitespace(e[r])?t.length&&(t[t.length-1].raw+=e[r]):"-"===e[r]&&this._isNegative(t)?n=!0:(n&&(e[r]="-"+e[r],n=!1),t.push(this._createToken(e[r])));return n&&t.push(this._createToken("-")),t}},{key:"tokenize",value:function(e){var t=this.getElements(e);return this.getTokens(t)}},{key:"_createToken",value:function(e){var t={type:"literal",value:e,raw:e};if('"'===e[0]||"'"===e[0])t.value=this._unquote(e);else if(e.match(o))t.value=parseFloat(e);else if("true"===e||"false"===e)t.value="true"===e;else if(this._grammar.elements[e])t.type=this._grammar.elements[e].type;else{if(!e.match(s))throw new Error("Invalid expression token: ".concat(e));t.type="identifier"}return t}},{key:"_escapeRegExp",value:function(e){return(e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).match(s)&&(e="\\b"+e+"\\b"),e}},{key:"_getSplitRegex",value:function(){var e=this;if(!this._splitRegex){var t=Object.keys(this._grammar.elements).sort((function(e,t){return t.length-e.length})).map((function(t){return e._escapeRegExp(t)}),this);this._splitRegex=new RegExp("("+[u.join("|"),t.join("|"),p.join("|")].join("|")+")")}return this._splitRegex}},{key:"_isNegative",value:function(e){return!e.length||h.some((function(t){return t===e[e.length-1].type}))}},{key:"_isWhitespace",value:function(e){return!!e.match(l)}},{key:"_unquote",value:function(e){var t=e[0],n=new RegExp("\\\\"+t,"g");return e.substr(1,e.length-2).replace(n,t).replace(c,"\\")}}]),e}();e.exports=d},tqrN:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("D57K"),i=n("nsO7"),a=n("wx9+"),o=n("5xGT"),s=n("YtkY"),c=n("Ohay"),l=n("TLy2"),u=n("J+dc"),p=n("mWib"),h=n("QoSw"),d=n("HM3f"),f=n("ROBh"),g=n("g6G6"),m=n("EM62"),v=function(){function e(e,t,n){this.state=e,this.viewport=t,this.ll=n,this.debounce=100,this.rtree=new o.rb}return e.prototype.initialize=function(){var e=this;return Object(d.b)(this.state.changes("SnapToGuides"),this.state.changes("ShowGuides")).pipe(Object(s.a)((function(e){var t=Object(r.h)(e,2),n=t[0],i=t[1];return n||i})),Object(c.a)(),Object(l.a)((function(t){return t?e.ll.forCurrentObserver(!1).pipe(Object(l.a)((function(e){return e.getDiagramOnce()})),Object(l.a)((function(t){return e.manageNodes(t)}))):(e.rtree.clear(),Object(f.a)({}))})))},e.prototype.search=function(e,t,n,r,i){var a=this;void 0===i&&(i=.5);try{return this.rtree.search(e-i,t+i,n-i,r+i).filter((function(e){return!a.state.get("Selected").includes(e.shapeId)})).map((function(e){for(var t in e)"number"==typeof e[t]&&(e[t]=parseFloat(e[t].toFixed(5)));return e}))}catch(o){return[]}},e.prototype.manageNodes=function(e){var t=this;return Object(g.a)(this.getPanZoomChanges(this.debounce).pipe(Object(l.a)((function(){return t.viewport.getShapeModels().pipe(Object(u.a)(1),Object(s.a)((function(n){return t.rtree.clear(),t.rtree.load(Object(i.flatten)(Object(i.values)(n).filter((function(e){return!t.state.get("Selected").includes(e.id)})).map((function(t){return t.getAlignmentNodes(e)}))))})))}))),this.ll.forCurrent(!1).getDiagramChanges().pipe(Object(l.a)((function(){return t.viewport.getShapeModels().pipe(Object(u.a)(1),Object(s.a)((function(n){return t.rtree.clear(),t.rtree.load(Object(i.flatten)(Object(i.values)(n).filter((function(e){return!t.state.get("Selected").includes(e)})).map((function(t){return t.getAlignmentNodes(e)}))))})))}))))},e.prototype.getPanZoomChanges=function(e){return Object(g.a)(this.state.changes("DiagramPan"),this.state.changes("DiagramZoomLevel")).pipe(Object(p.a)(e))},e.\u0275fac=function(t){return new(t||e)(m.pc(o.Ib),m.pc(a.a),m.pc(h.a))},e.\u0275prov=m.bc({token:e,factory:e.\u0275fac}),e}()},u7ZA:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("D57K"),i=n("YtkY"),a=n("TLy2"),o=n("J+dc"),s=n("xVbo"),c=n("5xGT"),l=n("ROBh"),u=n("SBw3"),p=n("xcrX"),h=n("QoSw"),d=n("EM62"),f=function(){function e(e,t,n,r){this.state=e,this.ll=t,this.libraryLoader=n,this.featureList=r}return e.prototype.getFeatureData=function(e,t){return this.getSwitchData(e).pipe(Object(i.a)((function(t){return{id:e,value:t.value}})))},e.prototype.transformProperties=function(e,t){var n=this.state.get("Selected");return t.icon="",t.updateToolbarIcon=!0,1!==n.length?Object(l.a)(t):this.ll.forCurrentObserver(!0).pipe(Object(a.a)((function(e){return e.getShapeOnce(n[0])})),Object(a.a)((function(e){return e&&e.switchable&&(t.icon=e.switchable.shapeIcon),Object(l.a)(t)})),Object(o.a)(1))},e.prototype.isEnabled=function(e){var t=this.state.get("Selected");return 1!==t.length?Object(l.a)(!1):this.ll.forCurrentObserver(!0).pipe(Object(a.a)((function(e){return e.getShapeOnce(t[0])})),Object(a.a)((function(e){return Object(l.a)(!!e.switchable)})),Object(o.a)(1))},e.prototype.getApplyData=function(e,t){return this.getSwitchData(e).pipe(Object(i.a)((function(e){return Object(r.a)(Object(r.a)({},e),{id:t.id})})))},e.prototype.getSwitchDefaults=function(e){return e?this.libraryLoader.getLibrary(e).pipe(Object(i.a)((function(e){return e.switchDefaults?e.switchDefaults:{shapes:[],defaultPreferences:{}}}))):Object(l.a)({shapes:[],defaultPreferences:{}})},e.prototype.getSwitchData=function(e){var t=this;return this.ll.forCurrentObserver(!0).pipe(Object(a.a)((function(e){return e.getShapeOnce(t.state.get("Selected")[0])})),Object(s.a)((function(e){return!!e&&!!e.switchable})),Object(a.a)((function(e){var n=Object(r.a)({},e.switchable);return e.data&&e.data.switchShape&&(n=Object(r.a)(Object(r.a)({},e.data.switchShape),e.switchable)),t.getSwitchDefaults(n.defaultLibrary).pipe(Object(i.a)((function(t){return[e,n,t]})))})),Object(o.a)(1),Object(i.a)((function(e){var t=e[0],n=e[1],r=e[2],i=n.shapes?n.shapes:[],a=n.value?n.value:[];n.defaultLibrary?(r.shapes.forEach((function(e){e.defId===t.defId||i.find((function(t){return t.defId===e.defId}))||(i.push(e),a.push(e.data))})),n.defaultPreferences=r.defaultPreferences,n.shapes=i,n.value=a):n.defaultPreferences={};for(var o=[],s=0;s<n.value.length;s+=3)o.push([n.value[s],n.value[s+1],n.value[s+2]]);return n.value=o,n})),Object(o.a)(1))},e.\u0275fac=function(t){return new(t||e)(d.pc(c.Ib),d.pc(h.a),d.pc(p.a),d.pc(u.a))},e.\u0275prov=d.bc({token:e,factory:e.\u0275fac}),e}()},"u80+":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("D57K"),i=n("5xGT"),a=n("YtkY"),o=n("Ohay"),s=n("TLy2"),c=n("hX56"),l=n("nsO7"),u=n("4y1S"),p=n("HM3f"),h=n("6Oco"),d=n("Jzy8"),f=n("nWGD"),g=n("EM62"),m=function(){function e(e,t,n,r){this.locator=e,this.state=t,this.dataStore=n,this.userLocator=r}return e.prototype.getCollabs=function(e){var t=this;return this.locator.getTask(e).pipe(Object(a.a)((function(e){return e.roles||[]})),Object(o.a)(l.isEqual),Object(s.a)((function(e){var n=e.map((function(e){return t.userLocator.getUserInfo(e.userId).pipe(Object(a.a)((function(t){return Object.assign(new d.c(e.userId),t)})))}));return n.length>0?p.b.apply(void 0,Object(r.j)(n)):Object(h.b)()})),Object(a.a)((function(e){return t.sortCollabs(e)})))},e.prototype.sortCollabs=function(e){return e.slice().sort((function(e,t){return e.roleSortOrderWithoutOnline-t.roleSortOrderWithoutOnline}))},e.\u0275fac=function(t){return new(t||e)(g.pc(f.a),g.pc(i.Ib),g.pc(c.b),g.pc(u.x))},e.\u0275prov=g.bc({token:e,factory:e.\u0275fac}),e}()},ujvC:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("SBw3"),i=n("ROBh"),a=n("EM62"),o=function(){function e(e){this.featureList=e}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return Object(i.a)({value:t.data,validation:n.data.validation})},e.prototype.getApplyData=function(e,t){return Object(i.a)({styles:{size:t.value},takeFocus:t.takeFocus})},e.\u0275fac=function(t){return new(t||e)(a.pc(r.a))},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},umwn:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return _}));var r,i=n("D57K"),a=n("5xGT"),o=n("C05f"),s=n("ZTXN"),c=n("EM62"),l=n("/ege"),u=n("2kYt"),p=n("s2Ay"),h=n("nwI5"),d=n("bL7E"),f=["window"],g=["windowInner"];function m(e,t){1&e&&(c.lc(0,"h1",12),c.ed(1,"DATA_IMPORT.IMPORT_DATABASE"),c.kc())}function v(e,t){1&e&&(c.lc(0,"h1",12),c.ed(1,"CSV_DATA_IMPORT.HEADING.CONNECT_TO_DATA_SOURCE"),c.kc())}function b(e,t){if(1&e){var n=c.mc();c.lc(0,"li",19),c.tc("click",(function(){c.Pc(n);var e=t.$implicit;return c.xc(3).selectedImportOption.next(e.id)})),c.wc(),c.lc(1,"svg",20),c.gc(2,"use"),c.kc(),c.vc(),c.lc(3,"span",21),c.ed(4),c.kc(),c.kc()}if(2&e){var r=t.$implicit,i=c.xc().ngLet;c.Xb("active",r.id===i),c.Sb(2),c.Tb("href","./assets/icons/symbol-defs.svg#nu-ic-"+r.icon,null,"xlink"),c.Sb(2),c.fd(r.label)}}function y(e,t){if(1&e&&c.gc(0,"csv-data-import-panel",22),2&e){var n=c.xc(3);c.Cc("importingInto",n.importingInto)("showSidebar",n.sidebarVisible)("closeWindow",n.closeWindowObs)}}function x(e,t){if(1&e&&c.gc(0,"google-sheets-data-import-window",22),2&e){var n=c.xc(3);c.Cc("importingInto",n.importingInto)("showSidebar",n.sidebarVisible)("closeWindow",n.closeWindowObs)}}function C(e,t){1&e&&(c.lc(0,"div",25),c.lc(1,"div",26),c.lc(2,"h1",27),c.ed(3,"LABELS.COMING_SOON_EX"),c.kc(),c.gc(4,"img",28),c.kc(),c.lc(5,"ul",29),c.lc(6,"li"),c.lc(7,"span",30),c.ed(8,"AZURE_DEVOPS_IMPORT.INFO.LIST_ITEM_1"),c.kc(),c.kc(),c.lc(9,"li"),c.lc(10,"span",30),c.ed(11,"AZURE_DEVOPS_IMPORT.INFO.LIST_ITEM_2"),c.kc(),c.kc(),c.lc(12,"li"),c.lc(13,"span",30),c.ed(14,"AZURE_DEVOPS_IMPORT.INFO.LIST_ITEM_3"),c.kc(),c.kc(),c.kc(),c.kc())}function w(e,t){1&e&&(c.lc(0,"div",25),c.lc(1,"div",26),c.lc(2,"h1",27),c.ed(3,"LABELS.COMING_SOON_EX"),c.kc(),c.gc(4,"img",28),c.kc(),c.lc(5,"ul",29),c.lc(6,"li"),c.lc(7,"span",30),c.ed(8,"JIRA_IMPORT.INFO.LIST_ITEM_1"),c.kc(),c.kc(),c.lc(9,"li"),c.lc(10,"span",30),c.ed(11,"JIRA_IMPORT.INFO.LIST_ITEM_2"),c.kc(),c.kc(),c.lc(12,"li"),c.lc(13,"span",30),c.ed(14,"JIRA_IMPORT.INFO.LIST_ITEM_3"),c.kc(),c.kc(),c.kc(),c.kc())}function k(e,t){1&e&&(c.lc(0,"div",25),c.lc(1,"div",26),c.lc(2,"h1",27),c.ed(3,"LABELS.COMING_SOON_EX"),c.kc(),c.gc(4,"img",28),c.kc(),c.lc(5,"ul",29),c.lc(6,"li"),c.lc(7,"span",30),c.ed(8,"GITHUB_IMPORT.INFO.LIST_ITEM_1"),c.kc(),c.kc(),c.lc(9,"li"),c.lc(10,"span",30),c.ed(11,"GITHUB_IMPORT.INFO.LIST_ITEM_2"),c.kc(),c.kc(),c.lc(12,"li"),c.lc(13,"span",30),c.ed(14,"GITHUB_IMPORT.INFO.LIST_ITEM_3"),c.kc(),c.kc(),c.kc(),c.kc())}function S(e,t){if(1&e&&(c.lc(0,"div",23),c.cd(1,C,15,0,"div",24),c.cd(2,w,15,0,"div",24),c.cd(3,k,15,0,"div",24),c.kc()),2&e){var n=c.xc().ngLet;c.Sb(1),c.Cc("ngIf","azure_devops"===n),c.Sb(1),c.Cc("ngIf","jira"===n),c.Sb(1),c.Cc("ngIf","github"===n)}}function O(e,t){if(1&e&&(c.lc(0,"div",13),c.lc(1,"div",14),c.yc(2,"async"),c.lc(3,"ul"),c.cd(4,b,5,4,"li",15),c.kc(),c.kc(),c.lc(5,"div",16),c.cd(6,y,1,3,"csv-data-import-panel",17),c.cd(7,x,1,3,"google-sheets-data-import-window",17),c.cd(8,S,4,3,"div",18),c.kc(),c.kc()),2&e){var n=t.ngLet,r=c.xc(2);c.Sb(1),c.Xb("fx-hidden",!1===c.zc(2,6,r.sidebarVisible)),c.Sb(3),c.Cc("ngForOf",r.dataImportOptions),c.Sb(2),c.Cc("ngIf","csv"===n),c.Sb(1),c.Cc("ngIf","google_sheets"===n),c.Sb(1),c.Cc("ngIf","csv"!==n&&"google_sheets"!==n)}}function E(e,t){if(1&e){var n=c.mc();c.lc(0,"div",3,4),c.yc(2,"async"),c.lc(3,"div",5),c.cd(4,m,2,0,"h1",6),c.cd(5,v,2,0,"h1",6),c.lc(6,"button",7),c.tc("click",(function(){return c.Pc(n),c.xc().closeWindow()})),c.wc(),c.lc(7,"svg",8),c.gc(8,"use",9),c.kc(),c.kc(),c.kc(),c.vc(),c.lc(9,"div",10),c.cd(10,O,9,8,"div",11),c.yc(11,"async"),c.kc(),c.kc()}if(2&e){var r=t.ngLet,i=c.xc();c.Xb("mappings-step",!1===c.zc(2,5,i.sidebarVisible)),c.Sb(4),c.Cc("ngIf","jira"===r||"github"===r||"azure_devops"===r),c.Sb(1),c.Cc("ngIf","csv"===r||"google_sheets"===r),c.Sb(5),c.Cc("ngLet",c.zc(11,7,i.selectedImportOption))}}!function(e){e.CSV="csv",e.GOOGLE_SHEETS="google_sheets",e.GITHUB="github",e.JIRA="jira",e.AZURE_DEVOPS="azure_devops"}(r||(r={}));var _=function(e){function t(t){var n=e.call(this)||this;return n.modalController=t,n.dataImportOptions=[{id:r.CSV,label:"Import CSV",icon:"csv"},{id:r.GITHUB,label:"Github",icon:"github"},{id:r.JIRA,label:"Jira",icon:"jira"},{id:r.AZURE_DEVOPS,label:"Azure DevOps",icon:"azure"},{id:r.GOOGLE_SHEETS,label:"Google Sheets",icon:"gsheets"}],n.selectedImportOption=new o.a(r.CSV),n.sidebarVisible=new o.a(!0),n.closeWindowObs=new s.a,n.subs=[],n}return Object(i.e)(t,e),t.prototype.ngOnInit=function(){var e=this;this.selectedImportOption.next(this.dataImportOption),this.subs.push(this.closeWindowObs.subscribe((function(){return e.closeWindow()})))},t.prototype.ngAfterViewInit=function(){},t.prototype.closeWindow=function(){var e=this;this.container&&this.containerInner&&this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){e.modalController.hide()}})},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.\u0275fac=function(e){return new(e||t)(c.fc(a.gb))},t.\u0275cmp=c.Zb({type:t,selectors:[["data-import-window"]],viewQuery:function(e,t){var n;(1&e&&(c.jd(f,!0),c.jd(g,!0)),2&e)&&(c.Lc(n=c.uc())&&(t.container=n.first),c.Lc(n=c.uc())&&(t.containerInner=n.first))},features:[c.Pb],decls:4,vars:3,consts:[[1,"fx-cover","fx-center-all","modal-window-container"],["window",""],["class","modal-window-inner",3,"mappings-step",4,"ngLet"],[1,"modal-window-inner"],["windowInner",""],[1,"modal-window-heading"],["class","nu2-caption-large-bold","translate","",4,"ngIf"],[1,"nu-btn-small","nu-btn-icon","modal-window-close-btn",3,"click"],[1,"nu-icon","nu-icon-large","nu-ic-close"],[0,"xlink","href","./assets/icons/symbol-defs.svg#nu-ic-close"],[1,"modal-window-content"],["class","horizontal-container full-height",4,"ngLet"],["translate","",1,"nu2-caption-large-bold"],[1,"horizontal-container","full-height"],[1,"left-sidebar","full-height"],[3,"active","click",4,"ngFor","ngForOf"],[1,"content-panel","full-height"],["class","full-height",3,"importingInto","showSidebar","closeWindow",4,"ngIf"],["class","coming-soon-container",4,"ngIf"],[3,"click"],[1,"nu-icon","nu-icon-med"],[1,"nu2-caption-3"],[1,"full-height",3,"importingInto","showSidebar","closeWindow"],[1,"coming-soon-container"],["class","info-container fx-margin-bottom-25",4,"ngIf"],[1,"info-container","fx-margin-bottom-25"],[1,"info-heading"],["translate","",1,"nu2-heading-6","fx-margin-bottom-15"],["src","./assets/images/data-import/data-source.svg"],[1,"nu2-body-small"],["translate",""]],template:function(e,t){1&e&&(c.lc(0,"div",0,1),c.cd(2,E,12,9,"div",2),c.yc(3,"async"),c.kc()),2&e&&(c.Sb(2),c.Cc("ngLet",c.zc(3,1,t.selectedImportOption)))},directives:[l.a,u.t,p.a,u.s,h.a,d.a],pipes:[u.b],styles:[".modal-window-inner[_ngcontent-%COMP%]{width:632px;height:484px;padding:0}.modal-window-inner.mappings-step[_ngcontent-%COMP%]{height:auto;min-height:600px}.modal-window-inner.mappings-step[_ngcontent-%COMP%]   .modal-window-content[_ngcontent-%COMP%]{margin-bottom:15px}.modal-window-content[_ngcontent-%COMP%]{padding:0}.modal-window-content[_ngcontent-%COMP%]   .coming-soon-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;align-content:flex-start;align-items:flex-start}.modal-window-content[_ngcontent-%COMP%]   .coming-soon-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65);width:100%;padding:20px}.modal-window-content[_ngcontent-%COMP%]   .coming-soon-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-position:outside;margin-left:10px}.modal-window-content[_ngcontent-%COMP%]   .coming-soon-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:16px}.modal-window-content[_ngcontent-%COMP%]   .coming-soon-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{word-spacing:3px}  .modal-window-content{height:calc(100% - 98px);padding-left:20px;padding-right:20px}  .modal-window-content button.nu2-btn-secondary{padding:5px 10px}  .mappings-container{height:350px}  .mappings-container.has-errors{height:280px}  .container-heading h1{color:#04263d}  .container-heading span{color:rgba(20,40,46,.8)}.modal-window-heading[_ngcontent-%COMP%]{color:#435358;padding-top:25px;padding-bottom:34px;padding-left:10px;display:flex;flex-direction:row;align-items:center;align-content:center;justify-content:space-between}.modal-window-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.vertical-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65);justify-content:center;height:100%}.horizontal-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.modal-window-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:0 20px}.modal-window-footer[_ngcontent-%COMP%]   button.nu2-btn-primary[_ngcontent-%COMP%]{padding:5px 10px}.modal-window-inner[_ngcontent-%COMP%]  .abs-dropdown-inner, .modal-window-inner[_ngcontent-%COMP%]  .abs-dropdown-items-container{width:100%;max-width:100%}.content-panel[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;width:100%;height:100%;border-left:1px solid rgba(42,82,94,.05)}.full-height[_ngcontent-%COMP%]{height:100%}.left-sidebar[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:160px;list-style-type:none}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;padding:10px;align-content:center;justify-content:flex-start;align-items:center}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:linear-gradient(0deg,rgba(81,192,170,.05),rgba(81,192,170,.05)),hsla(0,0%,100%,.65)}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:rgba(81,192,170,.2)}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#195249}.left-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:14px;color:#435358}.info-heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:16px}"],changeDetection:0}),t}(a.nb)},vRBZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("NNJu"),i=n("C05f"),a=n("EM62"),o=n("jHi0"),s=n("s2Ay"),c=n("2kYt");function l(e,t){1&e&&a.gc(0,"div",4)}var u=function(){function e(e){this.element=e,this.height=33,this.marginBottom=15,this.showIndicator=new i.a(!1)}return Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this.icon},enumerable:!1,configurable:!0}),e.prototype.setIndicator=function(e){this.showIndicator.next(e)},e.prototype.toggleZoom=function(e){void 0===e&&(e=!1);var t={transform:"scale(0,0)"},n={transform:"scale(1,1)"},i=t,a=n;!0===e&&(i=n,a=t);var o=new r.e({from:i,to:a,transitionProperty:"transform",duration:300,easing:"ease-in-out"});return o.element=this.element.nativeElement.firstElementChild,o},e.\u0275fac=function(t){return new(t||e)(a.fc(a.r))},e.\u0275cmp=a.Zb({type:e,selectors:[["sidebar-button"]],decls:7,vars:9,consts:[["tooltip","","placement","left"],[1,"nu-icon","light-nv-blue"],["translate","",1,"tooltip-content"],["class","cti-new-comment-indicator",4,"ngIf"],[1,"cti-new-comment-indicator"]],template:function(e,t){1&e&&(a.lc(0,"button",0),a.wc(),a.lc(1,"svg",1),a.gc(2,"use"),a.kc(),a.vc(),a.lc(3,"span",2),a.ed(4),a.kc(),a.cd(5,l,1,0,"div",3),a.yc(6,"async"),a.kc()),2&e&&(a.Vb("sidebar-button nu-btn-med nu-btn-icon nu-ic-",t.icon,""),a.Tb("data-testid",t.id+"-button"),a.Sb(2),a.Tb("href",t.iconHref,null,"xlink"),a.Sb(2),a.fd(t.tooltip),a.Sb(1),a.Cc("ngIf",a.zc(6,7,t.showIndicator)))},directives:[o.a,s.a,c.t],pipes:[c.b],styles:[".nu-ic-properties[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:2px}.cti-new-comment-indicator[_ngcontent-%COMP%]{width:10px;height:10px;background-color:#f36c67;position:absolute;right:8px;top:7px;border-radius:100%;outline:2px solid #fff}"],changeDetection:0}),e}()},vdZD:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("NNJu"),a=n("EM62"),o=n("/g0E"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.isSelected=!1,n}return Object(r.e)(t,e),t.\u0275fac=function(e){return new(e||t)(a.fc(a.r))},t.\u0275cmp=a.Zb({type:t,selectors:[["toolbar-shape-style-dropdown-item"]],inputs:{isSelected:"isSelected"},features:[a.Rb([{provide:i.j,useExisting:Object(a.lb)((function(){return t}))}]),a.Pb],decls:3,vars:3,consts:[["tabindex","-1",1,"tss-dd-item-container","abs-dropdown-item","fx-center-all"],["dditem","",1,"style-tile-container"],["svgType","circle",3,"data"]],template:function(e,t){1&e&&(a.lc(0,"li",0),a.lc(1,"div",1),a.gc(2,"styling-tile",2),a.kc(),a.kc()),2&e&&(a.Sb(2),a.Xb("selected",t.isSelected),a.Cc("data",t.item))},directives:[o.a],styles:[".tss-dd-item-container[_ngcontent-%COMP%]  .selected .style-tile-wrapper{border:1px solid #ffc648}"],changeDetection:0}),t}(i.j)},vz8n:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n("i9EC"),t),i(n("fxI9"),t),i(n("Aq/p"),t),i(n("kgBD"),t),i(n("QuwQ"),t)},w5Uk:function(e,t,n){"use strict";var r=n("D57K"),i=n("5xGT");(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.e)(t,e)})(i.Ib),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.e)(t,e)}(i.Ib),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.e)(t,e)}(i.Ib)},wOpJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("nsO7"),a=n("5xGT"),o=n("h1tj"),s=n("C0rp"),c=function(e){function t(t){var n=e.call(this)||this;return n._doc=s.document(t),n}return Object(r.e)(t,e),Object.defineProperty(t.prototype,"text",{set:function(e){this._text=e},enumerable:!1,configurable:!0}),t.prototype.setDefaultStyles=function(e){this._doc.setDefaultStyles(e)},t.prototype.draw=function(t,n){if(void 0===n&&(n=!1),!this._text||!this._text.length)return!0;if(e.prototype.draw.call(this,t,n))return!0;if(this._text&&this._text[0]&&this._text[0].backgroundColor){var r=this._doc.frame.actualWidth()+5,i=this._doc.frame.actualHeight()+2.5,a=this.getBounds().x-2.5,o=this.getBounds().y;t.beginPath(),t.moveTo(a+5,o),t.arcTo(a+r,o,a+r,o+i,5),t.arcTo(a+r,o+i,a,o+i,5),t.arcTo(a,o+i,a,o,5),t.arcTo(a,o,a+r,o,5),t.closePath(),t.fillStyle=this._text[0].backgroundColor,t.fill()}return this._doc.load(this._text),this._doc.width(this.lineWidth),this._doc.draw(t),!0},t.prototype.getBounds=function(){return new o.Rectangle(0,0,this._doc.frame.actualWidth(),this._doc.frame.actualHeight())},t}(o.DisplayObject),l=n("X0jn"),u=n("xzff"),p=function(e){function t(t){var n=e.call(this,l.b)||this;return n.cachedBounds=null,n.name=t.id,n.hitArea=new o.Shape,n.update(t),n}return Object(r.e)(t,e),t.prototype.getCursor=function(e){return e.includes("editor")&&e.includes("normal")&&e.includes("selected")?{cursor:"text",tail:null,type:"css"}:{cursor:"default",tail:null,type:"css",viewingArea:"app"}},t.prototype.updateHitArea=function(e,t){var n=a.vb.from(t),r=this.hitArea;r.graphics.clear(),r.graphics.beginFill("#000"),e.hitArea?r.graphics.drawRect(0,0,e.hitArea.width,e.hitArea.height):e.editable&&r.graphics.drawRect(n.x,n.y,this.lineWidth,n.height),r.graphics.endFill()},t.prototype.updateViewCache=function(e,n){if(this.cachedBounds&&(this.cachedBounds.width===this.lineWidth&&this.cachedBounds.height===e.height?(a.hb.hasChanges(n,"texts."+e.id+".content")||a.hb.hasChanges(n,"texts."+e.id+".handlebars"))&&this.updateCache():(this.uncache(),this.cachedBounds=null)),!this.cachedBounds){if(!this.hasRenderableText(e.content))return;if(!this.lineWidth||!e.height)return void a.db.warning("TextView: Found text model without width/height",e);this.cache(-t.CACHE_PADDING,-t.CACHE_PADDING,this.lineWidth+2*t.CACHE_PADDING,e.height+2*t.CACHE_PADDING,t.CACHE_DENSITY),this.cachedBounds={width:this.lineWidth,height:e.height}}},t.prototype.update=function(e,t){if(this.hasRenderableText(e.content)){if(Object(i.isEmpty)(e.handlebars))this.text=e.content;else{var n=JSON.parse(e.handlebars),a=e.content.map((function(e){var t=e.text.replace(/\{\{/g,"{{["),i=t=t.replace(/\}\}/g,"]}}"),a=i;try{a=u.compile(i)(n)}catch(o){}return Object(r.a)(Object(r.a)({},e),{text:a})}));this.text=a}this.lineWidth=e.width}else this.hasRenderableText(e.placeholder)?(this.text=e.placeholder,this.lineWidth=e.width):(this.text=[],this.lineWidth=0)},t.prototype.destroy=function(){this.parent?this.parent.removeChild(this):a.db.error("TextView.destroy called but this.parent was null.")},t.prototype.getTextBounds=function(e,t){void 0===t&&(t=1e4);var n=document.createElement("canvas"),r=new c(l.b);return r.text=e,r.lineWidth=t,r.draw(n.getContext("2d")),r.getBounds()},t.prototype.hasRenderableText=function(e){var t,n;if(e&&e.length)try{for(var i=Object(r.k)(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(o&&o.text&&o.text.trim().length>0)return!0}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1},t.CACHE_PADDING=10,t.CACHE_DENSITY=2,t}(c)},wf7V:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("ROBh"),i=n("nsO7"),a=n("EM62"),o=function(){function e(){}return e.prototype.getFeatureData=function(e,t){var n=t.options.map((function(e){return{id:e.id,label:e.label,itemIcon:{type:"image",value:e.icon},buttonIcon:{type:"image",value:e.icon},value:e.id,shapeId:t.shapeId}})),a=Object(i.uniqBy)(n,(function(e){return e.id}));return a.find((function(e){return e.id===t.selected})).selected=!0,Object(r.a)({value:a})},e.prototype.getApplyData=function(e,t){var n={changes:{}};return n.changes[t.shapeId]={entryClass:t.value},Object(r.a)(n)},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},wk5G:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r,i=n("D57K"),a=n("h1tj");!function(e){e.interactionStart="interaction-start",e.interaction="interaction",e.interactionImmediate="interaction-immediate",e.interactionEnd="interaction-end",e.interactionCancel="interaction-cancel"}(r||(r={}));var o=function(e){function t(t,n,r,i,a){var o=e.call(this,t,!0,!0)||this;return o.type=t,o.handle=r,o.targetOver=i,o.relatedEvent=a,o.interactionName=n,o}return Object(i.e)(t,e),t}(a.Event)},wuOO:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("SBw3"),i=n("ROBh"),a=n("EM62"),o=function(){function e(e){this.featureList=e}return e.prototype.getFeatureData=function(e,t){var n=this.featureList.getFeature(e);return Object(i.a)({value:t.data,validation:n.data.validation})},e.prototype.getApplyData=function(e,t){return Object(i.a)({styles:{font:t.value},takeFocus:t.takeFocus})},e.\u0275fac=function(t){return new(t||e)(a.pc(r.a))},e.\u0275prov=a.bc({token:e,factory:e.\u0275fac}),e}()},x77O:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n("D57K"),i=n("gZOS"),a=n("5xGT"),o=n("X0jn"),s=n("19Zn"),c=n("nsO7"),l=n("ROBh"),u=n("HM3f"),p=n("P4Xx"),h=n("TLy2"),d=n("YtkY"),f=n("J+dc"),g=n("8j5Y"),m=n("uo+j"),v=n("6YKU"),b=n("Ei0d"),y=n("5vYS"),x=n("diDk"),C=n("PC6z"),w=n("+1jB"),k=n("EM62"),S=function(){function e(e,t,n){this.modelChangeUtils=e,this.state=t,this.ell=n}return e.prototype.buildChanges=function(t,n){var i=this;return!t.eData||Object(c.isEmpty)(t.eData)?Object(l.a)([]):this.getAllChangeModels(t.eData).pipe(Object(h.a)((function(a){var o=t.__sakota__.getChanges(),c=Object(s.K)(o),p=[];return c.diagram&&i.edataDefsChanged(o,t,a),c.shapes&&Object.keys(c.shapes).forEach((function(e){var s=t.shapes[e],l=c.shapes[e];s instanceof y.a?p.push.apply(p,Object(r.j)(i.updateConnectorLink(t,a,s,l,!0))):void 0===s&&n.shapes[e]instanceof y.a||o&&o.$set&&o.$set["shapes."+e]||i.shapeChanged(s,t,a,l,n.shapes[e])})),e.buildEDataChanges(a),p.length>0?Object(u.b)(p).pipe(Object(d.a)((function(){return a}))):Object(l.a)(a)})))},e.buildEDataChanges=function(e){var t,n,i={};try{for(var a=Object(r.k)(e),o=a.next();!o.done;o=a.next()){var s=o.value;i[s.id]=s}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}this.updateLinkedEData(e),this.updateFormulaRefs(i),this.updateFormulas(i)},e.prototype.edataDefsChanged=function(t,n,r){var i,a,o,s;if(t.$set){var l,u={},p=/dataDefs\.([^\.]+)\.([^\.]+)\./,h=/dataDefs\.([^\.]+)\.([^\.]+)/,d=/dataDefs\.([^\.]+)/;for(var f in t.$set){var g,m=p.exec(f);if(m){if((g=n.getEdataByDataSetId(m[1]))&&!Object(c.isEmpty)(g)){var v=g[l=Object.keys(g)[0]],b=n.dataDefs[m[1]][m[2]];u[v]?Object.assign(u[v],((i={})[m[2]]=b,i)):u[v]=((a={})[m[2]]=b,a)}}else if(m=h.exec(f)){if((g=n.getEdataByDataSetId(m[1]))&&!Object(c.isEmpty)(g)){var v=g[l=Object.keys(g)[0]];b=n.dataDefs[m[1]][m[2]];u[v]?Object.assign(u[v],((o={})[m[2]]=b,o)):u[v]=((s={})[m[2]]=b,s)}}else if(m=d.exec(f))if((g=n.getEdataByDataSetId(m[1]))&&!Object(c.isEmpty)(g))u[v=g[l=Object.keys(g)[0]]]=t.$set[f]}if(!Object(c.isEmpty)(u)){var y=r.find((function(e){return e.id===l}));y&&(this.modelChangeUtils.updateEdataDefs(y,u),e.updateFormulaFields(u,y,r))}}},e.updateFormulaFields=function(e,t,n){var i=function(i){var s=t.entities[i],l=Object.values(e[i]).filter((function(e){return e.type===o.c.FORMULA})),u=t.getEntityDataItems(i,!1),p=t.__sakota__.getTarget().getEntityDataItems(i,!1),h={};for(var d in u)h[u[d].label]||(h[u[d].label]=d);l.forEach((function(e){for(var t,i,l,d=e.options.expression,f=p&&p[e.id]?p[e.id].options.parsedExpression:null,g=d,m=!0,v=/{{([^{}]+)}}/g,y=[],x=[],C=[];null!==(l=v.exec(d));)C.push(l[0]);if(C=Object(c.uniq)(C)){var w=void 0,k=function(t){var i=t.slice(2,t.length-2).trim();if(i.includes("->")||i.includes(".")){var c=void 0;c=i.includes("->")?i.split("->").map((function(e){return e.trim()})):i.split(".").map((function(e){return e.trim()}));var l=Object(r.h)(c,2),p=l[0],d=l[1],f=h[p],v=u[f];if(v.type!==o.c.LOOKUP)if(v.type===o.c.TAGS){["name","color"].includes(d)?(w="data['"+f+"']|TAGS('"+d+"')",i.includes(".")&&(w+="[0]"),x.push((function(){return s.addRefField(f,e.id)})),y.push(f)):m=!1}else m=!1;else{var b=v.options,C=b.eDataId,k=b.eDefId,S=n.find((function(e){return e.id===C})),O=S.getEntityDef(k).dataItems,E=Object.keys(O).find((function(e){return O[e].label===d}));if(E){var _=O[E];x.push((function(){return s.addLookupRefField(f,E,S,e.id)})),y.push(f+"_"+E),i.includes("->")?(w="refData['"+f+"']['"+E+"'].value",_.type===o.c.DATE&&(w+="|DATE_ARRAY"),_.type===o.c.BINARY&&(w+="|BOOL_ARRAY")):(w="refData['"+f+"']['"+E+"'].value[0]",_.type===o.c.DATE&&(w+="|DATE"),_.type===o.c.BINARY&&(w="!!"+w))}else m=!1}}else{var I=h[i];if(I){_=u[I];x.push((function(){return s.addRefField(I,e.id)})),y.push(I),w=_.type===o.c.DATE?"data['"+I+"']|DATE":"data['"+I+"']",_.type===o.c.BINARY&&(w="!!"+w)}else m=!1}if(!m)return a.db.error("Could not resolve "+t),"break";g=g.replace(new RegExp(t,"g"),w)};try{for(var S=(t=void 0,Object(r.k)(C)),O=S.next();!O.done;O=S.next()){if("break"===k(P=O.value))break}}catch(A){t={error:A}}finally{try{O&&!O.done&&(i=S.return)&&i.call(S)}finally{if(t)throw t.error}}}if(m)if(g!==f){if(f){for(var E=[],_=/data\['([a-zA-Z0-9]+)'\]/g,I=/refData\['([a-zA-Z0-9]+)'\]\['([a-zA-Z0-9]+)'\]/g,P=void 0;null!==(P=_.exec(f));)E.push(P[1]);for(;null!==(P=I.exec(f));)E.push(P[1]+"_"+P[2]);var T=Object(c.difference)(Object(c.uniq)(E),y);T.length>0&&T.forEach((function(t){if(t.includes("_")){var i=Object(r.h)(t.split("_"),2),a=i[0],o=i[1],c=u[a].options.eDataId,l=n.find((function(e){return e.id===c}));s.removeLookupRefField(a,o,e.id,l)}else s.removeRefField(t,e.id)}))}x.forEach((function(e){return e()}));try{e.options.parsedExpression=g,s.data[e.id]=b.a.evaluate(g,s)}catch(M){a.db.error("Could not parse the expression",{expression:d,parsedExpression:g,error:M}),m=!1}}else e.options.parsedExpression=g}))};for(var s in e)i(s)},e.prototype.getAllChangeModels=function(e){var t=this,n=e.map((function(e){return t.ell.getEData(e).pipe(Object(h.a)((function(e){return e.getEDataModelOnce().pipe(Object(d.a)((function(e){return i.Sakota.create(e)})))})),Object(f.a)(1))}));return Object(u.b)(n)},e.prototype.shapeChanged=function(e,t,n,r,i){if((e||i).eDataId){if(r.$set&&Object.keys(r.$set).filter((function(e){return/data/.test(e)})).length<1)return;if((r.$set&&r.$set.containerId||r.$unset&&r.$unset.containerId)&&(this.shapeContainerChanged(e,t,n,r),Object.keys(r.$set).filter((function(e){return/data/.test(e)})).length<1))return;var a=!0;r.$unset&&!0===r.$unset&&(a=!1);var o=function(o){var c=n.find((function(e){return e.id===o}));c&&a&&e?(s.modelChangeUtils.updateEntityData(c,{entityId:e.eData[o],shape:e,diagram:t}),s.shapeLookupFieldChanged(e,t,n,r,i)):c&&(s.shapeLookupFieldChanged(e,t,n,r,i),s.modelChangeUtils.addShapeToEntity(c,{entityId:i.eData[o],shapeId:i.id,shapeDefId:i.defId,diagramId:t.id,isDelete:!0}))},s=this;for(var c in(e||i).eData)o(c)}if(e&&e.eDataRef){var l=function(r){var i=n.find((function(e){return e.id===r}));if(i){var a=e.eDataRef[r];u.modelChangeUtils.updateEDateRefChanges(i,{entityIds:a,sourceDiagId:t.id,sourceShapeId:e.id})}},u=this;for(var p in e.eDataRef)l(p)}},e.prototype.shapeContainerChanged=function(e,t,n,r){var i,a=!1;if(r.$set&&r.$set.containerId&&!r.$set.id?(i=r.$set.containerId,a=!0):r.$unset&&r.$unset.containerId&&(i=e.containerOld,a=!1),i){var o=t.shapes[i];this.updateContainerLink(o,n,e,a)}},e.prototype.shapeLookupFieldChanged=function(e,t,n,i,a){var c=this,l={};n.forEach((function(e){l[e.id]=e}));var u=this.getLookupLinkChanges(t,e,i,a,l),p=u.toAdd,h=u.toRemove;if(0!==p.length||0!==h.length){var d=e||a,f=d.eDataId,g=d.entityId,m=Object.values(d.getDataItems(t)).filter((function(e){return e.type===o.c.LOOKUP&&!0===e.isTypeBound})),v={},b={};m.length>0&&(m.forEach((function(e){var n=e.id.split("").reverse().join("");d.getDataItems(t)[n]&&d.getDataItems(t)[n].type===o.c.LOOKUP?(b[e.id]=n,d.getDataItems(t)[n].options.isMirrorField?v[e.id]=e.id:v[e.id]=n):(b[e.id]=e.id,v[e.id]=e.id)})),p.forEach((function(e){var t=e.dataItemId,n=e.eDataId,i=e.entityId;if(b.hasOwnProperty(t)){var a=l[n].entities[i],o=b[t];if(a&&a.data[o]){var s=l[n].getDataItemDef(o,i).options.allowMultiple;a.data[o]=s?Object(r.j)(a.data[o],[g]):[g]}}})),h.forEach((function(e){var t=e.dataItemId,n=e.eDataId,r=e.entityId;if(b.hasOwnProperty(t)){var i=l[n].entities[r],a=b[t],o=e.fEntityId||g;i&&i.data[a]&&(i.data[a]=i.data[a].filter((function(e){return e!==o})))}}))),p.forEach((function(e){var n=e.dataItemId,r=e.eDataId,i=e.entityId,a=t.getLookupConnector(v[n]||n,d.id,i,r);a&&(e.connectorId=a.id)})),p.forEach((function(e){var n=e.dataItemId,r=e.eDataId,i=e.entityId,a=e.connectorId;c.modelChangeUtils.updateEntityLinks(l[r],{diagramId:t.id,fromEntityId:i,toEDataId:f,toEntityId:g,type:o.f.LOOKUP,isSet:!0,handshake:b[n]||n,shapeId:d.id,identifier:c.getIdentifier(d),connectorId:a,connectorDefId:s.r.defId,shapeDefId:d.defId})})),p.forEach((function(e){var n=e.dataItemId,r=e.eDataId,i=e.entityId,a=e.connectorId;c.modelChangeUtils.updateEntityLinks(l[f],{diagramId:t.id,fromEntityId:g,toEDataId:r,toEntityId:i,type:o.f.LOOKUP,isSet:!0,handshake:n,shapeId:d.id,identifier:l[r].entities[i].getPrimaryText(),connectorId:a,connectorDefId:s.r.defId,shapeDefId:d.defId})})),h.forEach((function(e){var n=e.dataItemId,r=e.eDataId,i=e.entityId;l[r].entities[i]&&c.modelChangeUtils.updateEntityLinks(l[r],{diagramId:t.id,fromEntityId:i,toEDataId:e.fEdataId||f,toEntityId:e.fEntityId||g,type:o.f.LOOKUP,isSet:!1,handshake:b[n]||n,shapeId:e.shapeId||d.id})})),h.forEach((function(e){var n=e.dataItemId,r=e.eDataId,i=e.entityId;l[e.fEdataId||f].entities[e.fEntityId||g]&&c.modelChangeUtils.updateEntityLinks(l[e.fEdataId||f],{diagramId:t.id,fromEntityId:e.fEntityId||g,toEDataId:r,toEntityId:i,type:o.f.LOOKUP,isSet:!1,handshake:n,shapeId:e.shapeId||d.id})}))}},e.prototype.getLookupLinkChanges=function(e,t,n,i,a){var s,l,u,p,h=[],d=[];if(n.$set&&Object.keys(n.$set).filter((function(e){return/data/.test(e)})).length>0){var f=/data\.([^\.]+)\.value/,g=/data\.([^\.]+)$/,m=function(n){var r=f.exec(n);if(r){var i=r[1],s=t.getDataItems(e)[i];if(s&&s.type===o.c.LOOKUP){var l=t.data[i].value,u=a[t.eDataId].entities[t.entityId].__sakota__.getTarget().data[i],p=Object(c.difference)(l,u);if(p.length>0){var m=s.options,v=m.eDataId,b=m.eDefId;if(m.isMirrorField){var y=t.eDataId===v&&t.entityDefId===b?i.split("").reverse().join(""):i,x=a[v].getEntityDef(b).dataItems[y];x.options.allowMultiple||p.forEach((function(e){var t,n=a[v].entities[e];1===(null===(t=n.data[y])||void 0===t?void 0:t.length)&&d.push({dataItemId:y,eDataId:x.options.eDataId,entityId:n.data[y][0],fEdataId:v,fEntityId:e,shapeId:Object.keys(Object.values(n.shapes)[0]||{})[0]})}))}}p.forEach((function(e){h.push({dataItemId:i,eDataId:s.options.eDataId,entityId:e})})),Object(c.difference)(u,l).forEach((function(e){d.push({dataItemId:i,eDataId:s.options.eDataId,entityId:e})}))}}if(r=g.exec(n)){var C=r[1],w=t.getDataItems(e)[C];if(w&&w.type===o.c.LOOKUP&&!w.options.isMirrorField)(l=t.data[C].value)&&l.length&&l.forEach((function(e){h.push({dataItemId:C,eDataId:w.options.eDataId,entityId:e})}))}};try{for(var v=Object(r.k)(Object.keys(n.$set)),b=v.next();!b.done;b=v.next()){m(b.value)}}catch(w){s={error:w}}finally{try{b&&!b.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}}if(n.$unset&&Object.keys(n.$unset).filter((function(e){return/data/.test(e)})).length>0){g=/data\.([^\.]+)$/;var y=function(t){var n=g.exec(t);if(n){var r=n[1],a=i.getDataItems(e)[r];if(a&&a.type===o.c.LOOKUP){var s=a.value;s&&s.length>0&&s.forEach((function(e){d.push({dataItemId:r,eDataId:a.options.eDataId,entityId:e})}))}}};try{for(var x=Object(r.k)(Object.keys(n.$unset)),C=x.next();!C.done;C=x.next()){y(C.value)}}catch(k){u={error:k}}finally{try{C&&!C.done&&(p=x.return)&&p.call(x)}finally{if(u)throw u.error}}}return{toAdd:h,toRemove:d}},e.updateFormulas=function(e){var t,n,i,a,o=Object.values(e),s={};try{for(var c=Object(r.k)(o),l=c.next();!l.done;l=c.next()){var u=l.value,p=u.__sakota__.getChanges();if(p.$set){var h=Object.keys(p.$set).filter((function(e){return/entities\.([^\.]+)\.data\.([^\.]+)/.test(e)})),d={};try{for(var f=(i=void 0,Object(r.k)(h)),g=f.next();!g.done;g=f.next()){var m=g.value.split("."),b=m[1],y=m[3];d[b]||(d[b]=[]),d[b].push(y)}}catch(x){i={error:x}}finally{try{g&&!g.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}s[u.id]=d}}}catch(C){t={error:C}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}try{this._updateFormulas(e,s)}catch(w){if(w instanceof RangeError)throw new v.b(v.a);throw w}},e._updateFormulas=function(e,t){var n,i,s,l,u={},p={};for(var h in t){var d=e[h];u[h]={};var f=t[h],g=function(t){var n,i,a=d.entities[t],s=d.getEntityDataItems(t,!1),l=f[t],g=[];a.refData&&(l.forEach((function(t){if(a.refData[t])if(s[t].type===o.c.LOOKUP){var n=s[t].options.eDataId,r=e[n];for(var i in a.updateLookupRefField(t,r),a.refData[t])g=g.concat(a.refData[t][i].refFields)}else g=g.concat(a.refData[t].refFields)})),u[h][t]=Object(c.uniq)(g));var m=a.getMatchingLinks(o.f.LOOKUP).filter((function(e){return e.refFields})),v=function(e){var n=Object(c.intersection)(e.refFields,l);if(n.length>0){var r={};n.forEach((function(e){r[e]=a.data[e]})),p[e.eDataId]||(p[e.eDataId]={}),p[e.eDataId][e.entityId]||(p[e.eDataId][e.entityId]=[]),p[e.eDataId][e.entityId].push({lookupId:e.handshake,senderId:t,values:r})}};try{for(var b=(n=void 0,Object(r.k)(m)),y=b.next();!y.done;y=b.next()){v(y.value)}}catch(x){n={error:x}}finally{try{y&&!y.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}};for(var m in f)g(m)}for(var h in p)for(var m in p[h]){var v=void 0;u[h]||(u[h]={}),v=u[h][m]?u[h][m]:[];var y=e[h].entities[m],x=y.data,C=y.refData,w=e[h].getEntityDataItems(m),k=p[h][m];try{for(var S=(n=void 0,Object(r.k)(k)),O=S.next();!O.done;O=S.next()){var E=O.value,_=E.lookupId.split("").reverse().join(""),I=w[_];(null==I?void 0:I.isTypeBound)&&I.type===o.c.LOOKUP&&w[E.lookupId].isTypeBound&&(E.lookupId=_);var P=x[E.lookupId].indexOf(E.senderId);for(var T in E.values){var A=C[E.lookupId][T].value.slice();A[P]=E.values[T],C[E.lookupId][T].value=A,v=v.concat(C[E.lookupId][T].refFields)}}}catch(V){n={error:V}}finally{try{O&&!O.done&&(i=S.return)&&i.call(S)}finally{if(n)throw n.error}}u[h][m]=Object(c.uniq)(v)}var M=!1;for(var h in u)if(e[h])for(var m in u[h]){var D=e[h].entities[m],j=e[h].getEntityDataItems(m),N=u[h][m];N.length>0&&(M=!0);try{for(var R=(s=void 0,Object(r.k)(N)),L=R.next();!L.done;L=R.next()){var F=L.value,B=j[F].options.parsedExpression;try{D.data[F]=b.a.evaluate(B,D)}catch(z){z instanceof RangeError||a.db.error("Error occurred while updating the formula field",z)}}}catch(U){s={error:U}}finally{try{L&&!L.done&&(l=R.return)&&l.call(R)}finally{if(s)throw s.error}}}M&&this._updateFormulas(e,u)},e.updateFormulaRefs=function(e){var t,n,i,a,s,c,l,u=Object.values(e);try{for(var p=Object(r.k)(u),h=p.next();!h.done;h=p.next()){var d=h.value,f=d.__sakota__.getChanges();if(f.$unset){var g=Object.keys(f.$unset).filter((function(e){return/^entities\.([^\.]+)\.data\.([^\.]+)$/.test(e)})),m={};try{for(var v=(i=void 0,Object(r.k)(g)),b=v.next();!b.done;b=v.next()){var y=b.value.split("."),x=y[1],C=y[3];m[x]||(m[x]=[]),m[x].push(C)}}catch(A){i={error:A}}finally{try{b&&!b.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}for(var x in m){var w=d.entities[x],k=d.getEntityDataItems(x,!1);try{for(var S=(s=void 0,Object(r.k)(m[x])),O=S.next();!O.done;O=S.next()){if((null===(l=k[C=O.value])||void 0===l?void 0:l.type)===o.c.FORMULA){for(var E=/data\['([a-zA-Z0-9]+)'\]/g,_=/refData\['([a-zA-Z0-9]+)'\]\['([a-zA-Z0-9]+)'\]/g,I=k[C].options.parsedExpression,P=void 0;null!==(P=E.exec(I));)w.removeRefField(P[1],C);for(;null!==(P=_.exec(I));){var T=e[k[P[1]].options.eDataId];w.removeLookupRefField(P[1],P[2],C,T)}}}}catch(M){s={error:M}}finally{try{O&&!O.done&&(c=S.return)&&c.call(S)}finally{if(s)throw s.error}}}}}}catch(D){t={error:D}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}},e.updateLinkedEData=function(e){var t,n;try{for(var i=Object(r.k)(e),a=i.next();!a.done;a=i.next()){var o=a.value,s=o.__sakota__.getChanges();if(s&&!Object(c.isEmpty)(s)){var l=Object(C.b)(s);for(var u in l.entities){var p=o.entities[u],h=l.entities[u];if(!0!==h.$unset)this.updateLinkedEntities(o,p,h);else{var d=o.__sakota__.getTarget().entities[u];this.handleEntityRemove(d,e)}}}}}catch(f){t={error:f}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.handleEntityRemove=function(e,t){this.cleanLookupFields(e,t)},e.cleanLookupFields=function(e,t){(e.links?Object.values(e.links):[]).filter((function(e){return e.type===o.f.LOOKUP})).forEach((function(n){var r=n.eDataId,i=n.entityId,a=n.handshake,s=t.find((function(e){return e.id===r}));if(s&&s.entities[i]){var c=s.entities[i];if(c.eDefId===e.eDefId){var l=a.split("").reverse().join("");e.data[l]&&(a=l)}if(c.data[a]){var u=c.data[a].slice();u.splice(u.indexOf(e.id),1),c.data[a]=u}c.getMatchingLinks(o.f.LOOKUP,a).filter((function(t){return t.entityId===e.id})).forEach((function(e){delete c.links[e.id]}))}}))},e.prototype.updateContainerLink=function(e,t,n,r){if(e.eData&&n.eData){var i=function(i){var s=n.eData[i],c=function(c){var l=e.eData[c],u=t.find((function(e){return e.id===c}));u&&a.modelChangeUtils.updateEntityLinks(u,{fromEntityId:l,toEDataId:i,toEntityId:s,type:o.f.CHILD,isSet:r,handshake:n.containerHandshake,shapeId:e.id,identifier:a.getIdentifier(e)});var p=t.find((function(e){return e.id===i}));p&&a.modelChangeUtils.updateEntityLinks(p,{fromEntityId:s,toEDataId:c,toEntityId:l,type:o.f.PARENT,isSet:r,handshake:n.containerHandshake,shapeId:n.id,identifier:a.getIdentifier(n)})};for(var l in e.eData)c(l)},a=this;for(var s in n.eData)i(s)}},e.prototype.getIdentifier=function(e){if(e.primaryTextModel&&e.primaryTextModel.plainText)return e.primaryTextModel.plainText},e.prototype.updateConnectorLink=function(e,t,n,r,i,c,l,u){var p=this;void 0===u&&(u=!1);var h=[];if(!u&&r.$set&&0===Object.keys(r.$set).filter((function(e){return/defId/.test(e)})).length)return h;if(c||(n&&n.getFromEndpoint(e)&&n.getFromEndpoint(e).shape?c=n.getFromEndpoint(e).shape:a.db.error("malformed link update request",n.id)),l||(n&&n.getToEndpoint(e)&&n.getToEndpoint(e).shape?l=n.getToEndpoint(e).shape:a.db.error("malformed link update request",n.id)),n.handshake&&!0!==r.$unset||(i=!1),c&&l&&c.eData&&l.eData){n.defId===s.r.defId&&this.updateLookupConnectionConnector(n,t,e);var d=function(r){var a=c.eData[r],s=function(s){var u=l.eData[s],d=m.getMatchingHandshake(r,a,s,u,n.handshake).pipe(Object(f.a)(1),Object(g.a)((function(c){var h=t.find((function(e){return e.id===r}));h&&p.modelChangeUtils.updateEntityLinks(h,{diagramId:e.id,fromEntityId:a,toEDataId:s,toEntityId:u,type:o.f.CONNECTOR_BI,isSet:i,handshake:c,connectorId:n.id,connectorDefId:n.defId,shapeId:l.id,identifier:p.getIdentifier(l)})}))),v=m.getMatchingHandshake(r,a,s,u,n.handshake).pipe(Object(f.a)(1),Object(g.a)((function(l){var h=t.find((function(e){return e.id===s}));h&&p.modelChangeUtils.updateEntityLinks(h,{diagramId:e.id,fromEntityId:u,toEDataId:r,toEntityId:a,type:o.f.CONNECTOR_BI,isSet:i,handshake:l,connectorId:n.id,connectorDefId:n.defId,shapeId:c.id,identifier:p.getIdentifier(c)})})));h.push(d),h.push(v)};for(var u in l.eData)s(u)},m=this;for(var v in c.eData)d(v)}else{var b=c.eData?c:l;if(!b||!b.eData)return h;var y=c.eData?l:c;if(!y)return h;var x=function(r){var a=b.eData[r],c=C.getIdentifier(y);C.modelChangeUtils.addEDataRefToShape(e,{shapeId:y.id,eDataId:r,entityId:a,isSet:i});var l=t.find((function(e){return e.id===r}));l&&C.modelChangeUtils.updateEntityLinks(l,{diagramId:e.id,fromEntityId:a,type:o.f.REFERENCE,isSet:i,handshake:s.n.handshake[0],connectorId:n.id,connectorDefId:n.defId,shapeId:y.id,shapeDefId:y.defId,identifier:c})},C=this;for(var v in b.eData)x(v)}return h},e.prototype.updateLookupConnectionConnector=function(e,t,n){var r,i,a,s,c=n.id,l=e.getFromEndpoint(n).shape,u=e.getToEndpoint(n).shape,p=t.find((function(e){return e.id===l.eDataId})).entities[l.entityId],h=p.getLinkId(o.f.LOOKUP,e.handshake[0],u.eDataId,u.entityId,c,l.id);if(h){var d=p.links[h];d.connectors||(d.connectors={}),d.connectors=((r={})[c]=((i={})[e.id]={shapeId:l.id,shapeDefId:l.defId,defId:e.defId},i),r);var f=t.find((function(e){return e.id===u.eDataId})).entities[u.entityId],g=f.getLinkId(o.f.LOOKUP,e.handshake[0],l.eDataId,l.entityId,c,u.id);if(!g)return;var m=f.links[g];m.connectors||(m.connectors={}),m.connectors=((a={})[c]=((s={})[e.id]={shapeId:u.id,shapeDefId:u.defId,defId:e.defId},s),a)}},e.prototype.getMatchingHandshake=function(e,t,n,r,i){return Object(p.a)({fromEntity:this.ell.getEntityOnce(e,t),toEntity:this.ell.getEntityOnce(n,r)}).pipe(Object(h.a)((function(e){if(e.fromEntity&&e.toEntity&&i){var t=e.fromEntity.getDef().ports,n=e.toEntity.getDef().ports;if(t&&n)for(var r=Object.keys(t),a=Object.keys(n),o=0;o<i.length;o++)if(r.indexOf(i[o])>-1&&a.indexOf(i[o])>-1)return Object(l.a)(i[o])}return Object(l.a)(void 0)})))},e.updateLinkedEntities=function(e,t,n){var r=this;if(t.links&&n.$set){var i=Object.keys(n.$set).filter((function(e){return/data/.test(e)})),a=Object.keys(n.$set).filter((function(e){return/links/.test(e)}));if(i.length){var o=t.getDef(),s={};i.forEach((function(i){var a=i.replace("data.","");s[a]=n.$set[i],a===o.linkIdDataItem&&r.updateLinkIdentifier(e,t)}));var c=new Map;for(var l in o.dataItems)o.dataItems[l].sendTo&&c.set(l,o.dataItems[l]);c.size>0&&this.sendDataItemUpdates(e,t,s,c)}else if(a.length){this.sendLinkIdentifier(e,t,n);var u=t.getDef(),p=[];for(var l in u.dataItems)u.dataItems[l].sendTo&&p.push({id:l,def:u.dataItems[l].sendTo});p.length>0&&p.forEach((function(n){var r=t.getMatchingLinks(n.def[0].type,n.def[0].handshake);if(r.length>0){var i=t.data[n.id];if(!i){var a=u.dataItems[n.id].default;i=m.a.replaceHandlebars(a,t.data)}r.forEach((function(t){w.a.instance.syncLinkedEData(e,{entityId:t.entityId,dataItemId:n.def[0].target,dataItem:i})}))}}))}}},e.updateLinkIdentifier=function(e,t){var n=t.getLinkIdDataValue();if(n)for(var r in t.links){var i=t.links[r];i.type!==o.f.LOOKUP&&w.a.instance.updateEntityLinkValue(e,{entityId:i.entityId,sourceEDataId:e.id,sourceEntityId:t.id,type:i.type,handshake:i.handshake,identifier:n})}},e.sendDataItemUpdates=function(e,t,n,r){var i=[];for(var a in n)r.has(a)&&i.push({id:a,def:r.get(a).sendTo});i.length>0&&i.forEach((function(r){t.getMatchingLinks(r.def[0].type,r.def[0].handshake).forEach((function(t){w.a.instance.syncLinkedEData(e,{entityId:t.entityId,dataItemId:r.def[0].target,dataItem:n[r.id]})}))}))},e.sendLinkIdentifier=function(e,t,n){var r=t.getLinkIdDataValue();if(r){var i,a=Object.keys(n.$set).filter((function(e){return/links/.test(e)}));if(a.length>0)for(var s in a)if(i=n.$set[a[s]]){var c=Object.keys(i),l=void 0;i.eDataId&&i.entityId?l=i:c.length>0&&i[c[0]].eDataId&&i[c[0]].entityId&&(l=i[c[0]]),l&&l.type!==o.f.LOOKUP&&w.a.instance.updateEntityLinkValue(e,{entityId:l.entityId,sourceEDataId:e.id,sourceEntityId:t.id,type:l.type,handshake:l.handshake,identifier:r})}}},e.\u0275fac=function(t){return new(t||e)(k.pc(w.a),k.pc(a.Ib),k.pc(x.a))},e.\u0275prov=k.bc({token:e,factory:e.\u0275fac}),e}()},xATe:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("D57K"),i=n("5xGT"),a=n("8j5Y"),o=n("dKf+"),s=n("1JG0"),c=n("16Fa"),l=n("d0OC"),u=n("EM62"),p=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.ds=t,i.dhs=n,i.dds=r,i}var n;return Object(r.e)(t,e),n=t,Object.defineProperty(t,"dataDefinition",{get:function(){return{diagramId:!0,lastChangeId:!0}},enumerable:!1,configurable:!0}),t.prototype.prepareProxy=function(){return this.ds.getRawChangeModel(this.resourceId,this.eventData.eventId)},t.prototype.prepareData=function(){var e=this,t=this.data,r=t.diagramId,i=t.lastChangeId;return this.dhs.fetchRawSnapshot(r,i).pipe(Object(a.a)((function(t){e.dds.applyChanges(e.changeModel,t),n.ignoreFields.forEach((function(t){return e.changeModel.__sakota__.reset(t)}))})))},t.prototype.execute=function(){return this.resultData={skipChangeBinders:!0},!0},t.ignoreFields=["lastChangeId","lastUpdated","updatedBy","id","project","collabs","privacy","createdTime","thumbnailUrl"],t.\u0275fac=function(e){return new(e||t)(u.pc(o.a),u.pc(c.a),u.pc(s.a))},t.\u0275prov=u.bc({token:t,factory:t.\u0275fac}),t=n=Object(r.d)([Object(i.v)(),Object(r.g)("design:paramtypes",[o.a,c.a,s.a])],t)}(l.a);Object.defineProperty(p,"name",{value:"RestoreDiagramSnapshot"})},"xEF+":function(e,t,n){"use strict";t.argVal=function(e){e&&this._cursor.args.push(e)},t.arrayStart=function(){this._placeAtCursor({type:"ArrayLiteral",value:[]})},t.arrayVal=function(e){e&&this._cursor.value.push(e)},t.binaryOp=function(e){for(var t=this._grammar.elements[e.value].precedence||0,n=this._cursor._parent;n&&n.operator&&this._grammar.elements[n.operator].precedence>=t;)this._cursor=n,n=n._parent;var r={type:"BinaryExpression",operator:e.value,left:this._cursor};this._setParent(this._cursor,r),this._cursor=n,this._placeAtCursor(r)},t.dot=function(){this._nextIdentEncapsulate=this._cursor&&"UnaryExpression"!==this._cursor.type&&("BinaryExpression"!==this._cursor.type||"BinaryExpression"===this._cursor.type&&this._cursor.right),this._nextIdentRelative=!this._cursor||this._cursor&&!this._nextIdentEncapsulate,this._nextIdentRelative&&(this._relative=!0)},t.filter=function(e){this._placeBeforeCursor({type:"FilterExpression",expr:e,relative:this._subParser.isRelative(),subject:this._cursor})},t.functionCall=function(){this._placeBeforeCursor({type:"FunctionCall",name:this._cursor.value,args:[],pool:"functions"})},t.identifier=function(e){var t={type:"Identifier",value:e.value};this._nextIdentEncapsulate?(t.from=this._cursor,this._placeBeforeCursor(t),this._nextIdentEncapsulate=!1):(this._nextIdentRelative&&(t.relative=!0,this._nextIdentRelative=!1),this._placeAtCursor(t))},t.literal=function(e){this._placeAtCursor({type:"Literal",value:e.value})},t.objKey=function(e){this._curObjKey=e.value},t.objStart=function(){this._placeAtCursor({type:"ObjectLiteral",value:{}})},t.objVal=function(e){this._cursor.value[this._curObjKey]=e},t.subExpression=function(e){this._placeAtCursor(e)},t.ternaryEnd=function(e){this._cursor.alternate=e},t.ternaryMid=function(e){this._cursor.consequent=e},t.ternaryStart=function(){this._tree={type:"ConditionalExpression",test:this._tree},this._cursor=this._tree},t.transform=function(e){this._placeBeforeCursor({type:"FunctionCall",name:e.value,args:[this._cursor],pool:"transforms"})},t.unaryOp=function(e){this._placeAtCursor({type:"UnaryExpression",operator:e.value})}},xYNC:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("D57K"),i=n("5xGT"),a=n("X0jn"),o=n("19Zn"),s=n("nsO7"),c=n("47ST"),l=n("i9xl"),u=n("qZtG"),p=n("TaSY"),h=n("8j5Y"),d=n("7SLS"),f=n("nKku"),g=n("Xpu5"),m=n("B5wR"),v=n("/jjY"),b=n("Fuvo"),y=n("EM62"),x=function(){function e(e){this.commandSvc=e,this.batchSize=1e3}return e.prototype.importData=function(e,t,n){var a=this,o=n.eDefId,f=n.ignoreMappingErrors;if(!e.customEntityDefs.hasOwnProperty(o)){var m="Custom entity definition not found. defId: '"+o+"'";return Object(c.a)(new b.a(m))}var v,y,x=e.customEntityDefs[o];try{var C=this.getEntities(x,t,n);v=C.entities,y=C.errors}catch(k){return Object(c.a)(k)}if(!f&&y.length>0)return i.db.warning("aborting the import. validation errors: ",y),Object(c.a)(new b.a("mappings error",y));if(0===v.length)return i.db.warning("aborting the import. no data to import"),Object(c.a)(new b.a("no data to import",y));i.db.info("Importing entities...");var w=Object(s.chunk)(v,this.batchSize).map((function(t){return Object(l.a)((function(){return a.commandSvc.dispatch(g.a.importEntities,e.id,{entities:t,entityDef:x})}))}));return u.a.apply(void 0,Object(r.j)(w)).pipe(Object(p.a)(),Object(h.a)((function(){return i.db.info("Finished importing entities")})),Object(d.a)({entities:v,errors:y}))},e.prototype.getEntities=function(e,t,n){var s,c,l=Object(r.h)(t),u=l[0],p=l.slice(1),h=n.mappings,d=n.eDefId,g=n.ignoreMappingErrors,b={};try{for(var y=Object(r.k)(h),x=y.next();!x.done;x=y.next()){var C=x.value,w=C.csvIndex,k=C.dataItemId;if(w<0||w>=u.length)throw new Error("invalid csv column. column index: "+w);if(!e.dataItems[k])throw new Error("Data item with id '"+k+"' not found");var S=e.dataItems[k],O=S.type,E=S.options;b[k]={csvIndex:w,parse:f.a.getParser(e.dataItems[k].type),validator:o.i.instance.create(Object(r.a)(Object(r.a)({},e.dataItems[k]),{validationRules:{},typeParams:O===a.c.OPTION_LIST?{options:E}:{}}))}}}catch(N){s={error:N}}finally{try{x&&!x.done&&(c=y.return)&&c.call(y)}finally{if(s)throw s.error}}for(var _=[],I=[],P=0;P<p.length;P++){var T=p[P],A=new v.a(i.sb.entityId(),d);for(var M in A.defId=m.a.customEdataDefId,A.data={},A.shapes={},e.dataItems)A.data[M]=e.dataItems[M].default;var D=null,j=!0;for(var k in b){if(b[k].parse?A.data[k]=b[k].parse(T[b[k].csvIndex]):A.data[k]=T[b[k].csvIndex],D=b[k].validator.validate(A.data[k])){if(I.push({rowIndex:P,columnIndex:b[k].csvIndex,parsedValue:A.data[k],value:T[b[k].csvIndex],error:D}),!g)return{entities:_,errors:I};delete A.data[k]}else j=!1}j||_.push(A)}return{entities:_,errors:I}},e.\u0275fac=function(t){return new(t||e)(y.pc(i.B))},e.\u0275prov=y.bc({token:e,factory:e.\u0275fac}),e}()},xfVB:function(e,t,n){"use strict";var r=n("IGGJ")(n("RhWx")),i={functions:"Jexl Function",transforms:"Transform"};t.ArrayLiteral=function(e){return this.evalArray(e.value)},t.BinaryExpression=function(e){var t=this,n=this._grammar.elements[e.operator];if(n.evalOnDemand){var r=function(e){return{eval:function(){return t.eval(e)}}};return n.evalOnDemand(r(e.left),r(e.right))}return this.Promise.all([this.eval(e.left),this.eval(e.right)]).then((function(e){return n.eval(e[0],e[1])}))},t.ConditionalExpression=function(e){var t=this;return this.eval(e.test).then((function(n){return n?e.consequent?t.eval(e.consequent):n:t.eval(e.alternate)}))},t.FilterExpression=function(e){var t=this;return this.eval(e.subject).then((function(n){return e.relative?t._filterRelative(n,e.expr):t._filterStatic(n,e.expr)}))},t.Identifier=function(e){return e.from?this.eval(e.from).then((function(t){if(null!=t)return Array.isArray(t)&&(t=t[0]),t[e.value]})):e.relative?this._relContext[e.value]:this._context[e.value]},t.Literal=function(e){return e.value},t.ObjectLiteral=function(e){return this.evalMap(e.value)},t.FunctionCall=function(e){var t=i[e.pool];if(!t)throw new Error("Corrupt AST: Pool '".concat(e.pool,"' not found"));var n=this._grammar[e.pool][e.name];if(!n)throw new Error("".concat(t," ").concat(e.name," is not defined."));return this.evalArray(e.args||[]).then((function(e){return n.apply(void 0,(0,r.default)(e))}))},t.UnaryExpression=function(e){var t=this;return this.eval(e.right).then((function(n){return t._grammar.elements[e.operator].eval(n)}))}},xpZS:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("nsO7"),i=n("6Oco"),a=n("C0rp"),o=n("X0jn"),s=n("EM62"),c=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"TextBoundsBinder"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paths",{get:function(){return["texts","scaleX"]},enumerable:!1,configurable:!0}),e.prototype.apply=function(e){var t=e.__sakota__.getChanges();if(t.$set)return this.shapeScaleXChange(e,t),this.shapeTextsValueChange(e,t),Object(i.b)()},e.prototype.getTextBounds=function(e,t){return void 0===t&&(t=1e4),a.bounds(e,t,o.b)},e.prototype.shapeScaleXChange=function(t,n){var i=this,a=function(n){e.regexScaleX.lastIndex=0;var a=e.regexScaleX.exec(n);if(!a)return"continue";var c=a[1],l=t.shapes[c];if(!l.texts||!s.isBasic(l))return"continue";Object(r.forEach)(l.texts,(function(e,t){var n=l.texts[t];if(!n)return!1;var r=n.content;!n.plainText&&n.placeholderPlainText&&(r=n.placeholder);var a=i.getTextBounds(r),s=Math.abs(l.defaultBounds.width*l.scaleX),c=n.hitArea?n.hitArea.width-2*o.w:s-2*o.w;if(n.wordWrap&&a.width>c){var u=i.getTextBounds(r,c);n.width=u.width,n.height=u.height}else n.width=a.width,n.height=a.height}))},s=this;for(var c in n.$set)a(c)},e.prototype.isBasic=function(e){return Object.keys(e.texts).length<=1},e.prototype.shapeTextsValueChange=function(t,n){var r=this,i=new Set;for(var a in n.$set){e.regexTexts.lastIndex=0;var s=e.regexTexts.exec(a);if(s){var c=s[1],l=s[2];i.add(c+"-"+l)}}i.forEach((function(e){var n=e.split("-"),i=n[0],a=n[1],s=t.shapes[i],c=s.texts[a],l=c.content;!c.plainText&&c.placeholderPlainText&&(l=c.placeholder);var u=r.getTextBounds(l);c.minWidth=u.minWidth;var p=2*o.w,h=Math.abs(c.hitArea?c.hitArea.width:s.width)-p;if(!s.autoResizeWidth&&c.wordWrap&&u.width>h){var d=r.getTextBounds(l,h);c.width=d.width,c.height=d.height}else c.width=u.width,c.height=u.height}))},e.regexScaleX=/shapes\.([^\.]+)\.scaleX/g,e.regexTexts=/shapes\.([^\.]+)\.texts\.([^\.]+)\.content/g,e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},xzff:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(n("INYq")),a=r(n("QSAZ")),o=n("33n6"),s=n("MtdZ"),c=r(n("ZcxV")),l=r(n("V4YE")),u=r(n("lCA4")),p=i.default.create;function h(){var e=p();return e.compile=function(t,n){return s.compile(t,n,e)},e.precompile=function(t,n){return s.precompile(t,n,e)},e.AST=a.default,e.Compiler=s.Compiler,e.JavaScriptCompiler=c.default,e.Parser=o.parser,e.parse=o.parse,e.parseWithoutProcessing=o.parseWithoutProcessing,e}var d=h();d.create=h,u.default(d),d.Visitor=l.default,d.default=d,t.default=d,e.exports=t.default},y0dT:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("Cupj");var r=n("ZTXN"),i=n("C05f"),a=n("ROBh"),o=n("X0jn"),s=n("19Zn"),c=n("EM62"),l=n("2kYt"),u=n("Wrqg"),p=n("jHi0");function h(e,t){if(1&e&&(c.wc(),c.lc(0,"svg",4),c.gc(1,"use"),c.kc()),2&e){var n=c.xc();c.Sb(1),c.Tb("href",n.iconHref,null,"xlink")}}var d=function(e){return{content:e}},f=function(){return["Tab","Enter"]};function g(e,t){if(1&e){var n=c.mc();c.lc(0,"div",5),c.lc(1,"text-input",6),c.tc("submit",(function(e){return c.Pc(n),c.xc().handleSubmit(e,0)})),c.kc(),c.lc(2,"text-input",6),c.tc("submit",(function(e){return c.Pc(n),c.xc().handleSubmit(e,1)})),c.kc(),c.lc(3,"text-input",6),c.tc("submit",(function(e){return c.Pc(n),c.xc().handleSubmit(e,2)})),c.kc(),c.lc(4,"text-input",6),c.tc("submit",(function(e){return c.Pc(n),c.xc().handleSubmit(e,3)})),c.kc(),c.kc()}if(2&e){var r=t.ngIf,i=c.xc();c.Sb(1),c.Cc("value",r[0])("type",i.number)("tooltip",c.Hc(24,d,i._data.typeParams.tooltips[0]))("invalidInput",i.invalidInput[0])("submitOnCode",c.Gc(26,f))("submitOnBlur",!0),c.Sb(1),c.Cc("value",r[1])("type",i.number)("tooltip",c.Hc(27,d,i._data.typeParams.tooltips[1]))("invalidInput",i.invalidInput[1])("submitOnCode",c.Gc(29,f))("submitOnBlur",!0),c.Sb(1),c.Cc("value",r[2])("type",i.number)("tooltip",c.Hc(30,d,i._data.typeParams.tooltips[2]))("invalidInput",i.invalidInput[2])("submitOnCode",c.Gc(32,f))("submitOnBlur",!0),c.Sb(1),c.Cc("value",r[3])("type",i.number)("tooltip",c.Hc(33,d,i._data.typeParams.tooltips[3]))("invalidInput",i.invalidInput[3])("submitOnCode",c.Gc(35,f))("submitOnBlur",!0)}}var m=function(){function e(){this.invalidInput=new Array(4).fill(!1),this._change=new r.a,this.valueSource=new i.a([]),this.dataSource=new i.a([])}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconHref",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this._data.icon},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this.invalidInput.fill(!1),this._data=e,this.dataSource.next(e.value),this.dataItem||(this.dataItem=s.i.instance.create({type:o.c.NUMBER,validationRules:e.validationRules}))},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){this.valueSource.next(this._data.value)},e.prototype.applyAnimated=function(){return this.apply(),Object(a.a)({})},e.prototype.handleSubmit=function(e,t){if(isNaN(e)||this.dataItem&&null!==this.dataItem.validate(e))this.invalidInput[t]=!0;else{var n=this._data.value;n[t]=+e,this._change.next({value:n})}},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Zb({type:e,selectors:[["sidebar-multi-input"]],decls:7,vars:5,consts:[[1,"fx-margin-bottom-10"],[1,"sidebar-multi-input-label"],["class","nu-icon nu-icon-med",4,"ngIf"],["class","sidebar-multi-input-controls",4,"ngIf"],[1,"nu-icon","nu-icon-med"],[1,"sidebar-multi-input-controls"],[3,"value","type","tooltip","invalidInput","submitOnCode","submitOnBlur","submit"]],template:function(e,t){1&e&&(c.lc(0,"div",0),c.lc(1,"div",1),c.cd(2,h,2,1,"svg",2),c.lc(3,"label"),c.ed(4),c.kc(),c.kc(),c.cd(5,g,5,36,"div",3),c.yc(6,"async"),c.kc()),2&e&&(c.Sb(2),c.Cc("ngIf",t._data.icon),c.Sb(2),c.fd(t._data.label),c.Sb(1),c.Cc("ngIf",c.zc(6,3,t.dataSource)))},directives:[l.t,u.a,p.a],pipes:[l.b],styles:[".sidebar-multi-input-label[_ngcontent-%COMP%]{display:flex;align-items:center}.sidebar-multi-input-label[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{margin-right:5px}.sidebar-multi-input-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.sidebar-multi-input-controls[_ngcontent-%COMP%]   text-input[_ngcontent-%COMP%]{flex:1;margin-right:2px}"],changeDetection:0}),e}()},yH5A:function(e,t,n){var r,i;i=function(e){var t=["N","E","A","D"];function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function c(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function l(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function u(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function p(e){var t=0,n=l(e);if("array"===n)return e.forEach((function(e){t+=p(e)})),t+u("[type: array, hash: "+t+"]");if("object"===n){for(var r in e)if(e.hasOwnProperty(r)){var i="[ type: object, key: "+r+", value hash: "+p(e[r])+"]";t+=u(i)}return t}return t+u("[ type: "+n+" ; value: "+e+"]")}function h(e,t,n,r,c,u,d,f){n=n||[],d=d||[];var g=(c=c||[]).slice(0);if(null!=u){if(r){if("function"==typeof r&&r(g,u))return;if("object"==typeof r){if(r.prefilter&&r.prefilter(g,u))return;if(r.normalize){var m=r.normalize(g,u,e,t);m&&(e=m[0],t=m[1])}}}g.push(u)}"regexp"===l(e)&&"regexp"===l(t)&&(e=e.toString(),t=t.toString());var v,b,y,x,C=typeof e,w=typeof t,k="undefined"!==C||d&&d.length>0&&d[d.length-1].lhs&&Object.getOwnPropertyDescriptor(d[d.length-1].lhs,u),S="undefined"!==w||d&&d.length>0&&d[d.length-1].rhs&&Object.getOwnPropertyDescriptor(d[d.length-1].rhs,u);if(!k&&S)n.push(new a(g,t));else if(!S&&k)n.push(new o(g,e));else if(l(e)!==l(t))n.push(new i(g,e,t));else if("date"===l(e)&&e-t!=0)n.push(new i(g,e,t));else if("object"===C&&null!==e&&null!==t){for(v=d.length-1;v>-1;--v)if(d[v].lhs===e){x=!0;break}if(x)e!==t&&n.push(new i(g,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){for(f&&(e.sort((function(e,t){return p(e)-p(t)})),t.sort((function(e,t){return p(e)-p(t)}))),v=t.length-1,b=e.length-1;v>b;)n.push(new s(g,v,new a(void 0,t[v--])));for(;b>v;)n.push(new s(g,b,new o(void 0,e[b--])));for(;v>=0;--v)h(e[v],t[v],n,r,g,v,d,f)}else{var O=Object.keys(e),E=Object.keys(t);for(v=0;v<O.length;++v)y=O[v],(x=E.indexOf(y))>=0?(h(e[y],t[y],n,r,g,y,d,f),E[x]=null):h(e[y],void 0,n,r,g,y,d,f);for(v=0;v<E.length;++v)(y=E[v])&&h(void 0,t[y],n,r,g,y,d,f)}d.length=d.length-1}}else e!==t&&("number"===C&&isNaN(e)&&isNaN(t)||n.push(new i(g,e,t)))}function d(e,t,n,r,i){var a=[];if(h(e,t,a,r,null,null,null,i),n)for(var o=0;o<a.length;++o)n(a[o]);return a}function f(e,t,n,r,i,a,o){return h(e,t,n,r,i,a,o,!0)}function g(e,t,n,r){var i=d(e,t,r?function(e){e&&r.push(e)}:void 0,n);return r||(i.length?i:void 0)}function m(e,t,n,r){var i=d(e,t,r?function(e){e&&r.push(e)}:void 0,n,!0);return r||(i.length?i:void 0)}function v(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":v(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":v(e[t],n.index,n.item);break;case"D":e=c(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function b(e,n,r){if(void 0===r&&n&&~t.indexOf(n.kind)&&(r=n),e&&r&&r.kind){for(var i=e,a=-1,o=r.path?r.path.length-1:0;++a<o;)void 0===i[r.path[a]]&&(i[r.path[a]]=void 0!==r.path[a+1]&&"number"==typeof r.path[a+1]?[]:{}),i=i[r.path[a]];switch(r.kind){case"A":r.path&&void 0===i[r.path[a]]&&(i[r.path[a]]=[]),v(r.path?i[r.path[a]]:i,r.index,r.item);break;case"D":delete i[r.path[a]];break;case"E":case"N":i[r.path[a]]=r.rhs}}}function y(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":y(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":y(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=c(e,t)}return e}function x(e,t,n){if(e&&t&&n&&n.kind){var r,i,a=e;for(i=n.path.length-1,r=0;r<i;r++)void 0===a[n.path[r]]&&(a[n.path[r]]={}),a=a[n.path[r]];switch(n.kind){case"A":y(a[n.path[r]],n.index,n.item);break;case"D":case"E":a[n.path[r]]=n.lhs;break;case"N":delete a[n.path[r]]}}}function C(e,t,n){e&&t&&d(e,t,(function(r){n&&!n(e,t,r)||b(e,t,r)}))}return n(i,r),n(a,r),n(o,r),n(s,r),Object.defineProperties(g,{diff:{value:g,enumerable:!0},orderIndependentDiff:{value:m,enumerable:!0},observableDiff:{value:d,enumerable:!0},orderIndependentObservableDiff:{value:f,enumerable:!0},orderIndepHash:{value:p,enumerable:!0},applyDiff:{value:C,enumerable:!0},applyChange:{value:b,enumerable:!0},revertChange:{value:x,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}}),g.DeepDiff=g,e&&(e.DeepDiff=g),g}(this),void 0===(r=(function(){return i}).call(t,n,t,e))||(e.exports=r)},yhNa:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("Cupj");var r=n("ZTXN"),i=n("C05f"),a=n("6Oco"),o=n("EM62"),s=n("Wrqg"),c=n("2kYt"),l=function(){return["Tab","Enter"]},u=function(){function e(){this._change=new r.a,this.valueSource=new i.a("")}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!1,configurable:!0}),e.prototype.setData=function(e){this._data=e},e.prototype.setProperties=function(e){this._props=e},e.prototype.apply=function(){this.valueSource.next(this._data.value)},e.prototype.applyAnimated=function(){return this.apply(),Object(a.b)()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Zb({type:e,selectors:[["sidebar-input"]],decls:2,vars:12,consts:[[3,"inline","multiLined","placeholder","type","label","readonly","value","submitOnCode","submitOnBlur","submit"]],template:function(e,t){1&e&&(o.lc(0,"text-input",0),o.tc("submit",(function(e){return t._change.next({value:e})})),o.yc(1,"async"),o.kc()),2&e&&(o.Cc("inline","left"===t._props.labelPosition)("multiLined",!1)("type","number")("label",t._props.label)("readonly",t._data.params.readOnly)("value",o.zc(1,9,t.valueSource))("submitOnCode",o.Gc(11,l))("submitOnBlur",!0),o.Tb("data-testid",t.id))},directives:[s.a],pipes:[c.b],encapsulation:2,changeDetection:0}),e}()},z3tU:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("ROBh"),i=n("5xGT"),a=n("YtkY"),o=n("8j5Y"),s=n("EM62"),c=function(){function e(e){this.loader=e}return Object.defineProperty(e.prototype,"definitionSummaryKey",{get:function(){return i.m.get("RESOURCE_LOCATION")+i.m.get("SHAPE_RESOURCE_BASE")+"def-sum.json"},enumerable:!1,configurable:!0}),e.prototype.getDefinitions=function(e){var t=this;return this.loadingObservable?this.loadingObservable.pipe(Object(a.a)((function(){return t.findMany(e)}))):Object(r.a)(this.findMany(e))},e.prototype.getDefinition=function(e){var t=this;return this.loadingObservable?this.loadingObservable.pipe(Object(a.a)((function(){return t.findOne(e)}))):Object(r.a)(this.findOne(e))},e.prototype.load=function(){var e=this;return this.loadingObservable=this.loader.forceLoad(this.definitionSummaryKey).pipe(Object(a.a)((function(t){return e.loadedDefinitionSummery=t.defs}))),this.loadingObservable.pipe(Object(o.a)({complete:function(){return e.loadingObservable=void 0}}))},e.prototype.findMany=function(e){var t=this;return e.map((function(e){return t.loadedDefinitionSummery.find((function(n){return t.getFullyQualifiedDefId(n)===e}))})).filter((function(e){return!!e}))},e.prototype.findOne=function(e){var t=this;return this.loadedDefinitionSummery.find((function(n){return e===t.getFullyQualifiedDefId(n)}))},e.prototype.getFullyQualifiedDefId=function(e){return e.defId+"."+e.version},e.\u0275fac=function(t){return new(t||e)(s.pc(i.yb))},e.\u0275prov=s.bc({token:e,factory:e.\u0275fac}),e}()},zFpY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("ROBh"),i=n("EM62"),a=function(){function e(){}return e.prototype.getFeatureData=function(e,t){var n=t.options.map((function(e){return{id:e.id,label:e.label,buttonLabel:e.label,value:{defId:e.defId,version:e.version,handshake:e.handshake},shapeId:t.shapeId}})),i=n.find((function(e){return e.id===t.selected}));return i?i.selected=!0:n[0].selected=!0,Object(r.a)({value:n})},e.prototype.getApplyData=function(e,t){var n;return Object(r.a)({changes:(n={},n[t.shapeId]=t.value,n),updateDefinitions:!0,updateConnections:!0})},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.bc({token:e,factory:e.\u0275fac}),e}()},zd2y:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("D57K"),i=n("C5+t"),a=n("5xGT"),o=n("xnGY"),s=n("i9xl"),c=n("6Oco"),l=n("P4Xx"),u=n("J+dc"),p=n("TLy2"),h=n("EM62"),d=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.logger=t,o.messageFactory=n,o.authentication=r,o.commandService=i,o.neutrinoConnection=a,o}return Object(r.e)(t,e),t.prototype.startSubscription=function(e){var t=this;return this.logger.debug("SubscriptionService: starting subscription: "+e.resourceId),Object(s.a)((function(){return e.getLatestSyncedTime().pipe(Object(u.a)(1))})).pipe(Object(p.a)((function(n){return t.sendSubStartRequest(e,n)})),Object(p.a)((function(n){return t.handleSubStartResponse(e,n)})))},t.prototype.closeSubscription=function(e){return this.logger.debug("SubscriptionService: closing subscription: "+e.resourceId),this.sendSubEndRequest(e)},t.prototype.sendSubStartRequest=function(e,t){var n=this.messageFactory.createSubscriptionMessage("start",e.subscription,e.resourceId);return n.authToken=this.authentication.token,n.payload=t?{latestCommentTimestamp:t}:{},this.neutrinoConnection.send(n)},t.prototype.sendSubEndRequest=function(e){var t=this.messageFactory.createSubscriptionMessage("end",e.subscription,e.resourceId);return t.authToken=this.authentication.token,t.payload={},this.neutrinoConnection.send(t)},t.prototype.handleSubStartResponse=function(e,t){var n=t.ppld,r=[];if(n.comments){var i={type:e.modelType,data:{model:n.comments}};r.push(this.commandService.collab("SubStoreModels",t.rid,null,i))}return r.length?Object(l.a)(r):Object(c.b)()},t.\u0275fac=function(e){return new(e||t)(h.pc(a.db),h.pc(i.f),h.pc(i.a),h.pc(a.B),h.pc(i.g))},t.\u0275prov=h.bc({token:t,factory:t.\u0275fac}),t}(o.c)},zsv6:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("YtkY"),i=n("SBw3"),a=n("5xGT"),o=n("ROBh"),s=n("QoSw"),c=n("EM62"),l=function(){function e(e,t,n){this.ll=e,this.state=t,this.featureList=n}return e.prototype.getFeatureData=function(e,t){var n=this;void 0===t&&(t={});var i=this.featureList.getFeature(e),a=this.state.get("Selected");return this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(r.a)((function(r){if(t.params={readOnly:i.data.readOnly},"selectionAngle"===e&&1===a.length){var o=r.getShape(a[0]).angle;return t.value=Math.round(o),t}return t.value=n.getUIData(e,r),t})))},e.prototype.getApplyData=function(e,t){return Object(o.a)({})},e.prototype.getUIData=function(e,t){var n=this.state.get("Selected"),r=t.getShape(n[0]);if(!r)return"-";if(r.isConnector()){var i=r;if("connectorStartX"===e){var a=i.path[i.path.headId];return this.roundValue(a.x)}if("connectorStartY"===e){a=i.path[i.path.headId];return this.roundValue(a.y)}if("connectorEndX"===e){var o=i.path[i.path.tailId];return this.roundValue(o.x)}if("connectorEndY"===e){o=i.path[i.path.tailId];return this.roundValue(o.y)}}else{var s=t.getBounds(n);if("selectionPositionX"===e)return this.roundValue(s.x);if("selectionPositionY"===e)return this.roundValue(s.y);if("selectionWidth"===e)return this.roundValue(s.width);if("selectionHeight"===e)return this.roundValue(s.height)}},e.prototype.roundValue=function(e){return""+Math.round(e)},e.\u0275fac=function(t){return new(t||e)(c.pc(s.a),c.pc(a.Ib),c.pc(i.a))},e.\u0275prov=c.bc({token:e,factory:e.\u0275fac}),e}()}}]);
//# sourceMappingURL=6.4ae057a0ff5f569b3a55.js.map